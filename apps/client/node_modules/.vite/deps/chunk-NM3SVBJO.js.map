{
  "version": 3,
  "sources": ["../../../../../node_modules/rxdb/src/plugins/utils/utils-array.ts", "../../../../../node_modules/js-base64/base64.mjs", "../../../../../node_modules/rxdb/src/plugins/utils/utils-base64.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-blob.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-revision.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-object.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-document.ts", "../../../../../node_modules/rxdb/src/overwritable.ts", "../../../../../node_modules/@babel/runtime/helpers/esm/typeof.js", "../../../../../node_modules/@babel/runtime/helpers/esm/toPrimitive.js", "../../../../../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js", "../../../../../node_modules/@babel/runtime/helpers/esm/createClass.js", "../../../../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js", "../../../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js", "../../../../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js", "../../../../../node_modules/@babel/runtime/helpers/esm/isNativeFunction.js", "../../../../../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js", "../../../../../node_modules/@babel/runtime/helpers/esm/construct.js", "../../../../../node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js", "../../../../../node_modules/rxdb/src/rx-error.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-hash.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-promise.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-regex.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-string.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-number.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-object-deep-equal.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-object-dot-prop.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-map.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-error.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-time.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-other.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-rxdb-version.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-global.ts", "../../../../../node_modules/rxdb/src/plugins/utils/utils-premium.ts", "../../../../../node_modules/rxdb/src/rx-schema-helper.ts"],
  "sourcesContent": ["import type {\n    MaybePromise,\n    MaybeReadonly\n} from '../../types/index.d.ts';\n\nexport function lastOfArray<T>(ar: T[]): T | undefined {\n    return ar[ar.length - 1];\n}\n\n/**\n * shuffle the given array\n */\nexport function shuffleArray<T>(arr: T[]): T[] {\n    return arr.slice(0).sort(() => (Math.random() - 0.5));\n}\n\nexport function randomOfArray<T>(arr: T[]): T {\n    const randomElement = arr[Math.floor(Math.random() * arr.length)];\n    return randomElement;\n}\n\n\nexport function toArray<T>(input: T | T[] | Readonly<T> | Readonly<T[]>): T[] {\n    return Array.isArray(input) ? (input as any[]).slice(0) : ([input] as any);\n}\n\n/**\n * Split array with items into smaller arrays with items\n * @link https://stackoverflow.com/a/7273794/3443137\n */\nexport function batchArray<T>(array: T[], batchSize: number): T[][] {\n    array = array.slice(0);\n    const ret: T[][] = [];\n    while (array.length) {\n        const batch = array.splice(0, batchSize);\n        ret.push(batch);\n    }\n    return ret;\n}\n\n/**\n * @link https://stackoverflow.com/a/15996017\n */\nexport function removeOneFromArrayIfMatches<T>(ar: T[], condition: (x: T) => boolean): T[] {\n    ar = ar.slice();\n    let i = ar.length;\n    let done = false;\n    while (i-- && !done) {\n        if (condition(ar[i])) {\n            done = true;\n            ar.splice(i, 1);\n        }\n    }\n    return ar;\n}\n\n/**\n * returns true if the supplied argument is either an Array<T> or a Readonly<Array<T>>\n */\nexport function isMaybeReadonlyArray(x: any): x is MaybeReadonly<any[]> {\n    // While this looks strange, it's a workaround for an issue in TypeScript:\n    // https://github.com/microsoft/TypeScript/issues/17002\n    //\n    // The problem is that `Array.isArray` as a type guard returns `false` for a readonly array,\n    // but at runtime the object is an array and the runtime call to `Array.isArray` would return `true`.\n    // The type predicate here allows for both `Array<T>` and `Readonly<Array<T>>` to pass a type check while\n    // still performing runtime type inspection.\n    return Array.isArray(x);\n}\n\n\n\nexport function isOneItemOfArrayInOtherArray<T>(ar1: T[], ar2: T[]): boolean {\n    for (let i = 0; i < ar1.length; i++) {\n        const el = ar1[i];\n        const has = ar2.includes(el);\n        if (has) {\n            return true;\n        }\n    }\n    return false;\n}\n\n\n/**\n * Use this in array.filter() to remove all empty slots\n * and have the correct typings afterwards.\n * @link https://stackoverflow.com/a/46700791/3443137\n */\nexport function arrayFilterNotEmpty<TValue>(value: TValue | null | undefined): value is TValue {\n    if (value === null || value === undefined) {\n        return false;\n    }\n    return true;\n}\n\nexport function countUntilNotMatching<T>(\n    ar: T[],\n    matchingFn: (v: T, idx: number) => boolean\n): number {\n    let count = 0;\n    let idx = -1;\n    for (const item of ar) {\n        idx = idx + 1;\n        const matching = matchingFn(item, idx);\n        if (matching) {\n            count = count + 1;\n        } else {\n            break;\n        }\n    }\n    return count;\n}\n\nexport async function asyncFilter<T>(array: T[], predicate: (item: T, index: number, a: T[]) => MaybePromise<boolean>): Promise<T[]> {\n    const filters = await Promise.all(\n        array.map(predicate)\n    );\n\n    return array.filter((...[, index]) => filters[index]);\n}\n\n/**\n * @link https://stackoverflow.com/a/3762735\n */\nexport function sumNumberArray(array: number[]): number {\n    let count = 0;\n    for (let i = array.length; i--;) {\n        count += array[i];\n    }\n    return count;\n}\n\nexport function maxOfNumbers(arr: number[]): number {\n    return Math.max(...arr);\n}\n\n\n/**\n * Appends the given documents to the given array.\n * This will mutate the first given array.\n * Mostly used as faster alternative to Array.concat()\n * because .concat() is so slow.\n * @link https://www.measurethat.net/Benchmarks/Show/4223/0/array-concat-vs-spread-operator-vs-push#latest_results_block\n * \n * TODO it turns out that in mid 2024 v8 has optimized Array.concat()\n * so it might be faster to just use concat() again:\n * @link https://jsperf.app/qiqawa/10\n */\nexport function appendToArray<T>(ar: T[], add: T[] | readonly T[]): void {\n    /**\n     * Pre-increasing the array size has turned out\n     * to be way faster when big arrays must be handled.\n     * @link https://dev.to/uilicious/javascript-array-push-is-945x-faster-than-array-concat-1oki\n     */\n    const addSize = add.length;\n    if (addSize === 0) {\n        return;\n    }\n    const baseSize = ar.length;\n    ar.length = baseSize + add.length;\n    for (let i = 0; i < addSize; ++i) {\n        ar[baseSize + i] = add[i];\n    }\n}\n\n/**\n * @link https://gist.github.com/telekosmos/3b62a31a5c43f40849bb\n */\nexport function uniqueArray(arrArg: string[]): string[] {\n    return arrArg.filter(function (elem, pos, arr) {\n        return arr.indexOf(elem) === pos;\n    });\n}\n\n\nexport function sortByObjectNumberProperty<T>(property: keyof T) {\n    return (a: T, b: T) => {\n        return (b as any)[property] - (a as any)[property];\n    }\n}\n", "/**\n *  base64.ts\n *\n *  Licensed under the BSD 3-Clause License.\n *    http://opensource.org/licenses/BSD-3-Clause\n *\n *  References:\n *    http://en.wikipedia.org/wiki/Base64\n *\n * @author Dan Kogai (https://github.com/dankogai)\n */\nconst version = '3.7.8';\n/**\n * @deprecated use lowercase `version`.\n */\nconst VERSION = version;\nconst _hasBuffer = typeof Buffer === 'function';\nconst _TD = typeof TextDecoder === 'function' ? new TextDecoder() : undefined;\nconst _TE = typeof TextEncoder === 'function' ? new TextEncoder() : undefined;\nconst b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst b64chs = Array.prototype.slice.call(b64ch);\nconst b64tab = ((a) => {\n    let tab = {};\n    a.forEach((c, i) => tab[c] = i);\n    return tab;\n})(b64chs);\nconst b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\nconst _fromCC = String.fromCharCode.bind(String);\nconst _U8Afrom = typeof Uint8Array.from === 'function'\n    ? Uint8Array.from.bind(Uint8Array)\n    : (it) => new Uint8Array(Array.prototype.slice.call(it, 0));\nconst _mkUriSafe = (src) => src\n    .replace(/=/g, '').replace(/[+\\/]/g, (m0) => m0 == '+' ? '-' : '_');\nconst _tidyB64 = (s) => s.replace(/[^A-Za-z0-9\\+\\/]/g, '');\n/**\n * polyfill version of `btoa`\n */\nconst btoaPolyfill = (bin) => {\n    // console.log('polyfilled');\n    let u32, c0, c1, c2, asc = '';\n    const pad = bin.length % 3;\n    for (let i = 0; i < bin.length;) {\n        if ((c0 = bin.charCodeAt(i++)) > 255 ||\n            (c1 = bin.charCodeAt(i++)) > 255 ||\n            (c2 = bin.charCodeAt(i++)) > 255)\n            throw new TypeError('invalid character found');\n        u32 = (c0 << 16) | (c1 << 8) | c2;\n        asc += b64chs[u32 >> 18 & 63]\n            + b64chs[u32 >> 12 & 63]\n            + b64chs[u32 >> 6 & 63]\n            + b64chs[u32 & 63];\n    }\n    return pad ? asc.slice(0, pad - 3) + \"===\".substring(pad) : asc;\n};\n/**\n * does what `window.btoa` of web browsers do.\n * @param {String} bin binary string\n * @returns {string} Base64-encoded string\n */\nconst _btoa = typeof btoa === 'function' ? (bin) => btoa(bin)\n    : _hasBuffer ? (bin) => Buffer.from(bin, 'binary').toString('base64')\n        : btoaPolyfill;\nconst _fromUint8Array = _hasBuffer\n    ? (u8a) => Buffer.from(u8a).toString('base64')\n    : (u8a) => {\n        // cf. https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string/12713326#12713326\n        const maxargs = 0x1000;\n        let strs = [];\n        for (let i = 0, l = u8a.length; i < l; i += maxargs) {\n            strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));\n        }\n        return _btoa(strs.join(''));\n    };\n/**\n * converts a Uint8Array to a Base64 string.\n * @param {boolean} [urlsafe] URL-and-filename-safe a la RFC4648 ยง5\n * @returns {string} Base64 string\n */\nconst fromUint8Array = (u8a, urlsafe = false) => urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const utob = (src: string) => unescape(encodeURIComponent(src));\n// reverting good old fationed regexp\nconst cb_utob = (c) => {\n    if (c.length < 2) {\n        var cc = c.charCodeAt(0);\n        return cc < 0x80 ? c\n            : cc < 0x800 ? (_fromCC(0xc0 | (cc >>> 6))\n                + _fromCC(0x80 | (cc & 0x3f)))\n                : (_fromCC(0xe0 | ((cc >>> 12) & 0x0f))\n                    + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n                    + _fromCC(0x80 | (cc & 0x3f)));\n    }\n    else {\n        var cc = 0x10000\n            + (c.charCodeAt(0) - 0xD800) * 0x400\n            + (c.charCodeAt(1) - 0xDC00);\n        return (_fromCC(0xf0 | ((cc >>> 18) & 0x07))\n            + _fromCC(0x80 | ((cc >>> 12) & 0x3f))\n            + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n            + _fromCC(0x80 | (cc & 0x3f)));\n    }\n};\nconst re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-8 string\n * @returns {string} UTF-16 string\n */\nconst utob = (u) => u.replace(re_utob, cb_utob);\n//\nconst _encode = _hasBuffer\n    ? (s) => Buffer.from(s, 'utf8').toString('base64')\n    : _TE\n        ? (s) => _fromUint8Array(_TE.encode(s))\n        : (s) => _btoa(utob(s));\n/**\n * converts a UTF-8-encoded string to a Base64 string.\n * @param {boolean} [urlsafe] if `true` make the result URL-safe\n * @returns {string} Base64 string\n */\nconst encode = (src, urlsafe = false) => urlsafe\n    ? _mkUriSafe(_encode(src))\n    : _encode(src);\n/**\n * converts a UTF-8-encoded string to URL-safe Base64 RFC4648 ยง5.\n * @returns {string} Base64 string\n */\nconst encodeURI = (src) => encode(src, true);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const btou = (src: string) => decodeURIComponent(escape(src));\n// reverting good old fationed regexp\nconst re_btou = /[\\xC0-\\xDF][\\x80-\\xBF]|[\\xE0-\\xEF][\\x80-\\xBF]{2}|[\\xF0-\\xF7][\\x80-\\xBF]{3}/g;\nconst cb_btou = (cccc) => {\n    switch (cccc.length) {\n        case 4:\n            var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\n                | ((0x3f & cccc.charCodeAt(1)) << 12)\n                | ((0x3f & cccc.charCodeAt(2)) << 6)\n                | (0x3f & cccc.charCodeAt(3)), offset = cp - 0x10000;\n            return (_fromCC((offset >>> 10) + 0xD800)\n                + _fromCC((offset & 0x3FF) + 0xDC00));\n        case 3:\n            return _fromCC(((0x0f & cccc.charCodeAt(0)) << 12)\n                | ((0x3f & cccc.charCodeAt(1)) << 6)\n                | (0x3f & cccc.charCodeAt(2)));\n        default:\n            return _fromCC(((0x1f & cccc.charCodeAt(0)) << 6)\n                | (0x3f & cccc.charCodeAt(1)));\n    }\n};\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-16 string\n * @returns {string} UTF-8 string\n */\nconst btou = (b) => b.replace(re_btou, cb_btou);\n/**\n * polyfill version of `atob`\n */\nconst atobPolyfill = (asc) => {\n    // console.log('polyfilled');\n    asc = asc.replace(/\\s+/g, '');\n    if (!b64re.test(asc))\n        throw new TypeError('malformed base64.');\n    asc += '=='.slice(2 - (asc.length & 3));\n    let u24, r1, r2;\n    let binArray = []; // use array to avoid minor gc in loop\n    for (let i = 0; i < asc.length;) {\n        u24 = b64tab[asc.charAt(i++)] << 18\n            | b64tab[asc.charAt(i++)] << 12\n            | (r1 = b64tab[asc.charAt(i++)]) << 6\n            | (r2 = b64tab[asc.charAt(i++)]);\n        if (r1 === 64) {\n            binArray.push(_fromCC(u24 >> 16 & 255));\n        }\n        else if (r2 === 64) {\n            binArray.push(_fromCC(u24 >> 16 & 255, u24 >> 8 & 255));\n        }\n        else {\n            binArray.push(_fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255));\n        }\n    }\n    return binArray.join('');\n};\n/**\n * does what `window.atob` of web browsers do.\n * @param {String} asc Base64-encoded string\n * @returns {string} binary string\n */\nconst _atob = typeof atob === 'function' ? (asc) => atob(_tidyB64(asc))\n    : _hasBuffer ? (asc) => Buffer.from(asc, 'base64').toString('binary')\n        : atobPolyfill;\n//\nconst _toUint8Array = _hasBuffer\n    ? (a) => _U8Afrom(Buffer.from(a, 'base64'))\n    : (a) => _U8Afrom(_atob(a).split('').map(c => c.charCodeAt(0)));\n/**\n * converts a Base64 string to a Uint8Array.\n */\nconst toUint8Array = (a) => _toUint8Array(_unURI(a));\n//\nconst _decode = _hasBuffer\n    ? (a) => Buffer.from(a, 'base64').toString('utf8')\n    : _TD\n        ? (a) => _TD.decode(_toUint8Array(a))\n        : (a) => btou(_atob(a));\nconst _unURI = (a) => _tidyB64(a.replace(/[-_]/g, (m0) => m0 == '-' ? '+' : '/'));\n/**\n * converts a Base64 string to a UTF-8 string.\n * @param {String} src Base64 string.  Both normal and URL-safe are supported\n * @returns {string} UTF-8 string\n */\nconst decode = (src) => _decode(_unURI(src));\n/**\n * check if a value is a valid Base64 string\n * @param {String} src a value to check\n  */\nconst isValid = (src) => {\n    if (typeof src !== 'string')\n        return false;\n    const s = src.replace(/\\s+/g, '').replace(/={0,2}$/, '');\n    return !/[^\\s0-9a-zA-Z\\+/]/.test(s) || !/[^\\s0-9a-zA-Z\\-_]/.test(s);\n};\n//\nconst _noEnum = (v) => {\n    return {\n        value: v, enumerable: false, writable: true, configurable: true\n    };\n};\n/**\n * extend String.prototype with relevant methods\n */\nconst extendString = function () {\n    const _add = (name, body) => Object.defineProperty(String.prototype, name, _noEnum(body));\n    _add('fromBase64', function () { return decode(this); });\n    _add('toBase64', function (urlsafe) { return encode(this, urlsafe); });\n    _add('toBase64URI', function () { return encode(this, true); });\n    _add('toBase64URL', function () { return encode(this, true); });\n    _add('toUint8Array', function () { return toUint8Array(this); });\n};\n/**\n * extend Uint8Array.prototype with relevant methods\n */\nconst extendUint8Array = function () {\n    const _add = (name, body) => Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));\n    _add('toBase64', function (urlsafe) { return fromUint8Array(this, urlsafe); });\n    _add('toBase64URI', function () { return fromUint8Array(this, true); });\n    _add('toBase64URL', function () { return fromUint8Array(this, true); });\n};\n/**\n * extend Builtin prototypes with relevant methods\n */\nconst extendBuiltins = () => {\n    extendString();\n    extendUint8Array();\n};\nconst gBase64 = {\n    version: version,\n    VERSION: VERSION,\n    atob: _atob,\n    atobPolyfill: atobPolyfill,\n    btoa: _btoa,\n    btoaPolyfill: btoaPolyfill,\n    fromBase64: decode,\n    toBase64: encode,\n    encode: encode,\n    encodeURI: encodeURI,\n    encodeURL: encodeURI,\n    utob: utob,\n    btou: btou,\n    decode: decode,\n    isValid: isValid,\n    fromUint8Array: fromUint8Array,\n    toUint8Array: toUint8Array,\n    extendString: extendString,\n    extendUint8Array: extendUint8Array,\n    extendBuiltins: extendBuiltins\n};\n// makecjs:CUT //\nexport { version };\nexport { VERSION };\nexport { _atob as atob };\nexport { atobPolyfill };\nexport { _btoa as btoa };\nexport { btoaPolyfill };\nexport { decode as fromBase64 };\nexport { encode as toBase64 };\nexport { utob };\nexport { encode };\nexport { encodeURI };\nexport { encodeURI as encodeURL };\nexport { btou };\nexport { decode };\nexport { isValid };\nexport { fromUint8Array };\nexport { toUint8Array };\nexport { extendString };\nexport { extendUint8Array };\nexport { extendBuiltins };\n// and finally,\nexport { gBase64 as Base64 };\n", "\n/**\n * NO! We cannot just use btoa() and atob()\n * because they do not work correctly with binary data.\n * @link https://stackoverflow.com/q/30106476/3443137\n */\nimport { encode, decode } from 'js-base64';\n\n/**\n * atob() and btoa() do not work well with non ascii chars,\n * so we have to use these helper methods instead.\n * @link https://stackoverflow.com/a/30106551/3443137\n */\n// Encoding UTF8 -> base64\nexport function b64EncodeUnicode(str: string) {\n    return encode(str);\n}\n\n// Decoding base64 -> UTF8\nexport function b64DecodeUnicode(str: string) {\n    return decode(str);\n}\n\n/**\n * @link https://stackoverflow.com/a/9458996/3443137\n */\nexport function arrayBufferToBase64(buffer: ArrayBuffer) {\n    let binary = '';\n    const bytes = new Uint8Array(buffer);\n    const len = bytes.byteLength;\n    for (let i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return btoa(binary);\n}\n\n\n/**\n * @link https://stackoverflow.com/a/21797381\n */\nexport function base64ToArrayBuffer(base64: string): ArrayBuffer {\n    const binary_string = atob(base64);\n    const len = binary_string.length;\n    const bytes = new Uint8Array(len);\n    for (let i = 0; i < len; i++) {\n        bytes[i] = binary_string.charCodeAt(i);\n    }\n    return bytes.buffer;\n}\n", "import { arrayBufferToBase64 } from './utils-base64.ts';\n\n/**\n * Since RxDB 13.0.0 we only use Blob instead of falling back to Buffer,\n * because Node.js >18 supports Blobs anyway.\n */\n/**\n * depending if we are on node or browser,\n * we have to use Buffer(node) or Blob(browser)\n */\nexport function createBlob(\n    data: string,\n    type: string\n): Blob {\n    const blob = new Blob([data], {\n        type\n    });\n    return blob;\n}\n\nexport async function createBlobFromBase64(\n    base64String: string,\n    type: string\n): Promise<Blob> {\n    const base64Response = await fetch(`data:${type};base64,${base64String}`);\n    const blob = await base64Response.blob();\n    return blob;\n}\n\nexport function blobToString(blob: Blob | string): Promise<string> {\n    /**\n     * in the electron-renderer we have a typed array instead of a blob\n     * so we have to transform it.\n     * @link https://github.com/pubkey/rxdb/issues/1371\n     */\n    const blobType = Object.prototype.toString.call(blob);\n    if (blobType === '[object Uint8Array]') {\n        blob = new Blob([blob]);\n    }\n    if (typeof blob === 'string') {\n        return Promise.resolve(blob);\n    }\n\n    return blob.text();\n}\n\nexport async function blobToBase64String(blob: Blob | string): Promise<string> {\n    if (typeof blob === 'string') {\n        return blob;\n    }\n\n    /**\n     * in the electron-renderer we have a typed array instead of a blob\n     * so we have to transform it.\n     * @link https://github.com/pubkey/rxdb/issues/1371\n     */\n    const blobType = Object.prototype.toString.call(blob);\n    if (blobType === '[object Uint8Array]') {\n        blob = new Blob([blob]);\n    }\n\n    const arrayBuffer = await blob.arrayBuffer();\n    return arrayBufferToBase64(arrayBuffer);\n}\n\nexport function getBlobSize(blob: Blob): number {\n    return blob.size;\n}\n", "import type {\n    RxDocumentData\n} from '../../types/index.d.ts';\n\n/**\n * Parses the full revision.\n * Do NOT use this if you only need the revision height,\n * then use getHeightOfRevision() instead which is faster.\n */\nexport function parseRevision(revision: string): { height: number; hash: string; } {\n    const split = revision.split('-');\n    if (split.length !== 2) {\n        throw new Error('malformatted revision: ' + revision);\n    }\n    return {\n        height: parseInt(split[0], 10),\n        hash: split[1]\n    };\n}\n\n/**\n * @hotPath Performance is very important here\n * because we need to parse the revision height very often.\n * Do not use `parseInt(revision.split('-')[0], 10)` because\n * only fetching the start-number chars is faster.\n */\nexport function getHeightOfRevision(revision: string): number {\n    let useChars = '';\n    for (let index = 0; index < revision.length; index++) {\n        const char = revision[index];\n        if (char === '-') {\n            return parseInt(useChars, 10);\n        }\n        useChars += char;\n    }\n    throw new Error('malformatted revision: ' + revision);\n}\n\n\n/**\n * Creates the next write revision for a given document.\n */\nexport function createRevision<RxDocType>(\n    databaseInstanceToken: string,\n    previousDocData?: RxDocumentData<RxDocType>\n): string {\n    const newRevisionHeight = !previousDocData ? 1 : getHeightOfRevision(previousDocData._rev) + 1\n    return newRevisionHeight + '-' + databaseInstanceToken;\n}\n\n", "import type {\n    DeepReadonlyObject\n} from '../../types/index.d.ts';\n\nexport function deepFreeze<T>(o: T): T {\n    Object.freeze(o);\n    Object.getOwnPropertyNames(o).forEach(function (prop) {\n        if (\n            Object.prototype.hasOwnProperty.call(o, prop) &&\n            (o as any)[prop] !== null &&\n            (\n                typeof (o as any)[prop] === 'object'\n                ||\n                typeof (o as any)[prop] === 'function'\n            ) &&\n            !Object.isFrozen((o as any)[prop])\n        ) {\n            deepFreeze((o as any)[prop]);\n        }\n    });\n    return o;\n}\n\n\n\n/**\n * To get specific nested path values from objects,\n * RxDB normally uses the 'dot-prop' npm module.\n * But when performance is really relevant, this is not fast enough.\n * Instead we use a monad that can prepare some stuff up front\n * and we can reuse the generated function.\n */\nexport type ObjectPathMonadFunction<T, R = any> = (obj: T) => R;\nexport function objectPathMonad<T, R = any>(objectPath: string): ObjectPathMonadFunction<T, R> {\n    const split = objectPath.split('.');\n\n    // reuse this variable for better performance.\n    const splitLength = split.length;\n\n    /**\n     * Performance shortcut,\n     * if no nested path is used,\n     * directly return the field of the object.\n     */\n    if (splitLength === 1) {\n        return (obj: T) => (obj as any)[objectPath];\n    }\n\n\n    return (obj: T) => {\n        let currentVal: any = obj;\n        for (let i = 0; i < splitLength; ++i) {\n            const subPath = split[i];\n            currentVal = currentVal[subPath];\n            if (typeof currentVal === 'undefined') {\n                return currentVal;\n            }\n        }\n        return currentVal;\n    };\n}\n\n\nexport function getFromObjectOrThrow<V>(\n    obj: { [k: string]: V; },\n    key: string\n): V {\n    const val = obj[key];\n    if (!val) {\n        throw new Error('missing value from object ' + key);\n    }\n    return val;\n}\n\n/**\n * returns a flattened object\n * @link https://gist.github.com/penguinboy/762197\n */\nexport function flattenObject(ob: any) {\n    const toReturn: any = {};\n\n    for (const i in ob) {\n        if (!Object.prototype.hasOwnProperty.call(ob, i)) continue;\n        if ((typeof ob[i]) === 'object') {\n            const flatObject = flattenObject(ob[i]);\n            for (const x in flatObject) {\n                if (!Object.prototype.hasOwnProperty.call(flatObject, x)) continue;\n                toReturn[i + '.' + x] = flatObject[x];\n            }\n        } else {\n            toReturn[i] = ob[i];\n        }\n    }\n    return toReturn;\n}\n\n\n/**\n * does a flat copy on the objects,\n * is about 3 times faster then using deepClone\n * @link https://jsperf.com/object-rest-spread-vs-clone/2\n */\nexport function flatClone<T>(obj: T | DeepReadonlyObject<T> | Readonly<T>): T {\n    return Object.assign({}, obj) as any;\n}\n\n/**\n * @link https://stackoverflow.com/a/11509718/3443137\n */\nexport function firstPropertyNameOfObject(obj: any): string {\n    return Object.keys(obj)[0];\n}\nexport function firstPropertyValueOfObject<T>(obj: { [k: string]: T; }): T {\n    const key = Object.keys(obj)[0];\n    return obj[key];\n}\n\n\n/**\n * deep-sort an object so its attributes are in lexical order.\n * Also sorts the arrays inside of the object if no-array-sort not set\n */\nexport function sortObject(obj: any, noArraySort = false): any {\n    if (!obj) return obj; // do not sort null, false or undefined\n\n    // array\n    if (!noArraySort && Array.isArray(obj)) {\n        return obj\n            .sort((a, b) => {\n                if (typeof a === 'string' && typeof b === 'string')\n                    return a.localeCompare(b);\n\n                if (typeof a === 'object') return 1;\n                else return -1;\n            })\n            .map(i => sortObject(i, noArraySort));\n    }\n\n    // object\n    // array is also of type object\n    if (typeof obj === 'object' && !Array.isArray(obj)) {\n        const out: any = {};\n        Object.keys(obj)\n            .sort((a, b) => a.localeCompare(b))\n            .forEach(key => {\n                out[key] = sortObject(obj[key], noArraySort);\n            });\n        return out;\n    }\n\n    // everything else\n    return obj;\n}\n\n\n\n/**\n * Deep clone a plain json object.\n * Does not work with recursive stuff\n * or non-plain-json.\n * IMPORTANT: Performance of this is very important,\n * do not change it without running performance tests!\n *\n * @link https://github.com/zxdong262/deep-copy/blob/master/src/index.ts\n */\nfunction deepClone<T>(src: T | DeepReadonlyObject<T>): T {\n    if (!src) {\n        return src;\n    }\n    if (src === null || typeof (src) !== 'object') {\n        return src;\n    }\n    if (Array.isArray(src)) {\n        const ret = new Array(src.length);\n        let i = ret.length;\n        while (i--) {\n            ret[i] = deepClone(src[i]);\n        }\n        return ret as any;\n    }\n    const dest: any = {};\n    // eslint-disable-next-line guard-for-in\n    for (const key in src) {\n        dest[key] = deepClone(src[key]);\n    }\n    return dest;\n}\nexport const clone = deepClone;\n\n\n\n/**\n * overwrites the getter with the actual value\n * Mostly used for caching stuff on the first run\n */\nexport function overwriteGetterForCaching<ValueType = any>(\n    obj: any,\n    getterName: string,\n    value: ValueType\n): ValueType {\n    Object.defineProperty(obj, getterName, {\n        get: function () {\n            return value;\n        }\n    });\n    return value;\n}\n\n\nexport function hasDeepProperty(obj: any, property: string): boolean {\n    if (obj.hasOwnProperty(property)) {\n        return true;\n    }\n\n    if (Array.isArray(obj)) {\n        const has = !!obj.find(item => hasDeepProperty(item, property));\n        return has;\n    }\n\n    // Recursively check for property in nested objects\n    for (const key in obj) {\n        if (typeof obj[key] === 'object' && obj[key] !== null) {\n            if (hasDeepProperty(obj[key], property)) {\n                return true;\n            }\n        }\n    }\n\n    // Return false if 'foobar' is not found at any level\n    return false;\n}\n\n\n/**\n * Deeply checks if an object contains any property\n * with the value of undefined\n * If yes, returns the path to it.\n */\nexport function findUndefinedPath(obj: unknown, parentPath = ''): string | false {\n    // If `obj` is not an object or is null, we can't go deeper, so return false\n    if (typeof obj !== \"object\" || obj === null) {\n        return false;\n    }\n\n    for (const key of Object.keys(obj)) {\n        const value = (obj as Record<string, unknown>)[key];\n        // Build the full path. For the root level, it's just the key;\n        // for nested levels, prepend the parent path followed by a dot.\n        const currentPath = parentPath ? `${parentPath}.${key}` : key;\n\n        // If the value is undefined, return the path\n        if (typeof value === 'undefined') {\n            return currentPath;\n        }\n\n        // If the value is an object, recurse to check deeper\n        if (typeof value === \"object\" && value !== null) {\n            const result = findUndefinedPath(value, currentPath);\n            // If a path was found in the nested object, return it\n            if (result) {\n                return result;\n            }\n        }\n    }\n\n    // If no property with undefined was found\n    return false;\n}\n", "import type {\n    DeepReadonly,\n    RxDocumentData,\n    RxDocumentMeta,\n    StringKeys,\n    WithDeleted,\n    WithDeletedAndAttachments\n} from '../../types/index.d.ts';\nimport { flatClone } from './utils-object.ts';\n/**\n * We use 1 as minimum so that the value is never falsy.\n * This const is used in several places because querying\n * with a value lower then the minimum could give false results.\n */\nexport const RX_META_LWT_MINIMUM = 1;\n\nexport function getDefaultRxDocumentMeta(): RxDocumentMeta {\n    return {\n        /**\n         * Set this to 1 to not waste performance\n         * while calling new Date()..\n         * The storage wrappers will anyway update\n         * the lastWrite time while calling transformDocumentDataFromRxDBToRxStorage()\n         */\n        lwt: RX_META_LWT_MINIMUM\n    };\n}\n\n/**\n * Returns a revision that is not valid.\n * Use this to have correct typings\n * while the storage wrapper anyway will overwrite the revision.\n */\nexport function getDefaultRevision(): string {\n    /**\n     * Use a non-valid revision format,\n     * to ensure that the RxStorage will throw\n     * when the revision is not replaced downstream.\n     */\n    return '';\n}\n\n\nexport function stripMetaDataFromDocument<RxDocType>(docData: RxDocumentData<RxDocType>): RxDocType {\n    return Object.assign({}, docData, {\n        _meta: undefined,\n        _deleted: undefined,\n        _rev: undefined\n    });\n}\n\n\n/**\n * Faster way to check the equality of document lists\n * compared to doing a deep-equal.\n * Here we only check the ids and revisions.\n */\nexport function areRxDocumentArraysEqual<RxDocType>(\n    primaryPath: StringKeys<RxDocumentData<RxDocType>>,\n    ar1: RxDocumentData<RxDocType>[],\n    ar2: RxDocumentData<RxDocType>[]\n): boolean {\n    if (ar1.length !== ar2.length) {\n        return false;\n    }\n    let i = 0;\n    const len = ar1.length;\n    while (i < len) {\n        const row1 = ar1[i];\n        const row2 = ar2[i];\n        i++;\n\n        if (\n            row1[primaryPath] !== row2[primaryPath] ||\n            row1._rev !== row2._rev ||\n            row1._meta.lwt !== row2._meta.lwt\n        ) {\n            return false;\n        }\n    }\n    return true;\n}\n\n\n\nexport function getSortDocumentsByLastWriteTimeComparator<RxDocType>(primaryPath: string) {\n    return (a: RxDocumentData<RxDocType>, b: RxDocumentData<RxDocType>) => {\n        if (a._meta.lwt === b._meta.lwt) {\n            if ((b as any)[primaryPath] < (a as any)[primaryPath]) {\n                return 1;\n            } else {\n                return -1;\n            }\n        } else {\n            return a._meta.lwt - b._meta.lwt;\n        }\n    };\n}\nexport function sortDocumentsByLastWriteTime<RxDocType>(\n    primaryPath: string,\n    docs: RxDocumentData<RxDocType>[]\n): RxDocumentData<RxDocType>[] {\n    return docs.sort(getSortDocumentsByLastWriteTimeComparator(primaryPath));\n}\n\ntype AnyDocFormat<RxDocType> = RxDocType | WithDeleted<RxDocType> | RxDocumentData<RxDocType> | WithDeletedAndAttachments<RxDocType>;\nexport function toWithDeleted<RxDocType>(\n    docData: AnyDocFormat<RxDocType> | DeepReadonly<AnyDocFormat<RxDocType>>\n): WithDeleted<RxDocType> {\n    docData = flatClone(docData);\n    (docData as any)._deleted = !!(docData as any)._deleted;\n    return Object.assign(docData as any, {\n        _attachments: undefined,\n        _meta: undefined,\n        _rev: undefined\n    }) as any;\n}\n", "/**\n * functions that can or should be overwritten by plugins\n * IMPORTANT: Do not import any big stuff from RxDB here!\n * An 'overwritable' can be used inside WebWorkers for RxStorage only,\n * and we do not want to have the full RxDB lib bundled in them.\n */\n\nimport type { DeepReadonly } from './types/util.d.ts';\n\nexport const overwritable = {\n    /**\n     * if this method is overwritten with one\n     * that returns true, we do additional checks\n     * which help the developer but have bad performance\n     */\n    isDevMode(): boolean {\n        return false;\n    },\n\n    /**\n     * Deep freezes and object when in dev-mode.\n     * Deep-Freezing has the same performance as deep-cloning, so we only do that in dev-mode.\n     * Also, we can ensure the readonly state via typescript\n     * @link https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n     */\n    deepFreezeWhenDevMode<T>(obj: T): DeepReadonly<T> {\n        return obj as any;\n    },\n\n    /**\n     * overwritten to map error-codes to text-messages\n     */\n    tunnelErrorMessage(message: string): string {\n        return `\n        RxDB Error-Code: ${message}.\n        Hint: Error messages are not included in RxDB core to reduce build size.\n        To show the full error messages and to ensure that you do not make any mistakes when using RxDB,\n        use the dev-mode plugin when you are in development mode: https://rxdb.info/dev-mode.html?console=error\n        `;\n    }\n};\n", "function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };", "import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };", "import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };", "import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };", "function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };", "import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };", "function _getPrototypeOf(t) {\n  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n    return t.__proto__ || Object.getPrototypeOf(t);\n  }, _getPrototypeOf(t);\n}\nexport { _getPrototypeOf as default };", "function _isNativeFunction(t) {\n  try {\n    return -1 !== Function.toString.call(t).indexOf(\"[native code]\");\n  } catch (n) {\n    return \"function\" == typeof t;\n  }\n}\nexport { _isNativeFunction as default };", "function _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}\nexport { _isNativeReflectConstruct as default };", "import isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _construct(t, e, r) {\n  if (isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments);\n  var o = [null];\n  o.push.apply(o, e);\n  var p = new (t.bind.apply(t, o))();\n  return r && setPrototypeOf(p, r.prototype), p;\n}\nexport { _construct as default };", "import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nfunction _wrapNativeSuper(t) {\n  var r = \"function\" == typeof Map ? new Map() : void 0;\n  return _wrapNativeSuper = function _wrapNativeSuper(t) {\n    if (null === t || !isNativeFunction(t)) return t;\n    if (\"function\" != typeof t) throw new TypeError(\"Super expression must either be null or a function\");\n    if (void 0 !== r) {\n      if (r.has(t)) return r.get(t);\n      r.set(t, Wrapper);\n    }\n    function Wrapper() {\n      return construct(t, arguments, getPrototypeOf(this).constructor);\n    }\n    return Wrapper.prototype = Object.create(t.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0\n      }\n    }), setPrototypeOf(Wrapper, t);\n  }, _wrapNativeSuper(t);\n}\nexport { _wrapNativeSuper as default };", "/**\n * here we use custom errors with the additional field 'parameters'\n */\n\nimport { overwritable } from './overwritable.ts';\nimport type {\n    RxErrorParameters,\n    RxErrorKey,\n    RxStorageWriteError,\n    RxStorageWriteErrorConflict\n} from './types/index.d.ts';\n\n/**\n * transform an object of parameters to a presentable string\n */\nfunction parametersToString(parameters: any): string {\n    let ret = '';\n    if (Object.keys(parameters).length === 0)\n        return ret;\n    ret +='-'.repeat(20) + '\\n';\n    ret += 'Parameters:\\n';\n    ret += Object.keys(parameters)\n        .map(k => {\n            let paramStr = '[object Object]';\n            try {\n                if (k === 'errors') {\n                    paramStr = parameters[k].map((err: any) => JSON.stringify(err, Object.getOwnPropertyNames(err)));\n                } else {\n                    paramStr = JSON.stringify(parameters[k], function (_k, v) {\n                        return v === undefined ? null : v;\n                    }, 2);\n                }\n            } catch (e) { }\n            return k + ': ' + paramStr;\n        })\n        .join('\\n');\n    ret += '\\n';\n    return ret;\n}\n\nfunction messageForError(\n    message: string,\n    code: string,\n    parameters: any\n): string {\n    return '' + '\\n' +\n        message + '\\n' +\n        parametersToString(parameters);\n}\n\nexport class RxError extends Error {\n    public code: RxErrorKey;\n    public message: string;\n    public url: string;\n    public parameters: RxErrorParameters;\n    // always true, use this to detect if its an rxdb-error\n    public rxdb: true;\n    constructor(\n        code: RxErrorKey,\n        message: string,\n        parameters: RxErrorParameters = {}\n    ) {\n        const mes = messageForError(message, code, parameters);\n        super(mes);\n        this.code = code;\n        this.message = mes;\n        this.url = getErrorUrl(code);\n        this.parameters = parameters;\n        this.rxdb = true; // tag them as internal\n    }\n    get name(): string {\n        return 'RxError (' + this.code + ')';\n    }\n    toString(): string {\n        return this.message;\n    }\n    get typeError(): boolean {\n        return false;\n    }\n}\n\nexport class RxTypeError extends TypeError {\n    public code: RxErrorKey;\n    public message: string;\n    public url: string;\n    public parameters: RxErrorParameters;\n    // always true, use this to detect if its an rxdb-error\n    public rxdb: true;\n    constructor(\n        code: RxErrorKey,\n        message: string,\n        parameters: RxErrorParameters = {}\n    ) {\n        const mes = messageForError(message, code, parameters);\n        super(mes);\n        this.code = code;\n        this.message = mes;\n        this.url = getErrorUrl(code);\n        this.parameters = parameters;\n        this.rxdb = true; // tag them as internal\n    }\n    get name(): string {\n        return 'RxTypeError (' + this.code + ')';\n    }\n    toString(): string {\n        return this.message;\n    }\n    get typeError(): boolean {\n        return true;\n    }\n}\n\n\nexport function getErrorUrl(code: RxErrorKey) {\n    return 'https://rxdb.info/errors.html?console=errors#' + code;\n}\n\nexport function errorUrlHint(code: RxErrorKey) {\n    return '\\nFind out more about this error here: ' + getErrorUrl(code) + ' \\n';\n}\n\nexport function newRxError(\n    code: RxErrorKey,\n    parameters?: RxErrorParameters\n): RxError {\n    return new RxError(\n        code,\n        overwritable.tunnelErrorMessage(code) + errorUrlHint(code),\n        parameters\n    );\n}\n\nexport function newRxTypeError(\n    code: RxErrorKey,\n    parameters?: RxErrorParameters\n): RxTypeError {\n    return new RxTypeError(\n        code,\n        overwritable.tunnelErrorMessage(code) + errorUrlHint(code),\n        parameters\n    );\n}\n\n\n/**\n * Returns the error if it is a 409 conflict,\n * return false if it is another error.\n */\nexport function isBulkWriteConflictError<RxDocType>(\n    err?: RxStorageWriteError<RxDocType> | any\n): RxStorageWriteErrorConflict<RxDocType> | false {\n    if (\n        err &&\n        err.status === 409\n    ) {\n        return err;\n    } else {\n        return false;\n    }\n}\n\n\nconst STORAGE_WRITE_ERROR_CODE_TO_MESSAGE: { [k: number]: string; } = {\n    409: 'document write conflict',\n    422: 'schema validation error',\n    510: 'attachment data missing'\n};\n\nexport function rxStorageWriteErrorToRxError(err: RxStorageWriteError<any>): RxError {\n    return newRxError('COL20', {\n        name: STORAGE_WRITE_ERROR_CODE_TO_MESSAGE[err.status],\n        document: err.documentId,\n        writeError: err\n    });\n}\n", "import { newRxError } from '../../rx-error.ts';\nimport type { HashFunction } from '../../types/index.d.ts';\n\n/**\n * Cache this here so we do not have to run the try-catch\n * each time for better performance.\n * If your JavaScript runtime does not support crypto.subtle.digest,\n * provide your own hash function when calling createRxDatabase().\n */\nlet hashFn: typeof crypto.subtle.digest;\nfunction getHashFn() {\n    if (hashFn) {\n        return hashFn;\n    }\n    if (\n        typeof crypto === 'undefined' ||\n        typeof crypto.subtle === 'undefined' ||\n        typeof crypto.subtle.digest !== 'function'\n    ) {\n        throw newRxError('UT8', {\n            args: {\n                typeof_crypto: typeof crypto,\n                typeof_crypto_subtle: typeof crypto?.subtle,\n                typeof_crypto_subtle_digest: typeof crypto?.subtle?.digest\n            }\n        });\n    }\n    hashFn = crypto.subtle.digest.bind(crypto.subtle);\n    return hashFn;\n}\n\nexport async function nativeSha256(input: string) {\n    const data = new TextEncoder().encode(input);\n    const hashBuffer = await getHashFn()('SHA-256', data);\n    /**\n     * @link https://jameshfisher.com/2017/10/30/web-cryptography-api-hello-world/\n     */\n    const hash = Array.prototype.map.call(\n        new Uint8Array(hashBuffer),\n        x => (('00' + x.toString(16)).slice(-2))\n    ).join('');\n    return hash;\n}\n\nexport const defaultHashSha256: HashFunction = nativeSha256;\n\n\nexport function hashStringToNumber(str: string): number {\n    let nr = 0;\n    const len = str.length;\n    for (let i = 0; i < len; i++) {\n        nr = nr + str.charCodeAt(i);\n        nr |= 0; // Convert to 32bit integer, improves performance\n    }\n    return nr;\n}\n", "/**\n * returns a promise that resolves on the next tick\n */\nexport function nextTick(): Promise<void> {\n    return new Promise(res => setTimeout(res, 0));\n}\n\nexport function promiseWait(ms: number = 0): Promise<void> {\n    return new Promise(res => setTimeout(res, ms));\n}\n\nexport function toPromise<T>(maybePromise: Promise<T> | T): Promise<T> {\n    if (maybePromise && typeof (maybePromise as any).then === 'function') {\n        // is promise\n        return maybePromise as any;\n    } else {\n        return Promise.resolve(maybePromise);\n    }\n}\n\n/**\n * returns true if promise is given\n */\nexport function isPromise(value: any): boolean {\n    if (\n        typeof value !== 'undefined' &&\n        typeof value.then === 'function'\n    ) {\n        return true;\n    }\n    return false;\n}\n\n/**\n * Reusing resolved promises has a better\n * performance than creating new ones each time.\n */\nexport const PROMISE_RESOLVE_TRUE: Promise<true> = Promise.resolve(true);\nexport const PROMISE_RESOLVE_FALSE: Promise<false> = Promise.resolve(false);\nexport const PROMISE_RESOLVE_NULL: Promise<null> = Promise.resolve(null);\nexport const PROMISE_RESOLVE_VOID: Promise<void> = Promise.resolve();\n\n\nexport function requestIdlePromiseNoQueue(\n    /**\n     * We always set a timeout!\n     * RxDB might be used on the server side where the\n     * server runs 24/4 on 99% CPU. So without a timeout\n     * this would never resolve which could cause a memory leak.\n     */\n    timeout: number | undefined = 10000\n) {\n    /**\n     * Do not use window.requestIdleCallback\n     * because some javascript runtimes like react-native,\n     * do not have a window object, but still have a global\n     * requestIdleCallback function.\n     * @link https://github.com/pubkey/rxdb/issues/4804\n    */\n    if (\n        typeof requestIdleCallback === 'function'\n    ) {\n        return new Promise<void>(res => {\n            requestIdleCallback(\n                () => res(),\n                {\n                    timeout\n                }\n            );\n        });\n    } else {\n        return promiseWait(0);\n    }\n}\n\n/**\n * If multiple operations wait for an requestIdlePromise\n * we do not want them to resolve all at the same time.\n * So we have to queue the calls.\n */\nlet idlePromiseQueue = PROMISE_RESOLVE_VOID;\nexport function requestIdlePromise(\n    timeout: number | undefined = undefined\n) {\n    idlePromiseQueue = idlePromiseQueue.then(() => {\n        return requestIdlePromiseNoQueue(timeout);\n    });\n    return idlePromiseQueue;\n}\n\n\n/**\n * run the callback if requestIdleCallback available\n * do nothing if not\n * @link https://developer.mozilla.org/de/docs/Web/API/Window/requestIdleCallback\n */\nexport function requestIdleCallbackIfAvailable(fun: Function): void {\n    /**\n     * Do not use window.requestIdleCallback\n     * because some javascript runtimes like react-native,\n     * do not have a window object, but still have a global\n     * requestIdleCallback function.\n     * @link https://github.com/pubkey/rxdb/issues/4804\n    */\n    if (\n        typeof requestIdleCallback === 'function'\n    ) {\n        requestIdleCallback(() => {\n            fun();\n        });\n    }\n}\n\n\n/**\n * like Promise.all() but runs in series instead of parallel\n * @link https://github.com/egoist/promise.series/blob/master/index.js\n * @param tasks array with functions that return a promise\n */\nexport function promiseSeries(\n    tasks: Function[],\n    initial?: any\n): Promise<any[]> {\n    return tasks\n        .reduce(\n            (current, next) => (current as any).then(next),\n            Promise.resolve(initial)\n        );\n}\n", "export const REGEX_ALL_DOTS = /\\./g;\nexport const REGEX_ALL_PIPES = /\\|/g;\n", "const COUCH_NAME_CHARS = 'abcdefghijklmnopqrstuvwxyz';\n\n/**\n * Get a random string which can be used for many things in RxDB.\n * The returned string is guaranteed to be a valid database name or collection name\n * and also to be a valid JavaScript variable name.\n * \n * @link http://stackoverflow.com/a/1349426/3443137\n */\nexport function randomToken(length: number = 10): string {\n    let text = '';\n\n    for (let i = 0; i < length; i++) {\n        text += COUCH_NAME_CHARS.charAt(Math.floor(Math.random() * COUCH_NAME_CHARS.length));\n    }\n\n    return text;\n}\n\n\n/**\n * A random string that is never inside of any storage\n */\nexport const RANDOM_STRING = 'Fz7SZXPmYJujkzjY1rpXWvlWBqoGAfAX';\n\n/**\n * uppercase first char\n */\nexport function ucfirst(str: string): string {\n    str += '';\n    const f = str.charAt(0)\n        .toUpperCase();\n    return f + str.substr(1);\n}\n\n/**\n * removes trailing and ending dots from the string\n */\nexport function trimDots(str: string): string {\n    // start\n    while (str.charAt(0) === '.') {\n        str = str.substr(1);\n    }\n\n    // end\n    while (str.slice(-1) === '.') {\n        str = str.slice(0, -1);\n    }\n\n    return str;\n}\n\n/**\n * @link https://stackoverflow.com/a/44950500/3443137\n */\nexport function lastCharOfString(str: string): string {\n    return str.charAt(str.length - 1);\n}\n\n/**\n * returns true if the given name is likely a folder path\n */\nexport function isFolderPath(name: string) {\n    // do not check, if foldername is given\n    if (\n        name.includes('/') || // unix\n        name.includes('\\\\') // windows\n    ) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n\n/**\n * @link https://gist.github.com/andreburgaud/6f73fd2d690b629346b8\n * @link https://stackoverflow.com/a/76240378/3443137\n */\nexport function arrayBufferToString(arrayBuffer: Uint8Array<ArrayBuffer>) {\n    return new TextDecoder().decode(arrayBuffer);\n}\n\nexport function stringToArrayBuffer(str: string): Uint8Array<ArrayBuffer> {\n    return new TextEncoder().encode(str);\n}\n\n\nexport function normalizeString(str: string): string {\n    return str.trim().replace(/[\\n\\s]+/g, '');\n}\n", "/**\n * returns a random number\n * @param  {number} [min=0] inclusive\n * @param  {number} [max=1000] inclusive\n * @return {number}\n */\nexport function randomNumber(min = 0, max = 1000): number {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n", "\n/**\n * Copied from the fast-deep-equal package\n * because it does not support es modules and causes optimization bailouts.\n * TODO use the npm package again when this is merged:\n * @link https://github.com/epoberezkin/fast-deep-equal/pull/105\n */\nexport function deepEqual(a: any, b: any): boolean {\n    if (a === b) return true;\n\n    if (a && b && typeof a == 'object' && typeof b == 'object') {\n        if (a.constructor !== b.constructor) return false;\n\n        let length;\n        let i;\n        if (Array.isArray(a)) {\n            length = a.length;\n            if (length !== b.length) return false;\n            for (i = length; i-- !== 0;)\n                if (!deepEqual(a[i], b[i])) return false;\n            return true;\n        }\n\n\n        if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n        if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n        if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n        const keys = Object.keys(a);\n        length = keys.length;\n        if (length !== Object.keys(b).length) return false;\n\n        for (i = length; i-- !== 0;)\n            if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n        for (i = length; i-- !== 0;) {\n            const key = keys[i];\n            if (!deepEqual(a[key], b[key])) return false;\n        }\n\n        return true;\n    }\n\n    // true if both NaN, false otherwise\n    return a !== a && b !== b;\n}\n", "/**\n * Copied from\n * @link https://github.com/sindresorhus/dot-prop/blob/main/index.js\n * because it is currently an esm only module.\n * TODO use the npm package again when RxDB is also fully esm.\n */\n\nconst isObject = (value: null) => {\n    const type = typeof value;\n    return value !== null && (type === 'object' || type === 'function');\n};\n\nconst disallowedKeys = new Set([\n    '__proto__',\n    'prototype',\n    'constructor',\n]);\n\nconst digits = new Set('0123456789');\n\nfunction getPathSegments(path: string) {\n    const parts = [];\n    let currentSegment = '';\n    let currentPart = 'start';\n    let isIgnoring = false;\n\n    for (const character of path) {\n        switch (character) {\n            case '\\\\': {\n                if (currentPart === 'index') {\n                    throw new Error('Invalid character in an index');\n                }\n\n                if (currentPart === 'indexEnd') {\n                    throw new Error('Invalid character after an index');\n                }\n\n                if (isIgnoring) {\n                    currentSegment += character;\n                }\n\n                currentPart = 'property';\n                isIgnoring = !isIgnoring;\n                break;\n            }\n\n            case '.': {\n                if (currentPart === 'index') {\n                    throw new Error('Invalid character in an index');\n                }\n\n                if (currentPart === 'indexEnd') {\n                    currentPart = 'property';\n                    break;\n                }\n\n                if (isIgnoring) {\n                    isIgnoring = false;\n                    currentSegment += character;\n                    break;\n                }\n\n                if (disallowedKeys.has(currentSegment)) {\n                    return [];\n                }\n\n                parts.push(currentSegment);\n                currentSegment = '';\n                currentPart = 'property';\n                break;\n            }\n\n            case '[': {\n                if (currentPart === 'index') {\n                    throw new Error('Invalid character in an index');\n                }\n\n                if (currentPart === 'indexEnd') {\n                    currentPart = 'index';\n                    break;\n                }\n\n                if (isIgnoring) {\n                    isIgnoring = false;\n                    currentSegment += character;\n                    break;\n                }\n\n                if (currentPart === 'property') {\n                    if (disallowedKeys.has(currentSegment)) {\n                        return [];\n                    }\n\n                    parts.push(currentSegment);\n                    currentSegment = '';\n                }\n\n                currentPart = 'index';\n                break;\n            }\n\n            case ']': {\n                if (currentPart === 'index') {\n                    parts.push(Number.parseInt(currentSegment, 10));\n                    currentSegment = '';\n                    currentPart = 'indexEnd';\n                    break;\n                }\n\n                if (currentPart === 'indexEnd') {\n                    throw new Error('Invalid character after an index');\n                }\n\n                // Falls through\n            }\n\n            default: {\n                if (currentPart === 'index' && !digits.has(character)) {\n                    throw new Error('Invalid character in an index');\n                }\n\n                if (currentPart === 'indexEnd') {\n                    throw new Error('Invalid character after an index');\n                }\n\n                if (currentPart === 'start') {\n                    currentPart = 'property';\n                }\n\n                if (isIgnoring) {\n                    isIgnoring = false;\n                    currentSegment += '\\\\';\n                }\n\n                currentSegment += character;\n            }\n        }\n    }\n\n    if (isIgnoring) {\n        currentSegment += '\\\\';\n    }\n\n    switch (currentPart) {\n        case 'property': {\n            if (disallowedKeys.has(currentSegment)) {\n                return [];\n            }\n\n            parts.push(currentSegment);\n\n            break;\n        }\n\n        case 'index': {\n            throw new Error('Index was not closed');\n        }\n\n        case 'start': {\n            parts.push('');\n\n            break;\n        }\n        // No default\n    }\n\n    return parts;\n}\n\nfunction isStringIndex(object: any[], key: string) {\n    if (typeof key !== 'number' && Array.isArray(object)) {\n        const index = Number.parseInt(key, 10);\n        return Number.isInteger(index) && object[index] === object[key as any];\n    }\n\n    return false;\n}\n\nfunction assertNotStringIndex(object: any, key: string | number) {\n    if (isStringIndex(object, key as any)) {\n        throw new Error('Cannot use string index');\n    }\n}\n\n/**\n * TODO we need some performance tests and improvements here.\n */\nexport function getProperty(object: any, path: string | string[], value?: any) {\n    if (Array.isArray(path)) {\n        path = path.join('.');\n    }\n\n    /**\n     * Performance shortcut.\n     * In most cases we just have a simple property name\n     * so we can directly return it.\n     */\n    if (\n        !path.includes('.') &&\n        !path.includes('[')\n    ) {\n        return object[path];\n    }\n\n    if (!isObject(object as any) || typeof path !== 'string') {\n        return value === undefined ? object : value;\n    }\n\n    const pathArray = getPathSegments(path);\n    if (pathArray.length === 0) {\n        return value;\n    }\n\n    for (let index = 0; index < pathArray.length; index++) {\n        const key = pathArray[index];\n\n        if (isStringIndex(object as any, key as any)) {\n            object = index === pathArray.length - 1 ? undefined : null;\n        } else {\n            object = (object as any)[key];\n        }\n\n        if (object === undefined || object === null) {\n            // `object` is either `undefined` or `null` so we want to stop the loop, and\n            // if this is not the last bit of the path, and\n            // if it didn't return `undefined`\n            // it would return `null` if `object` is `null`\n            // but we want `get({foo: null}, 'foo.bar')` to equal `undefined`, or the supplied value, not `null`\n            if (index !== pathArray.length - 1) {\n                return value;\n            }\n\n            break;\n        }\n    }\n\n    return object === undefined ? value : object;\n}\n\nexport function setProperty(object: any, path: string, value: any) {\n    if (Array.isArray(path)) {\n        path = path.join('.');\n    }\n\n    if (!isObject(object as any) || typeof path !== 'string') {\n        return object;\n    }\n\n    const root = object;\n    const pathArray = getPathSegments(path);\n\n    for (let index = 0; index < pathArray.length; index++) {\n        const key = pathArray[index];\n\n        assertNotStringIndex(object, key);\n\n        if (index === pathArray.length - 1) {\n            object[key] = value;\n        } else if (!isObject(object[key])) {\n            object[key] = typeof pathArray[index + 1] === 'number' ? [] : {};\n        }\n\n        object = object[key];\n    }\n\n    return root;\n}\n\nexport function deleteProperty(object: any, path: string) {\n    if (!isObject(object as any) || typeof path !== 'string') {\n        return false;\n    }\n\n    const pathArray = getPathSegments(path);\n\n    for (let index = 0; index < pathArray.length; index++) {\n        const key = pathArray[index];\n\n        assertNotStringIndex(object, key);\n\n        if (index === pathArray.length - 1) {\n            delete object[key];\n            return true;\n        }\n\n        object = object[key];\n\n        if (!isObject(object as any)) {\n            return false;\n        }\n    }\n}\n\nexport function hasProperty(object: any, path: string) {\n    if (!isObject(object) || typeof path !== 'string') {\n        return false;\n    }\n\n    const pathArray = getPathSegments(path);\n    if (pathArray.length === 0) {\n        return false;\n    }\n\n    for (const key of pathArray) {\n        if (!isObject(object) || !(key in object) || isStringIndex(object, key as any)) {\n            return false;\n        }\n\n        object = object[key];\n    }\n\n    return true;\n}\n\n// TODO: Backslashes with no effect should not be escaped\nfunction escapePath(path: string) {\n    if (typeof path !== 'string') {\n        throw new TypeError('Expected a string');\n    }\n\n    return path.replace(/[\\\\.[]/g, '\\\\$&');\n}\n\n// The keys returned by Object.entries() for arrays are strings\nfunction entries(value: any) {\n    if (Array.isArray(value)) {\n        return value.map((v, index) => [index, v]);\n    }\n\n    return Object.entries(value);\n}\n\nfunction stringifyPath(pathSegments: never[]) {\n    let result = '';\n\n    // eslint-disable-next-line prefer-const\n    for (let [index, segment] of entries(pathSegments)) {\n        if (typeof segment === 'number') {\n            result += `[${segment}]`;\n        } else {\n            segment = escapePath(segment);\n            result += index === 0 ? segment : `.${segment}`;\n        }\n    }\n\n    return result;\n}\n\nfunction* deepKeysIterator(object: any, currentPath = []): any {\n    if (!isObject(object)) {\n        if (currentPath.length > 0) {\n            yield stringifyPath(currentPath);\n        }\n\n        return;\n    }\n\n    for (const [key, value] of entries(object)) {\n        yield* deepKeysIterator(value, [...currentPath, key] as any);\n    }\n}\n\nexport function deepKeys(object: any) {\n    return [...deepKeysIterator(object)];\n}\n", "export function getFromMapOrThrow<K, V>(map: Map<K, V> | WeakMap<any, V>, key: K): V {\n    const val = map.get(key);\n    if (typeof val === 'undefined') {\n        throw new Error('missing value from map ' + key);\n    }\n    return val;\n}\n\nexport function getFromMapOrCreate<MapIndex, MapValue>(\n    map: Map<MapIndex, MapValue> | WeakMap<any, MapValue>,\n    index: MapIndex,\n    creator: () => MapValue,\n    ifWasThere?: (value: MapValue) => void\n): MapValue {\n    let value = map.get(index);\n    if (typeof value === 'undefined') {\n        value = creator();\n        map.set(index, value);\n    } else if (ifWasThere) {\n        ifWasThere(value);\n    }\n    return value;\n}\n", "import type {\n    PlainJsonError,\n    RxError,\n    RxTypeError\n} from '../../types/index.d.ts';\nimport { ucfirst } from './utils-string.ts';\n\n\n\n/**\n * Returns an error that indicates that a plugin is missing\n * We do not throw a RxError because this should not be handled\n * programmatically but by using the correct import\n */\nexport function pluginMissing(\n    pluginKey: string\n): Error {\n    const keyParts = pluginKey.split('-');\n    let pluginName = 'RxDB';\n    keyParts.forEach(part => {\n        pluginName += ucfirst(part);\n    });\n    pluginName += 'Plugin';\n    return new Error(\n        `You are using a function which must be overwritten by a plugin.\n        You should either prevent the usage of this function or add the plugin via:\n            import { ${pluginName} } from 'rxdb/plugins/${pluginKey}';\n            addRxPlugin(${pluginName});\n        `\n    );\n}\n\n\n\nexport function errorToPlainJson(err: Error | TypeError | RxError | RxTypeError): PlainJsonError {\n    const ret: PlainJsonError = {\n        name: err.name,\n        message: err.message,\n        rxdb: (err as any).rxdb,\n        parameters: (err as RxError).parameters,\n        extensions: (err as any).extensions,\n        code: (err as RxError).code,\n        url: (err as RxError).url,\n        /**\n         * stack must be last to make it easier to read the json in a console.\n         * Also we ensure that each linebreak is spaced so that the chrome devtools\n         * shows urls to the source code that can be clicked to inspect\n         * the correct place in the code.\n         */\n        stack: !err.stack ? undefined : err.stack.replace(/\\n/g, ' \\n ')\n    };\n    return ret;\n}\n", "\n/**\n * Returns the current unix time in milliseconds (with two decimals!)\n * Because the accuracy of getTime() in javascript is bad,\n * and we cannot rely on performance.now() on all platforms,\n * this method implements a way to never return the same value twice.\n * This ensures that when now() is called often, we do not loose the information\n * about which call came first and which came after.\n *\n * We had to move from having no decimals, to having two decimal\n * because it turned out that some storages are such fast that\n * calling this method too often would return 'the future'.\n */\nlet _lastNow: number = 0;\n/**\n * Returns the current time in milliseconds,\n * also ensures to not return the same value twice.\n */\nexport function now(): number {\n    let ret = Date.now();\n    ret = ret + 0.01;\n    if (ret <= _lastNow) {\n        ret = _lastNow + 0.01;\n    }\n\n    /**\n     * Strip the returned number to max two decimals.\n     * In theory we would not need this but\n     * in practice JavaScript has no such good number precision\n     * so rounding errors could add another decimal place.\n     */\n    const twoDecimals = parseFloat(ret.toFixed(2));\n\n    _lastNow = twoDecimals;\n    return twoDecimals;\n}\n", "export function runXTimes(xTimes: number, fn: (idx: number) => void) {\n    new Array(xTimes).fill(0).forEach((_v, idx) => fn(idx));\n}\n\nexport function ensureNotFalsy<T>(obj: T | false | undefined | null, message?: string): T {\n    if (!obj) {\n        if (!message) {\n            message = '';\n        }\n        throw new Error('ensureNotFalsy() is falsy: ' + message);\n    }\n    return obj;\n}\n\nexport function ensureInteger(obj: unknown): number {\n    if (!Number.isInteger(obj)) {\n        throw new Error('ensureInteger() is falsy');\n    }\n    return obj as number;\n}\n\n/**\n * Using shareReplay() without settings will not unsubscribe\n * if there are no more subscribers.\n * So we use these defaults.\n * @link https://cartant.medium.com/rxjs-whats-changed-with-sharereplay-65c098843e95\n */\nexport const RXJS_SHARE_REPLAY_DEFAULTS = {\n    bufferSize: 1,\n    refCount: true\n};\n\n\n\n/**\n * Dynamically add a name to a function\n * so that it can later be found in the stack.\n * @link https://stackoverflow.com/a/41854075/3443137\n */\nexport function nameFunction<T>(name: string, body: T): T {\n    // @ts-ignore\n    return { [name](...args) { return body.apply(this, args) } }[name];\n}\n\n\nexport function customFetchWithFixedHeaders(headers: any){\n    function customFetch(url: string | URL, options: any = {}) {\n        // Ensure options object exists and headers property is initialized\n        options.headers = {\n            ...headers,              // include default custom headers\n            ...(options.headers || {})            // merge any headers passed in the function call\n        };\n\n        // Call the original fetch with the modified options\n        return fetch(url, options);\n    }\n    return customFetch;\n}\n", "/**\n * This file is replaced in the 'npm run build:version' script.\n */\nexport const RXDB_VERSION = '16.20.0';\n", "/**\n * Can be used by some plugins to have a \"global\" object that\n * can be imported and mutated at will.\n */\nexport const RXDB_UTILS_GLOBAL: any = {};\n", "import { RXDB_UTILS_GLOBAL } from './utils-global.ts';\nimport { defaultHashSha256 } from './utils-hash.ts';\nimport { PROMISE_RESOLVE_FALSE } from './utils-promise.ts';\n\nexport const PREMIUM_FLAG_HASH = '6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93';\nexport const NON_PREMIUM_COLLECTION_LIMIT = 16;\n\nlet hasPremiumPromise: Promise<boolean> = PROMISE_RESOLVE_FALSE;\nlet premiumChecked = false;\n\n/**\n * Here we check if the premium flag has been set.\n * This code exists in the open source version of RxDB.\n * Yes you are allowed to fork the repo and just overwrite this function.\n * However you might better spend this time developing your real project\n * and supporting the RxDB efforts by buying premium.\n */\nexport async function hasPremiumFlag() {\n    if (premiumChecked) {\n        return hasPremiumPromise;\n    }\n    premiumChecked = true;\n\n    hasPremiumPromise = (async () => {\n        if (\n            RXDB_UTILS_GLOBAL.premium &&\n            typeof RXDB_UTILS_GLOBAL.premium === 'string' &&\n            (await defaultHashSha256(RXDB_UTILS_GLOBAL.premium) === PREMIUM_FLAG_HASH)\n        ) {\n            return true;\n        } else {\n            return false;\n        }\n    })();\n\n    return hasPremiumPromise;\n}\n", "import { newRxError } from './rx-error.ts';\nimport type {\n    CompositePrimaryKey,\n    DeepReadonly,\n    JsonSchema,\n    PrimaryKey,\n    RxDocumentData,\n    RxJsonSchema,\n    RxStorageDefaultCheckpoint,\n    StringKeys\n} from './types/index.d.ts';\nimport {\n    appendToArray,\n    ensureNotFalsy,\n    flatClone,\n    getProperty,\n    isMaybeReadonlyArray,\n    REGEX_ALL_DOTS,\n    RX_META_LWT_MINIMUM,\n    sortObject,\n    trimDots\n} from './plugins/utils/index.ts';\nimport type { RxSchema } from './rx-schema.ts';\n\n/**\n * Helper function to create a valid RxJsonSchema\n * with a given version.\n */\nexport function getPseudoSchemaForVersion<T = any>(\n    version: number,\n    primaryKey: StringKeys<T>\n): RxJsonSchema<RxDocumentData<T>> {\n    const pseudoSchema: RxJsonSchema<RxDocumentData<T>> = fillWithDefaultSettings({\n        version,\n        type: 'object',\n        primaryKey: primaryKey as any,\n        properties: {\n            [primaryKey]: {\n                type: 'string',\n                maxLength: 100\n            },\n            value: {\n                type: 'string'\n            }\n        } as any,\n        indexes: [\n            [primaryKey]\n        ],\n        required: [primaryKey]\n    });\n    return pseudoSchema;\n}\n\n/**\n * Returns the sub-schema for a given path\n */\nexport function getSchemaByObjectPath<T = any>(\n    rxJsonSchema: RxJsonSchema<T>,\n    path: keyof T | string\n): JsonSchema {\n    let usePath: string = path as string;\n    usePath = usePath.replace(REGEX_ALL_DOTS, '.properties.');\n    usePath = 'properties.' + usePath;\n    usePath = trimDots(usePath);\n\n    const ret = getProperty(rxJsonSchema, usePath);\n    return ret;\n}\n\nexport function fillPrimaryKey<T>(\n    primaryPath: keyof T,\n    jsonSchema: RxJsonSchema<T>,\n    documentData: RxDocumentData<T>\n): RxDocumentData<T> {\n    // optimization shortcut.\n    if (typeof jsonSchema.primaryKey === 'string') {\n        return documentData;\n    }\n\n    const newPrimary = getComposedPrimaryKeyOfDocumentData<T>(\n        jsonSchema,\n        documentData\n    );\n    const existingPrimary: string | undefined = documentData[primaryPath] as any;\n    if (\n        existingPrimary &&\n        existingPrimary !== newPrimary\n    ) {\n        throw newRxError(\n            'DOC19',\n            {\n                args: {\n                    documentData,\n                    existingPrimary,\n                    newPrimary,\n                },\n                schema: jsonSchema\n            });\n    }\n\n    (documentData as any)[primaryPath] = newPrimary;\n    return documentData;\n}\n\nexport function getPrimaryFieldOfPrimaryKey<RxDocType>(\n    primaryKey: PrimaryKey<RxDocType>\n): StringKeys<RxDocType> {\n    if (typeof primaryKey === 'string') {\n        return primaryKey as any;\n    } else {\n        return (primaryKey as CompositePrimaryKey<RxDocType>).key;\n    }\n}\n\nexport function getLengthOfPrimaryKey<RxDocType>(\n    schema: RxJsonSchema<RxDocumentData<RxDocType>>\n): number {\n    const primaryPath = getPrimaryFieldOfPrimaryKey(schema.primaryKey);\n    const schemaPart = getSchemaByObjectPath(schema, primaryPath);\n    return ensureNotFalsy(schemaPart.maxLength);\n}\n\n/**\n * Returns the composed primaryKey of a document by its data.\n */\nexport function getComposedPrimaryKeyOfDocumentData<RxDocType>(\n    jsonSchema: RxJsonSchema<RxDocType> | RxJsonSchema<RxDocumentData<RxDocType>>,\n    documentData: Partial<RxDocType>\n): string {\n    if (typeof jsonSchema.primaryKey === 'string') {\n        return (documentData as any)[jsonSchema.primaryKey];\n    }\n\n    const compositePrimary: CompositePrimaryKey<RxDocType> = jsonSchema.primaryKey as any;\n    return compositePrimary.fields.map(field => {\n        const value = getProperty(documentData as any, field as string);\n        if (typeof value === 'undefined') {\n            throw newRxError('DOC18', { args: { field, documentData } });\n        }\n        return value;\n    }).join(compositePrimary.separator);\n}\n\n\n/**\n * Normalize the RxJsonSchema.\n * We need this to ensure everything is set up properly\n * and we have the same hash on schemas that represent the same value but\n * have different json.\n *\n * - Orders the schemas attributes by alphabetical order\n * - Adds the primaryKey to all indexes that do not contain the primaryKey\n * - We need this for deterministic sort order on all queries, which is required for event-reduce to work.\n *\n * @return RxJsonSchema - ordered and filled\n */\nexport function normalizeRxJsonSchema<T>(jsonSchema: RxJsonSchema<T>): RxJsonSchema<T> {\n    const normalizedSchema: RxJsonSchema<T> = sortObject(jsonSchema, true);\n    return normalizedSchema;\n}\n\n/**\n * If the schema does not specify any index,\n * we add this index so we at least can run RxQuery()\n * and only select non-deleted fields.\n */\nexport function getDefaultIndex(primaryPath: string) {\n    return ['_deleted', primaryPath];\n}\n\n/**\n * fills the schema-json with default-settings\n * @return cloned schemaObj\n */\nexport function fillWithDefaultSettings<T = any>(\n    schemaObj: RxJsonSchema<T>\n): RxJsonSchema<RxDocumentData<T>> {\n    schemaObj = flatClone(schemaObj);\n    const primaryPath: string = getPrimaryFieldOfPrimaryKey(schemaObj.primaryKey);\n    schemaObj.properties = flatClone(schemaObj.properties);\n\n    // additionalProperties is always false\n    schemaObj.additionalProperties = false;\n\n    // fill with key-compression-state ()\n    if (!Object.prototype.hasOwnProperty.call(schemaObj, 'keyCompression')) {\n        schemaObj.keyCompression = false;\n    }\n\n    // indexes must be array\n    schemaObj.indexes = schemaObj.indexes ? schemaObj.indexes.slice(0) : [];\n\n    // required must be array\n    schemaObj.required = schemaObj.required ? schemaObj.required.slice(0) : [];\n\n    // encrypted must be array\n    schemaObj.encrypted = schemaObj.encrypted ? schemaObj.encrypted.slice(0) : [];\n\n    // add _rev\n    (schemaObj.properties as any)._rev = {\n        type: 'string',\n        minLength: 1\n    };\n\n    // add attachments\n    (schemaObj.properties as any)._attachments = {\n        type: 'object'\n    };\n\n    // add deleted flag\n    (schemaObj.properties as any)._deleted = {\n        type: 'boolean'\n    };\n\n    // add meta property\n    (schemaObj.properties as any)._meta = RX_META_SCHEMA;\n\n    /**\n     * meta fields are all required\n     */\n    schemaObj.required = schemaObj.required ? schemaObj.required.slice(0) : [];\n    (schemaObj.required as string[]).push('_deleted');\n    (schemaObj.required as string[]).push('_rev');\n    (schemaObj.required as string[]).push('_meta');\n    (schemaObj.required as string[]).push('_attachments');\n\n    // final fields are always required\n    const finalFields = getFinalFields(schemaObj);\n    appendToArray(schemaObj.required as any, finalFields);\n    schemaObj.required = schemaObj.required\n        .filter((field: string) => !field.includes('.'))\n        .filter((elem: any, pos: any, arr: any) => arr.indexOf(elem) === pos); // unique;\n\n\n    // version is 0 by default\n    schemaObj.version = schemaObj.version || 0;\n\n    const useIndexes: string[][] = schemaObj.indexes.map(index => {\n        const arIndex = isMaybeReadonlyArray(index) ? index.slice(0) : [index];\n        /**\n         * Append primary key to indexes that do not contain the primaryKey.\n         * All indexes must have the primaryKey to ensure a deterministic sort order.\n         */\n        if (!arIndex.includes(primaryPath)) {\n            arIndex.push(primaryPath);\n        }\n\n        // add _deleted flag to all indexes so we can query only non-deleted fields\n        // in RxDB itself\n        if (arIndex[0] !== '_deleted') {\n            arIndex.unshift('_deleted');\n        }\n\n        return arIndex;\n    });\n\n    if (useIndexes.length === 0) {\n        useIndexes.push(getDefaultIndex(primaryPath));\n    }\n\n    // we need this index for the getChangedDocumentsSince() method\n    useIndexes.push(['_meta.lwt', primaryPath]);\n\n    // also add the internalIndexes\n    if (schemaObj.internalIndexes) {\n        schemaObj.internalIndexes.map(idx => {\n            useIndexes.push(idx);\n        });\n    }\n\n    // make indexes unique\n    const hasIndex = new Set<string>();\n    useIndexes.filter(index => {\n        const indexStr = index.join(',');\n        if (hasIndex.has(indexStr)) {\n            return false;\n        } else {\n            hasIndex.add(indexStr);\n            return true;\n        }\n    });\n\n    schemaObj.indexes = useIndexes;\n\n    return schemaObj as any;\n}\n\nexport const META_LWT_UNIX_TIME_MAX = 1000000000000000;\nexport const RX_META_SCHEMA: JsonSchema = {\n    type: 'object',\n    properties: {\n        /**\n         * The last-write time.\n         * Unix time in milliseconds.\n         */\n        lwt: {\n            type: 'number',\n            /**\n             * We use 1 as minimum so that the value is never falsy.\n             */\n            minimum: RX_META_LWT_MINIMUM,\n            maximum: META_LWT_UNIX_TIME_MAX,\n            multipleOf: 0.01\n        }\n    },\n    /**\n     * Additional properties are allowed\n     * and can be used by plugins to set various flags.\n     */\n    additionalProperties: true as any,\n    required: [\n        'lwt'\n    ]\n};\n\n\n/**\n * returns the final-fields of the schema\n * @return field-names of the final-fields\n */\nexport function getFinalFields<T = any>(\n    jsonSchema: RxJsonSchema<T>\n): string[] {\n    const ret = Object.keys(jsonSchema.properties)\n        .filter(key => (jsonSchema as any).properties[key].final);\n\n    // primary is also final\n    const primaryPath = getPrimaryFieldOfPrimaryKey(jsonSchema.primaryKey);\n    ret.push(primaryPath);\n\n    // fields of composite primary are final\n    if (typeof jsonSchema.primaryKey !== 'string') {\n        (jsonSchema.primaryKey as CompositePrimaryKey<T>).fields\n            .forEach(field => ret.push(field as string));\n    }\n\n    return ret;\n}\n\n/**\n * fills all unset fields with default-values if set\n * @hotPath\n */\nexport function fillObjectWithDefaults(rxSchema: RxSchema<any>, obj: any): any {\n    const defaultKeys = Object.keys(rxSchema.defaultValues);\n    for (let i = 0; i < defaultKeys.length; ++i) {\n        const key = defaultKeys[i];\n        if (!Object.prototype.hasOwnProperty.call(obj, key) || typeof obj[key] === 'undefined') {\n            obj[key] = rxSchema.defaultValues[key];\n        }\n    }\n    return obj;\n}\n\nexport const DEFAULT_CHECKPOINT_SCHEMA: DeepReadonly<JsonSchema<RxStorageDefaultCheckpoint>> = {\n    type: 'object',\n    properties: {\n        id: {\n            type: 'string'\n        },\n        lwt: {\n            type: 'number'\n        }\n    },\n    required: [\n        'id',\n        'lwt'\n    ],\n    additionalProperties: false\n} as const;\n"],
  "mappings": ";AAKO,SAASA,YAAeC,IAAwB;AACnD,SAAOA,GAAGA,GAAGC,SAAS,CAAC;AAC3B;AAKO,SAASC,aAAgBC,KAAe;AAC3C,SAAOA,IAAIC,MAAM,CAAC,EAAEC,KAAK,MAAOC,KAAKC,OAAO,IAAI,GAAI;AACxD;AAEO,SAASC,cAAiBL,KAAa;AAC1C,MAAMM,gBAAgBN,IAAIG,KAAKI,MAAMJ,KAAKC,OAAO,IAAIJ,IAAIF,MAAM,CAAC;AAChE,SAAOQ;AACX;AAGO,SAASE,QAAWC,OAAmD;AAC1E,SAAOC,MAAMC,QAAQF,KAAK,IAAKA,MAAgBR,MAAM,CAAC,IAAK,CAACQ,KAAK;AACrE;AAMO,SAASG,WAAcC,OAAYC,WAA0B;AAChED,UAAQA,MAAMZ,MAAM,CAAC;AACrB,MAAMc,MAAa,CAAA;AACnB,SAAOF,MAAMf,QAAQ;AACjB,QAAMkB,QAAQH,MAAMI,OAAO,GAAGH,SAAS;AACvCC,QAAIG,KAAKF,KAAK;EAClB;AACA,SAAOD;AACX;AAKO,SAASI,4BAA+BtB,IAASuB,WAAmC;AACvFvB,OAAKA,GAAGI,MAAM;AACd,MAAIoB,IAAIxB,GAAGC;AACX,MAAIwB,OAAO;AACX,SAAOD,OAAO,CAACC,MAAM;AACjB,QAAIF,UAAUvB,GAAGwB,CAAC,CAAC,GAAG;AAClBC,aAAO;AACPzB,SAAGoB,OAAOI,GAAG,CAAC;IAClB;EACJ;AACA,SAAOxB;AACX;AAKO,SAAS0B,qBAAqBC,GAAmC;AAQpE,SAAOd,MAAMC,QAAQa,CAAC;AAC1B;AAIO,SAASC,6BAAgCC,KAAUC,KAAmB;AACzE,WAASN,IAAI,GAAGA,IAAIK,IAAI5B,QAAQuB,KAAK;AACjC,QAAMO,KAAKF,IAAIL,CAAC;AAChB,QAAMQ,MAAMF,IAAIG,SAASF,EAAE;AAC3B,QAAIC,KAAK;AACL,aAAO;IACX;EACJ;AACA,SAAO;AACX;AAQO,SAASE,oBAA4BC,OAAmD;AAC3F,MAAIA,UAAU,QAAQA,UAAUC,QAAW;AACvC,WAAO;EACX;AACA,SAAO;AACX;AAEO,SAASC,sBACZrC,IACAsC,YACM;AACN,MAAIC,QAAQ;AACZ,MAAIC,MAAM;AACV,WAAWC,QAAQzC,IAAI;AACnBwC,UAAMA,MAAM;AACZ,QAAME,WAAWJ,WAAWG,MAAMD,GAAG;AACrC,QAAIE,UAAU;AACVH,cAAQA,QAAQ;IACpB,OAAO;AACH;IACJ;EACJ;AACA,SAAOA;AACX;AAEA,eAAsBI,YAAe3B,OAAY4B,WAAoF;AACjI,MAAMC,UAAU,MAAMC,QAAQC,IAC1B/B,MAAMgC,IAAIJ,SAAS,CACvB;AAEA,SAAO5B,MAAMiC,OAAO,IAAI,CAAA,EAAGC,KAAK,MAAML,QAAQK,KAAK,CAAC;AACxD;AAKO,SAASC,eAAenC,OAAyB;AACpD,MAAIuB,QAAQ;AACZ,WAASf,IAAIR,MAAMf,QAAQuB,OAAM;AAC7Be,aAASvB,MAAMQ,CAAC;EACpB;AACA,SAAOe;AACX;AAEO,SAASa,aAAajD,KAAuB;AAChD,SAAOG,KAAK+C,IAAI,GAAGlD,GAAG;AAC1B;AAcO,SAASmD,cAAiBtD,IAASuD,KAA+B;AAMrE,MAAMC,UAAUD,IAAItD;AACpB,MAAIuD,YAAY,GAAG;AACf;EACJ;AACA,MAAMC,WAAWzD,GAAGC;AACpBD,KAAGC,SAASwD,WAAWF,IAAItD;AAC3B,WAASuB,IAAI,GAAGA,IAAIgC,SAAS,EAAEhC,GAAG;AAC9BxB,OAAGyD,WAAWjC,CAAC,IAAI+B,IAAI/B,CAAC;EAC5B;AACJ;AAKO,SAASkC,YAAYC,QAA4B;AACpD,SAAOA,OAAOV,OAAO,SAAUW,MAAMC,KAAK1D,KAAK;AAC3C,WAAOA,IAAI2D,QAAQF,IAAI,MAAMC;EACjC,CAAC;AACL;AAGO,SAASE,2BAA8BC,UAAmB;AAC7D,SAAO,CAACC,GAAMC,MAAS;AACnB,WAAQA,EAAUF,QAAQ,IAAKC,EAAUD,QAAQ;EACrD;AACJ;;;ACpKA,IAAM,aAAa,OAAO,WAAW;AACrC,IAAM,MAAM,OAAO,gBAAgB,aAAa,IAAI,YAAY,IAAI;AACpE,IAAM,MAAM,OAAO,gBAAgB,aAAa,IAAI,YAAY,IAAI;AACpE,IAAM,QAAQ;AACd,IAAM,SAAS,MAAM,UAAU,MAAM,KAAK,KAAK;AAC/C,IAAM,UAAU,CAAC,MAAM;AACnB,MAAI,MAAM,CAAC;AACX,IAAE,QAAQ,CAAC,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC;AAC9B,SAAO;AACX,GAAG,MAAM;AACT,IAAM,QAAQ;AACd,IAAM,UAAU,OAAO,aAAa,KAAK,MAAM;AAC/C,IAAM,WAAW,OAAO,WAAW,SAAS,aACtC,WAAW,KAAK,KAAK,UAAU,IAC/B,CAAC,OAAO,IAAI,WAAW,MAAM,UAAU,MAAM,KAAK,IAAI,CAAC,CAAC;AAC9D,IAAM,aAAa,CAAC,QAAQ,IACvB,QAAQ,MAAM,EAAE,EAAE,QAAQ,UAAU,CAAC,OAAO,MAAM,MAAM,MAAM,GAAG;AACtE,IAAM,WAAW,CAAC,MAAM,EAAE,QAAQ,qBAAqB,EAAE;AAIzD,IAAM,eAAe,CAAC,QAAQ;AAE1B,MAAI,KAAK,IAAI,IAAI,IAAI,MAAM;AAC3B,QAAM,MAAM,IAAI,SAAS;AACzB,WAAS,IAAI,GAAG,IAAI,IAAI,UAAS;AAC7B,SAAK,KAAK,IAAI,WAAW,GAAG,KAAK,QAC5B,KAAK,IAAI,WAAW,GAAG,KAAK,QAC5B,KAAK,IAAI,WAAW,GAAG,KAAK;AAC7B,YAAM,IAAI,UAAU,yBAAyB;AACjD,UAAO,MAAM,KAAO,MAAM,IAAK;AAC/B,WAAO,OAAO,OAAO,KAAK,EAAE,IACtB,OAAO,OAAO,KAAK,EAAE,IACrB,OAAO,OAAO,IAAI,EAAE,IACpB,OAAO,MAAM,EAAE;AAAA,EACzB;AACA,SAAO,MAAM,IAAI,MAAM,GAAG,MAAM,CAAC,IAAI,MAAM,UAAU,GAAG,IAAI;AAChE;AAMA,IAAM,QAAQ,OAAO,SAAS,aAAa,CAAC,QAAQ,KAAK,GAAG,IACtD,aAAa,CAAC,QAAQ,OAAO,KAAK,KAAK,QAAQ,EAAE,SAAS,QAAQ,IAC9D;AACV,IAAM,kBAAkB,aAClB,CAAC,QAAQ,OAAO,KAAK,GAAG,EAAE,SAAS,QAAQ,IAC3C,CAAC,QAAQ;AAEP,QAAM,UAAU;AAChB,MAAI,OAAO,CAAC;AACZ,WAAS,IAAI,GAAG,IAAI,IAAI,QAAQ,IAAI,GAAG,KAAK,SAAS;AACjD,SAAK,KAAK,QAAQ,MAAM,MAAM,IAAI,SAAS,GAAG,IAAI,OAAO,CAAC,CAAC;AAAA,EAC/D;AACA,SAAO,MAAM,KAAK,KAAK,EAAE,CAAC;AAC9B;AAUJ,IAAM,UAAU,CAAC,MAAM;AACnB,MAAI,EAAE,SAAS,GAAG;AACd,QAAI,KAAK,EAAE,WAAW,CAAC;AACvB,WAAO,KAAK,MAAO,IACb,KAAK,OAAS,QAAQ,MAAQ,OAAO,CAAE,IACnC,QAAQ,MAAQ,KAAK,EAAK,IACzB,QAAQ,MAAS,OAAO,KAAM,EAAK,IAChC,QAAQ,MAAS,OAAO,IAAK,EAAK,IAClC,QAAQ,MAAQ,KAAK,EAAK;AAAA,EAC5C,OACK;AACD,QAAI,KAAK,SACF,EAAE,WAAW,CAAC,IAAI,SAAU,QAC5B,EAAE,WAAW,CAAC,IAAI;AACzB,WAAQ,QAAQ,MAAS,OAAO,KAAM,CAAK,IACrC,QAAQ,MAAS,OAAO,KAAM,EAAK,IACnC,QAAQ,MAAS,OAAO,IAAK,EAAK,IAClC,QAAQ,MAAQ,KAAK,EAAK;AAAA,EACpC;AACJ;AACA,IAAM,UAAU;AAMhB,IAAM,OAAO,CAAC,MAAM,EAAE,QAAQ,SAAS,OAAO;AAE9C,IAAM,UAAU,aACV,CAAC,MAAM,OAAO,KAAK,GAAG,MAAM,EAAE,SAAS,QAAQ,IAC/C,MACI,CAAC,MAAM,gBAAgB,IAAI,OAAO,CAAC,CAAC,IACpC,CAAC,MAAM,MAAM,KAAK,CAAC,CAAC;AAM9B,IAAM,SAAS,CAAC,KAAK,UAAU,UAAU,UACnC,WAAW,QAAQ,GAAG,CAAC,IACvB,QAAQ,GAAG;AASjB,IAAM,UAAU;AAChB,IAAM,UAAU,CAAC,SAAS;AACtB,UAAQ,KAAK,QAAQ;AAAA,IACjB,KAAK;AACD,UAAI,MAAO,IAAO,KAAK,WAAW,CAAC,MAAM,MACjC,KAAO,KAAK,WAAW,CAAC,MAAM,MAC9B,KAAO,KAAK,WAAW,CAAC,MAAM,IAC/B,KAAO,KAAK,WAAW,CAAC,GAAI,SAAS,KAAK;AACjD,aAAQ,SAAS,WAAW,MAAM,KAAM,IAClC,SAAS,SAAS,QAAS,KAAM;AAAA,IAC3C,KAAK;AACD,aAAO,SAAU,KAAO,KAAK,WAAW,CAAC,MAAM,MACvC,KAAO,KAAK,WAAW,CAAC,MAAM,IAC/B,KAAO,KAAK,WAAW,CAAC,CAAE;AAAA,IACrC;AACI,aAAO,SAAU,KAAO,KAAK,WAAW,CAAC,MAAM,IACxC,KAAO,KAAK,WAAW,CAAC,CAAE;AAAA,EACzC;AACJ;AAMA,IAAM,OAAO,CAAC,MAAM,EAAE,QAAQ,SAAS,OAAO;AAI9C,IAAM,eAAe,CAAC,QAAQ;AAE1B,QAAM,IAAI,QAAQ,QAAQ,EAAE;AAC5B,MAAI,CAAC,MAAM,KAAK,GAAG;AACf,UAAM,IAAI,UAAU,mBAAmB;AAC3C,SAAO,KAAK,MAAM,KAAK,IAAI,SAAS,EAAE;AACtC,MAAI,KAAK,IAAI;AACb,MAAI,WAAW,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,IAAI,UAAS;AAC7B,UAAM,OAAO,IAAI,OAAO,GAAG,CAAC,KAAK,KAC3B,OAAO,IAAI,OAAO,GAAG,CAAC,KAAK,MAC1B,KAAK,OAAO,IAAI,OAAO,GAAG,CAAC,MAAM,KACjC,KAAK,OAAO,IAAI,OAAO,GAAG,CAAC;AAClC,QAAI,OAAO,IAAI;AACX,eAAS,KAAK,QAAQ,OAAO,KAAK,GAAG,CAAC;AAAA,IAC1C,WACS,OAAO,IAAI;AAChB,eAAS,KAAK,QAAQ,OAAO,KAAK,KAAK,OAAO,IAAI,GAAG,CAAC;AAAA,IAC1D,OACK;AACD,eAAS,KAAK,QAAQ,OAAO,KAAK,KAAK,OAAO,IAAI,KAAK,MAAM,GAAG,CAAC;AAAA,IACrE;AAAA,EACJ;AACA,SAAO,SAAS,KAAK,EAAE;AAC3B;AAMA,IAAM,QAAQ,OAAO,SAAS,aAAa,CAAC,QAAQ,KAAK,SAAS,GAAG,CAAC,IAChE,aAAa,CAAC,QAAQ,OAAO,KAAK,KAAK,QAAQ,EAAE,SAAS,QAAQ,IAC9D;AAEV,IAAM,gBAAgB,aAChB,CAAC,MAAM,SAAS,OAAO,KAAK,GAAG,QAAQ,CAAC,IACxC,CAAC,MAAM,SAAS,MAAM,CAAC,EAAE,MAAM,EAAE,EAAE,IAAI,OAAK,EAAE,WAAW,CAAC,CAAC,CAAC;AAMlE,IAAM,UAAU,aACV,CAAC,MAAM,OAAO,KAAK,GAAG,QAAQ,EAAE,SAAS,MAAM,IAC/C,MACI,CAAC,MAAM,IAAI,OAAO,cAAc,CAAC,CAAC,IAClC,CAAC,MAAM,KAAK,MAAM,CAAC,CAAC;AAC9B,IAAM,SAAS,CAAC,MAAM,SAAS,EAAE,QAAQ,SAAS,CAAC,OAAO,MAAM,MAAM,MAAM,GAAG,CAAC;AAMhF,IAAM,SAAS,CAAC,QAAQ,QAAQ,OAAO,GAAG,CAAC;;;ACtMpC,SAASG,iBAAiBC,KAAa;AAC1C,SAAOC,OAAOD,GAAG;AACrB;AAGO,SAASE,iBAAiBF,KAAa;AAC1C,SAAOG,OAAOH,GAAG;AACrB;AAKO,SAASI,oBAAoBC,QAAqB;AACrD,MAAIC,SAAS;AACb,MAAMC,QAAQ,IAAIC,WAAWH,MAAM;AACnC,MAAMI,MAAMF,MAAMG;AAClB,WAASC,IAAI,GAAGA,IAAIF,KAAKE,KAAK;AAC1BL,cAAUM,OAAOC,aAAaN,MAAMI,CAAC,CAAC;EAC1C;AACA,SAAOG,KAAKR,MAAM;AACtB;AAMO,SAASS,oBAAoBC,QAA6B;AAC7D,MAAMC,gBAAgBC,KAAKF,MAAM;AACjC,MAAMP,MAAMQ,cAAcE;AAC1B,MAAMZ,QAAQ,IAAIC,WAAWC,GAAG;AAChC,WAASE,IAAI,GAAGA,IAAIF,KAAKE,KAAK;AAC1BJ,UAAMI,CAAC,IAAIM,cAAcG,WAAWT,CAAC;EACzC;AACA,SAAOJ,MAAMF;AACjB;;;ACtCO,SAASgB,WACZC,MACAC,MACI;AACJ,MAAMC,OAAO,IAAIC,KAAK,CAACH,IAAI,GAAG;IAC1BC;EACJ,CAAC;AACD,SAAOC;AACX;AAEA,eAAsBE,qBAClBC,cACAJ,MACa;AACb,MAAMK,iBAAiB,MAAMC,MAAK,UAASN,OAAI,aAAWI,YAAc;AACxE,MAAMH,OAAO,MAAMI,eAAeJ,KAAK;AACvC,SAAOA;AACX;AAEO,SAASM,aAAaN,MAAsC;AAM/D,MAAMO,WAAWC,OAAOC,UAAUC,SAASC,KAAKX,IAAI;AACpD,MAAIO,aAAa,uBAAuB;AACpCP,WAAO,IAAIC,KAAK,CAACD,IAAI,CAAC;EAC1B;AACA,MAAI,OAAOA,SAAS,UAAU;AAC1B,WAAOY,QAAQC,QAAQb,IAAI;EAC/B;AAEA,SAAOA,KAAKc,KAAK;AACrB;AAEA,eAAsBC,mBAAmBf,MAAsC;AAC3E,MAAI,OAAOA,SAAS,UAAU;AAC1B,WAAOA;EACX;AAOA,MAAMO,WAAWC,OAAOC,UAAUC,SAASC,KAAKX,IAAI;AACpD,MAAIO,aAAa,uBAAuB;AACpCP,WAAO,IAAIC,KAAK,CAACD,IAAI,CAAC;EAC1B;AAEA,MAAMgB,cAAc,MAAMhB,KAAKgB,YAAY;AAC3C,SAAOC,oBAAoBD,WAAW;AAC1C;AAEO,SAASE,YAAYlB,MAAoB;AAC5C,SAAOA,KAAKmB;AAChB;;;AC1DO,SAASC,cAAcC,UAAqD;AAC/E,MAAMC,QAAQD,SAASC,MAAM,GAAG;AAChC,MAAIA,MAAMC,WAAW,GAAG;AACpB,UAAM,IAAIC,MAAM,4BAA4BH,QAAQ;EACxD;AACA,SAAO;IACHI,QAAQC,SAASJ,MAAM,CAAC,GAAG,EAAE;IAC7BK,MAAML,MAAM,CAAC;EACjB;AACJ;AAQO,SAASM,oBAAoBP,UAA0B;AAC1D,MAAIQ,WAAW;AACf,WAASC,QAAQ,GAAGA,QAAQT,SAASE,QAAQO,SAAS;AAClD,QAAMC,OAAOV,SAASS,KAAK;AAC3B,QAAIC,SAAS,KAAK;AACd,aAAOL,SAASG,UAAU,EAAE;IAChC;AACAA,gBAAYE;EAChB;AACA,QAAM,IAAIP,MAAM,4BAA4BH,QAAQ;AACxD;AAMO,SAASW,eACZC,uBACAC,iBACM;AACN,MAAMC,oBAAoB,CAACD,kBAAkB,IAAIN,oBAAoBM,gBAAgBE,IAAI,IAAI;AAC7F,SAAOD,oBAAoB,MAAMF;AACrC;;;AC5CO,SAASI,WAAcC,GAAS;AACnCC,SAAOC,OAAOF,CAAC;AACfC,SAAOE,oBAAoBH,CAAC,EAAEI,QAAQ,SAAUC,MAAM;AAClD,QACIJ,OAAOK,UAAUC,eAAeC,KAAKR,GAAGK,IAAI,KAC3CL,EAAUK,IAAI,MAAM,SAEjB,OAAQL,EAAUK,IAAI,MAAM,YAE5B,OAAQL,EAAUK,IAAI,MAAM,eAEhC,CAACJ,OAAOQ,SAAUT,EAAUK,IAAI,CAAC,GACnC;AACEN,iBAAYC,EAAUK,IAAI,CAAC;IAC/B;EACJ,CAAC;AACD,SAAOL;AACX;AAYO,SAASU,gBAA4BC,YAAmD;AAC3F,MAAMC,QAAQD,WAAWC,MAAM,GAAG;AAGlC,MAAMC,cAAcD,MAAME;AAO1B,MAAID,gBAAgB,GAAG;AACnB,WAAQE,SAAYA,IAAYJ,UAAU;EAC9C;AAGA,SAAQI,SAAW;AACf,QAAIC,aAAkBD;AACtB,aAASE,IAAI,GAAGA,IAAIJ,aAAa,EAAEI,GAAG;AAClC,UAAMC,UAAUN,MAAMK,CAAC;AACvBD,mBAAaA,WAAWE,OAAO;AAC/B,UAAI,OAAOF,eAAe,aAAa;AACnC,eAAOA;MACX;IACJ;AACA,WAAOA;EACX;AACJ;AAGO,SAASG,qBACZJ,KACAK,KACC;AACD,MAAMC,MAAMN,IAAIK,GAAG;AACnB,MAAI,CAACC,KAAK;AACN,UAAM,IAAIC,MAAM,+BAA+BF,GAAG;EACtD;AACA,SAAOC;AACX;AAMO,SAASE,cAAcC,IAAS;AACnC,MAAMC,WAAgB,CAAC;AAEvB,WAAWR,KAAKO,IAAI;AAChB,QAAI,CAACvB,OAAOK,UAAUC,eAAeC,KAAKgB,IAAIP,CAAC;AAAG;AAClD,QAAK,OAAOO,GAAGP,CAAC,MAAO,UAAU;AAC7B,UAAMS,aAAaH,cAAcC,GAAGP,CAAC,CAAC;AACtC,eAAWU,KAAKD,YAAY;AACxB,YAAI,CAACzB,OAAOK,UAAUC,eAAeC,KAAKkB,YAAYC,CAAC;AAAG;AAC1DF,iBAASR,IAAI,MAAMU,CAAC,IAAID,WAAWC,CAAC;MACxC;IACJ,OAAO;AACHF,eAASR,CAAC,IAAIO,GAAGP,CAAC;IACtB;EACJ;AACA,SAAOQ;AACX;AAQO,SAASG,UAAab,KAAiD;AAC1E,SAAOd,OAAO4B,OAAO,CAAC,GAAGd,GAAG;AAChC;AAKO,SAASe,0BAA0Bf,KAAkB;AACxD,SAAOd,OAAO8B,KAAKhB,GAAG,EAAE,CAAC;AAC7B;AACO,SAASiB,2BAA8BjB,KAA6B;AACvE,MAAMK,MAAMnB,OAAO8B,KAAKhB,GAAG,EAAE,CAAC;AAC9B,SAAOA,IAAIK,GAAG;AAClB;AAOO,SAASa,WAAWlB,KAAUmB,cAAc,OAAY;AAC3D,MAAI,CAACnB;AAAK,WAAOA;AAGjB,MAAI,CAACmB,eAAeC,MAAMC,QAAQrB,GAAG,GAAG;AACpC,WAAOA,IACFsB,KAAK,CAACC,GAAGC,MAAM;AACZ,UAAI,OAAOD,MAAM,YAAY,OAAOC,MAAM;AACtC,eAAOD,EAAEE,cAAcD,CAAC;AAE5B,UAAI,OAAOD,MAAM;AAAU,eAAO;;AAC7B,eAAO;IAChB,CAAC,EACAG,IAAIxB,OAAKgB,WAAWhB,GAAGiB,WAAW,CAAC;EAC5C;AAIA,MAAI,OAAOnB,QAAQ,YAAY,CAACoB,MAAMC,QAAQrB,GAAG,GAAG;AAChD,QAAM2B,MAAW,CAAC;AAClBzC,WAAO8B,KAAKhB,GAAG,EACVsB,KAAK,CAACC,GAAGC,MAAMD,EAAEE,cAAcD,CAAC,CAAC,EACjCnC,QAAQgB,SAAO;AACZsB,UAAItB,GAAG,IAAIa,WAAWlB,IAAIK,GAAG,GAAGc,WAAW;IAC/C,CAAC;AACL,WAAOQ;EACX;AAGA,SAAO3B;AACX;AAaA,SAAS4B,UAAaC,KAAmC;AACrD,MAAI,CAACA,KAAK;AACN,WAAOA;EACX;AACA,MAAIA,QAAQ,QAAQ,OAAQA,QAAS,UAAU;AAC3C,WAAOA;EACX;AACA,MAAIT,MAAMC,QAAQQ,GAAG,GAAG;AACpB,QAAMC,MAAM,IAAIV,MAAMS,IAAI9B,MAAM;AAChC,QAAIG,IAAI4B,IAAI/B;AACZ,WAAOG,KAAK;AACR4B,UAAI5B,CAAC,IAAI0B,UAAUC,IAAI3B,CAAC,CAAC;IAC7B;AACA,WAAO4B;EACX;AACA,MAAMC,OAAY,CAAC;AAEnB,WAAW1B,OAAOwB,KAAK;AACnBE,SAAK1B,GAAG,IAAIuB,UAAUC,IAAIxB,GAAG,CAAC;EAClC;AACA,SAAO0B;AACX;AACO,IAAMC,QAAQJ;AAQd,SAASK,0BACZjC,KACAkC,YACAC,OACS;AACTjD,SAAOkD,eAAepC,KAAKkC,YAAY;IACnCG,KAAK,WAAY;AACb,aAAOF;IACX;EACJ,CAAC;AACD,SAAOA;AACX;AAGO,SAASG,gBAAgBtC,KAAUuC,UAA2B;AACjE,MAAIvC,IAAIR,eAAe+C,QAAQ,GAAG;AAC9B,WAAO;EACX;AAEA,MAAInB,MAAMC,QAAQrB,GAAG,GAAG;AACpB,QAAMwC,MAAM,CAAC,CAACxC,IAAIyC,KAAKC,UAAQJ,gBAAgBI,MAAMH,QAAQ,CAAC;AAC9D,WAAOC;EACX;AAGA,WAAWnC,OAAOL,KAAK;AACnB,QAAI,OAAOA,IAAIK,GAAG,MAAM,YAAYL,IAAIK,GAAG,MAAM,MAAM;AACnD,UAAIiC,gBAAgBtC,IAAIK,GAAG,GAAGkC,QAAQ,GAAG;AACrC,eAAO;MACX;IACJ;EACJ;AAGA,SAAO;AACX;AAQO,SAASI,kBAAkB3C,KAAc4C,aAAa,IAAoB;AAE7E,MAAI,OAAO5C,QAAQ,YAAYA,QAAQ,MAAM;AACzC,WAAO;EACX;AAEA,WAAWK,OAAOnB,OAAO8B,KAAKhB,GAAG,GAAG;AAChC,QAAMmC,QAASnC,IAAgCK,GAAG;AAGlD,QAAMwC,cAAcD,aAAgBA,aAAU,MAAIvC,MAAQA;AAG1D,QAAI,OAAO8B,UAAU,aAAa;AAC9B,aAAOU;IACX;AAGA,QAAI,OAAOV,UAAU,YAAYA,UAAU,MAAM;AAC7C,UAAMW,SAASH,kBAAkBR,OAAOU,WAAW;AAEnD,UAAIC,QAAQ;AACR,eAAOA;MACX;IACJ;EACJ;AAGA,SAAO;AACX;;;AC7PO,IAAMC,sBAAsB;AAE5B,SAASC,2BAA2C;AACvD,SAAO;;;;;;;IAOHC,KAAKF;EACT;AACJ;AAOO,SAASG,qBAA6B;AAMzC,SAAO;AACX;AAGO,SAASC,0BAAqCC,SAA+C;AAChG,SAAOC,OAAOC,OAAO,CAAC,GAAGF,SAAS;IAC9BG,OAAOC;IACPC,UAAUD;IACVE,MAAMF;EACV,CAAC;AACL;AAQO,SAASG,yBACZC,aACAC,KACAC,KACO;AACP,MAAID,IAAIE,WAAWD,IAAIC,QAAQ;AAC3B,WAAO;EACX;AACA,MAAIC,IAAI;AACR,MAAMC,MAAMJ,IAAIE;AAChB,SAAOC,IAAIC,KAAK;AACZ,QAAMC,OAAOL,IAAIG,CAAC;AAClB,QAAMG,OAAOL,IAAIE,CAAC;AAClBA;AAEA,QACIE,KAAKN,WAAW,MAAMO,KAAKP,WAAW,KACtCM,KAAKR,SAASS,KAAKT,QACnBQ,KAAKX,MAAMN,QAAQkB,KAAKZ,MAAMN,KAChC;AACE,aAAO;IACX;EACJ;AACA,SAAO;AACX;AAIO,SAASmB,0CAAqDR,aAAqB;AACtF,SAAO,CAACS,GAA8BC,MAAiC;AACnE,QAAID,EAAEd,MAAMN,QAAQqB,EAAEf,MAAMN,KAAK;AAC7B,UAAKqB,EAAUV,WAAW,IAAKS,EAAUT,WAAW,GAAG;AACnD,eAAO;MACX,OAAO;AACH,eAAO;MACX;IACJ,OAAO;AACH,aAAOS,EAAEd,MAAMN,MAAMqB,EAAEf,MAAMN;IACjC;EACJ;AACJ;AACO,SAASsB,6BACZX,aACAY,MAC2B;AAC3B,SAAOA,KAAKC,KAAKL,0CAA0CR,WAAW,CAAC;AAC3E;AAGO,SAASc,cACZtB,SACsB;AACtBA,YAAUuB,UAAUvB,OAAO;AAC1BA,UAAgBK,WAAW,CAAC,CAAEL,QAAgBK;AAC/C,SAAOJ,OAAOC,OAAOF,SAAgB;IACjCwB,cAAcpB;IACdD,OAAOC;IACPE,MAAMF;EACV,CAAC;AACL;;;AC3GO,IAAMqB,eAAe;;;;;;EAMxBC,YAAqB;AACjB,WAAO;EACX;;;;;;;EAQAC,sBAAyBC,KAAyB;AAC9C,WAAOA;EACX;;;;EAKAC,mBAAmBC,SAAyB;AACxC,WAAA,gCACmBA,UAAO;EAK9B;AACJ;;;ACxCA,SAAS,QAAQ,GAAG;AAClB;AAEA,SAAO,UAAU,cAAc,OAAO,UAAU,YAAY,OAAO,OAAO,WAAW,SAAUC,IAAG;AAChG,WAAO,OAAOA;AAAA,EAChB,IAAI,SAAUA,IAAG;AACf,WAAOA,MAAK,cAAc,OAAO,UAAUA,GAAE,gBAAgB,UAAUA,OAAM,OAAO,YAAY,WAAW,OAAOA;AAAA,EACpH,GAAG,QAAQ,CAAC;AACd;;;ACPA,SAAS,YAAY,GAAG,GAAG;AACzB,MAAI,YAAY,QAAQ,CAAC,KAAK,CAAC;AAAG,WAAO;AACzC,MAAI,IAAI,EAAE,OAAO,WAAW;AAC5B,MAAI,WAAW,GAAG;AAChB,QAAI,IAAI,EAAE,KAAK,GAAG,KAAK,SAAS;AAChC,QAAI,YAAY,QAAQ,CAAC;AAAG,aAAO;AACnC,UAAM,IAAI,UAAU,8CAA8C;AAAA,EACpE;AACA,UAAQ,aAAa,IAAI,SAAS,QAAQ,CAAC;AAC7C;;;ACRA,SAAS,cAAc,GAAG;AACxB,MAAI,IAAI,YAAY,GAAG,QAAQ;AAC/B,SAAO,YAAY,QAAQ,CAAC,IAAI,IAAI,IAAI;AAC1C;;;ACJA,SAAS,kBAAkB,GAAG,GAAG;AAC/B,WAAS,IAAI,GAAG,IAAI,EAAE,QAAQ,KAAK;AACjC,QAAI,IAAI,EAAE,CAAC;AACX,MAAE,aAAa,EAAE,cAAc,OAAI,EAAE,eAAe,MAAI,WAAW,MAAM,EAAE,WAAW,OAAK,OAAO,eAAe,GAAG,cAAc,EAAE,GAAG,GAAG,CAAC;AAAA,EAC7I;AACF;AACA,SAAS,aAAa,GAAG,GAAG,GAAG;AAC7B,SAAO,KAAK,kBAAkB,EAAE,WAAW,CAAC,GAAG,KAAK,kBAAkB,GAAG,CAAC,GAAG,OAAO,eAAe,GAAG,aAAa;AAAA,IACjH,UAAU;AAAA,EACZ,CAAC,GAAG;AACN;;;ACXA,SAAS,gBAAgB,GAAG,GAAG;AAC7B,SAAO,kBAAkB,OAAO,iBAAiB,OAAO,eAAe,KAAK,IAAI,SAAUC,IAAGC,IAAG;AAC9F,WAAOD,GAAE,YAAYC,IAAGD;AAAA,EAC1B,GAAG,gBAAgB,GAAG,CAAC;AACzB;;;ACHA,SAAS,eAAe,GAAG,GAAG;AAC5B,IAAE,YAAY,OAAO,OAAO,EAAE,SAAS,GAAG,EAAE,UAAU,cAAc,GAAG,gBAAe,GAAG,CAAC;AAC5F;;;ACHA,SAAS,gBAAgB,GAAG;AAC1B,SAAO,kBAAkB,OAAO,iBAAiB,OAAO,eAAe,KAAK,IAAI,SAAUE,IAAG;AAC3F,WAAOA,GAAE,aAAa,OAAO,eAAeA,EAAC;AAAA,EAC/C,GAAG,gBAAgB,CAAC;AACtB;;;ACJA,SAAS,kBAAkB,GAAG;AAC5B,MAAI;AACF,WAAO,OAAO,SAAS,SAAS,KAAK,CAAC,EAAE,QAAQ,eAAe;AAAA,EACjE,SAAS,GAAG;AACV,WAAO,cAAc,OAAO;AAAA,EAC9B;AACF;;;ACNA,SAAS,4BAA4B;AACnC,MAAI;AACF,QAAI,IAAI,CAAC,QAAQ,UAAU,QAAQ,KAAK,QAAQ,UAAU,SAAS,CAAC,GAAG,WAAY;AAAA,IAAC,CAAC,CAAC;AAAA,EACxF,SAASC,IAAG;AAAA,EAAC;AACb,UAAQ,4BAA4B,SAASC,6BAA4B;AACvE,WAAO,CAAC,CAAC;AAAA,EACX,GAAG;AACL;;;ACLA,SAAS,WAAW,GAAG,GAAG,GAAG;AAC3B,MAAI,0BAAyB;AAAG,WAAO,QAAQ,UAAU,MAAM,MAAM,SAAS;AAC9E,MAAI,IAAI,CAAC,IAAI;AACb,IAAE,KAAK,MAAM,GAAG,CAAC;AACjB,MAAI,IAAI,KAAK,EAAE,KAAK,MAAM,GAAG,CAAC,GAAG;AACjC,SAAO,KAAK,gBAAe,GAAG,EAAE,SAAS,GAAG;AAC9C;;;ACJA,SAAS,iBAAiB,GAAG;AAC3B,MAAI,IAAI,cAAc,OAAO,MAAM,oBAAI,IAAI,IAAI;AAC/C,SAAO,mBAAmB,SAASC,kBAAiBC,IAAG;AACrD,QAAI,SAASA,MAAK,CAAC,kBAAiBA,EAAC;AAAG,aAAOA;AAC/C,QAAI,cAAc,OAAOA;AAAG,YAAM,IAAI,UAAU,oDAAoD;AACpG,QAAI,WAAW,GAAG;AAChB,UAAI,EAAE,IAAIA,EAAC;AAAG,eAAO,EAAE,IAAIA,EAAC;AAC5B,QAAE,IAAIA,IAAG,OAAO;AAAA,IAClB;AACA,aAAS,UAAU;AACjB,aAAO,WAAUA,IAAG,WAAW,gBAAe,IAAI,EAAE,WAAW;AAAA,IACjE;AACA,WAAO,QAAQ,YAAY,OAAO,OAAOA,GAAE,WAAW;AAAA,MACpD,aAAa;AAAA,QACX,OAAO;AAAA,QACP,YAAY;AAAA,QACZ,UAAU;AAAA,QACV,cAAc;AAAA,MAChB;AAAA,IACF,CAAC,GAAG,gBAAe,SAASA,EAAC;AAAA,EAC/B,GAAG,iBAAiB,CAAC;AACvB;;;ACVA,SAASC,mBAAmBC,YAAyB;AACjD,MAAIC,MAAM;AACV,MAAIC,OAAOC,KAAKH,UAAU,EAAEI,WAAW;AACnC,WAAOH;AACXA,SAAM,IAAII,OAAO,EAAE,IAAI;AACvBJ,SAAO;AACPA,SAAOC,OAAOC,KAAKH,UAAU,EACxBM,IAAIC,OAAK;AACN,QAAIC,WAAW;AACf,QAAI;AACA,UAAID,MAAM,UAAU;AAChBC,mBAAWR,WAAWO,CAAC,EAAED,IAAKG,SAAaC,KAAKC,UAAUF,KAAKP,OAAOU,oBAAoBH,GAAG,CAAC,CAAC;MACnG,OAAO;AACHD,mBAAWE,KAAKC,UAAUX,WAAWO,CAAC,GAAG,SAAUM,IAAIC,GAAG;AACtD,iBAAOA,MAAMC,SAAY,OAAOD;QACpC,GAAG,CAAC;MACR;IACJ,SAASE,GAAG;IAAE;AACd,WAAOT,IAAI,OAAOC;EACtB,CAAC,EACAS,KAAK,IAAI;AACdhB,SAAO;AACP,SAAOA;AACX;AAEA,SAASiB,gBACLC,SACAC,MACApB,YACM;AACN,SAAO,OACHmB,UAAU,OACVpB,mBAAmBC,UAAU;AACrC;AAEA,IAAaqB,UAAO,SAAAC,QAAA;AAOhB,WAAAD,SACID,MACAD,SACAnB,aAAgC,CAAC,GACnC;AAAA,QAAAuB;AACE,QAAMC,MAAMN,gBAAgBC,SAASC,MAAMpB,UAAU;AACrDuB,YAAAD,OAAAG,KAAA,MAAMD,GAAG,KAAC;AACVD,UAAKH,OAAOA;AACZG,UAAKJ,UAAUK;AACfD,UAAKG,MAAMC,YAAYP,IAAI;AAC3BG,UAAKvB,aAAaA;AAClBuB,UAAKK,OAAO;AAAM,WAAAL;EACtB;AAACM,iBAAAR,UAAAC,MAAA;AAAA,MAAAQ,SAAAT,SAAAU;AAAAD,SAIDE,WAAA,SAAAA,WAAmB;AACf,WAAO,KAAKb;EAChB;AAAC,SAAAc,aAAAZ,UAAA,CAAA;IAAAa,KAAA;IAAAC,KALD,WAAmB;AACf,aAAO,cAAc,KAAKf,OAAO;IACrC;EAAC,GAAA;IAAAc,KAAA;IAAAC,KAID,WAAyB;AACrB,aAAO;IACX;EAAC,CAAA,CAAA;AAAA,EAAAC,iBA5BwBC,KAAK,CAAA;AA+BlC,IAAaC,cAAW,SAAAC,YAAA;AAOpB,WAAAD,aACIlB,MACAD,SACAnB,aAAgC,CAAC,GACnC;AAAA,QAAAwC;AACE,QAAMhB,MAAMN,gBAAgBC,SAASC,MAAMpB,UAAU;AACrDwC,aAAAD,WAAAd,KAAA,MAAMD,GAAG,KAAC;AACVgB,WAAKpB,OAAOA;AACZoB,WAAKrB,UAAUK;AACfgB,WAAKd,MAAMC,YAAYP,IAAI;AAC3BoB,WAAKxC,aAAaA;AAClBwC,WAAKZ,OAAO;AAAM,WAAAY;EACtB;AAACX,iBAAAS,cAAAC,UAAA;AAAA,MAAAE,UAAAH,aAAAP;AAAAU,UAIDT,WAAA,SAAAA,WAAmB;AACf,WAAO,KAAKb;EAChB;AAAC,SAAAc,aAAAK,cAAA,CAAA;IAAAJ,KAAA;IAAAC,KALD,WAAmB;AACf,aAAO,kBAAkB,KAAKf,OAAO;IACzC;EAAC,GAAA;IAAAc,KAAA;IAAAC,KAID,WAAyB;AACrB,aAAO;IACX;EAAC,CAAA,CAAA;AAAA,EAAAC,iBA5B4BM,SAAS,CAAA;AAgCnC,SAASf,YAAYP,MAAkB;AAC1C,SAAO,kDAAkDA;AAC7D;AAEO,SAASuB,aAAavB,MAAkB;AAC3C,SAAO,4CAA4CO,YAAYP,IAAI,IAAI;AAC3E;AAEO,SAASwB,WACZxB,MACApB,YACO;AACP,SAAO,IAAIqB,QACPD,MACAyB,aAAaC,mBAAmB1B,IAAI,IAAIuB,aAAavB,IAAI,GACzDpB,UACJ;AACJ;AAEO,SAAS+C,eACZ3B,MACApB,YACW;AACX,SAAO,IAAIsC,YACPlB,MACAyB,aAAaC,mBAAmB1B,IAAI,IAAIuB,aAAavB,IAAI,GACzDpB,UACJ;AACJ;AAOO,SAASgD,yBACZvC,KAC8C;AAC9C,MACIA,OACAA,IAAIwC,WAAW,KACjB;AACE,WAAOxC;EACX,OAAO;AACH,WAAO;EACX;AACJ;AAGA,IAAMyC,sCAAgE;EAClE,KAAK;EACL,KAAK;EACL,KAAK;AACT;AAEO,SAASC,6BAA6B1C,KAAwC;AACjF,SAAOmC,WAAW,SAAS;IACvBQ,MAAMF,oCAAoCzC,IAAIwC,MAAM;IACpDI,UAAU5C,IAAI6C;IACdC,YAAY9C;EAChB,CAAC;AACL;;;ACrKA,IAAI+C;AACJ,SAASC,YAAY;AAVrB;AAWI,MAAID,QAAQ;AACR,WAAOA;EACX;AACA,MACI,OAAOE,WAAW,eAClB,OAAOA,OAAOC,WAAW,eACzB,OAAOD,OAAOC,OAAOC,WAAW,YAClC;AACE,UAAMC,WAAW,OAAO;MACpBC,MAAM;QACFC,eAAe,OAAOL;QACtBM,sBAAsB,QAAON,iCAAQC;QACrCM,6BAA6B,SAAOP,sCAAQC,WAARD,mBAAgBE;MACxD;IACJ,CAAC;EACL;AACAJ,WAASE,OAAOC,OAAOC,OAAOM,KAAKR,OAAOC,MAAM;AAChD,SAAOH;AACX;AAEA,eAAsBW,aAAaC,OAAe;AAC9C,MAAMC,OAAO,IAAIC,YAAY,EAAEC,OAAOH,KAAK;AAC3C,MAAMI,aAAa,MAAMf,UAAU,EAAE,WAAWY,IAAI;AAIpD,MAAMI,OAAOC,MAAMC,UAAUC,IAAIC,KAC7B,IAAIC,WAAWN,UAAU,GACzBO,QAAO,OAAOA,EAAEC,SAAS,EAAE,GAAGC,MAAM,EAAE,CAC1C,EAAEC,KAAK,EAAE;AACT,SAAOT;AACX;AAEO,IAAMU,oBAAkChB;AAGxC,SAASiB,mBAAmBC,KAAqB;AACpD,MAAIC,KAAK;AACT,MAAMC,MAAMF,IAAIG;AAChB,WAASC,IAAI,GAAGA,IAAIF,KAAKE,KAAK;AAC1BH,SAAKA,KAAKD,IAAIK,WAAWD,CAAC;AAC1BH,UAAM;EACV;AACA,SAAOA;AACX;;;ACpDO,SAASK,WAA0B;AACtC,SAAO,IAAIC,QAAQC,SAAOC,WAAWD,KAAK,CAAC,CAAC;AAChD;AAEO,SAASE,YAAYC,KAAa,GAAkB;AACvD,SAAO,IAAIJ,QAAQC,SAAOC,WAAWD,KAAKG,EAAE,CAAC;AACjD;AAEO,SAASC,UAAaC,cAA0C;AACnE,MAAIA,gBAAgB,OAAQA,aAAqBC,SAAS,YAAY;AAElE,WAAOD;EACX,OAAO;AACH,WAAON,QAAQQ,QAAQF,YAAY;EACvC;AACJ;AAKO,SAASG,UAAUC,OAAqB;AAC3C,MACI,OAAOA,UAAU,eACjB,OAAOA,MAAMH,SAAS,YACxB;AACE,WAAO;EACX;AACA,SAAO;AACX;AAMO,IAAMI,uBAAsCX,QAAQQ,QAAQ,IAAI;AAChE,IAAMI,wBAAwCZ,QAAQQ,QAAQ,KAAK;AACnE,IAAMK,uBAAsCb,QAAQQ,QAAQ,IAAI;AAChE,IAAMM,uBAAsCd,QAAQQ,QAAQ;AAG5D,SAASO,0BAOZC,UAA8B,KAChC;AAQE,MACI,OAAOC,wBAAwB,YACjC;AACE,WAAO,IAAIjB,QAAcC,SAAO;AAC5BgB,0BACI,MAAMhB,IAAI,GACV;QACIe;MACJ,CACJ;IACJ,CAAC;EACL,OAAO;AACH,WAAOb,YAAY,CAAC;EACxB;AACJ;AAOA,IAAIe,mBAAmBJ;AAChB,SAASK,mBACZH,UAA8BI,QAChC;AACEF,qBAAmBA,iBAAiBX,KAAK,MAAM;AAC3C,WAAOQ,0BAA0BC,OAAO;EAC5C,CAAC;AACD,SAAOE;AACX;AAQO,SAASG,+BAA+BC,KAAqB;AAQhE,MACI,OAAOL,wBAAwB,YACjC;AACEA,wBAAoB,MAAM;AACtBK,UAAI;IACR,CAAC;EACL;AACJ;AAQO,SAASC,cACZC,OACAC,SACc;AACd,SAAOD,MACFE,OACG,CAACC,SAASC,SAAUD,QAAgBpB,KAAKqB,IAAI,GAC7C5B,QAAQQ,QAAQiB,OAAO,CAC3B;AACR;;;AChIO,IAAMI,iBAAiB;AACvB,IAAMC,kBAAkB;;;ACD/B,IAAMC,mBAAmB;AASlB,SAASC,YAAYC,SAAiB,IAAY;AACrD,MAAIC,OAAO;AAEX,WAASC,IAAI,GAAGA,IAAIF,QAAQE,KAAK;AAC7BD,YAAQH,iBAAiBK,OAAOC,KAAKC,MAAMD,KAAKE,OAAO,IAAIR,iBAAiBE,MAAM,CAAC;EACvF;AAEA,SAAOC;AACX;AAMO,IAAMM,gBAAgB;AAKtB,SAASC,QAAQC,KAAqB;AACzCA,SAAO;AACP,MAAMC,IAAID,IAAIN,OAAO,CAAC,EACjBQ,YAAY;AACjB,SAAOD,IAAID,IAAIG,OAAO,CAAC;AAC3B;AAKO,SAASC,SAASJ,KAAqB;AAE1C,SAAOA,IAAIN,OAAO,CAAC,MAAM,KAAK;AAC1BM,UAAMA,IAAIG,OAAO,CAAC;EACtB;AAGA,SAAOH,IAAIK,MAAM,EAAE,MAAM,KAAK;AAC1BL,UAAMA,IAAIK,MAAM,GAAG,EAAE;EACzB;AAEA,SAAOL;AACX;AAKO,SAASM,iBAAiBN,KAAqB;AAClD,SAAOA,IAAIN,OAAOM,IAAIT,SAAS,CAAC;AACpC;AAKO,SAASgB,aAAaC,MAAc;AAEvC,MACIA,KAAKC,SAAS,GAAG;EACjBD,KAAKC,SAAS,IAAI,GACpB;AACE,WAAO;EACX,OAAO;AACH,WAAO;EACX;AACJ;AAOO,SAASC,oBAAoBC,aAAsC;AACtE,SAAO,IAAIC,YAAY,EAAEC,OAAOF,WAAW;AAC/C;AAEO,SAASG,oBAAoBd,KAAsC;AACtE,SAAO,IAAIe,YAAY,EAAEC,OAAOhB,GAAG;AACvC;AAGO,SAASiB,gBAAgBjB,KAAqB;AACjD,SAAOA,IAAIkB,KAAK,EAAEC,QAAQ,YAAY,EAAE;AAC5C;;;ACpFO,SAASC,aAAaC,MAAM,GAAGC,MAAM,KAAc;AACtD,SAAOC,KAAKC,MAAMD,KAAKE,OAAO,KAAKH,MAAMD,MAAM,EAAE,IAAIA;AACzD;;;ACDO,SAASK,UAAUC,GAAQC,GAAiB;AAC/C,MAAID,MAAMC;AAAG,WAAO;AAEpB,MAAID,KAAKC,KAAK,OAAOD,KAAK,YAAY,OAAOC,KAAK,UAAU;AACxD,QAAID,EAAEE,gBAAgBD,EAAEC;AAAa,aAAO;AAE5C,QAAIC;AACJ,QAAIC;AACJ,QAAIC,MAAMC,QAAQN,CAAC,GAAG;AAClBG,eAASH,EAAEG;AACX,UAAIA,WAAWF,EAAEE;AAAQ,eAAO;AAChC,WAAKC,IAAID,QAAQC,QAAQ;AACrB,YAAI,CAACL,UAAUC,EAAEI,CAAC,GAAGH,EAAEG,CAAC,CAAC;AAAG,iBAAO;AACvC,aAAO;IACX;AAGA,QAAIJ,EAAEE,gBAAgBK;AAAQ,aAAOP,EAAEQ,WAAWP,EAAEO,UAAUR,EAAES,UAAUR,EAAEQ;AAC5E,QAAIT,EAAEU,YAAYC,OAAOC,UAAUF;AAAS,aAAOV,EAAEU,QAAQ,MAAMT,EAAES,QAAQ;AAC7E,QAAIV,EAAEa,aAAaF,OAAOC,UAAUC;AAAU,aAAOb,EAAEa,SAAS,MAAMZ,EAAEY,SAAS;AAEjF,QAAMC,OAAOH,OAAOG,KAAKd,CAAC;AAC1BG,aAASW,KAAKX;AACd,QAAIA,WAAWQ,OAAOG,KAAKb,CAAC,EAAEE;AAAQ,aAAO;AAE7C,SAAKC,IAAID,QAAQC,QAAQ;AACrB,UAAI,CAACO,OAAOC,UAAUG,eAAeC,KAAKf,GAAGa,KAAKV,CAAC,CAAC;AAAG,eAAO;AAElE,SAAKA,IAAID,QAAQC,QAAQ,KAAI;AACzB,UAAMa,MAAMH,KAAKV,CAAC;AAClB,UAAI,CAACL,UAAUC,EAAEiB,GAAG,GAAGhB,EAAEgB,GAAG,CAAC;AAAG,eAAO;IAC3C;AAEA,WAAO;EACX;AAGA,SAAOjB,MAAMA,KAAKC,MAAMA;AAC5B;;;ACtCA,IAAMiB,WAAYC,WAAgB;AAC9B,MAAMC,OAAO,OAAOD;AACpB,SAAOA,UAAU,SAASC,SAAS,YAAYA,SAAS;AAC5D;AAEA,IAAMC,iBAAiB,oBAAIC,IAAI,CAC3B,aACA,aACA,aAAa,CAChB;AAED,IAAMC,SAAS,IAAID,IAAI,YAAY;AAEnC,SAASE,gBAAgBC,MAAc;AACnC,MAAMC,QAAQ,CAAA;AACd,MAAIC,iBAAiB;AACrB,MAAIC,cAAc;AAClB,MAAIC,aAAa;AAEjB,WAAWC,aAAaL,MAAM;AAC1B,YAAQK,WAAS;MACb,KAAK,MAAM;AACP,YAAIF,gBAAgB,SAAS;AACzB,gBAAM,IAAIG,MAAM,+BAA+B;QACnD;AAEA,YAAIH,gBAAgB,YAAY;AAC5B,gBAAM,IAAIG,MAAM,kCAAkC;QACtD;AAEA,YAAIF,YAAY;AACZF,4BAAkBG;QACtB;AAEAF,sBAAc;AACdC,qBAAa,CAACA;AACd;MACJ;MAEA,KAAK,KAAK;AACN,YAAID,gBAAgB,SAAS;AACzB,gBAAM,IAAIG,MAAM,+BAA+B;QACnD;AAEA,YAAIH,gBAAgB,YAAY;AAC5BA,wBAAc;AACd;QACJ;AAEA,YAAIC,YAAY;AACZA,uBAAa;AACbF,4BAAkBG;AAClB;QACJ;AAEA,YAAIT,eAAeW,IAAIL,cAAc,GAAG;AACpC,iBAAO,CAAA;QACX;AAEAD,cAAMO,KAAKN,cAAc;AACzBA,yBAAiB;AACjBC,sBAAc;AACd;MACJ;MAEA,KAAK,KAAK;AACN,YAAIA,gBAAgB,SAAS;AACzB,gBAAM,IAAIG,MAAM,+BAA+B;QACnD;AAEA,YAAIH,gBAAgB,YAAY;AAC5BA,wBAAc;AACd;QACJ;AAEA,YAAIC,YAAY;AACZA,uBAAa;AACbF,4BAAkBG;AAClB;QACJ;AAEA,YAAIF,gBAAgB,YAAY;AAC5B,cAAIP,eAAeW,IAAIL,cAAc,GAAG;AACpC,mBAAO,CAAA;UACX;AAEAD,gBAAMO,KAAKN,cAAc;AACzBA,2BAAiB;QACrB;AAEAC,sBAAc;AACd;MACJ;MAEA,KAAK,KAAK;AACN,YAAIA,gBAAgB,SAAS;AACzBF,gBAAMO,KAAKC,OAAOC,SAASR,gBAAgB,EAAE,CAAC;AAC9CA,2BAAiB;AACjBC,wBAAc;AACd;QACJ;AAEA,YAAIA,gBAAgB,YAAY;AAC5B,gBAAM,IAAIG,MAAM,kCAAkC;QACtD;MAGJ;MAEA,SAAS;AACL,YAAIH,gBAAgB,WAAW,CAACL,OAAOS,IAAIF,SAAS,GAAG;AACnD,gBAAM,IAAIC,MAAM,+BAA+B;QACnD;AAEA,YAAIH,gBAAgB,YAAY;AAC5B,gBAAM,IAAIG,MAAM,kCAAkC;QACtD;AAEA,YAAIH,gBAAgB,SAAS;AACzBA,wBAAc;QAClB;AAEA,YAAIC,YAAY;AACZA,uBAAa;AACbF,4BAAkB;QACtB;AAEAA,0BAAkBG;MACtB;IACJ;EACJ;AAEA,MAAID,YAAY;AACZF,sBAAkB;EACtB;AAEA,UAAQC,aAAW;IACf,KAAK,YAAY;AACb,UAAIP,eAAeW,IAAIL,cAAc,GAAG;AACpC,eAAO,CAAA;MACX;AAEAD,YAAMO,KAAKN,cAAc;AAEzB;IACJ;IAEA,KAAK,SAAS;AACV,YAAM,IAAII,MAAM,sBAAsB;IAC1C;IAEA,KAAK,SAAS;AACVL,YAAMO,KAAK,EAAE;AAEb;IACJ;EAEJ;AAEA,SAAOP;AACX;AAEA,SAASU,cAAcC,QAAeC,KAAa;AAC/C,MAAI,OAAOA,QAAQ,YAAYC,MAAMC,QAAQH,MAAM,GAAG;AAClD,QAAMI,QAAQP,OAAOC,SAASG,KAAK,EAAE;AACrC,WAAOJ,OAAOQ,UAAUD,KAAK,KAAKJ,OAAOI,KAAK,MAAMJ,OAAOC,GAAG;EAClE;AAEA,SAAO;AACX;AAEA,SAASK,qBAAqBN,QAAaC,KAAsB;AAC7D,MAAIF,cAAcC,QAAQC,GAAU,GAAG;AACnC,UAAM,IAAIP,MAAM,yBAAyB;EAC7C;AACJ;AAKO,SAASa,YAAYP,QAAaZ,MAAyBN,OAAa;AAC3E,MAAIoB,MAAMC,QAAQf,IAAI,GAAG;AACrBA,WAAOA,KAAKoB,KAAK,GAAG;EACxB;AAOA,MACI,CAACpB,KAAKqB,SAAS,GAAG,KAClB,CAACrB,KAAKqB,SAAS,GAAG,GACpB;AACE,WAAOT,OAAOZ,IAAI;EACtB;AAEA,MAAI,CAACP,SAASmB,MAAa,KAAK,OAAOZ,SAAS,UAAU;AACtD,WAAON,UAAU4B,SAAYV,SAASlB;EAC1C;AAEA,MAAM6B,YAAYxB,gBAAgBC,IAAI;AACtC,MAAIuB,UAAUC,WAAW,GAAG;AACxB,WAAO9B;EACX;AAEA,WAASsB,QAAQ,GAAGA,QAAQO,UAAUC,QAAQR,SAAS;AACnD,QAAMH,MAAMU,UAAUP,KAAK;AAE3B,QAAIL,cAAcC,QAAeC,GAAU,GAAG;AAC1CD,eAASI,UAAUO,UAAUC,SAAS,IAAIF,SAAY;IAC1D,OAAO;AACHV,eAAUA,OAAeC,GAAG;IAChC;AAEA,QAAID,WAAWU,UAAaV,WAAW,MAAM;AAMzC,UAAII,UAAUO,UAAUC,SAAS,GAAG;AAChC,eAAO9B;MACX;AAEA;IACJ;EACJ;AAEA,SAAOkB,WAAWU,SAAY5B,QAAQkB;AAC1C;AAEO,SAASa,YAAYb,QAAaZ,MAAcN,OAAY;AAC/D,MAAIoB,MAAMC,QAAQf,IAAI,GAAG;AACrBA,WAAOA,KAAKoB,KAAK,GAAG;EACxB;AAEA,MAAI,CAAC3B,SAASmB,MAAa,KAAK,OAAOZ,SAAS,UAAU;AACtD,WAAOY;EACX;AAEA,MAAMc,OAAOd;AACb,MAAMW,YAAYxB,gBAAgBC,IAAI;AAEtC,WAASgB,QAAQ,GAAGA,QAAQO,UAAUC,QAAQR,SAAS;AACnD,QAAMH,MAAMU,UAAUP,KAAK;AAE3BE,yBAAqBN,QAAQC,GAAG;AAEhC,QAAIG,UAAUO,UAAUC,SAAS,GAAG;AAChCZ,aAAOC,GAAG,IAAInB;IAClB,WAAW,CAACD,SAASmB,OAAOC,GAAG,CAAC,GAAG;AAC/BD,aAAOC,GAAG,IAAI,OAAOU,UAAUP,QAAQ,CAAC,MAAM,WAAW,CAAA,IAAK,CAAC;IACnE;AAEAJ,aAASA,OAAOC,GAAG;EACvB;AAEA,SAAOa;AACX;AAEO,SAASC,eAAef,QAAaZ,MAAc;AACtD,MAAI,CAACP,SAASmB,MAAa,KAAK,OAAOZ,SAAS,UAAU;AACtD,WAAO;EACX;AAEA,MAAMuB,YAAYxB,gBAAgBC,IAAI;AAEtC,WAASgB,QAAQ,GAAGA,QAAQO,UAAUC,QAAQR,SAAS;AACnD,QAAMH,MAAMU,UAAUP,KAAK;AAE3BE,yBAAqBN,QAAQC,GAAG;AAEhC,QAAIG,UAAUO,UAAUC,SAAS,GAAG;AAChC,aAAOZ,OAAOC,GAAG;AACjB,aAAO;IACX;AAEAD,aAASA,OAAOC,GAAG;AAEnB,QAAI,CAACpB,SAASmB,MAAa,GAAG;AAC1B,aAAO;IACX;EACJ;AACJ;AAEO,SAASgB,YAAYhB,QAAaZ,MAAc;AACnD,MAAI,CAACP,SAASmB,MAAM,KAAK,OAAOZ,SAAS,UAAU;AAC/C,WAAO;EACX;AAEA,MAAMuB,YAAYxB,gBAAgBC,IAAI;AACtC,MAAIuB,UAAUC,WAAW,GAAG;AACxB,WAAO;EACX;AAEA,WAAWX,OAAOU,WAAW;AACzB,QAAI,CAAC9B,SAASmB,MAAM,KAAK,EAAEC,OAAOD,WAAWD,cAAcC,QAAQC,GAAU,GAAG;AAC5E,aAAO;IACX;AAEAD,aAASA,OAAOC,GAAG;EACvB;AAEA,SAAO;AACX;AAGA,SAASgB,WAAW7B,MAAc;AAC9B,MAAI,OAAOA,SAAS,UAAU;AAC1B,UAAM,IAAI8B,UAAU,mBAAmB;EAC3C;AAEA,SAAO9B,KAAK+B,QAAQ,WAAW,MAAM;AACzC;AAGA,SAASC,QAAQtC,OAAY;AACzB,MAAIoB,MAAMC,QAAQrB,KAAK,GAAG;AACtB,WAAOA,MAAMuC,IAAI,CAACC,GAAGlB,UAAU,CAACA,OAAOkB,CAAC,CAAC;EAC7C;AAEA,SAAOC,OAAOH,QAAQtC,KAAK;AAC/B;AAEA,SAAS0C,cAAcC,cAAuB;AAC1C,MAAIC,SAAS;AAGb,WAAS,CAACtB,OAAOuB,OAAO,KAAKP,QAAQK,YAAY,GAAG;AAChD,QAAI,OAAOE,YAAY,UAAU;AAC7BD,gBAAM,MAAQC,UAAO;IACzB,OAAO;AACHA,gBAAUV,WAAWU,OAAO;AAC5BD,gBAAUtB,UAAU,IAAIuB,UAAO,MAAOA;IAC1C;EACJ;AAEA,SAAOD;AACX;AAEA,UAAUE,iBAAiB5B,QAAa6B,cAAc,CAAA,GAAS;AAC3D,MAAI,CAAChD,SAASmB,MAAM,GAAG;AACnB,QAAI6B,YAAYjB,SAAS,GAAG;AACxB,YAAMY,cAAcK,WAAW;IACnC;AAEA;EACJ;AAEA,WAAW,CAAC5B,KAAKnB,KAAK,KAAKsC,QAAQpB,MAAM,GAAG;AACxC,WAAO4B,iBAAiB9C,OAAO,CAAC,GAAG+C,aAAa5B,GAAG,CAAQ;EAC/D;AACJ;AAEO,SAAS6B,SAAS9B,QAAa;AAClC,SAAO,CAAC,GAAG4B,iBAAiB5B,MAAM,CAAC;AACvC;;;AC5WO,SAAS+B,kBAAwBC,KAAkCC,KAAW;AACjF,MAAMC,MAAMF,IAAIG,IAAIF,GAAG;AACvB,MAAI,OAAOC,QAAQ,aAAa;AAC5B,UAAM,IAAIE,MAAM,4BAA4BH,GAAG;EACnD;AACA,SAAOC;AACX;AAEO,SAASG,mBACZL,KACAM,OACAC,SACAC,YACQ;AACR,MAAIC,QAAQT,IAAIG,IAAIG,KAAK;AACzB,MAAI,OAAOG,UAAU,aAAa;AAC9BA,YAAQF,QAAQ;AAChBP,QAAIU,IAAIJ,OAAOG,KAAK;EACxB,WAAWD,YAAY;AACnBA,eAAWC,KAAK;EACpB;AACA,SAAOA;AACX;;;ACRO,SAASE,cACZC,WACK;AACL,MAAMC,WAAWD,UAAUE,MAAM,GAAG;AACpC,MAAIC,aAAa;AACjBF,WAASG,QAAQC,UAAQ;AACrBF,kBAAcG,QAAQD,IAAI;EAC9B,CAAC;AACDF,gBAAc;AACd,SAAO,IAAII,MAAK,gLAGGJ,aAAU,2BAAyBH,YAAS,iCACzCG,aAAU,cAEhC;AACJ;AAIO,SAASK,iBAAiBC,KAAgE;AAC7F,MAAMC,MAAsB;IACxBC,MAAMF,IAAIE;IACVC,SAASH,IAAIG;IACbC,MAAOJ,IAAYI;IACnBC,YAAaL,IAAgBK;IAC7BC,YAAaN,IAAYM;IACzBC,MAAOP,IAAgBO;IACvBC,KAAMR,IAAgBQ;;;;;;;IAOtBC,OAAO,CAACT,IAAIS,QAAQC,SAAYV,IAAIS,MAAME,QAAQ,OAAO,MAAM;EACnE;AACA,SAAOV;AACX;;;ACvCA,IAAIW,WAAmB;AAKhB,SAASC,MAAc;AAC1B,MAAIC,MAAMC,KAAKF,IAAI;AACnBC,QAAMA,MAAM;AACZ,MAAIA,OAAOF,UAAU;AACjBE,UAAMF,WAAW;EACrB;AAQA,MAAMI,cAAcC,WAAWH,IAAII,QAAQ,CAAC,CAAC;AAE7CN,aAAWI;AACX,SAAOA;AACX;;;ACnCO,SAASG,UAAUC,QAAgBC,IAA2B;AACjE,MAAIC,MAAMF,MAAM,EAAEG,KAAK,CAAC,EAAEC,QAAQ,CAACC,IAAIC,QAAQL,GAAGK,GAAG,CAAC;AAC1D;AAEO,SAASC,eAAkBC,KAAmCC,SAAqB;AACtF,MAAI,CAACD,KAAK;AACN,QAAI,CAACC,SAAS;AACVA,gBAAU;IACd;AACA,UAAM,IAAIC,MAAM,gCAAgCD,OAAO;EAC3D;AACA,SAAOD;AACX;AAEO,SAASG,cAAcH,KAAsB;AAChD,MAAI,CAACI,OAAOC,UAAUL,GAAG,GAAG;AACxB,UAAM,IAAIE,MAAM,0BAA0B;EAC9C;AACA,SAAOF;AACX;AAQO,IAAMM,6BAA6B;EACtCC,YAAY;EACZC,UAAU;AACd;AASO,SAASC,aAAgBC,MAAcC,MAAY;AAEtD,SAAO;IAAE,CAACD,IAAI,KAAKE,MAAM;AAAE,aAAOD,KAAKE,MAAM,MAAMD,IAAI;IAAE;EAAE,EAAEF,IAAI;AACrE;AAGO,SAASI,4BAA4BC,SAAa;AACrD,WAASC,YAAYC,KAAmBC,UAAe,CAAC,GAAG;AAEvDA,YAAQH,UAAU;MACd,GAAGA;;MACH,GAAIG,QAAQH,WAAW,CAAC;;IAC5B;AAGA,WAAOI,MAAMF,KAAKC,OAAO;EAC7B;AACA,SAAOF;AACX;;;ACtDO,IAAMI,eAAe;;;ACCrB,IAAMC,oBAAyB,CAAC;;;ACAhC,IAAMC,oBAAoB;AAC1B,IAAMC,+BAA+B;AAE5C,IAAIC,oBAAsCC;AAC1C,IAAIC,iBAAiB;AASrB,eAAsBC,iBAAiB;AACnC,MAAID,gBAAgB;AAChB,WAAOF;EACX;AACAE,mBAAiB;AAEjBF,uBAAqB,YAAY;AAC7B,QACII,kBAAkBC,WAClB,OAAOD,kBAAkBC,YAAY,YACpC,MAAMC,kBAAkBF,kBAAkBC,OAAO,MAAMP,mBAC1D;AACE,aAAO;IACX,OAAO;AACH,aAAO;IACX;EACJ,GAAG;AAEH,SAAOE;AACX;;;ACRO,SAASO,0BACZC,SACAC,YAC+B;AAC/B,MAAMC,eAAgDC,wBAAwB;IAC1EH;IACAI,MAAM;IACNH;IACAI,YAAY;MACR,CAACJ,UAAU,GAAG;QACVG,MAAM;QACNE,WAAW;MACf;MACAC,OAAO;QACHH,MAAM;MACV;IACJ;IACAI,SAAS,CACL,CAACP,UAAU,CAAC;IAEhBQ,UAAU,CAACR,UAAU;EACzB,CAAC;AACD,SAAOC;AACX;AAKO,SAASQ,sBACZC,cACAC,MACU;AACV,MAAIC,UAAkBD;AACtBC,YAAUA,QAAQC,QAAQC,gBAAgB,cAAc;AACxDF,YAAU,gBAAgBA;AAC1BA,YAAUG,SAASH,OAAO;AAE1B,MAAMI,MAAMC,YAAYP,cAAcE,OAAO;AAC7C,SAAOI;AACX;AAEO,SAASE,eACZC,aACAC,YACAC,cACiB;AAEjB,MAAI,OAAOD,WAAWpB,eAAe,UAAU;AAC3C,WAAOqB;EACX;AAEA,MAAMC,aAAaC,oCACfH,YACAC,YACJ;AACA,MAAMG,kBAAsCH,aAAaF,WAAW;AACpE,MACIK,mBACAA,oBAAoBF,YACtB;AACE,UAAMG,WACF,SACA;MACIC,MAAM;QACFL;QACAG;QACAF;MACJ;MACAK,QAAQP;IACZ,CAAC;EACT;AAECC,eAAqBF,WAAW,IAAIG;AACrC,SAAOD;AACX;AAEO,SAASO,4BACZ5B,YACqB;AACrB,MAAI,OAAOA,eAAe,UAAU;AAChC,WAAOA;EACX,OAAO;AACH,WAAQA,WAA8C6B;EAC1D;AACJ;AAEO,SAASC,sBACZH,QACM;AACN,MAAMR,cAAcS,4BAA4BD,OAAO3B,UAAU;AACjE,MAAM+B,aAAatB,sBAAsBkB,QAAQR,WAAW;AAC5D,SAAOa,eAAeD,WAAW1B,SAAS;AAC9C;AAKO,SAASkB,oCACZH,YACAC,cACM;AACN,MAAI,OAAOD,WAAWpB,eAAe,UAAU;AAC3C,WAAQqB,aAAqBD,WAAWpB,UAAU;EACtD;AAEA,MAAMiC,mBAAmDb,WAAWpB;AACpE,SAAOiC,iBAAiBC,OAAOC,IAAIC,WAAS;AACxC,QAAM9B,QAAQW,YAAYI,cAAqBe,KAAe;AAC9D,QAAI,OAAO9B,UAAU,aAAa;AAC9B,YAAMmB,WAAW,SAAS;QAAEC,MAAM;UAAEU;UAAOf;QAAa;MAAE,CAAC;IAC/D;AACA,WAAOf;EACX,CAAC,EAAE+B,KAAKJ,iBAAiBK,SAAS;AACtC;AAeO,SAASC,sBAAyBnB,YAA8C;AACnF,MAAMoB,mBAAoCC,WAAWrB,YAAY,IAAI;AACrE,SAAOoB;AACX;AAOO,SAASE,gBAAgBvB,aAAqB;AACjD,SAAO,CAAC,YAAYA,WAAW;AACnC;AAMO,SAASjB,wBACZyC,WAC+B;AAC/BA,cAAYC,UAAUD,SAAS;AAC/B,MAAMxB,cAAsBS,4BAA4Be,UAAU3C,UAAU;AAC5E2C,YAAUvC,aAAawC,UAAUD,UAAUvC,UAAU;AAGrDuC,YAAUE,uBAAuB;AAGjC,MAAI,CAACC,OAAOC,UAAUC,eAAeC,KAAKN,WAAW,gBAAgB,GAAG;AACpEA,cAAUO,iBAAiB;EAC/B;AAGAP,YAAUpC,UAAUoC,UAAUpC,UAAUoC,UAAUpC,QAAQ4C,MAAM,CAAC,IAAI,CAAA;AAGrER,YAAUnC,WAAWmC,UAAUnC,WAAWmC,UAAUnC,SAAS2C,MAAM,CAAC,IAAI,CAAA;AAGxER,YAAUS,YAAYT,UAAUS,YAAYT,UAAUS,UAAUD,MAAM,CAAC,IAAI,CAAA;AAG1ER,YAAUvC,WAAmBiD,OAAO;IACjClD,MAAM;IACNmD,WAAW;EACf;AAGCX,YAAUvC,WAAmBmD,eAAe;IACzCpD,MAAM;EACV;AAGCwC,YAAUvC,WAAmBoD,WAAW;IACrCrD,MAAM;EACV;AAGCwC,YAAUvC,WAAmBqD,QAAQC;AAKtCf,YAAUnC,WAAWmC,UAAUnC,WAAWmC,UAAUnC,SAAS2C,MAAM,CAAC,IAAI,CAAA;AACvER,YAAUnC,SAAsBmD,KAAK,UAAU;AAC/ChB,YAAUnC,SAAsBmD,KAAK,MAAM;AAC3ChB,YAAUnC,SAAsBmD,KAAK,OAAO;AAC5ChB,YAAUnC,SAAsBmD,KAAK,cAAc;AAGpD,MAAMC,cAAcC,eAAelB,SAAS;AAC5CmB,gBAAcnB,UAAUnC,UAAiBoD,WAAW;AACpDjB,YAAUnC,WAAWmC,UAAUnC,SAC1BuD,OAAQ3B,WAAkB,CAACA,MAAM4B,SAAS,GAAG,CAAC,EAC9CD,OAAO,CAACE,MAAWC,KAAUC,QAAaA,IAAIC,QAAQH,IAAI,MAAMC,GAAG;AAIxEvB,YAAU5C,UAAU4C,UAAU5C,WAAW;AAEzC,MAAMsE,aAAyB1B,UAAUpC,QAAQ4B,IAAImC,WAAS;AAC1D,QAAMC,UAAUC,qBAAqBF,KAAK,IAAIA,MAAMnB,MAAM,CAAC,IAAI,CAACmB,KAAK;AAKrE,QAAI,CAACC,QAAQP,SAAS7C,WAAW,GAAG;AAChCoD,cAAQZ,KAAKxC,WAAW;IAC5B;AAIA,QAAIoD,QAAQ,CAAC,MAAM,YAAY;AAC3BA,cAAQE,QAAQ,UAAU;IAC9B;AAEA,WAAOF;EACX,CAAC;AAED,MAAIF,WAAWK,WAAW,GAAG;AACzBL,eAAWV,KAAKjB,gBAAgBvB,WAAW,CAAC;EAChD;AAGAkD,aAAWV,KAAK,CAAC,aAAaxC,WAAW,CAAC;AAG1C,MAAIwB,UAAUgC,iBAAiB;AAC3BhC,cAAUgC,gBAAgBxC,IAAIyC,SAAO;AACjCP,iBAAWV,KAAKiB,GAAG;IACvB,CAAC;EACL;AAGA,MAAMC,WAAW,oBAAIC,IAAY;AACjCT,aAAWN,OAAOO,WAAS;AACvB,QAAMS,WAAWT,MAAMjC,KAAK,GAAG;AAC/B,QAAIwC,SAASG,IAAID,QAAQ,GAAG;AACxB,aAAO;IACX,OAAO;AACHF,eAASI,IAAIF,QAAQ;AACrB,aAAO;IACX;EACJ,CAAC;AAEDpC,YAAUpC,UAAU8D;AAEpB,SAAO1B;AACX;AAEO,IAAMuC,yBAAyB;AAC/B,IAAMxB,iBAA6B;EACtCvD,MAAM;EACNC,YAAY;;;;;IAKR+E,KAAK;MACDhF,MAAM;;;;MAINiF,SAASC;MACTC,SAASJ;MACTK,YAAY;IAChB;EACJ;;;;;EAKA1C,sBAAsB;EACtBrC,UAAU,CACN,KAAK;AAEb;AAOO,SAASqD,eACZzC,YACQ;AACR,MAAMJ,MAAM8B,OAAO0C,KAAKpE,WAAWhB,UAAU,EACxC2D,OAAOlC,SAAQT,WAAmBhB,WAAWyB,GAAG,EAAE4D,KAAK;AAG5D,MAAMtE,cAAcS,4BAA4BR,WAAWpB,UAAU;AACrEgB,MAAI2C,KAAKxC,WAAW;AAGpB,MAAI,OAAOC,WAAWpB,eAAe,UAAU;AAC1CoB,eAAWpB,WAAsCkC,OAC7CwD,QAAQtD,WAASpB,IAAI2C,KAAKvB,KAAe,CAAC;EACnD;AAEA,SAAOpB;AACX;AAMO,SAAS2E,uBAAuBC,UAAyBC,KAAe;AAC3E,MAAMC,cAAchD,OAAO0C,KAAKI,SAASG,aAAa;AACtD,WAASC,IAAI,GAAGA,IAAIF,YAAYpB,QAAQ,EAAEsB,GAAG;AACzC,QAAMnE,MAAMiE,YAAYE,CAAC;AACzB,QAAI,CAAClD,OAAOC,UAAUC,eAAeC,KAAK4C,KAAKhE,GAAG,KAAK,OAAOgE,IAAIhE,GAAG,MAAM,aAAa;AACpFgE,UAAIhE,GAAG,IAAI+D,SAASG,cAAclE,GAAG;IACzC;EACJ;AACA,SAAOgE;AACX;AAEO,IAAMI,4BAAkF;EAC3F9F,MAAM;EACNC,YAAY;IACR8F,IAAI;MACA/F,MAAM;IACV;IACAgF,KAAK;MACDhF,MAAM;IACV;EACJ;EACAK,UAAU,CACN,MACA,KAAK;EAETqC,sBAAsB;AAC1B;",
  "names": ["lastOfArray", "ar", "length", "shuffleArray", "arr", "slice", "sort", "Math", "random", "randomOfArray", "randomElement", "floor", "toArray", "input", "Array", "isArray", "batchArray", "array", "batchSize", "ret", "batch", "splice", "push", "removeOneFromArrayIfMatches", "condition", "i", "done", "isMaybeReadonlyArray", "x", "isOneItemOfArrayInOtherArray", "ar1", "ar2", "el", "has", "includes", "arrayFilterNotEmpty", "value", "undefined", "countUntilNotMatching", "matchingFn", "count", "idx", "item", "matching", "asyncFilter", "predicate", "filters", "Promise", "all", "map", "filter", "index", "sumNumberArray", "maxOfNumbers", "max", "appendToArray", "add", "addSize", "baseSize", "uniqueArray", "arrArg", "elem", "pos", "indexOf", "sortByObjectNumberProperty", "property", "a", "b", "b64EncodeUnicode", "str", "encode", "b64DecodeUnicode", "decode", "arrayBufferToBase64", "buffer", "binary", "bytes", "Uint8Array", "len", "byteLength", "i", "String", "fromCharCode", "btoa", "base64ToArrayBuffer", "base64", "binary_string", "atob", "length", "charCodeAt", "createBlob", "data", "type", "blob", "Blob", "createBlobFromBase64", "base64String", "base64Response", "fetch", "blobToString", "blobType", "Object", "prototype", "toString", "call", "Promise", "resolve", "text", "blobToBase64String", "arrayBuffer", "arrayBufferToBase64", "getBlobSize", "size", "parseRevision", "revision", "split", "length", "Error", "height", "parseInt", "hash", "getHeightOfRevision", "useChars", "index", "char", "createRevision", "databaseInstanceToken", "previousDocData", "newRevisionHeight", "_rev", "deepFreeze", "o", "Object", "freeze", "getOwnPropertyNames", "forEach", "prop", "prototype", "hasOwnProperty", "call", "isFrozen", "objectPathMonad", "objectPath", "split", "splitLength", "length", "obj", "currentVal", "i", "subPath", "getFromObjectOrThrow", "key", "val", "Error", "flattenObject", "ob", "toReturn", "flatObject", "x", "flatClone", "assign", "firstPropertyNameOfObject", "keys", "firstPropertyValueOfObject", "sortObject", "noArraySort", "Array", "isArray", "sort", "a", "b", "localeCompare", "map", "out", "deepClone", "src", "ret", "dest", "clone", "overwriteGetterForCaching", "getterName", "value", "defineProperty", "get", "hasDeepProperty", "property", "has", "find", "item", "findUndefinedPath", "parentPath", "currentPath", "result", "RX_META_LWT_MINIMUM", "getDefaultRxDocumentMeta", "lwt", "getDefaultRevision", "stripMetaDataFromDocument", "docData", "Object", "assign", "_meta", "undefined", "_deleted", "_rev", "areRxDocumentArraysEqual", "primaryPath", "ar1", "ar2", "length", "i", "len", "row1", "row2", "getSortDocumentsByLastWriteTimeComparator", "a", "b", "sortDocumentsByLastWriteTime", "docs", "sort", "toWithDeleted", "flatClone", "_attachments", "overwritable", "isDevMode", "deepFreezeWhenDevMode", "obj", "tunnelErrorMessage", "message", "o", "t", "e", "t", "t", "_isNativeReflectConstruct", "_wrapNativeSuper", "t", "parametersToString", "parameters", "ret", "Object", "keys", "length", "repeat", "map", "k", "paramStr", "err", "JSON", "stringify", "getOwnPropertyNames", "_k", "v", "undefined", "e", "join", "messageForError", "message", "code", "RxError", "_Error", "_this", "mes", "call", "url", "getErrorUrl", "rxdb", "_inheritsLoose", "_proto", "prototype", "toString", "_createClass", "key", "get", "_wrapNativeSuper", "Error", "RxTypeError", "_TypeError", "_this2", "_proto2", "TypeError", "errorUrlHint", "newRxError", "overwritable", "tunnelErrorMessage", "newRxTypeError", "isBulkWriteConflictError", "status", "STORAGE_WRITE_ERROR_CODE_TO_MESSAGE", "rxStorageWriteErrorToRxError", "name", "document", "documentId", "writeError", "hashFn", "getHashFn", "crypto", "subtle", "digest", "newRxError", "args", "typeof_crypto", "typeof_crypto_subtle", "typeof_crypto_subtle_digest", "bind", "nativeSha256", "input", "data", "TextEncoder", "encode", "hashBuffer", "hash", "Array", "prototype", "map", "call", "Uint8Array", "x", "toString", "slice", "join", "defaultHashSha256", "hashStringToNumber", "str", "nr", "len", "length", "i", "charCodeAt", "nextTick", "Promise", "res", "setTimeout", "promiseWait", "ms", "toPromise", "maybePromise", "then", "resolve", "isPromise", "value", "PROMISE_RESOLVE_TRUE", "PROMISE_RESOLVE_FALSE", "PROMISE_RESOLVE_NULL", "PROMISE_RESOLVE_VOID", "requestIdlePromiseNoQueue", "timeout", "requestIdleCallback", "idlePromiseQueue", "requestIdlePromise", "undefined", "requestIdleCallbackIfAvailable", "fun", "promiseSeries", "tasks", "initial", "reduce", "current", "next", "REGEX_ALL_DOTS", "REGEX_ALL_PIPES", "COUCH_NAME_CHARS", "randomToken", "length", "text", "i", "charAt", "Math", "floor", "random", "RANDOM_STRING", "ucfirst", "str", "f", "toUpperCase", "substr", "trimDots", "slice", "lastCharOfString", "isFolderPath", "name", "includes", "arrayBufferToString", "arrayBuffer", "TextDecoder", "decode", "stringToArrayBuffer", "TextEncoder", "encode", "normalizeString", "trim", "replace", "randomNumber", "min", "max", "Math", "floor", "random", "deepEqual", "a", "b", "constructor", "length", "i", "Array", "isArray", "RegExp", "source", "flags", "valueOf", "Object", "prototype", "toString", "keys", "hasOwnProperty", "call", "key", "isObject", "value", "type", "disallowedKeys", "Set", "digits", "getPathSegments", "path", "parts", "currentSegment", "currentPart", "isIgnoring", "character", "Error", "has", "push", "Number", "parseInt", "isStringIndex", "object", "key", "Array", "isArray", "index", "isInteger", "assertNotStringIndex", "getProperty", "join", "includes", "undefined", "pathArray", "length", "setProperty", "root", "deleteProperty", "hasProperty", "escapePath", "TypeError", "replace", "entries", "map", "v", "Object", "stringifyPath", "pathSegments", "result", "segment", "deepKeysIterator", "currentPath", "deepKeys", "getFromMapOrThrow", "map", "key", "val", "get", "Error", "getFromMapOrCreate", "index", "creator", "ifWasThere", "value", "set", "pluginMissing", "pluginKey", "keyParts", "split", "pluginName", "forEach", "part", "ucfirst", "Error", "errorToPlainJson", "err", "ret", "name", "message", "rxdb", "parameters", "extensions", "code", "url", "stack", "undefined", "replace", "_lastNow", "now", "ret", "Date", "twoDecimals", "parseFloat", "toFixed", "runXTimes", "xTimes", "fn", "Array", "fill", "forEach", "_v", "idx", "ensureNotFalsy", "obj", "message", "Error", "ensureInteger", "Number", "isInteger", "RXJS_SHARE_REPLAY_DEFAULTS", "bufferSize", "refCount", "nameFunction", "name", "body", "args", "apply", "customFetchWithFixedHeaders", "headers", "customFetch", "url", "options", "fetch", "RXDB_VERSION", "RXDB_UTILS_GLOBAL", "PREMIUM_FLAG_HASH", "NON_PREMIUM_COLLECTION_LIMIT", "hasPremiumPromise", "PROMISE_RESOLVE_FALSE", "premiumChecked", "hasPremiumFlag", "RXDB_UTILS_GLOBAL", "premium", "defaultHashSha256", "getPseudoSchemaForVersion", "version", "primaryKey", "pseudoSchema", "fillWithDefaultSettings", "type", "properties", "maxLength", "value", "indexes", "required", "getSchemaByObjectPath", "rxJsonSchema", "path", "usePath", "replace", "REGEX_ALL_DOTS", "trimDots", "ret", "getProperty", "fillPrimaryKey", "primaryPath", "jsonSchema", "documentData", "newPrimary", "getComposedPrimaryKeyOfDocumentData", "existingPrimary", "newRxError", "args", "schema", "getPrimaryFieldOfPrimaryKey", "key", "getLengthOfPrimaryKey", "schemaPart", "ensureNotFalsy", "compositePrimary", "fields", "map", "field", "join", "separator", "normalizeRxJsonSchema", "normalizedSchema", "sortObject", "getDefaultIndex", "schemaObj", "flatClone", "additionalProperties", "Object", "prototype", "hasOwnProperty", "call", "keyCompression", "slice", "encrypted", "_rev", "minLength", "_attachments", "_deleted", "_meta", "RX_META_SCHEMA", "push", "finalFields", "getFinalFields", "appendToArray", "filter", "includes", "elem", "pos", "arr", "indexOf", "useIndexes", "index", "arIndex", "isMaybeReadonlyArray", "unshift", "length", "internalIndexes", "idx", "hasIndex", "Set", "indexStr", "has", "add", "META_LWT_UNIX_TIME_MAX", "lwt", "minimum", "RX_META_LWT_MINIMUM", "maximum", "multipleOf", "keys", "final", "forEach", "fillObjectWithDefaults", "rxSchema", "obj", "defaultKeys", "defaultValues", "i", "DEFAULT_CHECKPOINT_SCHEMA", "id"]
}
