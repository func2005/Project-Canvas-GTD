var Nz=Object.defineProperty;var Tz=(e,t,n)=>t in e?Nz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zu=(e,t,n)=>(Tz(e,typeof t!="symbol"?t+"":t,n),n),cE=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var Te=(e,t,n)=>(cE(e,t,"read from private field"),n?n.call(e):t.get(e)),vn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},gn=(e,t,n,r)=>(cE(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var qu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $h(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Mz(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var TC={exports:{}},sg={},MC={exports:{}},vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rh=Symbol.for("react.element"),Iz=Symbol.for("react.portal"),Az=Symbol.for("react.fragment"),jz=Symbol.for("react.strict_mode"),Lz=Symbol.for("react.profiler"),zz=Symbol.for("react.provider"),Fz=Symbol.for("react.context"),Bz=Symbol.for("react.forward_ref"),Wz=Symbol.for("react.suspense"),Uz=Symbol.for("react.memo"),Hz=Symbol.for("react.lazy"),fE=Symbol.iterator;function Kz(e){return e===null||typeof e!="object"?null:(e=fE&&e[fE]||e["@@iterator"],typeof e=="function"?e:null)}var IC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AC=Object.assign,jC={};function of(e,t,n){this.props=e,this.context=t,this.refs=jC,this.updater=n||IC}of.prototype.isReactComponent={};of.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};of.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function LC(){}LC.prototype=of.prototype;function X_(e,t,n){this.props=e,this.context=t,this.refs=jC,this.updater=n||IC}var Q_=X_.prototype=new LC;Q_.constructor=X_;AC(Q_,of.prototype);Q_.isPureReactComponent=!0;var dE=Array.isArray,zC=Object.prototype.hasOwnProperty,G_={current:null},FC={key:!0,ref:!0,__self:!0,__source:!0};function BC(e,t,n){var r,i={},a=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)zC.call(t,r)&&!FC.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Rh,type:e,key:a,ref:s,props:i,_owner:G_.current}}function qz(e,t){return{$$typeof:Rh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function J_(e){return typeof e=="object"&&e!==null&&e.$$typeof===Rh}function Yz(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var hE=/\/+/g;function Zy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Yz(""+e.key):t.toString(36)}function Im(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Rh:case Iz:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+Zy(s,0):r,dE(i)?(n="",e!=null&&(n=e.replace(hE,"$&/")+"/"),Im(i,t,n,"",function(d){return d})):i!=null&&(J_(i)&&(i=qz(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(hE,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",dE(e))for(var u=0;u<e.length;u++){a=e[u];var c=r+Zy(a,u);s+=Im(a,t,n,c,i)}else if(c=Kz(e),typeof c=="function")for(e=c.call(e),u=0;!(a=e.next()).done;)a=a.value,c=r+Zy(a,u++),s+=Im(a,t,n,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Jp(e,t,n){if(e==null)return e;var r=[],i=0;return Im(e,r,"","",function(a){return t.call(n,a,i++)}),r}function Vz(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ar={current:null},Am={transition:null},Xz={ReactCurrentDispatcher:Ar,ReactCurrentBatchConfig:Am,ReactCurrentOwner:G_};function WC(){throw Error("act(...) is not supported in production builds of React.")}vt.Children={map:Jp,forEach:function(e,t,n){Jp(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Jp(e,function(){t++}),t},toArray:function(e){return Jp(e,function(t){return t})||[]},only:function(e){if(!J_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};vt.Component=of;vt.Fragment=Az;vt.Profiler=Lz;vt.PureComponent=X_;vt.StrictMode=jz;vt.Suspense=Wz;vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xz;vt.act=WC;vt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=AC({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=G_.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)zC.call(t,c)&&!FC.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&u!==void 0?u[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:Rh,type:e.type,key:i,ref:a,props:r,_owner:s}};vt.createContext=function(e){return e={$$typeof:Fz,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:zz,_context:e},e.Consumer=e};vt.createElement=BC;vt.createFactory=function(e){var t=BC.bind(null,e);return t.type=e,t};vt.createRef=function(){return{current:null}};vt.forwardRef=function(e){return{$$typeof:Bz,render:e}};vt.isValidElement=J_;vt.lazy=function(e){return{$$typeof:Hz,_payload:{_status:-1,_result:e},_init:Vz}};vt.memo=function(e,t){return{$$typeof:Uz,type:e,compare:t===void 0?null:t}};vt.startTransition=function(e){var t=Am.transition;Am.transition={};try{e()}finally{Am.transition=t}};vt.unstable_act=WC;vt.useCallback=function(e,t){return Ar.current.useCallback(e,t)};vt.useContext=function(e){return Ar.current.useContext(e)};vt.useDebugValue=function(){};vt.useDeferredValue=function(e){return Ar.current.useDeferredValue(e)};vt.useEffect=function(e,t){return Ar.current.useEffect(e,t)};vt.useId=function(){return Ar.current.useId()};vt.useImperativeHandle=function(e,t,n){return Ar.current.useImperativeHandle(e,t,n)};vt.useInsertionEffect=function(e,t){return Ar.current.useInsertionEffect(e,t)};vt.useLayoutEffect=function(e,t){return Ar.current.useLayoutEffect(e,t)};vt.useMemo=function(e,t){return Ar.current.useMemo(e,t)};vt.useReducer=function(e,t,n){return Ar.current.useReducer(e,t,n)};vt.useRef=function(e){return Ar.current.useRef(e)};vt.useState=function(e){return Ar.current.useState(e)};vt.useSyncExternalStore=function(e,t,n){return Ar.current.useSyncExternalStore(e,t,n)};vt.useTransition=function(){return Ar.current.useTransition()};vt.version="18.3.1";MC.exports=vt;var ne=MC.exports;const Dt=$h(ne);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qz=ne,Gz=Symbol.for("react.element"),Jz=Symbol.for("react.fragment"),Zz=Object.prototype.hasOwnProperty,eF=Qz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tF={key:!0,ref:!0,__self:!0,__source:!0};function UC(e,t,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Zz.call(t,r)&&!tF.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Gz,type:e,key:a,ref:s,props:i,_owner:eF.current}}sg.Fragment=Jz;sg.jsx=UC;sg.jsxs=UC;TC.exports=sg;var j=TC.exports,uw={},HC={exports:{}},Ei={},KC={exports:{}},qC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(oe,_e){var G=oe.length;oe.push(_e);e:for(;0<G;){var F=G-1>>>1,ee=oe[F];if(0<i(ee,_e))oe[F]=_e,oe[G]=ee,G=F;else break e}}function n(oe){return oe.length===0?null:oe[0]}function r(oe){if(oe.length===0)return null;var _e=oe[0],G=oe.pop();if(G!==_e){oe[0]=G;e:for(var F=0,ee=oe.length,X=ee>>>1;F<X;){var I=2*(F+1)-1,H=oe[I],ae=I+1,ge=oe[ae];if(0>i(H,G))ae<ee&&0>i(ge,H)?(oe[F]=ge,oe[ae]=G,F=ae):(oe[F]=H,oe[I]=G,F=I);else if(ae<ee&&0>i(ge,G))oe[F]=ge,oe[ae]=G,F=ae;else break e}}return _e}function i(oe,_e){var G=oe.sortIndex-_e.sortIndex;return G!==0?G:oe.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var c=[],d=[],h=1,v=null,g=3,w=!1,_=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(oe){for(var _e=n(d);_e!==null;){if(_e.callback===null)r(d);else if(_e.startTime<=oe)r(d),_e.sortIndex=_e.expirationTime,t(c,_e);else break;_e=n(d)}}function M(oe){if(E=!1,P(oe),!_)if(n(c)!==null)_=!0,qe(T);else{var _e=n(d);_e!==null&&We(M,_e.startTime-oe)}}function T(oe,_e){_=!1,E&&(E=!1,x(re),re=-1),w=!0;var G=g;try{for(P(_e),v=n(c);v!==null&&(!(v.expirationTime>_e)||oe&&!ce());){var F=v.callback;if(typeof F=="function"){v.callback=null,g=v.priorityLevel;var ee=F(v.expirationTime<=_e);_e=e.unstable_now(),typeof ee=="function"?v.callback=ee:v===n(c)&&r(c),P(_e)}else r(c);v=n(c)}if(v!==null)var X=!0;else{var I=n(d);I!==null&&We(M,I.startTime-_e),X=!1}return X}finally{v=null,g=G,w=!1}}var U=!1,W=null,re=-1,he=5,de=-1;function ce(){return!(e.unstable_now()-de<he)}function pe(){if(W!==null){var oe=e.unstable_now();de=oe;var _e=!0;try{_e=W(!0,oe)}finally{_e?xe():(U=!1,W=null)}}else U=!1}var xe;if(typeof S=="function")xe=function(){S(pe)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Le=Ce.port2;Ce.port1.onmessage=pe,xe=function(){Le.postMessage(null)}}else xe=function(){C(pe,0)};function qe(oe){W=oe,U||(U=!0,xe())}function We(oe,_e){re=C(function(){oe(e.unstable_now())},_e)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(oe){oe.callback=null},e.unstable_continueExecution=function(){_||w||(_=!0,qe(T))},e.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<oe?Math.floor(1e3/oe):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(oe){switch(g){case 1:case 2:case 3:var _e=3;break;default:_e=g}var G=g;g=_e;try{return oe()}finally{g=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(oe,_e){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var G=g;g=oe;try{return _e()}finally{g=G}},e.unstable_scheduleCallback=function(oe,_e,G){var F=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?F+G:F):G=F,oe){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=G+ee,oe={id:h++,callback:_e,priorityLevel:oe,startTime:G,expirationTime:ee,sortIndex:-1},G>F?(oe.sortIndex=G,t(d,oe),n(c)===null&&oe===n(d)&&(E?(x(re),re=-1):E=!0,We(M,G-F))):(oe.sortIndex=ee,t(c,oe),_||w||(_=!0,qe(T))),oe},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(oe){var _e=g;return function(){var G=g;g=_e;try{return oe.apply(this,arguments)}finally{g=G}}}})(qC);KC.exports=qC;var nF=KC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rF=ne,_i=nF;function ke(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var YC=new Set,Kd={};function bl(e,t){Bc(e,t),Bc(e+"Capture",t)}function Bc(e,t){for(Kd[e]=t,e=0;e<t.length;e++)YC.add(t[e])}var Fo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lw=Object.prototype.hasOwnProperty,iF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pE={},mE={};function aF(e){return lw.call(mE,e)?!0:lw.call(pE,e)?!1:iF.test(e)?mE[e]=!0:(pE[e]=!0,!1)}function oF(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function sF(e,t,n,r){if(t===null||typeof t>"u"||oF(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function jr(e,t,n,r,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var or={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){or[e]=new jr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];or[t]=new jr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){or[e]=new jr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){or[e]=new jr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){or[e]=new jr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){or[e]=new jr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){or[e]=new jr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){or[e]=new jr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){or[e]=new jr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Z_=/[\-:]([a-z])/g;function eb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Z_,eb);or[t]=new jr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Z_,eb);or[t]=new jr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Z_,eb);or[t]=new jr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){or[e]=new jr(e,1,!1,e.toLowerCase(),null,!1,!1)});or.xlinkHref=new jr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){or[e]=new jr(e,1,!1,e.toLowerCase(),null,!0,!0)});function tb(e,t,n,r){var i=or.hasOwnProperty(t)?or[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(sF(t,n,i,r)&&(n=null),r||i===null?aF(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Qo=rF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zp=Symbol.for("react.element"),uc=Symbol.for("react.portal"),lc=Symbol.for("react.fragment"),nb=Symbol.for("react.strict_mode"),cw=Symbol.for("react.profiler"),VC=Symbol.for("react.provider"),XC=Symbol.for("react.context"),rb=Symbol.for("react.forward_ref"),fw=Symbol.for("react.suspense"),dw=Symbol.for("react.suspense_list"),ib=Symbol.for("react.memo"),_s=Symbol.for("react.lazy"),QC=Symbol.for("react.offscreen"),vE=Symbol.iterator;function ed(e){return e===null||typeof e!="object"?null:(e=vE&&e[vE]||e["@@iterator"],typeof e=="function"?e:null)}var nn=Object.assign,e0;function vd(e){if(e0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);e0=t&&t[1]||""}return`
`+e0+e}var t0=!1;function n0(e,t){if(!e||t0)return"";t0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,u=a.length-1;1<=s&&0<=u&&i[s]!==a[u];)u--;for(;1<=s&&0<=u;s--,u--)if(i[s]!==a[u]){if(s!==1||u!==1)do if(s--,u--,0>u||i[s]!==a[u]){var c=`
`+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=u);break}}}finally{t0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?vd(e):""}function uF(e){switch(e.tag){case 5:return vd(e.type);case 16:return vd("Lazy");case 13:return vd("Suspense");case 19:return vd("SuspenseList");case 0:case 2:case 15:return e=n0(e.type,!1),e;case 11:return e=n0(e.type.render,!1),e;case 1:return e=n0(e.type,!0),e;default:return""}}function hw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case lc:return"Fragment";case uc:return"Portal";case cw:return"Profiler";case nb:return"StrictMode";case fw:return"Suspense";case dw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case XC:return(e.displayName||"Context")+".Consumer";case VC:return(e._context.displayName||"Context")+".Provider";case rb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ib:return t=e.displayName||null,t!==null?t:hw(e.type)||"Memo";case _s:t=e._payload,e=e._init;try{return hw(e(t))}catch{}}return null}function lF(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hw(t);case 8:return t===nb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function GC(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cF(e){var t=GC(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function em(e){e._valueTracker||(e._valueTracker=cF(e))}function JC(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=GC(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ov(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function pw(e,t){var n=t.checked;return nn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function gE(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Vs(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ZC(e,t){t=t.checked,t!=null&&tb(e,"checked",t,!1)}function mw(e,t){ZC(e,t);var n=Vs(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?vw(e,t.type,n):t.hasOwnProperty("defaultValue")&&vw(e,t.type,Vs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function vw(e,t,n){(t!=="number"||ov(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var gd=Array.isArray;function Sc(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Vs(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function gw(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ke(91));return nn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ke(92));if(gd(n)){if(1<n.length)throw Error(ke(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Vs(n)}}function eD(e,t){var n=Vs(t.value),r=Vs(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _E(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function tD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?tD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var tm,nD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(tm=tm||document.createElement("div"),tm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=tm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qd(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var xd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fF=["Webkit","ms","Moz","O"];Object.keys(xd).forEach(function(e){fF.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xd[t]=xd[e]})});function rD(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||xd.hasOwnProperty(e)&&xd[e]?(""+t).trim():t+"px"}function iD(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=rD(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var dF=nn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ww(e,t){if(t){if(dF[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ke(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ke(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ke(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ke(62))}}function _w(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bw=null;function ab(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Sw=null,xc=null,Ec=null;function bE(e){if(e=Mh(e)){if(typeof Sw!="function")throw Error(ke(280));var t=e.stateNode;t&&(t=dg(t),Sw(e.stateNode,e.type,t))}}function aD(e){xc?Ec?Ec.push(e):Ec=[e]:xc=e}function oD(){if(xc){var e=xc,t=Ec;if(Ec=xc=null,bE(e),t)for(e=0;e<t.length;e++)bE(t[e])}}function sD(e,t){return e(t)}function uD(){}var r0=!1;function lD(e,t,n){if(r0)return e(t,n);r0=!0;try{return sD(e,t,n)}finally{r0=!1,(xc!==null||Ec!==null)&&(uD(),oD())}}function Yd(e,t){var n=e.stateNode;if(n===null)return null;var r=dg(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ke(231,t,typeof n));return n}var xw=!1;if(Fo)try{var td={};Object.defineProperty(td,"passive",{get:function(){xw=!0}}),window.addEventListener("test",td,td),window.removeEventListener("test",td,td)}catch{xw=!1}function hF(e,t,n,r,i,a,s,u,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(h){this.onError(h)}}var Ed=!1,sv=null,uv=!1,Ew=null,pF={onError:function(e){Ed=!0,sv=e}};function mF(e,t,n,r,i,a,s,u,c){Ed=!1,sv=null,hF.apply(pF,arguments)}function vF(e,t,n,r,i,a,s,u,c){if(mF.apply(this,arguments),Ed){if(Ed){var d=sv;Ed=!1,sv=null}else throw Error(ke(198));uv||(uv=!0,Ew=d)}}function Sl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function cD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function SE(e){if(Sl(e)!==e)throw Error(ke(188))}function gF(e){var t=e.alternate;if(!t){if(t=Sl(e),t===null)throw Error(ke(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return SE(i),e;if(a===r)return SE(i),t;a=a.sibling}throw Error(ke(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(ke(189))}}if(n.alternate!==r)throw Error(ke(190))}if(n.tag!==3)throw Error(ke(188));return n.stateNode.current===n?e:t}function fD(e){return e=gF(e),e!==null?dD(e):null}function dD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=dD(e);if(t!==null)return t;e=e.sibling}return null}var hD=_i.unstable_scheduleCallback,xE=_i.unstable_cancelCallback,yF=_i.unstable_shouldYield,wF=_i.unstable_requestPaint,wn=_i.unstable_now,_F=_i.unstable_getCurrentPriorityLevel,ob=_i.unstable_ImmediatePriority,pD=_i.unstable_UserBlockingPriority,lv=_i.unstable_NormalPriority,bF=_i.unstable_LowPriority,mD=_i.unstable_IdlePriority,ug=null,Za=null;function SF(e){if(Za&&typeof Za.onCommitFiberRoot=="function")try{Za.onCommitFiberRoot(ug,e,void 0,(e.current.flags&128)===128)}catch{}}var Pa=Math.clz32?Math.clz32:PF,xF=Math.log,EF=Math.LN2;function PF(e){return e>>>=0,e===0?32:31-(xF(e)/EF|0)|0}var nm=64,rm=4194304;function yd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function cv(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=n&268435455;if(s!==0){var u=s&~i;u!==0?r=yd(u):(a&=s,a!==0&&(r=yd(a)))}else s=n&~i,s!==0?r=yd(s):a!==0&&(r=yd(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Pa(t),i=1<<n,r|=e[n],t&=~i;return r}function kF(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CF(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Pa(a),u=1<<s,c=i[s];c===-1?(!(u&n)||u&r)&&(i[s]=kF(u,t)):c<=t&&(e.expiredLanes|=u),a&=~u}}function Pw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vD(){var e=nm;return nm<<=1,!(nm&4194240)&&(nm=64),e}function i0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Nh(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pa(t),e[t]=n}function DF(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Pa(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function sb(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Pa(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ot=0;function gD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yD,ub,wD,_D,bD,kw=!1,im=[],As=null,js=null,Ls=null,Vd=new Map,Xd=new Map,Es=[],OF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function EE(e,t){switch(e){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":Vd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xd.delete(t.pointerId)}}function nd(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Mh(t),t!==null&&ub(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function $F(e,t,n,r,i){switch(t){case"focusin":return As=nd(As,e,t,n,r,i),!0;case"dragenter":return js=nd(js,e,t,n,r,i),!0;case"mouseover":return Ls=nd(Ls,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Vd.set(a,nd(Vd.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Xd.set(a,nd(Xd.get(a)||null,e,t,n,r,i)),!0}return!1}function SD(e){var t=Gu(e.target);if(t!==null){var n=Sl(t);if(n!==null){if(t=n.tag,t===13){if(t=cD(n),t!==null){e.blockedOn=t,bD(e.priority,function(){wD(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Cw(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);bw=r,n.target.dispatchEvent(r),bw=null}else return t=Mh(n),t!==null&&ub(t),e.blockedOn=n,!1;t.shift()}return!0}function PE(e,t,n){jm(e)&&n.delete(t)}function RF(){kw=!1,As!==null&&jm(As)&&(As=null),js!==null&&jm(js)&&(js=null),Ls!==null&&jm(Ls)&&(Ls=null),Vd.forEach(PE),Xd.forEach(PE)}function rd(e,t){e.blockedOn===t&&(e.blockedOn=null,kw||(kw=!0,_i.unstable_scheduleCallback(_i.unstable_NormalPriority,RF)))}function Qd(e){function t(i){return rd(i,e)}if(0<im.length){rd(im[0],e);for(var n=1;n<im.length;n++){var r=im[n];r.blockedOn===e&&(r.blockedOn=null)}}for(As!==null&&rd(As,e),js!==null&&rd(js,e),Ls!==null&&rd(Ls,e),Vd.forEach(t),Xd.forEach(t),n=0;n<Es.length;n++)r=Es[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Es.length&&(n=Es[0],n.blockedOn===null);)SD(n),n.blockedOn===null&&Es.shift()}var Pc=Qo.ReactCurrentBatchConfig,fv=!0;function NF(e,t,n,r){var i=Ot,a=Pc.transition;Pc.transition=null;try{Ot=1,lb(e,t,n,r)}finally{Ot=i,Pc.transition=a}}function TF(e,t,n,r){var i=Ot,a=Pc.transition;Pc.transition=null;try{Ot=4,lb(e,t,n,r)}finally{Ot=i,Pc.transition=a}}function lb(e,t,n,r){if(fv){var i=Cw(e,t,n,r);if(i===null)p0(e,t,r,dv,n),EE(e,r);else if($F(i,e,t,n,r))r.stopPropagation();else if(EE(e,r),t&4&&-1<OF.indexOf(e)){for(;i!==null;){var a=Mh(i);if(a!==null&&yD(a),a=Cw(e,t,n,r),a===null&&p0(e,t,r,dv,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else p0(e,t,r,null,n)}}var dv=null;function Cw(e,t,n,r){if(dv=null,e=ab(r),e=Gu(e),e!==null)if(t=Sl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=cD(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return dv=e,null}function xD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_F()){case ob:return 1;case pD:return 4;case lv:case bF:return 16;case mD:return 536870912;default:return 16}default:return 16}}var Os=null,cb=null,Lm=null;function ED(){if(Lm)return Lm;var e,t=cb,n=t.length,r,i="value"in Os?Os.value:Os.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[a-r];r++);return Lm=i.slice(e,1<r?1-r:void 0)}function zm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function am(){return!0}function kE(){return!1}function Pi(e){function t(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(a):a[u]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?am:kE,this.isPropagationStopped=kE,this}return nn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=am)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=am)},persist:function(){},isPersistent:am}),t}var sf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fb=Pi(sf),Th=nn({},sf,{view:0,detail:0}),MF=Pi(Th),a0,o0,id,lg=nn({},Th,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:db,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==id&&(id&&e.type==="mousemove"?(a0=e.screenX-id.screenX,o0=e.screenY-id.screenY):o0=a0=0,id=e),a0)},movementY:function(e){return"movementY"in e?e.movementY:o0}}),CE=Pi(lg),IF=nn({},lg,{dataTransfer:0}),AF=Pi(IF),jF=nn({},Th,{relatedTarget:0}),s0=Pi(jF),LF=nn({},sf,{animationName:0,elapsedTime:0,pseudoElement:0}),zF=Pi(LF),FF=nn({},sf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),BF=Pi(FF),WF=nn({},sf,{data:0}),DE=Pi(WF),UF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=KF[e])?!!t[e]:!1}function db(){return qF}var YF=nn({},Th,{key:function(e){if(e.key){var t=UF[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?HF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:db,charCode:function(e){return e.type==="keypress"?zm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),VF=Pi(YF),XF=nn({},lg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),OE=Pi(XF),QF=nn({},Th,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:db}),GF=Pi(QF),JF=nn({},sf,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZF=Pi(JF),e4=nn({},lg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),t4=Pi(e4),n4=[9,13,27,32],hb=Fo&&"CompositionEvent"in window,Pd=null;Fo&&"documentMode"in document&&(Pd=document.documentMode);var r4=Fo&&"TextEvent"in window&&!Pd,PD=Fo&&(!hb||Pd&&8<Pd&&11>=Pd),$E=String.fromCharCode(32),RE=!1;function kD(e,t){switch(e){case"keyup":return n4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cc=!1;function i4(e,t){switch(e){case"compositionend":return CD(t);case"keypress":return t.which!==32?null:(RE=!0,$E);case"textInput":return e=t.data,e===$E&&RE?null:e;default:return null}}function a4(e,t){if(cc)return e==="compositionend"||!hb&&kD(e,t)?(e=ED(),Lm=cb=Os=null,cc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return PD&&t.locale!=="ko"?null:t.data;default:return null}}var o4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!o4[e.type]:t==="textarea"}function DD(e,t,n,r){aD(r),t=hv(t,"onChange"),0<t.length&&(n=new fb("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var kd=null,Gd=null;function s4(e){zD(e,0)}function cg(e){var t=hc(e);if(JC(t))return e}function u4(e,t){if(e==="change")return t}var OD=!1;if(Fo){var u0;if(Fo){var l0="oninput"in document;if(!l0){var TE=document.createElement("div");TE.setAttribute("oninput","return;"),l0=typeof TE.oninput=="function"}u0=l0}else u0=!1;OD=u0&&(!document.documentMode||9<document.documentMode)}function ME(){kd&&(kd.detachEvent("onpropertychange",$D),Gd=kd=null)}function $D(e){if(e.propertyName==="value"&&cg(Gd)){var t=[];DD(t,Gd,e,ab(e)),lD(s4,t)}}function l4(e,t,n){e==="focusin"?(ME(),kd=t,Gd=n,kd.attachEvent("onpropertychange",$D)):e==="focusout"&&ME()}function c4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cg(Gd)}function f4(e,t){if(e==="click")return cg(t)}function d4(e,t){if(e==="input"||e==="change")return cg(t)}function h4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Oa=typeof Object.is=="function"?Object.is:h4;function Jd(e,t){if(Oa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!lw.call(t,i)||!Oa(e[i],t[i]))return!1}return!0}function IE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function AE(e,t){var n=IE(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=IE(n)}}function RD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?RD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ND(){for(var e=window,t=ov();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ov(e.document)}return t}function pb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function p4(e){var t=ND(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&RD(n.ownerDocument.documentElement,n)){if(r!==null&&pb(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=AE(n,a);var s=AE(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var m4=Fo&&"documentMode"in document&&11>=document.documentMode,fc=null,Dw=null,Cd=null,Ow=!1;function jE(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ow||fc==null||fc!==ov(r)||(r=fc,"selectionStart"in r&&pb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Cd&&Jd(Cd,r)||(Cd=r,r=hv(Dw,"onSelect"),0<r.length&&(t=new fb("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fc)))}function om(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var dc={animationend:om("Animation","AnimationEnd"),animationiteration:om("Animation","AnimationIteration"),animationstart:om("Animation","AnimationStart"),transitionend:om("Transition","TransitionEnd")},c0={},TD={};Fo&&(TD=document.createElement("div").style,"AnimationEvent"in window||(delete dc.animationend.animation,delete dc.animationiteration.animation,delete dc.animationstart.animation),"TransitionEvent"in window||delete dc.transitionend.transition);function fg(e){if(c0[e])return c0[e];if(!dc[e])return e;var t=dc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in TD)return c0[e]=t[n];return e}var MD=fg("animationend"),ID=fg("animationiteration"),AD=fg("animationstart"),jD=fg("transitionend"),LD=new Map,LE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nu(e,t){LD.set(e,t),bl(t,[e])}for(var f0=0;f0<LE.length;f0++){var d0=LE[f0],v4=d0.toLowerCase(),g4=d0[0].toUpperCase()+d0.slice(1);nu(v4,"on"+g4)}nu(MD,"onAnimationEnd");nu(ID,"onAnimationIteration");nu(AD,"onAnimationStart");nu("dblclick","onDoubleClick");nu("focusin","onFocus");nu("focusout","onBlur");nu(jD,"onTransitionEnd");Bc("onMouseEnter",["mouseout","mouseover"]);Bc("onMouseLeave",["mouseout","mouseover"]);Bc("onPointerEnter",["pointerout","pointerover"]);Bc("onPointerLeave",["pointerout","pointerover"]);bl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bl("onBeforeInput",["compositionend","keypress","textInput","paste"]);bl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y4=new Set("cancel close invalid load scroll toggle".split(" ").concat(wd));function zE(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,vF(r,t,void 0,e),e.currentTarget=null}function zD(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var u=r[s],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==a&&i.isPropagationStopped())break e;zE(i,u,d),a=c}else for(s=0;s<r.length;s++){if(u=r[s],c=u.instance,d=u.currentTarget,u=u.listener,c!==a&&i.isPropagationStopped())break e;zE(i,u,d),a=c}}}if(uv)throw e=Ew,uv=!1,Ew=null,e}function Ut(e,t){var n=t[Mw];n===void 0&&(n=t[Mw]=new Set);var r=e+"__bubble";n.has(r)||(FD(t,e,2,!1),n.add(r))}function h0(e,t,n){var r=0;t&&(r|=4),FD(n,e,r,t)}var sm="_reactListening"+Math.random().toString(36).slice(2);function Zd(e){if(!e[sm]){e[sm]=!0,YC.forEach(function(n){n!=="selectionchange"&&(y4.has(n)||h0(n,!1,e),h0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[sm]||(t[sm]=!0,h0("selectionchange",!1,t))}}function FD(e,t,n,r){switch(xD(t)){case 1:var i=NF;break;case 4:i=TF;break;default:i=lb}n=i.bind(null,t,n,e),i=void 0,!xw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function p0(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;u!==null;){if(s=Gu(u),s===null)return;if(c=s.tag,c===5||c===6){r=a=s;continue e}u=u.parentNode}}r=r.return}lD(function(){var d=a,h=ab(n),v=[];e:{var g=LD.get(e);if(g!==void 0){var w=fb,_=e;switch(e){case"keypress":if(zm(n)===0)break e;case"keydown":case"keyup":w=VF;break;case"focusin":_="focus",w=s0;break;case"focusout":_="blur",w=s0;break;case"beforeblur":case"afterblur":w=s0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=CE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=AF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=GF;break;case MD:case ID:case AD:w=zF;break;case jD:w=ZF;break;case"scroll":w=MF;break;case"wheel":w=t4;break;case"copy":case"cut":case"paste":w=BF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=OE}var E=(t&4)!==0,C=!E&&e==="scroll",x=E?g!==null?g+"Capture":null:g;E=[];for(var S=d,P;S!==null;){P=S;var M=P.stateNode;if(P.tag===5&&M!==null&&(P=M,x!==null&&(M=Yd(S,x),M!=null&&E.push(eh(S,M,P)))),C)break;S=S.return}0<E.length&&(g=new w(g,_,null,n,h),v.push({event:g,listeners:E}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",g&&n!==bw&&(_=n.relatedTarget||n.fromElement)&&(Gu(_)||_[Bo]))break e;if((w||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,w?(_=n.relatedTarget||n.toElement,w=d,_=_?Gu(_):null,_!==null&&(C=Sl(_),_!==C||_.tag!==5&&_.tag!==6)&&(_=null)):(w=null,_=d),w!==_)){if(E=CE,M="onMouseLeave",x="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(E=OE,M="onPointerLeave",x="onPointerEnter",S="pointer"),C=w==null?g:hc(w),P=_==null?g:hc(_),g=new E(M,S+"leave",w,n,h),g.target=C,g.relatedTarget=P,M=null,Gu(h)===d&&(E=new E(x,S+"enter",_,n,h),E.target=P,E.relatedTarget=C,M=E),C=M,w&&_)t:{for(E=w,x=_,S=0,P=E;P;P=Zl(P))S++;for(P=0,M=x;M;M=Zl(M))P++;for(;0<S-P;)E=Zl(E),S--;for(;0<P-S;)x=Zl(x),P--;for(;S--;){if(E===x||x!==null&&E===x.alternate)break t;E=Zl(E),x=Zl(x)}E=null}else E=null;w!==null&&FE(v,g,w,E,!1),_!==null&&C!==null&&FE(v,C,_,E,!0)}}e:{if(g=d?hc(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var T=u4;else if(NE(g))if(OD)T=d4;else{T=c4;var U=l4}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(T=f4);if(T&&(T=T(e,d))){DD(v,T,n,h);break e}U&&U(e,g,d),e==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&vw(g,"number",g.value)}switch(U=d?hc(d):window,e){case"focusin":(NE(U)||U.contentEditable==="true")&&(fc=U,Dw=d,Cd=null);break;case"focusout":Cd=Dw=fc=null;break;case"mousedown":Ow=!0;break;case"contextmenu":case"mouseup":case"dragend":Ow=!1,jE(v,n,h);break;case"selectionchange":if(m4)break;case"keydown":case"keyup":jE(v,n,h)}var W;if(hb)e:{switch(e){case"compositionstart":var re="onCompositionStart";break e;case"compositionend":re="onCompositionEnd";break e;case"compositionupdate":re="onCompositionUpdate";break e}re=void 0}else cc?kD(e,n)&&(re="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(re="onCompositionStart");re&&(PD&&n.locale!=="ko"&&(cc||re!=="onCompositionStart"?re==="onCompositionEnd"&&cc&&(W=ED()):(Os=h,cb="value"in Os?Os.value:Os.textContent,cc=!0)),U=hv(d,re),0<U.length&&(re=new DE(re,e,null,n,h),v.push({event:re,listeners:U}),W?re.data=W:(W=CD(n),W!==null&&(re.data=W)))),(W=r4?i4(e,n):a4(e,n))&&(d=hv(d,"onBeforeInput"),0<d.length&&(h=new DE("onBeforeInput","beforeinput",null,n,h),v.push({event:h,listeners:d}),h.data=W))}zD(v,t)})}function eh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function hv(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Yd(e,n),a!=null&&r.unshift(eh(e,a,i)),a=Yd(e,t),a!=null&&r.push(eh(e,a,i))),e=e.return}return r}function Zl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function FE(e,t,n,r,i){for(var a=t._reactName,s=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,i?(c=Yd(n,a),c!=null&&s.unshift(eh(n,c,u))):i||(c=Yd(n,a),c!=null&&s.push(eh(n,c,u)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var w4=/\r\n?/g,_4=/\u0000|\uFFFD/g;function BE(e){return(typeof e=="string"?e:""+e).replace(w4,`
`).replace(_4,"")}function um(e,t,n){if(t=BE(t),BE(e)!==t&&n)throw Error(ke(425))}function pv(){}var $w=null,Rw=null;function Nw(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tw=typeof setTimeout=="function"?setTimeout:void 0,b4=typeof clearTimeout=="function"?clearTimeout:void 0,WE=typeof Promise=="function"?Promise:void 0,S4=typeof queueMicrotask=="function"?queueMicrotask:typeof WE<"u"?function(e){return WE.resolve(null).then(e).catch(x4)}:Tw;function x4(e){setTimeout(function(){throw e})}function m0(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Qd(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Qd(t)}function zs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function UE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var uf=Math.random().toString(36).slice(2),Ya="__reactFiber$"+uf,th="__reactProps$"+uf,Bo="__reactContainer$"+uf,Mw="__reactEvents$"+uf,E4="__reactListeners$"+uf,P4="__reactHandles$"+uf;function Gu(e){var t=e[Ya];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Bo]||n[Ya]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=UE(e);e!==null;){if(n=e[Ya])return n;e=UE(e)}return t}e=n,n=e.parentNode}return null}function Mh(e){return e=e[Ya]||e[Bo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ke(33))}function dg(e){return e[th]||null}var Iw=[],pc=-1;function ru(e){return{current:e}}function Kt(e){0>pc||(e.current=Iw[pc],Iw[pc]=null,pc--)}function Bt(e,t){pc++,Iw[pc]=e.current,e.current=t}var Xs={},Sr=ru(Xs),ti=ru(!1),cl=Xs;function Wc(e,t){var n=e.type.contextTypes;if(!n)return Xs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ni(e){return e=e.childContextTypes,e!=null}function mv(){Kt(ti),Kt(Sr)}function HE(e,t,n){if(Sr.current!==Xs)throw Error(ke(168));Bt(Sr,t),Bt(ti,n)}function BD(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ke(108,lF(e)||"Unknown",i));return nn({},n,r)}function vv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xs,cl=Sr.current,Bt(Sr,e),Bt(ti,ti.current),!0}function KE(e,t,n){var r=e.stateNode;if(!r)throw Error(ke(169));n?(e=BD(e,t,cl),r.__reactInternalMemoizedMergedChildContext=e,Kt(ti),Kt(Sr),Bt(Sr,e)):Kt(ti),Bt(ti,n)}var ko=null,hg=!1,v0=!1;function WD(e){ko===null?ko=[e]:ko.push(e)}function k4(e){hg=!0,WD(e)}function iu(){if(!v0&&ko!==null){v0=!0;var e=0,t=Ot;try{var n=ko;for(Ot=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ko=null,hg=!1}catch(i){throw ko!==null&&(ko=ko.slice(e+1)),hD(ob,iu),i}finally{Ot=t,v0=!1}}return null}var mc=[],vc=0,gv=null,yv=0,qi=[],Yi=0,fl=null,Ro=1,No="";function Wu(e,t){mc[vc++]=yv,mc[vc++]=gv,gv=e,yv=t}function UD(e,t,n){qi[Yi++]=Ro,qi[Yi++]=No,qi[Yi++]=fl,fl=e;var r=Ro;e=No;var i=32-Pa(r)-1;r&=~(1<<i),n+=1;var a=32-Pa(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ro=1<<32-Pa(t)+i|n<<i|r,No=a+e}else Ro=1<<a|n<<i|r,No=e}function mb(e){e.return!==null&&(Wu(e,1),UD(e,1,0))}function vb(e){for(;e===gv;)gv=mc[--vc],mc[vc]=null,yv=mc[--vc],mc[vc]=null;for(;e===fl;)fl=qi[--Yi],qi[Yi]=null,No=qi[--Yi],qi[Yi]=null,Ro=qi[--Yi],qi[Yi]=null}var yi=null,gi=null,Vt=!1,Sa=null;function HD(e,t){var n=Xi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function qE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yi=e,gi=zs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yi=e,gi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=fl!==null?{id:Ro,overflow:No}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Xi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,yi=e,gi=null,!0):!1;default:return!1}}function Aw(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jw(e){if(Vt){var t=gi;if(t){var n=t;if(!qE(e,t)){if(Aw(e))throw Error(ke(418));t=zs(n.nextSibling);var r=yi;t&&qE(e,t)?HD(r,n):(e.flags=e.flags&-4097|2,Vt=!1,yi=e)}}else{if(Aw(e))throw Error(ke(418));e.flags=e.flags&-4097|2,Vt=!1,yi=e}}}function YE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yi=e}function lm(e){if(e!==yi)return!1;if(!Vt)return YE(e),Vt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Nw(e.type,e.memoizedProps)),t&&(t=gi)){if(Aw(e))throw KD(),Error(ke(418));for(;t;)HD(e,t),t=zs(t.nextSibling)}if(YE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ke(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){gi=zs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}gi=null}}else gi=yi?zs(e.stateNode.nextSibling):null;return!0}function KD(){for(var e=gi;e;)e=zs(e.nextSibling)}function Uc(){gi=yi=null,Vt=!1}function gb(e){Sa===null?Sa=[e]:Sa.push(e)}var C4=Qo.ReactCurrentBatchConfig;function ad(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ke(309));var r=n.stateNode}if(!r)throw Error(ke(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var u=i.refs;s===null?delete u[a]:u[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(ke(284));if(!n._owner)throw Error(ke(290,e))}return e}function cm(e,t){throw e=Object.prototype.toString.call(t),Error(ke(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function VE(e){var t=e._init;return t(e._payload)}function qD(e){function t(x,S){if(e){var P=x.deletions;P===null?(x.deletions=[S],x.flags|=16):P.push(S)}}function n(x,S){if(!e)return null;for(;S!==null;)t(x,S),S=S.sibling;return null}function r(x,S){for(x=new Map;S!==null;)S.key!==null?x.set(S.key,S):x.set(S.index,S),S=S.sibling;return x}function i(x,S){return x=Us(x,S),x.index=0,x.sibling=null,x}function a(x,S,P){return x.index=P,e?(P=x.alternate,P!==null?(P=P.index,P<S?(x.flags|=2,S):P):(x.flags|=2,S)):(x.flags|=1048576,S)}function s(x){return e&&x.alternate===null&&(x.flags|=2),x}function u(x,S,P,M){return S===null||S.tag!==6?(S=x0(P,x.mode,M),S.return=x,S):(S=i(S,P),S.return=x,S)}function c(x,S,P,M){var T=P.type;return T===lc?h(x,S,P.props.children,M,P.key):S!==null&&(S.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===_s&&VE(T)===S.type)?(M=i(S,P.props),M.ref=ad(x,S,P),M.return=x,M):(M=qm(P.type,P.key,P.props,null,x.mode,M),M.ref=ad(x,S,P),M.return=x,M)}function d(x,S,P,M){return S===null||S.tag!==4||S.stateNode.containerInfo!==P.containerInfo||S.stateNode.implementation!==P.implementation?(S=E0(P,x.mode,M),S.return=x,S):(S=i(S,P.children||[]),S.return=x,S)}function h(x,S,P,M,T){return S===null||S.tag!==7?(S=al(P,x.mode,M,T),S.return=x,S):(S=i(S,P),S.return=x,S)}function v(x,S,P){if(typeof S=="string"&&S!==""||typeof S=="number")return S=x0(""+S,x.mode,P),S.return=x,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Zp:return P=qm(S.type,S.key,S.props,null,x.mode,P),P.ref=ad(x,null,S),P.return=x,P;case uc:return S=E0(S,x.mode,P),S.return=x,S;case _s:var M=S._init;return v(x,M(S._payload),P)}if(gd(S)||ed(S))return S=al(S,x.mode,P,null),S.return=x,S;cm(x,S)}return null}function g(x,S,P,M){var T=S!==null?S.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return T!==null?null:u(x,S,""+P,M);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Zp:return P.key===T?c(x,S,P,M):null;case uc:return P.key===T?d(x,S,P,M):null;case _s:return T=P._init,g(x,S,T(P._payload),M)}if(gd(P)||ed(P))return T!==null?null:h(x,S,P,M,null);cm(x,P)}return null}function w(x,S,P,M,T){if(typeof M=="string"&&M!==""||typeof M=="number")return x=x.get(P)||null,u(S,x,""+M,T);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Zp:return x=x.get(M.key===null?P:M.key)||null,c(S,x,M,T);case uc:return x=x.get(M.key===null?P:M.key)||null,d(S,x,M,T);case _s:var U=M._init;return w(x,S,P,U(M._payload),T)}if(gd(M)||ed(M))return x=x.get(P)||null,h(S,x,M,T,null);cm(S,M)}return null}function _(x,S,P,M){for(var T=null,U=null,W=S,re=S=0,he=null;W!==null&&re<P.length;re++){W.index>re?(he=W,W=null):he=W.sibling;var de=g(x,W,P[re],M);if(de===null){W===null&&(W=he);break}e&&W&&de.alternate===null&&t(x,W),S=a(de,S,re),U===null?T=de:U.sibling=de,U=de,W=he}if(re===P.length)return n(x,W),Vt&&Wu(x,re),T;if(W===null){for(;re<P.length;re++)W=v(x,P[re],M),W!==null&&(S=a(W,S,re),U===null?T=W:U.sibling=W,U=W);return Vt&&Wu(x,re),T}for(W=r(x,W);re<P.length;re++)he=w(W,x,re,P[re],M),he!==null&&(e&&he.alternate!==null&&W.delete(he.key===null?re:he.key),S=a(he,S,re),U===null?T=he:U.sibling=he,U=he);return e&&W.forEach(function(ce){return t(x,ce)}),Vt&&Wu(x,re),T}function E(x,S,P,M){var T=ed(P);if(typeof T!="function")throw Error(ke(150));if(P=T.call(P),P==null)throw Error(ke(151));for(var U=T=null,W=S,re=S=0,he=null,de=P.next();W!==null&&!de.done;re++,de=P.next()){W.index>re?(he=W,W=null):he=W.sibling;var ce=g(x,W,de.value,M);if(ce===null){W===null&&(W=he);break}e&&W&&ce.alternate===null&&t(x,W),S=a(ce,S,re),U===null?T=ce:U.sibling=ce,U=ce,W=he}if(de.done)return n(x,W),Vt&&Wu(x,re),T;if(W===null){for(;!de.done;re++,de=P.next())de=v(x,de.value,M),de!==null&&(S=a(de,S,re),U===null?T=de:U.sibling=de,U=de);return Vt&&Wu(x,re),T}for(W=r(x,W);!de.done;re++,de=P.next())de=w(W,x,re,de.value,M),de!==null&&(e&&de.alternate!==null&&W.delete(de.key===null?re:de.key),S=a(de,S,re),U===null?T=de:U.sibling=de,U=de);return e&&W.forEach(function(pe){return t(x,pe)}),Vt&&Wu(x,re),T}function C(x,S,P,M){if(typeof P=="object"&&P!==null&&P.type===lc&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case Zp:e:{for(var T=P.key,U=S;U!==null;){if(U.key===T){if(T=P.type,T===lc){if(U.tag===7){n(x,U.sibling),S=i(U,P.props.children),S.return=x,x=S;break e}}else if(U.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===_s&&VE(T)===U.type){n(x,U.sibling),S=i(U,P.props),S.ref=ad(x,U,P),S.return=x,x=S;break e}n(x,U);break}else t(x,U);U=U.sibling}P.type===lc?(S=al(P.props.children,x.mode,M,P.key),S.return=x,x=S):(M=qm(P.type,P.key,P.props,null,x.mode,M),M.ref=ad(x,S,P),M.return=x,x=M)}return s(x);case uc:e:{for(U=P.key;S!==null;){if(S.key===U)if(S.tag===4&&S.stateNode.containerInfo===P.containerInfo&&S.stateNode.implementation===P.implementation){n(x,S.sibling),S=i(S,P.children||[]),S.return=x,x=S;break e}else{n(x,S);break}else t(x,S);S=S.sibling}S=E0(P,x.mode,M),S.return=x,x=S}return s(x);case _s:return U=P._init,C(x,S,U(P._payload),M)}if(gd(P))return _(x,S,P,M);if(ed(P))return E(x,S,P,M);cm(x,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,S!==null&&S.tag===6?(n(x,S.sibling),S=i(S,P),S.return=x,x=S):(n(x,S),S=x0(P,x.mode,M),S.return=x,x=S),s(x)):n(x,S)}return C}var Hc=qD(!0),YD=qD(!1),wv=ru(null),_v=null,gc=null,yb=null;function wb(){yb=gc=_v=null}function _b(e){var t=wv.current;Kt(wv),e._currentValue=t}function Lw(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function kc(e,t){_v=e,yb=gc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ei=!0),e.firstContext=null)}function Zi(e){var t=e._currentValue;if(yb!==e)if(e={context:e,memoizedValue:t,next:null},gc===null){if(_v===null)throw Error(ke(308));gc=e,_v.dependencies={lanes:0,firstContext:e}}else gc=gc.next=e;return t}var Ju=null;function bb(e){Ju===null?Ju=[e]:Ju.push(e)}function VD(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,bb(t)):(n.next=i.next,i.next=n),t.interleaved=n,Wo(e,r)}function Wo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var bs=!1;function Sb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XD(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function To(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fs(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,wt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Wo(e,n)}return i=r.interleaved,i===null?(t.next=t,bb(r)):(t.next=i.next,i.next=t),r.interleaved=t,Wo(e,n)}function Fm(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,sb(e,n)}}function XE(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bv(e,t,n,r){var i=e.updateQueue;bs=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,d=c.next;c.next=null,s===null?a=d:s.next=d,s=c;var h=e.alternate;h!==null&&(h=h.updateQueue,u=h.lastBaseUpdate,u!==s&&(u===null?h.firstBaseUpdate=d:u.next=d,h.lastBaseUpdate=c))}if(a!==null){var v=i.baseState;s=0,h=d=c=null,u=a;do{var g=u.lane,w=u.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:w,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var _=e,E=u;switch(g=t,w=n,E.tag){case 1:if(_=E.payload,typeof _=="function"){v=_.call(w,v,g);break e}v=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=E.payload,g=typeof _=="function"?_.call(w,v,g):_,g==null)break e;v=nn({},v,g);break e;case 2:bs=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[u]:g.push(u))}else w={eventTime:w,lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},h===null?(d=h=w,c=v):h=h.next=w,s|=g;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;g=u,u=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(1);if(h===null&&(c=v),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);hl|=s,e.lanes=s,e.memoizedState=v}}function QE(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ke(191,i));i.call(r)}}}var Ih={},eo=ru(Ih),nh=ru(Ih),rh=ru(Ih);function Zu(e){if(e===Ih)throw Error(ke(174));return e}function xb(e,t){switch(Bt(rh,t),Bt(nh,e),Bt(eo,Ih),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:yw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=yw(t,e)}Kt(eo),Bt(eo,t)}function Kc(){Kt(eo),Kt(nh),Kt(rh)}function QD(e){Zu(rh.current);var t=Zu(eo.current),n=yw(t,e.type);t!==n&&(Bt(nh,e),Bt(eo,n))}function Eb(e){nh.current===e&&(Kt(eo),Kt(nh))}var en=ru(0);function Sv(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var g0=[];function Pb(){for(var e=0;e<g0.length;e++)g0[e]._workInProgressVersionPrimary=null;g0.length=0}var Bm=Qo.ReactCurrentDispatcher,y0=Qo.ReactCurrentBatchConfig,dl=0,tn=null,Mn=null,Hn=null,xv=!1,Dd=!1,ih=0,D4=0;function vr(){throw Error(ke(321))}function kb(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Oa(e[n],t[n]))return!1;return!0}function Cb(e,t,n,r,i,a){if(dl=a,tn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Bm.current=e===null||e.memoizedState===null?N4:T4,e=n(r,i),Dd){a=0;do{if(Dd=!1,ih=0,25<=a)throw Error(ke(301));a+=1,Hn=Mn=null,t.updateQueue=null,Bm.current=M4,e=n(r,i)}while(Dd)}if(Bm.current=Ev,t=Mn!==null&&Mn.next!==null,dl=0,Hn=Mn=tn=null,xv=!1,t)throw Error(ke(300));return e}function Db(){var e=ih!==0;return ih=0,e}function Ha(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?tn.memoizedState=Hn=e:Hn=Hn.next=e,Hn}function ea(){if(Mn===null){var e=tn.alternate;e=e!==null?e.memoizedState:null}else e=Mn.next;var t=Hn===null?tn.memoizedState:Hn.next;if(t!==null)Hn=t,Mn=e;else{if(e===null)throw Error(ke(310));Mn=e,e={memoizedState:Mn.memoizedState,baseState:Mn.baseState,baseQueue:Mn.baseQueue,queue:Mn.queue,next:null},Hn===null?tn.memoizedState=Hn=e:Hn=Hn.next=e}return Hn}function ah(e,t){return typeof t=="function"?t(e):t}function w0(e){var t=ea(),n=t.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=e;var r=Mn,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var u=s=null,c=null,d=a;do{var h=d.lane;if((dl&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var v={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=v,s=r):c=c.next=v,tn.lanes|=h,hl|=h}d=d.next}while(d!==null&&d!==a);c===null?s=r:c.next=u,Oa(r,t.memoizedState)||(ei=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,tn.lanes|=a,hl|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _0(e){var t=ea(),n=t.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);Oa(a,t.memoizedState)||(ei=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function GD(){}function JD(e,t){var n=tn,r=ea(),i=t(),a=!Oa(r.memoizedState,i);if(a&&(r.memoizedState=i,ei=!0),r=r.queue,Ob(tO.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Hn!==null&&Hn.memoizedState.tag&1){if(n.flags|=2048,oh(9,eO.bind(null,n,r,i,t),void 0,null),qn===null)throw Error(ke(349));dl&30||ZD(n,t,i)}return i}function ZD(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=tn.updateQueue,t===null?(t={lastEffect:null,stores:null},tn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function eO(e,t,n,r){t.value=n,t.getSnapshot=r,nO(t)&&rO(e)}function tO(e,t,n){return n(function(){nO(t)&&rO(e)})}function nO(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Oa(e,n)}catch{return!0}}function rO(e){var t=Wo(e,1);t!==null&&ka(t,e,1,-1)}function GE(e){var t=Ha();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ah,lastRenderedState:e},t.queue=e,e=e.dispatch=R4.bind(null,tn,e),[t.memoizedState,e]}function oh(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=tn.updateQueue,t===null?(t={lastEffect:null,stores:null},tn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function iO(){return ea().memoizedState}function Wm(e,t,n,r){var i=Ha();tn.flags|=e,i.memoizedState=oh(1|t,n,void 0,r===void 0?null:r)}function pg(e,t,n,r){var i=ea();r=r===void 0?null:r;var a=void 0;if(Mn!==null){var s=Mn.memoizedState;if(a=s.destroy,r!==null&&kb(r,s.deps)){i.memoizedState=oh(t,n,a,r);return}}tn.flags|=e,i.memoizedState=oh(1|t,n,a,r)}function JE(e,t){return Wm(8390656,8,e,t)}function Ob(e,t){return pg(2048,8,e,t)}function aO(e,t){return pg(4,2,e,t)}function oO(e,t){return pg(4,4,e,t)}function sO(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function uO(e,t,n){return n=n!=null?n.concat([e]):null,pg(4,4,sO.bind(null,t,e),n)}function $b(){}function lO(e,t){var n=ea();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&kb(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function cO(e,t){var n=ea();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&kb(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function fO(e,t,n){return dl&21?(Oa(n,t)||(n=vD(),tn.lanes|=n,hl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ei=!0),e.memoizedState=n)}function O4(e,t){var n=Ot;Ot=n!==0&&4>n?n:4,e(!0);var r=y0.transition;y0.transition={};try{e(!1),t()}finally{Ot=n,y0.transition=r}}function dO(){return ea().memoizedState}function $4(e,t,n){var r=Ws(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hO(e))pO(t,n);else if(n=VD(e,t,n,r),n!==null){var i=Tr();ka(n,e,r,i),mO(n,t,r)}}function R4(e,t,n){var r=Ws(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hO(e))pO(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,u=a(s,n);if(i.hasEagerState=!0,i.eagerState=u,Oa(u,s)){var c=t.interleaved;c===null?(i.next=i,bb(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=VD(e,t,i,r),n!==null&&(i=Tr(),ka(n,e,r,i),mO(n,t,r))}}function hO(e){var t=e.alternate;return e===tn||t!==null&&t===tn}function pO(e,t){Dd=xv=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mO(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,sb(e,n)}}var Ev={readContext:Zi,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},N4={readContext:Zi,useCallback:function(e,t){return Ha().memoizedState=[e,t===void 0?null:t],e},useContext:Zi,useEffect:JE,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Wm(4194308,4,sO.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wm(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wm(4,2,e,t)},useMemo:function(e,t){var n=Ha();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ha();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$4.bind(null,tn,e),[r.memoizedState,e]},useRef:function(e){var t=Ha();return e={current:e},t.memoizedState=e},useState:GE,useDebugValue:$b,useDeferredValue:function(e){return Ha().memoizedState=e},useTransition:function(){var e=GE(!1),t=e[0];return e=O4.bind(null,e[1]),Ha().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=tn,i=Ha();if(Vt){if(n===void 0)throw Error(ke(407));n=n()}else{if(n=t(),qn===null)throw Error(ke(349));dl&30||ZD(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,JE(tO.bind(null,r,a,e),[e]),r.flags|=2048,oh(9,eO.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ha(),t=qn.identifierPrefix;if(Vt){var n=No,r=Ro;n=(r&~(1<<32-Pa(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ih++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=D4++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},T4={readContext:Zi,useCallback:lO,useContext:Zi,useEffect:Ob,useImperativeHandle:uO,useInsertionEffect:aO,useLayoutEffect:oO,useMemo:cO,useReducer:w0,useRef:iO,useState:function(){return w0(ah)},useDebugValue:$b,useDeferredValue:function(e){var t=ea();return fO(t,Mn.memoizedState,e)},useTransition:function(){var e=w0(ah)[0],t=ea().memoizedState;return[e,t]},useMutableSource:GD,useSyncExternalStore:JD,useId:dO,unstable_isNewReconciler:!1},M4={readContext:Zi,useCallback:lO,useContext:Zi,useEffect:Ob,useImperativeHandle:uO,useInsertionEffect:aO,useLayoutEffect:oO,useMemo:cO,useReducer:_0,useRef:iO,useState:function(){return _0(ah)},useDebugValue:$b,useDeferredValue:function(e){var t=ea();return Mn===null?t.memoizedState=e:fO(t,Mn.memoizedState,e)},useTransition:function(){var e=_0(ah)[0],t=ea().memoizedState;return[e,t]},useMutableSource:GD,useSyncExternalStore:JD,useId:dO,unstable_isNewReconciler:!1};function _a(e,t){if(e&&e.defaultProps){t=nn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function zw(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:nn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var mg={isMounted:function(e){return(e=e._reactInternals)?Sl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Tr(),i=Ws(e),a=To(r,i);a.payload=t,n!=null&&(a.callback=n),t=Fs(e,a,i),t!==null&&(ka(t,e,i,r),Fm(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Tr(),i=Ws(e),a=To(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Fs(e,a,i),t!==null&&(ka(t,e,i,r),Fm(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Tr(),r=Ws(e),i=To(n,r);i.tag=2,t!=null&&(i.callback=t),t=Fs(e,i,r),t!==null&&(ka(t,e,r,n),Fm(t,e,r))}};function ZE(e,t,n,r,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,s):t.prototype&&t.prototype.isPureReactComponent?!Jd(n,r)||!Jd(i,a):!0}function vO(e,t,n){var r=!1,i=Xs,a=t.contextType;return typeof a=="object"&&a!==null?a=Zi(a):(i=ni(t)?cl:Sr.current,r=t.contextTypes,a=(r=r!=null)?Wc(e,i):Xs),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mg,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function eP(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mg.enqueueReplaceState(t,t.state,null)}function Fw(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Sb(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Zi(a):(a=ni(t)?cl:Sr.current,i.context=Wc(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(zw(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&mg.enqueueReplaceState(i,i.state,null),bv(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function qc(e,t){try{var n="",r=t;do n+=uF(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function b0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Bw(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var I4=typeof WeakMap=="function"?WeakMap:Map;function gO(e,t,n){n=To(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){kv||(kv=!0,Gw=r),Bw(e,t)},n}function yO(e,t,n){n=To(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Bw(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Bw(e,t),typeof r!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function tP(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new I4;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=X4.bind(null,e,t,n),t.then(e,e))}function nP(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function rP(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=To(-1,1),t.tag=2,Fs(n,t,1))),n.lanes|=1),e)}var A4=Qo.ReactCurrentOwner,ei=!1;function Rr(e,t,n,r){t.child=e===null?YD(t,null,n,r):Hc(t,e.child,n,r)}function iP(e,t,n,r,i){n=n.render;var a=t.ref;return kc(t,i),r=Cb(e,t,n,r,a,i),n=Db(),e!==null&&!ei?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Uo(e,t,i)):(Vt&&n&&mb(t),t.flags|=1,Rr(e,t,r,i),t.child)}function aP(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!Lb(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,wO(e,t,a,r,i)):(e=qm(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Jd,n(s,r)&&e.ref===t.ref)return Uo(e,t,i)}return t.flags|=1,e=Us(a,r),e.ref=t.ref,e.return=t,t.child=e}function wO(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Jd(a,r)&&e.ref===t.ref)if(ei=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(ei=!0);else return t.lanes=e.lanes,Uo(e,t,i)}return Ww(e,t,n,r,i)}function _O(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(wc,vi),vi|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Bt(wc,vi),vi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Bt(wc,vi),vi|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Bt(wc,vi),vi|=r;return Rr(e,t,i,n),t.child}function bO(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ww(e,t,n,r,i){var a=ni(n)?cl:Sr.current;return a=Wc(t,a),kc(t,i),n=Cb(e,t,n,r,a,i),r=Db(),e!==null&&!ei?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Uo(e,t,i)):(Vt&&r&&mb(t),t.flags|=1,Rr(e,t,n,i),t.child)}function oP(e,t,n,r,i){if(ni(n)){var a=!0;vv(t)}else a=!1;if(kc(t,i),t.stateNode===null)Um(e,t),vO(t,n,r),Fw(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,u=t.memoizedProps;s.props=u;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Zi(d):(d=ni(n)?cl:Sr.current,d=Wc(t,d));var h=n.getDerivedStateFromProps,v=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";v||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==r||c!==d)&&eP(t,s,r,d),bs=!1;var g=t.memoizedState;s.state=g,bv(t,r,s,i),c=t.memoizedState,u!==r||g!==c||ti.current||bs?(typeof h=="function"&&(zw(t,n,h,r),c=t.memoizedState),(u=bs||ZE(t,n,u,r,g,c,d))?(v||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=d,r=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,XD(e,t),u=t.memoizedProps,d=t.type===t.elementType?u:_a(t.type,u),s.props=d,v=t.pendingProps,g=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Zi(c):(c=ni(n)?cl:Sr.current,c=Wc(t,c));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==v||g!==c)&&eP(t,s,r,c),bs=!1,g=t.memoizedState,s.state=g,bv(t,r,s,i);var _=t.memoizedState;u!==v||g!==_||ti.current||bs?(typeof w=="function"&&(zw(t,n,w,r),_=t.memoizedState),(d=bs||ZE(t,n,d,r,g,_,c)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,_,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,_,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=_),s.props=r,s.state=_,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Uw(e,t,n,r,a,i)}function Uw(e,t,n,r,i,a){bO(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&KE(t,n,!1),Uo(e,t,a);r=t.stateNode,A4.current=t;var u=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Hc(t,e.child,null,a),t.child=Hc(t,null,u,a)):Rr(e,t,u,a),t.memoizedState=r.state,i&&KE(t,n,!0),t.child}function SO(e){var t=e.stateNode;t.pendingContext?HE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&HE(e,t.context,!1),xb(e,t.containerInfo)}function sP(e,t,n,r,i){return Uc(),gb(i),t.flags|=256,Rr(e,t,n,r),t.child}var Hw={dehydrated:null,treeContext:null,retryLane:0};function Kw(e){return{baseLanes:e,cachePool:null,transitions:null}}function xO(e,t,n){var r=t.pendingProps,i=en.current,a=!1,s=(t.flags&128)!==0,u;if((u=s)||(u=e!==null&&e.memoizedState===null?!1:(i&2)!==0),u?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Bt(en,i&1),e===null)return jw(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,a?(r=t.mode,a=t.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=yg(s,r,0,null),e=al(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Kw(n),t.memoizedState=Hw,e):Rb(t,s));if(i=e.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return j4(e,t,s,r,u,i,n);if(a){a=r.fallback,s=t.mode,i=e.child,u=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Us(i,c),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?a=Us(u,a):(a=al(a,s,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,s=e.child.memoizedState,s=s===null?Kw(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~n,t.memoizedState=Hw,r}return a=e.child,e=a.sibling,r=Us(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Rb(e,t){return t=yg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function fm(e,t,n,r){return r!==null&&gb(r),Hc(t,e.child,null,n),e=Rb(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function j4(e,t,n,r,i,a,s){if(n)return t.flags&256?(t.flags&=-257,r=b0(Error(ke(422))),fm(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=yg({mode:"visible",children:r.children},i,0,null),a=al(a,i,s,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Hc(t,e.child,null,s),t.child.memoizedState=Kw(s),t.memoizedState=Hw,a);if(!(t.mode&1))return fm(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,a=Error(ke(419)),r=b0(a,r,void 0),fm(e,t,s,r)}if(u=(s&e.childLanes)!==0,ei||u){if(r=qn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Wo(e,i),ka(r,e,i,-1))}return jb(),r=b0(Error(ke(421))),fm(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Q4.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,gi=zs(i.nextSibling),yi=t,Vt=!0,Sa=null,e!==null&&(qi[Yi++]=Ro,qi[Yi++]=No,qi[Yi++]=fl,Ro=e.id,No=e.overflow,fl=t),t=Rb(t,r.children),t.flags|=4096,t)}function uP(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Lw(e.return,t,n)}function S0(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function EO(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Rr(e,t,r.children,n),r=en.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uP(e,n,t);else if(e.tag===19)uP(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Bt(en,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Sv(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),S0(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Sv(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}S0(t,!0,n,null,a);break;case"together":S0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Um(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Uo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),hl|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ke(153));if(t.child!==null){for(e=t.child,n=Us(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Us(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function L4(e,t,n){switch(t.tag){case 3:SO(t),Uc();break;case 5:QD(t);break;case 1:ni(t.type)&&vv(t);break;case 4:xb(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Bt(wv,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Bt(en,en.current&1),t.flags|=128,null):n&t.child.childLanes?xO(e,t,n):(Bt(en,en.current&1),e=Uo(e,t,n),e!==null?e.sibling:null);Bt(en,en.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return EO(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Bt(en,en.current),r)break;return null;case 22:case 23:return t.lanes=0,_O(e,t,n)}return Uo(e,t,n)}var PO,qw,kO,CO;PO=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qw=function(){};kO=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Zu(eo.current);var a=null;switch(n){case"input":i=pw(e,i),r=pw(e,r),a=[];break;case"select":i=nn({},i,{value:void 0}),r=nn({},r,{value:void 0}),a=[];break;case"textarea":i=gw(e,i),r=gw(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=pv)}ww(n,r);var s;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var u=i[d];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Kd.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(u=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Kd.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ut("scroll",e),a||u===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};CO=function(e,t,n,r){n!==r&&(t.flags|=4)};function od(e,t){if(!Vt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function z4(e,t,n){var r=t.pendingProps;switch(vb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gr(t),null;case 1:return ni(t.type)&&mv(),gr(t),null;case 3:return r=t.stateNode,Kc(),Kt(ti),Kt(Sr),Pb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(lm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Sa!==null&&(e_(Sa),Sa=null))),qw(e,t),gr(t),null;case 5:Eb(t);var i=Zu(rh.current);if(n=t.type,e!==null&&t.stateNode!=null)kO(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ke(166));return gr(t),null}if(e=Zu(eo.current),lm(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Ya]=t,r[th]=a,e=(t.mode&1)!==0,n){case"dialog":Ut("cancel",r),Ut("close",r);break;case"iframe":case"object":case"embed":Ut("load",r);break;case"video":case"audio":for(i=0;i<wd.length;i++)Ut(wd[i],r);break;case"source":Ut("error",r);break;case"img":case"image":case"link":Ut("error",r),Ut("load",r);break;case"details":Ut("toggle",r);break;case"input":gE(r,a),Ut("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ut("invalid",r);break;case"textarea":wE(r,a),Ut("invalid",r)}ww(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="children"?typeof u=="string"?r.textContent!==u&&(a.suppressHydrationWarning!==!0&&um(r.textContent,u,e),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(a.suppressHydrationWarning!==!0&&um(r.textContent,u,e),i=["children",""+u]):Kd.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&Ut("scroll",r)}switch(n){case"input":em(r),yE(r,a,!0);break;case"textarea":em(r),_E(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=pv)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=tD(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Ya]=t,e[th]=r,PO(e,t,!1,!1),t.stateNode=e;e:{switch(s=_w(n,r),n){case"dialog":Ut("cancel",e),Ut("close",e),i=r;break;case"iframe":case"object":case"embed":Ut("load",e),i=r;break;case"video":case"audio":for(i=0;i<wd.length;i++)Ut(wd[i],e);i=r;break;case"source":Ut("error",e),i=r;break;case"img":case"image":case"link":Ut("error",e),Ut("load",e),i=r;break;case"details":Ut("toggle",e),i=r;break;case"input":gE(e,r),i=pw(e,r),Ut("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=nn({},r,{value:void 0}),Ut("invalid",e);break;case"textarea":wE(e,r),i=gw(e,r),Ut("invalid",e);break;default:i=r}ww(n,i),u=i;for(a in u)if(u.hasOwnProperty(a)){var c=u[a];a==="style"?iD(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&nD(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&qd(e,c):typeof c=="number"&&qd(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Kd.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ut("scroll",e):c!=null&&tb(e,a,c,s))}switch(n){case"input":em(e),yE(e,r,!1);break;case"textarea":em(e),_E(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Vs(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Sc(e,!!r.multiple,a,!1):r.defaultValue!=null&&Sc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=pv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gr(t),null;case 6:if(e&&t.stateNode!=null)CO(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ke(166));if(n=Zu(rh.current),Zu(eo.current),lm(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ya]=t,(a=r.nodeValue!==n)&&(e=yi,e!==null))switch(e.tag){case 3:um(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&um(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ya]=t,t.stateNode=r}return gr(t),null;case 13:if(Kt(en),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Vt&&gi!==null&&t.mode&1&&!(t.flags&128))KD(),Uc(),t.flags|=98560,a=!1;else if(a=lm(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(ke(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ke(317));a[Ya]=t}else Uc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gr(t),a=!1}else Sa!==null&&(e_(Sa),Sa=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||en.current&1?jn===0&&(jn=3):jb())),t.updateQueue!==null&&(t.flags|=4),gr(t),null);case 4:return Kc(),qw(e,t),e===null&&Zd(t.stateNode.containerInfo),gr(t),null;case 10:return _b(t.type._context),gr(t),null;case 17:return ni(t.type)&&mv(),gr(t),null;case 19:if(Kt(en),a=t.memoizedState,a===null)return gr(t),null;if(r=(t.flags&128)!==0,s=a.rendering,s===null)if(r)od(a,!1);else{if(jn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Sv(e),s!==null){for(t.flags|=128,od(a,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Bt(en,en.current&1|2),t.child}e=e.sibling}a.tail!==null&&wn()>Yc&&(t.flags|=128,r=!0,od(a,!1),t.lanes=4194304)}else{if(!r)if(e=Sv(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),od(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Vt)return gr(t),null}else 2*wn()-a.renderingStartTime>Yc&&n!==1073741824&&(t.flags|=128,r=!0,od(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(n=a.last,n!==null?n.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=wn(),t.sibling=null,n=en.current,Bt(en,r?n&1|2:n&1),t):(gr(t),null);case 22:case 23:return Ab(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?vi&1073741824&&(gr(t),t.subtreeFlags&6&&(t.flags|=8192)):gr(t),null;case 24:return null;case 25:return null}throw Error(ke(156,t.tag))}function F4(e,t){switch(vb(t),t.tag){case 1:return ni(t.type)&&mv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Kc(),Kt(ti),Kt(Sr),Pb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Eb(t),null;case 13:if(Kt(en),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ke(340));Uc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Kt(en),null;case 4:return Kc(),null;case 10:return _b(t.type._context),null;case 22:case 23:return Ab(),null;case 24:return null;default:return null}}var dm=!1,_r=!1,B4=typeof WeakSet=="function"?WeakSet:Set,Be=null;function yc(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){cn(e,t,r)}else n.current=null}function Yw(e,t,n){try{n()}catch(r){cn(e,t,r)}}var lP=!1;function W4(e,t){if($w=fv,e=ND(),pb(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,u=-1,c=-1,d=0,h=0,v=e,g=null;t:for(;;){for(var w;v!==n||i!==0&&v.nodeType!==3||(u=s+i),v!==a||r!==0&&v.nodeType!==3||(c=s+r),v.nodeType===3&&(s+=v.nodeValue.length),(w=v.firstChild)!==null;)g=v,v=w;for(;;){if(v===e)break t;if(g===n&&++d===i&&(u=s),g===a&&++h===r&&(c=s),(w=v.nextSibling)!==null)break;v=g,g=v.parentNode}v=w}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rw={focusedElem:e,selectionRange:n},fv=!1,Be=t;Be!==null;)if(t=Be,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Be=e;else for(;Be!==null;){t=Be;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,C=_.memoizedState,x=t.stateNode,S=x.getSnapshotBeforeUpdate(t.elementType===t.type?E:_a(t.type,E),C);x.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var P=t.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(M){cn(t,t.return,M)}if(e=t.sibling,e!==null){e.return=t.return,Be=e;break}Be=t.return}return _=lP,lP=!1,_}function Od(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Yw(t,n,a)}i=i.next}while(i!==r)}}function vg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Vw(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function DO(e){var t=e.alternate;t!==null&&(e.alternate=null,DO(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ya],delete t[th],delete t[Mw],delete t[E4],delete t[P4])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function OO(e){return e.tag===5||e.tag===3||e.tag===4}function cP(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||OO(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xw(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=pv));else if(r!==4&&(e=e.child,e!==null))for(Xw(e,t,n),e=e.sibling;e!==null;)Xw(e,t,n),e=e.sibling}function Qw(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Qw(e,t,n),e=e.sibling;e!==null;)Qw(e,t,n),e=e.sibling}var rr=null,ba=!1;function ps(e,t,n){for(n=n.child;n!==null;)$O(e,t,n),n=n.sibling}function $O(e,t,n){if(Za&&typeof Za.onCommitFiberUnmount=="function")try{Za.onCommitFiberUnmount(ug,n)}catch{}switch(n.tag){case 5:_r||yc(n,t);case 6:var r=rr,i=ba;rr=null,ps(e,t,n),rr=r,ba=i,rr!==null&&(ba?(e=rr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):rr.removeChild(n.stateNode));break;case 18:rr!==null&&(ba?(e=rr,n=n.stateNode,e.nodeType===8?m0(e.parentNode,n):e.nodeType===1&&m0(e,n),Qd(e)):m0(rr,n.stateNode));break;case 4:r=rr,i=ba,rr=n.stateNode.containerInfo,ba=!0,ps(e,t,n),rr=r,ba=i;break;case 0:case 11:case 14:case 15:if(!_r&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&Yw(n,t,s),i=i.next}while(i!==r)}ps(e,t,n);break;case 1:if(!_r&&(yc(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){cn(n,t,u)}ps(e,t,n);break;case 21:ps(e,t,n);break;case 22:n.mode&1?(_r=(r=_r)||n.memoizedState!==null,ps(e,t,n),_r=r):ps(e,t,n);break;default:ps(e,t,n)}}function fP(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new B4),t.forEach(function(r){var i=G4.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function va(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,u=s;e:for(;u!==null;){switch(u.tag){case 5:rr=u.stateNode,ba=!1;break e;case 3:rr=u.stateNode.containerInfo,ba=!0;break e;case 4:rr=u.stateNode.containerInfo,ba=!0;break e}u=u.return}if(rr===null)throw Error(ke(160));$O(a,s,i),rr=null,ba=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){cn(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)RO(t,e),t=t.sibling}function RO(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(va(t,e),Ua(e),r&4){try{Od(3,e,e.return),vg(3,e)}catch(E){cn(e,e.return,E)}try{Od(5,e,e.return)}catch(E){cn(e,e.return,E)}}break;case 1:va(t,e),Ua(e),r&512&&n!==null&&yc(n,n.return);break;case 5:if(va(t,e),Ua(e),r&512&&n!==null&&yc(n,n.return),e.flags&32){var i=e.stateNode;try{qd(i,"")}catch(E){cn(e,e.return,E)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=n!==null?n.memoizedProps:a,u=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{u==="input"&&a.type==="radio"&&a.name!=null&&ZC(i,a),_w(u,s);var d=_w(u,a);for(s=0;s<c.length;s+=2){var h=c[s],v=c[s+1];h==="style"?iD(i,v):h==="dangerouslySetInnerHTML"?nD(i,v):h==="children"?qd(i,v):tb(i,h,v,d)}switch(u){case"input":mw(i,a);break;case"textarea":eD(i,a);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var w=a.value;w!=null?Sc(i,!!a.multiple,w,!1):g!==!!a.multiple&&(a.defaultValue!=null?Sc(i,!!a.multiple,a.defaultValue,!0):Sc(i,!!a.multiple,a.multiple?[]:"",!1))}i[th]=a}catch(E){cn(e,e.return,E)}}break;case 6:if(va(t,e),Ua(e),r&4){if(e.stateNode===null)throw Error(ke(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(E){cn(e,e.return,E)}}break;case 3:if(va(t,e),Ua(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qd(t.containerInfo)}catch(E){cn(e,e.return,E)}break;case 4:va(t,e),Ua(e);break;case 13:va(t,e),Ua(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Mb=wn())),r&4&&fP(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(_r=(d=_r)||h,va(t,e),_r=d):va(t,e),Ua(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(Be=e,h=e.child;h!==null;){for(v=Be=h;Be!==null;){switch(g=Be,w=g.child,g.tag){case 0:case 11:case 14:case 15:Od(4,g,g.return);break;case 1:yc(g,g.return);var _=g.stateNode;if(typeof _.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(E){cn(r,n,E)}}break;case 5:yc(g,g.return);break;case 22:if(g.memoizedState!==null){hP(v);continue}}w!==null?(w.return=g,Be=w):hP(v)}h=h.sibling}e:for(h=null,v=e;;){if(v.tag===5){if(h===null){h=v;try{i=v.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(u=v.stateNode,c=v.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=rD("display",s))}catch(E){cn(e,e.return,E)}}}else if(v.tag===6){if(h===null)try{v.stateNode.nodeValue=d?"":v.memoizedProps}catch(E){cn(e,e.return,E)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;h===v&&(h=null),v=v.return}h===v&&(h=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:va(t,e),Ua(e),r&4&&fP(e);break;case 21:break;default:va(t,e),Ua(e)}}function Ua(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(OO(n)){var r=n;break e}n=n.return}throw Error(ke(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(qd(i,""),r.flags&=-33);var a=cP(e);Qw(e,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,u=cP(e);Xw(e,u,s);break;default:throw Error(ke(161))}}catch(c){cn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function U4(e,t,n){Be=e,NO(e)}function NO(e,t,n){for(var r=(e.mode&1)!==0;Be!==null;){var i=Be,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||dm;if(!s){var u=i.alternate,c=u!==null&&u.memoizedState!==null||_r;u=dm;var d=_r;if(dm=s,(_r=c)&&!d)for(Be=i;Be!==null;)s=Be,c=s.child,s.tag===22&&s.memoizedState!==null?pP(i):c!==null?(c.return=s,Be=c):pP(i);for(;a!==null;)Be=a,NO(a),a=a.sibling;Be=i,dm=u,_r=d}dP(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Be=a):dP(e)}}function dP(e){for(;Be!==null;){var t=Be;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_r||vg(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!_r)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:_a(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&QE(t,a,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}QE(t,s,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var v=h.dehydrated;v!==null&&Qd(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}_r||t.flags&512&&Vw(t)}catch(g){cn(t,t.return,g)}}if(t===e){Be=null;break}if(n=t.sibling,n!==null){n.return=t.return,Be=n;break}Be=t.return}}function hP(e){for(;Be!==null;){var t=Be;if(t===e){Be=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Be=n;break}Be=t.return}}function pP(e){for(;Be!==null;){var t=Be;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vg(4,t)}catch(c){cn(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){cn(t,i,c)}}var a=t.return;try{Vw(t)}catch(c){cn(t,a,c)}break;case 5:var s=t.return;try{Vw(t)}catch(c){cn(t,s,c)}}}catch(c){cn(t,t.return,c)}if(t===e){Be=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Be=u;break}Be=t.return}}var H4=Math.ceil,Pv=Qo.ReactCurrentDispatcher,Nb=Qo.ReactCurrentOwner,Ji=Qo.ReactCurrentBatchConfig,wt=0,qn=null,Cn=null,ar=0,vi=0,wc=ru(0),jn=0,sh=null,hl=0,gg=0,Tb=0,$d=null,Gr=null,Mb=0,Yc=1/0,Po=null,kv=!1,Gw=null,Bs=null,hm=!1,$s=null,Cv=0,Rd=0,Jw=null,Hm=-1,Km=0;function Tr(){return wt&6?wn():Hm!==-1?Hm:Hm=wn()}function Ws(e){return e.mode&1?wt&2&&ar!==0?ar&-ar:C4.transition!==null?(Km===0&&(Km=vD()),Km):(e=Ot,e!==0||(e=window.event,e=e===void 0?16:xD(e.type)),e):1}function ka(e,t,n,r){if(50<Rd)throw Rd=0,Jw=null,Error(ke(185));Nh(e,n,r),(!(wt&2)||e!==qn)&&(e===qn&&(!(wt&2)&&(gg|=n),jn===4&&Ps(e,ar)),ri(e,r),n===1&&wt===0&&!(t.mode&1)&&(Yc=wn()+500,hg&&iu()))}function ri(e,t){var n=e.callbackNode;CF(e,t);var r=cv(e,e===qn?ar:0);if(r===0)n!==null&&xE(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&xE(n),t===1)e.tag===0?k4(mP.bind(null,e)):WD(mP.bind(null,e)),S4(function(){!(wt&6)&&iu()}),n=null;else{switch(gD(r)){case 1:n=ob;break;case 4:n=pD;break;case 16:n=lv;break;case 536870912:n=mD;break;default:n=lv}n=FO(n,TO.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function TO(e,t){if(Hm=-1,Km=0,wt&6)throw Error(ke(327));var n=e.callbackNode;if(Cc()&&e.callbackNode!==n)return null;var r=cv(e,e===qn?ar:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Dv(e,r);else{t=r;var i=wt;wt|=2;var a=IO();(qn!==e||ar!==t)&&(Po=null,Yc=wn()+500,il(e,t));do try{Y4();break}catch(u){MO(e,u)}while(1);wb(),Pv.current=a,wt=i,Cn!==null?t=0:(qn=null,ar=0,t=jn)}if(t!==0){if(t===2&&(i=Pw(e),i!==0&&(r=i,t=Zw(e,i))),t===1)throw n=sh,il(e,0),Ps(e,r),ri(e,wn()),n;if(t===6)Ps(e,r);else{if(i=e.current.alternate,!(r&30)&&!K4(i)&&(t=Dv(e,r),t===2&&(a=Pw(e),a!==0&&(r=a,t=Zw(e,a))),t===1))throw n=sh,il(e,0),Ps(e,r),ri(e,wn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ke(345));case 2:Uu(e,Gr,Po);break;case 3:if(Ps(e,r),(r&130023424)===r&&(t=Mb+500-wn(),10<t)){if(cv(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Tr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Tw(Uu.bind(null,e,Gr,Po),t);break}Uu(e,Gr,Po);break;case 4:if(Ps(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-Pa(r);a=1<<s,s=t[s],s>i&&(i=s),r&=~a}if(r=i,r=wn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*H4(r/1960))-r,10<r){e.timeoutHandle=Tw(Uu.bind(null,e,Gr,Po),r);break}Uu(e,Gr,Po);break;case 5:Uu(e,Gr,Po);break;default:throw Error(ke(329))}}}return ri(e,wn()),e.callbackNode===n?TO.bind(null,e):null}function Zw(e,t){var n=$d;return e.current.memoizedState.isDehydrated&&(il(e,t).flags|=256),e=Dv(e,t),e!==2&&(t=Gr,Gr=n,t!==null&&e_(t)),e}function e_(e){Gr===null?Gr=e:Gr.push.apply(Gr,e)}function K4(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Oa(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ps(e,t){for(t&=~Tb,t&=~gg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Pa(t),r=1<<n;e[n]=-1,t&=~r}}function mP(e){if(wt&6)throw Error(ke(327));Cc();var t=cv(e,0);if(!(t&1))return ri(e,wn()),null;var n=Dv(e,t);if(e.tag!==0&&n===2){var r=Pw(e);r!==0&&(t=r,n=Zw(e,r))}if(n===1)throw n=sh,il(e,0),Ps(e,t),ri(e,wn()),n;if(n===6)throw Error(ke(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Uu(e,Gr,Po),ri(e,wn()),null}function Ib(e,t){var n=wt;wt|=1;try{return e(t)}finally{wt=n,wt===0&&(Yc=wn()+500,hg&&iu())}}function pl(e){$s!==null&&$s.tag===0&&!(wt&6)&&Cc();var t=wt;wt|=1;var n=Ji.transition,r=Ot;try{if(Ji.transition=null,Ot=1,e)return e()}finally{Ot=r,Ji.transition=n,wt=t,!(wt&6)&&iu()}}function Ab(){vi=wc.current,Kt(wc)}function il(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,b4(n)),Cn!==null)for(n=Cn.return;n!==null;){var r=n;switch(vb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mv();break;case 3:Kc(),Kt(ti),Kt(Sr),Pb();break;case 5:Eb(r);break;case 4:Kc();break;case 13:Kt(en);break;case 19:Kt(en);break;case 10:_b(r.type._context);break;case 22:case 23:Ab()}n=n.return}if(qn=e,Cn=e=Us(e.current,null),ar=vi=t,jn=0,sh=null,Tb=gg=hl=0,Gr=$d=null,Ju!==null){for(t=0;t<Ju.length;t++)if(n=Ju[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}Ju=null}return e}function MO(e,t){do{var n=Cn;try{if(wb(),Bm.current=Ev,xv){for(var r=tn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xv=!1}if(dl=0,Hn=Mn=tn=null,Dd=!1,ih=0,Nb.current=null,n===null||n.return===null){jn=1,sh=t,Cn=null;break}e:{var a=e,s=n.return,u=n,c=t;if(t=ar,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=u,v=h.tag;if(!(h.mode&1)&&(v===0||v===11||v===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=nP(s);if(w!==null){w.flags&=-257,rP(w,s,u,a,t),w.mode&1&&tP(a,d,t),t=w,c=d;var _=t.updateQueue;if(_===null){var E=new Set;E.add(c),t.updateQueue=E}else _.add(c);break e}else{if(!(t&1)){tP(a,d,t),jb();break e}c=Error(ke(426))}}else if(Vt&&u.mode&1){var C=nP(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),rP(C,s,u,a,t),gb(qc(c,u));break e}}a=c=qc(c,u),jn!==4&&(jn=2),$d===null?$d=[a]:$d.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=gO(a,c,t);XE(a,x);break e;case 1:u=c;var S=a.type,P=a.stateNode;if(!(a.flags&128)&&(typeof S.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Bs===null||!Bs.has(P)))){a.flags|=65536,t&=-t,a.lanes|=t;var M=yO(a,u,t);XE(a,M);break e}}a=a.return}while(a!==null)}jO(n)}catch(T){t=T,Cn===n&&n!==null&&(Cn=n=n.return);continue}break}while(1)}function IO(){var e=Pv.current;return Pv.current=Ev,e===null?Ev:e}function jb(){(jn===0||jn===3||jn===2)&&(jn=4),qn===null||!(hl&268435455)&&!(gg&268435455)||Ps(qn,ar)}function Dv(e,t){var n=wt;wt|=2;var r=IO();(qn!==e||ar!==t)&&(Po=null,il(e,t));do try{q4();break}catch(i){MO(e,i)}while(1);if(wb(),wt=n,Pv.current=r,Cn!==null)throw Error(ke(261));return qn=null,ar=0,jn}function q4(){for(;Cn!==null;)AO(Cn)}function Y4(){for(;Cn!==null&&!yF();)AO(Cn)}function AO(e){var t=zO(e.alternate,e,vi);e.memoizedProps=e.pendingProps,t===null?jO(e):Cn=t,Nb.current=null}function jO(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=F4(n,t),n!==null){n.flags&=32767,Cn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{jn=6,Cn=null;return}}else if(n=z4(n,t,vi),n!==null){Cn=n;return}if(t=t.sibling,t!==null){Cn=t;return}Cn=t=e}while(t!==null);jn===0&&(jn=5)}function Uu(e,t,n){var r=Ot,i=Ji.transition;try{Ji.transition=null,Ot=1,V4(e,t,n,r)}finally{Ji.transition=i,Ot=r}return null}function V4(e,t,n,r){do Cc();while($s!==null);if(wt&6)throw Error(ke(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ke(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(DF(e,a),e===qn&&(Cn=qn=null,ar=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hm||(hm=!0,FO(lv,function(){return Cc(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Ji.transition,Ji.transition=null;var s=Ot;Ot=1;var u=wt;wt|=4,Nb.current=null,W4(e,n),RO(n,e),p4(Rw),fv=!!$w,Rw=$w=null,e.current=n,U4(n),wF(),wt=u,Ot=s,Ji.transition=a}else e.current=n;if(hm&&(hm=!1,$s=e,Cv=i),a=e.pendingLanes,a===0&&(Bs=null),SF(n.stateNode),ri(e,wn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(kv)throw kv=!1,e=Gw,Gw=null,e;return Cv&1&&e.tag!==0&&Cc(),a=e.pendingLanes,a&1?e===Jw?Rd++:(Rd=0,Jw=e):Rd=0,iu(),null}function Cc(){if($s!==null){var e=gD(Cv),t=Ji.transition,n=Ot;try{if(Ji.transition=null,Ot=16>e?16:e,$s===null)var r=!1;else{if(e=$s,$s=null,Cv=0,wt&6)throw Error(ke(331));var i=wt;for(wt|=4,Be=e.current;Be!==null;){var a=Be,s=a.child;if(Be.flags&16){var u=a.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(Be=d;Be!==null;){var h=Be;switch(h.tag){case 0:case 11:case 15:Od(8,h,a)}var v=h.child;if(v!==null)v.return=h,Be=v;else for(;Be!==null;){h=Be;var g=h.sibling,w=h.return;if(DO(h),h===d){Be=null;break}if(g!==null){g.return=w,Be=g;break}Be=w}}}var _=a.alternate;if(_!==null){var E=_.child;if(E!==null){_.child=null;do{var C=E.sibling;E.sibling=null,E=C}while(E!==null)}}Be=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Be=s;else e:for(;Be!==null;){if(a=Be,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Od(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,Be=x;break e}Be=a.return}}var S=e.current;for(Be=S;Be!==null;){s=Be;var P=s.child;if(s.subtreeFlags&2064&&P!==null)P.return=s,Be=P;else e:for(s=S;Be!==null;){if(u=Be,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:vg(9,u)}}catch(T){cn(u,u.return,T)}if(u===s){Be=null;break e}var M=u.sibling;if(M!==null){M.return=u.return,Be=M;break e}Be=u.return}}if(wt=i,iu(),Za&&typeof Za.onPostCommitFiberRoot=="function")try{Za.onPostCommitFiberRoot(ug,e)}catch{}r=!0}return r}finally{Ot=n,Ji.transition=t}}return!1}function vP(e,t,n){t=qc(n,t),t=gO(e,t,1),e=Fs(e,t,1),t=Tr(),e!==null&&(Nh(e,1,t),ri(e,t))}function cn(e,t,n){if(e.tag===3)vP(e,e,n);else for(;t!==null;){if(t.tag===3){vP(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bs===null||!Bs.has(r))){e=qc(n,e),e=yO(t,e,1),t=Fs(t,e,1),e=Tr(),t!==null&&(Nh(t,1,e),ri(t,e));break}}t=t.return}}function X4(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Tr(),e.pingedLanes|=e.suspendedLanes&n,qn===e&&(ar&n)===n&&(jn===4||jn===3&&(ar&130023424)===ar&&500>wn()-Mb?il(e,0):Tb|=n),ri(e,t)}function LO(e,t){t===0&&(e.mode&1?(t=rm,rm<<=1,!(rm&130023424)&&(rm=4194304)):t=1);var n=Tr();e=Wo(e,t),e!==null&&(Nh(e,t,n),ri(e,n))}function Q4(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),LO(e,n)}function G4(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ke(314))}r!==null&&r.delete(t),LO(e,n)}var zO;zO=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ti.current)ei=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ei=!1,L4(e,t,n);ei=!!(e.flags&131072)}else ei=!1,Vt&&t.flags&1048576&&UD(t,yv,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Um(e,t),e=t.pendingProps;var i=Wc(t,Sr.current);kc(t,n),i=Cb(null,t,r,e,i,n);var a=Db();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ni(r)?(a=!0,vv(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Sb(t),i.updater=mg,t.stateNode=i,i._reactInternals=t,Fw(t,r,e,n),t=Uw(null,t,r,!0,a,n)):(t.tag=0,Vt&&a&&mb(t),Rr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Um(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Z4(r),e=_a(r,e),i){case 0:t=Ww(null,t,r,e,n);break e;case 1:t=oP(null,t,r,e,n);break e;case 11:t=iP(null,t,r,e,n);break e;case 14:t=aP(null,t,r,_a(r.type,e),n);break e}throw Error(ke(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_a(r,i),Ww(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_a(r,i),oP(e,t,r,i,n);case 3:e:{if(SO(t),e===null)throw Error(ke(387));r=t.pendingProps,a=t.memoizedState,i=a.element,XD(e,t),bv(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=qc(Error(ke(423)),t),t=sP(e,t,r,n,i);break e}else if(r!==i){i=qc(Error(ke(424)),t),t=sP(e,t,r,n,i);break e}else for(gi=zs(t.stateNode.containerInfo.firstChild),yi=t,Vt=!0,Sa=null,n=YD(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Uc(),r===i){t=Uo(e,t,n);break e}Rr(e,t,r,n)}t=t.child}return t;case 5:return QD(t),e===null&&jw(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,Nw(r,i)?s=null:a!==null&&Nw(r,a)&&(t.flags|=32),bO(e,t),Rr(e,t,s,n),t.child;case 6:return e===null&&jw(t),null;case 13:return xO(e,t,n);case 4:return xb(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Hc(t,null,r,n):Rr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_a(r,i),iP(e,t,r,i,n);case 7:return Rr(e,t,t.pendingProps,n),t.child;case 8:return Rr(e,t,t.pendingProps.children,n),t.child;case 12:return Rr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Bt(wv,r._currentValue),r._currentValue=s,a!==null)if(Oa(a.value,s)){if(a.children===i.children&&!ti.current){t=Uo(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var u=a.dependencies;if(u!==null){s=a.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=To(-1,n&-n),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Lw(a.return,n,t),u.lanes|=n;break}c=c.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(ke(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Lw(s,n,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Rr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,kc(t,n),i=Zi(i),r=r(i),t.flags|=1,Rr(e,t,r,n),t.child;case 14:return r=t.type,i=_a(r,t.pendingProps),i=_a(r.type,i),aP(e,t,r,i,n);case 15:return wO(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_a(r,i),Um(e,t),t.tag=1,ni(r)?(e=!0,vv(t)):e=!1,kc(t,n),vO(t,r,i),Fw(t,r,i,n),Uw(null,t,r,!0,e,n);case 19:return EO(e,t,n);case 22:return _O(e,t,n)}throw Error(ke(156,t.tag))};function FO(e,t){return hD(e,t)}function J4(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xi(e,t,n,r){return new J4(e,t,n,r)}function Lb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Z4(e){if(typeof e=="function")return Lb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rb)return 11;if(e===ib)return 14}return 2}function Us(e,t){var n=e.alternate;return n===null?(n=Xi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qm(e,t,n,r,i,a){var s=2;if(r=e,typeof e=="function")Lb(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case lc:return al(n.children,i,a,t);case nb:s=8,i|=8;break;case cw:return e=Xi(12,n,t,i|2),e.elementType=cw,e.lanes=a,e;case fw:return e=Xi(13,n,t,i),e.elementType=fw,e.lanes=a,e;case dw:return e=Xi(19,n,t,i),e.elementType=dw,e.lanes=a,e;case QC:return yg(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case VC:s=10;break e;case XC:s=9;break e;case rb:s=11;break e;case ib:s=14;break e;case _s:s=16,r=null;break e}throw Error(ke(130,e==null?e:typeof e,""))}return t=Xi(s,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function al(e,t,n,r){return e=Xi(7,e,r,t),e.lanes=n,e}function yg(e,t,n,r){return e=Xi(22,e,r,t),e.elementType=QC,e.lanes=n,e.stateNode={isHidden:!1},e}function x0(e,t,n){return e=Xi(6,e,null,t),e.lanes=n,e}function E0(e,t,n){return t=Xi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function e3(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=i0(0),this.expirationTimes=i0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=i0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zb(e,t,n,r,i,a,s,u,c){return e=new e3(e,t,n,u,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Xi(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sb(a),e}function t3(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uc,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function BO(e){if(!e)return Xs;e=e._reactInternals;e:{if(Sl(e)!==e||e.tag!==1)throw Error(ke(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ke(171))}if(e.tag===1){var n=e.type;if(ni(n))return BD(e,n,t)}return t}function WO(e,t,n,r,i,a,s,u,c){return e=zb(n,r,!0,e,i,a,s,u,c),e.context=BO(null),n=e.current,r=Tr(),i=Ws(n),a=To(r,i),a.callback=t??null,Fs(n,a,i),e.current.lanes=i,Nh(e,i,r),ri(e,r),e}function wg(e,t,n,r){var i=t.current,a=Tr(),s=Ws(i);return n=BO(n),t.context===null?t.context=n:t.pendingContext=n,t=To(a,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Fs(i,t,s),e!==null&&(ka(e,i,s,a),Fm(e,i,s)),s}function Ov(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gP(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Fb(e,t){gP(e,t),(e=e.alternate)&&gP(e,t)}function n3(){return null}var UO=typeof reportError=="function"?reportError:function(e){console.error(e)};function Bb(e){this._internalRoot=e}_g.prototype.render=Bb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ke(409));wg(e,t,null,null)};_g.prototype.unmount=Bb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;pl(function(){wg(null,e,null,null)}),t[Bo]=null}};function _g(e){this._internalRoot=e}_g.prototype.unstable_scheduleHydration=function(e){if(e){var t=_D();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Es.length&&t!==0&&t<Es[n].priority;n++);Es.splice(n,0,e),n===0&&SD(e)}};function Wb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yP(){}function r3(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var d=Ov(s);a.call(d)}}var s=WO(t,r,e,0,null,!1,!1,"",yP);return e._reactRootContainer=s,e[Bo]=s.current,Zd(e.nodeType===8?e.parentNode:e),pl(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var d=Ov(c);u.call(d)}}var c=zb(e,0,!1,null,null,!1,!1,"",yP);return e._reactRootContainer=c,e[Bo]=c.current,Zd(e.nodeType===8?e.parentNode:e),pl(function(){wg(t,c,n,r)}),c}function Sg(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var u=i;i=function(){var c=Ov(s);u.call(c)}}wg(t,s,e,i)}else s=r3(n,t,e,i,r);return Ov(s)}yD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=yd(t.pendingLanes);n!==0&&(sb(t,n|1),ri(t,wn()),!(wt&6)&&(Yc=wn()+500,iu()))}break;case 13:pl(function(){var r=Wo(e,1);if(r!==null){var i=Tr();ka(r,e,1,i)}}),Fb(e,1)}};ub=function(e){if(e.tag===13){var t=Wo(e,134217728);if(t!==null){var n=Tr();ka(t,e,134217728,n)}Fb(e,134217728)}};wD=function(e){if(e.tag===13){var t=Ws(e),n=Wo(e,t);if(n!==null){var r=Tr();ka(n,e,t,r)}Fb(e,t)}};_D=function(){return Ot};bD=function(e,t){var n=Ot;try{return Ot=e,t()}finally{Ot=n}};Sw=function(e,t,n){switch(t){case"input":if(mw(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=dg(r);if(!i)throw Error(ke(90));JC(r),mw(r,i)}}}break;case"textarea":eD(e,n);break;case"select":t=n.value,t!=null&&Sc(e,!!n.multiple,t,!1)}};sD=Ib;uD=pl;var i3={usingClientEntryPoint:!1,Events:[Mh,hc,dg,aD,oD,Ib]},sd={findFiberByHostInstance:Gu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},a3={bundleType:sd.bundleType,version:sd.version,rendererPackageName:sd.rendererPackageName,rendererConfig:sd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fD(e),e===null?null:e.stateNode},findFiberByHostInstance:sd.findFiberByHostInstance||n3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pm.isDisabled&&pm.supportsFiber)try{ug=pm.inject(a3),Za=pm}catch{}}Ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i3;Ei.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wb(t))throw Error(ke(200));return t3(e,t,null,n)};Ei.createRoot=function(e,t){if(!Wb(e))throw Error(ke(299));var n=!1,r="",i=UO;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=zb(e,1,!1,null,null,n,!1,r,i),e[Bo]=t.current,Zd(e.nodeType===8?e.parentNode:e),new Bb(t)};Ei.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ke(188)):(e=Object.keys(e).join(","),Error(ke(268,e)));return e=fD(t),e=e===null?null:e.stateNode,e};Ei.flushSync=function(e){return pl(e)};Ei.hydrate=function(e,t,n){if(!bg(t))throw Error(ke(200));return Sg(null,e,t,!0,n)};Ei.hydrateRoot=function(e,t,n){if(!Wb(e))throw Error(ke(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=UO;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=WO(t,null,e,1,n??null,i,!1,a,s),e[Bo]=t.current,Zd(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new _g(t)};Ei.render=function(e,t,n){if(!bg(t))throw Error(ke(200));return Sg(null,e,t,!1,n)};Ei.unmountComponentAtNode=function(e){if(!bg(e))throw Error(ke(40));return e._reactRootContainer?(pl(function(){Sg(null,null,e,!1,function(){e._reactRootContainer=null,e[Bo]=null})}),!0):!1};Ei.unstable_batchedUpdates=Ib;Ei.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!bg(n))throw Error(ke(200));if(e==null||e._reactInternals===void 0)throw Error(ke(38));return Sg(e,t,n,!1,r)};Ei.version="18.3.1-next-f1338f8080-20240426";function HO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HO)}catch(e){console.error(e)}}HO(),HC.exports=Ei;var Xa=HC.exports,wP=Xa;uw.createRoot=wP.createRoot,uw.hydrateRoot=wP.hydrateRoot;var $v={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */$v.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",u="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",v=1,g=2,w=4,_=1,E=2,C=1,x=2,S=4,P=8,M=16,T=32,U=64,W=128,re=256,he=512,de=30,ce="...",pe=800,xe=16,Ce=1,Le=2,qe=3,We=1/0,oe=9007199254740991,_e=17976931348623157e292,G=0/0,F=4294967295,ee=F-1,X=F>>>1,I=[["ary",W],["bind",C],["bindKey",x],["curry",P],["curryRight",M],["flip",he],["partial",T],["partialRight",U],["rearg",re]],H="[object Arguments]",ae="[object Array]",ge="[object AsyncFunction]",$e="[object Boolean]",me="[object Date]",Me="[object DOMException]",Ge="[object Error]",Ke="[object Function]",an="[object GeneratorFunction]",Et="[object Map]",At="[object Number]",dn="[object Null]",on="[object Object]",sr="[object Promise]",Yn="[object Proxy]",sn="[object RegExp]",_t="[object Set]",Vn="[object String]",Xn="[object Symbol]",ra="[object Undefined]",Qn="[object WeakMap]",Gn="[object WeakSet]",Sn="[object ArrayBuffer]",un="[object DataView]",ur="[object Float32Array]",si="[object Float64Array]",xn="[object Int8Array]",ia="[object Int16Array]",uo="[object Int32Array]",Br="[object Uint8Array]",Fe="[object Uint8ClampedArray]",Oi="[object Uint16Array]",ui="[object Uint32Array]",lo=/\b__p \+= '';/g,Ne=/\b(__p \+=) '' \+/g,cu=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fu=/&(?:amp|lt|gt|quot|#39);/g,Xt=/[&<>"']/g,zn=RegExp(fu.source),On=RegExp(Xt.source),$i=/<%-([\s\S]+?)%>/g,lr=/<%([\s\S]+?)%>/g,Qt=/<%=([\s\S]+?)%>/g,$n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ri=/^\w*$/,qt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dt=/[\\^$.*+?()[\]{}|]/g,bt=RegExp(dt.source),xr=/^\s+/,Ni=/\s/,Ti=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Er=/\{\n\/\* \[wrapped with (.+)\] \*/,co=/,? & /,Wr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Jo=/[()=,{}\[\]\/\s]/,Ma=/\\(\\)?/g,Pl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,op=/\w*$/,Ia=/^[-+]0x[0-9a-f]+$/i,sp=/^0b[01]+$/i,fo=/^\[object .+?Constructor\]$/,up=/^0o[0-7]+$/i,wf=/^(?:0|[1-9]\d*)$/,Gt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mi=/($^)/,aa=/['\n\r\u2028\u2029\\]/g,du="\\ud800-\\udfff",Zo="\\u0300-\\u036f",kl="\\ufe20-\\ufe2f",_f="\\u20d0-\\u20ff",Cl=Zo+kl+_f,Aa="\\u2700-\\u27bf",bf="a-z\\xdf-\\xf6\\xf8-\\xff",Dl="\\xac\\xb1\\xd7\\xf7",lp="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ht="\\u2000-\\u206f",cp=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Sf="A-Z\\xc0-\\xd6\\xd8-\\xde",xf="\\ufe0e\\ufe0f",$t=Dl+lp+ht+cp,ho="[']",hu="["+du+"]",po="["+$t+"]",es="["+Cl+"]",Ol="\\d+",$l="["+Aa+"]",Ef="["+bf+"]",pu="[^"+du+$t+Ol+Aa+bf+Sf+"]",Rl="\\ud83c[\\udffb-\\udfff]",oa="(?:"+es+"|"+Rl+")",ts="[^"+du+"]",Nl="(?:\\ud83c[\\udde6-\\uddff]){2}",Pf="[\\ud800-\\udbff][\\udc00-\\udfff]",lt="["+Sf+"]",Tl="\\u200d",fp="(?:"+Ef+"|"+pu+")",Jg="(?:"+lt+"|"+pu+")",cr="(?:"+ho+"(?:d|ll|m|re|s|t|ve))?",mo="(?:"+ho+"(?:D|LL|M|RE|S|T|VE))?",mu=oa+"?",sa="["+xf+"]?",dp="(?:"+Tl+"(?:"+[ts,Nl,Pf].join("|")+")"+sa+mu+")*",hp="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",En="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",li=sa+mu+dp,vu="(?:"+[$l,Nl,Pf].join("|")+")"+li,gu="(?:"+[ts+es+"?",es,Nl,Pf,hu].join("|")+")",kf=RegExp(ho,"g"),ja=RegExp(es,"g"),Cf=RegExp(Rl+"(?="+Rl+")|"+gu+li,"g"),Ii=RegExp([lt+"?"+Ef+"+"+cr+"(?="+[po,lt,"$"].join("|")+")",Jg+"+"+mo+"(?="+[po,lt+fp,"$"].join("|")+")",lt+"?"+fp+"+"+cr,lt+"+"+mo,En,hp,Ol,vu].join("|"),"g"),Df=RegExp("["+Tl+du+Cl+xf+"]"),pp=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Of=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yu=-1,Pt={};Pt[ur]=Pt[si]=Pt[xn]=Pt[ia]=Pt[uo]=Pt[Br]=Pt[Fe]=Pt[Oi]=Pt[ui]=!0,Pt[H]=Pt[ae]=Pt[Sn]=Pt[$e]=Pt[un]=Pt[me]=Pt[Ge]=Pt[Ke]=Pt[Et]=Pt[At]=Pt[on]=Pt[sn]=Pt[_t]=Pt[Vn]=Pt[Qn]=!1;var kt={};kt[H]=kt[ae]=kt[Sn]=kt[un]=kt[$e]=kt[me]=kt[ur]=kt[si]=kt[xn]=kt[ia]=kt[uo]=kt[Et]=kt[At]=kt[on]=kt[sn]=kt[_t]=kt[Vn]=kt[Xn]=kt[Br]=kt[Fe]=kt[Oi]=kt[ui]=!0,kt[Ge]=kt[Ke]=kt[Qn]=!1;var Zg={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},wu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ey={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ty={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ml=parseFloat,Il=parseInt,Al=typeof qu=="object"&&qu&&qu.Object===Object&&qu,ny=typeof self=="object"&&self&&self.Object===Object&&self,Rn=Al||ny||Function("return this")(),$f=t&&!t.nodeType&&t,ua=$f&&!0&&e&&!e.nodeType&&e,jl=ua&&ua.exports===$f,Ll=jl&&Al.process,Jn=function(){try{var $=ua&&ua.require&&ua.require("util").types;return $||Ll&&Ll.binding&&Ll.binding("util")}catch{}}(),_u=Jn&&Jn.isArrayBuffer,bu=Jn&&Jn.isDate,Rf=Jn&&Jn.isMap,mp=Jn&&Jn.isRegExp,Su=Jn&&Jn.isSet,zl=Jn&&Jn.isTypedArray;function Zn($,z,R){switch(R.length){case 0:return $.call(z);case 1:return $.call(z,R[0]);case 2:return $.call(z,R[0],R[1]);case 3:return $.call(z,R[0],R[1],R[2])}return $.apply(z,R)}function Nf($,z,R,V){for(var K=-1,J=$==null?0:$.length;++K<J;){var ie=$[K];z(V,ie,R(ie),$)}return V}function fr($,z){for(var R=-1,V=$==null?0:$.length;++R<V&&z($[R],R,$)!==!1;);return $}function Fn($,z){for(var R=$==null?0:$.length;R--&&z($[R],R,$)!==!1;);return $}function ns($,z){for(var R=-1,V=$==null?0:$.length;++R<V;)if(!z($[R],R,$))return!1;return!0}function Ur($,z){for(var R=-1,V=$==null?0:$.length,K=0,J=[];++R<V;){var ie=$[R];z(ie,R,$)&&(J[K++]=ie)}return J}function xu($,z){var R=$==null?0:$.length;return!!R&&as($,z,0)>-1}function rs($,z,R){for(var V=-1,K=$==null?0:$.length;++V<K;)if(R(z,$[V]))return!0;return!1}function jt($,z){for(var R=-1,V=$==null?0:$.length,K=Array(V);++R<V;)K[R]=z($[R],R,$);return K}function la($,z){for(var R=-1,V=z.length,K=$.length;++R<V;)$[K+R]=z[R];return $}function is($,z,R,V){var K=-1,J=$==null?0:$.length;for(V&&J&&(R=$[++K]);++K<J;)R=z(R,$[K],K,$);return R}function Tf($,z,R,V){var K=$==null?0:$.length;for(V&&K&&(R=$[--K]);K--;)R=z(R,$[K],K,$);return R}function ca($,z){for(var R=-1,V=$==null?0:$.length;++R<V;)if(z($[R],R,$))return!0;return!1}var Mf=ku("length");function If($){return $.split("")}function Fl($){return $.match(Wr)||[]}function Bl($,z,R){var V;return R($,function(K,J,ie){if(z(K,J,ie))return V=J,!1}),V}function Eu($,z,R,V){for(var K=$.length,J=R+(V?1:-1);V?J--:++J<K;)if(z($[J],J,$))return J;return-1}function as($,z,R){return z===z?La($,z,R):Eu($,Pu,R)}function Af($,z,R,V){for(var K=R-1,J=$.length;++K<J;)if(V($[K],z))return K;return-1}function Pu($){return $!==$}function vp($,z){var R=$==null?0:$.length;return R?jf($,z)/R:G}function ku($){return function(z){return z==null?n:z[$]}}function Cu($){return function(z){return $==null?n:$[z]}}function gp($,z,R,V,K){return K($,function(J,ie,Q){R=V?(V=!1,J):z(R,J,ie,Q)}),R}function yp($,z){var R=$.length;for($.sort(z);R--;)$[R]=$[R].value;return $}function jf($,z){for(var R,V=-1,K=$.length;++V<K;){var J=z($[V]);J!==n&&(R=R===n?J:R+J)}return R}function Wl($,z){for(var R=-1,V=Array($);++R<$;)V[R]=z(R);return V}function wp($,z){return jt(z,function(R){return[R,$[R]]})}function _p($){return $&&$.slice(0,y($)+1).replace(xr,"")}function dr($){return function(z){return $(z)}}function Du($,z){return jt(z,function(R){return $[R]})}function os($,z){return $.has(z)}function Lf($,z){for(var R=-1,V=$.length;++R<V&&as(z,$[R],0)>-1;);return R}function bp($,z){for(var R=$.length;R--&&as(z,$[R],0)>-1;);return R}function ry($,z){for(var R=$.length,V=0;R--;)$[R]===z&&++V;return V}var iy=Cu(Zg),Ul=Cu(wu);function fa($){return"\\"+ty[$]}function Jt($,z){return $==null?n:$[z]}function da($){return Df.test($)}function Hr($){return pp.test($)}function ay($){for(var z,R=[];!(z=$.next()).done;)R.push(z.value);return R}function Ou($){var z=-1,R=Array($.size);return $.forEach(function(V,K){R[++z]=[K,V]}),R}function zf($,z){return function(R){return $(z(R))}}function hr($,z){for(var R=-1,V=$.length,K=0,J=[];++R<V;){var ie=$[R];(ie===z||ie===h)&&($[R]=h,J[K++]=R)}return J}function ss($){var z=-1,R=Array($.size);return $.forEach(function(V){R[++z]=V}),R}function us($){var z=-1,R=Array($.size);return $.forEach(function(V){R[++z]=[V,V]}),R}function La($,z,R){for(var V=R-1,K=$.length;++V<K;)if($[V]===z)return V;return-1}function Sp($,z,R){for(var V=R+1;V--;)if($[V]===z)return V;return V}function f($){return da($)?D($):Mf($)}function m($){return da($)?N($):If($)}function y($){for(var z=$.length;z--&&Ni.test($.charAt(z)););return z}var k=Cu(ey);function D($){for(var z=Cf.lastIndex=0;Cf.test($);)++z;return z}function N($){return $.match(Cf)||[]}function B($){return $.match(Ii)||[]}var Y=function $(z){z=z==null?Rn:te.defaults(Rn.Object(),z,te.pick(Rn,Of));var R=z.Array,V=z.Date,K=z.Error,J=z.Function,ie=z.Math,Q=z.Object,ue=z.RegExp,fe=z.String,le=z.TypeError,ve=R.prototype,Pe=J.prototype,Oe=Q.prototype,Ee=z["__core-js_shared__"],De=Pe.toString,be=Oe.hasOwnProperty,Re=0,Ae=function(){var o=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Ze=Oe.toString,at=De.call(Q),ot=Rn._,Pr=ue("^"+De.call(be).replace(dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Je=jl?z.Buffer:n,Wt=z.Symbol,hn=z.Uint8Array,$u=Je?Je.allocUnsafe:n,Pn=zf(Q.getPrototypeOf,Q),za=Q.create,Hl=Oe.propertyIsEnumerable,xp=ve.splice,PS=Wt?Wt.isConcatSpreadable:n,Ff=Wt?Wt.iterator:n,Ru=Wt?Wt.toStringTag:n,Ep=function(){try{var o=Au(Q,"defineProperty");return o({},"",{}),o}catch{}}(),RM=z.clearTimeout!==Rn.clearTimeout&&z.clearTimeout,NM=V&&V.now!==Rn.Date.now&&V.now,TM=z.setTimeout!==Rn.setTimeout&&z.setTimeout,Pp=ie.ceil,kp=ie.floor,oy=Q.getOwnPropertySymbols,MM=Je?Je.isBuffer:n,kS=z.isFinite,IM=ve.join,AM=zf(Q.keys,Q),Nn=ie.max,pr=ie.min,jM=V.now,LM=z.parseInt,CS=ie.random,zM=ve.reverse,sy=Au(z,"DataView"),Bf=Au(z,"Map"),uy=Au(z,"Promise"),Kl=Au(z,"Set"),Wf=Au(z,"WeakMap"),Uf=Au(Q,"create"),Cp=Wf&&new Wf,ql={},FM=ju(sy),BM=ju(Bf),WM=ju(uy),UM=ju(Kl),HM=ju(Wf),Dp=Wt?Wt.prototype:n,Hf=Dp?Dp.valueOf:n,DS=Dp?Dp.toString:n;function A(o){if(ln(o)&&!tt(o)&&!(o instanceof gt)){if(o instanceof Ai)return o;if(be.call(o,"__wrapped__"))return Ox(o)}return new Ai(o)}var Yl=function(){function o(){}return function(l){if(!Zt(l))return{};if(za)return za(l);o.prototype=l;var p=new o;return o.prototype=n,p}}();function Op(){}function Ai(o,l){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=n}A.templateSettings={escape:$i,evaluate:lr,interpolate:Qt,variable:"",imports:{_:A}},A.prototype=Op.prototype,A.prototype.constructor=A,Ai.prototype=Yl(Op.prototype),Ai.prototype.constructor=Ai;function gt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=F,this.__views__=[]}function KM(){var o=new gt(this.__wrapped__);return o.__actions__=Kr(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Kr(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Kr(this.__views__),o}function qM(){if(this.__filtered__){var o=new gt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function YM(){var o=this.__wrapped__.value(),l=this.__dir__,p=tt(o),b=l<0,O=p?o.length:0,L=a2(0,O,this.__views__),q=L.start,Z=L.end,se=Z-q,ye=b?Z:q-1,we=this.__iteratees__,Se=we.length,Ie=0,Ue=pr(se,this.__takeCount__);if(!p||!b&&O==se&&Ue==se)return JS(o,this.__actions__);var Xe=[];e:for(;se--&&Ie<Ue;){ye+=l;for(var st=-1,Qe=o[ye];++st<Se;){var pt=we[st],yt=pt.iteratee,di=pt.type,Dr=yt(Qe);if(di==Le)Qe=Dr;else if(!Dr){if(di==Ce)continue e;break e}}Xe[Ie++]=Qe}return Xe}gt.prototype=Yl(Op.prototype),gt.prototype.constructor=gt;function Nu(o){var l=-1,p=o==null?0:o.length;for(this.clear();++l<p;){var b=o[l];this.set(b[0],b[1])}}function VM(){this.__data__=Uf?Uf(null):{},this.size=0}function XM(o){var l=this.has(o)&&delete this.__data__[o];return this.size-=l?1:0,l}function QM(o){var l=this.__data__;if(Uf){var p=l[o];return p===c?n:p}return be.call(l,o)?l[o]:n}function GM(o){var l=this.__data__;return Uf?l[o]!==n:be.call(l,o)}function JM(o,l){var p=this.__data__;return this.size+=this.has(o)?0:1,p[o]=Uf&&l===n?c:l,this}Nu.prototype.clear=VM,Nu.prototype.delete=XM,Nu.prototype.get=QM,Nu.prototype.has=GM,Nu.prototype.set=JM;function vo(o){var l=-1,p=o==null?0:o.length;for(this.clear();++l<p;){var b=o[l];this.set(b[0],b[1])}}function ZM(){this.__data__=[],this.size=0}function eI(o){var l=this.__data__,p=$p(l,o);if(p<0)return!1;var b=l.length-1;return p==b?l.pop():xp.call(l,p,1),--this.size,!0}function tI(o){var l=this.__data__,p=$p(l,o);return p<0?n:l[p][1]}function nI(o){return $p(this.__data__,o)>-1}function rI(o,l){var p=this.__data__,b=$p(p,o);return b<0?(++this.size,p.push([o,l])):p[b][1]=l,this}vo.prototype.clear=ZM,vo.prototype.delete=eI,vo.prototype.get=tI,vo.prototype.has=nI,vo.prototype.set=rI;function go(o){var l=-1,p=o==null?0:o.length;for(this.clear();++l<p;){var b=o[l];this.set(b[0],b[1])}}function iI(){this.size=0,this.__data__={hash:new Nu,map:new(Bf||vo),string:new Nu}}function aI(o){var l=Wp(this,o).delete(o);return this.size-=l?1:0,l}function oI(o){return Wp(this,o).get(o)}function sI(o){return Wp(this,o).has(o)}function uI(o,l){var p=Wp(this,o),b=p.size;return p.set(o,l),this.size+=p.size==b?0:1,this}go.prototype.clear=iI,go.prototype.delete=aI,go.prototype.get=oI,go.prototype.has=sI,go.prototype.set=uI;function Tu(o){var l=-1,p=o==null?0:o.length;for(this.__data__=new go;++l<p;)this.add(o[l])}function lI(o){return this.__data__.set(o,c),this}function cI(o){return this.__data__.has(o)}Tu.prototype.add=Tu.prototype.push=lI,Tu.prototype.has=cI;function ha(o){var l=this.__data__=new vo(o);this.size=l.size}function fI(){this.__data__=new vo,this.size=0}function dI(o){var l=this.__data__,p=l.delete(o);return this.size=l.size,p}function hI(o){return this.__data__.get(o)}function pI(o){return this.__data__.has(o)}function mI(o,l){var p=this.__data__;if(p instanceof vo){var b=p.__data__;if(!Bf||b.length<i-1)return b.push([o,l]),this.size=++p.size,this;p=this.__data__=new go(b)}return p.set(o,l),this.size=p.size,this}ha.prototype.clear=fI,ha.prototype.delete=dI,ha.prototype.get=hI,ha.prototype.has=pI,ha.prototype.set=mI;function OS(o,l){var p=tt(o),b=!p&&Lu(o),O=!p&&!b&&hs(o),L=!p&&!b&&!O&&Gl(o),q=p||b||O||L,Z=q?Wl(o.length,fe):[],se=Z.length;for(var ye in o)(l||be.call(o,ye))&&!(q&&(ye=="length"||O&&(ye=="offset"||ye=="parent")||L&&(ye=="buffer"||ye=="byteLength"||ye=="byteOffset")||bo(ye,se)))&&Z.push(ye);return Z}function $S(o){var l=o.length;return l?o[wy(0,l-1)]:n}function vI(o,l){return Up(Kr(o),Mu(l,0,o.length))}function gI(o){return Up(Kr(o))}function ly(o,l,p){(p!==n&&!pa(o[l],p)||p===n&&!(l in o))&&yo(o,l,p)}function Kf(o,l,p){var b=o[l];(!(be.call(o,l)&&pa(b,p))||p===n&&!(l in o))&&yo(o,l,p)}function $p(o,l){for(var p=o.length;p--;)if(pa(o[p][0],l))return p;return-1}function yI(o,l,p,b){return ls(o,function(O,L,q){l(b,O,p(O),q)}),b}function RS(o,l){return o&&Ba(l,Bn(l),o)}function wI(o,l){return o&&Ba(l,Yr(l),o)}function yo(o,l,p){l=="__proto__"&&Ep?Ep(o,l,{configurable:!0,enumerable:!0,value:p,writable:!0}):o[l]=p}function cy(o,l){for(var p=-1,b=l.length,O=R(b),L=o==null;++p<b;)O[p]=L?n:Hy(o,l[p]);return O}function Mu(o,l,p){return o===o&&(p!==n&&(o=o<=p?o:p),l!==n&&(o=o>=l?o:l)),o}function ji(o,l,p,b,O,L){var q,Z=l&v,se=l&g,ye=l&w;if(p&&(q=O?p(o,b,O,L):p(o)),q!==n)return q;if(!Zt(o))return o;var we=tt(o);if(we){if(q=s2(o),!Z)return Kr(o,q)}else{var Se=mr(o),Ie=Se==Ke||Se==an;if(hs(o))return tx(o,Z);if(Se==on||Se==H||Ie&&!O){if(q=se||Ie?{}:_x(o),!Z)return se?QI(o,wI(q,o)):XI(o,RS(q,o))}else{if(!kt[Se])return O?o:{};q=u2(o,Se,Z)}}L||(L=new ha);var Ue=L.get(o);if(Ue)return Ue;L.set(o,q),Xx(o)?o.forEach(function(Qe){q.add(ji(Qe,l,p,Qe,o,L))}):Yx(o)&&o.forEach(function(Qe,pt){q.set(pt,ji(Qe,l,p,pt,o,L))});var Xe=ye?se?$y:Oy:se?Yr:Bn,st=we?n:Xe(o);return fr(st||o,function(Qe,pt){st&&(pt=Qe,Qe=o[pt]),Kf(q,pt,ji(Qe,l,p,pt,o,L))}),q}function _I(o){var l=Bn(o);return function(p){return NS(p,o,l)}}function NS(o,l,p){var b=p.length;if(o==null)return!b;for(o=Q(o);b--;){var O=p[b],L=l[O],q=o[O];if(q===n&&!(O in o)||!L(q))return!1}return!0}function TS(o,l,p){if(typeof o!="function")throw new le(s);return Jf(function(){o.apply(n,p)},l)}function qf(o,l,p,b){var O=-1,L=xu,q=!0,Z=o.length,se=[],ye=l.length;if(!Z)return se;p&&(l=jt(l,dr(p))),b?(L=rs,q=!1):l.length>=i&&(L=os,q=!1,l=new Tu(l));e:for(;++O<Z;){var we=o[O],Se=p==null?we:p(we);if(we=b||we!==0?we:0,q&&Se===Se){for(var Ie=ye;Ie--;)if(l[Ie]===Se)continue e;se.push(we)}else L(l,Se,b)||se.push(we)}return se}var ls=ox(Fa),MS=ox(dy,!0);function bI(o,l){var p=!0;return ls(o,function(b,O,L){return p=!!l(b,O,L),p}),p}function Rp(o,l,p){for(var b=-1,O=o.length;++b<O;){var L=o[b],q=l(L);if(q!=null&&(Z===n?q===q&&!fi(q):p(q,Z)))var Z=q,se=L}return se}function SI(o,l,p,b){var O=o.length;for(p=nt(p),p<0&&(p=-p>O?0:O+p),b=b===n||b>O?O:nt(b),b<0&&(b+=O),b=p>b?0:Gx(b);p<b;)o[p++]=l;return o}function IS(o,l){var p=[];return ls(o,function(b,O,L){l(b,O,L)&&p.push(b)}),p}function er(o,l,p,b,O){var L=-1,q=o.length;for(p||(p=c2),O||(O=[]);++L<q;){var Z=o[L];l>0&&p(Z)?l>1?er(Z,l-1,p,b,O):la(O,Z):b||(O[O.length]=Z)}return O}var fy=sx(),AS=sx(!0);function Fa(o,l){return o&&fy(o,l,Bn)}function dy(o,l){return o&&AS(o,l,Bn)}function Np(o,l){return Ur(l,function(p){return So(o[p])})}function Iu(o,l){l=fs(l,o);for(var p=0,b=l.length;o!=null&&p<b;)o=o[Wa(l[p++])];return p&&p==b?o:n}function jS(o,l,p){var b=l(o);return tt(o)?b:la(b,p(o))}function kr(o){return o==null?o===n?ra:dn:Ru&&Ru in Q(o)?i2(o):g2(o)}function hy(o,l){return o>l}function xI(o,l){return o!=null&&be.call(o,l)}function EI(o,l){return o!=null&&l in Q(o)}function PI(o,l,p){return o>=pr(l,p)&&o<Nn(l,p)}function py(o,l,p){for(var b=p?rs:xu,O=o[0].length,L=o.length,q=L,Z=R(L),se=1/0,ye=[];q--;){var we=o[q];q&&l&&(we=jt(we,dr(l))),se=pr(we.length,se),Z[q]=!p&&(l||O>=120&&we.length>=120)?new Tu(q&&we):n}we=o[0];var Se=-1,Ie=Z[0];e:for(;++Se<O&&ye.length<se;){var Ue=we[Se],Xe=l?l(Ue):Ue;if(Ue=p||Ue!==0?Ue:0,!(Ie?os(Ie,Xe):b(ye,Xe,p))){for(q=L;--q;){var st=Z[q];if(!(st?os(st,Xe):b(o[q],Xe,p)))continue e}Ie&&Ie.push(Xe),ye.push(Ue)}}return ye}function kI(o,l,p,b){return Fa(o,function(O,L,q){l(b,p(O),L,q)}),b}function Yf(o,l,p){l=fs(l,o),o=Ex(o,l);var b=o==null?o:o[Wa(zi(l))];return b==null?n:Zn(b,o,p)}function LS(o){return ln(o)&&kr(o)==H}function CI(o){return ln(o)&&kr(o)==Sn}function DI(o){return ln(o)&&kr(o)==me}function Vf(o,l,p,b,O){return o===l?!0:o==null||l==null||!ln(o)&&!ln(l)?o!==o&&l!==l:OI(o,l,p,b,Vf,O)}function OI(o,l,p,b,O,L){var q=tt(o),Z=tt(l),se=q?ae:mr(o),ye=Z?ae:mr(l);se=se==H?on:se,ye=ye==H?on:ye;var we=se==on,Se=ye==on,Ie=se==ye;if(Ie&&hs(o)){if(!hs(l))return!1;q=!0,we=!1}if(Ie&&!we)return L||(L=new ha),q||Gl(o)?gx(o,l,p,b,O,L):n2(o,l,se,p,b,O,L);if(!(p&_)){var Ue=we&&be.call(o,"__wrapped__"),Xe=Se&&be.call(l,"__wrapped__");if(Ue||Xe){var st=Ue?o.value():o,Qe=Xe?l.value():l;return L||(L=new ha),O(st,Qe,p,b,L)}}return Ie?(L||(L=new ha),r2(o,l,p,b,O,L)):!1}function $I(o){return ln(o)&&mr(o)==Et}function my(o,l,p,b){var O=p.length,L=O,q=!b;if(o==null)return!L;for(o=Q(o);O--;){var Z=p[O];if(q&&Z[2]?Z[1]!==o[Z[0]]:!(Z[0]in o))return!1}for(;++O<L;){Z=p[O];var se=Z[0],ye=o[se],we=Z[1];if(q&&Z[2]){if(ye===n&&!(se in o))return!1}else{var Se=new ha;if(b)var Ie=b(ye,we,se,o,l,Se);if(!(Ie===n?Vf(we,ye,_|E,b,Se):Ie))return!1}}return!0}function zS(o){if(!Zt(o)||d2(o))return!1;var l=So(o)?Pr:fo;return l.test(ju(o))}function RI(o){return ln(o)&&kr(o)==sn}function NI(o){return ln(o)&&mr(o)==_t}function TI(o){return ln(o)&&Xp(o.length)&&!!Pt[kr(o)]}function FS(o){return typeof o=="function"?o:o==null?Vr:typeof o=="object"?tt(o)?US(o[0],o[1]):WS(o):uE(o)}function vy(o){if(!Gf(o))return AM(o);var l=[];for(var p in Q(o))be.call(o,p)&&p!="constructor"&&l.push(p);return l}function MI(o){if(!Zt(o))return v2(o);var l=Gf(o),p=[];for(var b in o)b=="constructor"&&(l||!be.call(o,b))||p.push(b);return p}function gy(o,l){return o<l}function BS(o,l){var p=-1,b=qr(o)?R(o.length):[];return ls(o,function(O,L,q){b[++p]=l(O,L,q)}),b}function WS(o){var l=Ny(o);return l.length==1&&l[0][2]?Sx(l[0][0],l[0][1]):function(p){return p===o||my(p,o,l)}}function US(o,l){return My(o)&&bx(l)?Sx(Wa(o),l):function(p){var b=Hy(p,o);return b===n&&b===l?Ky(p,o):Vf(l,b,_|E)}}function Tp(o,l,p,b,O){o!==l&&fy(l,function(L,q){if(O||(O=new ha),Zt(L))II(o,l,q,p,Tp,b,O);else{var Z=b?b(Ay(o,q),L,q+"",o,l,O):n;Z===n&&(Z=L),ly(o,q,Z)}},Yr)}function II(o,l,p,b,O,L,q){var Z=Ay(o,p),se=Ay(l,p),ye=q.get(se);if(ye){ly(o,p,ye);return}var we=L?L(Z,se,p+"",o,l,q):n,Se=we===n;if(Se){var Ie=tt(se),Ue=!Ie&&hs(se),Xe=!Ie&&!Ue&&Gl(se);we=se,Ie||Ue||Xe?tt(Z)?we=Z:pn(Z)?we=Kr(Z):Ue?(Se=!1,we=tx(se,!0)):Xe?(Se=!1,we=nx(se,!0)):we=[]:Zf(se)||Lu(se)?(we=Z,Lu(Z)?we=Jx(Z):(!Zt(Z)||So(Z))&&(we=_x(se))):Se=!1}Se&&(q.set(se,we),O(we,se,b,L,q),q.delete(se)),ly(o,p,we)}function HS(o,l){var p=o.length;if(p)return l+=l<0?p:0,bo(l,p)?o[l]:n}function KS(o,l,p){l.length?l=jt(l,function(L){return tt(L)?function(q){return Iu(q,L.length===1?L[0]:L)}:L}):l=[Vr];var b=-1;l=jt(l,dr(Ve()));var O=BS(o,function(L,q,Z){var se=jt(l,function(ye){return ye(L)});return{criteria:se,index:++b,value:L}});return yp(O,function(L,q){return VI(L,q,p)})}function AI(o,l){return qS(o,l,function(p,b){return Ky(o,b)})}function qS(o,l,p){for(var b=-1,O=l.length,L={};++b<O;){var q=l[b],Z=Iu(o,q);p(Z,q)&&Xf(L,fs(q,o),Z)}return L}function jI(o){return function(l){return Iu(l,o)}}function yy(o,l,p,b){var O=b?Af:as,L=-1,q=l.length,Z=o;for(o===l&&(l=Kr(l)),p&&(Z=jt(o,dr(p)));++L<q;)for(var se=0,ye=l[L],we=p?p(ye):ye;(se=O(Z,we,se,b))>-1;)Z!==o&&xp.call(Z,se,1),xp.call(o,se,1);return o}function YS(o,l){for(var p=o?l.length:0,b=p-1;p--;){var O=l[p];if(p==b||O!==L){var L=O;bo(O)?xp.call(o,O,1):Sy(o,O)}}return o}function wy(o,l){return o+kp(CS()*(l-o+1))}function LI(o,l,p,b){for(var O=-1,L=Nn(Pp((l-o)/(p||1)),0),q=R(L);L--;)q[b?L:++O]=o,o+=p;return q}function _y(o,l){var p="";if(!o||l<1||l>oe)return p;do l%2&&(p+=o),l=kp(l/2),l&&(o+=o);while(l);return p}function ct(o,l){return jy(xx(o,l,Vr),o+"")}function zI(o){return $S(Jl(o))}function FI(o,l){var p=Jl(o);return Up(p,Mu(l,0,p.length))}function Xf(o,l,p,b){if(!Zt(o))return o;l=fs(l,o);for(var O=-1,L=l.length,q=L-1,Z=o;Z!=null&&++O<L;){var se=Wa(l[O]),ye=p;if(se==="__proto__"||se==="constructor"||se==="prototype")return o;if(O!=q){var we=Z[se];ye=b?b(we,se,Z):n,ye===n&&(ye=Zt(we)?we:bo(l[O+1])?[]:{})}Kf(Z,se,ye),Z=Z[se]}return o}var VS=Cp?function(o,l){return Cp.set(o,l),o}:Vr,BI=Ep?function(o,l){return Ep(o,"toString",{configurable:!0,enumerable:!1,value:Yy(l),writable:!0})}:Vr;function WI(o){return Up(Jl(o))}function Li(o,l,p){var b=-1,O=o.length;l<0&&(l=-l>O?0:O+l),p=p>O?O:p,p<0&&(p+=O),O=l>p?0:p-l>>>0,l>>>=0;for(var L=R(O);++b<O;)L[b]=o[b+l];return L}function UI(o,l){var p;return ls(o,function(b,O,L){return p=l(b,O,L),!p}),!!p}function Mp(o,l,p){var b=0,O=o==null?b:o.length;if(typeof l=="number"&&l===l&&O<=X){for(;b<O;){var L=b+O>>>1,q=o[L];q!==null&&!fi(q)&&(p?q<=l:q<l)?b=L+1:O=L}return O}return by(o,l,Vr,p)}function by(o,l,p,b){var O=0,L=o==null?0:o.length;if(L===0)return 0;l=p(l);for(var q=l!==l,Z=l===null,se=fi(l),ye=l===n;O<L;){var we=kp((O+L)/2),Se=p(o[we]),Ie=Se!==n,Ue=Se===null,Xe=Se===Se,st=fi(Se);if(q)var Qe=b||Xe;else ye?Qe=Xe&&(b||Ie):Z?Qe=Xe&&Ie&&(b||!Ue):se?Qe=Xe&&Ie&&!Ue&&(b||!st):Ue||st?Qe=!1:Qe=b?Se<=l:Se<l;Qe?O=we+1:L=we}return pr(L,ee)}function XS(o,l){for(var p=-1,b=o.length,O=0,L=[];++p<b;){var q=o[p],Z=l?l(q):q;if(!p||!pa(Z,se)){var se=Z;L[O++]=q===0?0:q}}return L}function QS(o){return typeof o=="number"?o:fi(o)?G:+o}function ci(o){if(typeof o=="string")return o;if(tt(o))return jt(o,ci)+"";if(fi(o))return DS?DS.call(o):"";var l=o+"";return l=="0"&&1/o==-We?"-0":l}function cs(o,l,p){var b=-1,O=xu,L=o.length,q=!0,Z=[],se=Z;if(p)q=!1,O=rs;else if(L>=i){var ye=l?null:e2(o);if(ye)return ss(ye);q=!1,O=os,se=new Tu}else se=l?[]:Z;e:for(;++b<L;){var we=o[b],Se=l?l(we):we;if(we=p||we!==0?we:0,q&&Se===Se){for(var Ie=se.length;Ie--;)if(se[Ie]===Se)continue e;l&&se.push(Se),Z.push(we)}else O(se,Se,p)||(se!==Z&&se.push(Se),Z.push(we))}return Z}function Sy(o,l){return l=fs(l,o),o=Ex(o,l),o==null||delete o[Wa(zi(l))]}function GS(o,l,p,b){return Xf(o,l,p(Iu(o,l)),b)}function Ip(o,l,p,b){for(var O=o.length,L=b?O:-1;(b?L--:++L<O)&&l(o[L],L,o););return p?Li(o,b?0:L,b?L+1:O):Li(o,b?L+1:0,b?O:L)}function JS(o,l){var p=o;return p instanceof gt&&(p=p.value()),is(l,function(b,O){return O.func.apply(O.thisArg,la([b],O.args))},p)}function xy(o,l,p){var b=o.length;if(b<2)return b?cs(o[0]):[];for(var O=-1,L=R(b);++O<b;)for(var q=o[O],Z=-1;++Z<b;)Z!=O&&(L[O]=qf(L[O]||q,o[Z],l,p));return cs(er(L,1),l,p)}function ZS(o,l,p){for(var b=-1,O=o.length,L=l.length,q={};++b<O;){var Z=b<L?l[b]:n;p(q,o[b],Z)}return q}function Ey(o){return pn(o)?o:[]}function Py(o){return typeof o=="function"?o:Vr}function fs(o,l){return tt(o)?o:My(o,l)?[o]:Dx(St(o))}var HI=ct;function ds(o,l,p){var b=o.length;return p=p===n?b:p,!l&&p>=b?o:Li(o,l,p)}var ex=RM||function(o){return Rn.clearTimeout(o)};function tx(o,l){if(l)return o.slice();var p=o.length,b=$u?$u(p):new o.constructor(p);return o.copy(b),b}function ky(o){var l=new o.constructor(o.byteLength);return new hn(l).set(new hn(o)),l}function KI(o,l){var p=l?ky(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.byteLength)}function qI(o){var l=new o.constructor(o.source,op.exec(o));return l.lastIndex=o.lastIndex,l}function YI(o){return Hf?Q(Hf.call(o)):{}}function nx(o,l){var p=l?ky(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.length)}function rx(o,l){if(o!==l){var p=o!==n,b=o===null,O=o===o,L=fi(o),q=l!==n,Z=l===null,se=l===l,ye=fi(l);if(!Z&&!ye&&!L&&o>l||L&&q&&se&&!Z&&!ye||b&&q&&se||!p&&se||!O)return 1;if(!b&&!L&&!ye&&o<l||ye&&p&&O&&!b&&!L||Z&&p&&O||!q&&O||!se)return-1}return 0}function VI(o,l,p){for(var b=-1,O=o.criteria,L=l.criteria,q=O.length,Z=p.length;++b<q;){var se=rx(O[b],L[b]);if(se){if(b>=Z)return se;var ye=p[b];return se*(ye=="desc"?-1:1)}}return o.index-l.index}function ix(o,l,p,b){for(var O=-1,L=o.length,q=p.length,Z=-1,se=l.length,ye=Nn(L-q,0),we=R(se+ye),Se=!b;++Z<se;)we[Z]=l[Z];for(;++O<q;)(Se||O<L)&&(we[p[O]]=o[O]);for(;ye--;)we[Z++]=o[O++];return we}function ax(o,l,p,b){for(var O=-1,L=o.length,q=-1,Z=p.length,se=-1,ye=l.length,we=Nn(L-Z,0),Se=R(we+ye),Ie=!b;++O<we;)Se[O]=o[O];for(var Ue=O;++se<ye;)Se[Ue+se]=l[se];for(;++q<Z;)(Ie||O<L)&&(Se[Ue+p[q]]=o[O++]);return Se}function Kr(o,l){var p=-1,b=o.length;for(l||(l=R(b));++p<b;)l[p]=o[p];return l}function Ba(o,l,p,b){var O=!p;p||(p={});for(var L=-1,q=l.length;++L<q;){var Z=l[L],se=b?b(p[Z],o[Z],Z,p,o):n;se===n&&(se=o[Z]),O?yo(p,Z,se):Kf(p,Z,se)}return p}function XI(o,l){return Ba(o,Ty(o),l)}function QI(o,l){return Ba(o,yx(o),l)}function Ap(o,l){return function(p,b){var O=tt(p)?Nf:yI,L=l?l():{};return O(p,o,Ve(b,2),L)}}function Vl(o){return ct(function(l,p){var b=-1,O=p.length,L=O>1?p[O-1]:n,q=O>2?p[2]:n;for(L=o.length>3&&typeof L=="function"?(O--,L):n,q&&Cr(p[0],p[1],q)&&(L=O<3?n:L,O=1),l=Q(l);++b<O;){var Z=p[b];Z&&o(l,Z,b,L)}return l})}function ox(o,l){return function(p,b){if(p==null)return p;if(!qr(p))return o(p,b);for(var O=p.length,L=l?O:-1,q=Q(p);(l?L--:++L<O)&&b(q[L],L,q)!==!1;);return p}}function sx(o){return function(l,p,b){for(var O=-1,L=Q(l),q=b(l),Z=q.length;Z--;){var se=q[o?Z:++O];if(p(L[se],se,L)===!1)break}return l}}function GI(o,l,p){var b=l&C,O=Qf(o);function L(){var q=this&&this!==Rn&&this instanceof L?O:o;return q.apply(b?p:this,arguments)}return L}function ux(o){return function(l){l=St(l);var p=da(l)?m(l):n,b=p?p[0]:l.charAt(0),O=p?ds(p,1).join(""):l.slice(1);return b[o]()+O}}function Xl(o){return function(l){return is(oE(aE(l).replace(kf,"")),o,"")}}function Qf(o){return function(){var l=arguments;switch(l.length){case 0:return new o;case 1:return new o(l[0]);case 2:return new o(l[0],l[1]);case 3:return new o(l[0],l[1],l[2]);case 4:return new o(l[0],l[1],l[2],l[3]);case 5:return new o(l[0],l[1],l[2],l[3],l[4]);case 6:return new o(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new o(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var p=Yl(o.prototype),b=o.apply(p,l);return Zt(b)?b:p}}function JI(o,l,p){var b=Qf(o);function O(){for(var L=arguments.length,q=R(L),Z=L,se=Ql(O);Z--;)q[Z]=arguments[Z];var ye=L<3&&q[0]!==se&&q[L-1]!==se?[]:hr(q,se);if(L-=ye.length,L<p)return hx(o,l,jp,O.placeholder,n,q,ye,n,n,p-L);var we=this&&this!==Rn&&this instanceof O?b:o;return Zn(we,this,q)}return O}function lx(o){return function(l,p,b){var O=Q(l);if(!qr(l)){var L=Ve(p,3);l=Bn(l),p=function(Z){return L(O[Z],Z,O)}}var q=o(l,p,b);return q>-1?O[L?l[q]:q]:n}}function cx(o){return _o(function(l){var p=l.length,b=p,O=Ai.prototype.thru;for(o&&l.reverse();b--;){var L=l[b];if(typeof L!="function")throw new le(s);if(O&&!q&&Bp(L)=="wrapper")var q=new Ai([],!0)}for(b=q?b:p;++b<p;){L=l[b];var Z=Bp(L),se=Z=="wrapper"?Ry(L):n;se&&Iy(se[0])&&se[1]==(W|P|T|re)&&!se[4].length&&se[9]==1?q=q[Bp(se[0])].apply(q,se[3]):q=L.length==1&&Iy(L)?q[Z]():q.thru(L)}return function(){var ye=arguments,we=ye[0];if(q&&ye.length==1&&tt(we))return q.plant(we).value();for(var Se=0,Ie=p?l[Se].apply(this,ye):we;++Se<p;)Ie=l[Se].call(this,Ie);return Ie}})}function jp(o,l,p,b,O,L,q,Z,se,ye){var we=l&W,Se=l&C,Ie=l&x,Ue=l&(P|M),Xe=l&he,st=Ie?n:Qf(o);function Qe(){for(var pt=arguments.length,yt=R(pt),di=pt;di--;)yt[di]=arguments[di];if(Ue)var Dr=Ql(Qe),hi=ry(yt,Dr);if(b&&(yt=ix(yt,b,O,Ue)),L&&(yt=ax(yt,L,q,Ue)),pt-=hi,Ue&&pt<ye){var mn=hr(yt,Dr);return hx(o,l,jp,Qe.placeholder,p,yt,mn,Z,se,ye-pt)}var ma=Se?p:this,Eo=Ie?ma[o]:o;return pt=yt.length,Z?yt=y2(yt,Z):Xe&&pt>1&&yt.reverse(),we&&se<pt&&(yt.length=se),this&&this!==Rn&&this instanceof Qe&&(Eo=st||Qf(Eo)),Eo.apply(ma,yt)}return Qe}function fx(o,l){return function(p,b){return kI(p,o,l(b),{})}}function Lp(o,l){return function(p,b){var O;if(p===n&&b===n)return l;if(p!==n&&(O=p),b!==n){if(O===n)return b;typeof p=="string"||typeof b=="string"?(p=ci(p),b=ci(b)):(p=QS(p),b=QS(b)),O=o(p,b)}return O}}function Cy(o){return _o(function(l){return l=jt(l,dr(Ve())),ct(function(p){var b=this;return o(l,function(O){return Zn(O,b,p)})})})}function zp(o,l){l=l===n?" ":ci(l);var p=l.length;if(p<2)return p?_y(l,o):l;var b=_y(l,Pp(o/f(l)));return da(l)?ds(m(b),0,o).join(""):b.slice(0,o)}function ZI(o,l,p,b){var O=l&C,L=Qf(o);function q(){for(var Z=-1,se=arguments.length,ye=-1,we=b.length,Se=R(we+se),Ie=this&&this!==Rn&&this instanceof q?L:o;++ye<we;)Se[ye]=b[ye];for(;se--;)Se[ye++]=arguments[++Z];return Zn(Ie,O?p:this,Se)}return q}function dx(o){return function(l,p,b){return b&&typeof b!="number"&&Cr(l,p,b)&&(p=b=n),l=xo(l),p===n?(p=l,l=0):p=xo(p),b=b===n?l<p?1:-1:xo(b),LI(l,p,b,o)}}function Fp(o){return function(l,p){return typeof l=="string"&&typeof p=="string"||(l=Fi(l),p=Fi(p)),o(l,p)}}function hx(o,l,p,b,O,L,q,Z,se,ye){var we=l&P,Se=we?q:n,Ie=we?n:q,Ue=we?L:n,Xe=we?n:L;l|=we?T:U,l&=~(we?U:T),l&S||(l&=~(C|x));var st=[o,l,O,Ue,Se,Xe,Ie,Z,se,ye],Qe=p.apply(n,st);return Iy(o)&&Px(Qe,st),Qe.placeholder=b,kx(Qe,o,l)}function Dy(o){var l=ie[o];return function(p,b){if(p=Fi(p),b=b==null?0:pr(nt(b),292),b&&kS(p)){var O=(St(p)+"e").split("e"),L=l(O[0]+"e"+(+O[1]+b));return O=(St(L)+"e").split("e"),+(O[0]+"e"+(+O[1]-b))}return l(p)}}var e2=Kl&&1/ss(new Kl([,-0]))[1]==We?function(o){return new Kl(o)}:Qy;function px(o){return function(l){var p=mr(l);return p==Et?Ou(l):p==_t?us(l):wp(l,o(l))}}function wo(o,l,p,b,O,L,q,Z){var se=l&x;if(!se&&typeof o!="function")throw new le(s);var ye=b?b.length:0;if(ye||(l&=~(T|U),b=O=n),q=q===n?q:Nn(nt(q),0),Z=Z===n?Z:nt(Z),ye-=O?O.length:0,l&U){var we=b,Se=O;b=O=n}var Ie=se?n:Ry(o),Ue=[o,l,p,b,O,we,Se,L,q,Z];if(Ie&&m2(Ue,Ie),o=Ue[0],l=Ue[1],p=Ue[2],b=Ue[3],O=Ue[4],Z=Ue[9]=Ue[9]===n?se?0:o.length:Nn(Ue[9]-ye,0),!Z&&l&(P|M)&&(l&=~(P|M)),!l||l==C)var Xe=GI(o,l,p);else l==P||l==M?Xe=JI(o,l,Z):(l==T||l==(C|T))&&!O.length?Xe=ZI(o,l,p,b):Xe=jp.apply(n,Ue);var st=Ie?VS:Px;return kx(st(Xe,Ue),o,l)}function mx(o,l,p,b){return o===n||pa(o,Oe[p])&&!be.call(b,p)?l:o}function vx(o,l,p,b,O,L){return Zt(o)&&Zt(l)&&(L.set(l,o),Tp(o,l,n,vx,L),L.delete(l)),o}function t2(o){return Zf(o)?n:o}function gx(o,l,p,b,O,L){var q=p&_,Z=o.length,se=l.length;if(Z!=se&&!(q&&se>Z))return!1;var ye=L.get(o),we=L.get(l);if(ye&&we)return ye==l&&we==o;var Se=-1,Ie=!0,Ue=p&E?new Tu:n;for(L.set(o,l),L.set(l,o);++Se<Z;){var Xe=o[Se],st=l[Se];if(b)var Qe=q?b(st,Xe,Se,l,o,L):b(Xe,st,Se,o,l,L);if(Qe!==n){if(Qe)continue;Ie=!1;break}if(Ue){if(!ca(l,function(pt,yt){if(!os(Ue,yt)&&(Xe===pt||O(Xe,pt,p,b,L)))return Ue.push(yt)})){Ie=!1;break}}else if(!(Xe===st||O(Xe,st,p,b,L))){Ie=!1;break}}return L.delete(o),L.delete(l),Ie}function n2(o,l,p,b,O,L,q){switch(p){case un:if(o.byteLength!=l.byteLength||o.byteOffset!=l.byteOffset)return!1;o=o.buffer,l=l.buffer;case Sn:return!(o.byteLength!=l.byteLength||!L(new hn(o),new hn(l)));case $e:case me:case At:return pa(+o,+l);case Ge:return o.name==l.name&&o.message==l.message;case sn:case Vn:return o==l+"";case Et:var Z=Ou;case _t:var se=b&_;if(Z||(Z=ss),o.size!=l.size&&!se)return!1;var ye=q.get(o);if(ye)return ye==l;b|=E,q.set(o,l);var we=gx(Z(o),Z(l),b,O,L,q);return q.delete(o),we;case Xn:if(Hf)return Hf.call(o)==Hf.call(l)}return!1}function r2(o,l,p,b,O,L){var q=p&_,Z=Oy(o),se=Z.length,ye=Oy(l),we=ye.length;if(se!=we&&!q)return!1;for(var Se=se;Se--;){var Ie=Z[Se];if(!(q?Ie in l:be.call(l,Ie)))return!1}var Ue=L.get(o),Xe=L.get(l);if(Ue&&Xe)return Ue==l&&Xe==o;var st=!0;L.set(o,l),L.set(l,o);for(var Qe=q;++Se<se;){Ie=Z[Se];var pt=o[Ie],yt=l[Ie];if(b)var di=q?b(yt,pt,Ie,l,o,L):b(pt,yt,Ie,o,l,L);if(!(di===n?pt===yt||O(pt,yt,p,b,L):di)){st=!1;break}Qe||(Qe=Ie=="constructor")}if(st&&!Qe){var Dr=o.constructor,hi=l.constructor;Dr!=hi&&"constructor"in o&&"constructor"in l&&!(typeof Dr=="function"&&Dr instanceof Dr&&typeof hi=="function"&&hi instanceof hi)&&(st=!1)}return L.delete(o),L.delete(l),st}function _o(o){return jy(xx(o,n,Nx),o+"")}function Oy(o){return jS(o,Bn,Ty)}function $y(o){return jS(o,Yr,yx)}var Ry=Cp?function(o){return Cp.get(o)}:Qy;function Bp(o){for(var l=o.name+"",p=ql[l],b=be.call(ql,l)?p.length:0;b--;){var O=p[b],L=O.func;if(L==null||L==o)return O.name}return l}function Ql(o){var l=be.call(A,"placeholder")?A:o;return l.placeholder}function Ve(){var o=A.iteratee||Vy;return o=o===Vy?FS:o,arguments.length?o(arguments[0],arguments[1]):o}function Wp(o,l){var p=o.__data__;return f2(l)?p[typeof l=="string"?"string":"hash"]:p.map}function Ny(o){for(var l=Bn(o),p=l.length;p--;){var b=l[p],O=o[b];l[p]=[b,O,bx(O)]}return l}function Au(o,l){var p=Jt(o,l);return zS(p)?p:n}function i2(o){var l=be.call(o,Ru),p=o[Ru];try{o[Ru]=n;var b=!0}catch{}var O=Ze.call(o);return b&&(l?o[Ru]=p:delete o[Ru]),O}var Ty=oy?function(o){return o==null?[]:(o=Q(o),Ur(oy(o),function(l){return Hl.call(o,l)}))}:Gy,yx=oy?function(o){for(var l=[];o;)la(l,Ty(o)),o=Pn(o);return l}:Gy,mr=kr;(sy&&mr(new sy(new ArrayBuffer(1)))!=un||Bf&&mr(new Bf)!=Et||uy&&mr(uy.resolve())!=sr||Kl&&mr(new Kl)!=_t||Wf&&mr(new Wf)!=Qn)&&(mr=function(o){var l=kr(o),p=l==on?o.constructor:n,b=p?ju(p):"";if(b)switch(b){case FM:return un;case BM:return Et;case WM:return sr;case UM:return _t;case HM:return Qn}return l});function a2(o,l,p){for(var b=-1,O=p.length;++b<O;){var L=p[b],q=L.size;switch(L.type){case"drop":o+=q;break;case"dropRight":l-=q;break;case"take":l=pr(l,o+q);break;case"takeRight":o=Nn(o,l-q);break}}return{start:o,end:l}}function o2(o){var l=o.match(Er);return l?l[1].split(co):[]}function wx(o,l,p){l=fs(l,o);for(var b=-1,O=l.length,L=!1;++b<O;){var q=Wa(l[b]);if(!(L=o!=null&&p(o,q)))break;o=o[q]}return L||++b!=O?L:(O=o==null?0:o.length,!!O&&Xp(O)&&bo(q,O)&&(tt(o)||Lu(o)))}function s2(o){var l=o.length,p=new o.constructor(l);return l&&typeof o[0]=="string"&&be.call(o,"index")&&(p.index=o.index,p.input=o.input),p}function _x(o){return typeof o.constructor=="function"&&!Gf(o)?Yl(Pn(o)):{}}function u2(o,l,p){var b=o.constructor;switch(l){case Sn:return ky(o);case $e:case me:return new b(+o);case un:return KI(o,p);case ur:case si:case xn:case ia:case uo:case Br:case Fe:case Oi:case ui:return nx(o,p);case Et:return new b;case At:case Vn:return new b(o);case sn:return qI(o);case _t:return new b;case Xn:return YI(o)}}function l2(o,l){var p=l.length;if(!p)return o;var b=p-1;return l[b]=(p>1?"& ":"")+l[b],l=l.join(p>2?", ":" "),o.replace(Ti,`{
/* [wrapped with `+l+`] */
`)}function c2(o){return tt(o)||Lu(o)||!!(PS&&o&&o[PS])}function bo(o,l){var p=typeof o;return l=l??oe,!!l&&(p=="number"||p!="symbol"&&wf.test(o))&&o>-1&&o%1==0&&o<l}function Cr(o,l,p){if(!Zt(p))return!1;var b=typeof l;return(b=="number"?qr(p)&&bo(l,p.length):b=="string"&&l in p)?pa(p[l],o):!1}function My(o,l){if(tt(o))return!1;var p=typeof o;return p=="number"||p=="symbol"||p=="boolean"||o==null||fi(o)?!0:Ri.test(o)||!$n.test(o)||l!=null&&o in Q(l)}function f2(o){var l=typeof o;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?o!=="__proto__":o===null}function Iy(o){var l=Bp(o),p=A[l];if(typeof p!="function"||!(l in gt.prototype))return!1;if(o===p)return!0;var b=Ry(p);return!!b&&o===b[0]}function d2(o){return!!Ae&&Ae in o}var h2=Ee?So:Jy;function Gf(o){var l=o&&o.constructor,p=typeof l=="function"&&l.prototype||Oe;return o===p}function bx(o){return o===o&&!Zt(o)}function Sx(o,l){return function(p){return p==null?!1:p[o]===l&&(l!==n||o in Q(p))}}function p2(o){var l=Yp(o,function(b){return p.size===d&&p.clear(),b}),p=l.cache;return l}function m2(o,l){var p=o[1],b=l[1],O=p|b,L=O<(C|x|W),q=b==W&&p==P||b==W&&p==re&&o[7].length<=l[8]||b==(W|re)&&l[7].length<=l[8]&&p==P;if(!(L||q))return o;b&C&&(o[2]=l[2],O|=p&C?0:S);var Z=l[3];if(Z){var se=o[3];o[3]=se?ix(se,Z,l[4]):Z,o[4]=se?hr(o[3],h):l[4]}return Z=l[5],Z&&(se=o[5],o[5]=se?ax(se,Z,l[6]):Z,o[6]=se?hr(o[5],h):l[6]),Z=l[7],Z&&(o[7]=Z),b&W&&(o[8]=o[8]==null?l[8]:pr(o[8],l[8])),o[9]==null&&(o[9]=l[9]),o[0]=l[0],o[1]=O,o}function v2(o){var l=[];if(o!=null)for(var p in Q(o))l.push(p);return l}function g2(o){return Ze.call(o)}function xx(o,l,p){return l=Nn(l===n?o.length-1:l,0),function(){for(var b=arguments,O=-1,L=Nn(b.length-l,0),q=R(L);++O<L;)q[O]=b[l+O];O=-1;for(var Z=R(l+1);++O<l;)Z[O]=b[O];return Z[l]=p(q),Zn(o,this,Z)}}function Ex(o,l){return l.length<2?o:Iu(o,Li(l,0,-1))}function y2(o,l){for(var p=o.length,b=pr(l.length,p),O=Kr(o);b--;){var L=l[b];o[b]=bo(L,p)?O[L]:n}return o}function Ay(o,l){if(!(l==="constructor"&&typeof o[l]=="function")&&l!="__proto__")return o[l]}var Px=Cx(VS),Jf=TM||function(o,l){return Rn.setTimeout(o,l)},jy=Cx(BI);function kx(o,l,p){var b=l+"";return jy(o,l2(b,w2(o2(b),p)))}function Cx(o){var l=0,p=0;return function(){var b=jM(),O=xe-(b-p);if(p=b,O>0){if(++l>=pe)return arguments[0]}else l=0;return o.apply(n,arguments)}}function Up(o,l){var p=-1,b=o.length,O=b-1;for(l=l===n?b:l;++p<l;){var L=wy(p,O),q=o[L];o[L]=o[p],o[p]=q}return o.length=l,o}var Dx=p2(function(o){var l=[];return o.charCodeAt(0)===46&&l.push(""),o.replace(qt,function(p,b,O,L){l.push(O?L.replace(Ma,"$1"):b||p)}),l});function Wa(o){if(typeof o=="string"||fi(o))return o;var l=o+"";return l=="0"&&1/o==-We?"-0":l}function ju(o){if(o!=null){try{return De.call(o)}catch{}try{return o+""}catch{}}return""}function w2(o,l){return fr(I,function(p){var b="_."+p[0];l&p[1]&&!xu(o,b)&&o.push(b)}),o.sort()}function Ox(o){if(o instanceof gt)return o.clone();var l=new Ai(o.__wrapped__,o.__chain__);return l.__actions__=Kr(o.__actions__),l.__index__=o.__index__,l.__values__=o.__values__,l}function _2(o,l,p){(p?Cr(o,l,p):l===n)?l=1:l=Nn(nt(l),0);var b=o==null?0:o.length;if(!b||l<1)return[];for(var O=0,L=0,q=R(Pp(b/l));O<b;)q[L++]=Li(o,O,O+=l);return q}function b2(o){for(var l=-1,p=o==null?0:o.length,b=0,O=[];++l<p;){var L=o[l];L&&(O[b++]=L)}return O}function S2(){var o=arguments.length;if(!o)return[];for(var l=R(o-1),p=arguments[0],b=o;b--;)l[b-1]=arguments[b];return la(tt(p)?Kr(p):[p],er(l,1))}var x2=ct(function(o,l){return pn(o)?qf(o,er(l,1,pn,!0)):[]}),E2=ct(function(o,l){var p=zi(l);return pn(p)&&(p=n),pn(o)?qf(o,er(l,1,pn,!0),Ve(p,2)):[]}),P2=ct(function(o,l){var p=zi(l);return pn(p)&&(p=n),pn(o)?qf(o,er(l,1,pn,!0),n,p):[]});function k2(o,l,p){var b=o==null?0:o.length;return b?(l=p||l===n?1:nt(l),Li(o,l<0?0:l,b)):[]}function C2(o,l,p){var b=o==null?0:o.length;return b?(l=p||l===n?1:nt(l),l=b-l,Li(o,0,l<0?0:l)):[]}function D2(o,l){return o&&o.length?Ip(o,Ve(l,3),!0,!0):[]}function O2(o,l){return o&&o.length?Ip(o,Ve(l,3),!0):[]}function $2(o,l,p,b){var O=o==null?0:o.length;return O?(p&&typeof p!="number"&&Cr(o,l,p)&&(p=0,b=O),SI(o,l,p,b)):[]}function $x(o,l,p){var b=o==null?0:o.length;if(!b)return-1;var O=p==null?0:nt(p);return O<0&&(O=Nn(b+O,0)),Eu(o,Ve(l,3),O)}function Rx(o,l,p){var b=o==null?0:o.length;if(!b)return-1;var O=b-1;return p!==n&&(O=nt(p),O=p<0?Nn(b+O,0):pr(O,b-1)),Eu(o,Ve(l,3),O,!0)}function Nx(o){var l=o==null?0:o.length;return l?er(o,1):[]}function R2(o){var l=o==null?0:o.length;return l?er(o,We):[]}function N2(o,l){var p=o==null?0:o.length;return p?(l=l===n?1:nt(l),er(o,l)):[]}function T2(o){for(var l=-1,p=o==null?0:o.length,b={};++l<p;){var O=o[l];b[O[0]]=O[1]}return b}function Tx(o){return o&&o.length?o[0]:n}function M2(o,l,p){var b=o==null?0:o.length;if(!b)return-1;var O=p==null?0:nt(p);return O<0&&(O=Nn(b+O,0)),as(o,l,O)}function I2(o){var l=o==null?0:o.length;return l?Li(o,0,-1):[]}var A2=ct(function(o){var l=jt(o,Ey);return l.length&&l[0]===o[0]?py(l):[]}),j2=ct(function(o){var l=zi(o),p=jt(o,Ey);return l===zi(p)?l=n:p.pop(),p.length&&p[0]===o[0]?py(p,Ve(l,2)):[]}),L2=ct(function(o){var l=zi(o),p=jt(o,Ey);return l=typeof l=="function"?l:n,l&&p.pop(),p.length&&p[0]===o[0]?py(p,n,l):[]});function z2(o,l){return o==null?"":IM.call(o,l)}function zi(o){var l=o==null?0:o.length;return l?o[l-1]:n}function F2(o,l,p){var b=o==null?0:o.length;if(!b)return-1;var O=b;return p!==n&&(O=nt(p),O=O<0?Nn(b+O,0):pr(O,b-1)),l===l?Sp(o,l,O):Eu(o,Pu,O,!0)}function B2(o,l){return o&&o.length?HS(o,nt(l)):n}var W2=ct(Mx);function Mx(o,l){return o&&o.length&&l&&l.length?yy(o,l):o}function U2(o,l,p){return o&&o.length&&l&&l.length?yy(o,l,Ve(p,2)):o}function H2(o,l,p){return o&&o.length&&l&&l.length?yy(o,l,n,p):o}var K2=_o(function(o,l){var p=o==null?0:o.length,b=cy(o,l);return YS(o,jt(l,function(O){return bo(O,p)?+O:O}).sort(rx)),b});function q2(o,l){var p=[];if(!(o&&o.length))return p;var b=-1,O=[],L=o.length;for(l=Ve(l,3);++b<L;){var q=o[b];l(q,b,o)&&(p.push(q),O.push(b))}return YS(o,O),p}function Ly(o){return o==null?o:zM.call(o)}function Y2(o,l,p){var b=o==null?0:o.length;return b?(p&&typeof p!="number"&&Cr(o,l,p)?(l=0,p=b):(l=l==null?0:nt(l),p=p===n?b:nt(p)),Li(o,l,p)):[]}function V2(o,l){return Mp(o,l)}function X2(o,l,p){return by(o,l,Ve(p,2))}function Q2(o,l){var p=o==null?0:o.length;if(p){var b=Mp(o,l);if(b<p&&pa(o[b],l))return b}return-1}function G2(o,l){return Mp(o,l,!0)}function J2(o,l,p){return by(o,l,Ve(p,2),!0)}function Z2(o,l){var p=o==null?0:o.length;if(p){var b=Mp(o,l,!0)-1;if(pa(o[b],l))return b}return-1}function eA(o){return o&&o.length?XS(o):[]}function tA(o,l){return o&&o.length?XS(o,Ve(l,2)):[]}function nA(o){var l=o==null?0:o.length;return l?Li(o,1,l):[]}function rA(o,l,p){return o&&o.length?(l=p||l===n?1:nt(l),Li(o,0,l<0?0:l)):[]}function iA(o,l,p){var b=o==null?0:o.length;return b?(l=p||l===n?1:nt(l),l=b-l,Li(o,l<0?0:l,b)):[]}function aA(o,l){return o&&o.length?Ip(o,Ve(l,3),!1,!0):[]}function oA(o,l){return o&&o.length?Ip(o,Ve(l,3)):[]}var sA=ct(function(o){return cs(er(o,1,pn,!0))}),uA=ct(function(o){var l=zi(o);return pn(l)&&(l=n),cs(er(o,1,pn,!0),Ve(l,2))}),lA=ct(function(o){var l=zi(o);return l=typeof l=="function"?l:n,cs(er(o,1,pn,!0),n,l)});function cA(o){return o&&o.length?cs(o):[]}function fA(o,l){return o&&o.length?cs(o,Ve(l,2)):[]}function dA(o,l){return l=typeof l=="function"?l:n,o&&o.length?cs(o,n,l):[]}function zy(o){if(!(o&&o.length))return[];var l=0;return o=Ur(o,function(p){if(pn(p))return l=Nn(p.length,l),!0}),Wl(l,function(p){return jt(o,ku(p))})}function Ix(o,l){if(!(o&&o.length))return[];var p=zy(o);return l==null?p:jt(p,function(b){return Zn(l,n,b)})}var hA=ct(function(o,l){return pn(o)?qf(o,l):[]}),pA=ct(function(o){return xy(Ur(o,pn))}),mA=ct(function(o){var l=zi(o);return pn(l)&&(l=n),xy(Ur(o,pn),Ve(l,2))}),vA=ct(function(o){var l=zi(o);return l=typeof l=="function"?l:n,xy(Ur(o,pn),n,l)}),gA=ct(zy);function yA(o,l){return ZS(o||[],l||[],Kf)}function wA(o,l){return ZS(o||[],l||[],Xf)}var _A=ct(function(o){var l=o.length,p=l>1?o[l-1]:n;return p=typeof p=="function"?(o.pop(),p):n,Ix(o,p)});function Ax(o){var l=A(o);return l.__chain__=!0,l}function bA(o,l){return l(o),o}function Hp(o,l){return l(o)}var SA=_o(function(o){var l=o.length,p=l?o[0]:0,b=this.__wrapped__,O=function(L){return cy(L,o)};return l>1||this.__actions__.length||!(b instanceof gt)||!bo(p)?this.thru(O):(b=b.slice(p,+p+(l?1:0)),b.__actions__.push({func:Hp,args:[O],thisArg:n}),new Ai(b,this.__chain__).thru(function(L){return l&&!L.length&&L.push(n),L}))});function xA(){return Ax(this)}function EA(){return new Ai(this.value(),this.__chain__)}function PA(){this.__values__===n&&(this.__values__=Qx(this.value()));var o=this.__index__>=this.__values__.length,l=o?n:this.__values__[this.__index__++];return{done:o,value:l}}function kA(){return this}function CA(o){for(var l,p=this;p instanceof Op;){var b=Ox(p);b.__index__=0,b.__values__=n,l?O.__wrapped__=b:l=b;var O=b;p=p.__wrapped__}return O.__wrapped__=o,l}function DA(){var o=this.__wrapped__;if(o instanceof gt){var l=o;return this.__actions__.length&&(l=new gt(this)),l=l.reverse(),l.__actions__.push({func:Hp,args:[Ly],thisArg:n}),new Ai(l,this.__chain__)}return this.thru(Ly)}function OA(){return JS(this.__wrapped__,this.__actions__)}var $A=Ap(function(o,l,p){be.call(o,p)?++o[p]:yo(o,p,1)});function RA(o,l,p){var b=tt(o)?ns:bI;return p&&Cr(o,l,p)&&(l=n),b(o,Ve(l,3))}function NA(o,l){var p=tt(o)?Ur:IS;return p(o,Ve(l,3))}var TA=lx($x),MA=lx(Rx);function IA(o,l){return er(Kp(o,l),1)}function AA(o,l){return er(Kp(o,l),We)}function jA(o,l,p){return p=p===n?1:nt(p),er(Kp(o,l),p)}function jx(o,l){var p=tt(o)?fr:ls;return p(o,Ve(l,3))}function Lx(o,l){var p=tt(o)?Fn:MS;return p(o,Ve(l,3))}var LA=Ap(function(o,l,p){be.call(o,p)?o[p].push(l):yo(o,p,[l])});function zA(o,l,p,b){o=qr(o)?o:Jl(o),p=p&&!b?nt(p):0;var O=o.length;return p<0&&(p=Nn(O+p,0)),Qp(o)?p<=O&&o.indexOf(l,p)>-1:!!O&&as(o,l,p)>-1}var FA=ct(function(o,l,p){var b=-1,O=typeof l=="function",L=qr(o)?R(o.length):[];return ls(o,function(q){L[++b]=O?Zn(l,q,p):Yf(q,l,p)}),L}),BA=Ap(function(o,l,p){yo(o,p,l)});function Kp(o,l){var p=tt(o)?jt:BS;return p(o,Ve(l,3))}function WA(o,l,p,b){return o==null?[]:(tt(l)||(l=l==null?[]:[l]),p=b?n:p,tt(p)||(p=p==null?[]:[p]),KS(o,l,p))}var UA=Ap(function(o,l,p){o[p?0:1].push(l)},function(){return[[],[]]});function HA(o,l,p){var b=tt(o)?is:gp,O=arguments.length<3;return b(o,Ve(l,4),p,O,ls)}function KA(o,l,p){var b=tt(o)?Tf:gp,O=arguments.length<3;return b(o,Ve(l,4),p,O,MS)}function qA(o,l){var p=tt(o)?Ur:IS;return p(o,Vp(Ve(l,3)))}function YA(o){var l=tt(o)?$S:zI;return l(o)}function VA(o,l,p){(p?Cr(o,l,p):l===n)?l=1:l=nt(l);var b=tt(o)?vI:FI;return b(o,l)}function XA(o){var l=tt(o)?gI:WI;return l(o)}function QA(o){if(o==null)return 0;if(qr(o))return Qp(o)?f(o):o.length;var l=mr(o);return l==Et||l==_t?o.size:vy(o).length}function GA(o,l,p){var b=tt(o)?ca:UI;return p&&Cr(o,l,p)&&(l=n),b(o,Ve(l,3))}var JA=ct(function(o,l){if(o==null)return[];var p=l.length;return p>1&&Cr(o,l[0],l[1])?l=[]:p>2&&Cr(l[0],l[1],l[2])&&(l=[l[0]]),KS(o,er(l,1),[])}),qp=NM||function(){return Rn.Date.now()};function ZA(o,l){if(typeof l!="function")throw new le(s);return o=nt(o),function(){if(--o<1)return l.apply(this,arguments)}}function zx(o,l,p){return l=p?n:l,l=o&&l==null?o.length:l,wo(o,W,n,n,n,n,l)}function Fx(o,l){var p;if(typeof l!="function")throw new le(s);return o=nt(o),function(){return--o>0&&(p=l.apply(this,arguments)),o<=1&&(l=n),p}}var Fy=ct(function(o,l,p){var b=C;if(p.length){var O=hr(p,Ql(Fy));b|=T}return wo(o,b,l,p,O)}),Bx=ct(function(o,l,p){var b=C|x;if(p.length){var O=hr(p,Ql(Bx));b|=T}return wo(l,b,o,p,O)});function Wx(o,l,p){l=p?n:l;var b=wo(o,P,n,n,n,n,n,l);return b.placeholder=Wx.placeholder,b}function Ux(o,l,p){l=p?n:l;var b=wo(o,M,n,n,n,n,n,l);return b.placeholder=Ux.placeholder,b}function Hx(o,l,p){var b,O,L,q,Z,se,ye=0,we=!1,Se=!1,Ie=!0;if(typeof o!="function")throw new le(s);l=Fi(l)||0,Zt(p)&&(we=!!p.leading,Se="maxWait"in p,L=Se?Nn(Fi(p.maxWait)||0,l):L,Ie="trailing"in p?!!p.trailing:Ie);function Ue(mn){var ma=b,Eo=O;return b=O=n,ye=mn,q=o.apply(Eo,ma),q}function Xe(mn){return ye=mn,Z=Jf(pt,l),we?Ue(mn):q}function st(mn){var ma=mn-se,Eo=mn-ye,lE=l-ma;return Se?pr(lE,L-Eo):lE}function Qe(mn){var ma=mn-se,Eo=mn-ye;return se===n||ma>=l||ma<0||Se&&Eo>=L}function pt(){var mn=qp();if(Qe(mn))return yt(mn);Z=Jf(pt,st(mn))}function yt(mn){return Z=n,Ie&&b?Ue(mn):(b=O=n,q)}function di(){Z!==n&&ex(Z),ye=0,b=se=O=Z=n}function Dr(){return Z===n?q:yt(qp())}function hi(){var mn=qp(),ma=Qe(mn);if(b=arguments,O=this,se=mn,ma){if(Z===n)return Xe(se);if(Se)return ex(Z),Z=Jf(pt,l),Ue(se)}return Z===n&&(Z=Jf(pt,l)),q}return hi.cancel=di,hi.flush=Dr,hi}var ej=ct(function(o,l){return TS(o,1,l)}),tj=ct(function(o,l,p){return TS(o,Fi(l)||0,p)});function nj(o){return wo(o,he)}function Yp(o,l){if(typeof o!="function"||l!=null&&typeof l!="function")throw new le(s);var p=function(){var b=arguments,O=l?l.apply(this,b):b[0],L=p.cache;if(L.has(O))return L.get(O);var q=o.apply(this,b);return p.cache=L.set(O,q)||L,q};return p.cache=new(Yp.Cache||go),p}Yp.Cache=go;function Vp(o){if(typeof o!="function")throw new le(s);return function(){var l=arguments;switch(l.length){case 0:return!o.call(this);case 1:return!o.call(this,l[0]);case 2:return!o.call(this,l[0],l[1]);case 3:return!o.call(this,l[0],l[1],l[2])}return!o.apply(this,l)}}function rj(o){return Fx(2,o)}var ij=HI(function(o,l){l=l.length==1&&tt(l[0])?jt(l[0],dr(Ve())):jt(er(l,1),dr(Ve()));var p=l.length;return ct(function(b){for(var O=-1,L=pr(b.length,p);++O<L;)b[O]=l[O].call(this,b[O]);return Zn(o,this,b)})}),By=ct(function(o,l){var p=hr(l,Ql(By));return wo(o,T,n,l,p)}),Kx=ct(function(o,l){var p=hr(l,Ql(Kx));return wo(o,U,n,l,p)}),aj=_o(function(o,l){return wo(o,re,n,n,n,l)});function oj(o,l){if(typeof o!="function")throw new le(s);return l=l===n?l:nt(l),ct(o,l)}function sj(o,l){if(typeof o!="function")throw new le(s);return l=l==null?0:Nn(nt(l),0),ct(function(p){var b=p[l],O=ds(p,0,l);return b&&la(O,b),Zn(o,this,O)})}function uj(o,l,p){var b=!0,O=!0;if(typeof o!="function")throw new le(s);return Zt(p)&&(b="leading"in p?!!p.leading:b,O="trailing"in p?!!p.trailing:O),Hx(o,l,{leading:b,maxWait:l,trailing:O})}function lj(o){return zx(o,1)}function cj(o,l){return By(Py(l),o)}function fj(){if(!arguments.length)return[];var o=arguments[0];return tt(o)?o:[o]}function dj(o){return ji(o,w)}function hj(o,l){return l=typeof l=="function"?l:n,ji(o,w,l)}function pj(o){return ji(o,v|w)}function mj(o,l){return l=typeof l=="function"?l:n,ji(o,v|w,l)}function vj(o,l){return l==null||NS(o,l,Bn(l))}function pa(o,l){return o===l||o!==o&&l!==l}var gj=Fp(hy),yj=Fp(function(o,l){return o>=l}),Lu=LS(function(){return arguments}())?LS:function(o){return ln(o)&&be.call(o,"callee")&&!Hl.call(o,"callee")},tt=R.isArray,wj=_u?dr(_u):CI;function qr(o){return o!=null&&Xp(o.length)&&!So(o)}function pn(o){return ln(o)&&qr(o)}function _j(o){return o===!0||o===!1||ln(o)&&kr(o)==$e}var hs=MM||Jy,bj=bu?dr(bu):DI;function Sj(o){return ln(o)&&o.nodeType===1&&!Zf(o)}function xj(o){if(o==null)return!0;if(qr(o)&&(tt(o)||typeof o=="string"||typeof o.splice=="function"||hs(o)||Gl(o)||Lu(o)))return!o.length;var l=mr(o);if(l==Et||l==_t)return!o.size;if(Gf(o))return!vy(o).length;for(var p in o)if(be.call(o,p))return!1;return!0}function Ej(o,l){return Vf(o,l)}function Pj(o,l,p){p=typeof p=="function"?p:n;var b=p?p(o,l):n;return b===n?Vf(o,l,n,p):!!b}function Wy(o){if(!ln(o))return!1;var l=kr(o);return l==Ge||l==Me||typeof o.message=="string"&&typeof o.name=="string"&&!Zf(o)}function kj(o){return typeof o=="number"&&kS(o)}function So(o){if(!Zt(o))return!1;var l=kr(o);return l==Ke||l==an||l==ge||l==Yn}function qx(o){return typeof o=="number"&&o==nt(o)}function Xp(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=oe}function Zt(o){var l=typeof o;return o!=null&&(l=="object"||l=="function")}function ln(o){return o!=null&&typeof o=="object"}var Yx=Rf?dr(Rf):$I;function Cj(o,l){return o===l||my(o,l,Ny(l))}function Dj(o,l,p){return p=typeof p=="function"?p:n,my(o,l,Ny(l),p)}function Oj(o){return Vx(o)&&o!=+o}function $j(o){if(h2(o))throw new K(a);return zS(o)}function Rj(o){return o===null}function Nj(o){return o==null}function Vx(o){return typeof o=="number"||ln(o)&&kr(o)==At}function Zf(o){if(!ln(o)||kr(o)!=on)return!1;var l=Pn(o);if(l===null)return!0;var p=be.call(l,"constructor")&&l.constructor;return typeof p=="function"&&p instanceof p&&De.call(p)==at}var Uy=mp?dr(mp):RI;function Tj(o){return qx(o)&&o>=-oe&&o<=oe}var Xx=Su?dr(Su):NI;function Qp(o){return typeof o=="string"||!tt(o)&&ln(o)&&kr(o)==Vn}function fi(o){return typeof o=="symbol"||ln(o)&&kr(o)==Xn}var Gl=zl?dr(zl):TI;function Mj(o){return o===n}function Ij(o){return ln(o)&&mr(o)==Qn}function Aj(o){return ln(o)&&kr(o)==Gn}var jj=Fp(gy),Lj=Fp(function(o,l){return o<=l});function Qx(o){if(!o)return[];if(qr(o))return Qp(o)?m(o):Kr(o);if(Ff&&o[Ff])return ay(o[Ff]());var l=mr(o),p=l==Et?Ou:l==_t?ss:Jl;return p(o)}function xo(o){if(!o)return o===0?o:0;if(o=Fi(o),o===We||o===-We){var l=o<0?-1:1;return l*_e}return o===o?o:0}function nt(o){var l=xo(o),p=l%1;return l===l?p?l-p:l:0}function Gx(o){return o?Mu(nt(o),0,F):0}function Fi(o){if(typeof o=="number")return o;if(fi(o))return G;if(Zt(o)){var l=typeof o.valueOf=="function"?o.valueOf():o;o=Zt(l)?l+"":l}if(typeof o!="string")return o===0?o:+o;o=_p(o);var p=sp.test(o);return p||up.test(o)?Il(o.slice(2),p?2:8):Ia.test(o)?G:+o}function Jx(o){return Ba(o,Yr(o))}function zj(o){return o?Mu(nt(o),-oe,oe):o===0?o:0}function St(o){return o==null?"":ci(o)}var Fj=Vl(function(o,l){if(Gf(l)||qr(l)){Ba(l,Bn(l),o);return}for(var p in l)be.call(l,p)&&Kf(o,p,l[p])}),Zx=Vl(function(o,l){Ba(l,Yr(l),o)}),Gp=Vl(function(o,l,p,b){Ba(l,Yr(l),o,b)}),Bj=Vl(function(o,l,p,b){Ba(l,Bn(l),o,b)}),Wj=_o(cy);function Uj(o,l){var p=Yl(o);return l==null?p:RS(p,l)}var Hj=ct(function(o,l){o=Q(o);var p=-1,b=l.length,O=b>2?l[2]:n;for(O&&Cr(l[0],l[1],O)&&(b=1);++p<b;)for(var L=l[p],q=Yr(L),Z=-1,se=q.length;++Z<se;){var ye=q[Z],we=o[ye];(we===n||pa(we,Oe[ye])&&!be.call(o,ye))&&(o[ye]=L[ye])}return o}),Kj=ct(function(o){return o.push(n,vx),Zn(eE,n,o)});function qj(o,l){return Bl(o,Ve(l,3),Fa)}function Yj(o,l){return Bl(o,Ve(l,3),dy)}function Vj(o,l){return o==null?o:fy(o,Ve(l,3),Yr)}function Xj(o,l){return o==null?o:AS(o,Ve(l,3),Yr)}function Qj(o,l){return o&&Fa(o,Ve(l,3))}function Gj(o,l){return o&&dy(o,Ve(l,3))}function Jj(o){return o==null?[]:Np(o,Bn(o))}function Zj(o){return o==null?[]:Np(o,Yr(o))}function Hy(o,l,p){var b=o==null?n:Iu(o,l);return b===n?p:b}function eL(o,l){return o!=null&&wx(o,l,xI)}function Ky(o,l){return o!=null&&wx(o,l,EI)}var tL=fx(function(o,l,p){l!=null&&typeof l.toString!="function"&&(l=Ze.call(l)),o[l]=p},Yy(Vr)),nL=fx(function(o,l,p){l!=null&&typeof l.toString!="function"&&(l=Ze.call(l)),be.call(o,l)?o[l].push(p):o[l]=[p]},Ve),rL=ct(Yf);function Bn(o){return qr(o)?OS(o):vy(o)}function Yr(o){return qr(o)?OS(o,!0):MI(o)}function iL(o,l){var p={};return l=Ve(l,3),Fa(o,function(b,O,L){yo(p,l(b,O,L),b)}),p}function aL(o,l){var p={};return l=Ve(l,3),Fa(o,function(b,O,L){yo(p,O,l(b,O,L))}),p}var oL=Vl(function(o,l,p){Tp(o,l,p)}),eE=Vl(function(o,l,p,b){Tp(o,l,p,b)}),sL=_o(function(o,l){var p={};if(o==null)return p;var b=!1;l=jt(l,function(L){return L=fs(L,o),b||(b=L.length>1),L}),Ba(o,$y(o),p),b&&(p=ji(p,v|g|w,t2));for(var O=l.length;O--;)Sy(p,l[O]);return p});function uL(o,l){return tE(o,Vp(Ve(l)))}var lL=_o(function(o,l){return o==null?{}:AI(o,l)});function tE(o,l){if(o==null)return{};var p=jt($y(o),function(b){return[b]});return l=Ve(l),qS(o,p,function(b,O){return l(b,O[0])})}function cL(o,l,p){l=fs(l,o);var b=-1,O=l.length;for(O||(O=1,o=n);++b<O;){var L=o==null?n:o[Wa(l[b])];L===n&&(b=O,L=p),o=So(L)?L.call(o):L}return o}function fL(o,l,p){return o==null?o:Xf(o,l,p)}function dL(o,l,p,b){return b=typeof b=="function"?b:n,o==null?o:Xf(o,l,p,b)}var nE=px(Bn),rE=px(Yr);function hL(o,l,p){var b=tt(o),O=b||hs(o)||Gl(o);if(l=Ve(l,4),p==null){var L=o&&o.constructor;O?p=b?new L:[]:Zt(o)?p=So(L)?Yl(Pn(o)):{}:p={}}return(O?fr:Fa)(o,function(q,Z,se){return l(p,q,Z,se)}),p}function pL(o,l){return o==null?!0:Sy(o,l)}function mL(o,l,p){return o==null?o:GS(o,l,Py(p))}function vL(o,l,p,b){return b=typeof b=="function"?b:n,o==null?o:GS(o,l,Py(p),b)}function Jl(o){return o==null?[]:Du(o,Bn(o))}function gL(o){return o==null?[]:Du(o,Yr(o))}function yL(o,l,p){return p===n&&(p=l,l=n),p!==n&&(p=Fi(p),p=p===p?p:0),l!==n&&(l=Fi(l),l=l===l?l:0),Mu(Fi(o),l,p)}function wL(o,l,p){return l=xo(l),p===n?(p=l,l=0):p=xo(p),o=Fi(o),PI(o,l,p)}function _L(o,l,p){if(p&&typeof p!="boolean"&&Cr(o,l,p)&&(l=p=n),p===n&&(typeof l=="boolean"?(p=l,l=n):typeof o=="boolean"&&(p=o,o=n)),o===n&&l===n?(o=0,l=1):(o=xo(o),l===n?(l=o,o=0):l=xo(l)),o>l){var b=o;o=l,l=b}if(p||o%1||l%1){var O=CS();return pr(o+O*(l-o+Ml("1e-"+((O+"").length-1))),l)}return wy(o,l)}var bL=Xl(function(o,l,p){return l=l.toLowerCase(),o+(p?iE(l):l)});function iE(o){return qy(St(o).toLowerCase())}function aE(o){return o=St(o),o&&o.replace(Gt,iy).replace(ja,"")}function SL(o,l,p){o=St(o),l=ci(l);var b=o.length;p=p===n?b:Mu(nt(p),0,b);var O=p;return p-=l.length,p>=0&&o.slice(p,O)==l}function xL(o){return o=St(o),o&&On.test(o)?o.replace(Xt,Ul):o}function EL(o){return o=St(o),o&&bt.test(o)?o.replace(dt,"\\$&"):o}var PL=Xl(function(o,l,p){return o+(p?"-":"")+l.toLowerCase()}),kL=Xl(function(o,l,p){return o+(p?" ":"")+l.toLowerCase()}),CL=ux("toLowerCase");function DL(o,l,p){o=St(o),l=nt(l);var b=l?f(o):0;if(!l||b>=l)return o;var O=(l-b)/2;return zp(kp(O),p)+o+zp(Pp(O),p)}function OL(o,l,p){o=St(o),l=nt(l);var b=l?f(o):0;return l&&b<l?o+zp(l-b,p):o}function $L(o,l,p){o=St(o),l=nt(l);var b=l?f(o):0;return l&&b<l?zp(l-b,p)+o:o}function RL(o,l,p){return p||l==null?l=0:l&&(l=+l),LM(St(o).replace(xr,""),l||0)}function NL(o,l,p){return(p?Cr(o,l,p):l===n)?l=1:l=nt(l),_y(St(o),l)}function TL(){var o=arguments,l=St(o[0]);return o.length<3?l:l.replace(o[1],o[2])}var ML=Xl(function(o,l,p){return o+(p?"_":"")+l.toLowerCase()});function IL(o,l,p){return p&&typeof p!="number"&&Cr(o,l,p)&&(l=p=n),p=p===n?F:p>>>0,p?(o=St(o),o&&(typeof l=="string"||l!=null&&!Uy(l))&&(l=ci(l),!l&&da(o))?ds(m(o),0,p):o.split(l,p)):[]}var AL=Xl(function(o,l,p){return o+(p?" ":"")+qy(l)});function jL(o,l,p){return o=St(o),p=p==null?0:Mu(nt(p),0,o.length),l=ci(l),o.slice(p,p+l.length)==l}function LL(o,l,p){var b=A.templateSettings;p&&Cr(o,l,p)&&(l=n),o=St(o),l=Gp({},l,b,mx);var O=Gp({},l.imports,b.imports,mx),L=Bn(O),q=Du(O,L),Z,se,ye=0,we=l.interpolate||Mi,Se="__p += '",Ie=ue((l.escape||Mi).source+"|"+we.source+"|"+(we===Qt?Pl:Mi).source+"|"+(l.evaluate||Mi).source+"|$","g"),Ue="//# sourceURL="+(be.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yu+"]")+`
`;o.replace(Ie,function(Qe,pt,yt,di,Dr,hi){return yt||(yt=di),Se+=o.slice(ye,hi).replace(aa,fa),pt&&(Z=!0,Se+=`' +
__e(`+pt+`) +
'`),Dr&&(se=!0,Se+=`';
`+Dr+`;
__p += '`),yt&&(Se+=`' +
((__t = (`+yt+`)) == null ? '' : __t) +
'`),ye=hi+Qe.length,Qe}),Se+=`';
`;var Xe=be.call(l,"variable")&&l.variable;if(!Xe)Se=`with (obj) {
`+Se+`
}
`;else if(Jo.test(Xe))throw new K(u);Se=(se?Se.replace(lo,""):Se).replace(Ne,"$1").replace(cu,"$1;"),Se="function("+(Xe||"obj")+`) {
`+(Xe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Z?", __e = _.escape":"")+(se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Se+`return __p
}`;var st=sE(function(){return J(L,Ue+"return "+Se).apply(n,q)});if(st.source=Se,Wy(st))throw st;return st}function zL(o){return St(o).toLowerCase()}function FL(o){return St(o).toUpperCase()}function BL(o,l,p){if(o=St(o),o&&(p||l===n))return _p(o);if(!o||!(l=ci(l)))return o;var b=m(o),O=m(l),L=Lf(b,O),q=bp(b,O)+1;return ds(b,L,q).join("")}function WL(o,l,p){if(o=St(o),o&&(p||l===n))return o.slice(0,y(o)+1);if(!o||!(l=ci(l)))return o;var b=m(o),O=bp(b,m(l))+1;return ds(b,0,O).join("")}function UL(o,l,p){if(o=St(o),o&&(p||l===n))return o.replace(xr,"");if(!o||!(l=ci(l)))return o;var b=m(o),O=Lf(b,m(l));return ds(b,O).join("")}function HL(o,l){var p=de,b=ce;if(Zt(l)){var O="separator"in l?l.separator:O;p="length"in l?nt(l.length):p,b="omission"in l?ci(l.omission):b}o=St(o);var L=o.length;if(da(o)){var q=m(o);L=q.length}if(p>=L)return o;var Z=p-f(b);if(Z<1)return b;var se=q?ds(q,0,Z).join(""):o.slice(0,Z);if(O===n)return se+b;if(q&&(Z+=se.length-Z),Uy(O)){if(o.slice(Z).search(O)){var ye,we=se;for(O.global||(O=ue(O.source,St(op.exec(O))+"g")),O.lastIndex=0;ye=O.exec(we);)var Se=ye.index;se=se.slice(0,Se===n?Z:Se)}}else if(o.indexOf(ci(O),Z)!=Z){var Ie=se.lastIndexOf(O);Ie>-1&&(se=se.slice(0,Ie))}return se+b}function KL(o){return o=St(o),o&&zn.test(o)?o.replace(fu,k):o}var qL=Xl(function(o,l,p){return o+(p?" ":"")+l.toUpperCase()}),qy=ux("toUpperCase");function oE(o,l,p){return o=St(o),l=p?n:l,l===n?Hr(o)?B(o):Fl(o):o.match(l)||[]}var sE=ct(function(o,l){try{return Zn(o,n,l)}catch(p){return Wy(p)?p:new K(p)}}),YL=_o(function(o,l){return fr(l,function(p){p=Wa(p),yo(o,p,Fy(o[p],o))}),o});function VL(o){var l=o==null?0:o.length,p=Ve();return o=l?jt(o,function(b){if(typeof b[1]!="function")throw new le(s);return[p(b[0]),b[1]]}):[],ct(function(b){for(var O=-1;++O<l;){var L=o[O];if(Zn(L[0],this,b))return Zn(L[1],this,b)}})}function XL(o){return _I(ji(o,v))}function Yy(o){return function(){return o}}function QL(o,l){return o==null||o!==o?l:o}var GL=cx(),JL=cx(!0);function Vr(o){return o}function Vy(o){return FS(typeof o=="function"?o:ji(o,v))}function ZL(o){return WS(ji(o,v))}function ez(o,l){return US(o,ji(l,v))}var tz=ct(function(o,l){return function(p){return Yf(p,o,l)}}),nz=ct(function(o,l){return function(p){return Yf(o,p,l)}});function Xy(o,l,p){var b=Bn(l),O=Np(l,b);p==null&&!(Zt(l)&&(O.length||!b.length))&&(p=l,l=o,o=this,O=Np(l,Bn(l)));var L=!(Zt(p)&&"chain"in p)||!!p.chain,q=So(o);return fr(O,function(Z){var se=l[Z];o[Z]=se,q&&(o.prototype[Z]=function(){var ye=this.__chain__;if(L||ye){var we=o(this.__wrapped__),Se=we.__actions__=Kr(this.__actions__);return Se.push({func:se,args:arguments,thisArg:o}),we.__chain__=ye,we}return se.apply(o,la([this.value()],arguments))})}),o}function rz(){return Rn._===this&&(Rn._=ot),this}function Qy(){}function iz(o){return o=nt(o),ct(function(l){return HS(l,o)})}var az=Cy(jt),oz=Cy(ns),sz=Cy(ca);function uE(o){return My(o)?ku(Wa(o)):jI(o)}function uz(o){return function(l){return o==null?n:Iu(o,l)}}var lz=dx(),cz=dx(!0);function Gy(){return[]}function Jy(){return!1}function fz(){return{}}function dz(){return""}function hz(){return!0}function pz(o,l){if(o=nt(o),o<1||o>oe)return[];var p=F,b=pr(o,F);l=Ve(l),o-=F;for(var O=Wl(b,l);++p<o;)l(p);return O}function mz(o){return tt(o)?jt(o,Wa):fi(o)?[o]:Kr(Dx(St(o)))}function vz(o){var l=++Re;return St(o)+l}var gz=Lp(function(o,l){return o+l},0),yz=Dy("ceil"),wz=Lp(function(o,l){return o/l},1),_z=Dy("floor");function bz(o){return o&&o.length?Rp(o,Vr,hy):n}function Sz(o,l){return o&&o.length?Rp(o,Ve(l,2),hy):n}function xz(o){return vp(o,Vr)}function Ez(o,l){return vp(o,Ve(l,2))}function Pz(o){return o&&o.length?Rp(o,Vr,gy):n}function kz(o,l){return o&&o.length?Rp(o,Ve(l,2),gy):n}var Cz=Lp(function(o,l){return o*l},1),Dz=Dy("round"),Oz=Lp(function(o,l){return o-l},0);function $z(o){return o&&o.length?jf(o,Vr):0}function Rz(o,l){return o&&o.length?jf(o,Ve(l,2)):0}return A.after=ZA,A.ary=zx,A.assign=Fj,A.assignIn=Zx,A.assignInWith=Gp,A.assignWith=Bj,A.at=Wj,A.before=Fx,A.bind=Fy,A.bindAll=YL,A.bindKey=Bx,A.castArray=fj,A.chain=Ax,A.chunk=_2,A.compact=b2,A.concat=S2,A.cond=VL,A.conforms=XL,A.constant=Yy,A.countBy=$A,A.create=Uj,A.curry=Wx,A.curryRight=Ux,A.debounce=Hx,A.defaults=Hj,A.defaultsDeep=Kj,A.defer=ej,A.delay=tj,A.difference=x2,A.differenceBy=E2,A.differenceWith=P2,A.drop=k2,A.dropRight=C2,A.dropRightWhile=D2,A.dropWhile=O2,A.fill=$2,A.filter=NA,A.flatMap=IA,A.flatMapDeep=AA,A.flatMapDepth=jA,A.flatten=Nx,A.flattenDeep=R2,A.flattenDepth=N2,A.flip=nj,A.flow=GL,A.flowRight=JL,A.fromPairs=T2,A.functions=Jj,A.functionsIn=Zj,A.groupBy=LA,A.initial=I2,A.intersection=A2,A.intersectionBy=j2,A.intersectionWith=L2,A.invert=tL,A.invertBy=nL,A.invokeMap=FA,A.iteratee=Vy,A.keyBy=BA,A.keys=Bn,A.keysIn=Yr,A.map=Kp,A.mapKeys=iL,A.mapValues=aL,A.matches=ZL,A.matchesProperty=ez,A.memoize=Yp,A.merge=oL,A.mergeWith=eE,A.method=tz,A.methodOf=nz,A.mixin=Xy,A.negate=Vp,A.nthArg=iz,A.omit=sL,A.omitBy=uL,A.once=rj,A.orderBy=WA,A.over=az,A.overArgs=ij,A.overEvery=oz,A.overSome=sz,A.partial=By,A.partialRight=Kx,A.partition=UA,A.pick=lL,A.pickBy=tE,A.property=uE,A.propertyOf=uz,A.pull=W2,A.pullAll=Mx,A.pullAllBy=U2,A.pullAllWith=H2,A.pullAt=K2,A.range=lz,A.rangeRight=cz,A.rearg=aj,A.reject=qA,A.remove=q2,A.rest=oj,A.reverse=Ly,A.sampleSize=VA,A.set=fL,A.setWith=dL,A.shuffle=XA,A.slice=Y2,A.sortBy=JA,A.sortedUniq=eA,A.sortedUniqBy=tA,A.split=IL,A.spread=sj,A.tail=nA,A.take=rA,A.takeRight=iA,A.takeRightWhile=aA,A.takeWhile=oA,A.tap=bA,A.throttle=uj,A.thru=Hp,A.toArray=Qx,A.toPairs=nE,A.toPairsIn=rE,A.toPath=mz,A.toPlainObject=Jx,A.transform=hL,A.unary=lj,A.union=sA,A.unionBy=uA,A.unionWith=lA,A.uniq=cA,A.uniqBy=fA,A.uniqWith=dA,A.unset=pL,A.unzip=zy,A.unzipWith=Ix,A.update=mL,A.updateWith=vL,A.values=Jl,A.valuesIn=gL,A.without=hA,A.words=oE,A.wrap=cj,A.xor=pA,A.xorBy=mA,A.xorWith=vA,A.zip=gA,A.zipObject=yA,A.zipObjectDeep=wA,A.zipWith=_A,A.entries=nE,A.entriesIn=rE,A.extend=Zx,A.extendWith=Gp,Xy(A,A),A.add=gz,A.attempt=sE,A.camelCase=bL,A.capitalize=iE,A.ceil=yz,A.clamp=yL,A.clone=dj,A.cloneDeep=pj,A.cloneDeepWith=mj,A.cloneWith=hj,A.conformsTo=vj,A.deburr=aE,A.defaultTo=QL,A.divide=wz,A.endsWith=SL,A.eq=pa,A.escape=xL,A.escapeRegExp=EL,A.every=RA,A.find=TA,A.findIndex=$x,A.findKey=qj,A.findLast=MA,A.findLastIndex=Rx,A.findLastKey=Yj,A.floor=_z,A.forEach=jx,A.forEachRight=Lx,A.forIn=Vj,A.forInRight=Xj,A.forOwn=Qj,A.forOwnRight=Gj,A.get=Hy,A.gt=gj,A.gte=yj,A.has=eL,A.hasIn=Ky,A.head=Tx,A.identity=Vr,A.includes=zA,A.indexOf=M2,A.inRange=wL,A.invoke=rL,A.isArguments=Lu,A.isArray=tt,A.isArrayBuffer=wj,A.isArrayLike=qr,A.isArrayLikeObject=pn,A.isBoolean=_j,A.isBuffer=hs,A.isDate=bj,A.isElement=Sj,A.isEmpty=xj,A.isEqual=Ej,A.isEqualWith=Pj,A.isError=Wy,A.isFinite=kj,A.isFunction=So,A.isInteger=qx,A.isLength=Xp,A.isMap=Yx,A.isMatch=Cj,A.isMatchWith=Dj,A.isNaN=Oj,A.isNative=$j,A.isNil=Nj,A.isNull=Rj,A.isNumber=Vx,A.isObject=Zt,A.isObjectLike=ln,A.isPlainObject=Zf,A.isRegExp=Uy,A.isSafeInteger=Tj,A.isSet=Xx,A.isString=Qp,A.isSymbol=fi,A.isTypedArray=Gl,A.isUndefined=Mj,A.isWeakMap=Ij,A.isWeakSet=Aj,A.join=z2,A.kebabCase=PL,A.last=zi,A.lastIndexOf=F2,A.lowerCase=kL,A.lowerFirst=CL,A.lt=jj,A.lte=Lj,A.max=bz,A.maxBy=Sz,A.mean=xz,A.meanBy=Ez,A.min=Pz,A.minBy=kz,A.stubArray=Gy,A.stubFalse=Jy,A.stubObject=fz,A.stubString=dz,A.stubTrue=hz,A.multiply=Cz,A.nth=B2,A.noConflict=rz,A.noop=Qy,A.now=qp,A.pad=DL,A.padEnd=OL,A.padStart=$L,A.parseInt=RL,A.random=_L,A.reduce=HA,A.reduceRight=KA,A.repeat=NL,A.replace=TL,A.result=cL,A.round=Dz,A.runInContext=$,A.sample=YA,A.size=QA,A.snakeCase=ML,A.some=GA,A.sortedIndex=V2,A.sortedIndexBy=X2,A.sortedIndexOf=Q2,A.sortedLastIndex=G2,A.sortedLastIndexBy=J2,A.sortedLastIndexOf=Z2,A.startCase=AL,A.startsWith=jL,A.subtract=Oz,A.sum=$z,A.sumBy=Rz,A.template=LL,A.times=pz,A.toFinite=xo,A.toInteger=nt,A.toLength=Gx,A.toLower=zL,A.toNumber=Fi,A.toSafeInteger=zj,A.toString=St,A.toUpper=FL,A.trim=BL,A.trimEnd=WL,A.trimStart=UL,A.truncate=HL,A.unescape=KL,A.uniqueId=vz,A.upperCase=qL,A.upperFirst=qy,A.each=jx,A.eachRight=Lx,A.first=Tx,Xy(A,function(){var o={};return Fa(A,function(l,p){be.call(A.prototype,p)||(o[p]=l)}),o}(),{chain:!1}),A.VERSION=r,fr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){A[o].placeholder=A}),fr(["drop","take"],function(o,l){gt.prototype[o]=function(p){p=p===n?1:Nn(nt(p),0);var b=this.__filtered__&&!l?new gt(this):this.clone();return b.__filtered__?b.__takeCount__=pr(p,b.__takeCount__):b.__views__.push({size:pr(p,F),type:o+(b.__dir__<0?"Right":"")}),b},gt.prototype[o+"Right"]=function(p){return this.reverse()[o](p).reverse()}}),fr(["filter","map","takeWhile"],function(o,l){var p=l+1,b=p==Ce||p==qe;gt.prototype[o]=function(O){var L=this.clone();return L.__iteratees__.push({iteratee:Ve(O,3),type:p}),L.__filtered__=L.__filtered__||b,L}}),fr(["head","last"],function(o,l){var p="take"+(l?"Right":"");gt.prototype[o]=function(){return this[p](1).value()[0]}}),fr(["initial","tail"],function(o,l){var p="drop"+(l?"":"Right");gt.prototype[o]=function(){return this.__filtered__?new gt(this):this[p](1)}}),gt.prototype.compact=function(){return this.filter(Vr)},gt.prototype.find=function(o){return this.filter(o).head()},gt.prototype.findLast=function(o){return this.reverse().find(o)},gt.prototype.invokeMap=ct(function(o,l){return typeof o=="function"?new gt(this):this.map(function(p){return Yf(p,o,l)})}),gt.prototype.reject=function(o){return this.filter(Vp(Ve(o)))},gt.prototype.slice=function(o,l){o=nt(o);var p=this;return p.__filtered__&&(o>0||l<0)?new gt(p):(o<0?p=p.takeRight(-o):o&&(p=p.drop(o)),l!==n&&(l=nt(l),p=l<0?p.dropRight(-l):p.take(l-o)),p)},gt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},gt.prototype.toArray=function(){return this.take(F)},Fa(gt.prototype,function(o,l){var p=/^(?:filter|find|map|reject)|While$/.test(l),b=/^(?:head|last)$/.test(l),O=A[b?"take"+(l=="last"?"Right":""):l],L=b||/^find/.test(l);O&&(A.prototype[l]=function(){var q=this.__wrapped__,Z=b?[1]:arguments,se=q instanceof gt,ye=Z[0],we=se||tt(q),Se=function(pt){var yt=O.apply(A,la([pt],Z));return b&&Ie?yt[0]:yt};we&&p&&typeof ye=="function"&&ye.length!=1&&(se=we=!1);var Ie=this.__chain__,Ue=!!this.__actions__.length,Xe=L&&!Ie,st=se&&!Ue;if(!L&&we){q=st?q:new gt(this);var Qe=o.apply(q,Z);return Qe.__actions__.push({func:Hp,args:[Se],thisArg:n}),new Ai(Qe,Ie)}return Xe&&st?o.apply(this,Z):(Qe=this.thru(Se),Xe?b?Qe.value()[0]:Qe.value():Qe)})}),fr(["pop","push","shift","sort","splice","unshift"],function(o){var l=ve[o],p=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",b=/^(?:pop|shift)$/.test(o);A.prototype[o]=function(){var O=arguments;if(b&&!this.__chain__){var L=this.value();return l.apply(tt(L)?L:[],O)}return this[p](function(q){return l.apply(tt(q)?q:[],O)})}}),Fa(gt.prototype,function(o,l){var p=A[l];if(p){var b=p.name+"";be.call(ql,b)||(ql[b]=[]),ql[b].push({name:l,func:p})}}),ql[jp(n,x).name]=[{name:"wrapper",func:n}],gt.prototype.clone=KM,gt.prototype.reverse=qM,gt.prototype.value=YM,A.prototype.at=SA,A.prototype.chain=xA,A.prototype.commit=EA,A.prototype.next=PA,A.prototype.plant=CA,A.prototype.reverse=DA,A.prototype.toJSON=A.prototype.valueOf=A.prototype.value=OA,A.prototype.first=A.prototype.head,Ff&&(A.prototype[Ff]=kA),A},te=Y();ua?((ua.exports=te)._=te,$f._=te):Rn._=te}).call(qu)})($v,$v.exports);var KO=$v.exports,Qi=function(e,t){return Number(e.toFixed(t))},o3=function(e,t){return typeof e=="number"?e:t},Yt=function(e,t,n){n&&typeof n=="function"&&n(e,t)},s3=function(e){return-Math.cos(e*Math.PI)/2+.5},u3=function(e){return e},l3=function(e){return e*e},c3=function(e){return e*(2-e)},f3=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},d3=function(e){return e*e*e},h3=function(e){return--e*e*e+1},p3=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},m3=function(e){return e*e*e*e},v3=function(e){return 1- --e*e*e*e},g3=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},y3=function(e){return e*e*e*e*e},w3=function(e){return 1+--e*e*e*e*e},_3=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},qO={easeOut:s3,linear:u3,easeInQuad:l3,easeOutQuad:c3,easeInOutQuad:f3,easeInCubic:d3,easeOutCubic:h3,easeInOutCubic:p3,easeInQuart:m3,easeOutQuart:v3,easeInOutQuart:g3,easeInQuint:y3,easeOutQuint:w3,easeInOutQuint:_3},YO=function(e){typeof e=="number"&&cancelAnimationFrame(e)},xa=function(e){e.mounted&&(YO(e.animation),e.animate=!1,e.animation=null,e.velocity=null)};function VO(e,t,n,r){if(e.mounted){var i=new Date().getTime(),a=1;xa(e),e.animation=function(){if(!e.mounted)return YO(e.animation);var s=new Date().getTime()-i,u=s/n,c=qO[t],d=c(u);s>=n?(r(a),e.animation=null):e.animation&&(r(d),requestAnimationFrame(e.animation))},requestAnimationFrame(e.animation)}}function b3(e){var t=e.scale,n=e.positionX,r=e.positionY;return!(Number.isNaN(t)||Number.isNaN(n)||Number.isNaN(r))}function au(e,t,n,r){var i=b3(t);if(!(!e.mounted||!i)){var a=e.setTransformState,s=e.transformState,u=s.scale,c=s.positionX,d=s.positionY,h=t.scale-u,v=t.positionX-c,g=t.positionY-d;n===0?a(t.scale,t.positionX,t.positionY):VO(e,r,n,function(w){var _=u+h*w,E=c+v*w,C=d+g*w;a(_,E,C)})}}function S3(e,t,n){var r=e.offsetWidth,i=e.offsetHeight,a=t.offsetWidth,s=t.offsetHeight,u=a*n,c=s*n,d=r-u,h=i-c;return{wrapperWidth:r,wrapperHeight:i,newContentWidth:u,newDiffWidth:d,newContentHeight:c,newDiffHeight:h}}var x3=function(e,t,n,r,i,a,s){var u=e>t?n*(s?1:.5):0,c=r>i?a*(s?1:.5):0,d=e-t-u,h=u,v=r-i-c,g=c;return{minPositionX:d,maxPositionX:h,minPositionY:v,maxPositionY:g}},Ub=function(e,t){var n=e.wrapperComponent,r=e.contentComponent,i=e.setup.centerZoomedOut;if(!n||!r)throw new Error("Components are not mounted");var a=S3(n,r,t),s=a.wrapperWidth,u=a.wrapperHeight,c=a.newContentWidth,d=a.newDiffWidth,h=a.newContentHeight,v=a.newDiffHeight,g=x3(s,c,d,u,h,v,!!i);return g},t_=function(e,t,n,r){return r?e<t?Qi(t,2):e>n?Qi(n,2):Qi(e,2):Qi(e,2)},ol=function(e,t){var n=Ub(e,t);return e.bounds=n,n};function Ah(e,t,n,r,i,a,s){var u=n.minPositionX,c=n.minPositionY,d=n.maxPositionX,h=n.maxPositionY,v=0,g=0;s&&(v=i,g=a);var w=t_(e,u-v,d+v,r),_=t_(t,c-g,h+g,r);return{x:w,y:_}}function xg(e,t,n,r,i,a){var s=e.transformState,u=s.scale,c=s.positionX,d=s.positionY,h=r-u;if(typeof t!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:c,y:d};var v=c-t*h,g=d-n*h,w=Ah(v,g,i,a,0,0,null);return w}function jh(e,t,n,r,i){var a=i?r:0,s=t-a;return!Number.isNaN(n)&&e>=n?n:!Number.isNaN(t)&&e<=s?s:e}var _P=function(e,t){var n=e.setup.panning.excluded,r=e.isInitialized,i=e.wrapperComponent,a=t.target,s="shadowRoot"in a&&"composedPath"in t,u=s?t.composedPath().some(function(h){return h instanceof Element?i==null?void 0:i.contains(h):!1}):i==null?void 0:i.contains(a),c=r&&a&&u;if(!c)return!1;var d=Eg(a,n);return!d},bP=function(e){var t=e.isInitialized,n=e.isPanning,r=e.setup,i=r.panning.disabled,a=t&&n&&!i;return!!a},E3=function(e,t){var n=e.transformState,r=n.positionX,i=n.positionY;e.isPanning=!0;var a=t.clientX,s=t.clientY;e.startCoords={x:a-r,y:s-i}},P3=function(e,t){var n=t.touches,r=e.transformState,i=r.positionX,a=r.positionY;e.isPanning=!0;var s=n.length===1;if(s){var u=n[0].clientX,c=n[0].clientY;e.startCoords={x:u-i,y:c-a}}};function k3(e){var t=e.transformState,n=t.positionX,r=t.positionY,i=t.scale,a=e.setup,s=a.disabled,u=a.limitToBounds,c=a.centerZoomedOut,d=e.wrapperComponent;if(!(s||!d||!e.bounds)){var h=e.bounds,v=h.maxPositionX,g=h.minPositionX,w=h.maxPositionY,_=h.minPositionY,E=n>v||n<g,C=r>w||r<_,x=n>v?d.offsetWidth:e.setup.minPositionX||0,S=r>w?d.offsetHeight:e.setup.minPositionY||0,P=xg(e,x,S,i,e.bounds,u||c),M=P.x,T=P.y;return{scale:i,positionX:E?M:n,positionY:C?T:r}}}function XO(e,t,n,r,i){var a=e.setup.limitToBounds,s=e.wrapperComponent,u=e.bounds,c=e.transformState,d=c.scale,h=c.positionX,v=c.positionY;if(!(s===null||u===null||t===h&&n===v)){var g=Ah(t,n,u,a,r,i,s),w=g.x,_=g.y;e.setTransformState(d,w,_)}}var C3=function(e,t,n){var r=e.startCoords,i=e.transformState,a=e.setup.panning,s=a.lockAxisX,u=a.lockAxisY,c=i.positionX,d=i.positionY;if(!r)return{x:c,y:d};var h=t-r.x,v=n-r.y,g=s?c:h,w=u?d:v;return{x:g,y:w}},Qs=function(e,t){var n=e.setup,r=e.transformState,i=r.scale,a=n.minScale,s=n.disablePadding;return t>0&&i>=a&&!s?t:0},D3=function(e){var t=e.mounted,n=e.setup,r=n.disabled,i=n.velocityAnimation,a=e.transformState.scale,s=i.disabled,u=!s||a>1||!r||t;return!!u},O3=function(e){var t=e.mounted,n=e.velocity,r=e.bounds,i=e.setup,a=i.disabled,s=i.velocityAnimation,u=e.transformState.scale,c=s.disabled,d=!c||u>1||!a||t;return!(!d||!n||!r)};function $3(e,t){var n=e.setup.velocityAnimation,r=n.equalToMove,i=n.animationTime,a=n.sensitivity;return r?i*t*a:i}function SP(e,t,n,r,i,a,s,u,c,d){if(i){if(t>s&&n>s){var h=s+(e-s)*d;return h>c?c:h<s?s:h}if(t<a&&n<a){var h=a+(e-a)*d;return h<u?u:h>a?a:h}}return r?t:t_(e,a,s,i)}function R3(e,t){var n=1;return t?Math.min(n,e.offsetWidth/window.innerWidth):n}function N3(e,t){var n=D3(e);if(n){var r=e.lastMousePosition,i=e.velocityTime,a=e.setup,s=e.wrapperComponent,u=a.velocityAnimation.equalToMove,c=Date.now();if(r&&i&&s){var d=R3(s,u),h=t.x-r.x,v=t.y-r.y,g=h/d,w=v/d,_=c-i,E=h*h+v*v,C=Math.sqrt(E)/_;e.velocity={velocityX:g,velocityY:w,total:C}}e.lastMousePosition=t,e.velocityTime=c}}function T3(e){var t=e.velocity,n=e.bounds,r=e.setup,i=e.wrapperComponent,a=O3(e);if(!(!a||!t||!n||!i)){var s=t.velocityX,u=t.velocityY,c=t.total,d=n.maxPositionX,h=n.minPositionX,v=n.maxPositionY,g=n.minPositionY,w=r.limitToBounds,_=r.alignmentAnimation,E=r.zoomAnimation,C=r.panning,x=C.lockAxisY,S=C.lockAxisX,P=E.animationType,M=_.sizeX,T=_.sizeY,U=_.velocityAlignmentTime,W=U,re=$3(e,c),he=Math.max(re,W),de=Qs(e,M),ce=Qs(e,T),pe=de*i.offsetWidth/100,xe=ce*i.offsetHeight/100,Ce=d+pe,Le=h-pe,qe=v+xe,We=g-xe,oe=e.transformState,_e=new Date().getTime();VO(e,P,he,function(G){var F=e.transformState,ee=F.scale,X=F.positionX,I=F.positionY,H=new Date().getTime()-_e,ae=H/W,ge=qO[_.animationType],$e=1-ge(Math.min(1,ae)),me=1-G,Me=X+s*me,Ge=I+u*me,Ke=SP(Me,oe.positionX,X,S,w,h,d,Le,Ce,$e),an=SP(Ge,oe.positionY,I,x,w,g,v,We,qe,$e);(X!==Me||I!==Ge)&&e.setTransformState(ee,Ke,an)})}}function xP(e,t){var n=e.transformState.scale;xa(e),ol(e,n),window.TouchEvent!==void 0&&t instanceof TouchEvent?P3(e,t):E3(e,t)}function Hb(e,t){var n=e.transformState.scale,r=e.setup,i=r.minScale,a=r.alignmentAnimation,s=a.disabled,u=a.sizeX,c=a.sizeY,d=a.animationTime,h=a.animationType,v=s||n<i||!u&&!c;if(!v){var g=k3(e);g&&au(e,g,t??d,h)}}function EP(e,t,n){var r=e.startCoords,i=e.setup,a=i.alignmentAnimation,s=a.sizeX,u=a.sizeY;if(r){var c=C3(e,t,n),d=c.x,h=c.y,v=Qs(e,s),g=Qs(e,u);N3(e,{x:d,y:h}),XO(e,d,h,v,g)}}function M3(e){if(e.isPanning){var t=e.setup.panning.velocityDisabled,n=e.velocity,r=e.wrapperComponent,i=e.contentComponent;e.isPanning=!1,e.animate=!1,e.animation=null;var a=r==null?void 0:r.getBoundingClientRect(),s=i==null?void 0:i.getBoundingClientRect(),u=(a==null?void 0:a.width)||0,c=(a==null?void 0:a.height)||0,d=(s==null?void 0:s.width)||0,h=(s==null?void 0:s.height)||0,v=u<d||c<h,g=!t&&n&&(n==null?void 0:n.total)>.1&&v;g?T3(e):Hb(e)}}function Kb(e,t,n,r){var i=e.setup,a=i.minScale,s=i.maxScale,u=i.limitToBounds,c=jh(Qi(t,2),a,s,0,!1),d=ol(e,c),h=xg(e,n,r,c,d,u),v=h.x,g=h.y;return{scale:c,positionX:v,positionY:g}}function QO(e,t,n){var r=e.transformState.scale,i=e.wrapperComponent,a=e.setup,s=a.minScale,u=a.limitToBounds,c=a.zoomAnimation,d=c.disabled,h=c.animationTime,v=c.animationType,g=d||r>=s;if((r>=1||u)&&Hb(e),!(g||!i||!e.mounted)){var w=t||i.offsetWidth/2,_=n||i.offsetHeight/2,E=Kb(e,s,w,_);E&&au(e,E,h,v)}}var Hs=function(){return Hs=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Hs.apply(this,arguments)};function PP(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var mm={previousScale:1,scale:1,positionX:0,positionY:0},ud={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},n_={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},GO=function(e){var t,n,r,i;return{previousScale:(t=e.initialScale)!==null&&t!==void 0?t:mm.scale,scale:(n=e.initialScale)!==null&&n!==void 0?n:mm.scale,positionX:(r=e.initialPositionX)!==null&&r!==void 0?r:mm.positionX,positionY:(i=e.initialPositionY)!==null&&i!==void 0?i:mm.positionY}},kP=function(e){var t=Hs({},ud);return Object.keys(e).forEach(function(n){var r=typeof e[n]<"u",i=typeof ud[n]<"u";if(i&&r){var a=Object.prototype.toString.call(ud[n]),s=a==="[object Object]",u=a==="[object Array]";s?t[n]=Hs(Hs({},ud[n]),e[n]):u?t[n]=PP(PP([],ud[n],!0),e[n],!0):t[n]=e[n]}}),t},JO=function(e,t,n){var r=e.transformState.scale,i=e.wrapperComponent,a=e.setup,s=a.maxScale,u=a.minScale,c=a.zoomAnimation,d=a.smooth,h=c.size;if(!i)throw new Error("Wrapper is not mounted");var v=d?r*Math.exp(t*n):r+t*n,g=jh(Qi(v,3),u,s,h,!1);return g};function ZO(e,t,n,r,i){var a=e.wrapperComponent,s=e.transformState,u=s.scale,c=s.positionX,d=s.positionY;if(!a)return console.error("No WrapperComponent found");var h=a.offsetWidth,v=a.offsetHeight,g=(h/2-c)/u,w=(v/2-d)/u,_=JO(e,t,n),E=Kb(e,_,g,w);if(!E)return console.error("Error during zoom event. New transformation state was not calculated.");au(e,E,r,i)}function e$(e,t,n,r){var i=e.setup,a=e.wrapperComponent,s=i.limitToBounds,u=GO(e.props),c=e.transformState,d=c.scale,h=c.positionX,v=c.positionY;if(a){var g=Ub(e,u.scale),w=Ah(u.positionX,u.positionY,g,s,0,0,a),_={scale:u.scale,positionX:w.x,positionY:w.y};d===u.scale&&h===u.positionX&&v===u.positionY||(r==null||r(),au(e,_,t,n))}}function I3(e,t,n,r){var i=e.getBoundingClientRect(),a=t.getBoundingClientRect(),s=n.getBoundingClientRect(),u=a.x*r.scale,c=a.y*r.scale;return{x:(i.x-s.x+u)/r.scale,y:(i.y-s.y+c)/r.scale}}function A3(e,t,n){var r=e.wrapperComponent,i=e.contentComponent,a=e.transformState,s=e.setup,u=s.limitToBounds,c=s.minScale,d=s.maxScale;if(!r||!i)return a;var h=r.getBoundingClientRect(),v=t.getBoundingClientRect(),g=I3(t,r,i,a),w=g.x,_=g.y,E=v.width/a.scale,C=v.height/a.scale,x=r.offsetWidth/E,S=r.offsetHeight/C,P=jh(n||Math.min(x,S),c,d,0,!1),M=(h.width-E*P)/2,T=(h.height-C*P)/2,U=(h.left-w)*P+M,W=(h.top-_)*P+T,re=Ub(e,P),he=Ah(U,W,re,u,0,0,r),de=he.x,ce=he.y;return{positionX:de,positionY:ce,scale:P}}var j3=function(e){return function(t,n,r){t===void 0&&(t=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),ZO(e,1,t,n,r)}},L3=function(e){return function(t,n,r){t===void 0&&(t=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),ZO(e,-1,t,n,r)}},z3=function(e){return function(t,n,r,i,a){i===void 0&&(i=300),a===void 0&&(a="easeOut");var s=e.transformState,u=s.positionX,c=s.positionY,d=s.scale,h=e.wrapperComponent,v=e.contentComponent,g=e.setup.disabled;if(!(g||!h||!v)){var w={positionX:Number.isNaN(t)?u:t,positionY:Number.isNaN(n)?c:n,scale:Number.isNaN(r)?d:r};au(e,w,i,a)}}},F3=function(e){return function(t,n){t===void 0&&(t=200),n===void 0&&(n="easeOut"),e$(e,t,n)}},B3=function(e){return function(t,n,r){n===void 0&&(n=200),r===void 0&&(r="easeOut");var i=e.transformState,a=e.wrapperComponent,s=e.contentComponent;if(a&&s){var u=t$(t||i.scale,a,s);au(e,u,n,r)}}},W3=function(e){return function(t,n,r,i){r===void 0&&(r=600),i===void 0&&(i="easeOut"),xa(e);var a=e.wrapperComponent,s=typeof t=="string"?document.getElementById(t):t;if(a&&s&&a.contains(s)){var u=A3(e,s,n);au(e,u,r,i)}}},r_=function(e){return{instance:e,zoomIn:j3(e),zoomOut:L3(e),setTransform:z3(e),resetTransform:F3(e),centerView:B3(e),zoomToElement:W3(e)}},U3=function(e){return{instance:e,state:e.transformState}},Ft=function(e){var t={};return Object.assign(t,U3(e)),Object.assign(t,r_(e)),t},P0=!1;function k0(){try{var e={get passive(){return P0=!0,!1}};return e}catch{return P0=!1,P0}}var vm=".".concat(n_.wrapperClass),Eg=function(e,t){return t.some(function(n){return e.matches("".concat(vm," ").concat(n,", ").concat(vm," .").concat(n,", ").concat(vm," ").concat(n," *, ").concat(vm," .").concat(n," *"))})},i_=function(e){e&&clearTimeout(e)},H3=function(e,t,n){return"translate(".concat(e,"px, ").concat(t,"px) scale(").concat(n,")")},t$=function(e,t,n){var r=n.offsetWidth*e,i=n.offsetHeight*e,a=(t.offsetWidth-r)/2,s=(t.offsetHeight-i)/2;return{scale:e,positionX:a,positionY:s}};function K3(e){return function(t){e.forEach(function(n){typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var q3=function(e,t){var n=e.setup.wheel,r=n.disabled,i=n.wheelDisabled,a=n.touchPadDisabled,s=n.excluded,u=e.isInitialized,c=e.isPanning,d=t.target,h=u&&!c&&!r&&d;if(!h||i&&!t.ctrlKey||a&&t.ctrlKey)return!1;var v=Eg(d,s);return!v},Y3=function(e){return e?e.deltaY<0?1:-1:0};function V3(e,t){var n=Y3(e),r=o3(t,n);return r}function n$(e,t,n){var r=t.getBoundingClientRect(),i=0,a=0;if("clientX"in e)i=(e.clientX-r.left)/n,a=(e.clientY-r.top)/n;else{var s=e.touches[0];i=(s.clientX-r.left)/n,a=(s.clientY-r.top)/n}return(Number.isNaN(i)||Number.isNaN(a))&&console.error("No mouse or touch offset found"),{x:i,y:a}}var X3=function(e,t,n,r,i){var a=e.transformState.scale,s=e.wrapperComponent,u=e.setup,c=u.maxScale,d=u.minScale,h=u.zoomAnimation,v=u.disablePadding,g=h.size,w=h.disabled;if(!s)throw new Error("Wrapper is not mounted");var _=a+t*n;if(i)return _;var E=r?!1:!w,C=jh(Qi(_,3),d,c,g,E&&!v);return C},Q3=function(e,t){var n=e.previousWheelEvent,r=e.transformState.scale,i=e.setup,a=i.maxScale,s=i.minScale;return n?r<a||r>s||Math.sign(n.deltaY)!==Math.sign(t.deltaY)||n.deltaY>0&&n.deltaY<t.deltaY||n.deltaY<0&&n.deltaY>t.deltaY||Math.sign(n.deltaY)!==Math.sign(t.deltaY):!1},G3=function(e,t){var n=e.setup.pinch,r=n.disabled,i=n.excluded,a=e.isInitialized,s=t.target,u=a&&!r&&s;if(!u)return!1;var c=Eg(s,i);return!c},J3=function(e){var t=e.setup.pinch.disabled,n=e.isInitialized,r=e.pinchStartDistance,i=n&&!t&&r;return!!i},Z3=function(e,t,n){var r=n.getBoundingClientRect(),i=e.touches,a=Qi(i[0].clientX-r.left,5),s=Qi(i[0].clientY-r.top,5),u=Qi(i[1].clientX-r.left,5),c=Qi(i[1].clientY-r.top,5);return{x:(a+u)/2/t,y:(s+c)/2/t}},r$=function(e){return Math.sqrt(Math.pow(e.touches[0].pageX-e.touches[1].pageX,2)+Math.pow(e.touches[0].pageY-e.touches[1].pageY,2))},eB=function(e,t){var n=e.pinchStartScale,r=e.pinchStartDistance,i=e.setup,a=i.maxScale,s=i.minScale,u=i.zoomAnimation,c=i.disablePadding,d=u.size,h=u.disabled;if(!n||r===null||!t)throw new Error("Pinch touches distance was not provided");if(t<0)return e.transformState.scale;var v=t/r,g=v*n;return jh(Qi(g,2),s,a,d,!h&&!c)},tB=160,nB=100,rB=function(e,t){var n=e.props,r=n.onWheelStart,i=n.onZoomStart;e.wheelStopEventTimer||(xa(e),Yt(Ft(e),t,r),Yt(Ft(e),t,i))},iB=function(e,t){var n=e.props,r=n.onWheel,i=n.onZoom,a=e.contentComponent,s=e.setup,u=e.transformState,c=u.scale,d=s.limitToBounds,h=s.centerZoomedOut,v=s.zoomAnimation,g=s.wheel,w=s.disablePadding,_=s.smooth,E=v.size,C=v.disabled,x=g.step,S=g.smoothStep;if(!a)throw new Error("Component not mounted");t.preventDefault(),t.stopPropagation();var P=V3(t,null),M=_?S*Math.abs(t.deltaY):x,T=X3(e,P,M,!t.ctrlKey);if(c!==T){var U=ol(e,T),W=n$(t,a,c),re=C||E===0||h||w,he=d&&re,de=xg(e,W.x,W.y,T,U,he),ce=de.x,pe=de.y;e.previousWheelEvent=t,e.setTransformState(T,ce,pe),Yt(Ft(e),t,r),Yt(Ft(e),t,i)}},aB=function(e,t){var n=e.props,r=n.onWheelStop,i=n.onZoomStop;i_(e.wheelAnimationTimer),e.wheelAnimationTimer=setTimeout(function(){e.mounted&&(QO(e,t.x,t.y),e.wheelAnimationTimer=null)},nB);var a=Q3(e,t);a&&(i_(e.wheelStopEventTimer),e.wheelStopEventTimer=setTimeout(function(){e.mounted&&(e.wheelStopEventTimer=null,Yt(Ft(e),t,r),Yt(Ft(e),t,i))},tB))},i$=function(e){for(var t=0,n=0,r=0;r<2;r+=1)t+=e.touches[r].clientX,n+=e.touches[r].clientY;var i=t/2,a=n/2;return{x:i,y:a}},oB=function(e,t){var n=r$(t);e.pinchStartDistance=n,e.lastDistance=n,e.pinchStartScale=e.transformState.scale,e.isPanning=!1;var r=i$(t);e.pinchLastCenterX=r.x,e.pinchLastCenterY=r.y,xa(e)},sB=function(e,t){var n=e.contentComponent,r=e.pinchStartDistance,i=e.wrapperComponent,a=e.transformState.scale,s=e.setup,u=s.limitToBounds,c=s.centerZoomedOut,d=s.zoomAnimation,h=s.alignmentAnimation,v=d.disabled,g=d.size;if(!(r===null||!n)){var w=Z3(t,a,n);if(!(!Number.isFinite(w.x)||!Number.isFinite(w.y))){var _=r$(t),E=eB(e,_),C=i$(t),x=C.x-(e.pinchLastCenterX||0),S=C.y-(e.pinchLastCenterY||0);if(!(E===a&&x===0&&S===0)){e.pinchLastCenterX=C.x,e.pinchLastCenterY=C.y;var P=ol(e,E),M=v||g===0||c,T=u&&M,U=xg(e,w.x,w.y,E,P,T),W=U.x,re=U.y;e.pinchMidpoint=w,e.lastDistance=_;var he=h.sizeX,de=h.sizeY,ce=Qs(e,he),pe=Qs(e,de),xe=W+x,Ce=re+S,Le=Ah(xe,Ce,P,u,ce,pe,i),qe=Le.x,We=Le.y;e.setTransformState(E,qe,We)}}}},uB=function(e){var t=e.pinchMidpoint;e.velocity=null,e.lastDistance=null,e.pinchMidpoint=null,e.pinchStartScale=null,e.pinchStartDistance=null,QO(e,t==null?void 0:t.x,t==null?void 0:t.y)},a$=function(e,t){var n=e.props.onZoomStop,r=e.setup.doubleClick.animationTime;i_(e.doubleClickStopEventTimer),e.doubleClickStopEventTimer=setTimeout(function(){e.doubleClickStopEventTimer=null,Yt(Ft(e),t,n)},r)},lB=function(e,t){var n=e.props,r=n.onZoomStart,i=n.onZoom,a=e.setup.doubleClick,s=a.animationTime,u=a.animationType;Yt(Ft(e),t,r),e$(e,s,u,function(){return Yt(Ft(e),t,i)}),a$(e,t)};function cB(e,t){return e==="toggle"?t===1?1:-1:e==="zoomOut"?-1:1}function fB(e,t){var n=e.setup,r=e.doubleClickStopEventTimer,i=e.transformState,a=e.contentComponent,s=i.scale,u=e.props,c=u.onZoomStart,d=u.onZoom,h=n.doubleClick,v=h.disabled,g=h.mode,w=h.step,_=h.animationTime,E=h.animationType;if(!v&&!r){if(g==="reset")return lB(e,t);if(!a)return console.error("No ContentComponent found");var C=cB(g,e.transformState.scale),x=JO(e,C,w);if(s!==x){Yt(Ft(e),t,c);var S=n$(t,a,s),P=Kb(e,x,S.x,S.y);if(!P)return console.error("Error during zoom event. New transformation state was not calculated.");Yt(Ft(e),t,d),au(e,P,_,E),a$(e,t)}}}var dB=function(e,t){var n=e.isInitialized,r=e.setup,i=e.wrapperComponent,a=r.doubleClick,s=a.disabled,u=a.excluded,c=t.target,d=i==null?void 0:i.contains(c),h=n&&c&&d&&!s;if(!h)return!1;var v=Eg(c,u);return!v},hB=function(){function e(t){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(r){n.props=r,ol(n,n.transformState.scale),n.setup=kP(r)},this.initializeWindowEvents=function(){var r,i,a=k0(),s=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,u=s==null?void 0:s.defaultView;(i=n.wrapperComponent)===null||i===void 0||i.addEventListener("wheel",n.onWheelPanning,a),u==null||u.addEventListener("mousedown",n.onPanningStart,a),u==null||u.addEventListener("mousemove",n.onPanning,a),u==null||u.addEventListener("mouseup",n.onPanningStop,a),s==null||s.addEventListener("mouseleave",n.clearPanning,a),u==null||u.addEventListener("keyup",n.setKeyUnPressed,a),u==null||u.addEventListener("keydown",n.setKeyPressed,a)},this.cleanupWindowEvents=function(){var r,i,a=k0(),s=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,u=s==null?void 0:s.defaultView;u==null||u.removeEventListener("mousedown",n.onPanningStart,a),u==null||u.removeEventListener("mousemove",n.onPanning,a),u==null||u.removeEventListener("mouseup",n.onPanningStop,a),s==null||s.removeEventListener("mouseleave",n.clearPanning,a),u==null||u.removeEventListener("keyup",n.setKeyUnPressed,a),u==null||u.removeEventListener("keydown",n.setKeyPressed,a),document.removeEventListener("mouseleave",n.clearPanning,a),xa(n),(i=n.observer)===null||i===void 0||i.disconnect()},this.handleInitializeWrapperEvents=function(r){var i=k0();r.addEventListener("wheel",n.onWheelZoom,i),r.addEventListener("dblclick",n.onDoubleClick,i),r.addEventListener("touchstart",n.onTouchPanningStart,i),r.addEventListener("touchmove",n.onTouchPanning,i),r.addEventListener("touchend",n.onTouchPanningStop,i)},this.handleInitialize=function(r,i){var a=!1,s=n.setup.centerOnInit,u=function(c,d){for(var h=0,v=c;h<v.length;h++){var g=v[h];if(g.target===d)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(c){c(Ft(n))}),n.observer=new ResizeObserver(function(c){if(u(c,r)||u(c,i))if(s&&!a){var d=i.offsetWidth,h=i.offsetHeight;(d>0||h>0)&&(a=!0,n.setCenter())}else xa(n),ol(n,n.transformState.scale),Hb(n,0)}),n.observer.observe(r),n.observer.observe(i)},this.onWheelZoom=function(r){var i=n.setup.disabled;if(!i){var a=q3(n,r);if(a){var s=n.isPressingKeys(n.setup.wheel.activationKeys);s&&(rB(n,r),iB(n,r),aB(n,r))}}},this.onWheelPanning=function(r){var i=n.setup,a=i.disabled,s=i.wheel,u=i.panning;if(!(!n.wrapperComponent||!n.contentComponent||a||!s.wheelDisabled||u.disabled||!u.wheelPanning||r.ctrlKey)){r.preventDefault(),r.stopPropagation();var c=n.transformState,d=c.positionX,h=c.positionY,v=d-r.deltaX,g=h-r.deltaY,w=u.lockAxisX?d:v,_=u.lockAxisY?h:g,E=n.setup.alignmentAnimation,C=E.sizeX,x=E.sizeY,S=Qs(n,C),P=Qs(n,x);w===d&&_===h||XO(n,w,_,S,P)}},this.onPanningStart=function(r){var i=n.setup.disabled,a=n.props.onPanningStart;if(!i){var s=_P(n,r);if(s){var u=n.isPressingKeys(n.setup.panning.activationKeys);u&&(r.button===0&&!n.setup.panning.allowLeftClickPan||r.button===1&&!n.setup.panning.allowMiddleClickPan||r.button===2&&!n.setup.panning.allowRightClickPan||(r.preventDefault(),r.stopPropagation(),xa(n),xP(n,r),Yt(Ft(n),r,a)))}}},this.onPanning=function(r){var i=n.setup.disabled,a=n.props.onPanning;if(!i){var s=bP(n);if(s){var u=n.isPressingKeys(n.setup.panning.activationKeys);u&&(r.preventDefault(),r.stopPropagation(),EP(n,r.clientX,r.clientY),Yt(Ft(n),r,a))}}},this.onPanningStop=function(r){var i=n.props.onPanningStop;n.isPanning&&(M3(n),Yt(Ft(n),r,i))},this.onPinchStart=function(r){var i=n.setup.disabled,a=n.props,s=a.onPinchingStart,u=a.onZoomStart;if(!i){var c=G3(n,r);c&&(oB(n,r),xa(n),Yt(Ft(n),r,s),Yt(Ft(n),r,u))}},this.onPinch=function(r){var i=n.setup.disabled,a=n.props,s=a.onPinching,u=a.onZoom;if(!i){var c=J3(n);c&&(r.preventDefault(),r.stopPropagation(),sB(n,r),Yt(Ft(n),r,s),Yt(Ft(n),r,u))}},this.onPinchStop=function(r){var i=n.props,a=i.onPinchingStop,s=i.onZoomStop;n.pinchStartScale&&(uB(n),Yt(Ft(n),r,a),Yt(Ft(n),r,s))},this.onTouchPanningStart=function(r){var i=n.setup.disabled,a=n.props.onPanningStart;if(!i){var s=_P(n,r);if(s){var u=n.lastTouch&&+new Date-n.lastTouch<200&&r.touches.length===1;if(!u){n.lastTouch=+new Date,xa(n);var c=r.touches,d=c.length===1,h=c.length===2;d&&(xa(n),xP(n,r),Yt(Ft(n),r,a)),h&&n.onPinchStart(r)}}}},this.onTouchPanning=function(r){var i=n.setup.disabled,a=n.props.onPanning;if(n.isPanning&&r.touches.length===1){if(i)return;var s=bP(n);if(!s)return;r.preventDefault(),r.stopPropagation();var u=r.touches[0];EP(n,u.clientX,u.clientY),Yt(Ft(n),r,a)}else r.touches.length>1&&n.onPinch(r)},this.onTouchPanningStop=function(r){n.onPanningStop(r),n.onPinchStop(r)},this.onDoubleClick=function(r){var i=n.setup.disabled;if(!i){var a=dB(n,r);a&&fB(n,r)}},this.clearPanning=function(r){n.isPanning&&n.onPanningStop(r)},this.setKeyPressed=function(r){n.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){n.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(i){return n.pressedKeys[i]}):!0},this.setTransformState=function(r,i,a){var s=n.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(a)){r!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=r),n.transformState.positionX=i,n.transformState.positionY=a,n.applyTransformation();var u=Ft(n);n.onChangeCallbacks.forEach(function(c){return c(u)}),Yt(u,{scale:r,positionX:i,positionY:a},s)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var r=t$(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,i,a){return n.props.customTransform?n.props.customTransform(r,i,a):H3(r,i,a)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var r=n.transformState,i=r.scale,a=r.positionX,s=r.positionY,u=n.handleTransformStyles(a,s,i);n.contentComponent.style.transform=u}},this.getContext=function(){return Ft(n)},this.onChange=function(r){return n.onChangeCallbacks.has(r)||n.onChangeCallbacks.add(r),function(){n.onChangeCallbacks.delete(r)}},this.onInit=function(r){return n.onInitCallbacks.has(r)||n.onInitCallbacks.add(r),function(){n.onInitCallbacks.delete(r)}},this.init=function(r,i){n.cleanupWindowEvents(),n.wrapperComponent=r,n.contentComponent=i,ol(n,n.transformState.scale),n.handleInitializeWrapperEvents(r),n.handleInitialize(r,i),n.initializeWindowEvents(),n.isInitialized=!0;var a=Ft(n);Yt(a,void 0,n.props.onInit)},this.props=t,this.setup=kP(this.props),this.transformState=GO(this.props)}return e}(),qb=Dt.createContext(null),pB=function(e,t){return typeof e=="function"?e(t):e},mB=Dt.forwardRef(function(e,t){var n=ne.useRef(new hB(e)).current,r=pB(e.children,r_(n));return ne.useImperativeHandle(t,function(){return r_(n)},[n]),ne.useEffect(function(){n.update(e)},[n,e]),Dt.createElement(qb.Provider,{value:n},r)});Dt.forwardRef(function(e,t){var n=ne.useRef(null),r=ne.useContext(qb);return ne.useEffect(function(){return r.onChange(function(i){if(n.current){var a=0,s=0;n.current.style.transform=r.handleTransformStyles(a,s,1/i.instance.transformState.scale)}})},[r]),Dt.createElement("div",Hs({},e,{ref:K3([n,t])}))});function vB(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var gB=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,CP={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};vB(gB);var yB=function(e){var t=e.children,n=e.wrapperClass,r=n===void 0?"":n,i=e.contentClass,a=i===void 0?"":i,s=e.wrapperStyle,u=e.contentStyle,c=e.wrapperProps,d=c===void 0?{}:c,h=e.contentProps,v=h===void 0?{}:h,g=ne.useContext(qb),w=g.init,_=g.cleanupWindowEvents,E=ne.useRef(null),C=ne.useRef(null);return ne.useEffect(function(){var x=E.current,S=C.current;return x!==null&&S!==null&&w&&(w==null||w(x,S)),function(){_==null||_()}},[]),Dt.createElement("div",Hs({},d,{ref:E,className:"".concat(n_.wrapperClass," ").concat(CP.wrapper," ").concat(r),style:s}),Dt.createElement("div",Hs({},v,{ref:C,className:"".concat(n_.contentClass," ").concat(CP.content," ").concat(a),style:u}),t))};const Pg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function lf(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Yb(e){return"nodeType"in e}function Lr(e){var t,n;return e?lf(e)?e:Yb(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Vb(e){const{Document:t}=Lr(e);return e instanceof t}function Lh(e){return lf(e)?!1:e instanceof Lr(e).HTMLElement}function o$(e){return e instanceof Lr(e).SVGElement}function cf(e){return e?lf(e)?e.document:Yb(e)?Vb(e)?e:Lh(e)||o$(e)?e.ownerDocument:document:document:document}const Ho=Pg?ne.useLayoutEffect:ne.useEffect;function kg(e){const t=ne.useRef(e);return Ho(()=>{t.current=e}),ne.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function wB(){const e=ne.useRef(null),t=ne.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=ne.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function uh(e,t){t===void 0&&(t=[e]);const n=ne.useRef(e);return Ho(()=>{n.current!==e&&(n.current=e)},t),n}function zh(e,t){const n=ne.useRef();return ne.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Rv(e){const t=kg(e),n=ne.useRef(null),r=ne.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function Nv(e){const t=ne.useRef();return ne.useEffect(()=>{t.current=e},[e]),t.current}let C0={};function Cg(e,t){return ne.useMemo(()=>{if(t)return t;const n=C0[e]==null?0:C0[e]+1;return C0[e]=n,e+"-"+n},[e,t])}function s$(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((a,s)=>{const u=Object.entries(s);for(const[c,d]of u){const h=a[c];h!=null&&(a[c]=h+e*d)}return a},{...t})}}const Dc=s$(1),Tv=s$(-1);function _B(e){return"clientX"in e&&"clientY"in e}function Xb(e){if(!e)return!1;const{KeyboardEvent:t}=Lr(e.target);return t&&e instanceof t}function bB(e){if(!e)return!1;const{TouchEvent:t}=Lr(e.target);return t&&e instanceof t}function Mv(e){if(bB(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return _B(e)?{x:e.clientX,y:e.clientY}:null}const lh=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[lh.Translate.toString(e),lh.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),DP="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function SB(e){return e.matches(DP)?e:e.querySelector(DP)}const xB={display:"none"};function EB(e){let{id:t,value:n}=e;return Dt.createElement("div",{id:t,style:xB},n)}function PB(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Dt.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function kB(){const[e,t]=ne.useState("");return{announce:ne.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const u$=ne.createContext(null);function l$(e){const t=ne.useContext(u$);ne.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function CB(){const[e]=ne.useState(()=>new Set),t=ne.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[ne.useCallback(r=>{let{type:i,event:a}=r;e.forEach(s=>{var u;return(u=s[i])==null?void 0:u.call(s,a)})},[e]),t]}const DB={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},OB={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function $B(e){let{announcements:t=OB,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=DB}=e;const{announce:a,announcement:s}=kB(),u=Cg("DndLiveRegion"),[c,d]=ne.useState(!1);if(ne.useEffect(()=>{d(!0)},[]),l$(ne.useMemo(()=>({onDragStart(v){let{active:g}=v;a(t.onDragStart({active:g}))},onDragMove(v){let{active:g,over:w}=v;t.onDragMove&&a(t.onDragMove({active:g,over:w}))},onDragOver(v){let{active:g,over:w}=v;a(t.onDragOver({active:g,over:w}))},onDragEnd(v){let{active:g,over:w}=v;a(t.onDragEnd({active:g,over:w}))},onDragCancel(v){let{active:g,over:w}=v;a(t.onDragCancel({active:g,over:w}))}}),[a,t])),!c)return null;const h=Dt.createElement(Dt.Fragment,null,Dt.createElement(EB,{id:r,value:i.draggable}),Dt.createElement(PB,{id:u,announcement:s}));return n?Xa.createPortal(h,n):h}var In;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(In||(In={}));function Iv(){}function OP(e,t){return ne.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function RB(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ne.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const $a=Object.freeze({x:0,y:0});function NB(e,t){const n=Mv(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function TB(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function MB(e,t){if(!e||e.length===0)return null;const[n]=e;return t?n[t]:n}function IB(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),s=i-r,u=a-n;if(r<i&&n<a){const c=t.width*t.height,d=e.width*e.height,h=s*u,v=h/(c+d-h);return Number(v.toFixed(4))}return 0}const AB=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const a of r){const{id:s}=a,u=n.get(s);if(u){const c=IB(u,t);c>0&&i.push({id:s,data:{droppableContainer:a,value:c}})}}return i.sort(TB)};function jB(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function c$(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:$a}function LB(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return i.reduce((s,u)=>({...s,top:s.top+e*u.y,bottom:s.bottom+e*u.y,left:s.left+e*u.x,right:s.right+e*u.x}),{...n})}}const zB=LB(1);function f$(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function FB(e,t,n){const r=f$(t);if(!r)return e;const{scaleX:i,scaleY:a,x:s,y:u}=r,c=e.left-s-(1-i)*parseFloat(n),d=e.top-u-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?e.width/i:e.width,v=a?e.height/a:e.height;return{width:h,height:v,top:d,right:c+h,bottom:d+v,left:c}}const BB={ignoreTransform:!1};function Fh(e,t){t===void 0&&(t=BB);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:h}=Lr(e).getComputedStyle(e);d&&(n=FB(n,d,h))}const{top:r,left:i,width:a,height:s,bottom:u,right:c}=n;return{top:r,left:i,width:a,height:s,bottom:u,right:c}}function $P(e){return Fh(e,{ignoreTransform:!0})}function WB(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function UB(e,t){return t===void 0&&(t=Lr(e).getComputedStyle(e)),t.position==="fixed"}function HB(e,t){t===void 0&&(t=Lr(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=t[i];return typeof a=="string"?n.test(a):!1})}function Qb(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(Vb(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Lh(i)||o$(i)||n.includes(i))return n;const a=Lr(e).getComputedStyle(i);return i!==e&&HB(i,a)&&n.push(i),UB(i,a)?n:r(i.parentNode)}return e?r(e):n}function d$(e){const[t]=Qb(e,1);return t??null}function D0(e){return!Pg||!e?null:lf(e)?e:Yb(e)?Vb(e)||e===cf(e).scrollingElement?window:Lh(e)?e:null:null}function h$(e){return lf(e)?e.scrollX:e.scrollLeft}function p$(e){return lf(e)?e.scrollY:e.scrollTop}function a_(e){return{x:h$(e),y:p$(e)}}var Kn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Kn||(Kn={}));function m$(e){return!Pg||!e?!1:e===document.scrollingElement}function v$(e){const t={x:0,y:0},n=m$(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,s=e.scrollTop>=r.y,u=e.scrollLeft>=r.x;return{isTop:i,isLeft:a,isBottom:s,isRight:u,maxScroll:r,minScroll:t}}const KB={x:.2,y:.2};function qB(e,t,n,r,i){let{top:a,left:s,right:u,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=KB);const{isTop:d,isBottom:h,isLeft:v,isRight:g}=v$(e),w={x:0,y:0},_={x:0,y:0},E={height:t.height*i.y,width:t.width*i.x};return!d&&a<=t.top+E.height?(w.y=Kn.Backward,_.y=r*Math.abs((t.top+E.height-a)/E.height)):!h&&c>=t.bottom-E.height&&(w.y=Kn.Forward,_.y=r*Math.abs((t.bottom-E.height-c)/E.height)),!g&&u>=t.right-E.width?(w.x=Kn.Forward,_.x=r*Math.abs((t.right-E.width-u)/E.width)):!v&&s<=t.left+E.width&&(w.x=Kn.Backward,_.x=r*Math.abs((t.left+E.width-s)/E.width)),{direction:w,speed:_}}function YB(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:s}=window;return{top:0,left:0,right:a,bottom:s,width:a,height:s}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function g$(e){return e.reduce((t,n)=>Dc(t,a_(n)),$a)}function VB(e){return e.reduce((t,n)=>t+h$(n),0)}function XB(e){return e.reduce((t,n)=>t+p$(n),0)}function y$(e,t){if(t===void 0&&(t=Fh),!e)return;const{top:n,left:r,bottom:i,right:a}=t(e);d$(e)&&(i<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const QB=[["x",["left","right"],VB],["y",["top","bottom"],XB]];class Gb{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Qb(n),i=g$(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,s,u]of QB)for(const c of s)Object.defineProperty(this,c,{get:()=>{const d=u(r),h=i[a]-d;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Nd{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function GB(e){const{EventTarget:t}=Lr(e);return e instanceof t?e:cf(e)}function O0(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Hi;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Hi||(Hi={}));function RP(e){e.preventDefault()}function JB(e){e.stopPropagation()}var Lt;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Lt||(Lt={}));const w$={start:[Lt.Space,Lt.Enter],cancel:[Lt.Esc],end:[Lt.Space,Lt.Enter,Lt.Tab]},ZB=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Lt.Right:return{...n,x:n.x+25};case Lt.Left:return{...n,x:n.x-25};case Lt.Down:return{...n,y:n.y+25};case Lt.Up:return{...n,y:n.y-25}}};class _${constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Nd(cf(n)),this.windowListeners=new Nd(Lr(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Hi.Resize,this.handleCancel),this.windowListeners.add(Hi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Hi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&y$(r),n($a)}handleKeyDown(t){if(Xb(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:a=w$,coordinateGetter:s=ZB,scrollBehavior:u="smooth"}=i,{code:c}=t;if(a.end.includes(c)){this.handleEnd(t);return}if(a.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=r.current,h=d?{x:d.left,y:d.top}:$a;this.referenceCoordinates||(this.referenceCoordinates=h);const v=s(t,{active:n,context:r.current,currentCoordinates:h});if(v){const g=Tv(v,h),w={x:0,y:0},{scrollableAncestors:_}=r.current;for(const E of _){const C=t.code,{isTop:x,isRight:S,isLeft:P,isBottom:M,maxScroll:T,minScroll:U}=v$(E),W=YB(E),re={x:Math.min(C===Lt.Right?W.right-W.width/2:W.right,Math.max(C===Lt.Right?W.left:W.left+W.width/2,v.x)),y:Math.min(C===Lt.Down?W.bottom-W.height/2:W.bottom,Math.max(C===Lt.Down?W.top:W.top+W.height/2,v.y))},he=C===Lt.Right&&!S||C===Lt.Left&&!P,de=C===Lt.Down&&!M||C===Lt.Up&&!x;if(he&&re.x!==v.x){const ce=E.scrollLeft+g.x,pe=C===Lt.Right&&ce<=T.x||C===Lt.Left&&ce>=U.x;if(pe&&!g.y){E.scrollTo({left:ce,behavior:u});return}pe?w.x=E.scrollLeft-ce:w.x=C===Lt.Right?E.scrollLeft-T.x:E.scrollLeft-U.x,w.x&&E.scrollBy({left:-w.x,behavior:u});break}else if(de&&re.y!==v.y){const ce=E.scrollTop+g.y,pe=C===Lt.Down&&ce<=T.y||C===Lt.Up&&ce>=U.y;if(pe&&!g.x){E.scrollTo({top:ce,behavior:u});return}pe?w.y=E.scrollTop-ce:w.y=C===Lt.Down?E.scrollTop-T.y:E.scrollTop-U.y,w.y&&E.scrollBy({top:-w.y,behavior:u});break}}this.handleMove(t,Dc(Tv(v,this.referenceCoordinates),w))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}_$.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=w$,onActivation:i}=t,{active:a}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const u=a.activatorNode.current;return u&&e.target!==u?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function NP(e){return!!(e&&"distance"in e)}function TP(e){return!!(e&&"delay"in e)}class Jb{constructor(t,n,r){var i;r===void 0&&(r=GB(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:s}=a;this.props=t,this.events=n,this.document=cf(s),this.documentListeners=new Nd(this.document),this.listeners=new Nd(r),this.windowListeners=new Nd(Lr(s)),this.initialCoordinates=(i=Mv(a))!=null?i:$a,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Hi.Resize,this.handleCancel),this.windowListeners.add(Hi.DragStart,RP),this.windowListeners.add(Hi.VisibilityChange,this.handleCancel),this.windowListeners.add(Hi.ContextMenu,RP),this.documentListeners.add(Hi.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(TP(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(NP(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Hi.Click,JB,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Hi.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:a}=this,{onMove:s,options:{activationConstraint:u}}=a;if(!i)return;const c=(n=Mv(t))!=null?n:$a,d=Tv(i,c);if(!r&&u){if(NP(u)){if(u.tolerance!=null&&O0(d,u.tolerance))return this.handleCancel();if(O0(d,u.distance))return this.handleStart()}if(TP(u)&&O0(d,u.tolerance))return this.handleCancel();this.handlePending(u,d);return}t.cancelable&&t.preventDefault(),s(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Lt.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const eW={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class b$ extends Jb{constructor(t){const{event:n}=t,r=cf(n.target);super(t,eW,r)}}b$.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const tW={move:{name:"mousemove"},end:{name:"mouseup"}};var o_;(function(e){e[e.RightClick=2]="RightClick"})(o_||(o_={}));class S$ extends Jb{constructor(t){super(t,tW,cf(t.event.target))}}S$.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===o_.RightClick?!1:(r==null||r({event:n}),!0)}}];const $0={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class x$ extends Jb{constructor(t){super(t,$0)}static setup(){return window.addEventListener($0.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener($0.move.name,t)};function t(){}}}x$.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Td;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Td||(Td={}));var Av;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Av||(Av={}));function nW(e){let{acceleration:t,activator:n=Td.Pointer,canScroll:r,draggingRect:i,enabled:a,interval:s=5,order:u=Av.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:h,delta:v,threshold:g}=e;const w=iW({delta:v,disabled:!a}),[_,E]=wB(),C=ne.useRef({x:0,y:0}),x=ne.useRef({x:0,y:0}),S=ne.useMemo(()=>{switch(n){case Td.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Td.DraggableRect:return i}},[n,i,c]),P=ne.useRef(null),M=ne.useCallback(()=>{const U=P.current;if(!U)return;const W=C.current.x*x.current.x,re=C.current.y*x.current.y;U.scrollBy(W,re)},[]),T=ne.useMemo(()=>u===Av.TreeOrder?[...d].reverse():d,[u,d]);ne.useEffect(()=>{if(!a||!d.length||!S){E();return}for(const U of T){if((r==null?void 0:r(U))===!1)continue;const W=d.indexOf(U),re=h[W];if(!re)continue;const{direction:he,speed:de}=qB(U,re,S,t,g);for(const ce of["x","y"])w[ce][he[ce]]||(de[ce]=0,he[ce]=0);if(de.x>0||de.y>0){E(),P.current=U,_(M,s),C.current=de,x.current=he;return}}C.current={x:0,y:0},x.current={x:0,y:0},E()},[t,M,r,E,a,s,JSON.stringify(S),JSON.stringify(w),_,d,T,h,JSON.stringify(g)])}const rW={x:{[Kn.Backward]:!1,[Kn.Forward]:!1},y:{[Kn.Backward]:!1,[Kn.Forward]:!1}};function iW(e){let{delta:t,disabled:n}=e;const r=Nv(t);return zh(i=>{if(n||!r||!i)return rW;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Kn.Backward]:i.x[Kn.Backward]||a.x===-1,[Kn.Forward]:i.x[Kn.Forward]||a.x===1},y:{[Kn.Backward]:i.y[Kn.Backward]||a.y===-1,[Kn.Forward]:i.y[Kn.Forward]||a.y===1}}},[n,t,r])}function aW(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return zh(i=>{var a;return t==null?null:(a=r??i)!=null?a:null},[r,t])}function oW(e,t){return ne.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,a=i.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,r)}));return[...n,...a]},[]),[e,t])}var ch;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ch||(ch={}));var s_;(function(e){e.Optimized="optimized"})(s_||(s_={}));const MP=new Map;function sW(e,t){let{dragging:n,dependencies:r,config:i}=t;const[a,s]=ne.useState(null),{frequency:u,measure:c,strategy:d}=i,h=ne.useRef(e),v=C(),g=uh(v),w=ne.useCallback(function(x){x===void 0&&(x=[]),!g.current&&s(S=>S===null?x:S.concat(x.filter(P=>!S.includes(P))))},[g]),_=ne.useRef(null),E=zh(x=>{if(v&&!n)return MP;if(!x||x===MP||h.current!==e||a!=null){const S=new Map;for(let P of e){if(!P)continue;if(a&&a.length>0&&!a.includes(P.id)&&P.rect.current){S.set(P.id,P.rect.current);continue}const M=P.node.current,T=M?new Gb(c(M),M):null;P.rect.current=T,T&&S.set(P.id,T)}return S}return x},[e,a,n,v,c]);return ne.useEffect(()=>{h.current=e},[e]),ne.useEffect(()=>{v||w()},[n,v]),ne.useEffect(()=>{a&&a.length>0&&s(null)},[JSON.stringify(a)]),ne.useEffect(()=>{v||typeof u!="number"||_.current!==null||(_.current=setTimeout(()=>{w(),_.current=null},u))},[u,v,w,...r]),{droppableRects:E,measureDroppableContainers:w,measuringScheduled:a!=null};function C(){switch(d){case ch.Always:return!1;case ch.BeforeDragging:return n;default:return!n}}}function Zb(e,t){return zh(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function uW(e,t){return Zb(e,t)}function lW(e){let{callback:t,disabled:n}=e;const r=kg(t),i=ne.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return ne.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Dg(e){let{callback:t,disabled:n}=e;const r=kg(t),i=ne.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return ne.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function cW(e){return new Gb(Fh(e),e)}function IP(e,t,n){t===void 0&&(t=cW);const[r,i]=ne.useState(null);function a(){i(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??n)!=null?d:null}const h=t(e);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const s=lW({callback(c){if(e)for(const d of c){const{type:h,target:v}=d;if(h==="childList"&&v instanceof HTMLElement&&v.contains(e)){a();break}}}}),u=Dg({callback:a});return Ho(()=>{a(),e?(u==null||u.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),s==null||s.disconnect())},[e]),r}function fW(e){const t=Zb(e);return c$(e,t)}const AP=[];function dW(e){const t=ne.useRef(e),n=zh(r=>e?r&&r!==AP&&e&&t.current&&e.parentNode===t.current.parentNode?r:Qb(e):AP,[e]);return ne.useEffect(()=>{t.current=e},[e]),n}function hW(e){const[t,n]=ne.useState(null),r=ne.useRef(e),i=ne.useCallback(a=>{const s=D0(a.target);s&&n(u=>u?(u.set(s,a_(s)),new Map(u)):null)},[]);return ne.useEffect(()=>{const a=r.current;if(e!==a){s(a);const u=e.map(c=>{const d=D0(c);return d?(d.addEventListener("scroll",i,{passive:!0}),[d,a_(d)]):null}).filter(c=>c!=null);n(u.length?new Map(u):null),r.current=e}return()=>{s(e),s(a)};function s(u){u.forEach(c=>{const d=D0(c);d==null||d.removeEventListener("scroll",i)})}},[i,e]),ne.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,s)=>Dc(a,s),$a):g$(e):$a,[e,t])}function jP(e,t){t===void 0&&(t=[]);const n=ne.useRef(null);return ne.useEffect(()=>{n.current=null},t),ne.useEffect(()=>{const r=e!==$a;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Tv(e,n.current):$a}function pW(e){ne.useEffect(()=>{if(!Pg)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function mW(e,t){return ne.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:a}=r;return n[i]=s=>{a(s,t)},n},{}),[e,t])}function E$(e){return ne.useMemo(()=>e?WB(e):null,[e])}const LP=[];function vW(e,t){t===void 0&&(t=Fh);const[n]=e,r=E$(n?Lr(n):null),[i,a]=ne.useState(LP);function s(){a(()=>e.length?e.map(c=>m$(c)?r:new Gb(t(c),c)):LP)}const u=Dg({callback:s});return Ho(()=>{u==null||u.disconnect(),s(),e.forEach(c=>u==null?void 0:u.observe(c))},[e]),i}function P$(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Lh(t)?t:e}function gW(e){let{measure:t}=e;const[n,r]=ne.useState(null),i=ne.useCallback(d=>{for(const{target:h}of d)if(Lh(h)){r(v=>{const g=t(h);return v?{...v,width:g.width,height:g.height}:g});break}},[t]),a=Dg({callback:i}),s=ne.useCallback(d=>{const h=P$(d);a==null||a.disconnect(),h&&(a==null||a.observe(h)),r(h?t(h):null)},[t,a]),[u,c]=Rv(s);return ne.useMemo(()=>({nodeRef:u,rect:n,setRef:c}),[n,u,c])}const yW=[{sensor:b$,options:{}},{sensor:_$,options:{}}],wW={current:{}},Ym={draggable:{measure:$P},droppable:{measure:$P,strategy:ch.WhileDragging,frequency:s_.Optimized},dragOverlay:{measure:Fh}};class Md extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const _W={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Md,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Iv},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ym,measureDroppableContainers:Iv,windowRect:null,measuringScheduled:!1},k$={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Iv,draggableNodes:new Map,over:null,measureDroppableContainers:Iv},Bh=ne.createContext(k$),C$=ne.createContext(_W);function bW(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Md}}}function SW(e,t){switch(t.type){case In.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case In.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case In.DragEnd:case In.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case In.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Md(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case In.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const s=new Md(e.droppable.containers);return s.set(n,{...a,disabled:i}),{...e,droppable:{...e.droppable,containers:s}}}case In.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const a=new Md(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function xW(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=ne.useContext(Bh),a=Nv(r),s=Nv(n==null?void 0:n.id);return ne.useEffect(()=>{if(!t&&!r&&a&&s!=null){if(!Xb(a)||document.activeElement===a.target)return;const u=i.get(s);if(!u)return;const{activatorNode:c,node:d}=u;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const h of[c.current,d.current]){if(!h)continue;const v=SB(h);if(v){v.focus();break}}})}},[r,t,i,s,a]),null}function D$(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,a)=>a({transform:i,...r}),n):n}function EW(e){return ne.useMemo(()=>({draggable:{...Ym.draggable,...e==null?void 0:e.draggable},droppable:{...Ym.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Ym.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function PW(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const a=ne.useRef(!1),{x:s,y:u}=typeof i=="boolean"?{x:i,y:i}:i;Ho(()=>{if(!s&&!u||!t){a.current=!1;return}if(a.current||!r)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const h=n(d),v=c$(h,r);if(s||(v.x=0),u||(v.y=0),a.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const g=d$(d);g&&g.scrollBy({top:v.y,left:v.x})}},[t,s,u,r,n])}const Og=ne.createContext({...$a,scaleX:1,scaleY:1});var Ss;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ss||(Ss={}));const kW=ne.memo(function(t){var n,r,i,a;let{id:s,accessibility:u,autoScroll:c=!0,children:d,sensors:h=yW,collisionDetection:v=AB,measuring:g,modifiers:w,..._}=t;const E=ne.useReducer(SW,void 0,bW),[C,x]=E,[S,P]=CB(),[M,T]=ne.useState(Ss.Uninitialized),U=M===Ss.Initialized,{draggable:{active:W,nodes:re,translate:he},droppable:{containers:de}}=C,ce=W!=null?re.get(W):null,pe=ne.useRef({initial:null,translated:null}),xe=ne.useMemo(()=>{var Xt;return W!=null?{id:W,data:(Xt=ce==null?void 0:ce.data)!=null?Xt:wW,rect:pe}:null},[W,ce]),Ce=ne.useRef(null),[Le,qe]=ne.useState(null),[We,oe]=ne.useState(null),_e=uh(_,Object.values(_)),G=Cg("DndDescribedBy",s),F=ne.useMemo(()=>de.getEnabled(),[de]),ee=EW(g),{droppableRects:X,measureDroppableContainers:I,measuringScheduled:H}=sW(F,{dragging:U,dependencies:[he.x,he.y],config:ee.droppable}),ae=aW(re,W),ge=ne.useMemo(()=>We?Mv(We):null,[We]),$e=fu(),me=uW(ae,ee.draggable.measure);PW({activeNode:W!=null?re.get(W):null,config:$e.layoutShiftCompensation,initialRect:me,measure:ee.draggable.measure});const Me=IP(ae,ee.draggable.measure,me),Ge=IP(ae?ae.parentElement:null),Ke=ne.useRef({activatorEvent:null,active:null,activeNode:ae,collisionRect:null,collisions:null,droppableRects:X,draggableNodes:re,draggingNode:null,draggingNodeRect:null,droppableContainers:de,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),an=de.getNodeFor((n=Ke.current.over)==null?void 0:n.id),Et=gW({measure:ee.dragOverlay.measure}),At=(r=Et.nodeRef.current)!=null?r:ae,dn=U?(i=Et.rect)!=null?i:Me:null,on=!!(Et.nodeRef.current&&Et.rect),sr=fW(on?null:Me),Yn=E$(At?Lr(At):null),sn=dW(U?an??ae:null),_t=vW(sn),Vn=D$(w,{transform:{x:he.x-sr.x,y:he.y-sr.y,scaleX:1,scaleY:1},activatorEvent:We,active:xe,activeNodeRect:Me,containerNodeRect:Ge,draggingNodeRect:dn,over:Ke.current.over,overlayNodeRect:Et.rect,scrollableAncestors:sn,scrollableAncestorRects:_t,windowRect:Yn}),Xn=ge?Dc(ge,he):null,ra=hW(sn),Qn=jP(ra),Gn=jP(ra,[Me]),Sn=Dc(Vn,Qn),un=dn?zB(dn,Vn):null,ur=xe&&un?v({active:xe,collisionRect:un,droppableRects:X,droppableContainers:F,pointerCoordinates:Xn}):null,si=MB(ur,"id"),[xn,ia]=ne.useState(null),uo=on?Vn:Dc(Vn,Gn),Br=jB(uo,(a=xn==null?void 0:xn.rect)!=null?a:null,Me),Fe=ne.useRef(null),Oi=ne.useCallback((Xt,zn)=>{let{sensor:On,options:$i}=zn;if(Ce.current==null)return;const lr=re.get(Ce.current);if(!lr)return;const Qt=Xt.nativeEvent,$n=new On({active:Ce.current,activeNode:lr,event:Qt,options:$i,context:Ke,onAbort(qt){if(!re.get(qt))return;const{onDragAbort:bt}=_e.current,xr={id:qt};bt==null||bt(xr),S({type:"onDragAbort",event:xr})},onPending(qt,dt,bt,xr){if(!re.get(qt))return;const{onDragPending:Ti}=_e.current,Er={id:qt,constraint:dt,initialCoordinates:bt,offset:xr};Ti==null||Ti(Er),S({type:"onDragPending",event:Er})},onStart(qt){const dt=Ce.current;if(dt==null)return;const bt=re.get(dt);if(!bt)return;const{onDragStart:xr}=_e.current,Ni={activatorEvent:Qt,active:{id:dt,data:bt.data,rect:pe}};Xa.unstable_batchedUpdates(()=>{xr==null||xr(Ni),T(Ss.Initializing),x({type:In.DragStart,initialCoordinates:qt,active:dt}),S({type:"onDragStart",event:Ni}),qe(Fe.current),oe(Qt)})},onMove(qt){x({type:In.DragMove,coordinates:qt})},onEnd:Ri(In.DragEnd),onCancel:Ri(In.DragCancel)});Fe.current=$n;function Ri(qt){return async function(){const{active:bt,collisions:xr,over:Ni,scrollAdjustedTranslate:Ti}=Ke.current;let Er=null;if(bt&&Ti){const{cancelDrop:co}=_e.current;Er={activatorEvent:Qt,active:bt,collisions:xr,delta:Ti,over:Ni},qt===In.DragEnd&&typeof co=="function"&&await Promise.resolve(co(Er))&&(qt=In.DragCancel)}Ce.current=null,Xa.unstable_batchedUpdates(()=>{x({type:qt}),T(Ss.Uninitialized),ia(null),qe(null),oe(null),Fe.current=null;const co=qt===In.DragEnd?"onDragEnd":"onDragCancel";if(Er){const Wr=_e.current[co];Wr==null||Wr(Er),S({type:co,event:Er})}})}}},[re]),ui=ne.useCallback((Xt,zn)=>(On,$i)=>{const lr=On.nativeEvent,Qt=re.get($i);if(Ce.current!==null||!Qt||lr.dndKit||lr.defaultPrevented)return;const $n={active:Qt};Xt(On,zn.options,$n)===!0&&(lr.dndKit={capturedBy:zn.sensor},Ce.current=$i,Oi(On,zn))},[re,Oi]),lo=oW(h,ui);pW(h),Ho(()=>{Me&&M===Ss.Initializing&&T(Ss.Initialized)},[Me,M]),ne.useEffect(()=>{const{onDragMove:Xt}=_e.current,{active:zn,activatorEvent:On,collisions:$i,over:lr}=Ke.current;if(!zn||!On)return;const Qt={active:zn,activatorEvent:On,collisions:$i,delta:{x:Sn.x,y:Sn.y},over:lr};Xa.unstable_batchedUpdates(()=>{Xt==null||Xt(Qt),S({type:"onDragMove",event:Qt})})},[Sn.x,Sn.y]),ne.useEffect(()=>{const{active:Xt,activatorEvent:zn,collisions:On,droppableContainers:$i,scrollAdjustedTranslate:lr}=Ke.current;if(!Xt||Ce.current==null||!zn||!lr)return;const{onDragOver:Qt}=_e.current,$n=$i.get(si),Ri=$n&&$n.rect.current?{id:$n.id,rect:$n.rect.current,data:$n.data,disabled:$n.disabled}:null,qt={active:Xt,activatorEvent:zn,collisions:On,delta:{x:lr.x,y:lr.y},over:Ri};Xa.unstable_batchedUpdates(()=>{ia(Ri),Qt==null||Qt(qt),S({type:"onDragOver",event:qt})})},[si]),Ho(()=>{Ke.current={activatorEvent:We,active:xe,activeNode:ae,collisionRect:un,collisions:ur,droppableRects:X,draggableNodes:re,draggingNode:At,draggingNodeRect:dn,droppableContainers:de,over:xn,scrollableAncestors:sn,scrollAdjustedTranslate:Sn},pe.current={initial:dn,translated:un}},[xe,ae,ur,un,re,At,dn,X,de,xn,sn,Sn]),nW({...$e,delta:he,draggingRect:un,pointerCoordinates:Xn,scrollableAncestors:sn,scrollableAncestorRects:_t});const Ne=ne.useMemo(()=>({active:xe,activeNode:ae,activeNodeRect:Me,activatorEvent:We,collisions:ur,containerNodeRect:Ge,dragOverlay:Et,draggableNodes:re,droppableContainers:de,droppableRects:X,over:xn,measureDroppableContainers:I,scrollableAncestors:sn,scrollableAncestorRects:_t,measuringConfiguration:ee,measuringScheduled:H,windowRect:Yn}),[xe,ae,Me,We,ur,Ge,Et,re,de,X,xn,I,sn,_t,ee,H,Yn]),cu=ne.useMemo(()=>({activatorEvent:We,activators:lo,active:xe,activeNodeRect:Me,ariaDescribedById:{draggable:G},dispatch:x,draggableNodes:re,over:xn,measureDroppableContainers:I}),[We,lo,xe,Me,x,G,re,xn,I]);return Dt.createElement(u$.Provider,{value:P},Dt.createElement(Bh.Provider,{value:cu},Dt.createElement(C$.Provider,{value:Ne},Dt.createElement(Og.Provider,{value:Br},d)),Dt.createElement(xW,{disabled:(u==null?void 0:u.restoreFocus)===!1})),Dt.createElement($B,{...u,hiddenTextDescribedById:G}));function fu(){const Xt=(Le==null?void 0:Le.autoScrollEnabled)===!1,zn=typeof c=="object"?c.enabled===!1:c===!1,On=U&&!Xt&&!zn;return typeof c=="object"?{...c,enabled:On}:{enabled:On}}}),CW=ne.createContext(null),zP="button",DW="Draggable";function O$(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const a=Cg(DW),{activators:s,activatorEvent:u,active:c,activeNodeRect:d,ariaDescribedById:h,draggableNodes:v,over:g}=ne.useContext(Bh),{role:w=zP,roleDescription:_="draggable",tabIndex:E=0}=i??{},C=(c==null?void 0:c.id)===t,x=ne.useContext(C?Og:CW),[S,P]=Rv(),[M,T]=Rv(),U=mW(s,t),W=uh(n);Ho(()=>(v.set(t,{id:t,key:a,node:S,activatorNode:M,data:W}),()=>{const he=v.get(t);he&&he.key===a&&v.delete(t)}),[v,t]);const re=ne.useMemo(()=>({role:w,tabIndex:E,"aria-disabled":r,"aria-pressed":C&&w===zP?!0:void 0,"aria-roledescription":_,"aria-describedby":h.draggable}),[r,w,E,C,_,h.draggable]);return{active:c,activatorEvent:u,activeNodeRect:d,attributes:re,isDragging:C,listeners:r?void 0:U,node:S,over:g,setNodeRef:P,setActivatorNodeRef:T,transform:x}}function OW(){return ne.useContext(C$)}const $W="Droppable",RW={timeout:25};function Wh(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const a=Cg($W),{active:s,dispatch:u,over:c,measureDroppableContainers:d}=ne.useContext(Bh),h=ne.useRef({disabled:n}),v=ne.useRef(!1),g=ne.useRef(null),w=ne.useRef(null),{disabled:_,updateMeasurementsFor:E,timeout:C}={...RW,...i},x=uh(E??r),S=ne.useCallback(()=>{if(!v.current){v.current=!0;return}w.current!=null&&clearTimeout(w.current),w.current=setTimeout(()=>{d(Array.isArray(x.current)?x.current:[x.current]),w.current=null},C)},[C]),P=Dg({callback:S,disabled:_||!s}),M=ne.useCallback((re,he)=>{P&&(he&&(P.unobserve(he),v.current=!1),re&&P.observe(re))},[P]),[T,U]=Rv(M),W=uh(t);return ne.useEffect(()=>{!P||!T.current||(P.disconnect(),v.current=!1,P.observe(T.current))},[T,P]),ne.useEffect(()=>(u({type:In.RegisterDroppable,element:{id:r,key:a,disabled:n,node:T,rect:g,data:W}}),()=>u({type:In.UnregisterDroppable,key:a,id:r})),[r]),ne.useEffect(()=>{n!==h.current.disabled&&(u({type:In.SetDroppableDisabled,id:r,key:a,disabled:n}),h.current.disabled=n)},[r,a,n,u]),{active:s,rect:g,isOver:(c==null?void 0:c.id)===r,node:T,over:c,setNodeRef:U}}function NW(e){let{animation:t,children:n}=e;const[r,i]=ne.useState(null),[a,s]=ne.useState(null),u=Nv(n);return!n&&!r&&u&&i(u),Ho(()=>{if(!a)return;const c=r==null?void 0:r.key,d=r==null?void 0:r.props.id;if(c==null||d==null){i(null);return}Promise.resolve(t(d,a)).then(()=>{i(null)})},[t,r,a]),Dt.createElement(Dt.Fragment,null,n,r?ne.cloneElement(r,{ref:s}):null)}const TW={x:0,y:0,scaleX:1,scaleY:1};function MW(e){let{children:t}=e;return Dt.createElement(Bh.Provider,{value:k$},Dt.createElement(Og.Provider,{value:TW},t))}const IW={position:"fixed",touchAction:"none"},AW=e=>Xb(e)?"transform 250ms ease":void 0,jW=ne.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:i,children:a,className:s,rect:u,style:c,transform:d,transition:h=AW}=e;if(!u)return null;const v=i?d:{...d,scaleX:1,scaleY:1},g={...IW,width:u.width,height:u.height,top:u.top,left:u.left,transform:lh.Transform.toString(v),transformOrigin:i&&r?NB(r,u):void 0,transition:typeof h=="function"?h(r):h,...c};return Dt.createElement(n,{className:s,style:g,ref:t},a)}),LW=e=>t=>{let{active:n,dragOverlay:r}=t;const i={},{styles:a,className:s}=e;if(a!=null&&a.active)for(const[u,c]of Object.entries(a.active))c!==void 0&&(i[u]=n.node.style.getPropertyValue(u),n.node.style.setProperty(u,c));if(a!=null&&a.dragOverlay)for(const[u,c]of Object.entries(a.dragOverlay))c!==void 0&&r.node.style.setProperty(u,c);return s!=null&&s.active&&n.node.classList.add(s.active),s!=null&&s.dragOverlay&&r.node.classList.add(s.dragOverlay),function(){for(const[c,d]of Object.entries(i))n.node.style.setProperty(c,d);s!=null&&s.active&&n.node.classList.remove(s.active)}},zW=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:lh.Transform.toString(t)},{transform:lh.Transform.toString(n)}]},FW={duration:250,easing:"ease",keyframes:zW,sideEffects:LW({styles:{active:{opacity:"0"}}})};function BW(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=e;return kg((a,s)=>{if(t===null)return;const u=n.get(a);if(!u)return;const c=u.node.current;if(!c)return;const d=P$(s);if(!d)return;const{transform:h}=Lr(s).getComputedStyle(s),v=f$(h);if(!v)return;const g=typeof t=="function"?t:WW(t);return y$(c,i.draggable.measure),g({active:{id:a,data:u.data,node:c,rect:i.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:s,rect:i.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:i,transform:v})})}function WW(e){const{duration:t,easing:n,sideEffects:r,keyframes:i}={...FW,...e};return a=>{let{active:s,dragOverlay:u,transform:c,...d}=a;if(!t)return;const h={x:u.rect.left-s.rect.left,y:u.rect.top-s.rect.top},v={scaleX:c.scaleX!==1?s.rect.width*c.scaleX/u.rect.width:1,scaleY:c.scaleY!==1?s.rect.height*c.scaleY/u.rect.height:1},g={x:c.x-h.x,y:c.y-h.y,...v},w=i({...d,active:s,dragOverlay:u,transform:{initial:c,final:g}}),[_]=w,E=w[w.length-1];if(JSON.stringify(_)===JSON.stringify(E))return;const C=r==null?void 0:r({active:s,dragOverlay:u,...d}),x=u.node.animate(w,{duration:t,easing:n,fill:"forwards"});return new Promise(S=>{x.onfinish=()=>{C==null||C(),S()}})}}let FP=0;function UW(e){return ne.useMemo(()=>{if(e!=null)return FP++,FP},[e])}const HW=Dt.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:i,transition:a,modifiers:s,wrapperElement:u="div",className:c,zIndex:d=999}=e;const{activatorEvent:h,active:v,activeNodeRect:g,containerNodeRect:w,draggableNodes:_,droppableContainers:E,dragOverlay:C,over:x,measuringConfiguration:S,scrollableAncestors:P,scrollableAncestorRects:M,windowRect:T}=OW(),U=ne.useContext(Og),W=UW(v==null?void 0:v.id),re=D$(s,{activatorEvent:h,active:v,activeNodeRect:g,containerNodeRect:w,draggingNodeRect:C.rect,over:x,overlayNodeRect:C.rect,scrollableAncestors:P,scrollableAncestorRects:M,transform:U,windowRect:T}),he=Zb(g),de=BW({config:r,draggableNodes:_,droppableContainers:E,measuringConfiguration:S}),ce=he?C.setRef:void 0;return Dt.createElement(MW,null,Dt.createElement(NW,{animation:de},v&&W?Dt.createElement(jW,{key:W,id:v.id,ref:ce,as:u,activatorEvent:h,adjustScale:t,className:c,transition:a,rect:he,style:{zIndex:d,...i},transform:re},n):null))}),$$=6048e5,KW=864e5,$g=6e4,R$=36e5,BP=Symbol.for("constructDateFrom");function bi(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&BP in e?e[BP](t):e instanceof Date?new e.constructor(t):new Date(t)}function rn(e,t){return bi(t||e,e)}function jv(e,t,n){const r=rn(e,n==null?void 0:n.in);return isNaN(t)?bi((n==null?void 0:n.in)||e,NaN):(t&&r.setDate(r.getDate()+t),r)}function N$(e,t,n){const r=rn(e,n==null?void 0:n.in);if(isNaN(t))return bi((n==null?void 0:n.in)||e,NaN);if(!t)return r;const i=r.getDate(),a=bi((n==null?void 0:n.in)||e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const s=a.getDate();return i>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}let qW={};function Uh(){return qW}function Gs(e,t){var u,c,d,h;const n=Uh(),r=(t==null?void 0:t.weekStartsOn)??((c=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,i=rn(e,t==null?void 0:t.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function Lv(e,t){return Gs(e,{...t,weekStartsOn:1})}function T$(e,t){const n=rn(e,t==null?void 0:t.in),r=n.getFullYear(),i=bi(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=Lv(i),s=bi(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const u=Lv(s);return n.getTime()>=a.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function WP(e){const t=rn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Hh(e,...t){const n=bi.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function Rs(e,t){const n=rn(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function M$(e,t,n){const[r,i]=Hh(n==null?void 0:n.in,e,t),a=Rs(r),s=Rs(i),u=+a-WP(a),c=+s-WP(s);return Math.round((u-c)/KW)}function YW(e,t){const n=T$(e,t),r=bi((t==null?void 0:t.in)||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Lv(r)}function Oc(e,t,n){const r=rn(e,n==null?void 0:n.in);return r.setTime(r.getTime()+t*$g),r}function I$(e,t,n){return jv(e,t*7,n)}function ec(e,t,n){const[r,i]=Hh(n==null?void 0:n.in,e,t);return+Rs(r)==+Rs(i)}function VW(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function XW(e){return!(!VW(e)&&typeof e!="number"||isNaN(+rn(e)))}function QW(e,t,n){const[r,i]=Hh(n==null?void 0:n.in,e,t),a=UP(r,i),s=Math.abs(M$(r,i));r.setDate(r.getDate()-a*s);const u=+(UP(r,i)===-a),c=a*(s-u);return c===0?0:c}function UP(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function GW(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function JW(e,t){return+rn(e)-+rn(t)}function Ns(e,t,n){const r=JW(e,t)/$g;return GW(n==null?void 0:n.roundingMethod)(r)}function u_(e,t){const n=rn(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function ZW(e,t){const[n,r]=Hh(e,t.start,t.end);return{start:n,end:r}}function HP(e,t){const{start:n,end:r}=ZW(t==null?void 0:t.in,e);let i=+n>+r;const a=i?+n:+r,s=i?r:n;s.setHours(0,0,0,0);let u=(t==null?void 0:t.step)??1;if(!u)return[];u<0&&(u=-u,i=!i);const c=[];for(;+s<=a;)c.push(bi(n,s)),s.setDate(s.getDate()+u),s.setHours(0,0,0,0);return i?c.reverse():c}function l_(e,t){const n=rn(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function e5(e,t){const n=rn(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function c_(e,t){var u,c,d,h;const n=Uh(),r=(t==null?void 0:t.weekStartsOn)??((c=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,i=rn(e,t==null?void 0:t.in),a=i.getDay(),s=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}const t5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},n5=(e,t,n)=>{let r;const i=t5[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function R0(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const r5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},i5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},a5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},o5={date:R0({formats:r5,defaultWidth:"full"}),time:R0({formats:i5,defaultWidth:"full"}),dateTime:R0({formats:a5,defaultWidth:"full"})},s5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},u5=(e,t,n,r)=>s5[e];function ld(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,u=n!=null&&n.width?String(n.width):s;i=e.formattingValues[u]||e.formattingValues[s]}else{const s=e.defaultWidth,u=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[u]||e.values[s]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const l5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},c5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},f5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},d5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},h5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},p5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},m5=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},v5={ordinalNumber:m5,era:ld({values:l5,defaultWidth:"wide"}),quarter:ld({values:c5,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ld({values:f5,defaultWidth:"wide"}),day:ld({values:d5,defaultWidth:"wide"}),dayPeriod:ld({values:h5,defaultWidth:"wide",formattingValues:p5,defaultFormattingWidth:"wide"})};function cd(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const s=a[0],u=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(u)?y5(u,v=>v.test(s)):g5(u,v=>v.test(s));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const h=t.slice(s.length);return{value:d,rest:h}}}function g5(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function y5(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function w5(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],a=t.match(e.parsePattern);if(!a)return null;let s=e.valueCallback?e.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const u=t.slice(i.length);return{value:s,rest:u}}}const _5=/^(\d+)(th|st|nd|rd)?/i,b5=/\d+/i,S5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},x5={any:[/^b/i,/^(a|c)/i]},E5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},P5={any:[/1/i,/2/i,/3/i,/4/i]},k5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},C5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},D5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},O5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},R5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},N5={ordinalNumber:w5({matchPattern:_5,parsePattern:b5,valueCallback:e=>parseInt(e,10)}),era:cd({matchPatterns:S5,defaultMatchWidth:"wide",parsePatterns:x5,defaultParseWidth:"any"}),quarter:cd({matchPatterns:E5,defaultMatchWidth:"wide",parsePatterns:P5,defaultParseWidth:"any",valueCallback:e=>e+1}),month:cd({matchPatterns:k5,defaultMatchWidth:"wide",parsePatterns:C5,defaultParseWidth:"any"}),day:cd({matchPatterns:D5,defaultMatchWidth:"wide",parsePatterns:O5,defaultParseWidth:"any"}),dayPeriod:cd({matchPatterns:$5,defaultMatchWidth:"any",parsePatterns:R5,defaultParseWidth:"any"})},T5={code:"en-US",formatDistance:n5,formatLong:o5,formatRelative:u5,localize:v5,match:N5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function M5(e,t){const n=rn(e,t==null?void 0:t.in);return M$(n,e5(n))+1}function I5(e,t){const n=rn(e,t==null?void 0:t.in),r=+Lv(n)-+YW(n);return Math.round(r/$$)+1}function A$(e,t){var h,v,g,w;const n=rn(e,t==null?void 0:t.in),r=n.getFullYear(),i=Uh(),a=(t==null?void 0:t.firstWeekContainsDate)??((v=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:v.firstWeekContainsDate)??i.firstWeekContainsDate??((w=(g=i.locale)==null?void 0:g.options)==null?void 0:w.firstWeekContainsDate)??1,s=bi((t==null?void 0:t.in)||e,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const u=Gs(s,t),c=bi((t==null?void 0:t.in)||e,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const d=Gs(c,t);return+n>=+u?r+1:+n>=+d?r:r-1}function A5(e,t){var u,c,d,h;const n=Uh(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,i=A$(e,t),a=bi((t==null?void 0:t.in)||e,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),Gs(a,t)}function j5(e,t){const n=rn(e,t==null?void 0:t.in),r=+Gs(n,t)-+A5(n,t);return Math.round(r/$$)+1}function Ct(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const ms={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Ct(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Ct(n+1,2)},d(e,t){return Ct(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Ct(e.getHours()%12||12,t.length)},H(e,t){return Ct(e.getHours(),t.length)},m(e,t){return Ct(e.getMinutes(),t.length)},s(e,t){return Ct(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Ct(i,t.length)}},tc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},KP={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ms.y(e,t)},Y:function(e,t,n,r){const i=A$(e,r),a=i>0?i:1-i;if(t==="YY"){const s=a%100;return Ct(s,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):Ct(a,t.length)},R:function(e,t){const n=T$(e);return Ct(n,t.length)},u:function(e,t){const n=e.getFullYear();return Ct(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ct(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ct(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return ms.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ct(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=j5(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):Ct(i,t.length)},I:function(e,t,n){const r=I5(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Ct(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):ms.d(e,t)},D:function(e,t,n){const r=M5(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ct(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Ct(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Ct(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return Ct(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=tc.noon:r===0?i=tc.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=tc.evening:r>=12?i=tc.afternoon:r>=4?i=tc.morning:i=tc.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ms.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):ms.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ct(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ct(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):ms.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):ms.s(e,t)},S:function(e,t){return ms.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return YP(r);case"XXXX":case"XX":return Hu(r);case"XXXXX":case"XXX":default:return Hu(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return YP(r);case"xxxx":case"xx":return Hu(r);case"xxxxx":case"xxx":default:return Hu(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+qP(r,":");case"OOOO":default:return"GMT"+Hu(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+qP(r,":");case"zzzz":default:return"GMT"+Hu(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return Ct(r,t.length)},T:function(e,t,n){return Ct(+e,t.length)}};function qP(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+t+Ct(a,2)}function YP(e,t){return e%60===0?(e>0?"-":"+")+Ct(Math.abs(e)/60,2):Hu(e,t)}function Hu(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Ct(Math.trunc(r/60),2),a=Ct(r%60,2);return n+i+t+a}const VP=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},j$=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},L5=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return VP(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",VP(r,t)).replace("{{time}}",j$(i,t))},z5={p:j$,P:L5},F5=/^D+$/,B5=/^Y+$/,W5=["D","DD","YY","YYYY"];function U5(e){return F5.test(e)}function H5(e){return B5.test(e)}function K5(e,t,n){const r=q5(e,t,n);if(console.warn(r),W5.includes(e))throw new RangeError(r)}function q5(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Y5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,V5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,X5=/^'([^]*?)'?$/,Q5=/''/g,G5=/[a-zA-Z]/;function it(e,t,n){var h,v,g,w,_,E,C,x;const r=Uh(),i=(n==null?void 0:n.locale)??r.locale??T5,a=(n==null?void 0:n.firstWeekContainsDate)??((v=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:v.firstWeekContainsDate)??r.firstWeekContainsDate??((w=(g=r.locale)==null?void 0:g.options)==null?void 0:w.firstWeekContainsDate)??1,s=(n==null?void 0:n.weekStartsOn)??((E=(_=n==null?void 0:n.locale)==null?void 0:_.options)==null?void 0:E.weekStartsOn)??r.weekStartsOn??((x=(C=r.locale)==null?void 0:C.options)==null?void 0:x.weekStartsOn)??0,u=rn(e,n==null?void 0:n.in);if(!XW(u))throw new RangeError("Invalid time value");let c=t.match(V5).map(S=>{const P=S[0];if(P==="p"||P==="P"){const M=z5[P];return M(S,i.formatLong)}return S}).join("").match(Y5).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const P=S[0];if(P==="'")return{isToken:!1,value:J5(S)};if(KP[P])return{isToken:!0,value:S};if(P.match(G5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+P+"`");return{isToken:!1,value:S}});i.localize.preprocessor&&(c=i.localize.preprocessor(u,c));const d={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return c.map(S=>{if(!S.isToken)return S.value;const P=S.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&H5(P)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&U5(P))&&K5(P,t,String(e));const M=KP[P[0]];return M(u,P,i.localize,d)}).join("")}function J5(e){const t=e.match(X5);return t?t[1].replace(Q5,"'"):e}function Z5(e,t,n){const[r,i]=Hh(n==null?void 0:n.in,e,t);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function eU(e,t){const n=()=>bi(t==null?void 0:t.in,NaN),r=(t==null?void 0:t.additionalDigits)??2,i=iU(e);let a;if(i.date){const d=aU(i.date,r);a=oU(d.restDateString,d.year)}if(!a||isNaN(+a))return n();const s=+a;let u=0,c;if(i.time&&(u=sU(i.time),isNaN(u)))return n();if(i.timezone){if(c=uU(i.timezone),isNaN(c))return n()}else{const d=new Date(s+u),h=rn(0,t==null?void 0:t.in);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return rn(s+u+c,t==null?void 0:t.in)}const gm={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},tU=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,nU=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,rU=/^([+-])(\d{2})(?::?(\d{2}))?$/;function iU(e){const t={},n=e.split(gm.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],gm.timeZoneDelimiter.test(t.date)&&(t.date=e.split(gm.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const i=gm.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function aU(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?i:a*100,restDateString:e.slice((r[1]||r[2]).length)}}function oU(e,t){if(t===null)return new Date(NaN);const n=e.match(tU);if(!n)return new Date(NaN);const r=!!n[4],i=fd(n[1]),a=fd(n[2])-1,s=fd(n[3]),u=fd(n[4]),c=fd(n[5])-1;if(r)return hU(t,u,c)?lU(t,u,c):new Date(NaN);{const d=new Date(0);return!fU(t,a,s)||!dU(t,i)?new Date(NaN):(d.setUTCFullYear(t,a,Math.max(i,s)),d)}}function fd(e){return e?parseInt(e):1}function sU(e){const t=e.match(nU);if(!t)return NaN;const n=N0(t[1]),r=N0(t[2]),i=N0(t[3]);return pU(n,r,i)?n*R$+r*$g+i*1e3:NaN}function N0(e){return e&&parseFloat(e.replace(",","."))||0}function uU(e){if(e==="Z")return 0;const t=e.match(rU);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return mU(r,i)?n*(r*R$+i*$g):NaN}function lU(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,a=(t-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+a),r}const cU=[31,null,31,30,31,30,31,31,30,31,30,31];function L$(e){return e%400===0||e%4===0&&e%100!==0}function fU(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(cU[t]||(L$(e)?29:28))}function dU(e,t){return t>=1&&t<=(L$(e)?366:365)}function hU(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function pU(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function mU(e,t){return t>=0&&t<=59}function Ki(e,t,n){const r=rn(e,n==null?void 0:n.in);return r.setHours(t),r}function Ts(e,t,n){const r=rn(e,n==null?void 0:n.in);return r.setMinutes(t),r}function vU(e,t,n){return N$(e,-t,n)}function gU(e,t,n){return I$(e,-t,n)}const yU=async(e,t)=>{var s;const{active:n,over:r}=e;if(!r)return;const i=n.data.current,a=r.data.current;if(!(!i||!a)&&i.entity_type==="task")try{const u=await t.items.findOne(i.id).exec();if(!u)return;if(a.type==="calendar_cell")await u.incrementalPatch({do_date:a.date,start_time:null});else if(a.type==="matrix_quad"){const c=a.quad,h={...u.properties||{}},v={};c==="Q1"?(h.priority="high",v.do_date=new Date().toISOString().split("T")[0]):c==="Q2"?h.priority="high":c==="Q3"?(h.priority="low",v.do_date=new Date().toISOString().split("T")[0]):c==="Q4"&&(h.priority="low",v.system_status="dropped"),v.properties=h,await u.incrementalPatch(v)}else if(a.type==="smart_list"){const c=((s=a.config)==null?void 0:s.criteria)||{},d={},h={...u.properties};if(c.do_date===null)d.do_date=null;else if(c.do_date==="today")d.do_date=new Date().toISOString().split("T")[0];else if(c.do_date==="tomorrow"){const v=new Date;v.setDate(v.getDate()+1),d.do_date=v.toISOString().split("T")[0]}else typeof c.do_date=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(c.do_date)&&(d.do_date=c.do_date);Object.keys(c).forEach(v=>{if(v.startsWith("properties.")){const g=v.replace("properties.","");h[g]=c[v]}}),c.system_status&&typeof c.system_status=="string"&&(d.system_status=c.system_status),d.properties=h,await u.incrementalPatch(d)}else if(a.type==="archive_bin")await u.incrementalPatch({system_status:"archived",completed_at:Date.now()});else if(a.type==="timeline_day"){const{day:c,startHour:d,totalMinutes:h}=a;let v=n.rect.current.translated;!v&&n.rect.current.initial&&e.delta&&(v={top:n.rect.current.initial.top+e.delta.y,left:n.rect.current.initial.left+e.delta.x,height:n.rect.current.initial.height,width:n.rect.current.initial.width,bottom:n.rect.current.initial.bottom+e.delta.y,right:n.rect.current.initial.right+e.delta.x});const g=r.rect;if(v&&g){const w=v.top-g.top,E=Math.max(0,Math.min(1,w/g.height))*h,C=Math.round(E/15)*15,x=Oc(Ki(Ts(new Date(c),0),d),C);let S=45;if(u.start_time&&u.end_time){const M=(new Date(u.end_time).getTime()-new Date(u.start_time).getTime())/6e4;M>0&&(S=M)}const P=Oc(x,S);await u.incrementalPatch({do_date:it(new Date(c),"yyyy-MM-dd"),start_time:x.toISOString(),end_time:P.toISOString()})}}else if(a.type==="project_detail"){const c=a.project_id;if(c){const d=u.properties||{};await u.incrementalPatch({properties:{...d,project_id:c}})}}}catch(u){console.error("Drag logic failed:",u)}},wU=({widgets:e})=>{const t=e.reduce((a,s)=>{const u=s.group_id;return u&&(a[u]||(a[u]=[]),a[u].push(s)),a},{}),n=()=>{const a=[];return Object.entries(t).forEach(([s,u])=>{const c=u.filter(w=>w.widget_type==="calendar_master"),d=u.filter(w=>w.widget_type==="smart_list"),h=u.filter(w=>w.widget_type==="detail"),v=u.filter(w=>w.widget_type==="project_header");c.forEach(w=>{d.forEach(_=>{a.push(r(w,_,`${s}-cal-list`))})}),c.forEach(w=>{v.forEach(_=>{a.push(r(w,_,`${s}-cal-header`))})});const g=u.filter(w=>w.widget_type==="timeline");c.forEach(w=>{g.forEach(_=>{a.push(r(w,_,`${s}-cal-timeline`))})}),v.forEach(w=>{d.forEach(_=>{a.push(r(w,_,`${s}-header-list`))})}),d.forEach(w=>{h.forEach(_=>{a.push(r(w,_,`${s}-list-detail`))})})}),a},r=(a,s,u)=>{var v;const c=a.geometry,d=s.geometry,h=((v=s.view_state)==null?void 0:v.is_pinned)||!1;return j.jsx("path",{d:i(c,d),stroke:h?"#cbd5e1":"#94a3b8",strokeWidth:"2",fill:"none",strokeDasharray:h?"5,5":"none",markerEnd:h?"url(#arrowhead-dashed)":"url(#arrowhead)"},`${u}-${a.id}-${s.id}`)},i=(a,s)=>{if(!a||!s)return"";const u=a.x+a.w/2,c=a.y+a.h/2,d=s.x+s.w/2,h=s.y+s.h/2,v=Math.abs(d-u),g=u+v*.5,w=c,_=d-v*.5;return`M ${u} ${c} C ${g} ${w}, ${_} ${h}, ${d} ${h}`};return j.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none overflow-visible",style:{zIndex:0},children:[j.jsxs("defs",{children:[j.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:j.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#94a3b8"})}),j.jsx("marker",{id:"arrowhead-dashed",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:j.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#cbd5e1"})})]}),n()]})};function fh(e){"@babel/helpers - typeof";return fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fh(e)}function _U(e,t){if(fh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(fh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bU(e){var t=_U(e,"string");return fh(t)=="symbol"?t:t+""}function XP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bU(r.key),r)}}function ou(e,t,n){return t&&XP(e.prototype,t),n&&XP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function SU(e){return e[e.length-1]}function dh(e){return Array.isArray(e)?e.slice(0):[e]}function xU(e,t){e=e.slice(0);for(var n=[];e.length;){var r=e.splice(0,t);n.push(r)}return n}function zv(e){return Array.isArray(e)}function EU(e){return e!=null}function T0(e,t){var n=0,r=-1;for(var i of e){r=r+1;var a=t(i,r);if(a)n=n+1;else break}return n}function ml(e,t){var n=t.length;if(n!==0){var r=e.length;e.length=r+t.length;for(var i=0;i<n;++i)e[r+i]=t[i]}}function PU(e){return e.filter(function(t,n,r){return r.indexOf(t)===n})}function Js(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(r==="-")return parseInt(t,10);t+=r}throw new Error("malformatted revision: "+e)}function Ko(e,t){var n=t?Js(t._rev)+1:1;return n+"-"+e}function kU(e){var t=e.split("."),n=t.length;return n===1?r=>r[e]:r=>{for(var i=r,a=0;a<n;++a){var s=t[a];if(i=i[s],typeof i>"u")return i}return i}}function It(e){return Object.assign({},e)}function CU(e){return Object.keys(e)[0]}function Fv(e,t=!1){if(!e)return e;if(!t&&Array.isArray(e))return e.sort((r,i)=>typeof r=="string"&&typeof i=="string"?r.localeCompare(i):typeof r=="object"?1:-1).map(r=>Fv(r,t));if(typeof e=="object"&&!Array.isArray(e)){var n={};return Object.keys(e).sort((r,i)=>r.localeCompare(i)).forEach(r=>{n[r]=Fv(e[r],t)}),n}return e}function f_(e){if(!e||e===null||typeof e!="object")return e;if(Array.isArray(e)){for(var t=new Array(e.length),n=t.length;n--;)t[n]=f_(e[n]);return t}var r={};for(var i in e)r[i]=f_(e[i]);return r}var Mr=f_;function Mo(e,t,n){return Object.defineProperty(e,t,{get:function(){return n}}),n}var e1=1;function ff(){return{lwt:e1}}function Ra(){return""}function DU(e){return Object.assign({},e,{_meta:void 0,_deleted:void 0,_rev:void 0})}function OU(e,t,n){if(t.length!==n.length)return!1;for(var r=0,i=t.length;r<i;){var a=t[r],s=n[r];if(r++,a[e]!==s[e]||a._rev!==s._rev||a._meta.lwt!==s._meta.lwt)return!1}return!0}function hh(e,t){return hh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},hh(e,t)}function t1(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,hh(e,t)}function d_(e){return d_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d_(e)}function $U(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function z$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z$=function(){return!!e})()}function RU(e,t,n){if(z$())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&hh(i,n.prototype),i}function Bv(e){var t=typeof Map=="function"?new Map:void 0;return Bv=function(r){if(r===null||!$U(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(r))return t.get(r);t.set(r,i)}function i(){return RU(r,arguments,d_(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),hh(i,r)},Bv(e)}var Tt={isDevMode(){return!1},deepFreezeWhenDevMode(e){return e},tunnelErrorMessage(e){return`
        RxDB Error-Code: `+e+`.
        Hint: Error messages are not included in RxDB core to reduce build size.
        To show the full error messages and to ensure that you do not make any mistakes when using RxDB,
        use the dev-mode plugin when you are in development mode: https://rxdb.info/dev-mode.html?console=error
        `}};function NU(e){var t="";return Object.keys(e).length===0||(t+="-".repeat(20)+`
`,t+=`Parameters:
`,t+=Object.keys(e).map(n=>{var r="[object Object]";try{n==="errors"?r=e[n].map(i=>JSON.stringify(i,Object.getOwnPropertyNames(i))):r=JSON.stringify(e[n],function(i,a){return a===void 0?null:a},2)}catch{}return n+": "+r}).join(`
`),t+=`
`),t}function F$(e,t,n){return`
`+e+`
`+NU(n)}var TU=function(e){function t(r,i,a={}){var s,u=F$(i,r,a);return s=e.call(this,u)||this,s.code=r,s.message=u,s.url=n1(r),s.parameters=a,s.rxdb=!0,s}t1(t,e);var n=t.prototype;return n.toString=function(){return this.message},ou(t,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])}(Bv(Error)),MU=function(e){function t(r,i,a={}){var s,u=F$(i,r,a);return s=e.call(this,u)||this,s.code=r,s.message=u,s.url=n1(r),s.parameters=a,s.rxdb=!0,s}t1(t,e);var n=t.prototype;return n.toString=function(){return this.message},ou(t,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])}(Bv(TypeError));function n1(e){return"https://rxdb.info/errors.html?console=errors#"+e}function B$(e){return`
Find out more about this error here: `+n1(e)+` 
`}function ze(e,t){return new TU(e,Tt.tunnelErrorMessage(e)+B$(e),t)}function Wv(e,t){return new MU(e,Tt.tunnelErrorMessage(e)+B$(e),t)}function Vc(e){return e&&e.status===409?e:!1}var IU={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function W$(e){return ze("COL20",{name:IU[e.status],document:e.documentId,writeError:e})}var ym;function AU(){var e;if(ym)return ym;if(typeof crypto>"u"||typeof crypto.subtle>"u"||typeof crypto.subtle.digest!="function")throw ze("UT8",{args:{typeof_crypto:typeof crypto,typeof_crypto_subtle:typeof(crypto==null?void 0:crypto.subtle),typeof_crypto_subtle_digest:typeof((e=crypto==null?void 0:crypto.subtle)==null?void 0:e.digest)}});return ym=crypto.subtle.digest.bind(crypto.subtle),ym}async function jU(e){var t=new TextEncoder().encode(e),n=await AU()("SHA-256",t),r=Array.prototype.map.call(new Uint8Array(n),i=>("00"+i.toString(16)).slice(-2)).join("");return r}var U$=jU;function LU(){return new Promise(e=>setTimeout(e,0))}function zU(e=0){return new Promise(t=>setTimeout(t,e))}function H$(e){return e&&typeof e.then=="function"?e:Promise.resolve(e)}var r1=Promise.resolve(!0),to=Promise.resolve(!1),i1=Promise.resolve(null),Gi=Promise.resolve();function Rg(e=1e4){return typeof requestIdleCallback=="function"?new Promise(t=>{requestIdleCallback(()=>t(),{timeout:e})}):zU(0)}var M0=Gi;function FU(e=void 0){return M0=M0.then(()=>Rg(e)),M0}function BU(e){typeof requestIdleCallback=="function"&&requestIdleCallback(()=>{e()})}function WU(e,t){return e.reduce((n,r)=>n.then(r),Promise.resolve(t))}var UU=/\./g,QP="abcdefghijklmnopqrstuvwxyz";function Kh(e=10){for(var t="",n=0;n<e;n++)t+=QP.charAt(Math.floor(Math.random()*QP.length));return t}function K$(e){e+="";var t=e.charAt(0).toUpperCase();return t+e.substr(1)}function _d(e){for(;e.charAt(0)===".";)e=e.substr(1);for(;e.slice(-1)===".";)e=e.slice(0,-1);return e}function ph(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r;if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!ph(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){var a=i[r];if(!ph(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}var h_=e=>{var t=typeof e;return e!==null&&(t==="object"||t==="function")},I0=new Set(["__proto__","prototype","constructor"]),HU=new Set("0123456789");function q$(e){var t=[],n="",r="start",i=!1;for(var a of e)switch(a){case"\\":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");i&&(n+=a),r="property",i=!i;break}case".":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="property";break}if(i){i=!1,n+=a;break}if(I0.has(n))return[];t.push(n),n="",r="property";break}case"[":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="index";break}if(i){i=!1,n+=a;break}if(r==="property"){if(I0.has(n))return[];t.push(n),n=""}r="index";break}case"]":{if(r==="index"){t.push(Number.parseInt(n,10)),n="",r="indexEnd";break}if(r==="indexEnd")throw new Error("Invalid character after an index")}default:{if(r==="index"&&!HU.has(a))throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");r==="start"&&(r="property"),i&&(i=!1,n+="\\"),n+=a}}switch(i&&(n+="\\"),r){case"property":{if(I0.has(n))return[];t.push(n);break}case"index":throw new Error("Index was not closed");case"start":{t.push("");break}}return t}function Y$(e,t){if(typeof t!="number"&&Array.isArray(e)){var n=Number.parseInt(t,10);return Number.isInteger(n)&&e[n]===e[t]}return!1}function KU(e,t){if(Y$(e,t))throw new Error("Cannot use string index")}function Zs(e,t,n){if(Array.isArray(t)&&(t=t.join(".")),!t.includes(".")&&!t.includes("["))return e[t];if(!h_(e)||typeof t!="string")return n===void 0?e:n;var r=q$(t);if(r.length===0)return n;for(var i=0;i<r.length;i++){var a=r[i];if(Y$(e,a)?e=i===r.length-1?void 0:null:e=e[a],e==null){if(i!==r.length-1)return n;break}}return e===void 0?n:e}function V$(e,t,n){if(Array.isArray(t)&&(t=t.join(".")),!h_(e)||typeof t!="string")return e;for(var r=e,i=q$(t),a=0;a<i.length;a++){var s=i[a];KU(e,s),a===i.length-1?e[s]=n:h_(e[s])||(e[s]=typeof i[a+1]=="number"?[]:{}),e=e[s]}return r}function Xc(e,t){var n=e.get(t);if(typeof n>"u")throw new Error("missing value from map "+t);return n}function Ir(e,t,n,r){var i=e.get(t);return typeof i>"u"?(i=n(),e.set(t,i)):r&&r(i),i}function Rt(e){var t=e.split("-"),n="RxDB";return t.forEach(r=>{n+=K$(r)}),n+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+n+" } from 'rxdb/plugins/"+e+`';
            addRxPlugin(`+n+`);
        `)}function p_(e){var t={name:e.name,message:e.message,rxdb:e.rxdb,parameters:e.parameters,extensions:e.extensions,code:e.code,url:e.url,stack:e.stack?e.stack.replace(/\n/g,` 
 `):void 0};return t}var A0=0;function ki(){var e=Date.now();e=e+.01,e<=A0&&(e=A0+.01);var t=parseFloat(e.toFixed(2));return A0=t,t}function Ye(e,t){if(!e)throw t||(t=""),new Error("ensureNotFalsy() is falsy: "+t);return e}var qh={bufferSize:1,refCount:!0},X$="16.20.0",j0={},qU="6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93",GP=16,L0=to,JP=!1;async function Q$(){return JP||(JP=!0,L0=(async()=>!!(j0.premium&&typeof j0.premium=="string"&&await U$(j0.premium)===qU))()),L0}var mh={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postCloseRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],prePrepareRxQuery:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preCloseRxDatabase:[],postRemoveRxDatabase:[],postCleanup:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function ii(e,t){mh[e].length>0&&mh[e].forEach(n=>n(t))}async function vl(e,t){for(var n of mh[e])await n(t)}function Qc(e,t){var n=t;n=n.replace(UU,".properties."),n="properties."+n,n=_d(n);var r=Zs(e,n);return r}function YU(e,t,n){if(typeof t.primaryKey=="string")return n;var r=su(t,n),i=n[e];if(i&&i!==r)throw ze("DOC19",{args:{documentData:n,existingPrimary:i,newPrimary:r},schema:t});return n[e]=r,n}function ai(e){return typeof e=="string"?e:e.key}function VU(e){var t=ai(e.primaryKey),n=Qc(e,t);return Ye(n.maxLength)}function su(e,t){if(typeof e.primaryKey=="string")return t[e.primaryKey];var n=e.primaryKey;return n.fields.map(r=>{var i=Zs(t,r);if(typeof i>"u")throw ze("DOC18",{args:{field:r,documentData:t}});return i}).join(n.separator)}function XU(e){var t=Fv(e,!0);return t}function QU(e){return["_deleted",e]}function Ng(e){e=It(e);var t=ai(e.primaryKey);e.properties=It(e.properties),e.additionalProperties=!1,Object.prototype.hasOwnProperty.call(e,"keyCompression")||(e.keyCompression=!1),e.indexes=e.indexes?e.indexes.slice(0):[],e.required=e.required?e.required.slice(0):[],e.encrypted=e.encrypted?e.encrypted.slice(0):[],e.properties._rev={type:"string",minLength:1},e.properties._attachments={type:"object"},e.properties._deleted={type:"boolean"},e.properties._meta=JU,e.required=e.required?e.required.slice(0):[],e.required.push("_deleted"),e.required.push("_rev"),e.required.push("_meta"),e.required.push("_attachments");var n=G$(e);ml(e.required,n),e.required=e.required.filter(a=>!a.includes(".")).filter((a,s,u)=>u.indexOf(a)===s),e.version=e.version||0;var r=e.indexes.map(a=>{var s=zv(a)?a.slice(0):[a];return s.includes(t)||s.push(t),s[0]!=="_deleted"&&s.unshift("_deleted"),s});r.length===0&&r.push(QU(t)),r.push(["_meta.lwt",t]),e.internalIndexes&&e.internalIndexes.map(a=>{r.push(a)});var i=new Set;return r.filter(a=>{var s=a.join(",");return i.has(s)?!1:(i.add(s),!0)}),e.indexes=r,e}var GU=1e15,JU={type:"object",properties:{lwt:{type:"number",minimum:e1,maximum:GU,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function G$(e){var t=Object.keys(e.properties).filter(r=>e.properties[r].final),n=ai(e.primaryKey);return t.push(n),typeof e.primaryKey!="string"&&e.primaryKey.fields.forEach(r=>t.push(r)),t}function ZU(e,t){for(var n=Object.keys(e.defaultValues),r=0;r<n.length;++r){var i=n[r];(!Object.prototype.hasOwnProperty.call(t,i)||typeof t[i]>"u")&&(t[i]=e.defaultValues[i])}return t}var J$=function(){function e(n,r){if(this.jsonSchema=n,this.hashFunction=r,this.indexes=eH(this.jsonSchema),this.primaryPath=ai(this.jsonSchema.primaryKey),!n.properties[this.primaryPath].maxLength)throw ze("SC39",{schema:n});this.finalFields=G$(this.jsonSchema)}var t=e.prototype;return t.validateChange=function(r,i){this.finalFields.forEach(a=>{if(!ph(r[a],i[a]))throw ze("DOC9",{dataBefore:r,dataAfter:i,fieldName:a,schema:this.jsonSchema})})},t.getDocumentPrototype=function(){var r={},i=Qc(this.jsonSchema,"");return Object.keys(i).forEach(a=>{var s=a;r.__defineGetter__(a,function(){if(!(!this.get||typeof this.get!="function")){var u=this.get(s);return u}}),Object.defineProperty(r,a+"$",{get:function(){return this.get$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(r,a+"$$",{get:function(){return this.get$$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(r,a+"_",{get:function(){return this.populate(s)},enumerable:!1,configurable:!1})}),Mo(this,"getDocumentPrototype",()=>r),r},t.getPrimaryOfDocumentData=function(r){return su(this.jsonSchema,r)},ou(e,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var n={};return Object.entries(this.jsonSchema.properties).filter(([,r])=>Object.prototype.hasOwnProperty.call(r,"default")).forEach(([r,i])=>n[r]=i.default),Mo(this,"defaultValues",n)}},{key:"hash",get:function(){return Mo(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])}();function eH(e){return(e.indexes||[]).map(t=>zv(t)?t:[t])}function tH(e){var t=e.version?e.version:0,n=0;return new Array(t).fill(0).map(()=>n++)}function nH(e,t,n=!0){n&&ii("preCreateRxSchema",e);var r=Ng(e);r=XU(r),Tt.deepFreezeWhenDevMode(r);var i=new J$(r,t);return ii("createRxSchema",i),i}function Dn(e){return typeof e=="function"}function rH(e){return Dn(e==null?void 0:e.lift)}function io(e){return function(t){if(rH(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}var m_=function(e,t){return m_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},m_(e,t)};function xl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");m_(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function iH(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function u(h){try{d(r.next(h))}catch(v){s(v)}}function c(h){try{d(r.throw(h))}catch(v){s(v)}}function d(h){h.done?a(h.value):i(h.value).then(u,c)}d((r=r.apply(e,t||[])).next())})}function Z$(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(h){return c([d,h])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){n.label=d[1];break}if(d[0]===6&&n.label<a[1]){n.label=a[1],a=d;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(d);break}a[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(h){d=[6,h],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Gc(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function eu(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function tu(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function $c(e){return this instanceof $c?(this.v=e,this):new $c(e)}function aH(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(w){return function(_){return Promise.resolve(_).then(w,v)}}function u(w,_){r[w]&&(i[w]=function(E){return new Promise(function(C,x){a.push([w,E,C,x])>1||c(w,E)})},_&&(i[w]=_(i[w])))}function c(w,_){try{d(r[w](_))}catch(E){g(a[0][3],E)}}function d(w){w.value instanceof $c?Promise.resolve(w.value.v).then(h,v):g(a[0][2],w)}function h(w){c("next",w)}function v(w){c("throw",w)}function g(w,_){w(_),a.shift(),a.length&&c(a[0][0],a[0][1])}}function oH(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Gc=="function"?Gc(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(s){return new Promise(function(u,c){s=e[a](s),i(u,c,s.done,s.value)})}}function i(a,s,u,c){Promise.resolve(c).then(function(d){a({value:d,done:u})},s)}}var eR=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function tR(e){return Dn(e==null?void 0:e.then)}function a1(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var z0=a1(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function v_(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Tg=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,a;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var u=Gc(s),c=u.next();!c.done;c=u.next()){var d=c.value;d.remove(this)}}catch(E){t={error:E}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}else s.remove(this);var h=this.initialTeardown;if(Dn(h))try{h()}catch(E){a=E instanceof z0?E.errors:[E]}var v=this._finalizers;if(v){this._finalizers=null;try{for(var g=Gc(v),w=g.next();!w.done;w=g.next()){var _=w.value;try{ZP(_)}catch(E){a=a??[],E instanceof z0?a=tu(tu([],eu(a)),eu(E.errors)):a.push(E)}}}catch(E){r={error:E}}finally{try{w&&!w.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}}if(a)throw new z0(a)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)ZP(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&v_(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&v_(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),nR=Tg.EMPTY;function rR(e){return e instanceof Tg||e&&"closed"in e&&Dn(e.remove)&&Dn(e.add)&&Dn(e.unsubscribe)}function ZP(e){Dn(e)?e():e.unsubscribe()}var iR={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},g_={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=g_.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,tu([e,t],eu(n))):setTimeout.apply(void 0,tu([e,t],eu(n)))},clearTimeout:function(e){var t=g_.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function aR(e){g_.setTimeout(function(){throw e})}function ek(){}function Vm(e){e()}var o1=function(e){xl(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,rR(n)&&n.add(r)):r.destination=cH,r}return t.create=function(n,r,i){return new Jc(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Tg),sH=Function.prototype.bind;function F0(e,t){return sH.call(e,t)}var uH=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){wm(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){wm(r)}else wm(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){wm(n)}},e}(),Jc=function(e){xl(t,e);function t(n,r,i){var a=e.call(this)||this,s;if(Dn(n)||!n)s={next:n??void 0,error:r??void 0,complete:i??void 0};else{var u;a&&iR.useDeprecatedNextContext?(u=Object.create(n),u.unsubscribe=function(){return a.unsubscribe()},s={next:n.next&&F0(n.next,u),error:n.error&&F0(n.error,u),complete:n.complete&&F0(n.complete,u)}):s=n}return a.destination=new uH(s),a}return t}(o1);function wm(e){aR(e)}function lH(e){throw e}var cH={closed:!0,next:ek,error:lH,complete:ek},s1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Yh(e){return e}function fH(e){return e.length===0?Yh:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var Si=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,a=hH(t)?t:new Jc(t,n,r);return Vm(function(){var s=i,u=s.operator,c=s.source;a.add(u?u.call(a,c):c?i._subscribe(a):i._trySubscribe(a))}),a},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=tk(n),new n(function(i,a){var s=new Jc({next:function(u){try{t(u)}catch(c){a(c),s.unsubscribe()}},error:a,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[s1]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fH(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=tk(t),new t(function(r,i){var a;n.subscribe(function(s){return a=s},function(s){return i(s)},function(){return r(a)})})},e.create=function(t){return new e(t)},e}();function tk(e){var t;return(t=e??iR.Promise)!==null&&t!==void 0?t:Promise}function dH(e){return e&&Dn(e.next)&&Dn(e.error)&&Dn(e.complete)}function hH(e){return e&&e instanceof o1||dH(e)&&rR(e)}function oR(e){return Dn(e[s1])}function sR(e){return Symbol.asyncIterator&&Dn(e==null?void 0:e[Symbol.asyncIterator])}function uR(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function pH(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var lR=pH();function cR(e){return Dn(e==null?void 0:e[lR])}function fR(e){return aH(this,arguments,function(){var n,r,i,a;return Z$(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,$c(n.read())];case 3:return r=s.sent(),i=r.value,a=r.done,a?[4,$c(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,$c(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function dR(e){return Dn(e==null?void 0:e.getReader)}function Go(e){if(e instanceof Si)return e;if(e!=null){if(oR(e))return mH(e);if(eR(e))return vH(e);if(tR(e))return gH(e);if(sR(e))return hR(e);if(cR(e))return yH(e);if(dR(e))return wH(e)}throw uR(e)}function mH(e){return new Si(function(t){var n=e[s1]();if(Dn(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function vH(e){return new Si(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function gH(e){return new Si(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,aR)})}function yH(e){return new Si(function(t){var n,r;try{for(var i=Gc(e),a=i.next();!a.done;a=i.next()){var s=a.value;if(t.next(s),t.closed)return}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function hR(e){return new Si(function(t){_H(e,t).catch(function(n){return t.error(n)})})}function wH(e){return hR(fR(e))}function _H(e,t){var n,r,i,a;return iH(this,void 0,void 0,function(){var s,u;return Z$(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=oH(e),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=c.sent(),i={error:u},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function qo(e,t,n,r,i){return new bH(e,t,n,r,i)}var bH=function(e){xl(t,e);function t(n,r,i,a,s,u){var c=e.call(this,n)||this;return c.onFinalize=s,c.shouldUnsubscribe=u,c._next=r?function(d){try{r(d)}catch(h){n.error(h)}}:e.prototype._next,c._error=a?function(d){try{a(d)}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=i?function(){try{i()}catch(d){n.error(d)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(o1),pR={now:function(){return(pR.delegate||Date).now()},delegate:void 0};function SH(e){return e&&Dn(e.schedule)}function u1(e){return e[e.length-1]}function xH(e){return Dn(u1(e))?e.pop():void 0}function Vh(e){return SH(u1(e))?e.pop():void 0}function mR(e,t){return typeof u1(e)=="number"?e.pop():t}function Io(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var a=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(a),!i)return a}var EH=Array.isArray,PH=Object.getPrototypeOf,kH=Object.prototype,CH=Object.keys;function DH(e){if(e.length===1){var t=e[0];if(EH(t))return{args:t,keys:null};if(OH(t)){var n=CH(t);return{args:n.map(function(r){return t[r]}),keys:n}}}return{args:e,keys:null}}function OH(e){return e&&typeof e=="object"&&PH(e)===kH}function vR(e,t){return t===void 0&&(t=0),io(function(n,r){n.subscribe(qo(r,function(i){return Io(r,e,function(){return r.next(i)},t)},function(){return Io(r,e,function(){return r.complete()},t)},function(i){return Io(r,e,function(){return r.error(i)},t)}))})}function gR(e,t){return t===void 0&&(t=0),io(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function $H(e,t){return Go(e).pipe(gR(t),vR(t))}function RH(e,t){return Go(e).pipe(gR(t),vR(t))}function NH(e,t){return new Si(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function TH(e,t){return new Si(function(n){var r;return Io(n,t,function(){r=e[lR](),Io(n,t,function(){var i,a,s;try{i=r.next(),a=i.value,s=i.done}catch(u){n.error(u);return}s?n.complete():n.next(a)},0,!0)}),function(){return Dn(r==null?void 0:r.return)&&r.return()}})}function yR(e,t){if(!e)throw new Error("Iterable cannot be null");return new Si(function(n){Io(n,t,function(){var r=e[Symbol.asyncIterator]();Io(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function MH(e,t){return yR(fR(e),t)}function IH(e,t){if(e!=null){if(oR(e))return $H(e,t);if(eR(e))return NH(e,t);if(tR(e))return RH(e,t);if(sR(e))return yR(e,t);if(cR(e))return TH(e,t);if(dR(e))return MH(e,t)}throw uR(e)}function Xh(e,t){return t?IH(e,t):Go(e)}function _n(e,t){return io(function(n,r){var i=0;n.subscribe(qo(r,function(a){r.next(e.call(t,a,i++))}))})}var AH=Array.isArray;function jH(e,t){return AH(t)?e.apply(void 0,tu([],eu(t))):e(t)}function LH(e){return _n(function(t){return jH(e,t)})}function zH(e,t){return e.reduce(function(n,r,i){return n[r]=t[i],n},{})}function wR(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Vh(e),r=xH(e),i=DH(e),a=i.args,s=i.keys;if(a.length===0)return Xh([],n);var u=new Si(FH(a,n,s?function(c){return zH(s,c)}:Yh));return r?u.pipe(LH(r)):u}function FH(e,t,n){return n===void 0&&(n=Yh),function(r){nk(t,function(){for(var i=e.length,a=new Array(i),s=i,u=i,c=function(h){nk(t,function(){var v=Xh(e[h],t),g=!1;v.subscribe(qo(r,function(w){a[h]=w,g||(g=!0,u--),u||r.next(n(a.slice()))},function(){--s||r.complete()}))},r)},d=0;d<i;d++)c(d)},r)}}function nk(e,t,n){e?Io(n,e,t):t()}function BH(e,t,n,r,i,a,s,u){var c=[],d=0,h=0,v=!1,g=function(){v&&!c.length&&!d&&t.complete()},w=function(E){return d<r?_(E):c.push(E)},_=function(E){a&&t.next(E),d++;var C=!1;Go(n(E,h++)).subscribe(qo(t,function(x){i==null||i(x),a?w(x):t.next(x)},function(){C=!0},void 0,function(){if(C)try{d--;for(var x=function(){var S=c.shift();s?Io(t,s,function(){return _(S)}):_(S)};c.length&&d<r;)x();g()}catch(S){t.error(S)}}))};return e.subscribe(qo(t,w,function(){v=!0,g()})),function(){u==null||u()}}function no(e,t,n){return n===void 0&&(n=1/0),Dn(t)?no(function(r,i){return _n(function(a,s){return t(r,a,i,s)})(Go(e(r,i)))},n):(typeof t=="number"&&(n=t),io(function(r,i){return BH(r,i,e,n)}))}function l1(e){return e===void 0&&(e=1/0),no(Yh,e)}function WH(){return l1(1)}var UH=a1(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),br=function(e){xl(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new rk(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new UH},t.prototype.next=function(n){var r=this;Vm(function(){var i,a;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=Gc(r.currentObservers),u=s.next();!u.done;u=s.next()){var c=u.value;c.next(n)}}catch(d){i={error:d}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;Vm(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;Vm(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,a=i.hasError,s=i.isStopped,u=i.observers;return a||s?nR:(this.currentObservers=null,u.push(n),new Tg(function(){r.currentObservers=null,v_(u,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,a=r.thrownError,s=r.isStopped;i?n.error(a):s&&n.complete()},t.prototype.asObservable=function(){var n=new Si;return n.source=this,n},t.create=function(n,r){return new rk(n,r)},t}(Si),rk=function(e){xl(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:nR},t}(br);function ik(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return WH()(Xh(e,Vh(e)))}var HH=new Si(function(e){return e.complete()});function vh(e,t){return t===void 0&&(t=Yh),e=e??KH,io(function(n,r){var i,a=!0;n.subscribe(qo(r,function(s){var u=t(s);(a||!e(i,u))&&(a=!1,i=u,r.next(s))}))})}function KH(e,t){return e===t}function Nt(e,t){return io(function(n,r){var i=0;n.subscribe(qo(r,function(a){return e.call(t,a,i++)&&r.next(a)}))})}var qH=a1(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function YH(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Vh(e),r=mR(e,1/0);return io(function(i,a){l1(r)(Xh(tu([i],eu(e)),n)).subscribe(a)})}function VH(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return YH.apply(void 0,tu([],eu(e)))}var qa=function(e){xl(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,a=n._value;if(r)throw i;return this._throwIfClosed(),a},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t}(br),XH=function(e){xl(t,e);function t(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=pR);var a=e.call(this)||this;return a._bufferSize=n,a._windowTime=r,a._timestampProvider=i,a._buffer=[],a._infiniteTimeWindow=!0,a._infiniteTimeWindow=r===1/0,a._bufferSize=Math.max(1,n),a._windowTime=Math.max(1,r),a}return t.prototype.next=function(n){var r=this,i=r.isStopped,a=r._buffer,s=r._infiniteTimeWindow,u=r._timestampProvider,c=r._windowTime;i||(a.push(n),!s&&a.push(u.now()+c)),this._trimBuffer(),e.prototype.next.call(this,n)},t.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,a=i._infiniteTimeWindow,s=i._buffer,u=s.slice(),c=0;c<u.length&&!n.closed;c+=a?1:2)n.next(u[c]);return this._checkFinalizedStatuses(n),r},t.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,a=n._buffer,s=n._infiniteTimeWindow,u=(s?1:2)*r;if(r<1/0&&u<a.length&&a.splice(0,a.length-u),!s){for(var c=i.now(),d=0,h=1;h<a.length&&a[h]<=c;h+=2)d=h;d&&a.splice(0,d+1)}},t}(br);function QH(e){e===void 0&&(e={});var t=e.connector,n=t===void 0?function(){return new br}:t,r=e.resetOnError,i=r===void 0?!0:r,a=e.resetOnComplete,s=a===void 0?!0:a,u=e.resetOnRefCountZero,c=u===void 0?!0:u;return function(d){var h,v,g,w=0,_=!1,E=!1,C=function(){v==null||v.unsubscribe(),v=void 0},x=function(){C(),h=g=void 0,_=E=!1},S=function(){var P=h;x(),P==null||P.unsubscribe()};return io(function(P,M){w++,!E&&!_&&C();var T=g=g??n();M.add(function(){w--,w===0&&!E&&!_&&(v=B0(S,c))}),T.subscribe(M),!h&&w>0&&(h=new Jc({next:function(U){return T.next(U)},error:function(U){E=!0,C(),v=B0(x,i,U),T.error(U)},complete:function(){_=!0,C(),v=B0(x,s),T.complete()}}),Go(P).subscribe(h))})(d)}}function B0(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t===!0){e();return}if(t!==!1){var i=new Jc({next:function(){i.unsubscribe(),e()}});return Go(t.apply(void 0,tu([],eu(n)))).subscribe(i)}}function Qh(e,t,n){var r,i,a,s,u=!1;return e&&typeof e=="object"?(r=e.bufferSize,s=r===void 0?1/0:r,i=e.windowTime,t=i===void 0?1/0:i,a=e.refCount,u=a===void 0?!1:a,n=e.scheduler):s=e??1/0,QH({connector:function(){return new XH(s,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}function Gh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Vh(e);return io(function(r,i){(n?ik(e,r,n):ik(e,r)).subscribe(i)})}function GH(e,t){return io(function(n,r){var i=null,a=0,s=!1,u=function(){return s&&!i&&r.complete()};n.subscribe(qo(r,function(c){i==null||i.unsubscribe();var d=0,h=a++;Go(e(c,h)).subscribe(i=qo(r,function(v){return r.next(t?t(c,v,h,d++):v)},function(){i=null,u()}))},function(){s=!0,u()}))})}function _R(e){return e.documentData?e.documentData:e.previousDocumentData}function JH(e){switch(e.operation){case"INSERT":return{operation:e.operation,id:e.documentId,doc:e.documentData,previous:null};case"UPDATE":return{operation:e.operation,id:e.documentId,doc:Tt.deepFreezeWhenDevMode(e.documentData),previous:e.previousDocumentData?e.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:e.operation,id:e.documentId,doc:null,previous:e.previousDocumentData}}}var ZH=new Map;function bR(e){return Ir(ZH,e,()=>{for(var t=new Array(e.events.length),n=e.events,r=e.collectionName,i=e.isLocal,a=Tt.deepFreezeWhenDevMode,s=0;s<n.length;s++){var u=n[s];t[s]={documentId:u.documentId,collectionName:r,isLocal:i,operation:u.operation,documentData:a(u.documentData),previousDocumentData:a(u.previousDocumentData)}}return t})}function sl(e,t){var n=typeof t=="object";return new Promise(function(r,i){var a=new Jc({next:function(s){r(s),a.unsubscribe()},error:i,complete:function(){n?r(t.defaultValue):i(new qH)}});e.subscribe(a)})}function eK(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Vh(e),r=mR(e,1/0),i=e;return i.length?i.length===1?Go(i[0]):l1(r)(Xh(i,n)):HH}var Rc=String.fromCharCode(65535),Nc=Number.MIN_SAFE_INTEGER;function tK(e,t){var n=t.selector,r=e.indexes?e.indexes.slice(0):[];t.index&&(r=[t.index]);var i=!!t.sort.find(h=>Object.values(h)[0]==="desc"),a=new Set;Object.keys(n).forEach(h=>{var v=Qc(e,h);v&&v.type==="boolean"&&Object.prototype.hasOwnProperty.call(n[h],"$eq")&&a.add(h)});var s=t.sort.map(h=>Object.keys(h)[0]),u=s.filter(h=>!a.has(h)).join(","),c=-1,d;if(r.forEach(h=>{var v=!0,g=!0,w=h.map(S=>{var P=n[S],M=P?Object.keys(P):[],T={};if(!P||!M.length){var U=g?Nc:Rc;T={startKey:U,endKey:v?Rc:Nc,inclusiveStart:!0,inclusiveEnd:!0}}else M.forEach(W=>{if(c1.has(W)){var re=P[W],he=aK(W,re);T=Object.assign(T,he)}});return typeof T.startKey>"u"&&(T.startKey=Nc),typeof T.endKey>"u"&&(T.endKey=Rc),typeof T.inclusiveStart>"u"&&(T.inclusiveStart=!0),typeof T.inclusiveEnd>"u"&&(T.inclusiveEnd=!0),g&&!T.inclusiveStart&&(g=!1),v&&!T.inclusiveEnd&&(v=!1),T}),_=w.map(S=>S.startKey),E=w.map(S=>S.endKey),C={index:h,startKeys:_,endKeys:E,inclusiveEnd:v,inclusiveStart:g,sortSatisfiedByIndex:!i&&u===h.filter(S=>!a.has(S)).join(","),selectorSatisfiedByIndex:iK(h,t.selector,_,E)},x=oK(e,t,C);(x>=c||t.index)&&(c=x,d=C)}),!d)throw ze("SNH",{query:t});return d}var c1=new Set(["$eq","$gt","$gte","$lt","$lte"]),nK=new Set(["$eq","$gt","$gte"]),rK=new Set(["$eq","$lt","$lte"]);function iK(e,t,n,r){var i=Object.entries(t),a=i.find(([W,re])=>{if(!e.includes(W))return!0;var he=Object.entries(re).find(([de,ce])=>!c1.has(de));return he});if(a||t.$and||t.$or)return!1;var s=[],u=new Set;for(var[c,d]of Object.entries(t)){if(!e.includes(c))return!1;var h=Object.keys(d).filter(W=>nK.has(W));if(h.length>1)return!1;var v=h[0];if(v&&u.add(c),v!=="$eq"){if(s.length>0)return!1;s.push(v)}}var g=[],w=new Set;for(var[_,E]of Object.entries(t)){if(!e.includes(_))return!1;var C=Object.keys(E).filter(W=>rK.has(W));if(C.length>1)return!1;var x=C[0];if(x&&w.add(_),x!=="$eq"){if(g.length>0)return!1;g.push(x)}}var S=0;for(var P of e){for(var M of[u,w]){if(!M.has(P)&&M.size>0)return!1;M.delete(P)}var T=n[S],U=r[S];if(T!==U&&u.size>0&&w.size>0)return!1;S++}return!0}function aK(e,t){switch(e){case"$eq":return{startKey:t,endKey:t,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:t,inclusiveEnd:!0};case"$gte":return{startKey:t,inclusiveStart:!0};case"$lt":return{endKey:t,inclusiveEnd:!1};case"$gt":return{startKey:t,inclusiveStart:!1};default:throw new Error("SNH")}}function oK(e,t,n){var r=0,i=h=>{h>0&&(r=r+h)},a=10,s=T0(n.startKeys,h=>h!==Nc&&h!==Rc);i(s*a);var u=T0(n.startKeys,h=>h!==Rc&&h!==Nc);i(u*a);var c=T0(n.startKeys,(h,v)=>h===n.endKeys[v]);i(c*a*1.5);var d=n.sortSatisfiedByIndex?5:0;return i(d),r}class Jh extends Error{}const gh=Symbol("missing"),SR=Object.freeze(new Error("mingo: cycle detected while processing object/array")),Zh=e=>{const t=Xm(e);let n=0,r=t.length;for(;r;)n=(n<<5)-n^t.charCodeAt(--r);return n>>>0},Ms=e=>typeof e!="object"&&typeof e!="function"||e===null,xR=e=>Ms(e)||Zc(e)||Ao(e),ER={undefined:1,null:2,number:3,string:4,symbol:5,object:6,array:7,arraybuffer:8,boolean:9,date:10,regexp:11,function:12},ta=(e,t)=>{e===gh&&(e=void 0),t===gh&&(t=void 0);const[n,r]=[e,t].map(i=>ER[wh(i)]||0);return n!==r?n-r:Ca(e,t)?0:e<t?-1:e>t?1:0};var kh,Co,tl;const ES=class ES extends Map{constructor(){super();vn(this,kh,Zh);vn(this,Co,new Map);vn(this,tl,n=>{const r=Te(this,kh).call(this,n);return[(Te(this,Co).get(r)||[]).find(i=>Ca(i,n)),r]})}static init(n){const r=new ES;return n&&gn(r,kh,n),r}clear(){super.clear(),Te(this,Co).clear()}delete(n){if(Ms(n))return super.delete(n);const[r,i]=Te(this,tl).call(this,n);return super.delete(r)?(Te(this,Co).set(i,Te(this,Co).get(i).filter(a=>!Ca(a,r))),!0):!1}get(n){if(Ms(n))return super.get(n);const[r,i]=Te(this,tl).call(this,n);return super.get(r)}has(n){if(Ms(n))return super.has(n);const[r,i]=Te(this,tl).call(this,n);return super.has(r)}set(n,r){if(Ms(n))return super.set(n,r);const[i,a]=Te(this,tl).call(this,n);if(super.has(i))super.set(i,r);else{super.set(n,r);const s=Te(this,Co).get(a)||[];s.push(n),Te(this,Co).set(a,s)}return this}get size(){return super.size}};kh=new WeakMap,Co=new WeakMap,tl=new WeakMap;let yh=ES;function Mt(e,t){if(!e)throw new Jh(t)}const sK=Object.keys(ER).reduce((e,t)=>(e["[object "+t[0].toUpperCase()+t.substring(1)+"]"]=t,e),{});function wh(e){var n,r;const t=Object.prototype.toString.call(e);return t==="[object Object]"?((r=(n=e==null?void 0:e.constructor)==null?void 0:n.name)==null?void 0:r.toLowerCase())||"object":sK[t]||t.substring(8,t.length-1).toLowerCase()}const Tc=e=>typeof e=="boolean",Na=e=>typeof e=="string",uK=e=>typeof e=="symbol",Un=e=>!isNaN(e)&&typeof e=="number",mt=Array.isArray;function bn(e){if(!e)return!1;const t=Object.getPrototypeOf(e);return(t===Object.prototype||t===null)&&wh(e)==="object"}const PR=e=>!Ms(e),Zc=e=>e instanceof Date,Ao=e=>e instanceof RegExp,Mg=e=>typeof e=="function",xi=e=>e==null,ef=(e,t=!0)=>!!e||t&&e==="",f1=e=>xi(e)||Na(e)&&!e||mt(e)&&e.length===0||bn(e)&&Object.keys(e).length===0,df=e=>mt(e)?e:[e],Ta=(e,t)=>!!e&&Object.prototype.hasOwnProperty.call(e,t),lK=e=>typeof ArrayBuffer<"u"&&ArrayBuffer.isView(e),tf=(e,t)=>{if(xi(e)||Tc(e)||Un(e)||Na(e))return e;if(Zc(e))return new Date(e);if(Ao(e))return new RegExp(e);if(lK(e)){const n=e.constructor;return new n(e)}if(t instanceof Set||(t=new Set),t.has(e))throw SR;t.add(e);try{if(mt(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=tf(e[r],t);return n}if(bn(e)){const n={};for(const r of Object.keys(e))n[r]=tf(e[r],t);return n}}finally{t.delete(e)}return e},ak=e=>e===gh;function y_(e,t){if(ak(e)||xi(e))return t;if(ak(t)||xi(t))return e;if(Ms(e)||Ms(t))return t;mt(e)&&mt(t)&&Mt(e.length===t.length,"arrays must be of equal length to merge.");for(const n of Object.keys(t))e[n]=y_(e[n],t[n]);return e}function kR(e,t=Zh){const n=[yh.init(t),yh.init(t)];if(e.length===0)return[];if(e.some(r=>r.length===0))return[];if(e.length===1)return[...e];e[e.length-1].forEach(r=>n[0].set(r,!0));for(let r=e.length-2;r>-1;r--){if(e[r].forEach(i=>{n[0].has(i)&&n[1].set(i,!0)}),n[1].size===0)return[];n.reverse(),n[1].clear()}return Array.from(n[0].keys())}function CR(e,t=1){const n=new Array;function r(i,a){for(let s=0,u=i.length;s<u;s++)mt(i[s])&&(a>0||a<0)?r(i[s],Math.max(-1,a-1)):n.push(i[s])}return r(e,t),n}function cK(e){const t={};for(;e;){for(const n of Object.getOwnPropertyNames(e))n in t||(t[n]=e[n]);e=Object.getPrototypeOf(e)}return t}function DR(e){for(;e;){if(Object.getOwnPropertyNames(e).includes("toString"))return e.toString!==Object.prototype.toString;e=Object.getPrototypeOf(e)}return!1}function Ca(e,t){if(e===t||Object.is(e,t))return!0;if(e===null||t===null||typeof e!=typeof t||typeof e!="object"||e.constructor!==t.constructor)return!1;if(e instanceof Date)return+e==+t;if(e instanceof RegExp)return e.toString()===t.toString();const n=e.constructor;if(n===Array||n===Object){const r=Object.keys(e).sort(),i=Object.keys(t).sort();if(r.length!==i.length)return!1;for(let a=0,s=r[a];a<r.length;s=r[++a])if(s!==i[a]||!Ca(e[s],t[s]))return!1;return!0}return DR(e)&&e.toString()===t.toString()}function fK(e,t=Zh){const n=yh.init(t);return e.forEach(r=>n.set(r,!0)),Array.from(n.keys())}const Xm=(e,t)=>{if(e===null)return"null";if(e===void 0)return"undefined";if(Na(e)||Un(e)||Tc(e))return JSON.stringify(e);if(Zc(e))return e.toISOString();if(Ao(e)||uK(e)||Mg(e))return e.toString();if(t instanceof Set||(t=new Set),t.has(e))throw SR;try{if(t.add(e),mt(e))return"["+e.map(r=>Xm(r,t)).join(",")+"]";if(bn(e))return"{"+Object.keys(e).sort().map(i=>`${i}:${Xm(e[i],t)}`).join()+"}";const n=DR(e)?e.toString():Xm(cK(e),t);return wh(e)+"("+n+")"}finally{t.delete(e)}};function dK(e,t){return xi(e)?null:(t=t||Zh,t(e))}function hK(e,t,n=Zh){if(e.length<1)return new Map;const r=new Map,i=new Map;for(let a=0;a<e.length;a++){const s=e[a],u=t(s,a),c=dK(u,n);if(c===null)i.has(null)?i.get(null).push(s):i.set(null,[s]);else{const d=r.has(c)?r.get(c).find(h=>Ca(h,u)):null;xi(d)?(i.set(u,[s]),r.has(c)?r.get(c).push(u):r.set(c,[u])):i.get(d).push(s)}}return i}function w_(e,t){return PR(e)?e[t]:void 0}function pK(e,t){if(t<1)return e;for(;t--&&e.length===1;)e=e[0];return e}function ro(e,t,n){let r=0;function i(s,u){let c=s;for(let d=0;d<u.length;d++){const h=u[d];if(/^\d+$/.exec(h)===null&&mt(c)){if(d===0&&r>0)break;r+=1;const g=u.slice(d);c=c.reduce((w,_)=>{const E=i(_,g);return E!==void 0&&w.push(E),w},[]);break}else c=w_(c,h);if(c===void 0)break}return c}const a=xR(e)?e:i(e,t.split("."));return mt(a)&&(n!=null&&n.unwrapArray)?pK(a,r):a}function Id(e,t,n){const r=t.indexOf("."),i=r==-1?t:t.substring(0,r),a=t.substring(r+1),s=r!=-1;if(mt(e)){const d=/^\d+$/.test(i),h=d&&(n!=null&&n.preserveIndex)?[...e]:[];if(d){const v=parseInt(i);let g=w_(e,v);s&&(g=Id(g,a,n)),n!=null&&n.preserveIndex?h[v]=g:h.push(g)}else for(const v of e){const g=Id(v,t,n);n!=null&&n.preserveMissing?h.push(g??gh):(g!=null||n!=null&&n.preserveIndex)&&h.push(g)}return h}const u=n!=null&&n.preserveKeys?{...e}:{};let c=w_(e,i);if(s&&(c=Id(c,a,n)),c!==void 0)return u[i]=c,u}function __(e){if(mt(e))for(let t=e.length-1;t>=0;t--)e[t]===gh?e.splice(t,1):__(e[t]);else if(bn(e))for(const t in e)Ta(e,t)&&__(e[t])}const ok=/^\d+$/;function _h(e,t,n,r){const i=t.split("."),a=i[0],s=i.slice(1).join(".");if(i.length===1)(bn(e)||mt(e)&&ok.test(a))&&n(e,a);else{r!=null&&r.buildGraph&&xi(e[a])&&(e[a]={});const u=e[a];if(!u)return;const c=!!(i.length>1&&ok.test(i[1]));mt(u)&&(r!=null&&r.descendArray)&&!c?u.forEach(d=>_h(d,s,n,r)):_h(u,s,n,r)}}function mK(e,t,n){_h(e,t,(r,i)=>{r[i]=Mg(n)?n(r[i]):n},{buildGraph:!0})}function sk(e,t,n){_h(e,t,(r,i)=>{if(mt(r)){if(/^\d+$/.test(i))r.splice(parseInt(i),1);else if(n&&n.descendArray)for(const a of r)bn(a)&&delete a[i]}else bn(r)&&delete r[i]},n)}const vK=/^\$[a-zA-Z0-9_]+$/;function uu(e){return vK.test(e)}function OR(e){if(xR(e))return Ao(e)?{$regex:e}:{$eq:e};if(PR(e)){if(!Object.keys(e).some(uu))return{$eq:e};if(Ta(e,"$regex")){const t={...e};return t.$regex=new RegExp(e.$regex,e.$options),delete t.$options,t}}return e}var b_=(e=>(e[e.CLONE_OFF=0]="CLONE_OFF",e[e.CLONE_INPUT=1]="CLONE_INPUT",e[e.CLONE_OUTPUT=2]="CLONE_OUTPUT",e[e.CLONE_ALL=3]="CLONE_ALL",e))(b_||{}),Wn,Ch,Do;const Hd=class Hd{constructor(t,n,r){vn(this,Wn,void 0);vn(this,Ch,void 0);vn(this,Do,void 0);gn(this,Wn,t),this.update(n,r)}static init(t,n,r){var i;return t instanceof Hd?new Hd(Te(t,Wn),t.root??n,{...Te(t,Do),...r,variables:Object.assign({},(i=Te(t,Do))==null?void 0:i.variables,r==null?void 0:r.variables)}):new Hd(t,n,r)}update(t,n){var i;gn(this,Ch,t);const r=Object.assign({},(i=Te(this,Do))==null?void 0:i.variables,n==null?void 0:n.variables);return Object.keys(r).length?gn(this,Do,{...n,variables:r}):gn(this,Do,n??{}),this}getOptions(){return Object.freeze({...Te(this,Wn),context:gl.from(Te(this,Wn).context)})}get root(){return Te(this,Ch)}get local(){return Te(this,Do)}get idKey(){return Te(this,Wn).idKey}get collation(){var t;return(t=Te(this,Wn))==null?void 0:t.collation}get processingMode(){var t;return((t=Te(this,Wn))==null?void 0:t.processingMode)||0}get useStrictMode(){var t;return(t=Te(this,Wn))==null?void 0:t.useStrictMode}get scriptEnabled(){var t;return(t=Te(this,Wn))==null?void 0:t.scriptEnabled}get useGlobalContext(){var t;return(t=Te(this,Wn))==null?void 0:t.useGlobalContext}get hashFunction(){var t;return(t=Te(this,Wn))==null?void 0:t.hashFunction}get collectionResolver(){var t;return(t=Te(this,Wn))==null?void 0:t.collectionResolver}get jsonSchemaValidator(){var t;return(t=Te(this,Wn))==null?void 0:t.jsonSchemaValidator}get variables(){var t;return(t=Te(this,Wn))==null?void 0:t.variables}get context(){var t;return(t=Te(this,Wn))==null?void 0:t.context}};Wn=new WeakMap,Ch=new WeakMap,Do=new WeakMap;let bh=Hd;function $R(e){return e instanceof bh?e.getOptions():Object.freeze({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:0,...e,context:e!=null&&e.context?gl.from(e==null?void 0:e.context):gl.init()})}var ks;const og=class og{constructor(){vn(this,ks,new Map)}static init(){return new og}static from(t){const n=og.init();return xi(t)||Te(t,ks).forEach((r,i)=>n.addOperators(i,r)),n}addOperators(t,n){Te(this,ks).has(t)||Te(this,ks).set(t,{});for(const[r,i]of Object.entries(n))this.getOperator(t,r)||(Te(this,ks).get(t)[r]=i);return this}getOperator(t,n){return(Te(this,ks).get(t)??{})[n]??null}addAccumulatorOps(t){return this.addOperators("accumulator",t)}addExpressionOps(t){return this.addOperators("expression",t)}addQueryOps(t){return this.addOperators("query",t)}addPipelineOps(t){return this.addOperators("pipeline",t)}addProjectionOps(t){return this.addOperators("projection",t)}addWindowOps(t){return this.addOperators("window",t)}};ks=new WeakMap;let gl=og;const Ku=gl.init();function uk(e,t){for(const[n,r]of Object.entries(t)){Mt(Mg(r)&&uu(n),`'${n}' is not a valid operator`);const i=Sh(e,n,null);Mt(!i||r===i,`${n} already exists for '${e}' operators. Cannot change operator function once registered.`)}switch(e){case"accumulator":Ku.addAccumulatorOps(t);break;case"expression":Ku.addExpressionOps(t);break;case"pipeline":Ku.addPipelineOps(t);break;case"projection":Ku.addProjectionOps(t);break;case"query":Ku.addQueryOps(t);break;case"window":Ku.addWindowOps(t);break}}function Sh(e,t,n){const{context:r,useGlobalContext:i}=n||{},a=r?r.getOperator(e,t):null;return!a&&i?Ku.getOperator(e,t):a}function Vi(e,t,n,r){const i=bh.init(r,e);return n&&uu(n)?RR(e,t,n,i):Uv(e,t,i)}const gK=["$$ROOT","$$CURRENT","$$REMOVE","$$NOW"];function Uv(e,t,n){var r;if(Na(t)&&t.length>0&&t[0]==="$"){if(yK.includes(t))return t;let i=n.root;const a=t.split(".");if(gK.includes(a[0])){switch(a[0]){case"$$ROOT":break;case"$$CURRENT":i=e;break;case"$$REMOVE":i=void 0;break;case"$$NOW":i=new Date;break}t=t.slice(a[0].length+1)}else if(a[0].slice(0,2)==="$$"){i=Object.assign({},n.variables,{this:e},(r=n==null?void 0:n.local)==null?void 0:r.variables);const s=a[0].slice(2);Mt(Ta(i,s),`Use of undefined variable: ${s}`),t=t.slice(2)}else t=t.slice(1);return t===""?i:ro(i,t)}if(mt(t))return t.map(i=>Uv(e,i,n));if(bn(t)){const i={},a=Object.entries(t);for(const[s,u]of a){if(uu(s))return Mt(a.length==1,"expression must have single operator."),RR(e,u,s,n);i[s]=Uv(e,u,n)}return i}return t}function RR(e,t,n,r){const i=Sh("expression",n,r);if(i)return i(e,t,r);const a=Sh("accumulator",n,r);return Mt(!!a,`accumulator '${n}' is not registered.`),mt(e)||(e=Uv(e,t,r),t=null),Mt(mt(e),`arguments must resolve to array for ${n}.`),a(e,t,r)}const yK=["$$KEEP","$$PRUNE","$$DESCEND"];function xh(e){return e instanceof lk?e:new lk(e)}function wK(...e){let t=0;return xh(()=>{for(;t<e.length;){const n=e[t].next();if(!n.done)return n;t++}return{done:!0}})}function _K(e){return!!e&&typeof e=="object"&&(e==null?void 0:e.next)instanceof Function}function bK(e,t){const n=e.slice(t+1);e.splice(t),Array.prototype.push.apply(e,n)}const S_=new Error;function SK(e,t,n){let r=!1,i=-1,a=0;return function(s){try{e:for(;!r;){let u=e();i++;let c=-1;const d=t.length;let h=!1;for(;++c<d;){const v=t[c];switch(v.action){case 0:u=v.func(u,i);break;case 1:if(!v.func(u,i))continue e;break;case 2:--v.count,v.count||(h=!0);break;case 3:--v.count,v.count||bK(t,c);continue e;default:break e}}if(r=h,s)n[a++]=u;else return{value:u,done:!1}}}catch(u){if(u!==S_)throw u}return r=!0,{done:r}}}var nl,jc,Lc,NC;let lk=(NC=class{constructor(t){vn(this,nl,void 0);vn(this,jc,void 0);vn(this,Lc,void 0);gn(this,nl,[]),gn(this,jc,[]),this.isDone=!1;let n;if(t instanceof Function&&(t={next:t}),_K(t)){const r=t;n=()=>{const i=r.next();if(i.done)throw S_;return i.value}}else if(mt(t)){const r=t,i=r.length;let a=0;n=()=>{if(a<i)return r[a++];throw S_}}else if(!(t instanceof Function))throw new Jh("Lazy must be initialized with an array, generator, or function.");gn(this,Lc,SK(n,Te(this,nl),Te(this,jc)))}push(t,n){return typeof n=="function"?Te(this,nl).push({action:t,func:n}):typeof n=="number"&&Te(this,nl).push({action:t,count:n}),this}next(){return Te(this,Lc).call(this)}map(t){return this.push(0,t)}filter(t){return this.push(1,t)}take(t){return t>0?this.push(2,t):this}drop(t){return t>0?this.push(3,t):this}transform(t){const n=this;let r;return xh(()=>(r||(r=xh(t(n.value()))),r.next()))}value(){return this.isDone||(this.isDone=Te(this,Lc).call(this,!0).done),Te(this,jc)}each(t){for(;;){const n=this.next();if(n.done)break;if(t(n.value)===!1)return!1}return!0}reduce(t,n){let r=this.next();for(n===void 0&&!r.done&&(n=r.value,r=this.next());!r.done;)n=t(n,r.value),r=this.next();return n}size(){return this.reduce((t,n)=>++t,0)}[Symbol.iterator](){return this}},nl=new WeakMap,jc=new WeakMap,Lc=new WeakMap,NC);const xK=(e,t,n)=>e.take(t),NR=(e,t,n)=>f1(t)?e:(MR(t,n),e.map(TR(t,bh.init(n))));function TR(e,t,n=!0){const r=t.idKey,i=Object.keys(e),a=new Array,s=new Array,u={};for(const w of i){const _=e[w];if(Un(_)||Tc(_))_?s.push(w):a.push(w);else if(mt(_))u[w]=E=>_.map(C=>Vi(E,C,null,t.update(E))??null);else if(bn(_)){const E=Object.keys(_),C=E.length==1?E[0]:"",x=Sh("projection",C,t);x?C==="$slice"&&!df(_[C]).every(Un)?u[w]=P=>Vi(P,_,w,t.update(P)):u[w]=P=>x(P,_[C],w,t.update(P)):uu(C)?u[w]=S=>Vi(S,_[C],C,t):(MR(_,t),u[w]=S=>{if(!Ta(S,w))return Vi(S,_,null,t);n&&t.update(S);const P=ro(S,w),M=TR(_,t,!1);return mt(P)?P.map(M):bn(P)?M(P):M(S)})}else u[w]=Na(_)&&_[0]==="$"?E=>Vi(E,_,w,t):E=>_}const c=Object.keys(u),d=a.includes(r);if(n&&d&&a.length===1&&!s.length&&!c.length)return w=>{const _={...w};return delete _[r],_};const v=n&&!d&&!s.includes(r),g={preserveMissing:!0};return w=>{const _={};if(a.length&&!s.length){y_(_,w);for(const E of a)sk(_,E,{descendArray:!0})}for(const E of s){const C=Id(w,E,g)??{};y_(_,C)}s.length&&__(_);for(const E of c){const C=u[E](w);C===void 0?sk(_,E,{descendArray:!0}):mK(_,E,C)}return v&&Ta(w,r)&&(_[r]=ro(w,r)),_}}function MR(e,t){let n=!1,r=!1;for(const[i,a]of Object.entries(e))Mt(!i.startsWith("$"),"Field names may not start with '$'."),Mt(!i.endsWith(".$"),"Positional projection operator '$' is not supported."),i!==(t==null?void 0:t.idKey)&&(a===0||a===!1?n=!0:(a===1||a===!0)&&(r=!0),Mt(!(n&&r),"Projection cannot have a mix of inclusion and exclusion."))}const EK=(e,t,n)=>e.drop(t),IR=(e,t,n)=>{if(f1(t)||!bn(t))return e;let r=ta;const i=n.collation;return bn(i)&&Na(i.locale)&&(r=kK(i)),e.transform(a=>{const s=Object.keys(t);for(const u of s.reverse()){const c=hK(a,v=>ro(v,u),n.hashFunction),d=Array.from(c.keys()).sort(r);t[u]===-1&&d.reverse();let h=0;for(const v of d)for(const g of c.get(v))a[h++]=g;Mt(h==a.length,"bug: counter must match collection size.")}return a})},PK={1:"base",2:"accent",3:"variant"};function kK(e){const t={sensitivity:PK[e.strength||3],caseFirst:e.caseFirst==="off"?"false":e.caseFirst||"false",numeric:e.numericOrdering||!1,ignorePunctuation:e.alternate==="shifted"};(e.caseLevel||!1)===!0&&(t.sensitivity==="base"&&(t.sensitivity="case"),t.sensitivity==="accent"&&(t.sensitivity="variant"));const n=new Intl.Collator(e.locale,t);return(r,i)=>{if(!Na(r)||!Na(i))return ta(r,i);const a=n.compare(r,i);return a<0?-1:a>0?1:0}}const CK={$sort:IR,$skip:EK,$limit:xK};var Dh,Oh,zc,Oo,Cs,mi,$o;class DK{constructor(t,n,r,i){vn(this,Dh,void 0);vn(this,Oh,void 0);vn(this,zc,void 0);vn(this,Oo,void 0);vn(this,Cs,{});vn(this,mi,null);vn(this,$o,[]);gn(this,Dh,t),gn(this,Oh,n),gn(this,zc,r),gn(this,Oo,i)}fetch(){if(Te(this,mi))return Te(this,mi);gn(this,mi,xh(Te(this,Dh)).filter(Te(this,Oh)));const t=Te(this,Oo).processingMode;t&b_.CLONE_INPUT&&Te(this,mi).map(tf);for(const n of["$sort","$skip","$limit"])Ta(Te(this,Cs),n)&&gn(this,mi,CK[n](Te(this,mi),Te(this,Cs)[n],Te(this,Oo)));return Object.keys(Te(this,zc)).length&&gn(this,mi,NR(Te(this,mi),Te(this,zc),Te(this,Oo))),t&b_.CLONE_OUTPUT&&Te(this,mi).map(tf),Te(this,mi)}fetchAll(){const t=xh([...Te(this,$o)]);return gn(this,$o,[]),wK(t,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(t){return Te(this,Cs).$skip=t,this}limit(t){return Te(this,Cs).$limit=t,this}sort(t){return Te(this,Cs).$sort=t,this}collation(t){return gn(this,Oo,{...Te(this,Oo),collation:t}),this}next(){if(Te(this,$o).length>0)return Te(this,$o).pop();const t=this.fetch().next();if(!t.done)return t.value}hasNext(){if(Te(this,$o).length>0)return!0;const t=this.fetch().next();return t.done?!1:(Te(this,$o).push(t.value),!0)}map(t){return this.all().map(t)}forEach(t){this.all().forEach(t)}[Symbol.iterator](){return this.fetchAll()}}Dh=new WeakMap,Oh=new WeakMap,zc=new WeakMap,Oo=new WeakMap,Cs=new WeakMap,mi=new WeakMap,$o=new WeakMap;const OK=new Set(Array.from(["$and","$or","$nor","$expr","$jsonSchema"]));var Fc,Ds,rl;class lu{constructor(t,n){vn(this,Fc,void 0);vn(this,Ds,void 0);vn(this,rl,void 0);gn(this,rl,tf(t)),gn(this,Ds,$R(n)),gn(this,Fc,[]),this.compile()}compile(){Mt(bn(Te(this,rl)),`query criteria must be an object: ${JSON.stringify(Te(this,rl))}`);const t={};for(const[n,r]of Object.entries(Te(this,rl))){if(n==="$where")Mt(Te(this,Ds).scriptEnabled,"$where operator requires 'scriptEnabled' option to be true."),Object.assign(t,{field:n,expr:r});else if(OK.has(n))this.processOperator(n,n,r);else{Mt(!uu(n),`unknown top level operator: ${n}`);for(const[i,a]of Object.entries(OR(r)))this.processOperator(n,i,a)}t.field&&this.processOperator(t.field,t.field,t.expr)}}processOperator(t,n,r){const i=Sh("query",n,Te(this,Ds));Mt(!!i,`unknown query operator ${n}`),Te(this,Fc).push(i(t,r,Te(this,Ds)))}test(t){return Te(this,Fc).every(n=>n(t))}find(t,n){return new DK(t,r=>this.test(r),n||{},Te(this,Ds))}remove(t){return t.reduce((n,r)=>(this.test(r)||n.push(r),n),[])}}Fc=new WeakMap,Ds=new WeakMap,rl=new WeakMap;const $K=["monday","mon","tuesday","tue","wednesday","wed","thursday","thu","friday","fri","saturday","sat","sunday","sun"];new Set($K);function zr(e){return(n,r,i)=>{const a={unwrapArray:!0},s=Math.max(1,n.split(".").length-1);return u=>{const c=ro(u,n,a);return e(c,r,{...i,depth:s})}}}function hf(e){return(t,n,r)=>{const i=Vi(t,n,null,r);return e(...i)}}function d1(e,t,n){return Ca(e,t)||xi(e)&&xi(t)?!0:mt(e)?e.some(r=>Ca(r,t))||CR(e,n==null?void 0:n.depth).some(r=>Ca(r,t)):!1}function AR(e,t,n){return!d1(e,t,n)}function jR(e,t,n){return xi(e)?t.some(r=>r===null):kR([df(e),t],n==null?void 0:n.hashFunction).length>0}function RK(e,t,n){return!jR(e,t,n)}function LR(e,t,n){return Ig(e,t,(r,i)=>ta(r,i)<0)}function zR(e,t,n){return Ig(e,t,(r,i)=>ta(r,i)<=0)}function FR(e,t,n){return Ig(e,t,(r,i)=>ta(r,i)>0)}function BR(e,t,n){return Ig(e,t,(r,i)=>ta(r,i)>=0)}function NK(e,t,n){return df(e).some(r=>t.length===2&&r%t[0]===t[1])}function TK(e,t,n){const r=df(e),i=a=>Na(a)&&ef(t.exec(a),n==null?void 0:n.useStrictMode);return r.some(i)||CR(r,1).some(i)}function MK(e,t,n){if(!mt(e)||!mt(t)||!e.length||!t.length)return!1;let r=!0;for(const i of t){if(!r)break;bn(i)&&Object.keys(i).includes("$elemMatch")?r=WR(e,i.$elemMatch,n):Ao(i)?r=e.some(a=>typeof a=="string"&&i.test(a)):r=e.some(a=>Ca(i,a))}return r}function IK(e,t,n){return Array.isArray(e)&&e.length===t}function AK(e){return uu(e)&&["$and","$or","$nor"].indexOf(e)===-1}function WR(e,t,n){if(mt(e)&&!f1(e)){let r=s=>s,i=t;Object.keys(t).every(AK)&&(i={temp:t},r=s=>({temp:s}));const a=new lu(i,n);for(let s=0,u=e.length;s<u;s++)if(a.test(r(e[s])))return!0}return!1}const ck=e=>e===null,jK={array:mt,boolean:Tc,bool:Tc,date:Zc,number:Un,int:Un,long:Un,double:Un,decimal:Un,null:ck,object:bn,regexp:Ao,regex:Ao,string:Na,undefined:xi,function:e=>{throw new Jh("unsupported type key `function`.")},1:Un,2:Na,3:bn,4:mt,6:xi,8:Tc,9:Zc,10:ck,11:Ao,16:Un,18:Un,19:Un};function fk(e,t,n){const r=jK[t];return r?r(e):!1}function LK(e,t,n){return mt(t)?t.findIndex(r=>fk(e,r))>=0:fk(e,t)}function Ig(e,t,n){return df(e).some(r=>wh(r)===wh(t)&&n(r,t))}const zK=(e,t,n)=>{const r=Vi(e,t,null,n);return ef(r,n.useStrictMode)&&r.every(i=>ef(i,n.useStrictMode))},FK=(e,t,n)=>{const r=df(t);return r.length==0?!1:(Mt(r.length==1,"Expression $not takes exactly 1 argument"),!Vi(e,r[0],null,n))},BK=(e,t,n)=>{const r=Vi(e,t,null,n),i=n.useStrictMode;return ef(r,i)&&r.some(a=>ef(a,i))},WK=Object.freeze(Object.defineProperty({__proto__:null,$and:zK,$not:FK,$or:BK},Symbol.toStringTag,{value:"Module"})),UK=(e,t,n)=>{const r=Vi(e,t,null,n);return Mt(mt(r)&&r.length==2,"$cmp: expression must resolve to array of size 2."),ta(r[0],r[1])},HK=hf(d1),KK=hf(FR),qK=hf(BR),YK=hf(LR),VK=hf(zR),XK=hf(AR),QK=Object.freeze(Object.defineProperty({__proto__:null,$cmp:UK,$eq:HK,$gt:KK,$gte:qK,$lt:YK,$lte:VK,$ne:XK},Symbol.toStringTag,{value:"Module"})),dk=(e,t)=>{const n={};return e.split("").forEach((r,i)=>n[r]=t*(i+1)),n};({...dk("ABCDEFGHIKLM",1),...dk("NOPQRSTUVWXY",-1)});const hk={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function Ci(e,t=hk){const n=Object.assign({},hk,t),r=new Set(Object.keys(n));return(i,a,s)=>{const u=Vi(i,a,null,s);if(r.has(`${u}`)){const c=n[`${u}`];if(c instanceof Error)throw new Jh(`cannot apply $${e.name} to -inf, value must in (-inf,inf)`);return c}return e(u)}}Ci(Math.acos,{Infinity:1/0,0:new Error});Ci(Math.acosh,{Infinity:1/0,0:new Error});Ci(Math.asin);Ci(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});Ci(Math.atan);Ci(Math.atanh,{1:1/0,"-1":-1/0});Ci(Math.cos);Ci(Math.cosh,{"-Infinity":1/0,Infinity:1/0});const GK=Math.PI/180;Ci(e=>e*GK,{Infinity:1/0,"-Infinity":1/0});const JK=180/Math.PI;Ci(e=>e*JK,{Infinity:1/0,"-Infinity":-1/0});Ci(Math.sin);Ci(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});Ci(Math.tan);const UR=(e,t,n)=>{Mt(mt(t),"Invalid expression: $and expects value to be an Array.");const r=t.map(i=>new lu(i,n));return i=>r.every(a=>a.test(i))},h1=(e,t,n)=>{Mt(mt(t),"Invalid expression. $or expects value to be an Array");const r=t.map(i=>new lu(i,n));return i=>r.some(a=>a.test(i))},HR=(e,t,n)=>{Mt(mt(t),"Invalid expression. $nor expects value to be an array.");const r=h1("$or",t,n);return i=>!r(i)},KR=(e,t,n)=>{const r={};r[e]=OR(t);const i=new lu(r,n);return a=>!i.test(a)},qR=zr(d1),YR=zr(FR),VR=zr(BR),XR=zr(jR),QR=zr(LR),GR=zr(zR),JR=zr(AR),ZR=zr(RK);function ZK(e,t,n){return r=>Vi(r,t,null,n)}function e6(e,t,n){if(!(n!=null&&n.jsonSchemaValidator))throw new Jh("Missing option 'jsonSchemaValidator'. Configure to use '$jsonSchema' operator.");const r=n==null?void 0:n.jsonSchemaValidator(t);return i=>r(i)}const eN=zr(NK),tN=zr(TK);function t6(e,t,n){Mt(n.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true");const r=t;return Mt(Mg(r),"$where only accepts a Function object"),i=>ef(r.call(i),n==null?void 0:n.useStrictMode)}const n6=zr(MK),nN=zr(WR),rN=zr(IK),iN=(e,t,n)=>{const r=e.includes("."),i=!!t;return!r||e.match(/\.\d+$/)?a=>ro(a,e)!==void 0===i:a=>{const s=Id(a,e,{preserveIndex:!0}),u=ro(s,e.substring(0,e.lastIndexOf(".")));return mt(u)?u.some(c=>c!==void 0)===i:u!==void 0===i}},aN=zr(LK);var pk=!1;function r6(e){return pk||(uk("pipeline",{$sort:IR,$project:NR}),uk("query",{$and:UR,$eq:qR,$elemMatch:nN,$exists:iN,$gt:YR,$gte:VR,$in:XR,$lt:QR,$lte:GR,$ne:JR,$nin:ZR,$mod:eN,$nor:HR,$not:KR,$or:h1,$regex:tN,$size:rN,$type:aN}),pk=!0),new lu(e)}function Mc(e,t){var n=ai(e.primaryKey);t=It(t);var r=Mr(t);if(typeof r.skip!="number"&&(r.skip=0),r.selector?(r.selector=r.selector,Object.entries(r.selector).forEach(([v,g])=>{(typeof g!="object"||g===null)&&(r.selector[v]={$eq:g})})):r.selector={},r.index){var i=dh(r.index);i.includes(n)||i.push(n),r.index=i}if(r.sort){var h=r.sort.find(v=>CU(v)===n);h||(r.sort=r.sort.slice(0),r.sort.push({[n]:"asc"}))}else if(r.index)r.sort=r.index.map(v=>({[v]:"asc"}));else{if(e.indexes){var a=new Set;Object.entries(r.selector).forEach(([v,g])=>{var w=!1;typeof g=="object"&&g!==null?w=!!Object.keys(g).find(_=>c1.has(_)):w=!0,w&&a.add(v)});var s=-1,u;e.indexes.forEach(v=>{var g=zv(v)?v:[v],w=g.findIndex(_=>!a.has(_));w>0&&w>s&&(s=w,u=g)}),u&&(r.sort=u.map(v=>({[v]:"asc"})))}if(!r.sort)if(e.indexes&&e.indexes.length>0){var c=e.indexes[0],d=zv(c)?c:[c];r.sort=d.map(v=>({[v]:"asc"}))}else r.sort=[{[n]:"asc"}]}return r}function oN(e,t){if(!t.sort)throw ze("SNH",{query:t});var n=[];t.sort.forEach(i=>{var a=Object.keys(i)[0],s=Object.values(i)[0];n.push({key:a,direction:s,getValueFn:kU(a)})});var r=(i,a)=>{for(var s=0;s<n.length;++s){var u=n[s],c=u.getValueFn(i),d=u.getValueFn(a);if(c!==d){var h=u.direction==="asc"?ta(c,d):ta(d,c);return h}}};return r}function p1(e,t){if(!t.sort)throw ze("SNH",{query:t});var n=r6(t.selector),r=i=>n.test(i);return r}async function ac(e,t){var n=await e.exec();if(!n)return null;if(Array.isArray(n))return Promise.all(n.map(i=>t(i)));if(n instanceof Map)return Promise.all([...n.values()].map(i=>t(i)));var r=await t(n);return r}function Ag(e,t){if(!t.sort)throw ze("SNH",{query:t});var n=tK(e,t);return{query:t,queryPlan:n}}var i6="_rxdb_internal";async function pf(e,t){var n=await e.findDocumentsById([t],!1),r=n[0];if(r)return r}async function nf(e,t,n){var r=await e.bulkWrite([t],n);if(r.error.length>0){var i=r.error[0];throw i}else{var a=ai(e.schema.primaryKey),s=na(a,[t],r),u=s[0];return u}}function a6(e,t){var n=pf(e,t),r=e.changeStream().pipe(_n(i=>i.events.find(a=>a.documentId===t)),Nt(i=>!!i),_n(i=>Promise.resolve(Ye(i).documentData)),Gh(n),GH(i=>i),Nt(i=>!!i));return r}function Eh(e){return Object.assign({},...e.filter(t=>!!t))}function Hv(e,t,n,r){if(r)throw r.status===409?ze("CONFLICT",{collection:e.name,id:t,writeError:r,data:n}):r.status===422?ze("VD2",{collection:e.name,id:t,writeError:r,data:n}):r}function o6(e,t,n,r,i,a,s){for(var u=!!e.schema.attachments,c=[],d=[],h=[],v=Kh(10),g={id:v,events:[],checkpoint:null,context:i},w=g.events,_=[],E=[],C=[],x=n.size>0,S,P=r.length,M=function(){var U=r[T],W=U.document,re=U.previous,he=W[t],de=W._deleted,ce=re&&re._deleted,pe=void 0;x&&(pe=n.get(he));var xe;if(pe){var qe=pe._rev;if(!re||re&&qe!==re._rev){var We={isError:!0,status:409,documentId:he,writeRow:U,documentInDb:pe};return h.push(We),1}var oe=u?W0(U):U;u&&(de?re&&Object.keys(re._attachments).forEach(X=>{E.push({documentId:he,attachmentId:X,digest:Ye(re)._attachments[X].digest})}):(Object.entries(W._attachments).find(([X,I])=>{var H=re?re._attachments[X]:void 0;return!H&&!I.data&&(xe={documentId:he,documentInDb:pe,isError:!0,status:510,writeRow:U,attachmentId:X}),!0}),xe||Object.entries(W._attachments).forEach(([X,I])=>{var H=re?re._attachments[X]:void 0;if(!H)_.push({documentId:he,attachmentId:X,attachmentData:I,digest:I.digest});else{var ae=oe.document._attachments[X].digest;I.data&&H.digest!==ae&&C.push({documentId:he,attachmentId:X,attachmentData:I,digest:I.digest})}}))),xe?h.push(xe):(u?(d.push(W0(oe)),s&&s(W)):(d.push(oe),s&&s(W)),S=oe);var _e=null,G=null,F=null;if(ce&&!de)F="INSERT",_e=u?Qa(W):W;else if(re&&!ce&&!de)F="UPDATE",_e=u?Qa(W):W,G=re;else if(de)F="DELETE",_e=Ye(W),G=re;else throw ze("SNH",{args:{writeRow:U}});var ee={documentId:he,documentData:_e,previousDocumentData:G,operation:F};w.push(ee)}else{var Ce=!!de;if(u&&Object.entries(W._attachments).forEach(([X,I])=>{I.data?_.push({documentId:he,attachmentId:X,attachmentData:I,digest:I.digest}):(xe={documentId:he,isError:!0,status:510,writeRow:U,attachmentId:X},h.push(xe))}),xe||(u?(c.push(W0(U)),a&&a(W)):(c.push(U),a&&a(W)),S=U),!Ce){var Le={documentId:he,operation:"INSERT",documentData:u?Qa(W):W,previousDocumentData:u&&re?Qa(re):re};w.push(Le)}}},T=0;T<P;T++)M();return{bulkInsertDocs:c,bulkUpdateDocs:d,newestRow:S,errors:h,eventBulk:g,attachmentsAdd:_,attachmentsRemove:E,attachmentsUpdate:C}}function W0(e){return{previous:e.previous,document:Qa(e.document)}}function s6(e){return atob(e).length}function u6(e){var t=e.data;if(!t)return e;var n={length:s6(t),digest:e.digest,type:e.type};return n}function Qa(e){if(!e._attachments||Object.keys(e._attachments).length===0)return e;var t=It(e);return t._attachments={},Object.entries(e._attachments).forEach(([n,r])=>{t._attachments[n]=u6(r)}),t}function ep(e){return Object.assign({},e,{_meta:It(e._meta)})}function m1(e,t,n){Tt.deepFreezeWhenDevMode(n);var r=ai(t.schema.primaryKey),i={originalStorageInstance:t,schema:t.schema,internals:t.internals,collectionName:t.collectionName,databaseName:t.databaseName,options:t.options,async bulkWrite(a,s){for(var u=e.token,c=new Array(a.length),d=ki(),h=0;h<a.length;h++){var v=a[h],g=ep(v.document);g._meta.lwt=d;var w=v.previous;g._rev=Ko(u,w),c[h]={document:g,previous:w}}ii("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:c});var _=await e.lockedRun(()=>t.bulkWrite(c,s)),E={error:[]};uN.set(E,c);var C=_.error.length===0?[]:_.error.filter(U=>U.status===409&&!U.writeRow.previous&&!U.writeRow.document._deleted&&Ye(U.documentInDb)._deleted?!0:(E.error.push(U),!1));if(C.length>0){var x=new Set,S=C.map(U=>(x.add(U.documentId),{previous:U.documentInDb,document:Object.assign({},U.writeRow.document,{_rev:Ko(e.token,U.documentInDb)})})),P=await e.lockedRun(()=>t.bulkWrite(S,s));ml(E.error,P.error);var M=na(r,c,E,x),T=na(r,S,P);return ml(M,T),E}return E},query(a){return e.lockedRun(()=>t.query(a))},count(a){return e.lockedRun(()=>t.count(a))},findDocumentsById(a,s){return e.lockedRun(()=>t.findDocumentsById(a,s))},getAttachmentData(a,s,u){return e.lockedRun(()=>t.getAttachmentData(a,s,u))},getChangedDocumentsSince:t.getChangedDocumentsSince?(a,s)=>e.lockedRun(()=>t.getChangedDocumentsSince(Ye(a),s)):void 0,cleanup(a){return e.lockedRun(()=>t.cleanup(a))},remove(){return e.storageInstances.delete(i),e.lockedRun(()=>t.remove())},close(){return e.storageInstances.delete(i),e.lockedRun(()=>t.close())},changeStream(){return t.changeStream()}};return e.storageInstances.add(i),i}function l6(e){if(e.schema.keyCompression)throw ze("UT5",{args:{params:e}});if(Kv(e.schema))throw ze("UT6",{args:{params:e}});if(e.schema.attachments&&e.schema.attachments.compression)throw ze("UT7",{args:{params:e}})}function Kv(e){return!!(e.encrypted&&e.encrypted.length>0||e.attachments&&e.attachments.encrypted)}function c6(e,t,n){var r=ai(e.schema.primaryKey),i=n?n.lwt:e1,a=n?n.id:"";return Mc(e.schema,{selector:{$or:[{"_meta.lwt":{$gt:i}},{"_meta.lwt":{$eq:i},[r]:{$gt:n?a:""}}],"_meta.lwt":{$gte:i}},sort:[{"_meta.lwt":"asc"},{[r]:"asc"}],skip:0,limit:t})}async function sN(e,t,n){if(e.getChangedDocumentsSince)return e.getChangedDocumentsSince(t,n);var r=ai(e.schema.primaryKey),i=Ag(e.schema,c6(e,t,n)),a=await e.query(i),s=a.documents,u=SU(s);return{documents:s,checkpoint:u?{id:u[r],lwt:u._meta.lwt}:n||{id:"",lwt:0}}}var uN=new WeakMap,f6=new WeakMap;function na(e,t,n,r){return Ir(f6,n,()=>{var i=[],a=uN.get(n);if(a||(a=t),n.error.length>0||r){for(var s=r||new Set,u=0;u<n.error.length;u++){var c=n.error[u];s.add(c.documentId)}for(var d=0;d<a.length;d++){var h=a[d].document;s.has(h[e])||i.push(Qa(h))}}else{i.length=t.length-n.error.length;for(var v=0;v<a.length;v++){var g=a[v].document;i[v]=Qa(g)}}return i})}var lN=function(){function e(n,r,i,a){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=n,this.primaryPath=r,this.preWrite=i,this.postWrite=a}var t=e.prototype;return t.addWrite=function(r,i){var a=r[this.primaryPath],s=Ir(this.queueByDocId,a,()=>[]),u=new Promise((c,d)=>{var h={lastKnownDocumentState:r,modifier:i,resolve:c,reject:d};Ye(s).push(h),this.triggerRun()});return u},t.triggerRun=async function(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var r=[],i=this.queueByDocId;this.queueByDocId=new Map,await Promise.all(Array.from(i.entries()).map(async([s,u])=>{var c=d6(u.map(v=>v.lastKnownDocumentState)),d=c;for(var h of u)try{d=await h.modifier(Mr(d))}catch(v){h.reject(v),h.reject=()=>{},h.resolve=()=>{}}try{await this.preWrite(d,c)}catch(v){u.forEach(g=>g.reject(v));return}r.push({previous:c,document:d})}));var a=r.length>0?await this.storageInstance.bulkWrite(r,"incremental-write"):{error:[]};return await Promise.all(na(this.primaryPath,r,a).map(s=>{var u=s[this.primaryPath];this.postWrite(s);var c=Xc(i,u);c.forEach(d=>d.resolve(s))})),a.error.forEach(s=>{var u=s.documentId,c=Xc(i,u),d=Vc(s);if(d){var h=Ir(this.queueByDocId,u,()=>[]);c.reverse().forEach(g=>{g.lastKnownDocumentState=Ye(d.documentInDb),Ye(h).unshift(g)})}else{var v=W$(s);c.forEach(g=>g.reject(v))}}),this.isRunning=!1,this.triggerRun()}},e}();function mk(e){var t=async n=>{var r=DU(n);r._deleted=n._deleted;var i=await e(r),a=Object.assign({},i,{_meta:n._meta,_attachments:n._attachments,_rev:n._rev,_deleted:typeof i._deleted<"u"?i._deleted:n._deleted});return typeof a._deleted>"u"&&(a._deleted=!1),a};return t}function d6(e){var t=e[0],n=Js(t._rev);return e.forEach(r=>{var i=Js(r._rev);i>n&&(t=r,n=i)}),t}var jg={get primaryPath(){var e=this;if(e.isInstanceOfRxDocument)return e.collection.schema.primaryPath},get primary(){var e=this;if(e.isInstanceOfRxDocument)return e._data[e.primaryPath]},get revision(){var e=this;if(e.isInstanceOfRxDocument)return e._data._rev},get deleted$(){var e=this;if(e.isInstanceOfRxDocument)return e.$.pipe(_n(t=>t._data._deleted))},get deleted$$(){var e=this,t=e.collection.database.getReactivityFactory();return t.fromObservable(e.deleted$,e.getLatest().deleted,e.collection.database)},get deleted(){var e=this;if(e.isInstanceOfRxDocument)return e._data._deleted},getLatest(){var e=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(e)},get $(){var e=this,t=this.primary;return e.collection.eventBulks$.pipe(Nt(n=>!n.isLocal),_n(n=>n.events.find(r=>r.documentId===t)),Nt(n=>!!n),_n(n=>_R(Ye(n))),Gh(e.collection._docCache.getLatestDocumentData(t)),vh((n,r)=>n._rev===r._rev),_n(n=>this.collection._docCache.getCachedRxDocument(n)),Qh(qh))},get $$(){var e=this,t=e.collection.database.getReactivityFactory();return t.fromObservable(e.$,e.getLatest()._data,e.collection.database)},get$(e){if(Tt.isDevMode()){if(e.includes(".item."))throw ze("DOC1",{path:e});if(e===this.primaryPath)throw ze("DOC2");if(this.collection.schema.finalFields.includes(e))throw ze("DOC3",{path:e});var t=Qc(this.collection.schema.jsonSchema,e);if(!t)throw ze("DOC4",{path:e})}return this.$.pipe(_n(n=>Zs(n,e)),vh())},get$$(e){var t=this.get$(e),n=this.collection.database.getReactivityFactory();return n.fromObservable(t,this.getLatest().get(e),this.collection.database)},populate(e){var t=Qc(this.collection.schema.jsonSchema,e),n=this.get(e);if(!n)return i1;if(!t)throw ze("DOC5",{path:e});if(!t.ref)throw ze("DOC6",{path:e,schemaObj:t});var r=this.collection.database.collections[t.ref];if(!r)throw ze("DOC7",{ref:t.ref,path:e,schemaObj:t});return t.type==="array"?r.findByIds(n).exec().then(i=>{var a=i.values();return Array.from(a)}):r.findOne(n).exec()},get(e){return dN(this,e)},toJSON(e=!1){if(e)return Tt.deepFreezeWhenDevMode(this._data);var t=It(this._data);return delete t._rev,delete t._attachments,delete t._deleted,delete t._meta,Tt.deepFreezeWhenDevMode(t)},toMutableJSON(e=!1){return Mr(this.toJSON(e))},update(e){throw Rt("update")},incrementalUpdate(e){throw Rt("update")},updateCRDT(e){throw Rt("crdt")},putAttachment(){throw Rt("attachments")},putAttachmentBase64(){throw Rt("attachments")},getAttachment(){throw Rt("attachments")},allAttachments(){throw Rt("attachments")},get allAttachments$(){throw Rt("attachments")},async modify(e,t){var n=this._data,r=await mk(e)(n);return this._saveData(r,n)},incrementalModify(e,t){return this.collection.incrementalWriteQueue.addWrite(this._data,mk(e)).then(n=>this.collection._docCache.getCachedRxDocument(n))},patch(e){var t=this._data,n=Mr(t);return Object.entries(e).forEach(([r,i])=>{n[r]=i}),this._saveData(n,t)},incrementalPatch(e){return this.incrementalModify(t=>(Object.entries(e).forEach(([n,r])=>{t[n]=r}),t))},async _saveData(e,t){if(e=It(e),this._data._deleted)throw ze("DOC11",{id:this.primary,document:this});await fN(this.collection,e,t);var n=[{previous:t,document:e}],r=await this.collection.storageInstance.bulkWrite(n,"rx-document-save-data"),i=r.error[0];return Hv(this.collection,this.primary,e,i),await this.collection._runHooks("post","save",e,this),this.collection._docCache.getCachedRxDocument(na(this.collection.schema.primaryPath,n,r)[0])},async remove(){if(this.deleted)return Promise.reject(ze("DOC13",{document:this,id:this.primary}));var e=await this.collection.bulkRemove([this]);if(e.error.length>0){var t=e.error[0];Hv(this.collection,this.primary,this._data,t)}return e.success[0]},incrementalRemove(){return this.incrementalModify(async e=>(await this.collection._runHooks("pre","remove",e,this),e._deleted=!0,e)).then(async e=>(await this.collection._runHooks("post","remove",e._data,e),e))},close(){throw ze("DOC14")}};function cN(e=jg){var t=function(r,i){this.collection=r,this._data=i,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return t.prototype=e,t}function h6(e,t,n){var r=new e(t,n);return ii("createRxDocument",r),r}function fN(e,t,n){return t._meta=Object.assign({},n._meta,t._meta),Tt.isDevMode()&&e.schema.validateChange(n,t),e._runHooks("pre","save",t,n)}function dN(e,t){return Ir(e._propertyCache,t,()=>{var n=Zs(e._data,t);if(typeof n!="object"||n===null||Array.isArray(n))return Tt.deepFreezeWhenDevMode(n);var r=new Proxy(It(n),{get(i,a){if(typeof a!="string")return i[a];var s=a.charAt(a.length-1);if(s==="$")if(a.endsWith("$$")){var u=a.slice(0,-2);return e.get$$(_d(t+"."+u))}else{var c=a.slice(0,-1);return e.get$(_d(t+"."+c))}else if(s==="_"){var d=a.slice(0,-1);return e.populate(_d(t+"."+d))}else{var h=i[a];return typeof h=="number"||typeof h=="string"||typeof h=="boolean"?h:dN(e,_d(t+"."+a))}}});return r})}function v1(e){return e[e.length-1]}function p6(e){const t=typeof e;return e!==null&&(t==="object"||t==="function")}function vk(e,t,n){if(Array.isArray(t)&&(t=t.join(".")),!p6(e)||typeof t!="string")return n===void 0?e:n;const r=t.split(".");if(r.length===0)return n;for(let i=0;i<r.length;i++){const a=r[i];if(m6(e,a)?e=i===r.length-1?void 0:null:e=e[a],e==null){if(i!==r.length-1)return n;break}}return e===void 0?n:e}function m6(e,t){if(typeof t!="number"&&Array.isArray(e)){const n=Number.parseInt(t,10);return Number.isInteger(n)&&e[n]===e[t]}return!1}const hN=e=>!!e.queryParams.limit,v6=e=>e.queryParams.limit===1,g6=e=>!!(e.queryParams.skip&&e.queryParams.skip>0),y6=e=>e.changeEvent.operation==="DELETE",w6=e=>e.changeEvent.operation==="INSERT",_6=e=>e.changeEvent.operation==="UPDATE",b6=e=>hN(e)&&e.previousResults.length>=e.queryParams.limit,S6=e=>{const t=e.queryParams.sortFields,n=e.changeEvent.previous,r=e.changeEvent.doc;if(!r)return!1;if(!n)return!0;for(let i=0;i<t.length;i++){const a=t[i],s=vk(n,a),u=vk(r,a);if(s!==u)return!0}return!1},x6=e=>{const t=e.changeEvent.id;if(e.keyDocumentMap)return e.keyDocumentMap.has(t);{const n=e.queryParams.primaryKey,r=e.previousResults;for(let i=0;i<r.length;i++)if(r[i][n]===t)return!0;return!1}},E6=e=>{const t=e.previousResults[0];return!!(t&&t[e.queryParams.primaryKey]===e.changeEvent.id)},P6=e=>{const t=v1(e.previousResults);return!!(t&&t[e.queryParams.primaryKey]===e.changeEvent.id)},k6=e=>{const t=e.changeEvent.previous;if(!t)return!1;const n=e.previousResults[0];return n?n[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,n)<0:!1},C6=e=>{const t=e.changeEvent.previous;if(!t)return!1;const n=v1(e.previousResults);return n?n[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,n)>0:!1},D6=e=>{const t=e.changeEvent.doc;if(!t)return!1;const n=e.previousResults[0];return n?n[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,n)<0:!1},O6=e=>{const t=e.changeEvent.doc;if(!t)return!1;const n=v1(e.previousResults);return n?n[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,n)>0:!1},$6=e=>{const t=e.changeEvent.previous;return t?e.queryParams.queryMatcher(t):!1},R6=e=>{const t=e.changeEvent.doc;return t?e.queryParams.queryMatcher(t):!1},N6=e=>e.previousResults.length===0,T6={0:w6,1:_6,2:y6,3:hN,4:v6,5:g6,6:N6,7:b6,8:E6,9:P6,10:S6,11:x6,12:k6,13:C6,14:D6,15:O6,16:$6,17:R6};function M6(e,t,n,r){var i=e.length,a=i-1,s=0;if(i===0)return e.push(t),0;for(var u;r<=a;)s=r+(a-r>>1),u=e[s],n(u,t)<=0?r=s+1:a=s-1;return n(u,t)<=0&&s++,e.splice(s,0,t),s}const I6=e=>{},g1=e=>{e.previousResults.unshift(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},y1=e=>{e.previousResults.push(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},w1=e=>{const t=e.previousResults.shift();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},_1=e=>{const t=e.previousResults.pop();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},A6=e=>{w1(e),y1(e)},j6=e=>{_1(e),g1(e)},L6=e=>{w1(e),g1(e)},z6=e=>{_1(e),y1(e)},pN=e=>{e.keyDocumentMap&&e.keyDocumentMap.delete(e.changeEvent.id);const t=e.queryParams.primaryKey,n=e.previousResults;for(let r=0;r<n.length;r++)if(n[r][t]===e.changeEvent.id){n.splice(r,1);break}},F6=e=>{const t=e.changeEvent.doc,n=e.queryParams.primaryKey,r=e.previousResults;for(let i=0;i<r.length;i++)if(r[i][n]===e.changeEvent.id){r[i]=t,e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,t);break}},B6=e=>{const t={_id:"wrongHuman"+new Date().getTime()};e.previousResults.length=0,e.previousResults.push(t),e.keyDocumentMap&&(e.keyDocumentMap.clear(),e.keyDocumentMap.set(t._id,t))},mN=e=>{const t=e.changeEvent.id,n=e.changeEvent.doc;if(e.keyDocumentMap){if(e.keyDocumentMap.has(t))return;e.keyDocumentMap.set(t,n)}else if(e.previousResults.find(i=>i[e.queryParams.primaryKey]===t))return;M6(e.previousResults,n,e.queryParams.sortComparator,0)},W6=e=>{pN(e),mN(e)},U6=e=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},H6=e=>{throw new Error("Action unknownAction should never be called")},K6=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],q6={doNothing:I6,insertFirst:g1,insertLast:y1,removeFirstItem:w1,removeLastItem:_1,removeFirstInsertLast:A6,removeLastInsertFirst:j6,removeFirstInsertFirst:L6,removeLastInsertLast:z6,removeExisting:pN,replaceExisting:F6,alwaysWrong:B6,insertAtSortPosition:mN,removeExistingAndInsertAtSortPosition:W6,runFullQueryAgain:U6,unknownAction:H6},Y6=40;function U0(e){return e.charCodeAt(0)-Y6}function V6(e){return e?"1":"0"}function gk(e,t){const n=[];for(let r=0,i=e.length;r<i;r+=t)n.push(e.substring(r,r+t));return n}function X6(e){const t=new Map,r=2+parseInt(e.charAt(0)+e.charAt(1),10)*2,i=e.substring(2,r),a=gk(i,2);for(let E=0;E<a.length;E++){const C=a[E],x=C.charAt(0),S=U0(C.charAt(1));t.set(x,S)}const s=e.substring(r,e.length-3),u=gk(s,4);for(let E=0;E<u.length;E++){const C=u[E],x=C.charAt(0),S=C.charAt(1),P=C.charAt(2),M=U0(C.charAt(3));if(!t.has(S))throw new Error("missing node with id "+S);if(!t.has(P))throw new Error("missing node with id "+P);const T=t.get(S),U=t.get(P),W={l:M,0:T,1:U};t.set(x,W)}const c=e.slice(-3),d=c.charAt(0),h=c.charAt(1),v=U0(c.charAt(2)),g=t.get(d),w=t.get(h);return{l:v,0:g,1:w}}function Q6(e,t,n){let r=e,i=e.l;for(;;){const a=t[i](n),s=V6(a);if(r=r[s],typeof r=="number"||typeof r=="string")return r;i=r.l}}const G6="14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9ae9bf9bq9cg9ck9cn9nd9np9nq9nf9ng9nm9nk9mr9ms9mt9mj9mk9ml9mn9mc8{8}888mn88m8m4z4w4z44444m4v7yn77~777n777m77m7m7m5m5m55m555m55m5m552|2u2222x222|222222n2n222n2/an/bn/cn///////////,cn,,,,,,,ac0bc00000000000m-m-----------3333(((++++11*m*.";let H0;function J6(){return H0||(H0=X6(G6)),H0}const Z6=e=>Q6(J6(),T6,e);function e9(e){const t=Z6(e);return K6[t]}function t9(e,t,n,r,i){const a=q6[e];return a({queryParams:t,changeEvent:n,previousResults:r,keyDocumentMap:i}),r}function n9(e,t){return!t.sort||t.sort.length===0?[e]:t.sort.map(n=>Object.keys(n)[0])}var r9=new WeakMap;function i9(e){return Ir(r9,e,()=>{var t=e.collection,n=Mc(t.storageInstance.schema,Mr(e.mangoQuery)),r=t.schema.primaryPath,i=oN(t.schema.jsonSchema,n),a=(d,h)=>{var v={docA:d,docB:h,rxQuery:e};return i(v.docA,v.docB)},s=p1(t.schema.jsonSchema,n),u=d=>{var h={doc:d,rxQuery:e};return s(h.doc)},c={primaryKey:e.collection.schema.primaryPath,skip:n.skip,limit:n.limit,sortFields:n9(r,n),sortComparator:a,queryMatcher:u};return c})}function a9(e,t){if(!e.collection.database.eventReduce)return{runFullQueryAgain:!0};for(var n=i9(e),r=Ye(e._result).docsData.slice(0),i=Ye(e._result).docsDataMap,a=!1,s=[],u=0;u<t.length;u++){var c=t[u],d=JH(c);d&&s.push(d)}var h=s.find(v=>{var g={queryParams:n,changeEvent:v,previousResults:r,keyDocumentMap:i},w=e9(g);if(w==="runFullQueryAgain")return!0;if(w!=="doNothing")return a=!0,t9(w,n,v,r,i),!1});return h?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:a,newResults:r}}var o9=function(){function e(){this._map=new Map}var t=e.prototype;return t.getByQuery=function(r){var i=r.toString(),a=Ir(this._map,i,()=>r);return a},e}();function s9(){return new o9}function yk(e,t){t.uncached=!0;var n=t.toString();e._map.delete(n)}function u9(e){return e.refCount$.observers.length}var l9=100,c9=30*1e3,f9=(e,t)=>(n,r)=>{if(!(r._map.size<e)){var i=ki()-t,a=[],s=Array.from(r._map.values());for(var u of s)if(!(u9(u)>0)){if(u._lastEnsureEqual===0&&u._creationTime<i){yk(r,u);continue}a.push(u)}var c=a.length-e;if(!(c<=0)){var d=a.sort((v,g)=>v._lastEnsureEqual-g._lastEnsureEqual),h=d.slice(0,c);h.forEach(v=>yk(r,v))}}},vN=f9(l9,c9),K0=new WeakSet;function d9(e){K0.has(e)||(K0.add(e),LU().then(()=>FU(200)).then(()=>{e.closed||e.cacheReplacementPolicy(e,e._queryCache),K0.delete(e)}))}var gN=function(){function e(n,r,i){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(a=>{var s=a.docId,u=this.cacheItemByDocId.get(s);u&&(u[0].delete(a.revisionHeight+a.lwt+""),u[0].size===0&&this.cacheItemByDocId.delete(s))}):void 0,this.primaryPath=n,this.changes$=r,this.documentCreator=i,r.subscribe(a=>{this.tasks.add(()=>{for(var s=this.cacheItemByDocId,u=0;u<a.length;u++){var c=a[u],d=s.get(c.documentId);if(d){var h=c.documentData;h||(h=c.previousDocumentData),d[1]=h}}}),this.tasks.size<=1&&Rg().then(()=>{this.processTasks()})})}var t=e.prototype;return t.processTasks=function(){if(this.tasks.size!==0){var r=Array.from(this.tasks);r.forEach(i=>i()),this.tasks.clear()}},t.getLatestDocumentData=function(r){this.processTasks();var i=Xc(this.cacheItemByDocId,r);return i[1]},t.getLatestDocumentDataIfExists=function(r){this.processTasks();var i=this.cacheItemByDocId.get(r);if(i)return i[1]},ou(e,[{key:"getCachedRxDocuments",get:function(){var n=wk(this);return Mo(this,"getCachedRxDocuments",n)}},{key:"getCachedRxDocument",get:function(){var n=wk(this);return Mo(this,"getCachedRxDocument",r=>n([r])[0])}}])}();function wk(e){var t=e.primaryPath,n=e.cacheItemByDocId,r=e.registry,i=Tt.deepFreezeWhenDevMode,a=e.documentCreator,s=u=>{for(var c=new Array(u.length),d=[],h=0;h<u.length;h++){var v=u[h],g=v[t],w=Js(v._rev),_=void 0,E=void 0,C=n.get(g);C?(_=C[0],E=_.get(w+v._meta.lwt+"")):(_=new Map,C=[_,v],n.set(g,C));var x=E?E.deref():void 0;x||(v=i(v),x=a(v),_.set(w+v._meta.lwt+"",p9(x)),r&&d.push(x)),c[h]=x}return d.length>0&&r&&(e.tasks.add(()=>{for(var S=0;S<d.length;S++){var P=d[S];r.register(P,{docId:P.primary,revisionHeight:Js(P.revision),lwt:P._data._meta.lwt})}}),e.tasks.size<=1&&Rg().then(()=>{e.processTasks()})),c};return s}function x_(e,t){var n=e.getCachedRxDocuments;return n(t)}var h9=typeof WeakRef=="function",p9=h9?m9:v9;function m9(e){return new WeakRef(e)}function v9(e){return{deref(){return e}}}var _k=function(){function e(n,r,i){this.time=ki(),this.query=n,this.count=i,this.documents=x_(this.query.collection._docCache,r)}var t=e.prototype;return t.getValue=function(r){var i=this.query.op;if(i==="count")return this.count;if(i==="findOne"){var a=this.documents.length===0?null:this.documents[0];if(!a&&r)throw ze("QU10",{collection:this.query.collection.name,query:this.query.mangoQuery,op:i});return a}else return i==="findByIds"?this.docsMap:this.documents.slice(0)},ou(e,[{key:"docsData",get:function(){return Mo(this,"docsData",this.documents.map(n=>n._data))}},{key:"docsDataMap",get:function(){var n=new Map;return this.documents.forEach(r=>{n.set(r.primary,r._data)}),Mo(this,"docsDataMap",n)}},{key:"docsMap",get:function(){for(var n=new Map,r=this.documents,i=0;i<r.length;i++){var a=r[i];n.set(a.primary,a)}return Mo(this,"docsMap",n)}}])}(),g9=0,y9=function(){return++g9},yN=function(){function e(n,r,i,a={}){this.id=y9(),this._execOverDatabaseCount=0,this._creationTime=ki(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new qa(null),this._result=null,this._latestChangeEvent=-1,this._ensureEqualQueue=to,this.op=n,this.mangoQuery=r,this.collection=i,this.other=a,r||(this.mangoQuery=Qm()),this.isFindOneByIdQuery=S9(this.collection.schema.primaryPath,r)}var t=e.prototype;return t._setResultData=function(r){if(typeof r>"u")throw ze("QU18",{database:this.collection.database.name,collection:this.collection.name});if(typeof r=="number"){this._result=new _k(this,[],r);return}else r instanceof Map&&(r=Array.from(r.values()));var i=new _k(this,r,r.length);this._result=i},t._execOverDatabase=async function(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this.op==="count"){var r=this.getPreparedQuery(),i=await this.collection.storageInstance.count(r);if(i.mode==="slow"&&!this.collection.database.allowSlowCount)throw ze("QU14",{collection:this.collection,queryObj:this.mangoQuery});return i.count}if(this.op==="findByIds"){var a=Ye(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,s=new Map,u=[];if(a.forEach(h=>{var v=this.collection._docCache.getLatestDocumentDataIfExists(h);if(v){if(!v._deleted){var g=this.collection._docCache.getCachedRxDocument(v);s.set(h,g)}}else u.push(h)}),u.length>0){var c=await this.collection.storageInstance.findDocumentsById(u,!1);c.forEach(h=>{var v=this.collection._docCache.getCachedRxDocument(h);s.set(v.primary,v)})}return s}var d=b9(this);return d.then(h=>h)},t.exec=async function(r){if(r&&this.op!=="findOne")throw ze("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});await bk(this);var i=Ye(this._result);return i.getValue(r)},t.toString=function(){var r=Fv({op:this.op,query:Mc(this.collection.schema.jsonSchema,this.mangoQuery),other:this.other},!0),i=JSON.stringify(r);return this.toString=()=>i,i},t.getPreparedQuery=function(){var r={rxQuery:this,mangoQuery:Mc(this.collection.schema.jsonSchema,this.mangoQuery)};r.mangoQuery.selector._deleted={$eq:!1},r.mangoQuery.index&&r.mangoQuery.index.unshift("_deleted"),ii("prePrepareQuery",r);var i=Ag(this.collection.schema.jsonSchema,r.mangoQuery);return this.getPreparedQuery=()=>i,i},t.doesDocumentDataMatch=function(r){return r._deleted?!1:this.queryMatcher(r)},t.remove=async function(){var r=await this.exec();if(Array.isArray(r)){var i=await this.collection.bulkRemove(r);if(i.error.length>0)throw W$(i.error[0]);return i.success}else return r.remove()},t.incrementalRemove=function(){return ac(this.asRxQuery,r=>r.incrementalRemove())},t.update=function(r){throw Rt("update")},t.patch=function(r){return ac(this.asRxQuery,i=>i.patch(r))},t.incrementalPatch=function(r){return ac(this.asRxQuery,i=>i.incrementalPatch(r))},t.modify=function(r){return ac(this.asRxQuery,i=>i.modify(r))},t.incrementalModify=function(r){return ac(this.asRxQuery,i=>i.incrementalModify(r))},t.where=function(r){throw Rt("query-builder")},t.sort=function(r){throw Rt("query-builder")},t.skip=function(r){throw Rt("query-builder")},t.limit=function(r){throw Rt("query-builder")},ou(e,[{key:"$",get:function(){if(!this._$){var n=this.collection.eventBulks$.pipe(Nt(r=>!r.isLocal),Gh(null),no(()=>bk(this)),_n(()=>this._result),Qh(qh),vh((r,i)=>!!(r&&r.time===Ye(i).time)),Nt(r=>!!r),_n(r=>Ye(r).getValue()));this._$=eK(n,this.refCount$.pipe(Nt(()=>!1)))}return this._$}},{key:"$$",get:function(){var n=this.collection.database.getReactivityFactory();return n.fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){var n=this.collection.schema.jsonSchema,r=Mc(this.collection.schema.jsonSchema,this.mangoQuery);return Mo(this,"queryMatcher",p1(n,r))}},{key:"asRxQuery",get:function(){return this}}])}();function Qm(){return{selector:{}}}function w9(e){return e.collection._queryCache.getByQuery(e)}function dd(e,t,n,r){ii("preCreateRxQuery",{op:e,queryObj:t,collection:n,other:r});var i=new yN(e,t,n,r);return i=w9(i),d9(n),i}function wN(e){var t=e.asRxQuery.collection._changeEventBuffer.getCounter();return e._latestChangeEvent>=t}async function bk(e){return e.collection.awaitBeforeReads.size>0&&await Promise.all(Array.from(e.collection.awaitBeforeReads).map(t=>t())),e.collection.database.closed||wN(e)?!1:(e._ensureEqualQueue=e._ensureEqualQueue.then(()=>_9(e)),e._ensureEqualQueue)}function _9(e){if(e._lastEnsureEqual=ki(),e.collection.database.closed||wN(e))return to;var t=!1,n=!1;if(e._latestChangeEvent===-1&&(n=!0),!n){var r=e.asRxQuery.collection._changeEventBuffer.getFrom(e._latestChangeEvent+1);if(r===null)n=!0;else{e._latestChangeEvent=e.asRxQuery.collection._changeEventBuffer.getCounter();var i=e.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(r);if(e.op==="count"){var a=Ye(e._result).count,s=a;i.forEach(c=>{var d=c.previousDocumentData&&e.doesDocumentDataMatch(c.previousDocumentData),h=e.doesDocumentDataMatch(c.documentData);!d&&h&&s++,d&&!h&&s--}),s!==a&&(t=!0,e._setResultData(s))}else{var u=a9(e,i);u.runFullQueryAgain?n=!0:u.changed&&(t=!0,e._setResultData(u.newResults))}}}return n?e._execOverDatabase().then(c=>(e._latestChangeEvent=e.collection._changeEventBuffer.getCounter(),typeof c=="number"?((!e._result||c!==e._result.count)&&(t=!0,e._setResultData(c)),t):((!e._result||!OU(e.collection.schema.primaryPath,c,e._result.docsData))&&(t=!0,e._setResultData(c)),t))):Promise.resolve(t)}async function b9(e){var t=[],n=e.collection;if(e.isFindOneByIdQuery)if(Array.isArray(e.isFindOneByIdQuery)){var r=e.isFindOneByIdQuery;if(r=r.filter(h=>{var v=e.collection._docCache.getLatestDocumentDataIfExists(h);return v?(v._deleted||t.push(v),!1):!0}),r.length>0){var i=await n.storageInstance.findDocumentsById(r,!1);ml(t,i)}}else{var a=e.isFindOneByIdQuery,s=e.collection._docCache.getLatestDocumentDataIfExists(a);if(!s){var u=await n.storageInstance.findDocumentsById([a],!1);u[0]&&(s=u[0])}s&&!s._deleted&&t.push(s)}else{var c=e.getPreparedQuery(),d=await n.storageInstance.query(c);t=d.documents}return t}function S9(e,t){if(!t.skip&&t.selector&&Object.keys(t.selector).length===1&&t.selector[e]){var n=t.selector[e];if(typeof n=="string")return n;if(Object.keys(n).length===1&&typeof n.$eq=="string"||Object.keys(n).length===1&&Array.isArray(n.$eq)&&!n.$eq.find(r=>typeof r!="string"))return n.$eq}return!1}var Ks="collection",b1="storage-token",Gm="rx-migration-status",x9="rx-pipeline-checkpoint",E9="RxInternalDocument",S1=Ng({version:0,title:E9,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[Ks,b1,Gm,x9,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function yl(e,t){return su(S1,{key:e,context:t})}async function _N(e){var t=Ag(e.schema,{selector:{context:Ks,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0}),n=await e.query(t),r=n.documents;return r}var bN="storageToken",P9=yl(bN,b1);async function k9(e){var t=Kh(10),n=e.password?await e.hashFunction(JSON.stringify(e.password)):void 0,r={id:P9,context:b1,key:bN,data:{rxdbVersion:e.rxdbVersion,token:t,instanceToken:e.token,passwordHash:n},_deleted:!1,_meta:ff(),_rev:Ra(),_attachments:{}},i=[{document:r}],a=await e.internalStore.bulkWrite(i,"internal-add-storage-token");if(!a.error[0])return na("id",i,a)[0];var s=Ye(a.error[0]);if(s.isError&&Vc(s)){var u=s;if(!C9(u.documentInDb.data.rxdbVersion,e.rxdbVersion))throw ze("DM5",{args:{database:e.name,databaseStateVersion:u.documentInDb.data.rxdbVersion,codeVersion:e.rxdbVersion}});if(n&&n!==u.documentInDb.data.passwordHash)throw ze("DB1",{passwordHash:n,existingPasswordHash:u.documentInDb.data.passwordHash});var c=u.documentInDb;return Ye(c)}throw s}function C9(e,t){if(!e)return!1;var n=e.split(".")[0],r=t.split(".")[0];return n==="15"&&r==="16"?!0:n===r}async function SN(e,t,n){if(e.schema.version!==n.version)throw ze("SNH",{schema:n,version:e.schema.version,name:e.name,collection:e,args:{storageCollectionName:t}});for(var r=qv(e.name,e.schema.jsonSchema),i=yl(r,Ks);;){var a=await pf(e.database.internalStore,i),s=Mr(Ye(a)),u=s.data.connectedStorages.find(c=>c.collectionName===t&&c.schema.version===n.version);if(u)return;s.data.connectedStorages.push({collectionName:t,schema:n});try{await nf(e.database.internalStore,{previous:Ye(a),document:s},"add-connected-storage-to-collection")}catch(c){if(!Vc(c))throw c}}}async function D9(e,t,n){if(e.schema.version!==n.version)throw ze("SNH",{schema:n,version:e.schema.version,name:e.name,collection:e,args:{storageCollectionName:t}});for(var r=qv(e.name,e.schema.jsonSchema),i=yl(r,Ks);;){var a=await pf(e.database.internalStore,i),s=Mr(Ye(a)),u=s.data.connectedStorages.find(c=>c.collectionName===t&&c.schema.version===n.version);if(!u)return;s.data.connectedStorages=s.data.connectedStorages.filter(c=>c.collectionName!==t);try{await nf(e.database.internalStore,{previous:Ye(a),document:s},"remove-connected-storage-from-collection")}catch(c){if(!Vc(c))throw c}}}function qv(e,t){return e+"-"+t.version}function _m(e,t){return t=It(t),t=ZU(e,t),typeof e.jsonSchema.primaryKey!="string"&&(t=YU(e.primaryPath,e.jsonSchema,t)),t._meta=ff(),Object.prototype.hasOwnProperty.call(t,"_deleted")||(t._deleted=!1),Object.prototype.hasOwnProperty.call(t,"_attachments")||(t._attachments={}),Object.prototype.hasOwnProperty.call(t,"_rev")||(t._rev=Ra()),t}async function O9(e,t){t.multiInstance=e.multiInstance;var n=await e.storage.createStorageInstance(t);return n}async function xN(e,t,n,r,i,a,s,u){var c=await _N(t),d=c.filter(w=>w.data.name===i),h=[];d.forEach(w=>{h.push({collectionName:w.data.name,schema:w.data.schema,isCollection:!0}),w.data.connectedStorages.forEach(_=>h.push({collectionName:_.collectionName,isCollection:!1,schema:_.schema}))});var v=new Set;if(h=h.filter(w=>{var _=w.collectionName+"||"+w.schema.version;return v.has(_)?!1:(v.add(_),!0)}),await Promise.all(h.map(async w=>{var _=await e.createStorageInstance({collectionName:w.collectionName,databaseInstanceToken:n,databaseName:r,multiInstance:a,options:{},schema:w.schema,password:s,devMode:Tt.isDevMode()});await _.remove(),w.isCollection&&await vl("postRemoveRxCollection",{storage:e,databaseName:r,collectionName:i})})),u){var g=d.map(w=>{var _=ep(w);return _._deleted=!0,_._meta.lwt=ki(),_._rev=Ko(n,w),{previous:w,document:_}});await t.bulkWrite(g,"rx-database-remove-collection-all")}}function Bi(e){if(e.closed)throw ze("COL21",{collection:e.name,version:e.schema.version})}var $9=function(){function e(n){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=n,this.subs.push(this.collection.eventBulks$.pipe(Nt(r=>!r.isLocal)).subscribe(r=>{this.tasks.add(()=>this._handleChangeEvents(r.events)),this.tasks.size<=1&&Rg().then(()=>{this.processTasks()})}))}var t=e.prototype;return t.processTasks=function(){if(this.tasks.size!==0){var r=Array.from(this.tasks);r.forEach(i=>i()),this.tasks.clear()}},t._handleChangeEvents=function(r){var i=this.counter;this.counter=this.counter+r.length,r.length>this.limit?this.buffer=r.slice(r.length*-1):(ml(this.buffer,r),this.buffer=this.buffer.slice(this.limit*-1));for(var a=i+1,s=this.eventCounterMap,u=0;u<r.length;u++){var c=r[u];s.set(c,a+u)}},t.getCounter=function(){return this.processTasks(),this.counter},t.getBuffer=function(){return this.processTasks(),this.buffer},t.getArrayIndexByPointer=function(r){this.processTasks();var i=this.buffer[0],a=this.eventCounterMap.get(i);if(r<a)return null;var s=r-a;return s},t.getFrom=function(r){this.processTasks();var i=[],a=this.getArrayIndexByPointer(r);if(a===null)return null;for(;;){var s=this.buffer[a];if(a++,s)i.push(s);else return i}},t.runFrom=function(r,i){this.processTasks();var a=this.getFrom(r);if(a===null)throw new Error("out of bounds");a.forEach(s=>i(s))},t.reduceByLastOfDoc=function(r){return this.processTasks(),r.slice(0)},t.close=function(){this.tasks.clear(),this.subs.forEach(r=>r.unsubscribe())},e}();function R9(e){return new $9(e)}var N9=new WeakMap;function T9(e){var t=e.schema.getDocumentPrototype(),n=A9(e),r=jg,i={};return[t,n,r].forEach(a=>{var s=Object.getOwnPropertyNames(a);s.forEach(u=>{var c=Object.getOwnPropertyDescriptor(a,u),d=!0;(u.startsWith("_")||u.endsWith("_")||u.startsWith("$")||u.endsWith("$"))&&(d=!1),typeof c.value=="function"?Object.defineProperty(i,u,{get(){return c.value.bind(this)},enumerable:d,configurable:!1}):(c.enumerable=d,c.configurable=!1,c.writable&&(c.writable=!1),Object.defineProperty(i,u,c))})}),i}function M9(e){return Ir(N9,e,()=>cN(T9(e)))}function I9(e,t,n){var r=h6(t,e,Tt.deepFreezeWhenDevMode(n));return e._runHooksSync("post","create",n,r),ii("postCreateRxDocument",r),r}function A9(e){var t={};return Object.entries(e.methods).forEach(([n,r])=>{t[n]=r}),t}var Yv={isEqual(e,t,n){e=Sk(e),t=Sk(t);var r=ph(Qa(e),Qa(t));return r},resolve(e){return e.realMasterState}};function Sk(e){return e._attachments||(e=It(e),e._attachments={}),e}var EN=["pre","post"],PN=["insert","save","remove","create"],xk=!1,oc=new Set,kN=function(){function e(n,r,i,a,s={},u={},c={},d={},h={},v=vN,g={},w=Yv){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this.awaitBeforeReads=new Set,this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=s9(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.eventBulks$={},this.onClose=[],this.closed=!1,this.onRemove=[],this.database=n,this.name=r,this.schema=i,this.internalStorageInstance=a,this.instanceCreationOptions=s,this.migrationStrategies=u,this.methods=c,this.attachments=d,this.options=h,this.cacheReplacementPolicy=v,this.statics=g,this.conflictHandler=w,j9(this.asRxCollection),n&&(this.eventBulks$=n.eventBulks$.pipe(Nt(_=>_.collectionName===this.name))),this.database&&oc.add(this)}var t=e.prototype;return t.prepare=async function(){if(!await Q$()){for(var r=0;r<10&&oc.size>GP;)r++,await this.promiseWait(30);if(oc.size>GP)throw ze("COL23",{database:this.database.name,collection:this.name,args:{existing:Array.from(oc.values()).map(c=>({db:c.database?c.database.name:"",c:c.name}))}})}this.storageInstance=m1(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new lN(this.storageInstance,this.schema.primaryPath,(c,d)=>fN(this,c,d),c=>this._runHooks("post","save",c)),this.$=this.eventBulks$.pipe(no(c=>bR(c))),this.checkpoint$=this.eventBulks$.pipe(_n(c=>c.checkpoint)),this._changeEventBuffer=R9(this.asRxCollection);var i;this._docCache=new gN(this.schema.primaryPath,this.eventBulks$.pipe(Nt(c=>!c.isLocal),_n(c=>c.events)),c=>(i||(i=M9(this.asRxCollection)),I9(this.asRxCollection,i,c)));var a=this.database.internalStore.changeStream().pipe(Nt(c=>{var d=this.name+"-"+this.schema.version,h=c.events.find(v=>v.documentData.context==="collection"&&v.documentData.key===d&&v.operation==="DELETE");return!!h})).subscribe(async()=>{await this.close(),await Promise.all(this.onRemove.map(c=>c()))});this._subs.push(a);var s=await this.database.storageToken,u=this.storageInstance.changeStream().subscribe(c=>{var d={id:c.id,isLocal:!1,internal:!1,collectionName:this.name,storageToken:s,events:c.events,databaseToken:this.database.token,checkpoint:c.checkpoint,context:c.context};this.database.$emit(d)});return this._subs.push(u),Gi},t.cleanup=function(r){throw Bi(this),Rt("cleanup")},t.migrationNeeded=function(){throw Rt("migration-schema")},t.getMigrationState=function(){throw Rt("migration-schema")},t.startMigration=function(r=10){return Bi(this),this.getMigrationState().startMigration(r)},t.migratePromise=function(r=10){return this.getMigrationState().migratePromise(r)},t.insert=async function(r){Bi(this);var i=await this.bulkInsert([r]),a=i.error[0];Hv(this,r[this.schema.primaryPath],r,a);var s=Ye(i.success[0]);return s},t.insertIfNotExists=async function(r){var i=await this.bulkInsert([r]);if(i.error.length>0){var a=i.error[0];if(a.status===409){var s=a.documentInDb;return x_(this._docCache,[s])[0]}else throw a}return i.success[0]},t.bulkInsert=async function(r){if(Bi(this),r.length===0)return{success:[],error:[]};var i=this.schema.primaryPath,a=new Set,s;if(this.hasHooks("pre","insert"))s=await Promise.all(r.map(C=>{var x=_m(this.schema,C);return this._runHooks("pre","insert",x).then(()=>(a.add(x[i]),{document:x}))}));else{s=new Array(r.length);for(var u=this.schema,c=0;c<r.length;c++){var d=r[c],h=_m(u,d);a.add(h[i]),s[c]={document:h}}}if(a.size!==r.length)throw ze("COL22",{collection:this.name,args:{documents:r}});var v=await this.storageInstance.bulkWrite(s,"rx-collection-bulk-insert"),g,w=this,_={get success(){if(!g){var C=na(w.schema.primaryPath,s,v);g=x_(w._docCache,C)}return g},error:v.error};if(this.hasHooks("post","insert")){var E=new Map;s.forEach(C=>{var x=C.document;E.set(x[i],x)}),await Promise.all(_.success.map(C=>this._runHooks("post","insert",E.get(C.primary),C)))}return _},t.bulkRemove=async function(r){Bi(this);var i=this.schema.primaryPath;if(r.length===0)return{success:[],error:[]};var a;typeof r[0]=="string"?a=await this.findByIds(r).exec():(a=new Map,r.forEach(w=>a.set(w.primary,w)));var s=[],u=new Map;Array.from(a.values()).forEach(w=>{var _=w.toMutableJSON(!0);s.push(_),u.set(w.primary,_)}),await Promise.all(s.map(w=>{var _=w[this.schema.primaryPath];return this._runHooks("pre","remove",w,a.get(_))}));var c=s.map(w=>{var _=It(w);return _._deleted=!0,{previous:w,document:_}}),d=await this.storageInstance.bulkWrite(c,"rx-collection-bulk-remove"),h=na(this.schema.primaryPath,c,d),v=[],g=h.map(w=>{var _=w[i],E=this._docCache.getCachedRxDocument(w);return v.push(E),_});return await Promise.all(g.map(w=>this._runHooks("post","remove",u.get(w),a.get(w)))),{success:v,error:d.error}},t.bulkUpsert=async function(r){Bi(this);var i=[],a=new Map;r.forEach(d=>{var h=_m(this.schema,d),v=h[this.schema.primaryPath];if(!v)throw ze("COL3",{primaryPath:this.schema.primaryPath,data:h,schema:this.schema.jsonSchema});a.set(v,h),i.push(h)});var s=await this.bulkInsert(i),u=s.success.slice(0),c=[];return await Promise.all(s.error.map(async d=>{if(d.status!==409)c.push(d);else{var h=d.documentId,v=Xc(a,h),g=Ye(d.documentInDb),w=this._docCache.getCachedRxDocuments([g])[0],_=await w.incrementalModify(()=>v);u.push(_)}})),{error:c,success:u}},t.upsert=async function(r){Bi(this);var i=await this.bulkUpsert([r]);return Hv(this.asRxCollection,r[this.schema.primaryPath],r,i.error[0]),i.success[0]},t.incrementalUpsert=function(r){Bi(this);var i=_m(this.schema,r),a=i[this.schema.primaryPath];if(!a)throw ze("COL4",{data:r});var s=this._incrementalUpsertQueues.get(a);return s||(s=Gi),s=s.then(()=>z9(this,a,i)).then(u=>u.inserted?u.doc:L9(u.doc,i)),this._incrementalUpsertQueues.set(a,s),s},t.find=function(r){Bi(this),ii("prePrepareRxQuery",{op:"find",queryObj:r,collection:this}),r||(r=Qm());var i=dd("find",r,this);return i},t.findOne=function(r){Bi(this),ii("prePrepareRxQuery",{op:"findOne",queryObj:r,collection:this});var i;if(typeof r=="string")i=dd("findOne",{selector:{[this.schema.primaryPath]:r},limit:1},this);else{if(r||(r=Qm()),r.limit)throw ze("QU6");r=It(r),r.limit=1,i=dd("findOne",r,this)}return i},t.count=function(r){Bi(this),r||(r=Qm());var i=dd("count",r,this);return i},t.findByIds=function(r){Bi(this);var i={selector:{[this.schema.primaryPath]:{$in:r.slice(0)}}},a=dd("findByIds",i,this);return a},t.exportJSON=function(){throw Rt("json-dump")},t.importJSON=function(r){throw Rt("json-dump")},t.insertCRDT=function(r){throw Rt("crdt")},t.addPipeline=function(r){throw Rt("pipeline")},t.addHook=function(r,i,a,s=!1){if(typeof a!="function")throw Wv("COL7",{key:i,when:r});if(!EN.includes(r))throw Wv("COL8",{key:i,when:r});if(!PN.includes(i))throw ze("COL9",{key:i});if(r==="post"&&i==="create"&&s===!0)throw ze("COL10",{when:r,key:i,parallel:s});var u=a.bind(this),c=s?"parallel":"series";this.hooks[i]=this.hooks[i]||{},this.hooks[i][r]=this.hooks[i][r]||{series:[],parallel:[]},this.hooks[i][r][c].push(u)},t.getHooks=function(r,i){return!this.hooks[i]||!this.hooks[i][r]?{series:[],parallel:[]}:this.hooks[i][r]},t.hasHooks=function(r,i){if(!this.hooks[i]||!this.hooks[i][r])return!1;var a=this.getHooks(r,i);return a?a.series.length>0||a.parallel.length>0:!1},t._runHooks=function(r,i,a,s){var u=this.getHooks(r,i);if(!u)return Gi;var c=u.series.map(d=>()=>d(a,s));return WU(c).then(()=>Promise.all(u.parallel.map(d=>d(a,s))))},t._runHooksSync=function(r,i,a,s){if(this.hasHooks(r,i)){var u=this.getHooks(r,i);u&&u.series.forEach(c=>c(a,s))}},t.promiseWait=function(r){var i=new Promise(a=>{var s=setTimeout(()=>{this.timeouts.delete(s),a()},r);this.timeouts.add(s)});return i},t.close=async function(){return this.closed?to:(oc.delete(this),await Promise.all(this.onClose.map(r=>r())),this.closed=!0,Array.from(this.timeouts).forEach(r=>clearTimeout(r)),this._changeEventBuffer&&this._changeEventBuffer.close(),this.database.requestIdlePromise().then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(r=>r.unsubscribe()),delete this.database.collections[this.name],vl("postCloseRxCollection",this).then(()=>!0))))},t.remove=async function(){await this.close(),await Promise.all(this.onRemove.map(r=>r())),await xN(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.multiInstance,this.database.password,this.database.hashFunction)},ou(e,[{key:"insert$",get:function(){return this.$.pipe(Nt(n=>n.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(Nt(n=>n.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(Nt(n=>n.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}])}();function j9(e){if(!xk){xk=!0;var t=Object.getPrototypeOf(e);PN.forEach(n=>{EN.map(r=>{var i=r+K$(n);t[i]=function(a,s){return this.addHook(r,n,a,s)}})})}}function L9(e,t){return e.incrementalModify(n=>t)}function z9(e,t,n){var r=e._docCache.getLatestDocumentDataIfExists(t);return r?Promise.resolve({doc:e._docCache.getCachedRxDocuments([r])[0],inserted:!1}):e.findOne(t).exec().then(i=>i?{doc:i,inserted:!1}:e.insert(n).then(a=>({doc:a,inserted:!0})))}async function F9({database:e,name:t,schema:n,instanceCreationOptions:r={},migrationStrategies:i={},autoMigrate:a=!0,statics:s={},methods:u={},attachments:c={},options:d={},localDocuments:h=!1,cacheReplacementPolicy:v=vN,conflictHandler:g=Yv}){var w={databaseInstanceToken:e.token,databaseName:e.name,collectionName:t,schema:n.jsonSchema,options:r,multiInstance:e.multiInstance,password:e.password,devMode:Tt.isDevMode()};ii("preCreateRxStorageInstance",w);var _=await O9(e,w),E=new kN(e,t,n,_,r,i,u,c,d,v,s,g);try{await E.prepare(),Object.entries(s).forEach(([C,x])=>{Object.defineProperty(E,C,{get:()=>x.bind(E)})}),ii("createRxCollection",{collection:E,creator:{name:t,schema:n,storageInstance:_,instanceCreationOptions:r,migrationStrategies:i,methods:u,attachments:c,options:d,cacheReplacementPolicy:v,localDocuments:h,statics:s}}),a&&E.schema.version!==0&&await E.migratePromise()}catch(C){throw oc.delete(E),await _.close(),C}return E}var CN=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=t||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};CN.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,E_(this)},wrapCall:function(t){var n=this;this._qC++;var r;try{r=t()}catch(i){throw this.unlock(),i}return!r.then||typeof r.then!="function"?(this.unlock(),r):r.then(function(i){return n.unlock(),i}).catch(function(i){throw n.unlock(),i})},requestIdlePromise:function(t){var n=this;t=t||{};var r,i=new Promise(function(u){return r=u}),a=function(){q0(n,i),r()};if(i._manRes=a,t.timeout){var s=setTimeout(function(){i._manRes()},t.timeout);i._timeoutObj=s}return this._iC.add(i),E_(this),i},cancelIdlePromise:function(t){q0(this,t)},requestIdleCallback:function(t,n){var r=this._lHN++,i=this.requestIdlePromise(n);return this._hPM.set(r,i),this._pHM.set(i,r),i.then(function(){return t()}),r},cancelIdleCallback:function(t){var n=this._hPM.get(t);this.cancelIdlePromise(n)},clear:function(){var t=this;this._iC.forEach(function(n){return q0(t,n)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function B9(e){if(e._iC.size!==0){var t=e._iC.values(),n=t.next().value;n._manRes(),setTimeout(function(){return E_(e)},0)}}function q0(e,t){if(t){if(t._timeoutObj&&clearTimeout(t._timeoutObj),e._pHM.has(t)){var n=e._pHM.get(t);e._hPM.delete(n),e._pHM.delete(t)}e._iC.delete(t)}}function E_(e){e._tryIR||e._iC.size===0||(e._tryIR=!0,setTimeout(function(){if(!e.isIdle()){e._tryIR=!1;return}setTimeout(function(){if(!e.isIdle()){e._tryIR=!1;return}B9(e),e._tryIR=!1},0)},0))}class x1{constructor(t){zu(this,"ttl");zu(this,"map",new Map);zu(this,"_to",!1);this.ttl=t}has(t){return this.map.has(t)}add(t){this.map.set(t,DN()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,W9(this)},0))}clear(){this.map.clear()}}function W9(e){const t=DN()-e.ttl,n=e.map[Symbol.iterator]();for(;;){const r=n.next().value;if(!r)return;const i=r[0];if(r[1]<t)e.map.delete(i);else return}}function DN(){return Date.now()}var P_=new Set,Ek=new Map,E1=function(){function e(n,r,i,a,s,u,c=!1,d={},h,v,g,w,_,E){this.idleQueue=new CN,this.rxdbVersion=X$,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onClose=[],this.closed=!1,this.collections={},this.states={},this.eventBulks$=new br,this.closePromise=null,this.observable$=this.eventBulks$.pipe(no(C=>bR(C))),this.storageToken=to,this.storageTokenDocument=to,this.emittedEventBulkIds=new x1(60*1e3),this.name=n,this.token=r,this.storage=i,this.instanceCreationOptions=a,this.password=s,this.multiInstance=u,this.eventReduce=c,this.options=d,this.internalStore=h,this.hashFunction=v,this.cleanupPolicy=g,this.allowSlowCount=w,this.reactivity=_,this.onClosed=E,this.name!=="pseudoInstance"&&(this.internalStore=m1(this.asRxDatabase,h,S1),this.storageTokenDocument=k9(this.asRxDatabase).catch(C=>this.startupErrors.push(C)),this.storageToken=this.storageTokenDocument.then(C=>C.data.token).catch(C=>this.startupErrors.push(C)))}var t=e.prototype;return t.getReactivityFactory=function(){if(!this.reactivity)throw ze("DB14",{database:this.name});return this.reactivity},t.$emit=function(r){this.emittedEventBulkIds.has(r.id)||(this.emittedEventBulkIds.add(r.id),this.eventBulks$.next(r))},t.removeCollectionDoc=async function(r,i){var a=await pf(this.internalStore,yl(qv(r,i),Ks));if(!a)throw ze("SNH",{name:r,schema:i});var s=ep(a);s._deleted=!0,await this.internalStore.bulkWrite([{document:s,previous:a}],"rx-database-remove-collection")},t.addCollections=async function(r){var i={},a={},s=[],u={};await Promise.all(Object.entries(r).map(async([h,v])=>{var g=h,w=v.schema;i[g]=w;var _=nH(w,this.hashFunction);if(a[g]=_,this.collections[h])throw ze("DB3",{name:h});var E=qv(h,w),C={id:yl(E,Ks),key:E,context:Ks,data:{name:g,schemaHash:await _.hash,schema:_.jsonSchema,version:_.version,connectedStorages:[]},_deleted:!1,_meta:ff(),_rev:Ra(),_attachments:{}};s.push({document:C});var x=Object.assign({},v,{name:g,schema:_,database:this}),S=It(v);S.database=this,S.name=h,ii("preCreateRxCollection",S),x.conflictHandler=S.conflictHandler,u[g]=x}));var c=await this.internalStore.bulkWrite(s,"rx-database-add-collection");await Y9(this),await Promise.all(c.error.map(async h=>{if(h.status!==409)throw ze("DB12",{database:this.name,writeError:h});var v=Ye(h.documentInDb),g=v.data.name,w=a[g];if(v.data.schemaHash!==await w.hash)throw ze("DB6",{database:this.name,collection:g,previousSchemaHash:v.data.schemaHash,schemaHash:await w.hash,previousSchema:v.data.schema,schema:Ye(i[g])})}));var d={};return await Promise.all(Object.keys(r).map(async h=>{var v=u[h],g=await F9(v);d[h]=g,this.collections[h]=g,this[h]||Object.defineProperty(this,h,{get:()=>this.collections[h]})})),d},t.lockedRun=function(r){return this.idleQueue.wrapCall(r)},t.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},t.exportJSON=function(r){throw Rt("json-dump")},t.addState=function(r){throw Rt("state")},t.importJSON=function(r){throw Rt("json-dump")},t.backup=function(r){throw Rt("backup")},t.leaderElector=function(){throw Rt("leader-election")},t.isLeader=function(){throw Rt("leader-election")},t.waitForLeadership=function(){throw Rt("leader-election")},t.migrationStates=function(){throw Rt("migration-schema")},t.close=function(){if(this.closePromise)return this.closePromise;var{promise:r,resolve:i}=ON(),a=s=>{this.onClosed&&this.onClosed(),this.closed=!0,i(s)};return this.closePromise=r,(async()=>{if(await vl("preCloseRxDatabase",this),this.eventBulks$.complete(),this._subs.map(s=>s.unsubscribe()),this.name==="pseudoInstance"){a(!1);return}return this.requestIdlePromise().then(()=>Promise.all(this.onClose.map(s=>s()))).then(()=>Promise.all(Object.keys(this.collections).map(s=>this.collections[s]).map(s=>s.close()))).then(()=>this.internalStore.close()).then(()=>a(!0))})(),r},t.remove=function(){return this.close().then(()=>K9(this.name,this.storage,this.multiInstance,this.password))},ou(e,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])}();function U9(e,t){if(P_.has($N(e,t)))throw ze("DB8",{name:e,storage:t.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}function ON(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}function $N(e,t){return t.name+"|"+e}async function RN(e,t,n,r,i,a){var s=await t.createStorageInstance({databaseInstanceToken:e,databaseName:n,collectionName:i6,schema:S1,options:r,multiInstance:i,password:a,devMode:Tt.isDevMode()});return s}function H9({storage:e,instanceCreationOptions:t,name:n,password:r,multiInstance:i=!0,eventReduce:a=!0,ignoreDuplicate:s=!1,options:u={},cleanupPolicy:c,closeDuplicates:d=!1,allowSlowCount:h=!1,localDocuments:v=!1,hashFunction:g=U$,reactivity:w}){ii("preCreateRxDatabase",{storage:e,instanceCreationOptions:t,name:n,password:r,multiInstance:i,eventReduce:a,ignoreDuplicate:s,options:u,localDocuments:v});var _=$N(n,e),E=Ek.get(_)||new Set,C=ON(),x=Array.from(E),S=()=>{E.delete(C.promise),P_.delete(_)};return E.add(C.promise),Ek.set(_,E),(async()=>{if(d&&await Promise.all(x.map(U=>U.catch(()=>null).then(W=>W&&W.close()))),s){if(!Tt.isDevMode())throw ze("DB9",{database:n})}else U9(n,e);P_.add(_);var P=Kh(10),M=await RN(P,e,n,t,i,r),T=new E1(n,P,e,t,r,i,a,u,M,g,c,h,w,S);return await vl("createRxDatabase",{database:T,creator:{storage:e,instanceCreationOptions:t,name:n,password:r,multiInstance:i,eventReduce:a,ignoreDuplicate:s,options:u,localDocuments:v}}),T})().then(P=>{C.resolve(P)}).catch(P=>{C.reject(P),S()}),C.promise}async function K9(e,t,n=!0,r){var i=Kh(10),a=await RN(i,t,e,{},n,r),s=await _N(a),u=new Set;s.forEach(d=>u.add(d.data.name));var c=Array.from(u);return await Promise.all(c.map(d=>xN(t,a,i,e,d,n,r))),await vl("postRemoveRxDatabase",{databaseName:e,storage:t}),await a.remove(),c}function q9(e){return e instanceof E1}async function Y9(e){if(await e.storageToken,e.startupErrors[0])throw e.startupErrors[0]}var V9={RxSchema:J$.prototype,RxDocument:jg,RxQuery:yN.prototype,RxCollection:kN.prototype,RxDatabase:E1.prototype},Y0=new Set,Pk=new Set;function Lg(e){if(ii("preAddRxPlugin",{plugin:e,plugins:Y0}),!Y0.has(e)){{if(Pk.has(e.name))throw ze("PL3",{name:e.name,plugin:e});Y0.add(e),Pk.add(e.name)}if(!e.rxdb)throw Wv("PL1",{plugin:e});e.init&&e.init(),e.prototypes&&Object.entries(e.prototypes).forEach(([t,n])=>n(V9[t])),e.overwritable&&Object.assign(Tt,e.overwritable),e.hooks&&Object.entries(e.hooks).forEach(([t,n])=>{n.after&&mh[t].push(n.after),n.before&&mh[t].unshift(n.before)})}}async function Vv(e,t){var n=su(e.input.metaInstance.schema,{isCheckpoint:"1",itemId:t}),r=await e.input.metaInstance.findDocumentsById([n],!1),i=r[0];if(e.lastCheckpointDoc[t]=i,i)return i.checkpointData}async function Xv(e,t,n){e.checkpointQueue=e.checkpointQueue.then(async()=>{var r=e.lastCheckpointDoc[t];if(n&&!e.events.canceled.getValue()&&(!r||JSON.stringify(r.checkpointData)!==JSON.stringify(n))){var i={id:"",isCheckpoint:"1",itemId:t,_deleted:!1,_attachments:{},checkpointData:n,_meta:ff(),_rev:Ra()};for(i.id=su(e.input.metaInstance.schema,i);!e.events.canceled.getValue();){if(r&&(i.checkpointData=Eh([r.checkpointData,i.checkpointData])),i._meta.lwt=ki(),i._rev=Ko(await e.checkpointKey,r),e.events.canceled.getValue())return;var a=[{previous:r,document:i}],s=await e.input.metaInstance.bulkWrite(a,"replication-set-checkpoint"),u=na(e.primaryPath,a,s)[0];if(u){e.lastCheckpointDoc[t]=u;return}else{var c=s.error[0];if(c.status!==409)throw c;r=Ye(c.documentInDb),i._rev=Ko(await e.checkpointKey,r)}}}}),await e.checkpointQueue}async function X9(e){var t=await e.hashFunction([e.identifier,e.forkInstance.databaseName,e.forkInstance.collectionName].join("||"));return"rx_storage_replication_"+t}function kk(e,t,n,r,i){var a=Object.assign({},r,{_attachments:t&&r._attachments?r._attachments:{},_meta:n?r._meta:Object.assign({},i?i._meta:{},{lwt:ki()}),_rev:n?r._rev:Ra()});return a._rev||(a._rev=Ko(e,i)),a}function xs(e,t,n){var r=It(e);return t||delete r._attachments,n||(delete r._meta,delete r._rev),r}function k_(e,t){return e.hasAttachments?t.map(n=>{var r=Mr(n.document);return r.docData=Qa(r.docData),{document:r,previous:n.previous}}):t}function C_(e){for(;;)if(e.underlyingPersistentStorage)e=e.underlyingPersistentStorage;else return e}var Jm="RxReplicationProtocolMetaData";function D_(e,t){var n=VU(e),r={title:Jm,primaryKey:{key:"id",fields:["itemId","isCheckpoint"],separator:"|"},type:"object",version:e.version,additionalProperties:!1,properties:{id:{type:"string",minLength:1,maxLength:n+2},isCheckpoint:{type:"string",enum:["0","1"],minLength:1,maxLength:1},itemId:{type:"string",maxLength:n>4?n:4},checkpointData:{type:"object",additionalProperties:!0},docData:{type:"object",properties:e.properties},isResolvedConflict:{type:"string"}},keyCompression:e.keyCompression,required:["id","isCheckpoint","itemId"]};t&&(r.encrypted=["docData"]);var i=Ng(r);return i}function NN(e,t){return e.input.metaInstance.findDocumentsById(t.map(n=>{var r=su(e.input.metaInstance.schema,{itemId:n,isCheckpoint:"0"});return r}),!0).then(n=>{var r={};return Object.values(n).forEach(i=>{r[i.itemId]={docData:i.docData,metaDocument:i}}),r})}async function Qv(e,t,n,r){var i=t[e.primaryPath],a=n?ep(n):{id:"",isCheckpoint:"0",itemId:i,docData:t,_attachments:{},_deleted:!1,_rev:Ra(),_meta:{lwt:0}};a.docData=t,r&&(a.isResolvedConflict=r),a._meta.lwt=ki(),a.id=su(e.input.metaInstance.schema,a),a._rev=Ko(await e.checkpointKey,n);var s={previous:n,document:a};return s}async function Q9(e){if(e.input.initialCheckpoint&&e.input.initialCheckpoint.downstream){var t=await Vv(e,"down");t||await Xv(e,"down",e.input.initialCheckpoint.downstream)}var n=await e.input.hashFunction(e.input.identifier),r=e.input.replicationHandler,i=0,a=[];function s(_){e.stats.down.addNewTask=e.stats.down.addNewTask+1;var E={time:i++,task:_};a.push(E),e.streamQueue.down=e.streamQueue.down.then(()=>{for(var C=[];a.length>0;){e.events.active.down.next(!0);var x=Ye(a.shift());if(!(x.time<c)){if(x.task==="RESYNC")if(C.length===0){C.push(x.task);break}else break;C.push(x.task)}}if(C.length!==0)return C[0]==="RESYNC"?d():h(C)}).then(()=>{e.events.active.down.next(!1),!e.firstSyncDone.down.getValue()&&!e.events.canceled.getValue()&&e.firstSyncDone.down.next(!0)})}if(s("RESYNC"),!e.events.canceled.getValue()){var u=r.masterChangeStream$.pipe(no(async _=>(await sl(e.events.active.up.pipe(Nt(E=>!E))),_))).subscribe(_=>{e.stats.down.masterChangeStreamEmit=e.stats.down.masterChangeStreamEmit+1,s(_)});sl(e.events.canceled.pipe(Nt(_=>!!_))).then(()=>u.unsubscribe())}var c=-1;async function d(){if(e.stats.down.downstreamResyncOnce=e.stats.down.downstreamResyncOnce+1,!e.events.canceled.getValue()){e.checkpointQueue=e.checkpointQueue.then(()=>Vv(e,"down"));for(var _=await e.checkpointQueue,E=[];!e.events.canceled.getValue();){c=i++;var C=await r.masterChangesSince(_,e.input.pullBatchSize);if(C.documents.length===0||(_=Eh([_,C.checkpoint]),E.push(w(C.documents,_)),C.documents.length<e.input.pullBatchSize))break}await Promise.all(E)}}function h(_){e.stats.down.downstreamProcessChanges=e.stats.down.downstreamProcessChanges+1;var E=[],C=null;return _.forEach(x=>{if(x==="RESYNC")throw new Error("SNH");ml(E,x.documents),C=Eh([C,x.checkpoint])}),w(E,Ye(C))}var v=Gi,g={docs:{}};function w(_,E){var C=e.primaryPath;return e.stats.down.persistFromMaster=e.stats.down.persistFromMaster+1,_.forEach(x=>{var S=x[C];g.docs[S]=x}),g.checkpoint=E,v=v.then(()=>{var x=g.docs;g.docs={};var S=g.checkpoint,P=Object.keys(x);if(e.events.canceled.getValue()||P.length===0)return Gi;var M=[],T={},U={},W=[];return Promise.all([e.input.forkInstance.findDocumentsById(P,!0),NN(e,P)]).then(([re,he])=>{var de=new Map;return re.forEach(ce=>de.set(ce[C],ce)),Promise.all(P.map(async ce=>{var pe=de.get(ce),xe=pe?xs(pe,e.hasAttachments,!1):void 0,Ce=x[ce],Le=he[ce];Le&&pe&&Le.metaDocument.isResolvedConflict===pe._rev&&await e.streamQueue.up;var qe=!Le||!xe?!1:e.input.conflictHandler.isEqual(Le.docData,xe,"downstream-check-if-equal-0");if(!qe&&Le&&Le.docData._rev&&pe&&pe._meta[e.input.identifier]&&Js(pe._rev)===pe._meta[e.input.identifier]&&(qe=!0),pe&&Le&&qe===!1||pe&&!Le)return Gi;var We=xe?e.input.conflictHandler.isEqual(Ce,xe,"downstream-check-if-equal-1"):!1;if(xe&&We)return(!Le||qe===!1)&&W.push(await Qv(e,xe,Le?Le.metaDocument:void 0)),Gi;var oe=Object.assign({},Ce,pe?{_meta:It(pe._meta),_attachments:e.hasAttachments&&Ce._attachments?Ce._attachments:{},_rev:Ra()}:{_meta:{lwt:ki()},_rev:Ra(),_attachments:e.hasAttachments&&Ce._attachments?Ce._attachments:{}});if(Ce._rev){var _e=pe?Js(pe._rev)+1:1;oe._meta[e.input.identifier]=_e,e.input.keepMeta&&(oe._rev=Ce._rev)}e.input.keepMeta&&Ce._meta&&(oe._meta=Ce._meta);var G={previous:pe,document:oe};G.document._rev=G.document._rev?G.document._rev:Ko(n,G.previous),M.push(G),T[ce]=G,U[ce]=await Qv(e,Ce,Le?Le.metaDocument:void 0)}))}).then(async()=>{if(M.length>0)return e.input.forkInstance.bulkWrite(M,await e.downstreamBulkWriteFlag).then(re=>{var he=na(e.primaryPath,M,re);he.forEach(ce=>{var pe=ce[C];e.events.processed.down.next(T[pe]),W.push(U[pe])});var de;if(re.error.forEach(ce=>{if(ce.status!==409){var pe=ze("RC_PULL",{writeError:ce});e.events.error.next(pe),de=pe}}),de)throw de})}).then(()=>{if(W.length>0)return e.input.metaInstance.bulkWrite(k_(e,W),"replication-down-write-meta").then(re=>{re.error.forEach(he=>{e.events.error.next(ze("RC_PULL",{id:he.documentId,writeError:he}))})})}).then(()=>{Xv(e,"down",S)})}).catch(x=>e.events.error.next(x)),v}}async function G9(e,t,n){var r=e.input.conflictHandler,i=r.isEqual(t.realMasterState,t.newDocumentState,"replication-resolve-conflict");if(!i){var a=await r.resolve(t,"replication-resolve-conflict"),s=Object.assign({},a,{_meta:It(n._meta),_rev:Ra(),_attachments:It(n._attachments)});return s._meta.lwt=ki(),s._rev=Ko(await e.checkpointKey,n),s}}async function O_(e,t,n,r){if(!n._attachments||r&&!r._attachments)throw new Error("_attachments missing");var i=n[e],a=new Set(r&&r._attachments?Object.keys(r._attachments):[]);return await Promise.all(Object.entries(n._attachments).map(async([s,u])=>{if((!a.has(s)||r&&Ye(r._attachments)[s].digest!==u.digest)&&!u.data){var c=await t.getAttachmentData(i,s,u.digest);u.data=c}})),n}async function J9(e){if(e.input.initialCheckpoint&&e.input.initialCheckpoint.upstream){var t=await Vv(e,"up");t||await Xv(e,"up",e.input.initialCheckpoint.upstream)}var n=e.input.replicationHandler;e.streamQueue.up=e.streamQueue.up.then(()=>h().then(()=>v()));var r=0,i=-1,a=[],s=to,u={docs:{}},c=e.input.forkInstance.changeStream().subscribe(w=>{if(!e.events.paused.getValue())return e.stats.up.forkChangeStreamEmit=e.stats.up.forkChangeStreamEmit+1,a.push({task:w,time:r++}),e.events.active.up.getValue()||e.events.active.up.next(!0),e.input.waitBeforePersist?e.input.waitBeforePersist().then(()=>v()):v()}),d=n.masterChangeStream$.pipe(Nt(w=>w==="RESYNC")).subscribe(()=>{a.push({task:"RESYNC",time:r++}),v()});sl(e.events.canceled.pipe(Nt(w=>!!w))).then(()=>{c.unsubscribe(),d.unsubscribe()});async function h(){if(e.stats.up.upstreamInitialSync=e.stats.up.upstreamInitialSync+1,!e.events.canceled.getValue()){e.checkpointQueue=e.checkpointQueue.then(()=>Vv(e,"up"));for(var w=await e.checkpointQueue,_=new Set,E=async function(){i=r++,_.size>3&&await Promise.race(Array.from(_));var S=await sN(e.input.forkInstance,e.input.pushBatchSize,w);if(S.documents.length===0)return 1;w=Eh([w,S.checkpoint]);var P=g(S.documents,Ye(w));_.add(P),P.catch().then(()=>_.delete(P))};!e.events.canceled.getValue()&&!await E(););var C=await Promise.all(_),x=C.find(S=>!!S);x?await h():!e.firstSyncDone.up.getValue()&&!e.events.canceled.getValue()&&e.firstSyncDone.up.next(!0)}}function v(){if(e.events.canceled.getValue()||a.length===0){e.events.active.up.next(!1);return}e.stats.up.processTasks=e.stats.up.processTasks+1,e.events.active.up.next(!0),e.streamQueue.up=e.streamQueue.up.then(async()=>{for(var w=[],_;a.length>0;){var E=Ye(a.shift());if(!(E.time<i)){if(E.task==="RESYNC"){e.events.active.up.next(!1),await h();return}E.task.context!==await e.downstreamBulkWriteFlag&&ml(w,E.task.events.map(C=>C.documentData)),_=Eh([_,E.task.checkpoint])}}if(await g(w,_),a.length===0)e.events.active.up.next(!1);else return v()})}function g(w,_){return e.stats.up.persistToMaster=e.stats.up.persistToMaster+1,w.forEach(E=>{var C=E[e.primaryPath];u.docs[C]=E}),u.checkpoint=_,s=s.then(async()=>{if(e.events.canceled.getValue())return!1;var E=u.docs;u.docs={};var C=u.checkpoint,x=Object.keys(E);function S(){return Xv(e,"up",C)}if(x.length===0)return S(),!1;var P=await NN(e,x),M={},T=[],U={},W={};if(await Promise.all(x.map(async G=>{var F=E[G];W[G]=F;var ee=xs(F,e.hasAttachments,!!e.input.keepMeta),X=P[G];X&&X.metaDocument.isResolvedConflict!==F._rev&&e.input.conflictHandler.isEqual(X.docData,ee,"upstream-check-if-equal")||X&&X.docData._rev&&Js(F._rev)===F._meta[e.input.identifier]||(T.push(G),M[G]={assumedMasterState:X?X.docData:void 0,newDocumentState:ee},U[G]=await Qv(e,ee,X?X.metaDocument:void 0))})),T.length===0)return S(),!1;var re=Object.values(M),he=new Set,de={},ce=xU(re,e.input.pushBatchSize);await Promise.all(ce.map(async G=>{e.hasAttachments&&await Promise.all(G.map(async ee=>{ee.newDocumentState=await O_(e.primaryPath,e.input.forkInstance,Mr(ee.newDocumentState),ee.assumedMasterState)}));var F=await n.masterWrite(G);F.forEach(ee=>{var X=ee[e.primaryPath];he.add(X),de[X]=ee})}));var pe=[];if(T.forEach(G=>{he.has(G)||(e.events.processed.up.next(M[G]),pe.push(U[G]))}),e.events.canceled.getValue())return!1;pe.length>0&&await e.input.metaInstance.bulkWrite(k_(e,pe),"replication-up-write-meta");var xe=!1;if(he.size>0){e.stats.up.persistToMasterHadConflicts=e.stats.up.persistToMasterHadConflicts+1;var Ce=[],Le={};if(await Promise.all(Object.entries(de).map(([G,F])=>{var ee=M[G],X={newDocumentState:ee.newDocumentState,assumedMasterState:ee.assumedMasterState,realMasterState:F};return G9(e,X,W[G]).then(async I=>{if(I){e.events.resolvedConflicts.next({input:X,output:I}),Ce.push({previous:W[G],document:I});var H=P[G];Le[G]=await Qv(e,Ye(F),H?H.metaDocument:void 0,I._rev)}})})),Ce.length>0){xe=!0,e.stats.up.persistToMasterConflictWrites=e.stats.up.persistToMasterConflictWrites+1;var qe=await e.input.forkInstance.bulkWrite(Ce,"replication-up-write-conflict"),We;if(qe.error.forEach(G=>{if(G.status!==409){var F=ze("RC_PUSH",{writeError:G});e.events.error.next(F),We=F}}),We)throw We;var oe=[],_e=na(e.primaryPath,Ce,qe);_e.forEach(G=>{var F=G[e.primaryPath];oe.push(Le[F])}),oe.length>0&&await e.input.metaInstance.bulkWrite(k_(e,oe),"replication-up-write-conflict-meta")}}return S(),xe}).catch(E=>(e.events.error.next(E),!1)),s}}function TN(e){e=It(e),e.forkInstance=C_(e.forkInstance),e.metaInstance=C_(e.metaInstance);var t=X9(e),n={primaryPath:ai(e.forkInstance.schema.primaryKey),hasAttachments:!!e.forkInstance.schema.attachments,input:e,checkpointKey:t,downstreamBulkWriteFlag:t.then(r=>"replication-downstream-"+r),events:{canceled:new qa(!1),paused:new qa(!1),active:{down:new qa(!0),up:new qa(!0)},processed:{down:new br,up:new br},resolvedConflicts:new br,error:new br},stats:{down:{addNewTask:0,downstreamProcessChanges:0,downstreamResyncOnce:0,masterChangeStreamEmit:0,persistFromMaster:0},up:{forkChangeStreamEmit:0,persistToMaster:0,persistToMasterConflictWrites:0,persistToMasterHadConflicts:0,processTasks:0,upstreamInitialSync:0}},firstSyncDone:{down:new qa(!1),up:new qa(!1)},streamQueue:{down:Gi,up:Gi},checkpointQueue:Gi,lastCheckpointDoc:{}};return Q9(n),J9(n),n}function Zm(e){return sl(wR([e.firstSyncDone.down.pipe(Nt(t=>!!t)),e.firstSyncDone.up.pipe(Nt(t=>!!t))])).then(()=>{})}function $_(e){return Promise.all([e.streamQueue.up,e.streamQueue.down,e.checkpointQueue])}function Z9(e,t,n,r=!1){e=C_(e);var i=!!e.schema.attachments,a=ai(e.schema.primaryKey),s={masterChangeStream$:e.changeStream().pipe(no(async u=>{var c={checkpoint:u.checkpoint,documents:await Promise.all(u.events.map(async d=>{var h=xs(d.documentData,i,r);return i&&(h=await O_(a,e,Mr(h),void 0)),h}))};return c})),masterChangesSince(u,c){return sN(e,c,u).then(async d=>({checkpoint:d.documents.length>0?d.checkpoint:u,documents:await Promise.all(d.documents.map(async h=>{var v=xs(h,i,r);return i&&(v=await O_(a,e,Mr(v),void 0)),v}))}))},async masterWrite(u){var c={};u.forEach(E=>{var C=E.newDocumentState[a];c[C]=E});var d=Object.keys(c),h=await e.findDocumentsById(d,!0),v=new Map;h.forEach(E=>v.set(E[a],E));var g=[],w=[];if(await Promise.all(Object.entries(c).map(([E,C])=>{var x=v.get(E);x?x&&!C.assumedMasterState?g.push(xs(x,i,r)):t.isEqual(xs(x,i,r),Ye(C.assumedMasterState),"rxStorageInstanceToReplicationHandler-masterWrite")===!0?w.push({previous:x,document:kk(n,i,r,C.newDocumentState,x)}):g.push(xs(x,i,r)):w.push({document:kk(n,i,r,C.newDocumentState)})})),w.length>0){var _=await e.bulkWrite(w,"replication-master-write");_.error.forEach(E=>{if(E.status!==409)throw ze("SNH",{name:"non conflict error",error:E});g.push(xs(Ye(E.documentInDb),i,r))})}return g}};return s}async function MN(e){e.events.canceled.next(!0),e.events.active.up.complete(),e.events.active.down.complete(),e.events.processed.up.complete(),e.events.processed.down.complete(),e.events.resolvedConflicts.complete(),e.events.canceled.complete(),await e.checkpointQueue}function eq(e){return e&&typeof e.then=="function"}Promise.resolve(!1);var tq=Promise.resolve(!0),jo=Promise.resolve();function el(e,t){return e||(e=0),new Promise(function(n){return setTimeout(function(){return n(t)},e)})}function nq(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function tp(){return Math.random().toString(36).substring(2)}var V0=0;function np(){var e=Date.now()*1e3;return e<=V0&&(e=V0+1),V0=e,e}function rq(){return typeof navigator<"u"&&typeof navigator.locks<"u"&&typeof navigator.locks.request=="function"}var iq=np,aq="native";function oq(e){var t={time:np(),messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(n){t.messagesCallback&&t.messagesCallback(n.data)},t}function sq(e){e.bc.close(),e.subFns=[]}function uq(e,t){try{return e.bc.postMessage(t,!1),jo}catch(n){return Promise.reject(n)}}function lq(e,t){e.messagesCallback=t}function cq(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function fq(){return 150}var dq={create:oq,close:sq,onMessage:lq,postMessage:uq,canBeUsed:cq,type:aq,averageResponseTime:fq,microSeconds:iq};function P1(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return typeof t.webWorkerSupport>"u"&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=1e3*45),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&typeof e.idb.onclose=="function"&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=1e3*60),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=1e3*60*2),t.node.maxParallelWrites||(t.node.maxParallelWrites=2048),typeof t.node.useFastPath>"u"&&(t.node.useFastPath=!0),t}var hq=np,pq="pubkey.broadcast-channel-0-",Yo="messages",zg={durability:"relaxed"},mq="idb";function IN(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function k1(e){e.commit&&e.commit()}function vq(e){var t=IN(),n=pq+e,r=t.open(n);return r.onupgradeneeded=function(i){var a=i.target.result;a.createObjectStore(Yo,{keyPath:"id",autoIncrement:!0})},new Promise(function(i,a){r.onerror=function(s){return a(s)},r.onsuccess=function(){i(r.result)}})}function gq(e,t,n){var r=Date.now(),i={uuid:t,time:r,data:n},a=e.transaction([Yo],"readwrite",zg);return new Promise(function(s,u){a.oncomplete=function(){return s()},a.onerror=function(d){return u(d)};var c=a.objectStore(Yo);c.add(i),k1(a)})}function yq(e,t){var n=e.transaction(Yo,"readonly",zg),r=n.objectStore(Yo),i=[],a=IDBKeyRange.bound(t+1,1/0);if(r.getAll){var s=r.getAll(a);return new Promise(function(c,d){s.onerror=function(h){return d(h)},s.onsuccess=function(h){c(h.target.result)}})}function u(){try{return a=IDBKeyRange.bound(t+1,1/0),r.openCursor(a)}catch{return r.openCursor()}}return new Promise(function(c,d){var h=u();h.onerror=function(v){return d(v)},h.onsuccess=function(v){var g=v.target.result;g?g.value.id<t+1?g.continue(t+1):(i.push(g.value),g.continue()):(k1(n),c(i))}})}function wq(e,t){if(e.closed)return Promise.resolve([]);var n=e.db.transaction(Yo,"readwrite",zg),r=n.objectStore(Yo);return Promise.all(t.map(function(i){var a=r.delete(i);return new Promise(function(s){a.onsuccess=function(){return s()}})}))}function _q(e,t){var n=Date.now()-t,r=e.transaction(Yo,"readonly",zg),i=r.objectStore(Yo),a=[];return new Promise(function(s){i.openCursor().onsuccess=function(u){var c=u.target.result;if(c){var d=c.value;d.time<n?(a.push(d),c.continue()):(k1(r),s(a))}else s(a)}})}function bq(e){return _q(e.db,e.options.idb.ttl).then(function(t){return wq(e,t.map(function(n){return n.id}))})}function Sq(e,t){return t=P1(t),vq(e).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:tp(),eMIs:new x1(t.idb.ttl*2),writeBlockPromise:jo,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},AN(r),r})}function AN(e){e.closed||jN(e).then(function(){return el(e.options.idb.fallbackInterval)}).then(function(){return AN(e)})}function xq(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}function jN(e){return e.closed||!e.messagesCallback?jo:yq(e.db,e.lastCursorId).then(function(t){var n=t.filter(function(r){return!!r}).map(function(r){return r.id>e.lastCursorId&&(e.lastCursorId=r.id),r}).filter(function(r){return xq(r,e)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){e.messagesCallback&&(e.eMIs.add(r.id),e.messagesCallback(r.data))}),jo})}function Eq(e){e.closed=!0,e.db.close()}function Pq(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return gq(e.db,e.uuid,t)}).then(function(){nq(0,10)===0&&bq(e)}),e.writeBlockPromise}function kq(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,jN(e)}function Cq(){return!!IN()}function Dq(e){return e.idb.fallbackInterval*2}var Oq={create:Sq,close:Eq,onMessage:kq,postMessage:Pq,canBeUsed:Cq,type:mq,averageResponseTime:Dq,microSeconds:hq},$q=np,Rq="pubkey.broadcastChannel-",Nq="localstorage";function LN(){var e;if(typeof window>"u")return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function zN(e){return Rq+e}function Tq(e,t){return new Promise(function(n){el().then(function(){var r=zN(e.channelName),i={token:tp(),time:Date.now(),data:t,uuid:e.uuid},a=JSON.stringify(i);LN().setItem(r,a);var s=document.createEvent("Event");s.initEvent("storage",!0,!0),s.key=r,s.newValue=a,window.dispatchEvent(s),n()})})}function Mq(e,t){var n=zN(e),r=function(a){a.key===n&&t(JSON.parse(a.newValue))};return window.addEventListener("storage",r),r}function Iq(e){window.removeEventListener("storage",e)}function Aq(e,t){if(t=P1(t),!FN())throw new Error("BroadcastChannel: localstorage cannot be used");var n=tp(),r=new x1(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=Mq(e,function(a){i.messagesCallback&&a.uuid!==n&&(!a.token||r.has(a.token)||a.data.time&&a.data.time<i.messagesCallbackTime||(r.add(a.token),i.messagesCallback(a.data)))}),i}function jq(e){Iq(e.listener)}function Lq(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function FN(){var e=LN();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}function zq(){var e=120,t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?e*2:e}var Fq={create:Aq,close:jq,onMessage:Lq,postMessage:Tq,canBeUsed:FN,type:Nq,averageResponseTime:zq,microSeconds:$q},BN=np,Bq="simulate",C1=new Set;function Wq(e){var t={time:BN(),name:e,messagesCallback:null};return C1.add(t),t}function Uq(e){C1.delete(e)}var WN=5;function Hq(e,t){return new Promise(function(n){return setTimeout(function(){var r=Array.from(C1);r.forEach(function(i){i.name===e.name&&i!==e&&i.messagesCallback&&i.time<t.time&&i.messagesCallback(t)}),n()},WN)})}function Kq(e,t){e.messagesCallback=t}function qq(){return!0}function Yq(){return WN}var Vq={create:Wq,close:Uq,onMessage:Kq,postMessage:Hq,canBeUsed:qq,type:Bq,averageResponseTime:Yq,microSeconds:BN},Ck=[dq,Oq,Fq];function Xq(e){var t=[].concat(e.methods,Ck).filter(Boolean);if(e.type){if(e.type==="simulate")return Vq;var n=t.find(function(i){return i.type===e.type});if(n)return n;throw new Error("method-type "+e.type+" not found")}e.webWorkerSupport||(t=t.filter(function(i){return i.type!=="idb"}));var r=t.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No usable method found in "+JSON.stringify(Ck.map(function(i){return i.type})))}var UN=new Set,Qq=0,Fg=function(t,n){this.id=Qq++,UN.add(this),this.name=t,Dk&&(n=Dk),this.options=P1(n),this.method=Xq(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,Gq(this)};Fg._pubkey=!0;var Dk;Fg.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(t));return Ok(this,"message",t)},postInternal:function(t){return Ok(this,"internal",t)},set onmessage(e){var t=this.method.microSeconds(),n={time:t,fn:e};Rk(this,"message",this._onML),e&&typeof e=="function"?(this._onML=n,$k(this,"message",n)):this._onML=null},addEventListener:function(t,n){var r=this.method.microSeconds(),i={time:r,fn:n};$k(this,t,i)},removeEventListener:function(t,n){var r=this._addEL[t].find(function(i){return i.fn===n});Rk(this,t,r)},close:function(){var t=this;if(!this.closed){UN.delete(this),this.closed=!0;var n=this._prepP?this._prepP:jo;return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(r){return r()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function Ok(e,t,n){var r=e.method.microSeconds(),i={time:r,type:t,data:n},a=e._prepP?e._prepP:jo;return a.then(function(){var s=e.method.postMessage(e._state,i);return e._uMP.add(s),s.catch().then(function(){return e._uMP.delete(s)}),s})}function Gq(e){var t=e.method.create(e.name,e.options);eq(t)?(e._prepP=t,t.then(function(n){e._state=n})):e._state=t}function HN(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function $k(e,t,n){e._addEL[t].push(n),Jq(e)}function Rk(e,t,n){e._addEL[t]=e._addEL[t].filter(function(r){return r!==n}),Zq(e)}function Jq(e){if(!e._iL&&HN(e)){var t=function(i){e._addEL[i.type].forEach(function(a){i.time>=a.time&&a.fn(i.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}function Zq(e){if(e._iL&&!HN(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}function e8(e){if(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope){var t=self.close.bind(self);self.close=function(){return e(),t()}}else{if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){e()},!0),window.addEventListener("unload",function(){e()},!0)}}function t8(e){process.on("exit",function(){return e()}),process.on("beforeExit",function(){return e().then(function(){return process.exit()})}),process.on("SIGINT",function(){return e().then(function(){return process.exit()})}),process.on("uncaughtException",function(t){return e().then(function(){console.trace(t),process.exit(101)})})}var n8=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",r8=n8?t8:e8,Ad=new Set,Nk=!1;function i8(){Nk||(Nk=!0,r8(o8))}function a8(e){if(i8(),typeof e!="function")throw new Error("Listener is no function");Ad.add(e);var t={remove:function(){return Ad.delete(e)},run:function(){return Ad.delete(e),e()}};return t}function o8(){var e=[];return Ad.forEach(function(t){e.push(t()),Ad.delete(t)}),Promise.all(e)}function ul(e,t){var n={context:"leader",action:t,token:e.token};return e.broadcastChannel.postInternal(n)}function KN(e){e.isLeader=!0,e._hasLeader=!0;var t=a8(function(){return e.die()});e._unl.push(t);var n=function(i){i.context==="leader"&&i.action==="apply"&&ul(e,"tell"),i.context==="leader"&&i.action==="tell"&&!e._dpLC&&(e._dpLC=!0,e._dpL(),ul(e,"tell"))};return e.broadcastChannel.addEventListener("internal",n),e._lstns.push(n),ul(e,"tell")}var qN=function(t,n){var r=this;this.broadcastChannel=t,t._befC.push(function(){return r.die()}),this._options=n,this.isLeader=!1,this.isDead=!1,this.token=tp(),this._lstns=[],this._unl=[],this._dpL=function(){},this._dpLC=!1,this._wKMC={},this.lN="pubkey-bc||"+t.method.type+"||"+t.name};qN.prototype={hasLeader:function(){var t=this;return navigator.locks.query().then(function(n){var r=n.held?n.held.filter(function(i){return i.name===t.lN}):[];return!!(r&&r.length>0)})},awaitLeadership:function(){var t=this;if(!this._wLMP){this._wKMC.c=new AbortController;var n=new Promise(function(r,i){t._wKMC.res=r,t._wKMC.rej=i});this._wLMP=new Promise(function(r){navigator.locks.request(t.lN,{signal:t._wKMC.c.signal},function(){return t._wKMC.c=void 0,KN(t),r(),n}).catch(function(){})})}return this._wLMP},set onduplicate(e){},die:function(){var t=this;return this._lstns.forEach(function(n){return t.broadcastChannel.removeEventListener("internal",n)}),this._lstns=[],this._unl.forEach(function(n){return n.remove()}),this._unl=[],this.isLeader&&(this.isLeader=!1),this.isDead=!0,this._wKMC.res&&this._wKMC.res(),this._wKMC.c&&this._wKMC.c.abort("LeaderElectionWebLock.die() called"),ul(this,"death")}};var YN=function(t,n){var r=this;this.broadcastChannel=t,this._options=n,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=tp(),this._aplQ=jo,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var i=function(s){s.context==="leader"&&(s.action==="death"&&(r._hasLeader=!1),s.action==="tell"&&(r._hasLeader=!0))};this.broadcastChannel.addEventListener("internal",i),this._lstns.push(i)};YN.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(t){var n=this;if(this.isLeader)return el(0,!0);if(this.isDead)return el(0,!1);if(this._aplQC>1)return this._aplQ;var r=function(){if(n.isLeader)return tq;var a=!1,s,u=new Promise(function(h){s=function(){a=!0,h()}}),c=function(v){v.context==="leader"&&v.token!=n.token&&(v.action==="apply"&&v.token>n.token&&s(),v.action==="tell"&&(s(),n._hasLeader=!0))};n.broadcastChannel.addEventListener("internal",c);var d=t?n._options.responseTime*4:n._options.responseTime;return ul(n,"apply").then(function(){return Promise.race([el(d),u.then(function(){return Promise.reject(new Error)})])}).then(function(){return ul(n,"apply")}).then(function(){return Promise.race([el(d),u.then(function(){return Promise.reject(new Error)})])}).catch(function(){}).then(function(){return n.broadcastChannel.removeEventListener("internal",c),a?!1:KN(n).then(function(){return!0})})};return this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then(function(){return r()}).then(function(){n._aplQC=n._aplQC-1}),this._aplQ.then(function(){return n.isLeader})},awaitLeadership:function(){return this._aLP||(this._aLP=s8(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var t=this;return this._lstns.forEach(function(n){return t.broadcastChannel.removeEventListener("internal",n)}),this._lstns=[],this._unl.forEach(function(n){return n.remove()}),this._unl=[],this.isLeader&&(this._hasLeader=!1,this.isLeader=!1),this.isDead=!0,ul(this,"death")}};function s8(e){return e.isLeader?jo:new Promise(function(t){var n=!1;function r(){n||(n=!0,e.broadcastChannel.removeEventListener("internal",a),t(!0))}e.applyOnce().then(function(){e.isLeader&&r()});var i=function(){return el(e._options.fallbackInterval).then(function(){if(!(e.isDead||n))if(e.isLeader)r();else return e.applyOnce(!0).then(function(){e.isLeader?r():i()})})};i();var a=function(u){u.context==="leader"&&u.action==="death"&&(e._hasLeader=!1,e.applyOnce().then(function(){e.isLeader&&r()}))};e.broadcastChannel.addEventListener("internal",a),e._lstns.push(a)})}function u8(e,t){return e||(e={}),e=JSON.parse(JSON.stringify(e)),e.fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options)),e}function VN(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=u8(t,e);var n=rq()?new qN(e,t):new YN(e,t);return e._befC.push(function(){return n.die()}),e._leaderElector=n,n}var Gv=new Map;function XN(e,t,n,r){var i=Gv.get(t);return i||(i={bc:new Fg(["RxDB:",e,n].join("|")),refs:new Set},Gv.set(t,i)),i.refs.add(r),i.bc}function R_(e,t){var n=Gv.get(e);if(n&&(n.refs.delete(t),n.refs.size===0))return Gv.delete(e),n.bc.close()}function l8(e,t,n,r){if(t.multiInstance){var i=r||XN(e,t.databaseInstanceToken,n.databaseName,n),a=new br,s=g=>{g.storageName===e&&g.databaseName===t.databaseName&&g.collectionName===t.collectionName&&g.version===t.schema.version&&a.next(g.eventBulk)};i.addEventListener("message",s);var u=n.changeStream(),c=!1,d=u.subscribe(g=>{c||i.postMessage({storageName:e,databaseName:t.databaseName,collectionName:t.collectionName,version:t.schema.version,eventBulk:g})});n.changeStream=function(){return a.asObservable().pipe(VH(u))};var h=n.close.bind(n);n.close=async function(){return c=!0,d.unsubscribe(),i.removeEventListener("message",s),r||await R_(t.databaseInstanceToken,n),h()};var v=n.remove.bind(n);n.remove=async function(){return c=!0,d.unsubscribe(),i.removeEventListener("message",s),r||await R_(t.databaseInstanceToken,n),v()}}}var c8=new Map;function f8(e,t){var n=Ir(c8,t,()=>new Map);function r(i){return Ir(n,JSON.stringify(i),()=>e(i))}return i=>Object.assign({},i.storage,{name:"validate-"+t+"-"+i.storage.name,async createStorageInstance(a){var s=await i.storage.createStorageInstance(a),u=ai(a.schema.primaryKey),c;BU(()=>c=r(a.schema));var d=s.bulkWrite.bind(s);return s.bulkWrite=(h,v)=>{c||(c=r(a.schema));var g=[],w=[];h.forEach(E=>{var C=E.document[u],x=c(E.document);x.length>0?g.push({status:422,isError:!0,documentId:C,writeRow:E,validationErrors:x,schema:s.schema}):w.push(E)});var _=w.length>0?d(w,v):Promise.resolve({error:[],success:[]});return _.then(E=>(g.forEach(C=>{E.error.push(C)}),E))},s}})}var QN={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(qu,function(){var n=function(f,m){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,k){y.__proto__=k}||function(y,k){for(var D in k)Object.prototype.hasOwnProperty.call(k,D)&&(y[D]=k[D])})(f,m)},r=function(){return(r=Object.assign||function(f){for(var m,y=1,k=arguments.length;y<k;y++)for(var D in m=arguments[y])Object.prototype.hasOwnProperty.call(m,D)&&(f[D]=m[D]);return f}).apply(this,arguments)};function i(f,m,y){if(y||arguments.length===2)for(var k,D=0,N=m.length;D<N;D++)!k&&D in m||((k=k||Array.prototype.slice.call(m,0,D))[D]=m[D]);return f.concat(k||Array.prototype.slice.call(m))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:qu,s=Object.keys,u=Array.isArray;function c(f,m){return typeof m!="object"||s(m).forEach(function(y){f[y]=m[y]}),f}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var d=Object.getPrototypeOf,h={}.hasOwnProperty;function v(f,m){return h.call(f,m)}function g(f,m){typeof m=="function"&&(m=m(d(f))),(typeof Reflect>"u"?s:Reflect.ownKeys)(m).forEach(function(y){_(f,y,m[y])})}var w=Object.defineProperty;function _(f,m,y,k){w(f,m,c(y&&v(y,"get")&&typeof y.get=="function"?{get:y.get,set:y.set,configurable:!0}:{value:y,configurable:!0,writable:!0},k))}function E(f){return{from:function(m){return f.prototype=Object.create(m.prototype),_(f.prototype,"constructor",f),{extend:g.bind(null,f.prototype)}}}}var C=Object.getOwnPropertyDescriptor,x=[].slice;function S(f,m,y){return x.call(f,m,y)}function P(f,m){return m(f)}function M(f){if(!f)throw new Error("Assertion Failed")}function T(f){a.setImmediate?setImmediate(f):setTimeout(f,0)}function U(f,m){if(typeof m=="string"&&v(f,m))return f[m];if(!m)return f;if(typeof m!="string"){for(var y=[],k=0,D=m.length;k<D;++k){var N=U(f,m[k]);y.push(N)}return y}var B=m.indexOf(".");if(B!==-1){var Y=f[m.substr(0,B)];return Y==null?void 0:U(Y,m.substr(B+1))}}function W(f,m,y){if(f&&m!==void 0&&!("isFrozen"in Object&&Object.isFrozen(f)))if(typeof m!="string"&&"length"in m){M(typeof y!="string"&&"length"in y);for(var k=0,D=m.length;k<D;++k)W(f,m[k],y[k])}else{var N,B,Y=m.indexOf(".");Y!==-1?(N=m.substr(0,Y),(B=m.substr(Y+1))===""?y===void 0?u(f)&&!isNaN(parseInt(N))?f.splice(N,1):delete f[N]:f[N]=y:W(Y=!(Y=f[N])||!v(f,N)?f[N]={}:Y,B,y)):y===void 0?u(f)&&!isNaN(parseInt(m))?f.splice(m,1):delete f[m]:f[m]=y}}function re(f){var m,y={};for(m in f)v(f,m)&&(y[m]=f[m]);return y}var he=[].concat;function de(f){return he.apply([],f)}var oa="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(de([8,16,32,64].map(function(f){return["Int","Uint","Float"].map(function(m){return m+f+"Array"})}))).filter(function(f){return a[f]}),ce=new Set(oa.map(function(f){return a[f]})),pe=null;function xe(f){return pe=new WeakMap,f=function m(y){if(!y||typeof y!="object")return y;var k=pe.get(y);if(k)return k;if(u(y)){k=[],pe.set(y,k);for(var D=0,N=y.length;D<N;++D)k.push(m(y[D]))}else if(ce.has(y.constructor))k=y;else{var B,Y=d(y);for(B in k=Y===Object.prototype?{}:Object.create(Y),pe.set(y,k),y)v(y,B)&&(k[B]=m(y[B]))}return k}(f),pe=null,f}var Ce={}.toString;function Le(f){return Ce.call(f).slice(8,-1)}var qe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",We=typeof qe=="symbol"?function(f){var m;return f!=null&&(m=f[qe])&&m.apply(f)}:function(){return null};function oe(f,m){return m=f.indexOf(m),0<=m&&f.splice(m,1),0<=m}var _e={};function G(f){var m,y,k,D;if(arguments.length===1){if(u(f))return f.slice();if(this===_e&&typeof f=="string")return[f];if(D=We(f)){for(y=[];!(k=D.next()).done;)y.push(k.value);return y}if(f==null)return[f];if(typeof(m=f.length)!="number")return[f];for(y=new Array(m);m--;)y[m]=f[m];return y}for(m=arguments.length,y=new Array(m);m--;)y[m]=arguments[m];return y}var F=typeof Symbol<"u"?function(f){return f[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Qn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Hr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Qn),ee={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function X(f,m){this.name=f,this.message=m}function I(f,m){return f+". Errors: "+Object.keys(m).map(function(y){return m[y].toString()}).filter(function(y,k,D){return D.indexOf(y)===k}).join(`
`)}function H(f,m,y,k){this.failures=m,this.failedKeys=k,this.successCount=y,this.message=I(f,m)}function ae(f,m){this.name="BulkError",this.failures=Object.keys(m).map(function(y){return m[y]}),this.failuresByPos=m,this.message=I(f,this.failures)}E(X).from(Error).extend({toString:function(){return this.name+": "+this.message}}),E(H).from(X),E(ae).from(X);var ge=Hr.reduce(function(f,m){return f[m]=m+"Error",f},{}),$e=X,me=Hr.reduce(function(f,m){var y=m+"Error";function k(D,N){this.name=y,D?typeof D=="string"?(this.message="".concat(D).concat(N?`
 `+N:""),this.inner=N||null):typeof D=="object"&&(this.message="".concat(D.name," ").concat(D.message),this.inner=D):(this.message=ee[m]||y,this.inner=null)}return E(k).from($e),f[m]=k,f},{});me.Syntax=SyntaxError,me.Type=TypeError,me.Range=RangeError;var Me=Qn.reduce(function(f,m){return f[m+"Error"]=me[m],f},{}),Ge=Hr.reduce(function(f,m){return["Syntax","Type","Range"].indexOf(m)===-1&&(f[m+"Error"]=me[m]),f},{});function Ke(){}function an(f){return f}function Et(f,m){return f==null||f===an?m:function(y){return m(f(y))}}function At(f,m){return function(){f.apply(this,arguments),m.apply(this,arguments)}}function dn(f,m){return f===Ke?m:function(){var y=f.apply(this,arguments);y!==void 0&&(arguments[0]=y);var k=this.onsuccess,D=this.onerror;this.onsuccess=null,this.onerror=null;var N=m.apply(this,arguments);return k&&(this.onsuccess=this.onsuccess?At(k,this.onsuccess):k),D&&(this.onerror=this.onerror?At(D,this.onerror):D),N!==void 0?N:y}}function on(f,m){return f===Ke?m:function(){f.apply(this,arguments);var y=this.onsuccess,k=this.onerror;this.onsuccess=this.onerror=null,m.apply(this,arguments),y&&(this.onsuccess=this.onsuccess?At(y,this.onsuccess):y),k&&(this.onerror=this.onerror?At(k,this.onerror):k)}}function sr(f,m){return f===Ke?m:function(y){var k=f.apply(this,arguments);c(y,k);var D=this.onsuccess,N=this.onerror;return this.onsuccess=null,this.onerror=null,y=m.apply(this,arguments),D&&(this.onsuccess=this.onsuccess?At(D,this.onsuccess):D),N&&(this.onerror=this.onerror?At(N,this.onerror):N),k===void 0?y===void 0?void 0:y:c(k,y)}}function Yn(f,m){return f===Ke?m:function(){return m.apply(this,arguments)!==!1&&f.apply(this,arguments)}}function sn(f,m){return f===Ke?m:function(){var y=f.apply(this,arguments);if(y&&typeof y.then=="function"){for(var k=this,D=arguments.length,N=new Array(D);D--;)N[D]=arguments[D];return y.then(function(){return m.apply(k,N)})}return m.apply(this,arguments)}}Ge.ModifyError=H,Ge.DexieError=X,Ge.BulkError=ae;var _t=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Vn(f){_t=f}var Xn={},ra=100,oa=typeof Promise>"u"?[]:function(){var f=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[f,d(f),f];var m=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[m,d(m),f]}(),Qn=oa[0],Hr=oa[1],oa=oa[2],Hr=Hr&&Hr.then,Gn=Qn&&Qn.constructor,Sn=!!oa,un=function(f,m){Oi.push([f,m]),si&&(queueMicrotask(lr),si=!1)},ur=!0,si=!0,xn=[],ia=[],uo=an,Br={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ke,pgp:!1,env:{},finalize:Ke},Fe=Br,Oi=[],ui=0,lo=[];function Ne(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var m=this._PSD=Fe;if(typeof f!="function"){if(f!==Xn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Xt(this,this._value))}this._state=null,this._value=null,++m.ref,function y(k,D){try{D(function(N){if(k._state===null){if(N===k)throw new TypeError("A promise cannot be resolved with itself.");var B=k._lib&&Qt();N&&typeof N.then=="function"?y(k,function(Y,te){N instanceof Ne?N._then(Y,te):N.then(Y,te)}):(k._state=!0,k._value=N,zn(k)),B&&$n()}},Xt.bind(null,k))}catch(N){Xt(k,N)}}(this,f)}var cu={get:function(){var f=Fe,m=Er;function y(k,D){var N=this,B=!f.global&&(f!==Fe||m!==Er),Y=B&&!Ma(),te=new Ne(function($,z){On(N,new fu(up(k,f,B,Y),up(D,f,B,Y),$,z,f))});return this._consoleTask&&(te._consoleTask=this._consoleTask),te}return y.prototype=Xn,y},set:function(f){_(this,"then",f&&f.prototype===Xn?cu:{get:function(){return f},set:cu.set})}};function fu(f,m,y,k,D){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof m=="function"?m:null,this.resolve=y,this.reject=k,this.psd=D}function Xt(f,m){var y,k;ia.push(m),f._state===null&&(y=f._lib&&Qt(),m=uo(m),f._state=!1,f._value=m,k=f,xn.some(function(D){return D._value===k._value})||xn.push(k),zn(f),y&&$n())}function zn(f){var m=f._listeners;f._listeners=[];for(var y=0,k=m.length;y<k;++y)On(f,m[y]);var D=f._PSD;--D.ref||D.finalize(),ui===0&&(++ui,un(function(){--ui==0&&Ri()},[]))}function On(f,m){if(f._state!==null){var y=f._state?m.onFulfilled:m.onRejected;if(y===null)return(f._state?m.resolve:m.reject)(f._value);++m.psd.ref,++ui,un($i,[y,f,m])}else f._listeners.push(m)}function $i(f,m,y){try{var k,D=m._value;!m._state&&ia.length&&(ia=[]),k=_t&&m._consoleTask?m._consoleTask.run(function(){return f(D)}):f(D),m._state||ia.indexOf(D)!==-1||function(N){for(var B=xn.length;B;)if(xn[--B]._value===N._value)return xn.splice(B,1)}(m),y.resolve(k)}catch(N){y.reject(N)}finally{--ui==0&&Ri(),--y.psd.ref||y.psd.finalize()}}function lr(){fo(Br,function(){Qt()&&$n()})}function Qt(){var f=ur;return si=ur=!1,f}function $n(){var f,m,y;do for(;0<Oi.length;)for(f=Oi,Oi=[],y=f.length,m=0;m<y;++m){var k=f[m];k[0].apply(null,k[1])}while(0<Oi.length);si=ur=!0}function Ri(){var f=xn;xn=[],f.forEach(function(k){k._PSD.onunhandled.call(null,k._value,k)});for(var m=lo.slice(0),y=m.length;y;)m[--y]()}function qt(f){return new Ne(Xn,!1,f)}function dt(f,m){var y=Fe;return function(){var k=Qt(),D=Fe;try{return Ia(y,!0),f.apply(this,arguments)}catch(N){m&&m(N)}finally{Ia(D,!1),k&&$n()}}}g(Ne.prototype,{then:cu,_then:function(f,m){On(this,new fu(null,null,f,m,Fe))},catch:function(f){if(arguments.length===1)return this.then(null,f);var m=f,y=arguments[1];return typeof m=="function"?this.then(null,function(k){return(k instanceof m?y:qt)(k)}):this.then(null,function(k){return(k&&k.name===m?y:qt)(k)})},finally:function(f){return this.then(function(m){return Ne.resolve(f()).then(function(){return m})},function(m){return Ne.resolve(f()).then(function(){return qt(m)})})},timeout:function(f,m){var y=this;return f<1/0?new Ne(function(k,D){var N=setTimeout(function(){return D(new me.Timeout(m))},f);y.then(k,D).finally(clearTimeout.bind(null,N))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&_(Ne.prototype,Symbol.toStringTag,"Dexie.Promise"),Br.env=sp(),g(Ne,{all:function(){var f=G.apply(null,arguments).map(Pl);return new Ne(function(m,y){f.length===0&&m([]);var k=f.length;f.forEach(function(D,N){return Ne.resolve(D).then(function(B){f[N]=B,--k||m(f)},y)})})},resolve:function(f){return f instanceof Ne?f:f&&typeof f.then=="function"?new Ne(function(m,y){f.then(m,y)}):new Ne(Xn,!0,f)},reject:qt,race:function(){var f=G.apply(null,arguments).map(Pl);return new Ne(function(m,y){f.map(function(k){return Ne.resolve(k).then(m,y)})})},PSD:{get:function(){return Fe},set:function(f){return Fe=f}},totalEchoes:{get:function(){return Er}},newPSD:Wr,usePSD:fo,scheduler:{get:function(){return un},set:function(f){un=f}},rejectionMapper:{get:function(){return uo},set:function(f){uo=f}},follow:function(f,m){return new Ne(function(y,k){return Wr(function(D,N){var B=Fe;B.unhandleds=[],B.onunhandled=N,B.finalize=At(function(){var Y,te=this;Y=function(){te.unhandleds.length===0?D():N(te.unhandleds[0])},lo.push(function $(){Y(),lo.splice(lo.indexOf($),1)}),++ui,un(function(){--ui==0&&Ri()},[])},B.finalize),f()},m,y,k)})}}),Gn&&(Gn.allSettled&&_(Ne,"allSettled",function(){var f=G.apply(null,arguments).map(Pl);return new Ne(function(m){f.length===0&&m([]);var y=f.length,k=new Array(y);f.forEach(function(D,N){return Ne.resolve(D).then(function(B){return k[N]={status:"fulfilled",value:B}},function(B){return k[N]={status:"rejected",reason:B}}).then(function(){return--y||m(k)})})})}),Gn.any&&typeof AggregateError<"u"&&_(Ne,"any",function(){var f=G.apply(null,arguments).map(Pl);return new Ne(function(m,y){f.length===0&&y(new AggregateError([]));var k=f.length,D=new Array(k);f.forEach(function(N,B){return Ne.resolve(N).then(function(Y){return m(Y)},function(Y){D[B]=Y,--k||y(new AggregateError(D))})})})}),Gn.withResolvers&&(Ne.withResolvers=Gn.withResolvers));var bt={awaits:0,echoes:0,id:0},xr=0,Ni=[],Ti=0,Er=0,co=0;function Wr(f,m,y,k){var D=Fe,N=Object.create(D);return N.parent=D,N.ref=0,N.global=!1,N.id=++co,Br.env,N.env=Sn?{Promise:Ne,PromiseProp:{value:Ne,configurable:!0,writable:!0},all:Ne.all,race:Ne.race,allSettled:Ne.allSettled,any:Ne.any,resolve:Ne.resolve,reject:Ne.reject}:{},m&&c(N,m),++D.ref,N.finalize=function(){--this.parent.ref||this.parent.finalize()},k=fo(N,f,y,k),N.ref===0&&N.finalize(),k}function Jo(){return bt.id||(bt.id=++xr),++bt.awaits,bt.echoes+=ra,bt.id}function Ma(){return!!bt.awaits&&(--bt.awaits==0&&(bt.id=0),bt.echoes=bt.awaits*ra,!0)}function Pl(f){return bt.echoes&&f&&f.constructor===Gn?(Jo(),f.then(function(m){return Ma(),m},function(m){return Ma(),Gt(m)})):f}function op(){var f=Ni[Ni.length-1];Ni.pop(),Ia(f,!1)}function Ia(f,m){var y,k=Fe;(m?!bt.echoes||Ti++&&f===Fe:!Ti||--Ti&&f===Fe)||queueMicrotask(m?(function(D){++Er,bt.echoes&&--bt.echoes!=0||(bt.echoes=bt.awaits=bt.id=0),Ni.push(Fe),Ia(D,!0)}).bind(null,f):op),f!==Fe&&(Fe=f,k===Br&&(Br.env=sp()),Sn&&(y=Br.env.Promise,m=f.env,(k.global||f.global)&&(Object.defineProperty(a,"Promise",m.PromiseProp),y.all=m.all,y.race=m.race,y.resolve=m.resolve,y.reject=m.reject,m.allSettled&&(y.allSettled=m.allSettled),m.any&&(y.any=m.any))))}function sp(){var f=a.Promise;return Sn?{Promise:f,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:f.all,race:f.race,allSettled:f.allSettled,any:f.any,resolve:f.resolve,reject:f.reject}:{}}function fo(f,m,y,k,D){var N=Fe;try{return Ia(f,!0),m(y,k,D)}finally{Ia(N,!1)}}function up(f,m,y,k){return typeof f!="function"?f:function(){var D=Fe;y&&Jo(),Ia(m,!0);try{return f.apply(this,arguments)}finally{Ia(D,!1),k&&queueMicrotask(Ma)}}}function wf(f){Promise===Gn&&bt.echoes===0?Ti===0?f():enqueueNativeMicroTask(f):setTimeout(f,0)}(""+Hr).indexOf("[native code]")===-1&&(Jo=Ma=Ke);var Gt=Ne.reject,Mi=String.fromCharCode(65535),aa="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",du="String expected.",Zo=[],kl="__dbnames",_f="readonly",Cl="readwrite";function Aa(f,m){return f?m?function(){return f.apply(this,arguments)&&m.apply(this,arguments)}:f:m}var bf={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Dl(f){return typeof f!="string"||/\./.test(f)?function(m){return m}:function(m){return m[f]===void 0&&f in m&&delete(m=xe(m))[f],m}}function lp(){throw me.Type()}function ht(f,m){try{var y=cp(f),k=cp(m);if(y!==k)return y==="Array"?1:k==="Array"?-1:y==="binary"?1:k==="binary"?-1:y==="string"?1:k==="string"?-1:y==="Date"?1:k!=="Date"?NaN:-1;switch(y){case"number":case"Date":case"string":return m<f?1:f<m?-1:0;case"binary":return function(D,N){for(var B=D.length,Y=N.length,te=B<Y?B:Y,$=0;$<te;++$)if(D[$]!==N[$])return D[$]<N[$]?-1:1;return B===Y?0:B<Y?-1:1}(Sf(f),Sf(m));case"Array":return function(D,N){for(var B=D.length,Y=N.length,te=B<Y?B:Y,$=0;$<te;++$){var z=ht(D[$],N[$]);if(z!==0)return z}return B===Y?0:B<Y?-1:1}(f,m)}}catch{}return NaN}function cp(f){var m=typeof f;return m!="object"?m:ArrayBuffer.isView(f)?"binary":(f=Le(f),f==="ArrayBuffer"?"binary":f)}function Sf(f){return f instanceof Uint8Array?f:ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(f)}var xf=($t.prototype._trans=function(f,m,y){var k=this._tx||Fe.trans,D=this.name,N=_t&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(f==="readonly"?"read":"write"," ").concat(this.name));function B($,z,R){if(!R.schema[D])throw new me.NotFound("Table "+D+" not part of transaction");return m(R.idbtrans,R)}var Y=Qt();try{var te=k&&k.db._novip===this.db._novip?k===Fe.trans?k._promise(f,B,y):Wr(function(){return k._promise(f,B,y)},{trans:k,transless:Fe.transless||Fe}):function $(z,R,V,K){if(z.idbdb&&(z._state.openComplete||Fe.letThrough||z._vip)){var J=z._createTransaction(R,V,z._dbSchema);try{J.create(),z._state.PR1398_maxLoop=3}catch(ie){return ie.name===ge.InvalidState&&z.isOpen()&&0<--z._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),z.close({disableAutoOpen:!1}),z.open().then(function(){return $(z,R,V,K)})):Gt(ie)}return J._promise(R,function(ie,Q){return Wr(function(){return Fe.trans=J,K(ie,Q,J)})}).then(function(ie){if(R==="readwrite")try{J.idbtrans.commit()}catch{}return R==="readonly"?ie:J._completion.then(function(){return ie})})}if(z._state.openComplete)return Gt(new me.DatabaseClosed(z._state.dbOpenError));if(!z._state.isBeingOpened){if(!z._state.autoOpen)return Gt(new me.DatabaseClosed);z.open().catch(Ke)}return z._state.dbReadyPromise.then(function(){return $(z,R,V,K)})}(this.db,f,[this.name],B);return N&&(te._consoleTask=N,te=te.catch(function($){return console.trace($),Gt($)})),te}finally{Y&&$n()}},$t.prototype.get=function(f,m){var y=this;return f&&f.constructor===Object?this.where(f).first(m):f==null?Gt(new me.Type("Invalid argument to Table.get()")):this._trans("readonly",function(k){return y.core.get({trans:k,key:f}).then(function(D){return y.hook.reading.fire(D)})}).then(m)},$t.prototype.where=function(f){if(typeof f=="string")return new this.db.WhereClause(this,f);if(u(f))return new this.db.WhereClause(this,"[".concat(f.join("+"),"]"));var m=s(f);if(m.length===1)return this.where(m[0]).equals(f[m[0]]);var y=this.schema.indexes.concat(this.schema.primKey).filter(function(Y){if(Y.compound&&m.every(function($){return 0<=Y.keyPath.indexOf($)})){for(var te=0;te<m.length;++te)if(m.indexOf(Y.keyPath[te])===-1)return!1;return!0}return!1}).sort(function(Y,te){return Y.keyPath.length-te.keyPath.length})[0];if(y&&this.db._maxKey!==Mi){var N=y.keyPath.slice(0,m.length);return this.where(N).equals(N.map(function(te){return f[te]}))}!y&&_t&&console.warn("The query ".concat(JSON.stringify(f)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(m.join("+"),"]"));var k=this.schema.idxByName;function D(Y,te){return ht(Y,te)===0}var B=m.reduce(function(R,te){var $=R[0],z=R[1],R=k[te],V=f[te];return[$||R,$||!R?Aa(z,R&&R.multi?function(K){return K=U(K,te),u(K)&&K.some(function(J){return D(V,J)})}:function(K){return D(V,U(K,te))}):z]},[null,null]),N=B[0],B=B[1];return N?this.where(N.name).equals(f[N.keyPath]).filter(B):y?this.filter(B):this.where(m).equals("")},$t.prototype.filter=function(f){return this.toCollection().and(f)},$t.prototype.count=function(f){return this.toCollection().count(f)},$t.prototype.offset=function(f){return this.toCollection().offset(f)},$t.prototype.limit=function(f){return this.toCollection().limit(f)},$t.prototype.each=function(f){return this.toCollection().each(f)},$t.prototype.toArray=function(f){return this.toCollection().toArray(f)},$t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},$t.prototype.orderBy=function(f){return new this.db.Collection(new this.db.WhereClause(this,u(f)?"[".concat(f.join("+"),"]"):f))},$t.prototype.reverse=function(){return this.toCollection().reverse()},$t.prototype.mapToClass=function(f){var m,y=this.db,k=this.name;function D(){return m!==null&&m.apply(this,arguments)||this}(this.schema.mappedClass=f).prototype instanceof lp&&(function(te,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");function z(){this.constructor=te}n(te,$),te.prototype=$===null?Object.create($):(z.prototype=$.prototype,new z)}(D,m=f),Object.defineProperty(D.prototype,"db",{get:function(){return y},enumerable:!1,configurable:!0}),D.prototype.table=function(){return k},f=D);for(var N=new Set,B=f.prototype;B;B=d(B))Object.getOwnPropertyNames(B).forEach(function(te){return N.add(te)});function Y(te){if(!te)return te;var $,z=Object.create(f.prototype);for($ in te)if(!N.has($))try{z[$]=te[$]}catch{}return z}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Y,this.hook("reading",Y),f},$t.prototype.defineClass=function(){return this.mapToClass(function(f){c(this,f)})},$t.prototype.add=function(f,m){var y=this,k=this.schema.primKey,D=k.auto,N=k.keyPath,B=f;return N&&D&&(B=Dl(N)(f)),this._trans("readwrite",function(Y){return y.core.mutate({trans:Y,type:"add",keys:m!=null?[m]:null,values:[B]})}).then(function(Y){return Y.numFailures?Ne.reject(Y.failures[0]):Y.lastResult}).then(function(Y){if(N)try{W(f,N,Y)}catch{}return Y})},$t.prototype.update=function(f,m){return typeof f!="object"||u(f)?this.where(":id").equals(f).modify(m):(f=U(f,this.schema.primKey.keyPath),f===void 0?Gt(new me.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(f).modify(m))},$t.prototype.put=function(f,m){var y=this,k=this.schema.primKey,D=k.auto,N=k.keyPath,B=f;return N&&D&&(B=Dl(N)(f)),this._trans("readwrite",function(Y){return y.core.mutate({trans:Y,type:"put",values:[B],keys:m!=null?[m]:null})}).then(function(Y){return Y.numFailures?Ne.reject(Y.failures[0]):Y.lastResult}).then(function(Y){if(N)try{W(f,N,Y)}catch{}return Y})},$t.prototype.delete=function(f){var m=this;return this._trans("readwrite",function(y){return m.core.mutate({trans:y,type:"delete",keys:[f]})}).then(function(y){return y.numFailures?Ne.reject(y.failures[0]):void 0})},$t.prototype.clear=function(){var f=this;return this._trans("readwrite",function(m){return f.core.mutate({trans:m,type:"deleteRange",range:bf})}).then(function(m){return m.numFailures?Ne.reject(m.failures[0]):void 0})},$t.prototype.bulkGet=function(f){var m=this;return this._trans("readonly",function(y){return m.core.getMany({keys:f,trans:y}).then(function(k){return k.map(function(D){return m.hook.reading.fire(D)})})})},$t.prototype.bulkAdd=function(f,m,y){var k=this,D=Array.isArray(m)?m:void 0,N=(y=y||(D?void 0:m))?y.allKeys:void 0;return this._trans("readwrite",function(B){var $=k.schema.primKey,Y=$.auto,$=$.keyPath;if($&&D)throw new me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(D&&D.length!==f.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var te=f.length,$=$&&Y?f.map(Dl($)):f;return k.core.mutate({trans:B,type:"add",keys:D,values:$,wantResults:N}).then(function(J){var R=J.numFailures,V=J.results,K=J.lastResult,J=J.failures;if(R===0)return N?V:K;throw new ae("".concat(k.name,".bulkAdd(): ").concat(R," of ").concat(te," operations failed"),J)})})},$t.prototype.bulkPut=function(f,m,y){var k=this,D=Array.isArray(m)?m:void 0,N=(y=y||(D?void 0:m))?y.allKeys:void 0;return this._trans("readwrite",function(B){var $=k.schema.primKey,Y=$.auto,$=$.keyPath;if($&&D)throw new me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(D&&D.length!==f.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var te=f.length,$=$&&Y?f.map(Dl($)):f;return k.core.mutate({trans:B,type:"put",keys:D,values:$,wantResults:N}).then(function(J){var R=J.numFailures,V=J.results,K=J.lastResult,J=J.failures;if(R===0)return N?V:K;throw new ae("".concat(k.name,".bulkPut(): ").concat(R," of ").concat(te," operations failed"),J)})})},$t.prototype.bulkUpdate=function(f){var m=this,y=this.core,k=f.map(function(B){return B.key}),D=f.map(function(B){return B.changes}),N=[];return this._trans("readwrite",function(B){return y.getMany({trans:B,keys:k,cache:"clone"}).then(function(Y){var te=[],$=[];f.forEach(function(R,V){var K=R.key,J=R.changes,ie=Y[V];if(ie){for(var Q=0,ue=Object.keys(J);Q<ue.length;Q++){var fe=ue[Q],le=J[fe];if(fe===m.schema.primKey.keyPath){if(ht(le,K)!==0)throw new me.Constraint("Cannot update primary key in bulkUpdate()")}else W(ie,fe,le)}N.push(V),te.push(K),$.push(ie)}});var z=te.length;return y.mutate({trans:B,type:"put",keys:te,values:$,updates:{keys:k,changeSpecs:D}}).then(function(R){var V=R.numFailures,K=R.failures;if(V===0)return z;for(var J=0,ie=Object.keys(K);J<ie.length;J++){var Q,ue=ie[J],fe=N[Number(ue)];fe!=null&&(Q=K[ue],delete K[ue],K[fe]=Q)}throw new ae("".concat(m.name,".bulkUpdate(): ").concat(V," of ").concat(z," operations failed"),K)})})})},$t.prototype.bulkDelete=function(f){var m=this,y=f.length;return this._trans("readwrite",function(k){return m.core.mutate({trans:k,type:"delete",keys:f})}).then(function(B){var D=B.numFailures,N=B.lastResult,B=B.failures;if(D===0)return N;throw new ae("".concat(m.name,".bulkDelete(): ").concat(D," of ").concat(y," operations failed"),B)})},$t);function $t(){}function ho(f){function m(B,Y){if(Y){for(var te=arguments.length,$=new Array(te-1);--te;)$[te-1]=arguments[te];return y[B].subscribe.apply(null,$),f}if(typeof B=="string")return y[B]}var y={};m.addEventType=N;for(var k=1,D=arguments.length;k<D;++k)N(arguments[k]);return m;function N(B,Y,te){if(typeof B!="object"){var $;Y=Y||Yn;var z={subscribers:[],fire:te=te||Ke,subscribe:function(R){z.subscribers.indexOf(R)===-1&&(z.subscribers.push(R),z.fire=Y(z.fire,R))},unsubscribe:function(R){z.subscribers=z.subscribers.filter(function(V){return V!==R}),z.fire=z.subscribers.reduce(Y,te)}};return y[B]=m[B]=z}s($=B).forEach(function(R){var V=$[R];if(u(V))N(R,$[R][0],$[R][1]);else{if(V!=="asap")throw new me.InvalidArgument("Invalid event config");var K=N(R,an,function(){for(var J=arguments.length,ie=new Array(J);J--;)ie[J]=arguments[J];K.subscribers.forEach(function(Q){T(function(){Q.apply(null,ie)})})})}})}}function hu(f,m){return E(m).from({prototype:f}),m}function po(f,m){return!(f.filter||f.algorithm||f.or)&&(m?f.justLimit:!f.replayFilter)}function es(f,m){f.filter=Aa(f.filter,m)}function Ol(f,m,y){var k=f.replayFilter;f.replayFilter=k?function(){return Aa(k(),m())}:m,f.justLimit=y&&!k}function $l(f,m){if(f.isPrimKey)return m.primaryKey;var y=m.getIndexByKeyPath(f.index);if(!y)throw new me.Schema("KeyPath "+f.index+" on object store "+m.name+" is not indexed");return y}function Ef(f,m,y){var k=$l(f,m.schema);return m.openCursor({trans:y,values:!f.keysOnly,reverse:f.dir==="prev",unique:!!f.unique,query:{index:k,range:f.range}})}function pu(f,m,y,k){var D=f.replayFilter?Aa(f.filter,f.replayFilter()):f.filter;if(f.or){var N={},B=function(Y,te,$){var z,R;D&&!D(te,$,function(V){return te.stop(V)},function(V){return te.fail(V)})||((R=""+(z=te.primaryKey))=="[object ArrayBuffer]"&&(R=""+new Uint8Array(z)),v(N,R)||(N[R]=!0,m(Y,te,$)))};return Promise.all([f.or._iterate(B,y),Rl(Ef(f,k,y),f.algorithm,B,!f.keysOnly&&f.valueMapper)])}return Rl(Ef(f,k,y),Aa(f.algorithm,D),m,!f.keysOnly&&f.valueMapper)}function Rl(f,m,y,k){var D=dt(k?function(N,B,Y){return y(k(N),B,Y)}:y);return f.then(function(N){if(N)return N.start(function(){var B=function(){return N.continue()};m&&!m(N,function(Y){return B=Y},function(Y){N.stop(Y),B=Ke},function(Y){N.fail(Y),B=Ke})||D(N.value,N,function(Y){return B=Y}),B()})})}var oa=Symbol(),ts=(Nl.prototype.execute=function(f){if(this.add!==void 0){var m=this.add;if(u(m))return i(i([],u(f)?f:[],!0),m,!0).sort();if(typeof m=="number")return(Number(f)||0)+m;if(typeof m=="bigint")try{return BigInt(f)+m}catch{return BigInt(0)+m}throw new TypeError("Invalid term ".concat(m))}if(this.remove!==void 0){var y=this.remove;if(u(y))return u(f)?f.filter(function(k){return!y.includes(k)}).sort():[];if(typeof y=="number")return Number(f)-y;if(typeof y=="bigint")try{return BigInt(f)-y}catch{return BigInt(0)-y}throw new TypeError("Invalid subtrahend ".concat(y))}return m=(m=this.replacePrefix)===null||m===void 0?void 0:m[0],m&&typeof f=="string"&&f.startsWith(m)?this.replacePrefix[1]+f.substring(m.length):f},Nl);function Nl(f){Object.assign(this,f)}var Pf=(lt.prototype._read=function(f,m){var y=this._ctx;return y.error?y.table._trans(null,Gt.bind(null,y.error)):y.table._trans("readonly",f).then(m)},lt.prototype._write=function(f){var m=this._ctx;return m.error?m.table._trans(null,Gt.bind(null,m.error)):m.table._trans("readwrite",f,"locked")},lt.prototype._addAlgorithm=function(f){var m=this._ctx;m.algorithm=Aa(m.algorithm,f)},lt.prototype._iterate=function(f,m){return pu(this._ctx,f,m,this._ctx.table.core)},lt.prototype.clone=function(f){var m=Object.create(this.constructor.prototype),y=Object.create(this._ctx);return f&&c(y,f),m._ctx=y,m},lt.prototype.raw=function(){return this._ctx.valueMapper=null,this},lt.prototype.each=function(f){var m=this._ctx;return this._read(function(y){return pu(m,f,y,m.table.core)})},lt.prototype.count=function(f){var m=this;return this._read(function(y){var k=m._ctx,D=k.table.core;if(po(k,!0))return D.count({trans:y,query:{index:$l(k,D.schema),range:k.range}}).then(function(B){return Math.min(B,k.limit)});var N=0;return pu(k,function(){return++N,!1},y,D).then(function(){return N})}).then(f)},lt.prototype.sortBy=function(f,m){var y=f.split(".").reverse(),k=y[0],D=y.length-1;function N(te,$){return $?N(te[y[$]],$-1):te[k]}var B=this._ctx.dir==="next"?1:-1;function Y(te,$){return ht(N(te,D),N($,D))*B}return this.toArray(function(te){return te.sort(Y)}).then(m)},lt.prototype.toArray=function(f){var m=this;return this._read(function(y){var k=m._ctx;if(k.dir==="next"&&po(k,!0)&&0<k.limit){var D=k.valueMapper,N=$l(k,k.table.core.schema);return k.table.core.query({trans:y,limit:k.limit,values:!0,query:{index:N,range:k.range}}).then(function(Y){return Y=Y.result,D?Y.map(D):Y})}var B=[];return pu(k,function(Y){return B.push(Y)},y,k.table.core).then(function(){return B})},f)},lt.prototype.offset=function(f){var m=this._ctx;return f<=0||(m.offset+=f,po(m)?Ol(m,function(){var y=f;return function(k,D){return y===0||(y===1?--y:D(function(){k.advance(y),y=0}),!1)}}):Ol(m,function(){var y=f;return function(){return--y<0}})),this},lt.prototype.limit=function(f){return this._ctx.limit=Math.min(this._ctx.limit,f),Ol(this._ctx,function(){var m=f;return function(y,k,D){return--m<=0&&k(D),0<=m}},!0),this},lt.prototype.until=function(f,m){return es(this._ctx,function(y,k,D){return!f(y.value)||(k(D),m)}),this},lt.prototype.first=function(f){return this.limit(1).toArray(function(m){return m[0]}).then(f)},lt.prototype.last=function(f){return this.reverse().first(f)},lt.prototype.filter=function(f){var m;return es(this._ctx,function(y){return f(y.value)}),(m=this._ctx).isMatch=Aa(m.isMatch,f),this},lt.prototype.and=function(f){return this.filter(f)},lt.prototype.or=function(f){return new this.db.WhereClause(this._ctx.table,f,this)},lt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},lt.prototype.desc=function(){return this.reverse()},lt.prototype.eachKey=function(f){var m=this._ctx;return m.keysOnly=!m.isMatch,this.each(function(y,k){f(k.key,k)})},lt.prototype.eachUniqueKey=function(f){return this._ctx.unique="unique",this.eachKey(f)},lt.prototype.eachPrimaryKey=function(f){var m=this._ctx;return m.keysOnly=!m.isMatch,this.each(function(y,k){f(k.primaryKey,k)})},lt.prototype.keys=function(f){var m=this._ctx;m.keysOnly=!m.isMatch;var y=[];return this.each(function(k,D){y.push(D.key)}).then(function(){return y}).then(f)},lt.prototype.primaryKeys=function(f){var m=this._ctx;if(m.dir==="next"&&po(m,!0)&&0<m.limit)return this._read(function(k){var D=$l(m,m.table.core.schema);return m.table.core.query({trans:k,values:!1,limit:m.limit,query:{index:D,range:m.range}})}).then(function(k){return k.result}).then(f);m.keysOnly=!m.isMatch;var y=[];return this.each(function(k,D){y.push(D.primaryKey)}).then(function(){return y}).then(f)},lt.prototype.uniqueKeys=function(f){return this._ctx.unique="unique",this.keys(f)},lt.prototype.firstKey=function(f){return this.limit(1).keys(function(m){return m[0]}).then(f)},lt.prototype.lastKey=function(f){return this.reverse().firstKey(f)},lt.prototype.distinct=function(){var f=this._ctx,f=f.index&&f.table.schema.idxByName[f.index];if(!f||!f.multi)return this;var m={};return es(this._ctx,function(D){var k=D.primaryKey.toString(),D=v(m,k);return m[k]=!0,!D}),this},lt.prototype.modify=function(f){var m=this,y=this._ctx;return this._write(function(k){var D,N,B;B=typeof f=="function"?f:(D=s(f),N=D.length,function(Q){for(var ue=!1,fe=0;fe<N;++fe){var le=D[fe],ve=f[le],Pe=U(Q,le);ve instanceof ts?(W(Q,le,ve.execute(Pe)),ue=!0):Pe!==ve&&(W(Q,le,ve),ue=!0)}return ue});var Y=y.table.core,R=Y.schema.primaryKey,te=R.outbound,$=R.extractKey,z=200,R=m.db._options.modifyChunkSize;R&&(z=typeof R=="object"?R[Y.name]||R["*"]||200:R);function V(Q,le){var fe=le.failures,le=le.numFailures;J+=Q-le;for(var ve=0,Pe=s(fe);ve<Pe.length;ve++){var Oe=Pe[ve];K.push(fe[Oe])}}var K=[],J=0,ie=[];return m.clone().primaryKeys().then(function(Q){function ue(le){var ve=Math.min(z,Q.length-le);return Y.getMany({trans:k,keys:Q.slice(le,le+ve),cache:"immutable"}).then(function(Pe){for(var Oe=[],Ee=[],De=te?[]:null,be=[],Re=0;Re<ve;++Re){var Ae=Pe[Re],Ze={value:xe(Ae),primKey:Q[le+Re]};B.call(Ze,Ze.value,Ze)!==!1&&(Ze.value==null?be.push(Q[le+Re]):te||ht($(Ae),$(Ze.value))===0?(Ee.push(Ze.value),te&&De.push(Q[le+Re])):(be.push(Q[le+Re]),Oe.push(Ze.value)))}return Promise.resolve(0<Oe.length&&Y.mutate({trans:k,type:"add",values:Oe}).then(function(at){for(var ot in at.failures)be.splice(parseInt(ot),1);V(Oe.length,at)})).then(function(){return(0<Ee.length||fe&&typeof f=="object")&&Y.mutate({trans:k,type:"put",keys:De,values:Ee,criteria:fe,changeSpec:typeof f!="function"&&f,isAdditionalChunk:0<le}).then(function(at){return V(Ee.length,at)})}).then(function(){return(0<be.length||fe&&f===Tl)&&Y.mutate({trans:k,type:"delete",keys:be,criteria:fe,isAdditionalChunk:0<le}).then(function(at){return V(be.length,at)})}).then(function(){return Q.length>le+ve&&ue(le+z)})})}var fe=po(y)&&y.limit===1/0&&(typeof f!="function"||f===Tl)&&{index:y.index,range:y.range};return ue(0).then(function(){if(0<K.length)throw new H("Error modifying one or more objects",K,J,ie);return Q.length})})})},lt.prototype.delete=function(){var f=this._ctx,m=f.range;return po(f)&&(f.isPrimKey||m.type===3)?this._write(function(y){var k=f.table.core.schema.primaryKey,D=m;return f.table.core.count({trans:y,query:{index:k,range:D}}).then(function(N){return f.table.core.mutate({trans:y,type:"deleteRange",range:D}).then(function(B){var Y=B.failures;if(B.lastResult,B.results,B=B.numFailures,B)throw new H("Could not delete some values",Object.keys(Y).map(function(te){return Y[te]}),N-B);return N-B})})}):this.modify(Tl)},lt);function lt(){}var Tl=function(f,m){return m.value=null};function fp(f,m){return f<m?-1:f===m?0:1}function Jg(f,m){return m<f?-1:f===m?0:1}function cr(f,m,y){return f=f instanceof hp?new f.Collection(f):f,f._ctx.error=new(y||TypeError)(m),f}function mo(f){return new f.Collection(f,function(){return dp("")}).limit(0)}function mu(f,m,y,k){var D,N,B,Y,te,$,z,R=y.length;if(!y.every(function(J){return typeof J=="string"}))return cr(f,du);function V(J){D=J==="next"?function(Q){return Q.toUpperCase()}:function(Q){return Q.toLowerCase()},N=J==="next"?function(Q){return Q.toLowerCase()}:function(Q){return Q.toUpperCase()},B=J==="next"?fp:Jg;var ie=y.map(function(Q){return{lower:N(Q),upper:D(Q)}}).sort(function(Q,ue){return B(Q.lower,ue.lower)});Y=ie.map(function(Q){return Q.upper}),te=ie.map(function(Q){return Q.lower}),z=($=J)==="next"?"":k}V("next"),f=new f.Collection(f,function(){return sa(Y[0],te[R-1]+k)}),f._ondirectionchange=function(J){V(J)};var K=0;return f._addAlgorithm(function(J,ie,Q){var ue=J.key;if(typeof ue!="string")return!1;var fe=N(ue);if(m(fe,te,K))return!0;for(var le=null,ve=K;ve<R;++ve){var Pe=function(Oe,Ee,De,be,Re,Ae){for(var Ze=Math.min(Oe.length,be.length),at=-1,ot=0;ot<Ze;++ot){var Pr=Ee[ot];if(Pr!==be[ot])return Re(Oe[ot],De[ot])<0?Oe.substr(0,ot)+De[ot]+De.substr(ot+1):Re(Oe[ot],be[ot])<0?Oe.substr(0,ot)+be[ot]+De.substr(ot+1):0<=at?Oe.substr(0,at)+Ee[at]+De.substr(at+1):null;Re(Oe[ot],Pr)<0&&(at=ot)}return Ze<be.length&&Ae==="next"?Oe+De.substr(Oe.length):Ze<Oe.length&&Ae==="prev"?Oe.substr(0,De.length):at<0?null:Oe.substr(0,at)+be[at]+De.substr(at+1)}(ue,fe,Y[ve],te[ve],B,$);Pe===null&&le===null?K=ve+1:(le===null||0<B(le,Pe))&&(le=Pe)}return ie(le!==null?function(){J.continue(le+z)}:Q),!1}),f}function sa(f,m,y,k){return{type:2,lower:f,upper:m,lowerOpen:y,upperOpen:k}}function dp(f){return{type:1,lower:f,upper:f}}var hp=(Object.defineProperty(En.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),En.prototype.between=function(f,m,y,k){y=y!==!1,k=k===!0;try{return 0<this._cmp(f,m)||this._cmp(f,m)===0&&(y||k)&&(!y||!k)?mo(this):new this.Collection(this,function(){return sa(f,m,!y,!k)})}catch{return cr(this,aa)}},En.prototype.equals=function(f){return f==null?cr(this,aa):new this.Collection(this,function(){return dp(f)})},En.prototype.above=function(f){return f==null?cr(this,aa):new this.Collection(this,function(){return sa(f,void 0,!0)})},En.prototype.aboveOrEqual=function(f){return f==null?cr(this,aa):new this.Collection(this,function(){return sa(f,void 0,!1)})},En.prototype.below=function(f){return f==null?cr(this,aa):new this.Collection(this,function(){return sa(void 0,f,!1,!0)})},En.prototype.belowOrEqual=function(f){return f==null?cr(this,aa):new this.Collection(this,function(){return sa(void 0,f)})},En.prototype.startsWith=function(f){return typeof f!="string"?cr(this,du):this.between(f,f+Mi,!0,!0)},En.prototype.startsWithIgnoreCase=function(f){return f===""?this.startsWith(f):mu(this,function(m,y){return m.indexOf(y[0])===0},[f],Mi)},En.prototype.equalsIgnoreCase=function(f){return mu(this,function(m,y){return m===y[0]},[f],"")},En.prototype.anyOfIgnoreCase=function(){var f=G.apply(_e,arguments);return f.length===0?mo(this):mu(this,function(m,y){return y.indexOf(m)!==-1},f,"")},En.prototype.startsWithAnyOfIgnoreCase=function(){var f=G.apply(_e,arguments);return f.length===0?mo(this):mu(this,function(m,y){return y.some(function(k){return m.indexOf(k)===0})},f,Mi)},En.prototype.anyOf=function(){var f=this,m=G.apply(_e,arguments),y=this._cmp;try{m.sort(y)}catch{return cr(this,aa)}if(m.length===0)return mo(this);var k=new this.Collection(this,function(){return sa(m[0],m[m.length-1])});k._ondirectionchange=function(N){y=N==="next"?f._ascending:f._descending,m.sort(y)};var D=0;return k._addAlgorithm(function(N,B,Y){for(var te=N.key;0<y(te,m[D]);)if(++D===m.length)return B(Y),!1;return y(te,m[D])===0||(B(function(){N.continue(m[D])}),!1)}),k},En.prototype.notEqual=function(f){return this.inAnyRange([[-1/0,f],[f,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},En.prototype.noneOf=function(){var f=G.apply(_e,arguments);if(f.length===0)return new this.Collection(this);try{f.sort(this._ascending)}catch{return cr(this,aa)}var m=f.reduce(function(y,k){return y?y.concat([[y[y.length-1][1],k]]):[[-1/0,k]]},null);return m.push([f[f.length-1],this.db._maxKey]),this.inAnyRange(m,{includeLowers:!1,includeUppers:!1})},En.prototype.inAnyRange=function(ue,m){var y=this,k=this._cmp,D=this._ascending,N=this._descending,B=this._min,Y=this._max;if(ue.length===0)return mo(this);if(!ue.every(function(fe){return fe[0]!==void 0&&fe[1]!==void 0&&D(fe[0],fe[1])<=0}))return cr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",me.InvalidArgument);var te=!m||m.includeLowers!==!1,$=m&&m.includeUppers===!0,z,R=D;function V(fe,le){return R(fe[0],le[0])}try{(z=ue.reduce(function(fe,le){for(var ve=0,Pe=fe.length;ve<Pe;++ve){var Oe=fe[ve];if(k(le[0],Oe[1])<0&&0<k(le[1],Oe[0])){Oe[0]=B(Oe[0],le[0]),Oe[1]=Y(Oe[1],le[1]);break}}return ve===Pe&&fe.push(le),fe},[])).sort(V)}catch{return cr(this,aa)}var K=0,J=$?function(fe){return 0<D(fe,z[K][1])}:function(fe){return 0<=D(fe,z[K][1])},ie=te?function(fe){return 0<N(fe,z[K][0])}:function(fe){return 0<=N(fe,z[K][0])},Q=J,ue=new this.Collection(this,function(){return sa(z[0][0],z[z.length-1][1],!te,!$)});return ue._ondirectionchange=function(fe){R=fe==="next"?(Q=J,D):(Q=ie,N),z.sort(V)},ue._addAlgorithm(function(fe,le,ve){for(var Pe,Oe=fe.key;Q(Oe);)if(++K===z.length)return le(ve),!1;return!J(Pe=Oe)&&!ie(Pe)||(y._cmp(Oe,z[K][1])===0||y._cmp(Oe,z[K][0])===0||le(function(){R===D?fe.continue(z[K][0]):fe.continue(z[K][1])}),!1)}),ue},En.prototype.startsWithAnyOf=function(){var f=G.apply(_e,arguments);return f.every(function(m){return typeof m=="string"})?f.length===0?mo(this):this.inAnyRange(f.map(function(m){return[m,m+Mi]})):cr(this,"startsWithAnyOf() only works with strings")},En);function En(){}function li(f){return dt(function(m){return vu(m),f(m.target.error),!1})}function vu(f){f.stopPropagation&&f.stopPropagation(),f.preventDefault&&f.preventDefault()}var gu="storagemutated",kf="x-storagemutated-1",ja=ho(null,gu),Cf=(Ii.prototype._lock=function(){return M(!Fe.global),++this._reculock,this._reculock!==1||Fe.global||(Fe.lockOwnerFor=this),this},Ii.prototype._unlock=function(){if(M(!Fe.global),--this._reculock==0)for(Fe.global||(Fe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var f=this._blockedFuncs.shift();try{fo(f[1],f[0])}catch{}}return this},Ii.prototype._locked=function(){return this._reculock&&Fe.lockOwnerFor!==this},Ii.prototype.create=function(f){var m=this;if(!this.mode)return this;var y=this.db.idbdb,k=this.db._state.dbOpenError;if(M(!this.idbtrans),!f&&!y)switch(k&&k.name){case"DatabaseClosedError":throw new me.DatabaseClosed(k);case"MissingAPIError":throw new me.MissingAPI(k.message,k);default:throw new me.OpenFailed(k)}if(!this.active)throw new me.TransactionInactive;return M(this._completion._state===null),(f=this.idbtrans=f||(this.db.core||y).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=dt(function(D){vu(D),m._reject(f.error)}),f.onabort=dt(function(D){vu(D),m.active&&m._reject(new me.Abort(f.error)),m.active=!1,m.on("abort").fire(D)}),f.oncomplete=dt(function(){m.active=!1,m._resolve(),"mutatedParts"in f&&ja.storagemutated.fire(f.mutatedParts)}),this},Ii.prototype._promise=function(f,m,y){var k=this;if(f==="readwrite"&&this.mode!=="readwrite")return Gt(new me.ReadOnly("Transaction is readonly"));if(!this.active)return Gt(new me.TransactionInactive);if(this._locked())return new Ne(function(N,B){k._blockedFuncs.push([function(){k._promise(f,m,y).then(N,B)},Fe])});if(y)return Wr(function(){var N=new Ne(function(B,Y){k._lock();var te=m(B,Y,k);te&&te.then&&te.then(B,Y)});return N.finally(function(){return k._unlock()}),N._lib=!0,N});var D=new Ne(function(N,B){var Y=m(N,B,k);Y&&Y.then&&Y.then(N,B)});return D._lib=!0,D},Ii.prototype._root=function(){return this.parent?this.parent._root():this},Ii.prototype.waitFor=function(f){var m,y=this._root(),k=Ne.resolve(f);y._waitingFor?y._waitingFor=y._waitingFor.then(function(){return k}):(y._waitingFor=k,y._waitingQueue=[],m=y.idbtrans.objectStore(y.storeNames[0]),function N(){for(++y._spinCount;y._waitingQueue.length;)y._waitingQueue.shift()();y._waitingFor&&(m.get(-1/0).onsuccess=N)}());var D=y._waitingFor;return new Ne(function(N,B){k.then(function(Y){return y._waitingQueue.push(dt(N.bind(null,Y)))},function(Y){return y._waitingQueue.push(dt(B.bind(null,Y)))}).finally(function(){y._waitingFor===D&&(y._waitingFor=null)})})},Ii.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new me.Abort))},Ii.prototype.table=function(f){var m=this._memoizedTables||(this._memoizedTables={});if(v(m,f))return m[f];var y=this.schema[f];if(!y)throw new me.NotFound("Table "+f+" not part of transaction");return y=new this.db.Table(f,y,this),y.core=this.db.core.table(f),m[f]=y},Ii);function Ii(){}function Df(f,m,y,k,D,N,B){return{name:f,keyPath:m,unique:y,multi:k,auto:D,compound:N,src:(y&&!B?"&":"")+(k?"*":"")+(D?"++":"")+pp(m)}}function pp(f){return typeof f=="string"?f:f?"["+[].join.call(f,"+")+"]":""}function Of(f,m,y){return{name:f,primKey:m,indexes:y,mappedClass:null,idxByName:(k=function(D){return[D.name,D]},y.reduce(function(D,N,B){return B=k(N,B),B&&(D[B[0]]=B[1]),D},{}))};var k}var yu=function(f){try{return f.only([[]]),yu=function(){return[[]]},[[]]}catch{return yu=function(){return Mi},Mi}};function Pt(f){return f==null?function(){}:typeof f=="string"?(m=f).split(".").length===1?function(y){return y[m]}:function(y){return U(y,m)}:function(y){return U(y,f)};var m}function kt(f){return[].slice.call(f)}var Zg=0;function wu(f){return f==null?":id":typeof f=="string"?f:"[".concat(f.join("+"),"]")}function ey(f,m,te){function k(Q){if(Q.type===3)return null;if(Q.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var K=Q.lower,J=Q.upper,ie=Q.lowerOpen,Q=Q.upperOpen;return K===void 0?J===void 0?null:m.upperBound(J,!!Q):J===void 0?m.lowerBound(K,!!ie):m.bound(K,J,!!ie,!!Q)}function D(V){var K,J=V.name;return{name:J,schema:V,mutate:function(ie){var Q=ie.trans,ue=ie.type,fe=ie.keys,le=ie.values,ve=ie.range;return new Promise(function(Pe,Oe){Pe=dt(Pe);var Ee=Q.objectStore(J),De=Ee.keyPath==null,be=ue==="put"||ue==="add";if(!be&&ue!=="delete"&&ue!=="deleteRange")throw new Error("Invalid operation type: "+ue);var Re,Ae=(fe||le||{length:1}).length;if(fe&&le&&fe.length!==le.length)throw new Error("Given keys array must have same length as given values array.");if(Ae===0)return Pe({numFailures:0,failures:{},results:[],lastResult:void 0});function Ze(Pn){++Pr,vu(Pn)}var at=[],ot=[],Pr=0;if(ue==="deleteRange"){if(ve.type===4)return Pe({numFailures:Pr,failures:ot,results:[],lastResult:void 0});ve.type===3?at.push(Re=Ee.clear()):at.push(Re=Ee.delete(k(ve)))}else{var De=be?De?[le,fe]:[le,null]:[fe,null],Je=De[0],Wt=De[1];if(be)for(var hn=0;hn<Ae;++hn)at.push(Re=Wt&&Wt[hn]!==void 0?Ee[ue](Je[hn],Wt[hn]):Ee[ue](Je[hn])),Re.onerror=Ze;else for(hn=0;hn<Ae;++hn)at.push(Re=Ee[ue](Je[hn])),Re.onerror=Ze}function $u(Pn){Pn=Pn.target.result,at.forEach(function(za,Hl){return za.error!=null&&(ot[Hl]=za.error)}),Pe({numFailures:Pr,failures:ot,results:ue==="delete"?fe:at.map(function(za){return za.result}),lastResult:Pn})}Re.onerror=function(Pn){Ze(Pn),$u(Pn)},Re.onsuccess=$u})},getMany:function(ie){var Q=ie.trans,ue=ie.keys;return new Promise(function(fe,le){fe=dt(fe);for(var ve,Pe=Q.objectStore(J),Oe=ue.length,Ee=new Array(Oe),De=0,be=0,Re=function(at){at=at.target,Ee[at._pos]=at.result,++be===De&&fe(Ee)},Ae=li(le),Ze=0;Ze<Oe;++Ze)ue[Ze]!=null&&((ve=Pe.get(ue[Ze]))._pos=Ze,ve.onsuccess=Re,ve.onerror=Ae,++De);De===0&&fe(Ee)})},get:function(ie){var Q=ie.trans,ue=ie.key;return new Promise(function(fe,le){fe=dt(fe);var ve=Q.objectStore(J).get(ue);ve.onsuccess=function(Pe){return fe(Pe.target.result)},ve.onerror=li(le)})},query:(K=$,function(ie){return new Promise(function(Q,ue){Q=dt(Q);var fe,le,ve,De=ie.trans,Pe=ie.values,Oe=ie.limit,Re=ie.query,Ee=Oe===1/0?void 0:Oe,be=Re.index,Re=Re.range,De=De.objectStore(J),be=be.isPrimaryKey?De:De.index(be.name),Re=k(Re);if(Oe===0)return Q({result:[]});K?((Ee=Pe?be.getAll(Re,Ee):be.getAllKeys(Re,Ee)).onsuccess=function(Ae){return Q({result:Ae.target.result})},Ee.onerror=li(ue)):(fe=0,le=!Pe&&"openKeyCursor"in be?be.openKeyCursor(Re):be.openCursor(Re),ve=[],le.onsuccess=function(Ae){var Ze=le.result;return Ze?(ve.push(Pe?Ze.value:Ze.primaryKey),++fe===Oe?Q({result:ve}):void Ze.continue()):Q({result:ve})},le.onerror=li(ue))})}),openCursor:function(ie){var Q=ie.trans,ue=ie.values,fe=ie.query,le=ie.reverse,ve=ie.unique;return new Promise(function(Pe,Oe){Pe=dt(Pe);var be=fe.index,Ee=fe.range,De=Q.objectStore(J),De=be.isPrimaryKey?De:De.index(be.name),be=le?ve?"prevunique":"prev":ve?"nextunique":"next",Re=!ue&&"openKeyCursor"in De?De.openKeyCursor(k(Ee),be):De.openCursor(k(Ee),be);Re.onerror=li(Oe),Re.onsuccess=dt(function(Ae){var Ze,at,ot,Pr,Je=Re.result;Je?(Je.___id=++Zg,Je.done=!1,Ze=Je.continue.bind(Je),at=(at=Je.continuePrimaryKey)&&at.bind(Je),ot=Je.advance.bind(Je),Pr=function(){throw new Error("Cursor not stopped")},Je.trans=Q,Je.stop=Je.continue=Je.continuePrimaryKey=Je.advance=function(){throw new Error("Cursor not started")},Je.fail=dt(Oe),Je.next=function(){var Wt=this,hn=1;return this.start(function(){return hn--?Wt.continue():Wt.stop()}).then(function(){return Wt})},Je.start=function(Wt){function hn(){if(Re.result)try{Wt()}catch(Pn){Je.fail(Pn)}else Je.done=!0,Je.start=function(){throw new Error("Cursor behind last entry")},Je.stop()}var $u=new Promise(function(Pn,za){Pn=dt(Pn),Re.onerror=li(za),Je.fail=za,Je.stop=function(Hl){Je.stop=Je.continue=Je.continuePrimaryKey=Je.advance=Pr,Pn(Hl)}});return Re.onsuccess=dt(function(Pn){Re.onsuccess=hn,hn()}),Je.continue=Ze,Je.continuePrimaryKey=at,Je.advance=ot,hn(),$u},Pe(Je)):Pe(null)},Oe)})},count:function(ie){var Q=ie.query,ue=ie.trans,fe=Q.index,le=Q.range;return new Promise(function(ve,Pe){var Oe=ue.objectStore(J),Ee=fe.isPrimaryKey?Oe:Oe.index(fe.name),Oe=k(le),Ee=Oe?Ee.count(Oe):Ee.count();Ee.onsuccess=dt(function(De){return ve(De.target.result)}),Ee.onerror=li(Pe)})}}}var N,B,Y,z=(B=te,Y=kt((N=f).objectStoreNames),{schema:{name:N.name,tables:Y.map(function(V){return B.objectStore(V)}).map(function(V){var K=V.keyPath,Q=V.autoIncrement,J=u(K),ie={},Q={name:V.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:K==null,compound:J,keyPath:K,autoIncrement:Q,unique:!0,extractKey:Pt(K)},indexes:kt(V.indexNames).map(function(ue){return V.index(ue)}).map(function(ve){var fe=ve.name,le=ve.unique,Pe=ve.multiEntry,ve=ve.keyPath,Pe={name:fe,compound:u(ve),keyPath:ve,unique:le,multiEntry:Pe,extractKey:Pt(ve)};return ie[wu(ve)]=Pe}),getIndexByKeyPath:function(ue){return ie[wu(ue)]}};return ie[":id"]=Q.primaryKey,K!=null&&(ie[wu(K)]=Q.primaryKey),Q})},hasGetAll:0<Y.length&&"getAll"in B.objectStore(Y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),te=z.schema,$=z.hasGetAll,z=te.tables.map(D),R={};return z.forEach(function(V){return R[V.name]=V}),{stack:"dbcore",transaction:f.transaction.bind(f),table:function(V){if(!R[V])throw new Error("Table '".concat(V,"' not found"));return R[V]},MIN_KEY:-1/0,MAX_KEY:yu(m),schema:te}}function ty(f,m,y,k){var D=y.IDBKeyRange;return y.indexedDB,{dbcore:(k=ey(m,D,k),f.dbcore.reduce(function(N,B){return B=B.create,r(r({},N),B(N))},k))}}function Ml(f,k){var y=k.db,k=ty(f._middlewares,y,f._deps,k);f.core=k.dbcore,f.tables.forEach(function(D){var N=D.name;f.core.schema.tables.some(function(B){return B.name===N})&&(D.core=f.core.table(N),f[N]instanceof f.Table&&(f[N].core=D.core))})}function Il(f,m,y,k){y.forEach(function(D){var N=k[D];m.forEach(function(B){var Y=function te($,z){return C($,z)||($=d($))&&te($,z)}(B,D);(!Y||"value"in Y&&Y.value===void 0)&&(B===f.Transaction.prototype||B instanceof f.Transaction?_(B,D,{get:function(){return this.table(D)},set:function(te){w(this,D,{value:te,writable:!0,configurable:!0,enumerable:!0})}}):B[D]=new f.Table(D,N))})})}function Al(f,m){m.forEach(function(y){for(var k in y)y[k]instanceof f.Table&&delete y[k]})}function ny(f,m){return f._cfg.version-m._cfg.version}function Rn(f,m,y,k){var D=f._dbSchema;y.objectStoreNames.contains("$meta")&&!D.$meta&&(D.$meta=Of("$meta",Rf("")[0],[]),f._storeNames.push("$meta"));var N=f._createTransaction("readwrite",f._storeNames,D);N.create(y),N._completion.catch(k);var B=N._reject.bind(N),Y=Fe.transless||Fe;Wr(function(){return Fe.trans=N,Fe.transless=Y,m!==0?(Ml(f,y),$=m,((te=N).storeNames.includes("$meta")?te.table("$meta").get("version").then(function(z){return z??$}):Ne.resolve($)).then(function(z){return V=z,K=N,J=y,ie=[],z=(R=f)._versions,Q=R._dbSchema=_u(0,R.idbdb,J),(z=z.filter(function(ue){return ue._cfg.version>=V})).length!==0?(z.forEach(function(ue){ie.push(function(){var fe=Q,le=ue._cfg.dbschema;bu(R,fe,J),bu(R,le,J),Q=R._dbSchema=le;var ve=ua(fe,le);ve.add.forEach(function(be){jl(J,be[0],be[1].primKey,be[1].indexes)}),ve.change.forEach(function(be){if(be.recreate)throw new me.Upgrade("Not yet support for changing primary key");var Re=J.objectStore(be.name);be.add.forEach(function(Ae){return Jn(Re,Ae)}),be.change.forEach(function(Ae){Re.deleteIndex(Ae.name),Jn(Re,Ae)}),be.del.forEach(function(Ae){return Re.deleteIndex(Ae)})});var Pe=ue._cfg.contentUpgrade;if(Pe&&ue._cfg.version>V){Ml(R,J),K._memoizedTables={};var Oe=re(le);ve.del.forEach(function(be){Oe[be]=fe[be]}),Al(R,[R.Transaction.prototype]),Il(R,[R.Transaction.prototype],s(Oe),Oe),K.schema=Oe;var Ee,De=F(Pe);return De&&Jo(),ve=Ne.follow(function(){var be;(Ee=Pe(K))&&De&&(be=Ma.bind(null,null),Ee.then(be,be))}),Ee&&typeof Ee.then=="function"?Ne.resolve(Ee):ve.then(function(){return Ee})}}),ie.push(function(fe){var le,ve,Pe=ue._cfg.dbschema;le=Pe,ve=fe,[].slice.call(ve.db.objectStoreNames).forEach(function(Oe){return le[Oe]==null&&ve.db.deleteObjectStore(Oe)}),Al(R,[R.Transaction.prototype]),Il(R,[R.Transaction.prototype],R._storeNames,R._dbSchema),K.schema=R._dbSchema}),ie.push(function(fe){R.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(R.idbdb.version/10)===ue._cfg.version?(R.idbdb.deleteObjectStore("$meta"),delete R._dbSchema.$meta,R._storeNames=R._storeNames.filter(function(le){return le!=="$meta"})):fe.objectStore("$meta").put(ue._cfg.version,"version"))})}),function ue(){return ie.length?Ne.resolve(ie.shift()(K.idbtrans)).then(ue):Ne.resolve()}().then(function(){Ll(Q,J)})):Ne.resolve();var R,V,K,J,ie,Q}).catch(B)):(s(D).forEach(function(z){jl(y,z,D[z].primKey,D[z].indexes)}),Ml(f,y),void Ne.follow(function(){return f.on.populate.fire(N)}).catch(B));var te,$})}function $f(f,m){Ll(f._dbSchema,m),m.db.version%10!=0||m.objectStoreNames.contains("$meta")||m.db.createObjectStore("$meta").add(Math.ceil(m.db.version/10-1),"version");var y=_u(0,f.idbdb,m);bu(f,f._dbSchema,m);for(var k=0,D=ua(y,f._dbSchema).change;k<D.length;k++){var N=function(B){if(B.change.length||B.recreate)return console.warn("Unable to patch indexes of table ".concat(B.name," because it has changes on the type of index or primary key.")),{value:void 0};var Y=m.objectStore(B.name);B.add.forEach(function(te){_t&&console.debug("Dexie upgrade patch: Creating missing index ".concat(B.name,".").concat(te.src)),Jn(Y,te)})}(D[k]);if(typeof N=="object")return N.value}}function ua(f,m){var y,k={del:[],add:[],change:[]};for(y in f)m[y]||k.del.push(y);for(y in m){var D=f[y],N=m[y];if(D){var B={name:y,def:N,recreate:!1,del:[],add:[],change:[]};if(""+(D.primKey.keyPath||"")!=""+(N.primKey.keyPath||"")||D.primKey.auto!==N.primKey.auto)B.recreate=!0,k.change.push(B);else{var Y=D.idxByName,te=N.idxByName,$=void 0;for($ in Y)te[$]||B.del.push($);for($ in te){var z=Y[$],R=te[$];z?z.src!==R.src&&B.change.push(R):B.add.push(R)}(0<B.del.length||0<B.add.length||0<B.change.length)&&k.change.push(B)}}else k.add.push([y,N])}return k}function jl(f,m,y,k){var D=f.db.createObjectStore(m,y.keyPath?{keyPath:y.keyPath,autoIncrement:y.auto}:{autoIncrement:y.auto});return k.forEach(function(N){return Jn(D,N)}),D}function Ll(f,m){s(f).forEach(function(y){m.db.objectStoreNames.contains(y)||(_t&&console.debug("Dexie: Creating missing table",y),jl(m,y,f[y].primKey,f[y].indexes))})}function Jn(f,m){f.createIndex(m.name,m.keyPath,{unique:m.unique,multiEntry:m.multi})}function _u(f,m,y){var k={};return S(m.objectStoreNames,0).forEach(function(D){for(var N=y.objectStore(D),B=Df(pp($=N.keyPath),$||"",!0,!1,!!N.autoIncrement,$&&typeof $!="string",!0),Y=[],te=0;te<N.indexNames.length;++te){var z=N.index(N.indexNames[te]),$=z.keyPath,z=Df(z.name,$,!!z.unique,!!z.multiEntry,!1,$&&typeof $!="string",!1);Y.push(z)}k[D]=Of(D,B,Y)}),k}function bu(f,m,y){for(var k=y.db.objectStoreNames,D=0;D<k.length;++D){var N=k[D],B=y.objectStore(N);f._hasGetAll="getAll"in B;for(var Y=0;Y<B.indexNames.length;++Y){var te=B.indexNames[Y],$=B.index(te).keyPath,z=typeof $=="string"?$:"["+S($).join("+")+"]";!m[N]||($=m[N].idxByName[z])&&($.name=te,delete m[N].idxByName[z],m[N].idxByName[te]=$)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f._hasGetAll=!1)}function Rf(f){return f.split(",").map(function(m,y){var k=(m=m.trim()).replace(/([&*]|\+\+)/g,""),D=/^\[/.test(k)?k.match(/^\[(.*)\]$/)[1].split("+"):k;return Df(k,D||null,/\&/.test(m),/\*/.test(m),/\+\+/.test(m),u(D),y===0)})}var mp=(Su.prototype._parseStoresSpec=function(f,m){s(f).forEach(function(y){if(f[y]!==null){var k=Rf(f[y]),D=k.shift();if(D.unique=!0,D.multi)throw new me.Schema("Primary key cannot be multi-valued");k.forEach(function(N){if(N.auto)throw new me.Schema("Only primary key can be marked as autoIncrement (++)");if(!N.keyPath)throw new me.Schema("Index must have a name and cannot be an empty string")}),m[y]=Of(y,D,k)}})},Su.prototype.stores=function(y){var m=this.db;this._cfg.storesSource=this._cfg.storesSource?c(this._cfg.storesSource,y):y;var y=m._versions,k={},D={};return y.forEach(function(N){c(k,N._cfg.storesSource),D=N._cfg.dbschema={},N._parseStoresSpec(k,D)}),m._dbSchema=D,Al(m,[m._allTables,m,m.Transaction.prototype]),Il(m,[m._allTables,m,m.Transaction.prototype,this._cfg.tables],s(D),D),m._storeNames=s(D),this},Su.prototype.upgrade=function(f){return this._cfg.contentUpgrade=sn(this._cfg.contentUpgrade||Ke,f),this},Su);function Su(){}function zl(f,m){var y=f._dbNamesDB;return y||(y=f._dbNamesDB=new fa(kl,{addons:[],indexedDB:f,IDBKeyRange:m})).version(1).stores({dbnames:"name"}),y.table("dbnames")}function Zn(f){return f&&typeof f.databases=="function"}function Nf(f){return Wr(function(){return Fe.letThrough=!0,f()})}function fr(f){return!("from"in f)}var Fn=function(f,m){if(!this){var y=new Fn;return f&&"d"in f&&c(y,f),y}c(this,arguments.length?{d:1,from:f,to:1<arguments.length?m:f}:{d:0})};function ns(f,m,y){var k=ht(m,y);if(!isNaN(k)){if(0<k)throw RangeError();if(fr(f))return c(f,{from:m,to:y,d:1});var D=f.l,k=f.r;if(ht(y,f.from)<0)return D?ns(D,m,y):f.l={from:m,to:y,d:1,l:null,r:null},jt(f);if(0<ht(m,f.to))return k?ns(k,m,y):f.r={from:m,to:y,d:1,l:null,r:null},jt(f);ht(m,f.from)<0&&(f.from=m,f.l=null,f.d=k?k.d+1:1),0<ht(y,f.to)&&(f.to=y,f.r=null,f.d=f.l?f.l.d+1:1),y=!f.r,D&&!f.l&&Ur(f,D),k&&y&&Ur(f,k)}}function Ur(f,m){fr(m)||function y(k,te){var N=te.from,B=te.to,Y=te.l,te=te.r;ns(k,N,B),Y&&y(k,Y),te&&y(k,te)}(f,m)}function xu(f,m){var y=rs(m),k=y.next();if(k.done)return!1;for(var D=k.value,N=rs(f),B=N.next(D.from),Y=B.value;!k.done&&!B.done;){if(ht(Y.from,D.to)<=0&&0<=ht(Y.to,D.from))return!0;ht(D.from,Y.from)<0?D=(k=y.next(Y.from)).value:Y=(B=N.next(D.from)).value}return!1}function rs(f){var m=fr(f)?null:{s:0,n:f};return{next:function(y){for(var k=0<arguments.length;m;)switch(m.s){case 0:if(m.s=1,k)for(;m.n.l&&ht(y,m.n.from)<0;)m={up:m,n:m.n.l,s:1};else for(;m.n.l;)m={up:m,n:m.n.l,s:1};case 1:if(m.s=2,!k||ht(y,m.n.to)<=0)return{value:m.n,done:!1};case 2:if(m.n.r){m.s=3,m={up:m,n:m.n.r,s:0};continue}case 3:m=m.up}return{done:!0}}}}function jt(f){var m,y,k=(((m=f.r)===null||m===void 0?void 0:m.d)||0)-(((y=f.l)===null||y===void 0?void 0:y.d)||0),D=1<k?"r":k<-1?"l":"";D&&(m=D=="r"?"l":"r",y=r({},f),k=f[D],f.from=k.from,f.to=k.to,f[D]=k[D],y[D]=k[m],(f[m]=y).d=la(y)),f.d=la(f)}function la(y){var m=y.r,y=y.l;return(m?y?Math.max(m.d,y.d):m.d:y?y.d:0)+1}function is(f,m){return s(m).forEach(function(y){f[y]?Ur(f[y],m[y]):f[y]=function k(D){var N,B,Y={};for(N in D)v(D,N)&&(B=D[N],Y[N]=!B||typeof B!="object"||ce.has(B.constructor)?B:k(B));return Y}(m[y])}),f}function Tf(f,m){return f.all||m.all||Object.keys(f).some(function(y){return m[y]&&xu(m[y],f[y])})}g(Fn.prototype,((Hr={add:function(f){return Ur(this,f),this},addKey:function(f){return ns(this,f,f),this},addKeys:function(f){var m=this;return f.forEach(function(y){return ns(m,y,y)}),this},hasKey:function(f){var m=rs(this).next(f).value;return m&&ht(m.from,f)<=0&&0<=ht(m.to,f)}})[qe]=function(){return rs(this)},Hr));var ca={},Mf={},If=!1;function Fl(f){is(Mf,f),If||(If=!0,setTimeout(function(){If=!1,Bl(Mf,!(Mf={}))},0))}function Bl(f,m){m===void 0&&(m=!1);var y=new Set;if(f.all)for(var k=0,D=Object.values(ca);k<D.length;k++)Eu(B=D[k],f,y,m);else for(var N in f){var B,Y=/^idb\:\/\/(.*)\/(.*)\//.exec(N);Y&&(N=Y[1],Y=Y[2],(B=ca["idb://".concat(N,"/").concat(Y)])&&Eu(B,f,y,m))}y.forEach(function(te){return te()})}function Eu(f,m,y,k){for(var D=[],N=0,B=Object.entries(f.queries.query);N<B.length;N++){for(var Y=B[N],te=Y[0],$=[],z=0,R=Y[1];z<R.length;z++){var V=R[z];Tf(m,V.obsSet)?V.subscribers.forEach(function(Q){return y.add(Q)}):k&&$.push(V)}k&&D.push([te,$])}if(k)for(var K=0,J=D;K<J.length;K++){var ie=J[K],te=ie[0],$=ie[1];f.queries.query[te]=$}}function as(f){var m=f._state,y=f._deps.indexedDB;if(m.isBeingOpened||f.idbdb)return m.dbReadyPromise.then(function(){return m.dbOpenError?Gt(m.dbOpenError):f});m.isBeingOpened=!0,m.dbOpenError=null,m.openComplete=!1;var k=m.openCanceller,D=Math.round(10*f.verno),N=!1;function B(){if(m.openCanceller!==k)throw new me.DatabaseClosed("db.open() was cancelled")}function Y(){return new Ne(function(V,K){if(B(),!y)throw new me.MissingAPI;var J=f.name,ie=m.autoSchema||!D?y.open(J):y.open(J,D);if(!ie)throw new me.MissingAPI;ie.onerror=li(K),ie.onblocked=dt(f._fireOnBlocked),ie.onupgradeneeded=dt(function(Q){var ue;z=ie.transaction,m.autoSchema&&!f._options.allowEmptyDB?(ie.onerror=vu,z.abort(),ie.result.close(),(ue=y.deleteDatabase(J)).onsuccess=ue.onerror=dt(function(){K(new me.NoSuchDatabase("Database ".concat(J," doesnt exist")))})):(z.onerror=li(K),Q=Q.oldVersion>Math.pow(2,62)?0:Q.oldVersion,R=Q<1,f.idbdb=ie.result,N&&$f(f,z),Rn(f,Q/10,z,K))},K),ie.onsuccess=dt(function(){z=null;var Q,ue,fe,le,ve,Pe=f.idbdb=ie.result,Oe=S(Pe.objectStoreNames);if(0<Oe.length)try{var Ee=Pe.transaction((le=Oe).length===1?le[0]:le,"readonly");if(m.autoSchema)ue=Pe,fe=Ee,(Q=f).verno=ue.version/10,fe=Q._dbSchema=_u(0,ue,fe),Q._storeNames=S(ue.objectStoreNames,0),Il(Q,[Q._allTables],s(fe),fe);else if(bu(f,f._dbSchema,Ee),((ve=ua(_u(0,(ve=f).idbdb,Ee),ve._dbSchema)).add.length||ve.change.some(function(De){return De.add.length||De.change.length}))&&!N)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Pe.close(),D=Pe.version+1,N=!0,V(Y());Ml(f,Ee)}catch{}Zo.push(f),Pe.onversionchange=dt(function(De){m.vcFired=!0,f.on("versionchange").fire(De)}),Pe.onclose=dt(function(De){f.on("close").fire(De)}),R&&(ve=f._deps,Ee=J,Pe=ve.indexedDB,ve=ve.IDBKeyRange,Zn(Pe)||Ee===kl||zl(Pe,ve).put({name:Ee}).catch(Ke)),V()},K)}).catch(function(V){switch(V==null?void 0:V.name){case"UnknownError":if(0<m.PR1398_maxLoop)return m.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Y();break;case"VersionError":if(0<D)return D=0,Y()}return Ne.reject(V)})}var te,$=m.dbReadyResolve,z=null,R=!1;return Ne.race([k,(typeof navigator>"u"?Ne.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(V){function K(){return indexedDB.databases().finally(V)}te=setInterval(K,100),K()}).finally(function(){return clearInterval(te)}):Promise.resolve()).then(Y)]).then(function(){return B(),m.onReadyBeingFired=[],Ne.resolve(Nf(function(){return f.on.ready.fire(f.vip)})).then(function V(){if(0<m.onReadyBeingFired.length){var K=m.onReadyBeingFired.reduce(sn,Ke);return m.onReadyBeingFired=[],Ne.resolve(Nf(function(){return K(f.vip)})).then(V)}})}).finally(function(){m.openCanceller===k&&(m.onReadyBeingFired=null,m.isBeingOpened=!1)}).catch(function(V){m.dbOpenError=V;try{z&&z.abort()}catch{}return k===m.openCanceller&&f._close(),Gt(V)}).finally(function(){m.openComplete=!0,$()}).then(function(){var V;return R&&(V={},f.tables.forEach(function(K){K.schema.indexes.forEach(function(J){J.name&&(V["idb://".concat(f.name,"/").concat(K.name,"/").concat(J.name)]=new Fn(-1/0,[[[]]]))}),V["idb://".concat(f.name,"/").concat(K.name,"/")]=V["idb://".concat(f.name,"/").concat(K.name,"/:dels")]=new Fn(-1/0,[[[]]])}),ja(gu).fire(V),Bl(V,!0)),f})}function Af(f){function m(N){return f.next(N)}var y=D(m),k=D(function(N){return f.throw(N)});function D(N){return function(te){var Y=N(te),te=Y.value;return Y.done?te:te&&typeof te.then=="function"?te.then(y,k):u(te)?Promise.all(te).then(y,k):y(te)}}return D(m)()}function Pu(f,m,y){for(var k=u(f)?f.slice():[f],D=0;D<y;++D)k.push(m);return k}var vp={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(f){return r(r({},f),{table:function(m){var y=f.table(m),k=y.schema,D={},N=[];function B(R,V,K){var J=wu(R),ie=D[J]=D[J]||[],Q=R==null?0:typeof R=="string"?1:R.length,ue=0<V,ue=r(r({},K),{name:ue?"".concat(J,"(virtual-from:").concat(K.name,")"):K.name,lowLevelIndex:K,isVirtual:ue,keyTail:V,keyLength:Q,extractKey:Pt(R),unique:!ue&&K.unique});return ie.push(ue),ue.isPrimaryKey||N.push(ue),1<Q&&B(Q===2?R[0]:R.slice(0,Q-1),V+1,K),ie.sort(function(fe,le){return fe.keyTail-le.keyTail}),ue}m=B(k.primaryKey.keyPath,0,k.primaryKey),D[":id"]=[m];for(var Y=0,te=k.indexes;Y<te.length;Y++){var $=te[Y];B($.keyPath,0,$)}function z(R){var V,K=R.query.index;return K.isVirtual?r(r({},R),{query:{index:K.lowLevelIndex,range:(V=R.query.range,K=K.keyTail,{type:V.type===1?2:V.type,lower:Pu(V.lower,V.lowerOpen?f.MAX_KEY:f.MIN_KEY,K),lowerOpen:!0,upper:Pu(V.upper,V.upperOpen?f.MIN_KEY:f.MAX_KEY,K),upperOpen:!0})}}):R}return r(r({},y),{schema:r(r({},k),{primaryKey:m,indexes:N,getIndexByKeyPath:function(R){return(R=D[wu(R)])&&R[0]}}),count:function(R){return y.count(z(R))},query:function(R){return y.query(z(R))},openCursor:function(R){var V=R.query.index,K=V.keyTail,J=V.isVirtual,ie=V.keyLength;return J?y.openCursor(z(R)).then(function(ue){return ue&&Q(ue)}):y.openCursor(R);function Q(ue){return Object.create(ue,{continue:{value:function(fe){fe!=null?ue.continue(Pu(fe,R.reverse?f.MAX_KEY:f.MIN_KEY,K)):R.unique?ue.continue(ue.key.slice(0,ie).concat(R.reverse?f.MIN_KEY:f.MAX_KEY,K)):ue.continue()}},continuePrimaryKey:{value:function(fe,le){ue.continuePrimaryKey(Pu(fe,f.MAX_KEY,K),le)}},primaryKey:{get:function(){return ue.primaryKey}},key:{get:function(){var fe=ue.key;return ie===1?fe[0]:fe.slice(0,ie)}},value:{get:function(){return ue.value}}})}}})}})}};function ku(f,m,y,k){return y=y||{},k=k||"",s(f).forEach(function(D){var N,B,Y;v(m,D)?(N=f[D],B=m[D],typeof N=="object"&&typeof B=="object"&&N&&B?(Y=Le(N))!==Le(B)?y[k+D]=m[D]:Y==="Object"?ku(N,B,y,k+D+"."):N!==B&&(y[k+D]=m[D]):N!==B&&(y[k+D]=m[D])):y[k+D]=void 0}),s(m).forEach(function(D){v(f,D)||(y[k+D]=m[D])}),y}function Cu(f,m){return m.type==="delete"?m.keys:m.keys||m.values.map(f.extractKey)}var gp={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(f){return r(r({},f),{table:function(m){var y=f.table(m),k=y.schema.primaryKey;return r(r({},y),{mutate:function(D){var N=Fe.trans,B=N.table(m).hook,Y=B.deleting,te=B.creating,$=B.updating;switch(D.type){case"add":if(te.fire===Ke)break;return N._promise("readwrite",function(){return z(D)},!0);case"put":if(te.fire===Ke&&$.fire===Ke)break;return N._promise("readwrite",function(){return z(D)},!0);case"delete":if(Y.fire===Ke)break;return N._promise("readwrite",function(){return z(D)},!0);case"deleteRange":if(Y.fire===Ke)break;return N._promise("readwrite",function(){return function R(V,K,J){return y.query({trans:V,values:!1,query:{index:k,range:K},limit:J}).then(function(ie){var Q=ie.result;return z({type:"delete",keys:Q,trans:V}).then(function(ue){return 0<ue.numFailures?Promise.reject(ue.failures[0]):Q.length<J?{failures:[],numFailures:0,lastResult:void 0}:R(V,r(r({},K),{lower:Q[Q.length-1],lowerOpen:!0}),J)})})}(D.trans,D.range,1e4)},!0)}return y.mutate(D);function z(R){var V,K,J,ie=Fe.trans,Q=R.keys||Cu(k,R);if(!Q)throw new Error("Keys missing");return(R=R.type==="add"||R.type==="put"?r(r({},R),{keys:Q}):r({},R)).type!=="delete"&&(R.values=i([],R.values,!0)),R.keys&&(R.keys=i([],R.keys,!0)),V=y,J=Q,((K=R).type==="add"?Promise.resolve([]):V.getMany({trans:K.trans,keys:J,cache:"immutable"})).then(function(ue){var fe=Q.map(function(le,ve){var Pe,Oe,Ee,De=ue[ve],be={onerror:null,onsuccess:null};return R.type==="delete"?Y.fire.call(be,le,De,ie):R.type==="add"||De===void 0?(Pe=te.fire.call(be,le,R.values[ve],ie),le==null&&Pe!=null&&(R.keys[ve]=le=Pe,k.outbound||W(R.values[ve],k.keyPath,le))):(Pe=ku(De,R.values[ve]),(Oe=$.fire.call(be,Pe,le,De,ie))&&(Ee=R.values[ve],Object.keys(Oe).forEach(function(Re){v(Ee,Re)?Ee[Re]=Oe[Re]:W(Ee,Re,Oe[Re])}))),be});return y.mutate(R).then(function(le){for(var ve=le.failures,Pe=le.results,Oe=le.numFailures,le=le.lastResult,Ee=0;Ee<Q.length;++Ee){var De=(Pe||Q)[Ee],be=fe[Ee];De==null?be.onerror&&be.onerror(ve[Ee]):be.onsuccess&&be.onsuccess(R.type==="put"&&ue[Ee]?R.values[Ee]:De)}return{failures:ve,results:Pe,numFailures:Oe,lastResult:le}}).catch(function(le){return fe.forEach(function(ve){return ve.onerror&&ve.onerror(le)}),Promise.reject(le)})})}}})}})}};function yp(f,m,y){try{if(!m||m.keys.length<f.length)return null;for(var k=[],D=0,N=0;D<m.keys.length&&N<f.length;++D)ht(m.keys[D],f[N])===0&&(k.push(y?xe(m.values[D]):m.values[D]),++N);return k.length===f.length?k:null}catch{return null}}var jf={stack:"dbcore",level:-1,create:function(f){return{table:function(m){var y=f.table(m);return r(r({},y),{getMany:function(k){if(!k.cache)return y.getMany(k);var D=yp(k.keys,k.trans._cache,k.cache==="clone");return D?Ne.resolve(D):y.getMany(k).then(function(N){return k.trans._cache={keys:k.keys,values:k.cache==="clone"?xe(N):N},N})},mutate:function(k){return k.type!=="add"&&(k.trans._cache=null),y.mutate(k)}})}}}};function Wl(f,m){return f.trans.mode==="readonly"&&!!f.subscr&&!f.trans.explicit&&f.trans.db._options.cache!=="disabled"&&!m.schema.primaryKey.outbound}function wp(f,m){switch(f){case"query":return m.values&&!m.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var _p={stack:"dbcore",level:0,name:"Observability",create:function(f){var m=f.schema.name,y=new Fn(f.MIN_KEY,f.MAX_KEY);return r(r({},f),{transaction:function(k,D,N){if(Fe.subscr&&D!=="readonly")throw new me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Fe.querier));return f.transaction(k,D,N)},table:function(k){var D=f.table(k),N=D.schema,B=N.primaryKey,R=N.indexes,Y=B.extractKey,te=B.outbound,$=B.autoIncrement&&R.filter(function(K){return K.compound&&K.keyPath.includes(B.keyPath)}),z=r(r({},D),{mutate:function(K){function J(Re){return Re="idb://".concat(m,"/").concat(k,"/").concat(Re),le[Re]||(le[Re]=new Fn)}var ie,Q,ue,fe=K.trans,le=K.mutatedParts||(K.mutatedParts={}),ve=J(""),Pe=J(":dels"),Oe=K.type,be=K.type==="deleteRange"?[K.range]:K.type==="delete"?[K.keys]:K.values.length<50?[Cu(B,K).filter(function(Re){return Re}),K.values]:[],Ee=be[0],De=be[1],be=K.trans._cache;return u(Ee)?(ve.addKeys(Ee),(be=Oe==="delete"||Ee.length===De.length?yp(Ee,be):null)||Pe.addKeys(Ee),(be||De)&&(ie=J,Q=be,ue=De,N.indexes.forEach(function(Re){var Ae=ie(Re.name||"");function Ze(ot){return ot!=null?Re.extractKey(ot):null}function at(ot){return Re.multiEntry&&u(ot)?ot.forEach(function(Pr){return Ae.addKey(Pr)}):Ae.addKey(ot)}(Q||ue).forEach(function(ot,Wt){var Je=Q&&Ze(Q[Wt]),Wt=ue&&Ze(ue[Wt]);ht(Je,Wt)!==0&&(Je!=null&&at(Je),Wt!=null&&at(Wt))})}))):Ee?(De={from:(De=Ee.lower)!==null&&De!==void 0?De:f.MIN_KEY,to:(De=Ee.upper)!==null&&De!==void 0?De:f.MAX_KEY},Pe.add(De),ve.add(De)):(ve.add(y),Pe.add(y),N.indexes.forEach(function(Re){return J(Re.name).add(y)})),D.mutate(K).then(function(Re){return!Ee||K.type!=="add"&&K.type!=="put"||(ve.addKeys(Re.results),$&&$.forEach(function(Ae){for(var Ze=K.values.map(function(Je){return Ae.extractKey(Je)}),at=Ae.keyPath.findIndex(function(Je){return Je===B.keyPath}),ot=0,Pr=Re.results.length;ot<Pr;++ot)Ze[ot][at]=Re.results[ot];J(Ae.name).addKeys(Ze)})),fe.mutatedParts=is(fe.mutatedParts||{},le),Re})}}),R=function(J){var ie=J.query,J=ie.index,ie=ie.range;return[J,new Fn((J=ie.lower)!==null&&J!==void 0?J:f.MIN_KEY,(ie=ie.upper)!==null&&ie!==void 0?ie:f.MAX_KEY)]},V={get:function(K){return[B,new Fn(K.key)]},getMany:function(K){return[B,new Fn().addKeys(K.keys)]},count:R,query:R,openCursor:R};return s(V).forEach(function(K){z[K]=function(J){var ie=Fe.subscr,Q=!!ie,ue=Wl(Fe,D)&&wp(K,J)?J.obsSet={}:ie;if(Q){var fe=function(De){return De="idb://".concat(m,"/").concat(k,"/").concat(De),ue[De]||(ue[De]=new Fn)},le=fe(""),ve=fe(":dels"),ie=V[K](J),Q=ie[0],ie=ie[1];if((K==="query"&&Q.isPrimaryKey&&!J.values?ve:fe(Q.name||"")).add(ie),!Q.isPrimaryKey){if(K!=="count"){var Pe=K==="query"&&te&&J.values&&D.query(r(r({},J),{values:!1}));return D[K].apply(this,arguments).then(function(De){if(K==="query"){if(te&&J.values)return Pe.then(function(Ze){return Ze=Ze.result,le.addKeys(Ze),De});var be=J.values?De.result.map(Y):De.result;(J.values?le:ve).addKeys(be)}else if(K==="openCursor"){var Re=De,Ae=J.values;return Re&&Object.create(Re,{key:{get:function(){return ve.addKey(Re.primaryKey),Re.key}},primaryKey:{get:function(){var Ze=Re.primaryKey;return ve.addKey(Ze),Ze}},value:{get:function(){return Ae&&le.addKey(Re.primaryKey),Re.value}}})}return De})}ve.add(y)}}return D[K].apply(this,arguments)}}),z}})}};function dr(f,m,y){if(y.numFailures===0)return m;if(m.type==="deleteRange")return null;var k=m.keys?m.keys.length:"values"in m&&m.values?m.values.length:1;return y.numFailures===k?null:(m=r({},m),u(m.keys)&&(m.keys=m.keys.filter(function(D,N){return!(N in y.failures)})),"values"in m&&u(m.values)&&(m.values=m.values.filter(function(D,N){return!(N in y.failures)})),m)}function Du(f,m){return y=f,((k=m).lower===void 0||(k.lowerOpen?0<ht(y,k.lower):0<=ht(y,k.lower)))&&(f=f,(m=m).upper===void 0||(m.upperOpen?ht(f,m.upper)<0:ht(f,m.upper)<=0));var y,k}function os(f,m,V,k,D,N){if(!V||V.length===0)return f;var B=m.query.index,Y=B.multiEntry,te=m.query.range,$=k.schema.primaryKey.extractKey,z=B.extractKey,R=(B.lowLevelIndex||B).extractKey,V=V.reduce(function(K,J){var ie=K,Q=[];if(J.type==="add"||J.type==="put")for(var ue=new Fn,fe=J.values.length-1;0<=fe;--fe){var le,ve=J.values[fe],Pe=$(ve);ue.hasKey(Pe)||(le=z(ve),(Y&&u(le)?le.some(function(Re){return Du(Re,te)}):Du(le,te))&&(ue.addKey(Pe),Q.push(ve)))}switch(J.type){case"add":var Oe=new Fn().addKeys(m.values?K.map(function(Ae){return $(Ae)}):K),ie=K.concat(m.values?Q.filter(function(Ae){return Ae=$(Ae),!Oe.hasKey(Ae)&&(Oe.addKey(Ae),!0)}):Q.map(function(Ae){return $(Ae)}).filter(function(Ae){return!Oe.hasKey(Ae)&&(Oe.addKey(Ae),!0)}));break;case"put":var Ee=new Fn().addKeys(J.values.map(function(Ae){return $(Ae)}));ie=K.filter(function(Ae){return!Ee.hasKey(m.values?$(Ae):Ae)}).concat(m.values?Q:Q.map(function(Ae){return $(Ae)}));break;case"delete":var De=new Fn().addKeys(J.keys);ie=K.filter(function(Ae){return!De.hasKey(m.values?$(Ae):Ae)});break;case"deleteRange":var be=J.range;ie=K.filter(function(Ae){return!Du($(Ae),be)})}return ie},f);return V===f?f:(V.sort(function(K,J){return ht(R(K),R(J))||ht($(K),$(J))}),m.limit&&m.limit<1/0&&(V.length>m.limit?V.length=m.limit:f.length===m.limit&&V.length<m.limit&&(D.dirty=!0)),N?Object.freeze(V):V)}function Lf(f,m){return ht(f.lower,m.lower)===0&&ht(f.upper,m.upper)===0&&!!f.lowerOpen==!!m.lowerOpen&&!!f.upperOpen==!!m.upperOpen}function bp(f,m){return function(y,k,D,N){if(y===void 0)return k!==void 0?-1:0;if(k===void 0)return 1;if((k=ht(y,k))===0){if(D&&N)return 0;if(D)return 1;if(N)return-1}return k}(f.lower,m.lower,f.lowerOpen,m.lowerOpen)<=0&&0<=function(y,k,D,N){if(y===void 0)return k!==void 0?1:0;if(k===void 0)return-1;if((k=ht(y,k))===0){if(D&&N)return 0;if(D)return-1;if(N)return 1}return k}(f.upper,m.upper,f.upperOpen,m.upperOpen)}function ry(f,m,y,k){f.subscribers.add(y),k.addEventListener("abort",function(){var D,N;f.subscribers.delete(y),f.subscribers.size===0&&(D=f,N=m,setTimeout(function(){D.subscribers.size===0&&oe(N,D)},3e3))})}var iy={stack:"dbcore",level:0,name:"Cache",create:function(f){var m=f.schema.name;return r(r({},f),{transaction:function(y,k,D){var N,B,Y=f.transaction(y,k,D);return k==="readwrite"&&(B=(N=new AbortController).signal,D=function(te){return function(){if(N.abort(),k==="readwrite"){for(var $=new Set,z=0,R=y;z<R.length;z++){var V=R[z],K=ca["idb://".concat(m,"/").concat(V)];if(K){var J=f.table(V),ie=K.optimisticOps.filter(function(Ae){return Ae.trans===Y});if(Y._explicit&&te&&Y.mutatedParts)for(var Q=0,ue=Object.values(K.queries.query);Q<ue.length;Q++)for(var fe=0,le=(Oe=ue[Q]).slice();fe<le.length;fe++)Tf((Ee=le[fe]).obsSet,Y.mutatedParts)&&(oe(Oe,Ee),Ee.subscribers.forEach(function(Ae){return $.add(Ae)}));else if(0<ie.length){K.optimisticOps=K.optimisticOps.filter(function(Ae){return Ae.trans!==Y});for(var ve=0,Pe=Object.values(K.queries.query);ve<Pe.length;ve++)for(var Oe,Ee,De,be=0,Re=(Oe=Pe[ve]).slice();be<Re.length;be++)(Ee=Re[be]).res!=null&&Y.mutatedParts&&(te&&!Ee.dirty?(De=Object.isFrozen(Ee.res),De=os(Ee.res,Ee.req,ie,J,Ee,De),Ee.dirty?(oe(Oe,Ee),Ee.subscribers.forEach(function(Ae){return $.add(Ae)})):De!==Ee.res&&(Ee.res=De,Ee.promise=Ne.resolve({result:De}))):(Ee.dirty&&oe(Oe,Ee),Ee.subscribers.forEach(function(Ae){return $.add(Ae)})))}}}$.forEach(function(Ae){return Ae()})}}},Y.addEventListener("abort",D(!1),{signal:B}),Y.addEventListener("error",D(!1),{signal:B}),Y.addEventListener("complete",D(!0),{signal:B})),Y},table:function(y){var k=f.table(y),D=k.schema.primaryKey;return r(r({},k),{mutate:function(N){var B=Fe.trans;if(D.outbound||B.db._options.cache==="disabled"||B.explicit||B.idbtrans.mode!=="readwrite")return k.mutate(N);var Y=ca["idb://".concat(m,"/").concat(y)];return Y?(B=k.mutate(N),N.type!=="add"&&N.type!=="put"||!(50<=N.values.length||Cu(D,N).some(function(te){return te==null}))?(Y.optimisticOps.push(N),N.mutatedParts&&Fl(N.mutatedParts),B.then(function(te){0<te.numFailures&&(oe(Y.optimisticOps,N),(te=dr(0,N,te))&&Y.optimisticOps.push(te),N.mutatedParts&&Fl(N.mutatedParts))}),B.catch(function(){oe(Y.optimisticOps,N),N.mutatedParts&&Fl(N.mutatedParts)})):B.then(function(te){var $=dr(0,r(r({},N),{values:N.values.map(function(z,R){var V;return te.failures[R]?z:(z=(V=D.keyPath)!==null&&V!==void 0&&V.includes(".")?xe(z):r({},z),W(z,D.keyPath,te.results[R]),z)})}),te);Y.optimisticOps.push($),queueMicrotask(function(){return N.mutatedParts&&Fl(N.mutatedParts)})}),B):k.mutate(N)},query:function(N){if(!Wl(Fe,k)||!wp("query",N))return k.query(N);var B=(($=Fe.trans)===null||$===void 0?void 0:$.db._options.cache)==="immutable",R=Fe,Y=R.requery,te=R.signal,$=function(J,ie,Q,ue){var fe=ca["idb://".concat(J,"/").concat(ie)];if(!fe)return[];if(!(ie=fe.queries[Q]))return[null,!1,fe,null];var le=ie[(ue.query?ue.query.index.name:null)||""];if(!le)return[null,!1,fe,null];switch(Q){case"query":var ve=le.find(function(Pe){return Pe.req.limit===ue.limit&&Pe.req.values===ue.values&&Lf(Pe.req.query.range,ue.query.range)});return ve?[ve,!0,fe,le]:[le.find(function(Pe){return("limit"in Pe.req?Pe.req.limit:1/0)>=ue.limit&&(!ue.values||Pe.req.values)&&bp(Pe.req.query.range,ue.query.range)}),!1,fe,le];case"count":return ve=le.find(function(Pe){return Lf(Pe.req.query.range,ue.query.range)}),[ve,!!ve,fe,le]}}(m,y,"query",N),z=$[0],R=$[1],V=$[2],K=$[3];return z&&R?z.obsSet=N.obsSet:(R=k.query(N).then(function(J){var ie=J.result;if(z&&(z.res=ie),B){for(var Q=0,ue=ie.length;Q<ue;++Q)Object.freeze(ie[Q]);Object.freeze(ie)}else J.result=xe(ie);return J}).catch(function(J){return K&&z&&oe(K,z),Promise.reject(J)}),z={obsSet:N.obsSet,promise:R,subscribers:new Set,type:"query",req:N,dirty:!1},K?K.push(z):(K=[z],(V=V||(ca["idb://".concat(m,"/").concat(y)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[N.query.index.name||""]=K)),ry(z,K,Y,te),z.promise.then(function(J){return{result:os(J.result,N,V==null?void 0:V.optimisticOps,k,z,B)}})}})}})}};function Ul(f,m){return new Proxy(f,{get:function(y,k,D){return k==="db"?m:Reflect.get(y,k,D)}})}var fa=(Jt.prototype.version=function(f){if(isNaN(f)||f<.1)throw new me.Type("Given version is not a positive number");if(f=Math.round(10*f)/10,this.idbdb||this._state.isBeingOpened)throw new me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,f);var m=this._versions,y=m.filter(function(k){return k._cfg.version===f})[0];return y||(y=new this.Version(f),m.push(y),m.sort(ny),y.stores({}),this._state.autoSchema=!1,y)},Jt.prototype._whenReady=function(f){var m=this;return this.idbdb&&(this._state.openComplete||Fe.letThrough||this._vip)?f():new Ne(function(y,k){if(m._state.openComplete)return k(new me.DatabaseClosed(m._state.dbOpenError));if(!m._state.isBeingOpened){if(!m._state.autoOpen)return void k(new me.DatabaseClosed);m.open().catch(Ke)}m._state.dbReadyPromise.then(y,k)}).then(f)},Jt.prototype.use=function(f){var m=f.stack,y=f.create,k=f.level,D=f.name;return D&&this.unuse({stack:m,name:D}),f=this._middlewares[m]||(this._middlewares[m]=[]),f.push({stack:m,create:y,level:k??10,name:D}),f.sort(function(N,B){return N.level-B.level}),this},Jt.prototype.unuse=function(f){var m=f.stack,y=f.name,k=f.create;return m&&this._middlewares[m]&&(this._middlewares[m]=this._middlewares[m].filter(function(D){return k?D.create!==k:!!y&&D.name!==y})),this},Jt.prototype.open=function(){var f=this;return fo(Br,function(){return as(f)})},Jt.prototype._close=function(){var f=this._state,m=Zo.indexOf(this);if(0<=m&&Zo.splice(m,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}f.isBeingOpened||(f.dbReadyPromise=new Ne(function(y){f.dbReadyResolve=y}),f.openCanceller=new Ne(function(y,k){f.cancelOpen=k}))},Jt.prototype.close=function(y){var m=(y===void 0?{disableAutoOpen:!0}:y).disableAutoOpen,y=this._state;m?(y.isBeingOpened&&y.cancelOpen(new me.DatabaseClosed),this._close(),y.autoOpen=!1,y.dbOpenError=new me.DatabaseClosed):(this._close(),y.autoOpen=this._options.autoOpen||y.isBeingOpened,y.openComplete=!1,y.dbOpenError=null)},Jt.prototype.delete=function(f){var m=this;f===void 0&&(f={disableAutoOpen:!0});var y=0<arguments.length&&typeof arguments[0]!="object",k=this._state;return new Ne(function(D,N){function B(){m.close(f);var Y=m._deps.indexedDB.deleteDatabase(m.name);Y.onsuccess=dt(function(){var te,$,z;te=m._deps,$=m.name,z=te.indexedDB,te=te.IDBKeyRange,Zn(z)||$===kl||zl(z,te).delete($).catch(Ke),D()}),Y.onerror=li(N),Y.onblocked=m._fireOnBlocked}if(y)throw new me.InvalidArgument("Invalid closeOptions argument to db.delete()");k.isBeingOpened?k.dbReadyPromise.then(B):B()})},Jt.prototype.backendDB=function(){return this.idbdb},Jt.prototype.isOpen=function(){return this.idbdb!==null},Jt.prototype.hasBeenClosed=function(){var f=this._state.dbOpenError;return f&&f.name==="DatabaseClosed"},Jt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Jt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Jt.prototype,"tables",{get:function(){var f=this;return s(this._allTables).map(function(m){return f._allTables[m]})},enumerable:!1,configurable:!0}),Jt.prototype.transaction=function(){var f=(function(m,y,k){var D=arguments.length;if(D<2)throw new me.InvalidArgument("Too few arguments");for(var N=new Array(D-1);--D;)N[D-1]=arguments[D];return k=N.pop(),[m,de(N),k]}).apply(this,arguments);return this._transaction.apply(this,f)},Jt.prototype._transaction=function(f,m,y){var k=this,D=Fe.trans;D&&D.db===this&&f.indexOf("!")===-1||(D=null);var N,B,Y=f.indexOf("?")!==-1;f=f.replace("!","").replace("?","");try{if(B=m.map(function($){if($=$ instanceof k.Table?$.name:$,typeof $!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return $}),f=="r"||f===_f)N=_f;else{if(f!="rw"&&f!=Cl)throw new me.InvalidArgument("Invalid transaction mode: "+f);N=Cl}if(D){if(D.mode===_f&&N===Cl){if(!Y)throw new me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");D=null}D&&B.forEach(function($){if(D&&D.storeNames.indexOf($)===-1){if(!Y)throw new me.SubTransaction("Table "+$+" not included in parent transaction.");D=null}}),Y&&D&&!D.active&&(D=null)}}catch($){return D?D._promise(null,function(z,R){R($)}):Gt($)}var te=(function $(z,R,V,K,J){return Ne.resolve().then(function(){var ie=Fe.transless||Fe,Q=z._createTransaction(R,V,z._dbSchema,K);if(Q.explicit=!0,ie={trans:Q,transless:ie},K)Q.idbtrans=K.idbtrans;else try{Q.create(),Q.idbtrans._explicit=!0,z._state.PR1398_maxLoop=3}catch(le){return le.name===ge.InvalidState&&z.isOpen()&&0<--z._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),z.close({disableAutoOpen:!1}),z.open().then(function(){return $(z,R,V,null,J)})):Gt(le)}var ue,fe=F(J);return fe&&Jo(),ie=Ne.follow(function(){var le;(ue=J.call(Q,Q))&&(fe?(le=Ma.bind(null,null),ue.then(le,le)):typeof ue.next=="function"&&typeof ue.throw=="function"&&(ue=Af(ue)))},ie),(ue&&typeof ue.then=="function"?Ne.resolve(ue).then(function(le){return Q.active?le:Gt(new me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ie.then(function(){return ue})).then(function(le){return K&&Q._resolve(),Q._completion.then(function(){return le})}).catch(function(le){return Q._reject(le),Gt(le)})})}).bind(null,this,N,B,D,y);return D?D._promise(N,te,"lock"):Fe.trans?fo(Fe.transless,function(){return k._whenReady(te)}):this._whenReady(te)},Jt.prototype.table=function(f){if(!v(this._allTables,f))throw new me.InvalidTable("Table ".concat(f," does not exist"));return this._allTables[f]},Jt);function Jt(f,m){var y=this;this._middlewares={},this.verno=0;var k=Jt.dependencies;this._options=m=r({addons:Jt.addons,autoOpen:!0,indexedDB:k.indexedDB,IDBKeyRange:k.IDBKeyRange,cache:"cloned"},m),this._deps={indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange},k=m.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var D,N,B,Y,te,$={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ke,dbReadyPromise:null,cancelOpen:Ke,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:m.autoOpen};$.dbReadyPromise=new Ne(function(R){$.dbReadyResolve=R}),$.openCanceller=new Ne(function(R,V){$.cancelOpen=V}),this._state=$,this.name=f,this.on=ho(this,"populate","blocked","versionchange","close",{ready:[sn,Ke]}),this.on.ready.subscribe=P(this.on.ready.subscribe,function(R){return function(V,K){Jt.vip(function(){var J,ie=y._state;ie.openComplete?(ie.dbOpenError||Ne.resolve().then(V),K&&R(V)):ie.onReadyBeingFired?(ie.onReadyBeingFired.push(V),K&&R(V)):(R(V),J=y,K||R(function Q(){J.on.ready.unsubscribe(V),J.on.ready.unsubscribe(Q)}))})}}),this.Collection=(D=this,hu(Pf.prototype,function(ue,Q){this.db=D;var K=bf,J=null;if(Q)try{K=Q()}catch(fe){J=fe}var ie=ue._ctx,Q=ie.table,ue=Q.hook.reading.fire;this._ctx={table:Q,index:ie.index,isPrimKey:!ie.index||Q.schema.primKey.keyPath&&ie.index===Q.schema.primKey.name,range:K,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:J,or:ie.or,valueMapper:ue!==an?ue:null}})),this.Table=(N=this,hu(xf.prototype,function(R,V,K){this.db=N,this._tx=K,this.name=R,this.schema=V,this.hook=N._allTables[R]?N._allTables[R].hook:ho(null,{creating:[dn,Ke],reading:[Et,an],updating:[sr,Ke],deleting:[on,Ke]})})),this.Transaction=(B=this,hu(Cf.prototype,function(R,V,K,J,ie){var Q=this;this.db=B,this.mode=R,this.storeNames=V,this.schema=K,this.chromeTransactionDurability=J,this.idbtrans=null,this.on=ho(this,"complete","error","abort"),this.parent=ie||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ne(function(ue,fe){Q._resolve=ue,Q._reject=fe}),this._completion.then(function(){Q.active=!1,Q.on.complete.fire()},function(ue){var fe=Q.active;return Q.active=!1,Q.on.error.fire(ue),Q.parent?Q.parent._reject(ue):fe&&Q.idbtrans&&Q.idbtrans.abort(),Gt(ue)})})),this.Version=(Y=this,hu(mp.prototype,function(R){this.db=Y,this._cfg={version:R,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(te=this,hu(hp.prototype,function(R,V,K){if(this.db=te,this._ctx={table:R,index:V===":id"?null:V,or:K},this._cmp=this._ascending=ht,this._descending=function(J,ie){return ht(ie,J)},this._max=function(J,ie){return 0<ht(J,ie)?J:ie},this._min=function(J,ie){return ht(J,ie)<0?J:ie},this._IDBKeyRange=te._deps.IDBKeyRange,!this._IDBKeyRange)throw new me.MissingAPI})),this.on("versionchange",function(R){0<R.newVersion?console.warn("Another connection wants to upgrade database '".concat(y.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(y.name,"'. Closing db now to resume the delete request.")),y.close({disableAutoOpen:!1})}),this.on("blocked",function(R){!R.newVersion||R.newVersion<R.oldVersion?console.warn("Dexie.delete('".concat(y.name,"') was blocked")):console.warn("Upgrade '".concat(y.name,"' blocked by other connection holding version ").concat(R.oldVersion/10))}),this._maxKey=yu(m.IDBKeyRange),this._createTransaction=function(R,V,K,J){return new y.Transaction(R,V,K,y._options.chromeTransactionDurability,J)},this._fireOnBlocked=function(R){y.on("blocked").fire(R),Zo.filter(function(V){return V.name===y.name&&V!==y&&!V._state.vcFired}).map(function(V){return V.on("versionchange").fire(R)})},this.use(jf),this.use(iy),this.use(_p),this.use(vp),this.use(gp);var z=new Proxy(this,{get:function(R,V,K){if(V==="_vip")return!0;if(V==="table")return function(ie){return Ul(y.table(ie),z)};var J=Reflect.get(R,V,K);return J instanceof xf?Ul(J,z):V==="tables"?J.map(function(ie){return Ul(ie,z)}):V==="_createTransaction"?function(){return Ul(J.apply(this,arguments),z)}:J}});this.vip=z,k.forEach(function(R){return R(y)})}var da,Hr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ay=(Ou.prototype.subscribe=function(f,m,y){return this._subscribe(f&&typeof f!="function"?f:{next:f,error:m,complete:y})},Ou.prototype[Hr]=function(){return this},Ou);function Ou(f){this._subscribe=f}try{da={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{da={indexedDB:null,IDBKeyRange:null}}function zf(f){var m,y=!1,k=new ay(function(D){var N=F(f),B,Y=!1,te={},$={},z={get closed(){return Y},unsubscribe:function(){Y||(Y=!0,B&&B.abort(),R&&ja.storagemutated.unsubscribe(K))}};D.start&&D.start(z);var R=!1,V=function(){return wf(J)},K=function(ie){is(te,ie),Tf($,te)&&V()},J=function(){var ie,Q,ue;!Y&&da.indexedDB&&(te={},ie={},B&&B.abort(),B=new AbortController,ue=function(fe){var le=Qt();try{N&&Jo();var ve=Wr(f,fe);return ve=N?ve.finally(Ma):ve}finally{le&&$n()}}(Q={subscr:ie,signal:B.signal,requery:V,querier:f,trans:null}),Promise.resolve(ue).then(function(fe){y=!0,m=fe,Y||Q.signal.aborted||(te={},function(le){for(var ve in le)if(v(le,ve))return;return 1}($=ie)||R||(ja(gu,K),R=!0),wf(function(){return!Y&&D.next&&D.next(fe)}))},function(fe){y=!1,["DatabaseClosedError","AbortError"].includes(fe==null?void 0:fe.name)||Y||wf(function(){Y||D.error&&D.error(fe)})}))};return setTimeout(V,0),z});return k.hasValue=function(){return y},k.getValue=function(){return m},k}var hr=fa;function ss(f){var m=La;try{La=!0,ja.storagemutated.fire(f),Bl(f,!0)}finally{La=m}}g(hr,r(r({},Ge),{delete:function(f){return new hr(f,{addons:[]}).delete()},exists:function(f){return new hr(f,{addons:[]}).open().then(function(m){return m.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(f){try{return m=hr.dependencies,y=m.indexedDB,m=m.IDBKeyRange,(Zn(y)?Promise.resolve(y.databases()).then(function(k){return k.map(function(D){return D.name}).filter(function(D){return D!==kl})}):zl(y,m).toCollection().primaryKeys()).then(f)}catch{return Gt(new me.MissingAPI)}var m,y},defineClass:function(){return function(f){c(this,f)}},ignoreTransaction:function(f){return Fe.trans?fo(Fe.transless,f):f()},vip:Nf,async:function(f){return function(){try{var m=Af(f.apply(this,arguments));return m&&typeof m.then=="function"?m:Ne.resolve(m)}catch(y){return Gt(y)}}},spawn:function(f,m,y){try{var k=Af(f.apply(y,m||[]));return k&&typeof k.then=="function"?k:Ne.resolve(k)}catch(D){return Gt(D)}},currentTransaction:{get:function(){return Fe.trans||null}},waitFor:function(f,m){return m=Ne.resolve(typeof f=="function"?hr.ignoreTransaction(f):f).timeout(m||6e4),Fe.trans?Fe.trans.waitFor(m):m},Promise:Ne,debug:{get:function(){return _t},set:function(f){Vn(f)}},derive:E,extend:c,props:g,override:P,Events:ho,on:ja,liveQuery:zf,extendObservabilitySet:is,getByKeyPath:U,setByKeyPath:W,delByKeyPath:function(f,m){typeof m=="string"?W(f,m,void 0):"length"in m&&[].map.call(m,function(y){W(f,y,void 0)})},shallowClone:re,deepClone:xe,getObjectDiff:ku,cmp:ht,asap:T,minKey:-1/0,addons:[],connections:Zo,errnames:ge,dependencies:da,cache:ca,semVer:"4.0.10",version:"4.0.10".split(".").map(function(f){return parseInt(f)}).reduce(function(f,m,y){return f+m/Math.pow(10,2*y)})})),hr.maxKey=yu(hr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ja(gu,function(f){La||(f=new CustomEvent(kf,{detail:f}),La=!0,dispatchEvent(f),La=!1)}),addEventListener(kf,function(f){f=f.detail,La||ss(f)}));var us,La=!1,Sp=function(){};return typeof BroadcastChannel<"u"&&((Sp=function(){(us=new BroadcastChannel(kf)).onmessage=function(f){return f.data&&ss(f.data)}})(),typeof us.unref=="function"&&us.unref(),ja(gu,function(f){La||us.postMessage(f)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(f){if(!fa.disableBfCache&&f.persisted){_t&&console.debug("Dexie: handling persisted pagehide"),us!=null&&us.close();for(var m=0,y=Zo;m<y.length;m++)y[m].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(f){!fa.disableBfCache&&f.persisted&&(_t&&console.debug("Dexie: handling persisted pageshow"),Sp(),ss({all:new Fn(-1/0,[[]])}))})),Ne.rejectionMapper=function(f,m){return!f||f instanceof X||f instanceof TypeError||f instanceof SyntaxError||!f.name||!Me[f.name]?f:(m=new Me[f.name](m||f.message,f),"stack"in f&&_(m,"stack",{get:function(){return this.inner.stack}}),m)},Vn(_t),r(fa,Object.freeze({__proto__:null,Dexie:fa,liveQuery:zf,Entity:lp,cmp:ht,PropModSymbol:oa,PropModification:ts,replacePrefix:function(f,m){return new ts({replacePrefix:[f,m]})},add:function(f){return new ts({add:f})},remove:function(f){return new ts({remove:f})},default:fa,RangeSet:Fn,mergeRanges:Ur,rangesOverlap:xu}),{default:fa}),fa})})(QN);var d8=QN.exports;const N_=$h(d8),Tk=Symbol.for("Dexie"),T_=globalThis[Tk]||(globalThis[Tk]=N_);if(N_.semVer!==T_.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${N_.semVer} and ${T_.semVer}`);var Jv="docs",h8="changes",Mk="attachments",GN="dexie",Ik=new Map,ev=new Map;function p8(e,t,n,r){var i="rxdb-dexie-"+e+"--"+r.version+"--"+t,a=Ir(Ik,i,()=>{var s=(async()=>{var u=It(n);u.autoOpen=!1;var c=new T_(i,u);n.onCreate&&await n.onCreate(c,i);var d={[Jv]:g8(r),[h8]:"++sequence, id",[Mk]:"id"};return c.version(1).stores(d),await c.open(),{dexieDb:c,dexieTable:c[Jv],dexieAttachmentsTable:c[Mk],booleanIndexes:y8(r)}})();return Ik.set(i,a),ev.set(a,0),s});return a}async function m8(e){var t=await e,n=ev.get(e),r=n-1;r===0?(t.dexieDb.close(),ev.delete(e)):ev.set(e,r)}var M_="__";function mf(e){var t=e.split(".");if(t.length>1)return t.map(r=>mf(r)).join(".");if(e.startsWith("|")){var n=e.substring(1);return M_+n}else return e}function JN(e){var t=e.split(".");if(t.length>1)return t.map(r=>JN(r)).join(".");if(e.startsWith(M_)){var n=e.substring(M_.length);return"|"+n}else return e}function v8(e,t){if(!t)return t;var n=It(t);return n=I_(n),e.forEach(r=>{var i=Zs(t,r),a=i?"1":"0",s=mf(r);V$(n,s,a)}),n}function ZN(e,t){return t&&(t=It(t),t=A_(t),e.forEach(n=>{var r=Zs(t,n),i=r==="1";V$(t,n,i)}),t)}function I_(e){if(!e||typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(Array.isArray(e))return e.map(n=>I_(n));if(typeof e=="object"){var t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="object"&&(r=I_(r)),t[mf(n)]=r}),t}}function A_(e){if(!e||typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(Array.isArray(e))return e.map(n=>A_(n));if(typeof e=="object"){var t={};return Object.entries(e).forEach(([n,r])=>{(typeof r=="object"||Array.isArray(e))&&(r=A_(r)),t[JN(n)]=r}),t}}function g8(e){var t=[],n=ai(e.primaryKey);t.push([n]),t.push(["_deleted",n]),e.indexes&&e.indexes.forEach(a=>{var s=dh(a);t.push(s)}),t.push(["_meta.lwt",n]),t.push(["_meta.lwt"]),t=t.map(a=>a.map(s=>mf(s)));var r=t.map(a=>a.length===1?a[0]:"["+a.join("+")+"]");r=r.filter((a,s,u)=>u.indexOf(a)===s);var i=r.join(", ");return i}async function Ak(e,t){var n=await e,r=await n.dexieTable.bulkGet(t);return r.map(i=>ZN(n.booleanIndexes,i))}function bm(e,t){return e+"||"+t}function y8(e){var t=new Set,n=[];return e.indexes?(e.indexes.forEach(r=>{var i=dh(r);i.forEach(a=>{if(!t.has(a)){t.add(a);var s=Qc(e,a);s.type==="boolean"&&n.push(a)}})}),n.push("_deleted"),PU(n)):n}function jk(e){return e===Nc?-1/0:e}function Lk(e,t,n){if(e.includes(t)){var r=n===Rc||n===!0?"1":"0";return r}else return n}function eT(e,t,n){if(!n){if(typeof window>"u")throw new Error("IDBKeyRange missing");n=window.IDBKeyRange}var r=t.startKeys.map((s,u)=>{var c=t.index[u];return Lk(e,c,s)}).map(jk),i=t.endKeys.map((s,u)=>{var c=t.index[u];return Lk(e,c,s)}).map(jk),a=n.bound(r,i,!t.inclusiveStart,!t.inclusiveEnd);return a}async function zk(e,t){var n=await e.internals,r=t.query,i=r.skip?r.skip:0,a=r.limit?r.limit:1/0,s=i+a,u=t.queryPlan,c=!1;u.selectorSatisfiedByIndex||(c=p1(e.schema,t.query));var d=eT(n.booleanIndexes,u,n.dexieDb._options.IDBKeyRange),h=u.index,v=[];if(await n.dexieDb.transaction("r",n.dexieTable,async w=>{var _=w.idbtrans,E=_.objectStore(Jv),C,x;x="["+h.map(P=>mf(P)).join("+")+"]",C=E.index(x);var S=C.openCursor(d);await new Promise(P=>{S.onsuccess=function(M){var T=M.target.result;if(T){var U=ZN(n.booleanIndexes,T.value);(!c||c(U))&&v.push(U),u.sortSatisfiedByIndex&&v.length===s?P():T.continue()}else P()}})}),!u.sortSatisfiedByIndex){var g=oN(e.schema,t.query);v=v.sort(g)}return v=v.slice(i,s),{documents:v}}async function w8(e,t){var n=await e.internals,r=t.queryPlan,i=r.index,a=eT(n.booleanIndexes,r,n.dexieDb._options.IDBKeyRange),s=-1;return await n.dexieDb.transaction("r",n.dexieTable,async u=>{var c=u.idbtrans,d=c.objectStore(Jv),h,v;v="["+i.map(w=>mf(w)).join("+")+"]",h=d.index(v);var g=h.count(a);s=await new Promise((w,_)=>{g.onsuccess=function(){w(g.result)},g.onerror=E=>_(E)})}),s}var _8=ki(),X0=!1,b8=function(){function e(n,r,i,a,s,u,c,d){this.changes$=new br,this.instanceId=_8++,this.storage=n,this.databaseName=r,this.collectionName=i,this.schema=a,this.internals=s,this.options=u,this.settings=c,this.devMode=d,this.primaryPath=ai(this.schema.primaryKey)}var t=e.prototype;return t.bulkWrite=async function(r,i){Fu(this),!X0&&!await Q$()&&console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium/?console=dexie ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join(`
`)),X0=!0,r.forEach(h=>{if(!h.document._rev||h.previous&&!h.previous._rev)throw ze("SNH",{args:{row:h}})});var a=await this.internals,s={error:[]};this.devMode&&(r=r.map(h=>{var v=ep(h.document);return{previous:h.previous,document:v}}));var u=r.map(h=>h.document[this.primaryPath]),c;if(await a.dexieDb.transaction("rw",a.dexieTable,a.dexieAttachmentsTable,async()=>{var h=new Map,v=await Ak(this.internals,u);v.forEach(_=>{var E=_;return E&&h.set(E[this.primaryPath],E),E}),c=o6(this,this.primaryPath,h,r,i),s.error=c.errors;var g=[];c.bulkInsertDocs.forEach(_=>{g.push(_.document)}),c.bulkUpdateDocs.forEach(_=>{g.push(_.document)}),g=g.map(_=>v8(a.booleanIndexes,_)),g.length>0&&await a.dexieTable.bulkPut(g);var w=[];c.attachmentsAdd.forEach(_=>{w.push({id:bm(_.documentId,_.attachmentId),data:_.attachmentData.data})}),c.attachmentsUpdate.forEach(_=>{w.push({id:bm(_.documentId,_.attachmentId),data:_.attachmentData.data})}),await a.dexieAttachmentsTable.bulkPut(w),await a.dexieAttachmentsTable.bulkDelete(c.attachmentsRemove.map(_=>bm(_.documentId,_.attachmentId)))}),c=Ye(c),c.eventBulk.events.length>0){var d=Ye(c.newestRow).document;c.eventBulk.checkpoint={id:d[this.primaryPath],lwt:d._meta.lwt},this.changes$.next(c.eventBulk)}return s},t.findDocumentsById=async function(r,i){Fu(this);var a=await this.internals,s=[];return await a.dexieDb.transaction("r",a.dexieTable,async()=>{var u=await Ak(this.internals,r);u.forEach(c=>{c&&(!c._deleted||i)&&s.push(c)})}),s},t.query=function(r){return Fu(this),zk(this,r)},t.count=async function(r){if(r.queryPlan.selectorSatisfiedByIndex){var i=await w8(this,r);return{count:i,mode:"fast"}}else{var a=await zk(this,r);return{count:a.documents.length,mode:"slow"}}},t.changeStream=function(){return Fu(this),this.changes$.asObservable()},t.cleanup=async function(r){Fu(this);var i=await this.internals;return await i.dexieDb.transaction("rw",i.dexieTable,async()=>{var a=ki()-r,s=await i.dexieTable.where("_meta.lwt").below(a).toArray(),u=[];s.forEach(c=>{c._deleted==="1"&&u.push(c[this.primaryPath])}),await i.dexieTable.bulkDelete(u)}),!0},t.getAttachmentData=async function(r,i,a){Fu(this);var s=await this.internals,u=bm(r,i);return await s.dexieDb.transaction("r",s.dexieAttachmentsTable,async()=>{var c=await s.dexieAttachmentsTable.get(u);if(c)return c.data;throw new Error("attachment missing documentId: "+r+" attachmentId: "+i)})},t.remove=async function(){Fu(this);var r=await this.internals;return await r.dexieTable.clear(),this.close()},t.close=function(){return this.closed?this.closed:(this.closed=(async()=>{this.changes$.complete(),await m8(this.internals)})(),this.closed)},e}();async function S8(e,t,n){var r=p8(t.databaseName,t.collectionName,n,t.schema),i=new b8(e,t.databaseName,t.collectionName,t.schema,r,t.options,n,t.devMode);return await l8(GN,t,i),Promise.resolve(i)}function Fu(e){if(e.closed)throw new Error("RxStorageInstanceDexie is closed "+e.databaseName+"-"+e.collectionName)}var x8=function(){function e(n){this.name=GN,this.rxdbVersion=X$,this.settings=n}var t=e.prototype;return t.createStorageInstance=function(r){if(l6(r),r.schema.indexes){var i=r.schema.indexes.flat();i.filter(a=>!a.includes(".")).forEach(a=>{if(!r.schema.required||!r.schema.required.includes(a))throw ze("DXE1",{field:a,schema:r.schema})})}return S8(this,r,this.settings)},e}();function E8(e={}){var t=new x8(e);return t}const Bg=e=>zr((t,n,r)=>{let i=0;if(mt(n))for(const a of n)i=i|1<<a;else i=n;return e(t&i,i)}),P8=Bg((e,t)=>e==0),k8=Bg((e,t)=>e==t),C8=Bg((e,t)=>e<t),D8=Bg((e,t)=>e>0),O8=Object.freeze(Object.defineProperty({__proto__:null,$all:n6,$and:UR,$bitsAllClear:P8,$bitsAllSet:k8,$bitsAnyClear:C8,$bitsAnySet:D8,$elemMatch:nN,$eq:qR,$exists:iN,$expr:ZK,$gt:YR,$gte:VR,$in:XR,$jsonSchema:e6,$lt:QR,$lte:GR,$mod:eN,$ne:JR,$nin:ZR,$nor:HR,$not:KR,$or:h1,$regex:tN,$size:rN,$type:aN,$where:t6},Symbol.toStringTag,{value:"Module"})),Fr={cloneMode:"copy",queryOptions:$R({context:gl.init().addQueryOps(O8).addExpressionOps(WK).addExpressionOps(QK)})},D1=(e,t)=>{switch(e){case"deep":return tf(t);case"copy":return Zc(t)?new Date(t):mt(t)?[...t]:bn(t)?{...t}:Ao(t)?new RegExp(t):t;default:return t}},$8=/^[a-z]+[a-zA-Z0-9]*$/;function tT(e){if(!e.includes(".$"))return[{parent:e,selector:e},[]];const t=e.indexOf(".$"),n=e.indexOf("]"),r=e.substring(0,t),i=e.substring(t+3,n);Mt(i===""||$8.test(i),"The filter <identifier> must begin with a lowercase letter and contain only alphanumeric characters.");const a=e.substring(n+2),[s,u]=a?tT(a):[];return[{selector:e,parent:r,child:i||"$",next:s},[i,...u||[]].filter(Boolean)]}const oi=(e,t,n,r,i)=>{const{parent:a,child:s,next:u}=t;if(!s){let d=!1;return _h(e,a,(v,g)=>d=!!r(v,g)||d,i),d}const c=ro(e,a);return mt(c)?c.map((d,h)=>n[s]&&!n[s].test({[s]:d})?!1:u?oi(d,u,n,r,i):r(c,h)).some(Boolean):!1};function Di(e,t,n,r){const i=[];for(const[a,s]of Object.entries(e)){const[u,c]=tT(a);if(!c.length)r(s,u,{})&&i.push(u.parent);else{const d={};t.forEach(v=>{Object.keys(v).forEach(g=>{c.forEach(w=>{(g===w||g.startsWith(w+"."))&&(d[w]=d[w]||{},Object.assign(d[w],{[g]:v[g]}))})})});const h={};for(const[v,g]of Object.entries(d))h[v]=new lu(g,n.queryOptions);r(s,u,h)&&i.push(u.parent)}}return i}const R8=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>{const u={$each:[i]};return bn(i)&&Ta(i,"$each")&&Object.assign(u,i),oi(e,a,s,(c,d)=>{const h=c[d]||(c[d]=[]);return kR([h,u.$each]).length===u.$each.length?!1:(c[d]=D1(r.cloneMode,fK(h.concat(u.$each))),!0)},{buildGraph:!0})}),N8=new Set(["and","or","xor"]),T8=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>{const u=Object.keys(i);return Mt(u.length===1&&N8.has(u[0]),`Invalid bit operator '${u[0]}'. Must be one of 'and', 'or', or 'xor'.`),oi(e,a,s,(c,d)=>{let h=c[d];const v=i[u[0]];if(h!==void 0&&!(Un(h)&&Un(v)))return!1;switch(h=h||0,u[0]){case"and":c[d]=h&v;break;case"or":c[d]=h|v;break;case"xor":c[d]=h^v;break}return c[d]!==h},{buildGraph:!0})}),M8=(e,t,n=[],r=Fr)=>{const i=Date.now();return Di(t,n,r,(a,s,u)=>oi(e,s,u,(c,d)=>(c[d]=i,!0),{buildGraph:!0}))},I8=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>{if(!a.child){const u=ro(e,a.parent);Mt(u===void 0||Un(u),"cannot apply $inc to a value of non-numeric type")}return oi(e,a,s,(u,c)=>(u[c]=(u[c]||(u[c]=0))+i,!0),{buildGraph:!0})}),A8=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>oi(e,a,s,(u,c)=>u[c]!==void 0&&ta(u[c],i)>-1?!1:(u[c]=i,!0),{buildGraph:!0})),j8=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>oi(e,a,s,(u,c)=>u[c]!==void 0&&ta(u[c],i)<1?!1:(u[c]=i,!0),{buildGraph:!0})),L8=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>oi(e,a,s,(u,c)=>{const d=u[c];return u[c]=u[c]===void 0?0:u[c]*i,u[c]!==d},{buildGraph:!0})),z8=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>oi(e,a,s,(u,c)=>{const d=u[c];return Mt(mt(d),`path '${a.selector}' contains an element of non-array type.`),d.length?(i===-1?d.splice(0,1):d.pop(),!0):!1})),nT=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>{const u=!bn(i)||Object.keys(i).some(uu),c=new lu(u?{k:i}:i,r.queryOptions),d=u?h=>c.test({k:h}):h=>c.test(h);return oi(e,a,s,(h,v)=>{const g=h[v],w=new Array;return g.map(E=>{const C=d(E);return C||w.push(E),C}).some(Boolean)?(h[v]=w,!0):!1})}),F8=(e,t,n=[],r=Fr)=>{const i={};return Object.entries(t).forEach(([a,s])=>{i[a]={$in:s}}),nT(e,i,n,r)},B8=Object.freeze(["$each","$slice","$sort","$position"]),W8=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>{const u={$each:[i]};return bn(i)&&B8.some(c=>Ta(i,c))&&Object.assign(u,i),oi(e,a,s,(c,d)=>{const h=c[d]||(c[d]=[]),v=h.slice(0,u.$slice||h.length),g=h.length,w=Un(u.$position)?u.$position:h.length;if(h.splice(w,0,...D1(r.cloneMode,u.$each)),u.$sort){const _=bn(u.$sort)?Object.keys(u.$sort||{}).pop():"",E=_?u.$sort[_]:u.$sort,C=_?x=>ro(x,_):x=>x;h.sort((x,S)=>E*ta(C(x),C(S)))}return Un(u.$slice)&&(u.$slice<0?h.splice(0,h.length+u.$slice):h.splice(u.$slice)),g!=h.length||!Ca(v,h)},{descendArray:!0,buildGraph:!0})}),rT=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>oi(e,a,s,(u,c)=>Ca(u[c],i)?!1:(u[c]=D1(r.cloneMode,i),!0),{buildGraph:!0})),U8=(e,t,n=[],r=Fr)=>{const i=[],a=Di(t,n,r,(s,u,c)=>oi(e,u,c,(d,h)=>Ta(d,h)?(i.push(...rT(e,{[s]:d[h]},n,r)),delete d[h],!0):!1));return Array.from(new Set(a.concat(i)))},H8=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>oi(e,a,s,(u,c)=>Ta(u,c)?(mt(u)?u[c]=null:delete u[c],!0):!1)),Fk=Object.freeze(Object.defineProperty({__proto__:null,$addToSet:R8,$bit:T8,$currentDate:M8,$inc:I8,$max:A8,$min:j8,$mul:L8,$pop:z8,$pull:nT,$pullAll:F8,$push:W8,$rename:U8,$set:rT,$unset:H8},Symbol.toStringTag,{value:"Module"}));function iT(e){return e=e??Fr,(t,n,r=[],i={},a=e)=>{const s=Object.entries(n);Mt(s.length===1,"Update expression must contain only one operator.");const[u,c]=s[0];Mt(Ta(Fk,u),`Update operator '${u}' is not supported.`);const d=Fk[u];return Object.keys(i).length&&!new lu(i,a.queryOptions).test(t)?[]:d(t,c,r,a)}}iT();var Q0;function aT(e,t){if(!Q0){var n=iT({cloneMode:"none"});Q0=(r,i)=>{var a=Mr(r);return n(a,i),a}}return Q0(e,t)}function K8(e){return this.incrementalModify(t=>{var n=aT(t,e);return n})}function q8(e){var t=this._data,n=aT(t,e);return this._saveData(n,t)}async function Y8(e){return ac(this.asRxQuery,t=>t.update(e))}var V8={name:"update",rxdb:!0,prototypes:{RxDocument:e=>{e.update=q8,e.incrementalUpdate=K8},RxQuery:e=>{e.update=Y8}}},j_={exports:{}},oT={},Da={},rf={},rp={},ut={},Ph={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(S){if(super(),!e.IDENTIFIER.test(S))throw new Error("CodeGen: name must be a valid identifier");this.str=S}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(S){super(),this._items=typeof S=="string"?[S]:S}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const S=this._items[0];return S===""||S==='""'}get str(){var S;return(S=this._str)!==null&&S!==void 0?S:this._str=this._items.reduce((P,M)=>`${P}${M}`,"")}get names(){var S;return(S=this._names)!==null&&S!==void 0?S:this._names=this._items.reduce((P,M)=>(M instanceof n&&(P[M.str]=(P[M.str]||0)+1),P),{})}}e._Code=r,e.nil=new r("");function i(x,...S){const P=[x[0]];let M=0;for(;M<S.length;)u(P,S[M]),P.push(x[++M]);return new r(P)}e._=i;const a=new r("+");function s(x,...S){const P=[w(x[0])];let M=0;for(;M<S.length;)P.push(a),u(P,S[M]),P.push(a,w(x[++M]));return c(P),new r(P)}e.str=s;function u(x,S){S instanceof r?x.push(...S._items):S instanceof n?x.push(S):x.push(v(S))}e.addCodeArg=u;function c(x){let S=1;for(;S<x.length-1;){if(x[S]===a){const P=d(x[S-1],x[S+1]);if(P!==void 0){x.splice(S-1,3,P);continue}x[S++]="+"}S++}}function d(x,S){if(S==='""')return x;if(x==='""')return S;if(typeof x=="string")return S instanceof n||x[x.length-1]!=='"'?void 0:typeof S!="string"?`${x.slice(0,-1)}${S}"`:S[0]==='"'?x.slice(0,-1)+S.slice(1):void 0;if(typeof S=="string"&&S[0]==='"'&&!(x instanceof n))return`"${x}${S.slice(1)}`}function h(x,S){return S.emptyStr()?x:x.emptyStr()?S:s`${x}${S}`}e.strConcat=h;function v(x){return typeof x=="number"||typeof x=="boolean"||x===null?x:w(Array.isArray(x)?x.join(","):x)}function g(x){return new r(w(x))}e.stringify=g;function w(x){return JSON.stringify(x).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=w;function _(x){return typeof x=="string"&&e.IDENTIFIER.test(x)?new r(`.${x}`):i`[${x}]`}e.getProperty=_;function E(x){if(typeof x=="string"&&e.IDENTIFIER.test(x))return new r(`${x}`);throw new Error(`CodeGen: invalid export name: ${x}, use explicit $id name mapping`)}e.getEsmExportName=E;function C(x){return new r(x.toString())}e.regexpCode=C})(Ph);var L_={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Ph;class n extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var r;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:d,parent:h}={}){this._names={},this._prefixes=d,this._parent=h}toName(d){return d instanceof t.Name?d:this.name(d)}name(d){return new t.Name(this._newName(d))}_newName(d){const h=this._names[d]||this._nameGroup(d);return`${d}${h.index++}`}_nameGroup(d){var h,v;if(!((v=(h=this._parent)===null||h===void 0?void 0:h._prefixes)===null||v===void 0)&&v.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}e.Scope=i;class a extends t.Name{constructor(d,h){super(h),this.prefix=d}setValue(d,{property:h,itemIndex:v}){this.value=d,this.scopePath=(0,t._)`.${new t.Name(h)}[${v}]`}}e.ValueScopeName=a;const s=(0,t._)`\n`;class u extends i{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?s:t.nil}}get(){return this._scope}name(d){return new a(d,this._newName(d))}value(d,h){var v;if(h.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const g=this.toName(d),{prefix:w}=g,_=(v=h.key)!==null&&v!==void 0?v:h.ref;let E=this._values[w];if(E){const S=E.get(_);if(S)return S}else E=this._values[w]=new Map;E.set(_,g);const C=this._scope[w]||(this._scope[w]=[]),x=C.length;return C[x]=h.ref,g.setValue(h,{property:w,itemIndex:x}),g}getValue(d,h){const v=this._values[d];if(v)return v.get(h)}scopeRefs(d,h=this._values){return this._reduceValues(h,v=>{if(v.scopePath===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return(0,t._)`${d}${v.scopePath}`})}scopeCode(d=this._values,h,v){return this._reduceValues(d,g=>{if(g.value===void 0)throw new Error(`CodeGen: name "${g}" has no value`);return g.value.code},h,v)}_reduceValues(d,h,v={},g){let w=t.nil;for(const _ in d){const E=d[_];if(!E)continue;const C=v[_]=v[_]||new Map;E.forEach(x=>{if(C.has(x))return;C.set(x,r.Started);let S=h(x);if(S){const P=this.opts.es5?e.varKinds.var:e.varKinds.const;w=(0,t._)`${w}${P} ${x} = ${S};${this.opts._n}`}else if(S=g==null?void 0:g(x))w=(0,t._)`${w}${S}${this.opts._n}`;else throw new n(x);C.set(x,r.Completed)})}return w}}e.ValueScope=u})(L_);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Ph,n=L_;var r=Ph;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=L_;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class a{optimizeNodes(){return this}optimizeNames(I,H){return this}}class s extends a{constructor(I,H,ae){super(),this.varKind=I,this.name=H,this.rhs=ae}render({es5:I,_n:H}){const ae=I?n.varKinds.var:this.varKind,ge=this.rhs===void 0?"":` = ${this.rhs}`;return`${ae} ${this.name}${ge};`+H}optimizeNames(I,H){if(I[this.name.str])return this.rhs&&(this.rhs=Ce(this.rhs,I,H)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class u extends a{constructor(I,H,ae){super(),this.lhs=I,this.rhs=H,this.sideEffects=ae}render({_n:I}){return`${this.lhs} = ${this.rhs};`+I}optimizeNames(I,H){if(!(this.lhs instanceof t.Name&&!I[this.lhs.str]&&!this.sideEffects))return this.rhs=Ce(this.rhs,I,H),this}get names(){const I=this.lhs instanceof t.Name?{}:{...this.lhs.names};return xe(I,this.rhs)}}class c extends u{constructor(I,H,ae,ge){super(I,ae,ge),this.op=H}render({_n:I}){return`${this.lhs} ${this.op}= ${this.rhs};`+I}}class d extends a{constructor(I){super(),this.label=I,this.names={}}render({_n:I}){return`${this.label}:`+I}}class h extends a{constructor(I){super(),this.label=I,this.names={}}render({_n:I}){return`break${this.label?` ${this.label}`:""};`+I}}class v extends a{constructor(I){super(),this.error=I}render({_n:I}){return`throw ${this.error};`+I}get names(){return this.error.names}}class g extends a{constructor(I){super(),this.code=I}render({_n:I}){return`${this.code};`+I}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(I,H){return this.code=Ce(this.code,I,H),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class w extends a{constructor(I=[]){super(),this.nodes=I}render(I){return this.nodes.reduce((H,ae)=>H+ae.render(I),"")}optimizeNodes(){const{nodes:I}=this;let H=I.length;for(;H--;){const ae=I[H].optimizeNodes();Array.isArray(ae)?I.splice(H,1,...ae):ae?I[H]=ae:I.splice(H,1)}return I.length>0?this:void 0}optimizeNames(I,H){const{nodes:ae}=this;let ge=ae.length;for(;ge--;){const $e=ae[ge];$e.optimizeNames(I,H)||(Le(I,$e.names),ae.splice(ge,1))}return ae.length>0?this:void 0}get names(){return this.nodes.reduce((I,H)=>pe(I,H.names),{})}}class _ extends w{render(I){return"{"+I._n+super.render(I)+"}"+I._n}}class E extends w{}class C extends _{}C.kind="else";class x extends _{constructor(I,H){super(H),this.condition=I}render(I){let H=`if(${this.condition})`+super.render(I);return this.else&&(H+="else "+this.else.render(I)),H}optimizeNodes(){super.optimizeNodes();const I=this.condition;if(I===!0)return this.nodes;let H=this.else;if(H){const ae=H.optimizeNodes();H=this.else=Array.isArray(ae)?new C(ae):ae}if(H)return I===!1?H instanceof x?H:H.nodes:this.nodes.length?this:new x(qe(I),H instanceof x?[H]:H.nodes);if(!(I===!1||!this.nodes.length))return this}optimizeNames(I,H){var ae;if(this.else=(ae=this.else)===null||ae===void 0?void 0:ae.optimizeNames(I,H),!!(super.optimizeNames(I,H)||this.else))return this.condition=Ce(this.condition,I,H),this}get names(){const I=super.names;return xe(I,this.condition),this.else&&pe(I,this.else.names),I}}x.kind="if";class S extends _{}S.kind="for";class P extends S{constructor(I){super(),this.iteration=I}render(I){return`for(${this.iteration})`+super.render(I)}optimizeNames(I,H){if(super.optimizeNames(I,H))return this.iteration=Ce(this.iteration,I,H),this}get names(){return pe(super.names,this.iteration.names)}}class M extends S{constructor(I,H,ae,ge){super(),this.varKind=I,this.name=H,this.from=ae,this.to=ge}render(I){const H=I.es5?n.varKinds.var:this.varKind,{name:ae,from:ge,to:$e}=this;return`for(${H} ${ae}=${ge}; ${ae}<${$e}; ${ae}++)`+super.render(I)}get names(){const I=xe(super.names,this.from);return xe(I,this.to)}}class T extends S{constructor(I,H,ae,ge){super(),this.loop=I,this.varKind=H,this.name=ae,this.iterable=ge}render(I){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(I)}optimizeNames(I,H){if(super.optimizeNames(I,H))return this.iterable=Ce(this.iterable,I,H),this}get names(){return pe(super.names,this.iterable.names)}}class U extends _{constructor(I,H,ae){super(),this.name=I,this.args=H,this.async=ae}render(I){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(I)}}U.kind="func";class W extends w{render(I){return"return "+super.render(I)}}W.kind="return";class re extends _{render(I){let H="try"+super.render(I);return this.catch&&(H+=this.catch.render(I)),this.finally&&(H+=this.finally.render(I)),H}optimizeNodes(){var I,H;return super.optimizeNodes(),(I=this.catch)===null||I===void 0||I.optimizeNodes(),(H=this.finally)===null||H===void 0||H.optimizeNodes(),this}optimizeNames(I,H){var ae,ge;return super.optimizeNames(I,H),(ae=this.catch)===null||ae===void 0||ae.optimizeNames(I,H),(ge=this.finally)===null||ge===void 0||ge.optimizeNames(I,H),this}get names(){const I=super.names;return this.catch&&pe(I,this.catch.names),this.finally&&pe(I,this.finally.names),I}}class he extends _{constructor(I){super(),this.error=I}render(I){return`catch(${this.error})`+super.render(I)}}he.kind="catch";class de extends _{render(I){return"finally"+super.render(I)}}de.kind="finally";class ce{constructor(I,H={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...H,_n:H.lines?`
`:""},this._extScope=I,this._scope=new n.Scope({parent:I}),this._nodes=[new E]}toString(){return this._root.render(this.opts)}name(I){return this._scope.name(I)}scopeName(I){return this._extScope.name(I)}scopeValue(I,H){const ae=this._extScope.value(I,H);return(this._values[ae.prefix]||(this._values[ae.prefix]=new Set)).add(ae),ae}getScopeValue(I,H){return this._extScope.getValue(I,H)}scopeRefs(I){return this._extScope.scopeRefs(I,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(I,H,ae,ge){const $e=this._scope.toName(H);return ae!==void 0&&ge&&(this._constants[$e.str]=ae),this._leafNode(new s(I,$e,ae)),$e}const(I,H,ae){return this._def(n.varKinds.const,I,H,ae)}let(I,H,ae){return this._def(n.varKinds.let,I,H,ae)}var(I,H,ae){return this._def(n.varKinds.var,I,H,ae)}assign(I,H,ae){return this._leafNode(new u(I,H,ae))}add(I,H){return this._leafNode(new c(I,e.operators.ADD,H))}code(I){return typeof I=="function"?I():I!==t.nil&&this._leafNode(new g(I)),this}object(...I){const H=["{"];for(const[ae,ge]of I)H.length>1&&H.push(","),H.push(ae),(ae!==ge||this.opts.es5)&&(H.push(":"),(0,t.addCodeArg)(H,ge));return H.push("}"),new t._Code(H)}if(I,H,ae){if(this._blockNode(new x(I)),H&&ae)this.code(H).else().code(ae).endIf();else if(H)this.code(H).endIf();else if(ae)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(I){return this._elseNode(new x(I))}else(){return this._elseNode(new C)}endIf(){return this._endBlockNode(x,C)}_for(I,H){return this._blockNode(I),H&&this.code(H).endFor(),this}for(I,H){return this._for(new P(I),H)}forRange(I,H,ae,ge,$e=this.opts.es5?n.varKinds.var:n.varKinds.let){const me=this._scope.toName(I);return this._for(new M($e,me,H,ae),()=>ge(me))}forOf(I,H,ae,ge=n.varKinds.const){const $e=this._scope.toName(I);if(this.opts.es5){const me=H instanceof t.Name?H:this.var("_arr",H);return this.forRange("_i",0,(0,t._)`${me}.length`,Me=>{this.var($e,(0,t._)`${me}[${Me}]`),ae($e)})}return this._for(new T("of",ge,$e,H),()=>ae($e))}forIn(I,H,ae,ge=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(I,(0,t._)`Object.keys(${H})`,ae);const $e=this._scope.toName(I);return this._for(new T("in",ge,$e,H),()=>ae($e))}endFor(){return this._endBlockNode(S)}label(I){return this._leafNode(new d(I))}break(I){return this._leafNode(new h(I))}return(I){const H=new W;if(this._blockNode(H),this.code(I),H.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(W)}try(I,H,ae){if(!H&&!ae)throw new Error('CodeGen: "try" without "catch" and "finally"');const ge=new re;if(this._blockNode(ge),this.code(I),H){const $e=this.name("e");this._currNode=ge.catch=new he($e),H($e)}return ae&&(this._currNode=ge.finally=new de,this.code(ae)),this._endBlockNode(he,de)}throw(I){return this._leafNode(new v(I))}block(I,H){return this._blockStarts.push(this._nodes.length),I&&this.code(I).endBlock(H),this}endBlock(I){const H=this._blockStarts.pop();if(H===void 0)throw new Error("CodeGen: not in self-balancing block");const ae=this._nodes.length-H;if(ae<0||I!==void 0&&ae!==I)throw new Error(`CodeGen: wrong number of nodes: ${ae} vs ${I} expected`);return this._nodes.length=H,this}func(I,H=t.nil,ae,ge){return this._blockNode(new U(I,H,ae)),ge&&this.code(ge).endFunc(),this}endFunc(){return this._endBlockNode(U)}optimize(I=1){for(;I-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(I){return this._currNode.nodes.push(I),this}_blockNode(I){this._currNode.nodes.push(I),this._nodes.push(I)}_endBlockNode(I,H){const ae=this._currNode;if(ae instanceof I||H&&ae instanceof H)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${H?`${I.kind}/${H.kind}`:I.kind}"`)}_elseNode(I){const H=this._currNode;if(!(H instanceof x))throw new Error('CodeGen: "else" without "if"');return this._currNode=H.else=I,this}get _root(){return this._nodes[0]}get _currNode(){const I=this._nodes;return I[I.length-1]}set _currNode(I){const H=this._nodes;H[H.length-1]=I}}e.CodeGen=ce;function pe(X,I){for(const H in I)X[H]=(X[H]||0)+(I[H]||0);return X}function xe(X,I){return I instanceof t._CodeOrName?pe(X,I.names):X}function Ce(X,I,H){if(X instanceof t.Name)return ae(X);if(!ge(X))return X;return new t._Code(X._items.reduce(($e,me)=>(me instanceof t.Name&&(me=ae(me)),me instanceof t._Code?$e.push(...me._items):$e.push(me),$e),[]));function ae($e){const me=H[$e.str];return me===void 0||I[$e.str]!==1?$e:(delete I[$e.str],me)}function ge($e){return $e instanceof t._Code&&$e._items.some(me=>me instanceof t.Name&&I[me.str]===1&&H[me.str]!==void 0)}}function Le(X,I){for(const H in I)X[H]=(X[H]||0)-(I[H]||0)}function qe(X){return typeof X=="boolean"||typeof X=="number"||X===null?!X:(0,t._)`!${ee(X)}`}e.not=qe;const We=F(e.operators.AND);function oe(...X){return X.reduce(We)}e.and=oe;const _e=F(e.operators.OR);function G(...X){return X.reduce(_e)}e.or=G;function F(X){return(I,H)=>I===t.nil?H:H===t.nil?I:(0,t._)`${ee(I)} ${X} ${ee(H)}`}function ee(X){return X instanceof t.Name?X:(0,t._)`(${X})`}})(ut);var je={};Object.defineProperty(je,"__esModule",{value:!0});je.checkStrictMode=je.getErrorPath=je.Type=je.useFunc=je.setEvaluated=je.evaluatedPropsToName=je.mergeEvaluated=je.eachItem=je.unescapeJsonPointer=je.escapeJsonPointer=je.escapeFragment=je.unescapeFragment=je.schemaRefOrVal=je.schemaHasRulesButRef=je.schemaHasRules=je.checkUnknownRules=je.alwaysValidSchema=je.toHash=void 0;const zt=ut,X8=Ph;function Q8(e){const t={};for(const n of e)t[n]=!0;return t}je.toHash=Q8;function G8(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(sT(e,t),!uT(t,e.self.RULES.all))}je.alwaysValidSchema=G8;function sT(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const a in t)i[a]||fT(e,`unknown keyword: "${a}"`)}je.checkUnknownRules=sT;function uT(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}je.schemaHasRules=uT;function J8(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}je.schemaHasRulesButRef=J8;function Z8({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,zt._)`${n}`}return(0,zt._)`${e}${t}${(0,zt.getProperty)(r)}`}je.schemaRefOrVal=Z8;function eY(e){return lT(decodeURIComponent(e))}je.unescapeFragment=eY;function tY(e){return encodeURIComponent(O1(e))}je.escapeFragment=tY;function O1(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}je.escapeJsonPointer=O1;function lT(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}je.unescapeJsonPointer=lT;function nY(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}je.eachItem=nY;function Bk({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,a,s,u)=>{const c=s===void 0?a:s instanceof zt.Name?(a instanceof zt.Name?e(i,a,s):t(i,a,s),s):a instanceof zt.Name?(t(i,s,a),a):n(a,s);return u===zt.Name&&!(c instanceof zt.Name)?r(i,c):c}}je.mergeEvaluated={props:Bk({mergeNames:(e,t,n)=>e.if((0,zt._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,zt._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,zt._)`${n} || {}`).code((0,zt._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,zt._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,zt._)`${n} || {}`),$1(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:cT}),items:Bk({mergeNames:(e,t,n)=>e.if((0,zt._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,zt._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,zt._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,zt._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function cT(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,zt._)`{}`);return t!==void 0&&$1(e,n,t),n}je.evaluatedPropsToName=cT;function $1(e,t,n){Object.keys(n).forEach(r=>e.assign((0,zt._)`${t}${(0,zt.getProperty)(r)}`,!0))}je.setEvaluated=$1;const Wk={};function rY(e,t){return e.scopeValue("func",{ref:t,code:Wk[t.code]||(Wk[t.code]=new X8._Code(t.code))})}je.useFunc=rY;var z_;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(z_||(je.Type=z_={}));function iY(e,t,n){if(e instanceof zt.Name){const r=t===z_.Num;return n?r?(0,zt._)`"[" + ${e} + "]"`:(0,zt._)`"['" + ${e} + "']"`:r?(0,zt._)`"/" + ${e}`:(0,zt._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,zt.getProperty)(e).toString():"/"+O1(e)}je.getErrorPath=iY;function fT(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}je.checkStrictMode=fT;var ao={};Object.defineProperty(ao,"__esModule",{value:!0});const yr=ut,aY={data:new yr.Name("data"),valCxt:new yr.Name("valCxt"),instancePath:new yr.Name("instancePath"),parentData:new yr.Name("parentData"),parentDataProperty:new yr.Name("parentDataProperty"),rootData:new yr.Name("rootData"),dynamicAnchors:new yr.Name("dynamicAnchors"),vErrors:new yr.Name("vErrors"),errors:new yr.Name("errors"),this:new yr.Name("this"),self:new yr.Name("self"),scope:new yr.Name("scope"),json:new yr.Name("json"),jsonPos:new yr.Name("jsonPos"),jsonLen:new yr.Name("jsonLen"),jsonPart:new yr.Name("jsonPart")};ao.default=aY;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=ut,n=je,r=ao;e.keywordError={message:({keyword:C})=>(0,t.str)`must pass "${C}" keyword validation`},e.keyword$DataError={message:({keyword:C,schemaType:x})=>x?(0,t.str)`"${C}" keyword must be ${x} ($data)`:(0,t.str)`"${C}" keyword is invalid ($data)`};function i(C,x=e.keywordError,S,P){const{it:M}=C,{gen:T,compositeRule:U,allErrors:W}=M,re=v(C,x,S);P??(U||W)?c(T,re):d(M,(0,t._)`[${re}]`)}e.reportError=i;function a(C,x=e.keywordError,S){const{it:P}=C,{gen:M,compositeRule:T,allErrors:U}=P,W=v(C,x,S);c(M,W),T||U||d(P,r.default.vErrors)}e.reportExtraError=a;function s(C,x){C.assign(r.default.errors,x),C.if((0,t._)`${r.default.vErrors} !== null`,()=>C.if(x,()=>C.assign((0,t._)`${r.default.vErrors}.length`,x),()=>C.assign(r.default.vErrors,null)))}e.resetErrorsCount=s;function u({gen:C,keyword:x,schemaValue:S,data:P,errsCount:M,it:T}){if(M===void 0)throw new Error("ajv implementation error");const U=C.name("err");C.forRange("i",M,r.default.errors,W=>{C.const(U,(0,t._)`${r.default.vErrors}[${W}]`),C.if((0,t._)`${U}.instancePath === undefined`,()=>C.assign((0,t._)`${U}.instancePath`,(0,t.strConcat)(r.default.instancePath,T.errorPath))),C.assign((0,t._)`${U}.schemaPath`,(0,t.str)`${T.errSchemaPath}/${x}`),T.opts.verbose&&(C.assign((0,t._)`${U}.schema`,S),C.assign((0,t._)`${U}.data`,P))})}e.extendErrors=u;function c(C,x){const S=C.const("err",x);C.if((0,t._)`${r.default.vErrors} === null`,()=>C.assign(r.default.vErrors,(0,t._)`[${S}]`),(0,t._)`${r.default.vErrors}.push(${S})`),C.code((0,t._)`${r.default.errors}++`)}function d(C,x){const{gen:S,validateName:P,schemaEnv:M}=C;M.$async?S.throw((0,t._)`new ${C.ValidationError}(${x})`):(S.assign((0,t._)`${P}.errors`,x),S.return(!1))}const h={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function v(C,x,S){const{createErrors:P}=C.it;return P===!1?(0,t._)`{}`:g(C,x,S)}function g(C,x,S={}){const{gen:P,it:M}=C,T=[w(M,S),_(C,S)];return E(C,x,T),P.object(...T)}function w({errorPath:C},{instancePath:x}){const S=x?(0,t.str)`${C}${(0,n.getErrorPath)(x,n.Type.Str)}`:C;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,S)]}function _({keyword:C,it:{errSchemaPath:x}},{schemaPath:S,parentSchema:P}){let M=P?x:(0,t.str)`${x}/${C}`;return S&&(M=(0,t.str)`${M}${(0,n.getErrorPath)(S,n.Type.Str)}`),[h.schemaPath,M]}function E(C,{params:x,message:S},P){const{keyword:M,data:T,schemaValue:U,it:W}=C,{opts:re,propertyName:he,topSchemaRef:de,schemaPath:ce}=W;P.push([h.keyword,M],[h.params,typeof x=="function"?x(C):x||(0,t._)`{}`]),re.messages&&P.push([h.message,typeof S=="function"?S(C):S]),re.verbose&&P.push([h.schema,U],[h.parentSchema,(0,t._)`${de}${ce}`],[r.default.data,T]),he&&P.push([h.propertyName,he])}})(rp);Object.defineProperty(rf,"__esModule",{value:!0});rf.boolOrEmptySchema=rf.topBoolOrEmptySchema=void 0;const oY=rp,sY=ut,uY=ao,lY={message:"boolean schema is false"};function cY(e){const{gen:t,schema:n,validateName:r}=e;n===!1?dT(e,!1):typeof n=="object"&&n.$async===!0?t.return(uY.default.data):(t.assign((0,sY._)`${r}.errors`,null),t.return(!0))}rf.topBoolOrEmptySchema=cY;function fY(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),dT(e)):n.var(t,!0)}rf.boolOrEmptySchema=fY;function dT(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,oY.reportError)(i,lY,void 0,t)}var An={},wl={};Object.defineProperty(wl,"__esModule",{value:!0});wl.getRules=wl.isJSONType=void 0;const dY=["string","number","integer","boolean","null","object","array"],hY=new Set(dY);function pY(e){return typeof e=="string"&&hY.has(e)}wl.isJSONType=pY;function mY(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}wl.getRules=mY;var Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.shouldUseRule=Lo.shouldUseGroup=Lo.schemaHasRulesForType=void 0;function vY({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&hT(e,r)}Lo.schemaHasRulesForType=vY;function hT(e,t){return t.rules.some(n=>pT(e,n))}Lo.shouldUseGroup=hT;function pT(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Lo.shouldUseRule=pT;Object.defineProperty(An,"__esModule",{value:!0});An.reportTypeError=An.checkDataTypes=An.checkDataType=An.coerceAndCheckDataType=An.getJSONTypes=An.getSchemaTypes=An.DataType=void 0;const gY=wl,yY=Lo,wY=rp,rt=ut,mT=je;var Ic;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Ic||(An.DataType=Ic={}));function _Y(e){const t=vT(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}An.getSchemaTypes=_Y;function vT(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(gY.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}An.getJSONTypes=vT;function bY(e,t){const{gen:n,data:r,opts:i}=e,a=SY(t,i.coerceTypes),s=t.length>0&&!(a.length===0&&t.length===1&&(0,yY.schemaHasRulesForType)(e,t[0]));if(s){const u=R1(t,r,i.strictNumbers,Ic.Wrong);n.if(u,()=>{a.length?xY(e,t,a):N1(e)})}return s}An.coerceAndCheckDataType=bY;const gT=new Set(["string","number","integer","boolean","null"]);function SY(e,t){return t?e.filter(n=>gT.has(n)||t==="array"&&n==="array"):[]}function xY(e,t,n){const{gen:r,data:i,opts:a}=e,s=r.let("dataType",(0,rt._)`typeof ${i}`),u=r.let("coerced",(0,rt._)`undefined`);a.coerceTypes==="array"&&r.if((0,rt._)`${s} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,rt._)`${i}[0]`).assign(s,(0,rt._)`typeof ${i}`).if(R1(t,i,a.strictNumbers),()=>r.assign(u,i))),r.if((0,rt._)`${u} !== undefined`);for(const d of n)(gT.has(d)||d==="array"&&a.coerceTypes==="array")&&c(d);r.else(),N1(e),r.endIf(),r.if((0,rt._)`${u} !== undefined`,()=>{r.assign(i,u),EY(e,u)});function c(d){switch(d){case"string":r.elseIf((0,rt._)`${s} == "number" || ${s} == "boolean"`).assign(u,(0,rt._)`"" + ${i}`).elseIf((0,rt._)`${i} === null`).assign(u,(0,rt._)`""`);return;case"number":r.elseIf((0,rt._)`${s} == "boolean" || ${i} === null
              || (${s} == "string" && ${i} && ${i} == +${i})`).assign(u,(0,rt._)`+${i}`);return;case"integer":r.elseIf((0,rt._)`${s} === "boolean" || ${i} === null
              || (${s} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(u,(0,rt._)`+${i}`);return;case"boolean":r.elseIf((0,rt._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(u,!1).elseIf((0,rt._)`${i} === "true" || ${i} === 1`).assign(u,!0);return;case"null":r.elseIf((0,rt._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(u,null);return;case"array":r.elseIf((0,rt._)`${s} === "string" || ${s} === "number"
              || ${s} === "boolean" || ${i} === null`).assign(u,(0,rt._)`[${i}]`)}}}function EY({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,rt._)`${t} !== undefined`,()=>e.assign((0,rt._)`${t}[${n}]`,r))}function F_(e,t,n,r=Ic.Correct){const i=r===Ic.Correct?rt.operators.EQ:rt.operators.NEQ;let a;switch(e){case"null":return(0,rt._)`${t} ${i} null`;case"array":a=(0,rt._)`Array.isArray(${t})`;break;case"object":a=(0,rt._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":a=s((0,rt._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":a=s();break;default:return(0,rt._)`typeof ${t} ${i} ${e}`}return r===Ic.Correct?a:(0,rt.not)(a);function s(u=rt.nil){return(0,rt.and)((0,rt._)`typeof ${t} == "number"`,u,n?(0,rt._)`isFinite(${t})`:rt.nil)}}An.checkDataType=F_;function R1(e,t,n,r){if(e.length===1)return F_(e[0],t,n,r);let i;const a=(0,mT.toHash)(e);if(a.array&&a.object){const s=(0,rt._)`typeof ${t} != "object"`;i=a.null?s:(0,rt._)`!${t} || ${s}`,delete a.null,delete a.array,delete a.object}else i=rt.nil;a.number&&delete a.integer;for(const s in a)i=(0,rt.and)(i,F_(s,t,n,r));return i}An.checkDataTypes=R1;const PY={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,rt._)`{type: ${e}}`:(0,rt._)`{type: ${t}}`};function N1(e){const t=kY(e);(0,wY.reportError)(t,PY)}An.reportTypeError=N1;function kY(e){const{gen:t,data:n,schema:r}=e,i=(0,mT.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var Wg={};Object.defineProperty(Wg,"__esModule",{value:!0});Wg.assignDefaults=void 0;const nc=ut,CY=je;function DY(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)Uk(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,a)=>Uk(e,a,i.default))}Wg.assignDefaults=DY;function Uk(e,t,n){const{gen:r,compositeRule:i,data:a,opts:s}=e;if(n===void 0)return;const u=(0,nc._)`${a}${(0,nc.getProperty)(t)}`;if(i){(0,CY.checkStrictMode)(e,`default is ignored for: ${u}`);return}let c=(0,nc._)`${u} === undefined`;s.useDefaults==="empty"&&(c=(0,nc._)`${c} || ${u} === null || ${u} === ""`),r.if(c,(0,nc._)`${u} = ${(0,nc.stringify)(n)}`)}var Ga={},ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.validateUnion=ft.validateArray=ft.usePattern=ft.callValidateCode=ft.schemaProperties=ft.allSchemaProperties=ft.noPropertyInData=ft.propertyInData=ft.isOwnProperty=ft.hasPropFunc=ft.reportMissingProp=ft.checkMissingProp=ft.checkReportMissingProp=void 0;const Ht=ut,T1=je,vs=ao,OY=je;function $Y(e,t){const{gen:n,data:r,it:i}=e;n.if(I1(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Ht._)`${t}`},!0),e.error()})}ft.checkReportMissingProp=$Y;function RY({gen:e,data:t,it:{opts:n}},r,i){return(0,Ht.or)(...r.map(a=>(0,Ht.and)(I1(e,t,a,n.ownProperties),(0,Ht._)`${i} = ${a}`)))}ft.checkMissingProp=RY;function NY(e,t){e.setParams({missingProperty:t},!0),e.error()}ft.reportMissingProp=NY;function yT(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Ht._)`Object.prototype.hasOwnProperty`})}ft.hasPropFunc=yT;function M1(e,t,n){return(0,Ht._)`${yT(e)}.call(${t}, ${n})`}ft.isOwnProperty=M1;function TY(e,t,n,r){const i=(0,Ht._)`${t}${(0,Ht.getProperty)(n)} !== undefined`;return r?(0,Ht._)`${i} && ${M1(e,t,n)}`:i}ft.propertyInData=TY;function I1(e,t,n,r){const i=(0,Ht._)`${t}${(0,Ht.getProperty)(n)} === undefined`;return r?(0,Ht.or)(i,(0,Ht.not)(M1(e,t,n))):i}ft.noPropertyInData=I1;function wT(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}ft.allSchemaProperties=wT;function MY(e,t){return wT(t).filter(n=>!(0,T1.alwaysValidSchema)(e,t[n]))}ft.schemaProperties=MY;function IY({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:a},it:s},u,c,d){const h=d?(0,Ht._)`${e}, ${t}, ${r}${i}`:t,v=[[vs.default.instancePath,(0,Ht.strConcat)(vs.default.instancePath,a)],[vs.default.parentData,s.parentData],[vs.default.parentDataProperty,s.parentDataProperty],[vs.default.rootData,vs.default.rootData]];s.opts.dynamicRef&&v.push([vs.default.dynamicAnchors,vs.default.dynamicAnchors]);const g=(0,Ht._)`${h}, ${n.object(...v)}`;return c!==Ht.nil?(0,Ht._)`${u}.call(${c}, ${g})`:(0,Ht._)`${u}(${g})`}ft.callValidateCode=IY;const AY=(0,Ht._)`new RegExp`;function jY({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,a=i(n,r);return e.scopeValue("pattern",{key:a.toString(),ref:a,code:(0,Ht._)`${i.code==="new RegExp"?AY:(0,OY.useFunc)(e,i)}(${n}, ${r})`})}ft.usePattern=jY;function LY(e){const{gen:t,data:n,keyword:r,it:i}=e,a=t.name("valid");if(i.allErrors){const u=t.let("valid",!0);return s(()=>t.assign(u,!1)),u}return t.var(a,!0),s(()=>t.break()),a;function s(u){const c=t.const("len",(0,Ht._)`${n}.length`);t.forRange("i",0,c,d=>{e.subschema({keyword:r,dataProp:d,dataPropType:T1.Type.Num},a),t.if((0,Ht.not)(a),u)})}}ft.validateArray=LY;function zY(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(c=>(0,T1.alwaysValidSchema)(i,c))&&!i.opts.unevaluated)return;const s=t.let("valid",!1),u=t.name("_valid");t.block(()=>n.forEach((c,d)=>{const h=e.subschema({keyword:r,schemaProp:d,compositeRule:!0},u);t.assign(s,(0,Ht._)`${s} || ${u}`),e.mergeValidEvaluated(h,u)||t.if((0,Ht.not)(s))})),e.result(s,()=>e.reset(),()=>e.error(!0))}ft.validateUnion=zY;Object.defineProperty(Ga,"__esModule",{value:!0});Ga.validateKeywordUsage=Ga.validSchemaType=Ga.funcKeywordCode=Ga.macroKeywordCode=void 0;const Nr=ut,Yu=ao,FY=ft,BY=rp;function WY(e,t){const{gen:n,keyword:r,schema:i,parentSchema:a,it:s}=e,u=t.macro.call(s.self,i,a,s),c=_T(n,r,u);s.opts.validateSchema!==!1&&s.self.validateSchema(u,!0);const d=n.name("valid");e.subschema({schema:u,schemaPath:Nr.nil,errSchemaPath:`${s.errSchemaPath}/${r}`,topSchemaRef:c,compositeRule:!0},d),e.pass(d,()=>e.error(!0))}Ga.macroKeywordCode=WY;function UY(e,t){var n;const{gen:r,keyword:i,schema:a,parentSchema:s,$data:u,it:c}=e;KY(c,t);const d=!u&&t.compile?t.compile.call(c.self,a,s,c):t.validate,h=_T(r,i,d),v=r.let("valid");e.block$data(v,g),e.ok((n=t.valid)!==null&&n!==void 0?n:v);function g(){if(t.errors===!1)E(),t.modifying&&Hk(e),C(()=>e.error());else{const x=t.async?w():_();t.modifying&&Hk(e),C(()=>HY(e,x))}}function w(){const x=r.let("ruleErrs",null);return r.try(()=>E((0,Nr._)`await `),S=>r.assign(v,!1).if((0,Nr._)`${S} instanceof ${c.ValidationError}`,()=>r.assign(x,(0,Nr._)`${S}.errors`),()=>r.throw(S))),x}function _(){const x=(0,Nr._)`${h}.errors`;return r.assign(x,null),E(Nr.nil),x}function E(x=t.async?(0,Nr._)`await `:Nr.nil){const S=c.opts.passContext?Yu.default.this:Yu.default.self,P=!("compile"in t&&!u||t.schema===!1);r.assign(v,(0,Nr._)`${x}${(0,FY.callValidateCode)(e,h,S,P)}`,t.modifying)}function C(x){var S;r.if((0,Nr.not)((S=t.valid)!==null&&S!==void 0?S:v),x)}}Ga.funcKeywordCode=UY;function Hk(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Nr._)`${r.parentData}[${r.parentDataProperty}]`))}function HY(e,t){const{gen:n}=e;n.if((0,Nr._)`Array.isArray(${t})`,()=>{n.assign(Yu.default.vErrors,(0,Nr._)`${Yu.default.vErrors} === null ? ${t} : ${Yu.default.vErrors}.concat(${t})`).assign(Yu.default.errors,(0,Nr._)`${Yu.default.vErrors}.length`),(0,BY.extendErrors)(e)},()=>e.error())}function KY({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function _T(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Nr.stringify)(n)})}function qY(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Ga.validSchemaType=qY;function YY({schema:e,opts:t,self:n,errSchemaPath:r},i,a){if(Array.isArray(i.keyword)?!i.keyword.includes(a):i.keyword!==a)throw new Error("ajv implementation error");const s=i.dependencies;if(s!=null&&s.some(u=>!Object.prototype.hasOwnProperty.call(e,u)))throw new Error(`parent schema must have dependencies of ${a}: ${s.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[a])){const c=`keyword "${a}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(c);else throw new Error(c)}}Ga.validateKeywordUsage=YY;var qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.extendSubschemaMode=qs.extendSubschemaData=qs.getSubschema=void 0;const Va=ut,bT=je;function VY(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:a,topSchemaRef:s}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const u=e.schema[t];return n===void 0?{schema:u,schemaPath:(0,Va._)`${e.schemaPath}${(0,Va.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:u[n],schemaPath:(0,Va._)`${e.schemaPath}${(0,Va.getProperty)(t)}${(0,Va.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,bT.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||a===void 0||s===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:s,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')}qs.getSubschema=VY;function XY(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:a,propertyName:s}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:u}=t;if(n!==void 0){const{errorPath:d,dataPathArr:h,opts:v}=t,g=u.let("data",(0,Va._)`${t.data}${(0,Va.getProperty)(n)}`,!0);c(g),e.errorPath=(0,Va.str)`${d}${(0,bT.getErrorPath)(n,r,v.jsPropertySyntax)}`,e.parentDataProperty=(0,Va._)`${n}`,e.dataPathArr=[...h,e.parentDataProperty]}if(i!==void 0){const d=i instanceof Va.Name?i:u.let("data",i,!0);c(d),s!==void 0&&(e.propertyName=s)}a&&(e.dataTypes=a);function c(d){e.data=d,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,d]}}qs.extendSubschemaData=XY;function QY(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:a}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),a!==void 0&&(e.allErrors=a),e.jtdDiscriminator=t,e.jtdMetadata=n}qs.extendSubschemaMode=QY;var ir={},ST=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),r=a.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;i--!==0;){var s=a[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n},xT={exports:{}},Is=xT.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};tv(t,r,i,e,"",e)};Is.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Is.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Is.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Is.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function tv(e,t,n,r,i,a,s,u,c,d){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,a,s,u,c,d);for(var h in r){var v=r[h];if(Array.isArray(v)){if(h in Is.arrayKeywords)for(var g=0;g<v.length;g++)tv(e,t,n,v[g],i+"/"+h+"/"+g,a,i,h,r,g)}else if(h in Is.propsKeywords){if(v&&typeof v=="object")for(var w in v)tv(e,t,n,v[w],i+"/"+h+"/"+GY(w),a,i,h,r,w)}else(h in Is.keywords||e.allKeys&&!(h in Is.skipKeywords))&&tv(e,t,n,v,i+"/"+h,a,i,h,r)}n(r,i,a,s,u,c,d)}}function GY(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var JY=xT.exports;Object.defineProperty(ir,"__esModule",{value:!0});ir.getSchemaRefs=ir.resolveUrl=ir.normalizeId=ir._getFullPath=ir.getFullPath=ir.inlineRef=void 0;const ZY=je,eV=ST,tV=JY,nV=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function rV(e,t=!0){return typeof e=="boolean"?!0:t===!0?!B_(e):t?ET(e)<=t:!1}ir.inlineRef=rV;const iV=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function B_(e){for(const t in e){if(iV.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(B_)||typeof n=="object"&&B_(n))return!0}return!1}function ET(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!nV.has(n)&&(typeof e[n]=="object"&&(0,ZY.eachItem)(e[n],r=>t+=ET(r)),t===1/0))return 1/0}return t}function PT(e,t="",n){n!==!1&&(t=Ac(t));const r=e.parse(t);return kT(e,r)}ir.getFullPath=PT;function kT(e,t){return e.serialize(t).split("#")[0]+"#"}ir._getFullPath=kT;const aV=/#\/?$/;function Ac(e){return e?e.replace(aV,""):""}ir.normalizeId=Ac;function oV(e,t,n){return n=Ac(n),e.resolve(t,n)}ir.resolveUrl=oV;const sV=/^[a-z_][-a-z0-9._]*$/i;function uV(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Ac(e[n]||t),a={"":i},s=PT(r,i,!1),u={},c=new Set;return tV(e,{allKeys:!0},(v,g,w,_)=>{if(_===void 0)return;const E=s+g;let C=a[_];typeof v[n]=="string"&&(C=x.call(this,v[n])),S.call(this,v.$anchor),S.call(this,v.$dynamicAnchor),a[g]=C;function x(P){const M=this.opts.uriResolver.resolve;if(P=Ac(C?M(C,P):P),c.has(P))throw h(P);c.add(P);let T=this.refs[P];return typeof T=="string"&&(T=this.refs[T]),typeof T=="object"?d(v,T.schema,P):P!==Ac(E)&&(P[0]==="#"?(d(v,u[P],P),u[P]=v):this.refs[P]=E),P}function S(P){if(typeof P=="string"){if(!sV.test(P))throw new Error(`invalid anchor "${P}"`);x.call(this,`#${P}`)}}}),u;function d(v,g,w){if(g!==void 0&&!eV(v,g))throw h(w)}function h(v){return new Error(`reference "${v}" resolves to more than one schema`)}}ir.getSchemaRefs=uV;Object.defineProperty(Da,"__esModule",{value:!0});Da.getData=Da.KeywordCxt=Da.validateFunctionCode=void 0;const CT=rf,Kk=An,A1=Lo,Zv=An,lV=Wg,jd=Ga,G0=qs,He=ut,et=ao,cV=ir,zo=je,hd=rp;function fV(e){if($T(e)&&(RT(e),OT(e))){pV(e);return}DT(e,()=>(0,CT.topBoolOrEmptySchema)(e))}Da.validateFunctionCode=fV;function DT({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},a){i.code.es5?e.func(t,(0,He._)`${et.default.data}, ${et.default.valCxt}`,r.$async,()=>{e.code((0,He._)`"use strict"; ${qk(n,i)}`),hV(e,i),e.code(a)}):e.func(t,(0,He._)`${et.default.data}, ${dV(i)}`,r.$async,()=>e.code(qk(n,i)).code(a))}function dV(e){return(0,He._)`{${et.default.instancePath}="", ${et.default.parentData}, ${et.default.parentDataProperty}, ${et.default.rootData}=${et.default.data}${e.dynamicRef?(0,He._)`, ${et.default.dynamicAnchors}={}`:He.nil}}={}`}function hV(e,t){e.if(et.default.valCxt,()=>{e.var(et.default.instancePath,(0,He._)`${et.default.valCxt}.${et.default.instancePath}`),e.var(et.default.parentData,(0,He._)`${et.default.valCxt}.${et.default.parentData}`),e.var(et.default.parentDataProperty,(0,He._)`${et.default.valCxt}.${et.default.parentDataProperty}`),e.var(et.default.rootData,(0,He._)`${et.default.valCxt}.${et.default.rootData}`),t.dynamicRef&&e.var(et.default.dynamicAnchors,(0,He._)`${et.default.valCxt}.${et.default.dynamicAnchors}`)},()=>{e.var(et.default.instancePath,(0,He._)`""`),e.var(et.default.parentData,(0,He._)`undefined`),e.var(et.default.parentDataProperty,(0,He._)`undefined`),e.var(et.default.rootData,et.default.data),t.dynamicRef&&e.var(et.default.dynamicAnchors,(0,He._)`{}`)})}function pV(e){const{schema:t,opts:n,gen:r}=e;DT(e,()=>{n.$comment&&t.$comment&&TT(e),wV(e),r.let(et.default.vErrors,null),r.let(et.default.errors,0),n.unevaluated&&mV(e),NT(e),SV(e)})}function mV(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,He._)`${n}.evaluated`),t.if((0,He._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,He._)`${e.evaluated}.props`,(0,He._)`undefined`)),t.if((0,He._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,He._)`${e.evaluated}.items`,(0,He._)`undefined`))}function qk(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,He._)`/*# sourceURL=${n} */`:He.nil}function vV(e,t){if($T(e)&&(RT(e),OT(e))){gV(e,t);return}(0,CT.boolOrEmptySchema)(e,t)}function OT({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function $T(e){return typeof e.schema!="boolean"}function gV(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&TT(e),_V(e),bV(e);const a=r.const("_errs",et.default.errors);NT(e,a),r.var(t,(0,He._)`${a} === ${et.default.errors}`)}function RT(e){(0,zo.checkUnknownRules)(e),yV(e)}function NT(e,t){if(e.opts.jtd)return Yk(e,[],!1,t);const n=(0,Kk.getSchemaTypes)(e.schema),r=(0,Kk.coerceAndCheckDataType)(e,n);Yk(e,n,!r,t)}function yV(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,zo.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function wV(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,zo.checkStrictMode)(e,"default is ignored in the schema root")}function _V(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,cV.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function bV(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function TT({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const a=n.$comment;if(i.$comment===!0)e.code((0,He._)`${et.default.self}.logger.log(${a})`);else if(typeof i.$comment=="function"){const s=(0,He.str)`${r}/$comment`,u=e.scopeValue("root",{ref:t.root});e.code((0,He._)`${et.default.self}.opts.$comment(${a}, ${s}, ${u}.schema)`)}}function SV(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:a}=e;n.$async?t.if((0,He._)`${et.default.errors} === 0`,()=>t.return(et.default.data),()=>t.throw((0,He._)`new ${i}(${et.default.vErrors})`)):(t.assign((0,He._)`${r}.errors`,et.default.vErrors),a.unevaluated&&xV(e),t.return((0,He._)`${et.default.errors} === 0`))}function xV({gen:e,evaluated:t,props:n,items:r}){n instanceof He.Name&&e.assign((0,He._)`${t}.props`,n),r instanceof He.Name&&e.assign((0,He._)`${t}.items`,r)}function Yk(e,t,n,r){const{gen:i,schema:a,data:s,allErrors:u,opts:c,self:d}=e,{RULES:h}=d;if(a.$ref&&(c.ignoreKeywordsWithRef||!(0,zo.schemaHasRulesButRef)(a,h))){i.block(()=>AT(e,"$ref",h.all.$ref.definition));return}c.jtd||EV(e,t),i.block(()=>{for(const g of h.rules)v(g);v(h.post)});function v(g){(0,A1.shouldUseGroup)(a,g)&&(g.type?(i.if((0,Zv.checkDataType)(g.type,s,c.strictNumbers)),Vk(e,g),t.length===1&&t[0]===g.type&&n&&(i.else(),(0,Zv.reportTypeError)(e)),i.endIf()):Vk(e,g),u||i.if((0,He._)`${et.default.errors} === ${r||0}`))}}function Vk(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,lV.assignDefaults)(e,t.type),n.block(()=>{for(const a of t.rules)(0,A1.shouldUseRule)(r,a)&&AT(e,a.keyword,a.definition,t.type)})}function EV(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(PV(e,t),e.opts.allowUnionTypes||kV(e,t),CV(e,e.dataTypes))}function PV(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{MT(e.dataTypes,n)||j1(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),OV(e,t)}}function kV(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&j1(e,"use allowUnionTypes to allow union type keyword")}function CV(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,A1.shouldUseRule)(e.schema,i)){const{type:a}=i.definition;a.length&&!a.some(s=>DV(t,s))&&j1(e,`missing type "${a.join(",")}" for keyword "${r}"`)}}}function DV(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function MT(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function OV(e,t){const n=[];for(const r of e.dataTypes)MT(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function j1(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,zo.checkStrictMode)(e,t,e.opts.strictTypes)}class IT{constructor(t,n,r){if((0,jd.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,zo.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",jT(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,jd.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",et.default.errors))}result(t,n,r){this.failResult((0,He.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,He.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,He._)`${n} !== undefined && (${(0,He.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?hd.reportExtraError:hd.reportError)(this,this.def.error,n)}$dataError(){(0,hd.reportError)(this,this.def.$dataError||hd.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,hd.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=He.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=He.nil,n=He.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:a,def:s}=this;r.if((0,He.or)((0,He._)`${i} === undefined`,n)),t!==He.nil&&r.assign(t,!0),(a.length||s.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==He.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:a}=this;return(0,He.or)(s(),u());function s(){if(r.length){if(!(n instanceof He.Name))throw new Error("ajv implementation error");const c=Array.isArray(r)?r:[r];return(0,He._)`${(0,Zv.checkDataTypes)(c,n,a.opts.strictNumbers,Zv.DataType.Wrong)}`}return He.nil}function u(){if(i.validateSchema){const c=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,He._)`!${c}(${n})`}return He.nil}}subschema(t,n){const r=(0,G0.getSubschema)(this.it,t);(0,G0.extendSubschemaData)(r,this.it,t),(0,G0.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return vV(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=zo.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=zo.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,He.Name)),!0}}Da.KeywordCxt=IT;function AT(e,t,n,r){const i=new IT(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,jd.funcKeywordCode)(i,n):"macro"in n?(0,jd.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,jd.funcKeywordCode)(i,n)}const $V=/^\/(?:[^~]|~0|~1)*$/,RV=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function jT(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,a;if(e==="")return et.default.rootData;if(e[0]==="/"){if(!$V.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,a=et.default.rootData}else{const d=RV.exec(e);if(!d)throw new Error(`Invalid JSON-pointer: ${e}`);const h=+d[1];if(i=d[2],i==="#"){if(h>=t)throw new Error(c("property/index",h));return r[t-h]}if(h>t)throw new Error(c("data",h));if(a=n[t-h],!i)return a}let s=a;const u=i.split("/");for(const d of u)d&&(a=(0,He._)`${a}${(0,He.getProperty)((0,zo.unescapeJsonPointer)(d))}`,s=(0,He._)`${s} && ${a}`);return s;function c(d,h){return`Cannot access ${d} ${h} levels up, current level is ${t}`}}Da.getData=jT;var ip={};Object.defineProperty(ip,"__esModule",{value:!0});class NV extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}ip.default=NV;var vf={};Object.defineProperty(vf,"__esModule",{value:!0});const J0=ir;class TV extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,J0.resolveUrl)(t,n,r),this.missingSchema=(0,J0.normalizeId)((0,J0.getFullPath)(t,this.missingRef))}}vf.default=TV;var Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.resolveSchema=Jr.getCompilingSchema=Jr.resolveRef=Jr.compileSchema=Jr.SchemaEnv=void 0;const ga=ut,MV=ip,Bu=ao,Ea=ir,Xk=je,IV=Da;class Ug{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Ea.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Jr.SchemaEnv=Ug;function L1(e){const t=LT.call(this,e);if(t)return t;const n=(0,Ea.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:a}=this.opts,s=new ga.CodeGen(this.scope,{es5:r,lines:i,ownProperties:a});let u;e.$async&&(u=s.scopeValue("Error",{ref:MV.default,code:(0,ga._)`require("ajv/dist/runtime/validation_error").default`}));const c=s.scopeName("validate");e.validateName=c;const d={gen:s,allErrors:this.opts.allErrors,data:Bu.default.data,parentData:Bu.default.parentData,parentDataProperty:Bu.default.parentDataProperty,dataNames:[Bu.default.data],dataPathArr:[ga.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:s.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,ga.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:u,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:ga.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ga._)`""`,opts:this.opts,self:this};let h;try{this._compilations.add(e),(0,IV.validateFunctionCode)(d),s.optimize(this.opts.code.optimize);const v=s.toString();h=`${s.scopeRefs(Bu.default.scope)}return ${v}`,this.opts.code.process&&(h=this.opts.code.process(h,e));const w=new Function(`${Bu.default.self}`,`${Bu.default.scope}`,h)(this,this.scope.get());if(this.scope.value(c,{ref:w}),w.errors=null,w.schema=e.schema,w.schemaEnv=e,e.$async&&(w.$async=!0),this.opts.code.source===!0&&(w.source={validateName:c,validateCode:v,scopeValues:s._values}),this.opts.unevaluated){const{props:_,items:E}=d;w.evaluated={props:_ instanceof ga.Name?void 0:_,items:E instanceof ga.Name?void 0:E,dynamicProps:_ instanceof ga.Name,dynamicItems:E instanceof ga.Name},w.source&&(w.source.evaluated=(0,ga.stringify)(w.evaluated))}return e.validate=w,e}catch(v){throw delete e.validate,delete e.validateName,h&&this.logger.error("Error compiling schema, function code:",h),v}finally{this._compilations.delete(e)}}Jr.compileSchema=L1;function AV(e,t,n){var r;n=(0,Ea.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let a=zV.call(this,e,n);if(a===void 0){const s=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:u}=this.opts;s&&(a=new Ug({schema:s,schemaId:u,root:e,baseId:t}))}if(a!==void 0)return e.refs[n]=jV.call(this,a)}Jr.resolveRef=AV;function jV(e){return(0,Ea.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:L1.call(this,e)}function LT(e){for(const t of this._compilations)if(LV(t,e))return t}Jr.getCompilingSchema=LT;function LV(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function zV(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||Hg.call(this,e,t)}function Hg(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Ea._getFullPath)(this.opts.uriResolver,n);let i=(0,Ea.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return Z0.call(this,n,e);const a=(0,Ea.normalizeId)(r),s=this.refs[a]||this.schemas[a];if(typeof s=="string"){const u=Hg.call(this,e,s);return typeof(u==null?void 0:u.schema)!="object"?void 0:Z0.call(this,n,u)}if(typeof(s==null?void 0:s.schema)=="object"){if(s.validate||L1.call(this,s),a===(0,Ea.normalizeId)(t)){const{schema:u}=s,{schemaId:c}=this.opts,d=u[c];return d&&(i=(0,Ea.resolveUrl)(this.opts.uriResolver,i,d)),new Ug({schema:u,schemaId:c,root:e,baseId:i})}return Z0.call(this,n,s)}}Jr.resolveSchema=Hg;const FV=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Z0(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const u of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const c=n[(0,Xk.unescapeFragment)(u)];if(c===void 0)return;n=c;const d=typeof n=="object"&&n[this.opts.schemaId];!FV.has(u)&&d&&(t=(0,Ea.resolveUrl)(this.opts.uriResolver,t,d))}let a;if(typeof n!="boolean"&&n.$ref&&!(0,Xk.schemaHasRulesButRef)(n,this.RULES)){const u=(0,Ea.resolveUrl)(this.opts.uriResolver,t,n.$ref);a=Hg.call(this,r,u)}const{schemaId:s}=this.opts;if(a=a||new Ug({schema:n,schemaId:s,root:r,baseId:t}),a.schema!==a.root.schema)return a}const BV="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",WV="Meta-schema for $data reference (JSON AnySchema extension proposal)",UV="object",HV=["$data"],KV={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},qV=!1,YV={$id:BV,description:WV,type:UV,required:HV,properties:KV,additionalProperties:qV};var z1={},Kg={exports:{}};const VV=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),zT=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function F1(e){let t="",n=0,r=0;for(r=0;r<e.length;r++)if(n=e[r].charCodeAt(0),n!==48){if(!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r];break}for(r+=1;r<e.length;r++){if(n=e[r].charCodeAt(0),!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r]}return t}const XV=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function Qk(e){return e.length=0,!0}function QV(e,t,n){if(e.length){const r=F1(e);if(r!=="")t.push(r);else return n.error=!0,!1;e.length=0}return!0}function GV(e){let t=0;const n={error:!1,address:"",zone:""},r=[],i=[];let a=!1,s=!1,u=QV;for(let c=0;c<e.length;c++){const d=e[c];if(!(d==="["||d==="]"))if(d===":"){if(a===!0&&(s=!0),!u(i,r,n))break;if(++t>7){n.error=!0;break}c>0&&e[c-1]===":"&&(a=!0),r.push(":");continue}else if(d==="%"){if(!u(i,r,n))break;u=Qk}else{i.push(d);continue}}return i.length&&(u===Qk?n.zone=i.join(""):s?r.push(i.join("")):r.push(F1(i))),n.address=r.join(""),n}function FT(e){if(JV(e,":")<2)return{host:e,isIPV6:!1};const t=GV(e);if(t.error)return{host:e,isIPV6:!1};{let n=t.address,r=t.address;return t.zone&&(n+="%"+t.zone,r+="%25"+t.zone),{host:n,isIPV6:!0,escapedHost:r}}}function JV(e,t){let n=0;for(let r=0;r<e.length;r++)e[r]===t&&n++;return n}function ZV(e){let t=e;const n=[];let r=-1,i=0;for(;i=t.length;){if(i===1){if(t===".")break;if(t==="/"){n.push("/");break}else{n.push(t);break}}else if(i===2){if(t[0]==="."){if(t[1]===".")break;if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&(t[1]==="."||t[1]==="/")){n.push("/");break}}else if(i===3&&t==="/.."){n.length!==0&&n.pop(),n.push("/");break}if(t[0]==="."){if(t[1]==="."){if(t[2]==="/"){t=t.slice(3);continue}}else if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&t[1]==="."){if(t[2]==="/"){t=t.slice(2);continue}else if(t[2]==="."&&t[3]==="/"){t=t.slice(3),n.length!==0&&n.pop();continue}}if((r=t.indexOf("/",1))===-1){n.push(t);break}else n.push(t.slice(0,r)),t=t.slice(r)}return n.join("")}function e7(e,t){const n=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=n(e.scheme)),e.userinfo!==void 0&&(e.userinfo=n(e.userinfo)),e.host!==void 0&&(e.host=n(e.host)),e.path!==void 0&&(e.path=n(e.path)),e.query!==void 0&&(e.query=n(e.query)),e.fragment!==void 0&&(e.fragment=n(e.fragment)),e}function t7(e){const t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let n=unescape(e.host);if(!zT(n)){const r=FT(n);r.isIPV6===!0?n=`[${r.escapedHost}]`:n=e.host}t.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}var BT={nonSimpleDomain:XV,recomposeAuthority:t7,normalizeComponentEncoding:e7,removeDotSegments:ZV,isIPv4:zT,isUUID:VV,normalizeIPv6:FT,stringArrayToHexStripped:F1};const{isUUID:n7}=BT,r7=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,i7=["http","https","ws","wss","urn","urn:uuid"];function a7(e){return i7.indexOf(e)!==-1}function B1(e){return e.secure===!0?!0:e.secure===!1?!1:e.scheme?e.scheme.length===3&&(e.scheme[0]==="w"||e.scheme[0]==="W")&&(e.scheme[1]==="s"||e.scheme[1]==="S")&&(e.scheme[2]==="s"||e.scheme[2]==="S"):!1}function WT(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function UT(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function o7(e){return e.secure=B1(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function s7(e){if((e.port===(B1(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,n]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=n,e.resourceName=void 0}return e.fragment=void 0,e}function u7(e,t){if(!e.path)return e.error="URN can not be parsed",e;const n=e.path.match(r7);if(n){const r=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];const i=`${r}:${t.nid||e.nid}`,a=W1(i);e.path=void 0,a&&(e=a.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function l7(e,t){if(e.nid===void 0)throw new Error("URN without nid cannot be serialized");const n=t.scheme||e.scheme||"urn",r=e.nid.toLowerCase(),i=`${n}:${t.nid||r}`,a=W1(i);a&&(e=a.serialize(e,t));const s=e,u=e.nss;return s.path=`${r||t.nid}:${u}`,t.skipEscape=!0,s}function c7(e,t){const n=e;return n.uuid=n.nss,n.nss=void 0,!t.tolerant&&(!n.uuid||!n7(n.uuid))&&(n.error=n.error||"UUID is not valid."),n}function f7(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const HT={scheme:"http",domainHost:!0,parse:WT,serialize:UT},d7={scheme:"https",domainHost:HT.domainHost,parse:WT,serialize:UT},nv={scheme:"ws",domainHost:!0,parse:o7,serialize:s7},h7={scheme:"wss",domainHost:nv.domainHost,parse:nv.parse,serialize:nv.serialize},p7={scheme:"urn",parse:u7,serialize:l7,skipNormalize:!0},m7={scheme:"urn:uuid",parse:c7,serialize:f7,skipNormalize:!0},eg={http:HT,https:d7,ws:nv,wss:h7,urn:p7,"urn:uuid":m7};Object.setPrototypeOf(eg,null);function W1(e){return e&&(eg[e]||eg[e.toLowerCase()])||void 0}var v7={wsIsSecure:B1,SCHEMES:eg,isValidSchemeName:a7,getSchemeHandler:W1};const{normalizeIPv6:g7,removeDotSegments:bd,recomposeAuthority:y7,normalizeComponentEncoding:Sm,isIPv4:w7,nonSimpleDomain:_7}=BT,{SCHEMES:b7,getSchemeHandler:KT}=v7;function S7(e,t){return typeof e=="string"?e=Ja(Vo(e,t),t):typeof e=="object"&&(e=Vo(Ja(e,t),t)),e}function x7(e,t,n){const r=n?Object.assign({scheme:"null"},n):{scheme:"null"},i=qT(Vo(e,r),Vo(t,r),r,!0);return r.skipEscape=!0,Ja(i,r)}function qT(e,t,n,r){const i={};return r||(e=Vo(Ja(e,n),n),t=Vo(Ja(t,n),n)),n=n||{},!n.tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=bd(t.path||""),i.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=bd(t.path||""),i.query=t.query):(t.path?(t.path[0]==="/"?i.path=bd(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?i.path="/"+t.path:e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path,i.path=bd(i.path)),i.query=t.query):(i.path=e.path,t.query!==void 0?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function E7(e,t,n){return typeof e=="string"?(e=unescape(e),e=Ja(Sm(Vo(e,n),!0),{...n,skipEscape:!0})):typeof e=="object"&&(e=Ja(Sm(e,!0),{...n,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Ja(Sm(Vo(t,n),!0),{...n,skipEscape:!0})):typeof t=="object"&&(t=Ja(Sm(t,!0),{...n,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Ja(e,t){const n={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},r=Object.assign({},t),i=[],a=KT(r.scheme||n.scheme);a&&a.serialize&&a.serialize(n,r),n.path!==void 0&&(r.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),n.scheme!==void 0&&(n.path=n.path.split("%3A").join(":")))),r.reference!=="suffix"&&n.scheme&&i.push(n.scheme,":");const s=y7(n);if(s!==void 0&&(r.reference!=="suffix"&&i.push("//"),i.push(s),n.path&&n.path[0]!=="/"&&i.push("/")),n.path!==void 0){let u=n.path;!r.absolutePath&&(!a||!a.absolutePath)&&(u=bd(u)),s===void 0&&u[0]==="/"&&u[1]==="/"&&(u="/%2F"+u.slice(2)),i.push(u)}return n.query!==void 0&&i.push("?",n.query),n.fragment!==void 0&&i.push("#",n.fragment),i.join("")}const P7=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Vo(e,t){const n=Object.assign({},t),r={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let i=!1;n.reference==="suffix"&&(n.scheme?e=n.scheme+":"+e:e="//"+e);const a=e.match(P7);if(a){if(r.scheme=a[1],r.userinfo=a[3],r.host=a[4],r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=a[7],r.fragment=a[8],isNaN(r.port)&&(r.port=a[5]),r.host)if(w7(r.host)===!1){const c=g7(r.host);r.host=c.host.toLowerCase(),i=c.isIPV6}else i=!0;r.scheme===void 0&&r.userinfo===void 0&&r.host===void 0&&r.port===void 0&&r.query===void 0&&!r.path?r.reference="same-document":r.scheme===void 0?r.reference="relative":r.fragment===void 0?r.reference="absolute":r.reference="uri",n.reference&&n.reference!=="suffix"&&n.reference!==r.reference&&(r.error=r.error||"URI is not a "+n.reference+" reference.");const s=KT(n.scheme||r.scheme);if(!n.unicodeSupport&&(!s||!s.unicodeSupport)&&r.host&&(n.domainHost||s&&s.domainHost)&&i===!1&&_7(r.host))try{r.host=URL.domainToASCII(r.host.toLowerCase())}catch(u){r.error=r.error||"Host's domain name can not be converted to ASCII: "+u}(!s||s&&!s.skipNormalize)&&(e.indexOf("%")!==-1&&(r.scheme!==void 0&&(r.scheme=unescape(r.scheme)),r.host!==void 0&&(r.host=unescape(r.host))),r.path&&(r.path=escape(unescape(r.path))),r.fragment&&(r.fragment=encodeURI(decodeURIComponent(r.fragment)))),s&&s.parse&&s.parse(r,n)}else r.error=r.error||"URI can not be parsed.";return r}const U1={SCHEMES:b7,normalize:S7,resolve:x7,resolveComponent:qT,equal:E7,serialize:Ja,parse:Vo};Kg.exports=U1;Kg.exports.default=U1;Kg.exports.fastUri=U1;var k7=Kg.exports;Object.defineProperty(z1,"__esModule",{value:!0});const YT=k7;YT.code='require("ajv/dist/runtime/uri").default';z1.default=YT;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Da;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=ut;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=ip,i=vf,a=wl,s=Jr,u=ut,c=ir,d=An,h=je,v=YV,g=z1,w=(G,F)=>new RegExp(G,F);w.code="new RegExp";const _=["removeAdditional","useDefaults","coerceTypes"],E=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),C={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},x={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},S=200;function P(G){var F,ee,X,I,H,ae,ge,$e,me,Me,Ge,Ke,an,Et,At,dn,on,sr,Yn,sn,_t,Vn,Xn,ra,Qn;const Gn=G.strict,Sn=(F=G.code)===null||F===void 0?void 0:F.optimize,un=Sn===!0||Sn===void 0?1:Sn||0,ur=(X=(ee=G.code)===null||ee===void 0?void 0:ee.regExp)!==null&&X!==void 0?X:w,si=(I=G.uriResolver)!==null&&I!==void 0?I:g.default;return{strictSchema:(ae=(H=G.strictSchema)!==null&&H!==void 0?H:Gn)!==null&&ae!==void 0?ae:!0,strictNumbers:($e=(ge=G.strictNumbers)!==null&&ge!==void 0?ge:Gn)!==null&&$e!==void 0?$e:!0,strictTypes:(Me=(me=G.strictTypes)!==null&&me!==void 0?me:Gn)!==null&&Me!==void 0?Me:"log",strictTuples:(Ke=(Ge=G.strictTuples)!==null&&Ge!==void 0?Ge:Gn)!==null&&Ke!==void 0?Ke:"log",strictRequired:(Et=(an=G.strictRequired)!==null&&an!==void 0?an:Gn)!==null&&Et!==void 0?Et:!1,code:G.code?{...G.code,optimize:un,regExp:ur}:{optimize:un,regExp:ur},loopRequired:(At=G.loopRequired)!==null&&At!==void 0?At:S,loopEnum:(dn=G.loopEnum)!==null&&dn!==void 0?dn:S,meta:(on=G.meta)!==null&&on!==void 0?on:!0,messages:(sr=G.messages)!==null&&sr!==void 0?sr:!0,inlineRefs:(Yn=G.inlineRefs)!==null&&Yn!==void 0?Yn:!0,schemaId:(sn=G.schemaId)!==null&&sn!==void 0?sn:"$id",addUsedSchema:(_t=G.addUsedSchema)!==null&&_t!==void 0?_t:!0,validateSchema:(Vn=G.validateSchema)!==null&&Vn!==void 0?Vn:!0,validateFormats:(Xn=G.validateFormats)!==null&&Xn!==void 0?Xn:!0,unicodeRegExp:(ra=G.unicodeRegExp)!==null&&ra!==void 0?ra:!0,int32range:(Qn=G.int32range)!==null&&Qn!==void 0?Qn:!0,uriResolver:si}}class M{constructor(F={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,F=this.opts={...F,...P(F)};const{es5:ee,lines:X}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:E,es5:ee,lines:X}),this.logger=pe(F.logger);const I=F.validateFormats;F.validateFormats=!1,this.RULES=(0,a.getRules)(),T.call(this,C,F,"NOT SUPPORTED"),T.call(this,x,F,"DEPRECATED","warn"),this._metaOpts=de.call(this),F.formats&&re.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),F.keywords&&he.call(this,F.keywords),typeof F.meta=="object"&&this.addMetaSchema(F.meta),W.call(this),F.validateFormats=I}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:F,meta:ee,schemaId:X}=this.opts;let I=v;X==="id"&&(I={...v},I.id=I.$id,delete I.$id),ee&&F&&this.addMetaSchema(I,I[X],!1)}defaultMeta(){const{meta:F,schemaId:ee}=this.opts;return this.opts.defaultMeta=typeof F=="object"?F[ee]||F:void 0}validate(F,ee){let X;if(typeof F=="string"){if(X=this.getSchema(F),!X)throw new Error(`no schema with key or ref "${F}"`)}else X=this.compile(F);const I=X(ee);return"$async"in X||(this.errors=X.errors),I}compile(F,ee){const X=this._addSchema(F,ee);return X.validate||this._compileSchemaEnv(X)}compileAsync(F,ee){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:X}=this.opts;return I.call(this,F,ee);async function I(Me,Ge){await H.call(this,Me.$schema);const Ke=this._addSchema(Me,Ge);return Ke.validate||ae.call(this,Ke)}async function H(Me){Me&&!this.getSchema(Me)&&await I.call(this,{$ref:Me},!0)}async function ae(Me){try{return this._compileSchemaEnv(Me)}catch(Ge){if(!(Ge instanceof i.default))throw Ge;return ge.call(this,Ge),await $e.call(this,Ge.missingSchema),ae.call(this,Me)}}function ge({missingSchema:Me,missingRef:Ge}){if(this.refs[Me])throw new Error(`AnySchema ${Me} is loaded but ${Ge} cannot be resolved`)}async function $e(Me){const Ge=await me.call(this,Me);this.refs[Me]||await H.call(this,Ge.$schema),this.refs[Me]||this.addSchema(Ge,Me,ee)}async function me(Me){const Ge=this._loading[Me];if(Ge)return Ge;try{return await(this._loading[Me]=X(Me))}finally{delete this._loading[Me]}}}addSchema(F,ee,X,I=this.opts.validateSchema){if(Array.isArray(F)){for(const ae of F)this.addSchema(ae,void 0,X,I);return this}let H;if(typeof F=="object"){const{schemaId:ae}=this.opts;if(H=F[ae],H!==void 0&&typeof H!="string")throw new Error(`schema ${ae} must be string`)}return ee=(0,c.normalizeId)(ee||H),this._checkUnique(ee),this.schemas[ee]=this._addSchema(F,X,ee,I,!0),this}addMetaSchema(F,ee,X=this.opts.validateSchema){return this.addSchema(F,ee,!0,X),this}validateSchema(F,ee){if(typeof F=="boolean")return!0;let X;if(X=F.$schema,X!==void 0&&typeof X!="string")throw new Error("$schema must be a string");if(X=X||this.opts.defaultMeta||this.defaultMeta(),!X)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const I=this.validate(X,F);if(!I&&ee){const H="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(H);else throw new Error(H)}return I}getSchema(F){let ee;for(;typeof(ee=U.call(this,F))=="string";)F=ee;if(ee===void 0){const{schemaId:X}=this.opts,I=new s.SchemaEnv({schema:{},schemaId:X});if(ee=s.resolveSchema.call(this,I,F),!ee)return;this.refs[F]=ee}return ee.validate||this._compileSchemaEnv(ee)}removeSchema(F){if(F instanceof RegExp)return this._removeAllSchemas(this.schemas,F),this._removeAllSchemas(this.refs,F),this;switch(typeof F){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const ee=U.call(this,F);return typeof ee=="object"&&this._cache.delete(ee.schema),delete this.schemas[F],delete this.refs[F],this}case"object":{const ee=F;this._cache.delete(ee);let X=F[this.opts.schemaId];return X&&(X=(0,c.normalizeId)(X),delete this.schemas[X],delete this.refs[X]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(F){for(const ee of F)this.addKeyword(ee);return this}addKeyword(F,ee){let X;if(typeof F=="string")X=F,typeof ee=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),ee.keyword=X);else if(typeof F=="object"&&ee===void 0){if(ee=F,X=ee.keyword,Array.isArray(X)&&!X.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Ce.call(this,X,ee),!ee)return(0,h.eachItem)(X,H=>Le.call(this,H)),this;We.call(this,ee);const I={...ee,type:(0,d.getJSONTypes)(ee.type),schemaType:(0,d.getJSONTypes)(ee.schemaType)};return(0,h.eachItem)(X,I.type.length===0?H=>Le.call(this,H,I):H=>I.type.forEach(ae=>Le.call(this,H,I,ae))),this}getKeyword(F){const ee=this.RULES.all[F];return typeof ee=="object"?ee.definition:!!ee}removeKeyword(F){const{RULES:ee}=this;delete ee.keywords[F],delete ee.all[F];for(const X of ee.rules){const I=X.rules.findIndex(H=>H.keyword===F);I>=0&&X.rules.splice(I,1)}return this}addFormat(F,ee){return typeof ee=="string"&&(ee=new RegExp(ee)),this.formats[F]=ee,this}errorsText(F=this.errors,{separator:ee=", ",dataVar:X="data"}={}){return!F||F.length===0?"No errors":F.map(I=>`${X}${I.instancePath} ${I.message}`).reduce((I,H)=>I+ee+H)}$dataMetaSchema(F,ee){const X=this.RULES.all;F=JSON.parse(JSON.stringify(F));for(const I of ee){const H=I.split("/").slice(1);let ae=F;for(const ge of H)ae=ae[ge];for(const ge in X){const $e=X[ge];if(typeof $e!="object")continue;const{$data:me}=$e.definition,Me=ae[ge];me&&Me&&(ae[ge]=_e(Me))}}return F}_removeAllSchemas(F,ee){for(const X in F){const I=F[X];(!ee||ee.test(X))&&(typeof I=="string"?delete F[X]:I&&!I.meta&&(this._cache.delete(I.schema),delete F[X]))}}_addSchema(F,ee,X,I=this.opts.validateSchema,H=this.opts.addUsedSchema){let ae;const{schemaId:ge}=this.opts;if(typeof F=="object")ae=F[ge];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof F!="boolean")throw new Error("schema must be object or boolean")}let $e=this._cache.get(F);if($e!==void 0)return $e;X=(0,c.normalizeId)(ae||X);const me=c.getSchemaRefs.call(this,F,X);return $e=new s.SchemaEnv({schema:F,schemaId:ge,meta:ee,baseId:X,localRefs:me}),this._cache.set($e.schema,$e),H&&!X.startsWith("#")&&(X&&this._checkUnique(X),this.refs[X]=$e),I&&this.validateSchema(F,!0),$e}_checkUnique(F){if(this.schemas[F]||this.refs[F])throw new Error(`schema with key or id "${F}" already exists`)}_compileSchemaEnv(F){if(F.meta?this._compileMetaSchema(F):s.compileSchema.call(this,F),!F.validate)throw new Error("ajv implementation error");return F.validate}_compileMetaSchema(F){const ee=this.opts;this.opts=this._metaOpts;try{s.compileSchema.call(this,F)}finally{this.opts=ee}}}M.ValidationError=r.default,M.MissingRefError=i.default,e.default=M;function T(G,F,ee,X="error"){for(const I in G){const H=I;H in F&&this.logger[X](`${ee}: option ${I}. ${G[H]}`)}}function U(G){return G=(0,c.normalizeId)(G),this.schemas[G]||this.refs[G]}function W(){const G=this.opts.schemas;if(G)if(Array.isArray(G))this.addSchema(G);else for(const F in G)this.addSchema(G[F],F)}function re(){for(const G in this.opts.formats){const F=this.opts.formats[G];F&&this.addFormat(G,F)}}function he(G){if(Array.isArray(G)){this.addVocabulary(G);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const F in G){const ee=G[F];ee.keyword||(ee.keyword=F),this.addKeyword(ee)}}function de(){const G={...this.opts};for(const F of _)delete G[F];return G}const ce={log(){},warn(){},error(){}};function pe(G){if(G===!1)return ce;if(G===void 0)return console;if(G.log&&G.warn&&G.error)return G;throw new Error("logger must implement log, warn and error methods")}const xe=/^[a-z_$][a-z0-9_$:-]*$/i;function Ce(G,F){const{RULES:ee}=this;if((0,h.eachItem)(G,X=>{if(ee.keywords[X])throw new Error(`Keyword ${X} is already defined`);if(!xe.test(X))throw new Error(`Keyword ${X} has invalid name`)}),!!F&&F.$data&&!("code"in F||"validate"in F))throw new Error('$data keyword must have "code" or "validate" function')}function Le(G,F,ee){var X;const I=F==null?void 0:F.post;if(ee&&I)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:H}=this;let ae=I?H.post:H.rules.find(({type:$e})=>$e===ee);if(ae||(ae={type:ee,rules:[]},H.rules.push(ae)),H.keywords[G]=!0,!F)return;const ge={keyword:G,definition:{...F,type:(0,d.getJSONTypes)(F.type),schemaType:(0,d.getJSONTypes)(F.schemaType)}};F.before?qe.call(this,ae,ge,F.before):ae.rules.push(ge),H.all[G]=ge,(X=F.implements)===null||X===void 0||X.forEach($e=>this.addKeyword($e))}function qe(G,F,ee){const X=G.rules.findIndex(I=>I.keyword===ee);X>=0?G.rules.splice(X,0,F):(G.rules.push(F),this.logger.warn(`rule ${ee} is not defined`))}function We(G){let{metaSchema:F}=G;F!==void 0&&(G.$data&&this.opts.$data&&(F=_e(F)),G.validateSchema=this.compile(F,!0))}const oe={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function _e(G){return{anyOf:[G,oe]}}})(oT);var H1={},K1={},q1={};Object.defineProperty(q1,"__esModule",{value:!0});const C7={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};q1.default=C7;var _l={};Object.defineProperty(_l,"__esModule",{value:!0});_l.callRef=_l.getValidate=void 0;const D7=vf,Gk=ft,Qr=ut,rc=ao,Jk=Jr,xm=je,O7={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:a,validateName:s,opts:u,self:c}=r,{root:d}=a;if((n==="#"||n==="#/")&&i===d.baseId)return v();const h=Jk.resolveRef.call(c,d,i,n);if(h===void 0)throw new D7.default(r.opts.uriResolver,i,n);if(h instanceof Jk.SchemaEnv)return g(h);return w(h);function v(){if(a===d)return rv(e,s,a,a.$async);const _=t.scopeValue("root",{ref:d});return rv(e,(0,Qr._)`${_}.validate`,d,d.$async)}function g(_){const E=VT(e,_);rv(e,E,_,_.$async)}function w(_){const E=t.scopeValue("schema",u.code.source===!0?{ref:_,code:(0,Qr.stringify)(_)}:{ref:_}),C=t.name("valid"),x=e.subschema({schema:_,dataTypes:[],schemaPath:Qr.nil,topSchemaRef:E,errSchemaPath:n},C);e.mergeEvaluated(x),e.ok(C)}}};function VT(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Qr._)`${n.scopeValue("wrapper",{ref:t})}.validate`}_l.getValidate=VT;function rv(e,t,n,r){const{gen:i,it:a}=e,{allErrors:s,schemaEnv:u,opts:c}=a,d=c.passContext?rc.default.this:Qr.nil;r?h():v();function h(){if(!u.$async)throw new Error("async schema referenced by sync schema");const _=i.let("valid");i.try(()=>{i.code((0,Qr._)`await ${(0,Gk.callValidateCode)(e,t,d)}`),w(t),s||i.assign(_,!0)},E=>{i.if((0,Qr._)`!(${E} instanceof ${a.ValidationError})`,()=>i.throw(E)),g(E),s||i.assign(_,!1)}),e.ok(_)}function v(){e.result((0,Gk.callValidateCode)(e,t,d),()=>w(t),()=>g(t))}function g(_){const E=(0,Qr._)`${_}.errors`;i.assign(rc.default.vErrors,(0,Qr._)`${rc.default.vErrors} === null ? ${E} : ${rc.default.vErrors}.concat(${E})`),i.assign(rc.default.errors,(0,Qr._)`${rc.default.vErrors}.length`)}function w(_){var E;if(!a.opts.unevaluated)return;const C=(E=n==null?void 0:n.validate)===null||E===void 0?void 0:E.evaluated;if(a.props!==!0)if(C&&!C.dynamicProps)C.props!==void 0&&(a.props=xm.mergeEvaluated.props(i,C.props,a.props));else{const x=i.var("props",(0,Qr._)`${_}.evaluated.props`);a.props=xm.mergeEvaluated.props(i,x,a.props,Qr.Name)}if(a.items!==!0)if(C&&!C.dynamicItems)C.items!==void 0&&(a.items=xm.mergeEvaluated.items(i,C.items,a.items));else{const x=i.var("items",(0,Qr._)`${_}.evaluated.items`);a.items=xm.mergeEvaluated.items(i,x,a.items,Qr.Name)}}}_l.callRef=rv;_l.default=O7;Object.defineProperty(K1,"__esModule",{value:!0});const $7=q1,R7=_l,N7=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",$7.default,R7.default];K1.default=N7;var Y1={},V1={};Object.defineProperty(V1,"__esModule",{value:!0});const tg=ut,gs=tg.operators,ng={maximum:{okStr:"<=",ok:gs.LTE,fail:gs.GT},minimum:{okStr:">=",ok:gs.GTE,fail:gs.LT},exclusiveMaximum:{okStr:"<",ok:gs.LT,fail:gs.GTE},exclusiveMinimum:{okStr:">",ok:gs.GT,fail:gs.LTE}},T7={message:({keyword:e,schemaCode:t})=>(0,tg.str)`must be ${ng[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,tg._)`{comparison: ${ng[e].okStr}, limit: ${t}}`},M7={keyword:Object.keys(ng),type:"number",schemaType:"number",$data:!0,error:T7,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,tg._)`${n} ${ng[t].fail} ${r} || isNaN(${n})`)}};V1.default=M7;var X1={};Object.defineProperty(X1,"__esModule",{value:!0});const Ld=ut,I7={message:({schemaCode:e})=>(0,Ld.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Ld._)`{multipleOf: ${e}}`},A7={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:I7,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,a=i.opts.multipleOfPrecision,s=t.let("res"),u=a?(0,Ld._)`Math.abs(Math.round(${s}) - ${s}) > 1e-${a}`:(0,Ld._)`${s} !== parseInt(${s})`;e.fail$data((0,Ld._)`(${r} === 0 || (${s} = ${n}/${r}, ${u}))`)}};X1.default=A7;var Q1={},G1={};Object.defineProperty(G1,"__esModule",{value:!0});function XT(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}G1.default=XT;XT.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Q1,"__esModule",{value:!0});const Vu=ut,j7=je,L7=G1,z7={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Vu.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Vu._)`{limit: ${e}}`},F7={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:z7,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,a=t==="maxLength"?Vu.operators.GT:Vu.operators.LT,s=i.opts.unicode===!1?(0,Vu._)`${n}.length`:(0,Vu._)`${(0,j7.useFunc)(e.gen,L7.default)}(${n})`;e.fail$data((0,Vu._)`${s} ${a} ${r}`)}};Q1.default=F7;var J1={};Object.defineProperty(J1,"__esModule",{value:!0});const B7=ft,rg=ut,W7={message:({schemaCode:e})=>(0,rg.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,rg._)`{pattern: ${e}}`},U7={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:W7,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:a}=e,s=a.opts.unicodeRegExp?"u":"",u=n?(0,rg._)`(new RegExp(${i}, ${s}))`:(0,B7.usePattern)(e,r);e.fail$data((0,rg._)`!${u}.test(${t})`)}};J1.default=U7;var Z1={};Object.defineProperty(Z1,"__esModule",{value:!0});const zd=ut,H7={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,zd.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,zd._)`{limit: ${e}}`},K7={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:H7,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?zd.operators.GT:zd.operators.LT;e.fail$data((0,zd._)`Object.keys(${n}).length ${i} ${r}`)}};Z1.default=K7;var eS={};Object.defineProperty(eS,"__esModule",{value:!0});const pd=ft,Fd=ut,q7=je,Y7={message:({params:{missingProperty:e}})=>(0,Fd.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Fd._)`{missingProperty: ${e}}`},V7={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Y7,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:a,it:s}=e,{opts:u}=s;if(!a&&n.length===0)return;const c=n.length>=u.loopRequired;if(s.allErrors?d():h(),u.strictRequired){const w=e.parentSchema.properties,{definedProperties:_}=e.it;for(const E of n)if((w==null?void 0:w[E])===void 0&&!_.has(E)){const C=s.schemaEnv.baseId+s.errSchemaPath,x=`required property "${E}" is not defined at "${C}" (strictRequired)`;(0,q7.checkStrictMode)(s,x,s.opts.strictRequired)}}function d(){if(c||a)e.block$data(Fd.nil,v);else for(const w of n)(0,pd.checkReportMissingProp)(e,w)}function h(){const w=t.let("missing");if(c||a){const _=t.let("valid",!0);e.block$data(_,()=>g(w,_)),e.ok(_)}else t.if((0,pd.checkMissingProp)(e,n,w)),(0,pd.reportMissingProp)(e,w),t.else()}function v(){t.forOf("prop",r,w=>{e.setParams({missingProperty:w}),t.if((0,pd.noPropertyInData)(t,i,w,u.ownProperties),()=>e.error())})}function g(w,_){e.setParams({missingProperty:w}),t.forOf(w,r,()=>{t.assign(_,(0,pd.propertyInData)(t,i,w,u.ownProperties)),t.if((0,Fd.not)(_),()=>{e.error(),t.break()})},Fd.nil)}}};eS.default=V7;var tS={};Object.defineProperty(tS,"__esModule",{value:!0});const Bd=ut,X7={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,Bd.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,Bd._)`{limit: ${e}}`},Q7={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:X7,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?Bd.operators.GT:Bd.operators.LT;e.fail$data((0,Bd._)`${n}.length ${i} ${r}`)}};tS.default=Q7;var nS={},ap={};Object.defineProperty(ap,"__esModule",{value:!0});const QT=ST;QT.code='require("ajv/dist/runtime/equal").default';ap.default=QT;Object.defineProperty(nS,"__esModule",{value:!0});const ew=An,nr=ut,G7=je,J7=ap,Z7={message:({params:{i:e,j:t}})=>(0,nr.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,nr._)`{i: ${e}, j: ${t}}`},eX={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Z7,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:a,schemaCode:s,it:u}=e;if(!r&&!i)return;const c=t.let("valid"),d=a.items?(0,ew.getSchemaTypes)(a.items):[];e.block$data(c,h,(0,nr._)`${s} === false`),e.ok(c);function h(){const _=t.let("i",(0,nr._)`${n}.length`),E=t.let("j");e.setParams({i:_,j:E}),t.assign(c,!0),t.if((0,nr._)`${_} > 1`,()=>(v()?g:w)(_,E))}function v(){return d.length>0&&!d.some(_=>_==="object"||_==="array")}function g(_,E){const C=t.name("item"),x=(0,ew.checkDataTypes)(d,C,u.opts.strictNumbers,ew.DataType.Wrong),S=t.const("indices",(0,nr._)`{}`);t.for((0,nr._)`;${_}--;`,()=>{t.let(C,(0,nr._)`${n}[${_}]`),t.if(x,(0,nr._)`continue`),d.length>1&&t.if((0,nr._)`typeof ${C} == "string"`,(0,nr._)`${C} += "_"`),t.if((0,nr._)`typeof ${S}[${C}] == "number"`,()=>{t.assign(E,(0,nr._)`${S}[${C}]`),e.error(),t.assign(c,!1).break()}).code((0,nr._)`${S}[${C}] = ${_}`)})}function w(_,E){const C=(0,G7.useFunc)(t,J7.default),x=t.name("outer");t.label(x).for((0,nr._)`;${_}--;`,()=>t.for((0,nr._)`${E} = ${_}; ${E}--;`,()=>t.if((0,nr._)`${C}(${n}[${_}], ${n}[${E}])`,()=>{e.error(),t.assign(c,!1).break(x)})))}}};nS.default=eX;var rS={};Object.defineProperty(rS,"__esModule",{value:!0});const W_=ut,tX=je,nX=ap,rX={message:"must be equal to constant",params:({schemaCode:e})=>(0,W_._)`{allowedValue: ${e}}`},iX={keyword:"const",$data:!0,error:rX,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:a}=e;r||a&&typeof a=="object"?e.fail$data((0,W_._)`!${(0,tX.useFunc)(t,nX.default)}(${n}, ${i})`):e.fail((0,W_._)`${a} !== ${n}`)}};rS.default=iX;var iS={};Object.defineProperty(iS,"__esModule",{value:!0});const Sd=ut,aX=je,oX=ap,sX={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Sd._)`{allowedValues: ${e}}`},uX={keyword:"enum",schemaType:"array",$data:!0,error:sX,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:a,it:s}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const u=i.length>=s.opts.loopEnum;let c;const d=()=>c??(c=(0,aX.useFunc)(t,oX.default));let h;if(u||r)h=t.let("valid"),e.block$data(h,v);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const w=t.const("vSchema",a);h=(0,Sd.or)(...i.map((_,E)=>g(w,E)))}e.pass(h);function v(){t.assign(h,!1),t.forOf("v",a,w=>t.if((0,Sd._)`${d()}(${n}, ${w})`,()=>t.assign(h,!0).break()))}function g(w,_){const E=i[_];return typeof E=="object"&&E!==null?(0,Sd._)`${d()}(${n}, ${w}[${_}])`:(0,Sd._)`${n} === ${E}`}}};iS.default=uX;Object.defineProperty(Y1,"__esModule",{value:!0});const lX=V1,cX=X1,fX=Q1,dX=J1,hX=Z1,pX=eS,mX=tS,vX=nS,gX=rS,yX=iS,wX=[lX.default,cX.default,fX.default,dX.default,hX.default,pX.default,mX.default,vX.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},gX.default,yX.default];Y1.default=wX;var aS={},gf={};Object.defineProperty(gf,"__esModule",{value:!0});gf.validateAdditionalItems=void 0;const Xu=ut,U_=je,_X={message:({params:{len:e}})=>(0,Xu.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Xu._)`{limit: ${e}}`},bX={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:_X,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,U_.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}GT(e,r)}};function GT(e,t){const{gen:n,schema:r,data:i,keyword:a,it:s}=e;s.items=!0;const u=n.const("len",(0,Xu._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Xu._)`${u} <= ${t.length}`);else if(typeof r=="object"&&!(0,U_.alwaysValidSchema)(s,r)){const d=n.var("valid",(0,Xu._)`${u} <= ${t.length}`);n.if((0,Xu.not)(d),()=>c(d)),e.ok(d)}function c(d){n.forRange("i",t.length,u,h=>{e.subschema({keyword:a,dataProp:h,dataPropType:U_.Type.Num},d),s.allErrors||n.if((0,Xu.not)(d),()=>n.break())})}}gf.validateAdditionalItems=GT;gf.default=bX;var oS={},yf={};Object.defineProperty(yf,"__esModule",{value:!0});yf.validateTuple=void 0;const Zk=ut,iv=je,SX=ft,xX={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return JT(e,"additionalItems",t);n.items=!0,!(0,iv.alwaysValidSchema)(n,t)&&e.ok((0,SX.validateArray)(e))}};function JT(e,t,n=e.schema){const{gen:r,parentSchema:i,data:a,keyword:s,it:u}=e;h(i),u.opts.unevaluated&&n.length&&u.items!==!0&&(u.items=iv.mergeEvaluated.items(r,n.length,u.items));const c=r.name("valid"),d=r.const("len",(0,Zk._)`${a}.length`);n.forEach((v,g)=>{(0,iv.alwaysValidSchema)(u,v)||(r.if((0,Zk._)`${d} > ${g}`,()=>e.subschema({keyword:s,schemaProp:g,dataProp:g},c)),e.ok(c))});function h(v){const{opts:g,errSchemaPath:w}=u,_=n.length,E=_===v.minItems&&(_===v.maxItems||v[t]===!1);if(g.strictTuples&&!E){const C=`"${s}" is ${_}-tuple, but minItems or maxItems/${t} are not specified or different at path "${w}"`;(0,iv.checkStrictMode)(u,C,g.strictTuples)}}}yf.validateTuple=JT;yf.default=xX;Object.defineProperty(oS,"__esModule",{value:!0});const EX=yf,PX={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,EX.validateTuple)(e,"items")};oS.default=PX;var sS={};Object.defineProperty(sS,"__esModule",{value:!0});const eC=ut,kX=je,CX=ft,DX=gf,OX={message:({params:{len:e}})=>(0,eC.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,eC._)`{limit: ${e}}`},$X={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:OX,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,kX.alwaysValidSchema)(r,t)&&(i?(0,DX.validateAdditionalItems)(e,i):e.ok((0,CX.validateArray)(e)))}};sS.default=$X;var uS={};Object.defineProperty(uS,"__esModule",{value:!0});const Ui=ut,Em=je,RX={message:({params:{min:e,max:t}})=>t===void 0?(0,Ui.str)`must contain at least ${e} valid item(s)`:(0,Ui.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Ui._)`{minContains: ${e}}`:(0,Ui._)`{minContains: ${e}, maxContains: ${t}}`},NX={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:RX,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:a}=e;let s,u;const{minContains:c,maxContains:d}=r;a.opts.next?(s=c===void 0?1:c,u=d):s=1;const h=t.const("len",(0,Ui._)`${i}.length`);if(e.setParams({min:s,max:u}),u===void 0&&s===0){(0,Em.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(u!==void 0&&s>u){(0,Em.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Em.alwaysValidSchema)(a,n)){let E=(0,Ui._)`${h} >= ${s}`;u!==void 0&&(E=(0,Ui._)`${E} && ${h} <= ${u}`),e.pass(E);return}a.items=!0;const v=t.name("valid");u===void 0&&s===1?w(v,()=>t.if(v,()=>t.break())):s===0?(t.let(v,!0),u!==void 0&&t.if((0,Ui._)`${i}.length > 0`,g)):(t.let(v,!1),g()),e.result(v,()=>e.reset());function g(){const E=t.name("_valid"),C=t.let("count",0);w(E,()=>t.if(E,()=>_(C)))}function w(E,C){t.forRange("i",0,h,x=>{e.subschema({keyword:"contains",dataProp:x,dataPropType:Em.Type.Num,compositeRule:!0},E),C()})}function _(E){t.code((0,Ui._)`${E}++`),u===void 0?t.if((0,Ui._)`${E} >= ${s}`,()=>t.assign(v,!0).break()):(t.if((0,Ui._)`${E} > ${u}`,()=>t.assign(v,!1).break()),s===1?t.assign(v,!0):t.if((0,Ui._)`${E} >= ${s}`,()=>t.assign(v,!0)))}}};uS.default=NX;var ZT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=ut,n=je,r=ft;e.error={message:({params:{property:c,depsCount:d,deps:h}})=>{const v=d===1?"property":"properties";return(0,t.str)`must have ${v} ${h} when property ${c} is present`},params:({params:{property:c,depsCount:d,deps:h,missingProperty:v}})=>(0,t._)`{property: ${c},
    missingProperty: ${v},
    depsCount: ${d},
    deps: ${h}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[d,h]=a(c);s(c,d),u(c,h)}};function a({schema:c}){const d={},h={};for(const v in c){if(v==="__proto__")continue;const g=Array.isArray(c[v])?d:h;g[v]=c[v]}return[d,h]}function s(c,d=c.schema){const{gen:h,data:v,it:g}=c;if(Object.keys(d).length===0)return;const w=h.let("missing");for(const _ in d){const E=d[_];if(E.length===0)continue;const C=(0,r.propertyInData)(h,v,_,g.opts.ownProperties);c.setParams({property:_,depsCount:E.length,deps:E.join(", ")}),g.allErrors?h.if(C,()=>{for(const x of E)(0,r.checkReportMissingProp)(c,x)}):(h.if((0,t._)`${C} && (${(0,r.checkMissingProp)(c,E,w)})`),(0,r.reportMissingProp)(c,w),h.else())}}e.validatePropertyDeps=s;function u(c,d=c.schema){const{gen:h,data:v,keyword:g,it:w}=c,_=h.name("valid");for(const E in d)(0,n.alwaysValidSchema)(w,d[E])||(h.if((0,r.propertyInData)(h,v,E,w.opts.ownProperties),()=>{const C=c.subschema({keyword:g,schemaProp:E},_);c.mergeValidEvaluated(C,_)},()=>h.var(_,!0)),c.ok(_))}e.validateSchemaDeps=u,e.default=i})(ZT);var lS={};Object.defineProperty(lS,"__esModule",{value:!0});const eM=ut,TX=je,MX={message:"property name must be valid",params:({params:e})=>(0,eM._)`{propertyName: ${e.propertyName}}`},IX={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:MX,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,TX.alwaysValidSchema)(i,n))return;const a=t.name("valid");t.forIn("key",r,s=>{e.setParams({propertyName:s}),e.subschema({keyword:"propertyNames",data:s,dataTypes:["string"],propertyName:s,compositeRule:!0},a),t.if((0,eM.not)(a),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(a)}};lS.default=IX;var qg={};Object.defineProperty(qg,"__esModule",{value:!0});const Pm=ft,ya=ut,AX=ao,km=je,jX={message:"must NOT have additional properties",params:({params:e})=>(0,ya._)`{additionalProperty: ${e.additionalProperty}}`},LX={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:jX,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:a,it:s}=e;if(!a)throw new Error("ajv implementation error");const{allErrors:u,opts:c}=s;if(s.props=!0,c.removeAdditional!=="all"&&(0,km.alwaysValidSchema)(s,n))return;const d=(0,Pm.allSchemaProperties)(r.properties),h=(0,Pm.allSchemaProperties)(r.patternProperties);v(),e.ok((0,ya._)`${a} === ${AX.default.errors}`);function v(){t.forIn("key",i,C=>{!d.length&&!h.length?_(C):t.if(g(C),()=>_(C))})}function g(C){let x;if(d.length>8){const S=(0,km.schemaRefOrVal)(s,r.properties,"properties");x=(0,Pm.isOwnProperty)(t,S,C)}else d.length?x=(0,ya.or)(...d.map(S=>(0,ya._)`${C} === ${S}`)):x=ya.nil;return h.length&&(x=(0,ya.or)(x,...h.map(S=>(0,ya._)`${(0,Pm.usePattern)(e,S)}.test(${C})`))),(0,ya.not)(x)}function w(C){t.code((0,ya._)`delete ${i}[${C}]`)}function _(C){if(c.removeAdditional==="all"||c.removeAdditional&&n===!1){w(C);return}if(n===!1){e.setParams({additionalProperty:C}),e.error(),u||t.break();return}if(typeof n=="object"&&!(0,km.alwaysValidSchema)(s,n)){const x=t.name("valid");c.removeAdditional==="failing"?(E(C,x,!1),t.if((0,ya.not)(x),()=>{e.reset(),w(C)})):(E(C,x),u||t.if((0,ya.not)(x),()=>t.break()))}}function E(C,x,S){const P={keyword:"additionalProperties",dataProp:C,dataPropType:km.Type.Str};S===!1&&Object.assign(P,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(P,x)}}};qg.default=LX;var cS={};Object.defineProperty(cS,"__esModule",{value:!0});const zX=Da,tC=ft,tw=je,nC=qg,FX={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:a}=e;a.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&nC.default.code(new zX.KeywordCxt(a,nC.default,"additionalProperties"));const s=(0,tC.allSchemaProperties)(n);for(const v of s)a.definedProperties.add(v);a.opts.unevaluated&&s.length&&a.props!==!0&&(a.props=tw.mergeEvaluated.props(t,(0,tw.toHash)(s),a.props));const u=s.filter(v=>!(0,tw.alwaysValidSchema)(a,n[v]));if(u.length===0)return;const c=t.name("valid");for(const v of u)d(v)?h(v):(t.if((0,tC.propertyInData)(t,i,v,a.opts.ownProperties)),h(v),a.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(v),e.ok(c);function d(v){return a.opts.useDefaults&&!a.compositeRule&&n[v].default!==void 0}function h(v){e.subschema({keyword:"properties",schemaProp:v,dataProp:v},c)}}};cS.default=FX;var fS={};Object.defineProperty(fS,"__esModule",{value:!0});const rC=ft,Cm=ut,iC=je,aC=je,BX={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:a}=e,{opts:s}=a,u=(0,rC.allSchemaProperties)(n),c=u.filter(E=>(0,iC.alwaysValidSchema)(a,n[E]));if(u.length===0||c.length===u.length&&(!a.opts.unevaluated||a.props===!0))return;const d=s.strictSchema&&!s.allowMatchingProperties&&i.properties,h=t.name("valid");a.props!==!0&&!(a.props instanceof Cm.Name)&&(a.props=(0,aC.evaluatedPropsToName)(t,a.props));const{props:v}=a;g();function g(){for(const E of u)d&&w(E),a.allErrors?_(E):(t.var(h,!0),_(E),t.if(h))}function w(E){for(const C in d)new RegExp(E).test(C)&&(0,iC.checkStrictMode)(a,`property ${C} matches pattern ${E} (use allowMatchingProperties)`)}function _(E){t.forIn("key",r,C=>{t.if((0,Cm._)`${(0,rC.usePattern)(e,E)}.test(${C})`,()=>{const x=c.includes(E);x||e.subschema({keyword:"patternProperties",schemaProp:E,dataProp:C,dataPropType:aC.Type.Str},h),a.opts.unevaluated&&v!==!0?t.assign((0,Cm._)`${v}[${C}]`,!0):!x&&!a.allErrors&&t.if((0,Cm.not)(h),()=>t.break())})})}}};fS.default=BX;var dS={};Object.defineProperty(dS,"__esModule",{value:!0});const WX=je,UX={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,WX.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};dS.default=UX;var hS={};Object.defineProperty(hS,"__esModule",{value:!0});const HX=ft,KX={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:HX.validateUnion,error:{message:"must match a schema in anyOf"}};hS.default=KX;var pS={};Object.defineProperty(pS,"__esModule",{value:!0});const av=ut,qX=je,YX={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,av._)`{passingSchemas: ${e.passing}}`},VX={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:YX,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const a=n,s=t.let("valid",!1),u=t.let("passing",null),c=t.name("_valid");e.setParams({passing:u}),t.block(d),e.result(s,()=>e.reset(),()=>e.error(!0));function d(){a.forEach((h,v)=>{let g;(0,qX.alwaysValidSchema)(i,h)?t.var(c,!0):g=e.subschema({keyword:"oneOf",schemaProp:v,compositeRule:!0},c),v>0&&t.if((0,av._)`${c} && ${s}`).assign(s,!1).assign(u,(0,av._)`[${u}, ${v}]`).else(),t.if(c,()=>{t.assign(s,!0),t.assign(u,v),g&&e.mergeEvaluated(g,av.Name)})})}}};pS.default=VX;var mS={};Object.defineProperty(mS,"__esModule",{value:!0});const XX=je,QX={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((a,s)=>{if((0,XX.alwaysValidSchema)(r,a))return;const u=e.subschema({keyword:"allOf",schemaProp:s},i);e.ok(i),e.mergeEvaluated(u)})}};mS.default=QX;var vS={};Object.defineProperty(vS,"__esModule",{value:!0});const ig=ut,tM=je,GX={message:({params:e})=>(0,ig.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,ig._)`{failingKeyword: ${e.ifClause}}`},JX={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:GX,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,tM.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=oC(r,"then"),a=oC(r,"else");if(!i&&!a)return;const s=t.let("valid",!0),u=t.name("_valid");if(c(),e.reset(),i&&a){const h=t.let("ifClause");e.setParams({ifClause:h}),t.if(u,d("then",h),d("else",h))}else i?t.if(u,d("then")):t.if((0,ig.not)(u),d("else"));e.pass(s,()=>e.error(!0));function c(){const h=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u);e.mergeEvaluated(h)}function d(h,v){return()=>{const g=e.subschema({keyword:h},u);t.assign(s,u),e.mergeValidEvaluated(g,s),v?t.assign(v,(0,ig._)`${h}`):e.setParams({ifClause:h})}}}};function oC(e,t){const n=e.schema[t];return n!==void 0&&!(0,tM.alwaysValidSchema)(e,n)}vS.default=JX;var gS={};Object.defineProperty(gS,"__esModule",{value:!0});const ZX=je,eQ={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,ZX.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};gS.default=eQ;Object.defineProperty(aS,"__esModule",{value:!0});const tQ=gf,nQ=oS,rQ=yf,iQ=sS,aQ=uS,oQ=ZT,sQ=lS,uQ=qg,lQ=cS,cQ=fS,fQ=dS,dQ=hS,hQ=pS,pQ=mS,mQ=vS,vQ=gS;function gQ(e=!1){const t=[fQ.default,dQ.default,hQ.default,pQ.default,mQ.default,vQ.default,sQ.default,uQ.default,oQ.default,lQ.default,cQ.default];return e?t.push(nQ.default,iQ.default):t.push(tQ.default,rQ.default),t.push(aQ.default),t}aS.default=gQ;var yS={},wS={};Object.defineProperty(wS,"__esModule",{value:!0});const yn=ut,yQ={message:({schemaCode:e})=>(0,yn.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,yn._)`{format: ${e}}`},wQ={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:yQ,code(e,t){const{gen:n,data:r,$data:i,schema:a,schemaCode:s,it:u}=e,{opts:c,errSchemaPath:d,schemaEnv:h,self:v}=u;if(!c.validateFormats)return;i?g():w();function g(){const _=n.scopeValue("formats",{ref:v.formats,code:c.code.formats}),E=n.const("fDef",(0,yn._)`${_}[${s}]`),C=n.let("fType"),x=n.let("format");n.if((0,yn._)`typeof ${E} == "object" && !(${E} instanceof RegExp)`,()=>n.assign(C,(0,yn._)`${E}.type || "string"`).assign(x,(0,yn._)`${E}.validate`),()=>n.assign(C,(0,yn._)`"string"`).assign(x,E)),e.fail$data((0,yn.or)(S(),P()));function S(){return c.strictSchema===!1?yn.nil:(0,yn._)`${s} && !${x}`}function P(){const M=h.$async?(0,yn._)`(${E}.async ? await ${x}(${r}) : ${x}(${r}))`:(0,yn._)`${x}(${r})`,T=(0,yn._)`(typeof ${x} == "function" ? ${M} : ${x}.test(${r}))`;return(0,yn._)`${x} && ${x} !== true && ${C} === ${t} && !${T}`}}function w(){const _=v.formats[a];if(!_){S();return}if(_===!0)return;const[E,C,x]=P(_);E===t&&e.pass(M());function S(){if(c.strictSchema===!1){v.logger.warn(T());return}throw new Error(T());function T(){return`unknown format "${a}" ignored in schema at path "${d}"`}}function P(T){const U=T instanceof RegExp?(0,yn.regexpCode)(T):c.code.formats?(0,yn._)`${c.code.formats}${(0,yn.getProperty)(a)}`:void 0,W=n.scopeValue("formats",{key:a,ref:T,code:U});return typeof T=="object"&&!(T instanceof RegExp)?[T.type||"string",T.validate,(0,yn._)`${W}.validate`]:["string",T,W]}function M(){if(typeof _=="object"&&!(_ instanceof RegExp)&&_.async){if(!h.$async)throw new Error("async format in sync schema");return(0,yn._)`await ${x}(${r})`}return typeof C=="function"?(0,yn._)`${x}(${r})`:(0,yn._)`${x}.test(${r})`}}}};wS.default=wQ;Object.defineProperty(yS,"__esModule",{value:!0});const _Q=wS,bQ=[_Q.default];yS.default=bQ;var af={};Object.defineProperty(af,"__esModule",{value:!0});af.contentVocabulary=af.metadataVocabulary=void 0;af.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];af.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(H1,"__esModule",{value:!0});const SQ=K1,xQ=Y1,EQ=aS,PQ=yS,sC=af,kQ=[SQ.default,xQ.default,(0,EQ.default)(),PQ.default,sC.metadataVocabulary,sC.contentVocabulary];H1.default=kQ;var _S={},Yg={};Object.defineProperty(Yg,"__esModule",{value:!0});Yg.DiscrError=void 0;var uC;(function(e){e.Tag="tag",e.Mapping="mapping"})(uC||(Yg.DiscrError=uC={}));Object.defineProperty(_S,"__esModule",{value:!0});const sc=ut,H_=Yg,lC=Jr,CQ=vf,DQ=je,OQ={message:({params:{discrError:e,tagName:t}})=>e===H_.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,sc._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},$Q={keyword:"discriminator",type:"object",schemaType:"object",error:OQ,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:a}=e,{oneOf:s}=i;if(!a.opts.discriminator)throw new Error("discriminator: requires discriminator option");const u=r.propertyName;if(typeof u!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!s)throw new Error("discriminator: requires oneOf keyword");const c=t.let("valid",!1),d=t.const("tag",(0,sc._)`${n}${(0,sc.getProperty)(u)}`);t.if((0,sc._)`typeof ${d} == "string"`,()=>h(),()=>e.error(!1,{discrError:H_.DiscrError.Tag,tag:d,tagName:u})),e.ok(c);function h(){const w=g();t.if(!1);for(const _ in w)t.elseIf((0,sc._)`${d} === ${_}`),t.assign(c,v(w[_]));t.else(),e.error(!1,{discrError:H_.DiscrError.Mapping,tag:d,tagName:u}),t.endIf()}function v(w){const _=t.name("valid"),E=e.subschema({keyword:"oneOf",schemaProp:w},_);return e.mergeEvaluated(E,sc.Name),_}function g(){var w;const _={},E=x(i);let C=!0;for(let M=0;M<s.length;M++){let T=s[M];if(T!=null&&T.$ref&&!(0,DQ.schemaHasRulesButRef)(T,a.self.RULES)){const W=T.$ref;if(T=lC.resolveRef.call(a.self,a.schemaEnv.root,a.baseId,W),T instanceof lC.SchemaEnv&&(T=T.schema),T===void 0)throw new CQ.default(a.opts.uriResolver,a.baseId,W)}const U=(w=T==null?void 0:T.properties)===null||w===void 0?void 0:w[u];if(typeof U!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${u}"`);C=C&&(E||x(T)),S(U,M)}if(!C)throw new Error(`discriminator: "${u}" must be required`);return _;function x({required:M}){return Array.isArray(M)&&M.includes(u)}function S(M,T){if(M.const)P(M.const,T);else if(M.enum)for(const U of M.enum)P(U,T);else throw new Error(`discriminator: "properties/${u}" must have "const" or "enum"`)}function P(M,T){if(typeof M!="string"||M in _)throw new Error(`discriminator: "${u}" values must be unique strings`);_[M]=T}}}};_S.default=$Q;const RQ="http://json-schema.org/draft-07/schema#",NQ="http://json-schema.org/draft-07/schema#",TQ="Core schema meta-schema",MQ={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},IQ=["object","boolean"],AQ={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},jQ={$schema:RQ,$id:NQ,title:TQ,definitions:MQ,type:IQ,properties:AQ,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=oT,r=H1,i=_S,a=jQ,s=["/properties"],u="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(_=>this.addVocabulary(_)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const _=this.opts.$data?this.$dataMetaSchema(a,s):a;this.addMetaSchema(_,u,!1),this.refs["http://json-schema.org/schema"]=u}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(u)?u:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var d=Da;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var h=ut;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return h._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return h.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return h.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return h.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return h.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return h.CodeGen}});var v=ip;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return v.default}});var g=vf;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return g.default}})})(j_,j_.exports);var nM=j_.exports;const LQ=$h(nM);var K_={exports:{}},rM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(ce,pe){return{validate:ce,compare:pe}}e.fullFormats={date:t(a,s),time:t(c(!0),d),"date-time":t(g(!0),w),"iso-time":t(c(),h),"iso-date-time":t(g(),_),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:x,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:de,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:P,int32:{type:"number",validate:U},int64:{type:"number",validate:W},float:{type:"number",validate:re},double:{type:"number",validate:re},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,s),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,w),"iso-time":t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,h),"iso-date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,_),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function n(ce){return ce%4===0&&(ce%100!==0||ce%400===0)}const r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];function a(ce){const pe=r.exec(ce);if(!pe)return!1;const xe=+pe[1],Ce=+pe[2],Le=+pe[3];return Ce>=1&&Ce<=12&&Le>=1&&Le<=(Ce===2&&n(xe)?29:i[Ce])}function s(ce,pe){if(ce&&pe)return ce>pe?1:ce<pe?-1:0}const u=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function c(ce){return function(xe){const Ce=u.exec(xe);if(!Ce)return!1;const Le=+Ce[1],qe=+Ce[2],We=+Ce[3],oe=Ce[4],_e=Ce[5]==="-"?-1:1,G=+(Ce[6]||0),F=+(Ce[7]||0);if(G>23||F>59||ce&&!oe)return!1;if(Le<=23&&qe<=59&&We<60)return!0;const ee=qe-F*_e,X=Le-G*_e-(ee<0?1:0);return(X===23||X===-1)&&(ee===59||ee===-1)&&We<61}}function d(ce,pe){if(!(ce&&pe))return;const xe=new Date("2020-01-01T"+ce).valueOf(),Ce=new Date("2020-01-01T"+pe).valueOf();if(xe&&Ce)return xe-Ce}function h(ce,pe){if(!(ce&&pe))return;const xe=u.exec(ce),Ce=u.exec(pe);if(xe&&Ce)return ce=xe[1]+xe[2]+xe[3],pe=Ce[1]+Ce[2]+Ce[3],ce>pe?1:ce<pe?-1:0}const v=/t|\s/i;function g(ce){const pe=c(ce);return function(Ce){const Le=Ce.split(v);return Le.length===2&&a(Le[0])&&pe(Le[1])}}function w(ce,pe){if(!(ce&&pe))return;const xe=new Date(ce).valueOf(),Ce=new Date(pe).valueOf();if(xe&&Ce)return xe-Ce}function _(ce,pe){if(!(ce&&pe))return;const[xe,Ce]=ce.split(v),[Le,qe]=pe.split(v),We=s(xe,Le);if(We!==void 0)return We||d(Ce,qe)}const E=/\/|:/,C=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function x(ce){return E.test(ce)&&C.test(ce)}const S=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function P(ce){return S.lastIndex=0,S.test(ce)}const M=-(2**31),T=2**31-1;function U(ce){return Number.isInteger(ce)&&ce<=T&&ce>=M}function W(ce){return Number.isInteger(ce)}function re(){return!0}const he=/[^\\]\\Z/;function de(ce){if(he.test(ce))return!1;try{return new RegExp(ce),!0}catch{return!1}}})(rM);var iM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=nM,n=ut,r=n.operators,i={formatMaximum:{okStr:"<=",ok:r.LTE,fail:r.GT},formatMinimum:{okStr:">=",ok:r.GTE,fail:r.LT},formatExclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},formatExclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},a={message:({keyword:u,schemaCode:c})=>(0,n.str)`should be ${i[u].okStr} ${c}`,params:({keyword:u,schemaCode:c})=>(0,n._)`{comparison: ${i[u].okStr}, limit: ${c}}`};e.formatLimitDefinition={keyword:Object.keys(i),type:"string",schemaType:"string",$data:!0,error:a,code(u){const{gen:c,data:d,schemaCode:h,keyword:v,it:g}=u,{opts:w,self:_}=g;if(!w.validateFormats)return;const E=new t.KeywordCxt(g,_.RULES.all.format.definition,"format");E.$data?C():x();function C(){const P=c.scopeValue("formats",{ref:_.formats,code:w.code.formats}),M=c.const("fmt",(0,n._)`${P}[${E.schemaCode}]`);u.fail$data((0,n.or)((0,n._)`typeof ${M} != "object"`,(0,n._)`${M} instanceof RegExp`,(0,n._)`typeof ${M}.compare != "function"`,S(M)))}function x(){const P=E.schema,M=_.formats[P];if(!M||M===!0)return;if(typeof M!="object"||M instanceof RegExp||typeof M.compare!="function")throw new Error(`"${v}": format "${P}" does not define "compare" function`);const T=c.scopeValue("formats",{key:P,ref:M,code:w.code.formats?(0,n._)`${w.code.formats}${(0,n.getProperty)(P)}`:void 0});u.fail$data(S(T))}function S(P){return(0,n._)`${P}.compare(${d}, ${h}) ${i[v].fail} 0`}},dependencies:["format"]};const s=u=>(u.addKeyword(e.formatLimitDefinition),u);e.default=s})(iM);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=rM,r=iM,i=ut,a=new i.Name("fullFormats"),s=new i.Name("fastFormats"),u=(d,h={keywords:!0})=>{if(Array.isArray(h))return c(d,h,n.fullFormats,a),d;const[v,g]=h.mode==="fast"?[n.fastFormats,s]:[n.fullFormats,a],w=h.formats||n.formatNames;return c(d,w,v,g),h.keywords&&(0,r.default)(d),d};u.get=(d,h="full")=>{const g=(h==="fast"?n.fastFormats:n.fullFormats)[d];if(!g)throw new Error(`Unknown format "${d}"`);return g};function c(d,h,v,g){var w,_;(w=(_=d.opts.code).formats)!==null&&w!==void 0||(_.formats=(0,i._)`require("ajv-formats/dist/formats").${g}`);for(const E of h)d.addFormat(E,v[E])}e.exports=t=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u})(K_,K_.exports);var zQ=K_.exports;const FQ=$h(zQ);var Or;function BQ(){return Or||(Or=new LQ({strict:!0}),Or.addKeyword("version"),Or.addKeyword("keyCompression"),Or.addKeyword("primaryKey"),Or.addKeyword("indexes"),Or.addKeyword("encrypted"),Or.addKeyword("final"),Or.addKeyword("sharding"),Or.addKeyword("internalIndexes"),Or.addKeyword("attachments"),Or.addKeyword("ref"),Or.addKeyword("crdt"),FQ(Or)),Or}function WQ(e){var t=BQ().compile(e);return n=>{var r=t(n);return r?[]:t.errors}}var hZ=f8(WQ,"ajv");async function aM(e){var t=tH(e.collection.schema.jsonSchema).map(a=>e.collection.name+"-"+a),n=await e.database.internalStore.findDocumentsById(t.map(a=>yl(a,Ks)),!1),r={};n.forEach(a=>r[a.key]=a);var i=t.find(a=>r[a]);return i?r[i]:void 0}function UQ(e,t,n){var r=It(n._attachments),i=Mr(n),a=i._meta;delete i._meta,i._attachments=r;for(var s=t+1,u=Promise.resolve(i),c=function(){var d=s;u=u.then(h=>HQ(e,d,h)),s++};s<=e.schema.version;)c();return u.then(d=>d===null?i1:(a&&(d._meta=a),d))}function HQ(e,t,n){if(n===null)return i1;var r=e.migrationStrategies[t](n,e),i=H$(r);return i}async function oM(e){if(e.collection.schema.version===0)return to;var t=await aM(e);return!!t}var KQ=200,sM=new WeakMap;function qQ(e){var t=uM(e.database),n=t.getValue().slice(0);n.push(e),t.next(n)}function uM(e){return Ir(sM,e,()=>new qa([]))}function YQ(e){var t=sM.get(e);t&&t.complete()}var VQ=function(){function e(n,r,i=[n.name,"v",n.schema.version].join("-")){this.started=!1,this.canceled=!1,this.updateStatusHandlers=[],this.updateStatusQueue=r1,this.collection=n,this.migrationStrategies=r,this.statusDocKey=i,this.database=n.database,this.oldCollectionMeta=aM(this),this.mustMigrate=oM(this),this.statusDocId=yl(this.statusDocKey,Gm),qQ(this),this.$=a6(this.database.internalStore,this.statusDocId).pipe(Nt(a=>!!a),_n(a=>Ye(a).data),Qh(qh))}var t=e.prototype;return t.getStatus=function(){return sl(this.$)},t.startMigration=async function(r=KQ){var i=await this.mustMigrate;if(i){if(this.started)throw ze("DM1");if(this.started=!0,this.database.multiInstance){this.broadcastChannel=new Fg(["rx-migration-state",this.database.name,this.collection.name,this.collection.schema.version].join("|"));var a=VN(this.broadcastChannel);await a.awaitLeadership()}var s=await this.oldCollectionMeta,u=await this.database.storage.createStorageInstance({databaseName:this.database.name,collectionName:this.collection.name,databaseInstanceToken:this.database.token,multiInstance:this.database.multiInstance,options:{},schema:Ye(s).data.schema,password:this.database.password,devMode:Tt.isDevMode()}),c=await this.getConnectedStorageInstances(),d=await this.countAllDocuments([u].concat(c.map(v=>v.oldStorage)));await this.updateStatus(v=>(v.count.total=d,v));try{await Promise.all(c.map(async v=>{await SN(this.collection,v.newStorage.collectionName,v.newStorage.schema),await this.migrateStorage(v.oldStorage,v.newStorage,r),await v.newStorage.close()})),await this.migrateStorage(u,this.collection.storageInstance.originalStorageInstance,r)}catch(v){await u.close(),await this.updateStatus(g=>(g.status="ERROR",g.error=p_(v),g));return}try{await nf(this.database.internalStore,{previous:s,document:Object.assign({},s,{_deleted:!0})},"rx-migration-remove-collection-meta")}catch(v){var h=Vc(v);if(!(h&&h.documentInDb._deleted))throw v}await this.updateStatus(v=>(v.status="DONE",v)),this.broadcastChannel&&await this.broadcastChannel.close()}},t.updateStatus=function(r){return this.updateStatusHandlers.push(r),this.updateStatusQueue=this.updateStatusQueue.then(async()=>{if(this.updateStatusHandlers.length!==0){var i=this.updateStatusHandlers;for(this.updateStatusHandlers=[];;){var a=await pf(this.database.internalStore,this.statusDocId),s=Mr(a);a||(s={id:this.statusDocId,key:this.statusDocKey,context:Gm,data:{collectionName:this.collection.name,status:"RUNNING",count:{total:0,handled:0,percent:0}},_deleted:!1,_meta:ff(),_rev:Ra(),_attachments:{}});var u=Ye(s).data;for(var c of i)u=c(u);if(u.count.percent=Math.round(u.count.handled/u.count.total*100),s&&a&&ph(s.data,a.data))break;try{await nf(this.database.internalStore,{previous:a,document:Ye(s)},Gm);break}catch(d){if(!Vc(d))throw d}}}}),this.updateStatusQueue},t.migrateStorage=async function(r,i,a){this.collection.onClose.push(()=>this.cancel()),this.database.onClose.push(()=>this.cancel());var s=await this.database.storage.createStorageInstance({databaseName:this.database.name,collectionName:"rx-migration-state-meta-"+r.collectionName+"-"+r.schema.version,databaseInstanceToken:this.database.token,multiInstance:this.database.multiInstance,options:{},schema:D_(r.schema,Kv(r.schema)),password:this.database.password,devMode:Tt.isDevMode()}),u=Z9(i,Yv,this.database.token,!0),c=TN({keepMeta:!0,identifier:["rx-migration-state",r.collectionName,r.schema.version,this.collection.schema.version].join("-"),replicationHandler:{masterChangesSince(){return Promise.resolve({checkpoint:null,documents:[]})},masterWrite:async h=>{var v=await Promise.all(h.map(async w=>{var _=w.newDocumentState;if(i.schema.title===Jm&&(_=w.newDocumentState.docData,w.newDocumentState.isCheckpoint==="1"))return{assumedMasterState:void 0,newDocumentState:w.newDocumentState};var E=await UQ(this.collection,r.schema.version,_);if(E===null)return null;var C={assumedMasterState:void 0,newDocumentState:i.schema.title===Jm?Object.assign({},w.newDocumentState,{docData:E}):E};return C}));v=v.filter(w=>!!w&&!!w.newDocumentState);var g=await u.masterWrite(v);return g},masterChangeStream$:new br().asObservable()},forkInstance:r,metaInstance:s,pushBatchSize:a,pullBatchSize:0,conflictHandler:Yv,hashFunction:this.database.hashFunction}),d=!1;if(c.events.error.subscribe(h=>d=h),c.events.processed.up.subscribe(()=>{this.updateStatus(h=>(h.count.handled=h.count.handled+1,h))}),await Zm(c),await $_(c),await this.updateStatusQueue,d)throw await s.close(),d;await Promise.all([r.remove(),s.remove()]),await this.cancel()},t.cancel=async function(){this.canceled=!0,this.replicationState&&await MN(this.replicationState),this.broadcastChannel&&await this.broadcastChannel.close()},t.countAllDocuments=async function(r){var i=0;return await Promise.all(r.map(async a=>{var s=Ag(a.schema,Mc(a.schema,{selector:{}})),u=await a.count(s);i+=u.count})),i},t.getConnectedStorageInstances=async function(){var r=Ye(await this.oldCollectionMeta),i=[];return await Promise.all(await Promise.all(r.data.connectedStorages.map(async a=>{if(a.schema.title!==Jm)throw new Error("unknown migration handling for schema");var s=D_(Mr(this.collection.schema.jsonSchema),Kv(a.schema));s.version=this.collection.schema.version;var[u,c]=await Promise.all([this.database.storage.createStorageInstance({databaseInstanceToken:this.database.token,databaseName:this.database.name,devMode:Tt.isDevMode(),multiInstance:this.database.multiInstance,options:{},schema:a.schema,password:this.database.password,collectionName:a.collectionName}),this.database.storage.createStorageInstance({databaseInstanceToken:this.database.token,databaseName:this.database.name,devMode:Tt.isDevMode(),multiInstance:this.database.multiInstance,options:{},schema:s,password:this.database.password,collectionName:a.collectionName})]);i.push({oldStorage:u,newStorage:c})}))),i},t.migratePromise=async function(r){this.startMigration(r);var i=await this.mustMigrate;if(!i)return{status:"DONE",collectionName:this.collection.name,count:{handled:0,percent:0,total:0}};var a=await Promise.race([sl(this.$.pipe(Nt(s=>s.status==="DONE"))),sl(this.$.pipe(Nt(s=>s.status==="ERROR")))]);if(a.status==="ERROR")throw ze("DM4",{collection:this.collection.name,error:a.error});return a},e}(),ag=new WeakMap,q_=new WeakMap;function Wd(e){var t=ag.get(e);if(!t){var n=e.database?e.database:e,r=e.database?e.name:"";throw ze("LD8",{database:n.name,collection:r})}return t}function lM(e,t,n,r,i,a){return t.createStorageInstance({databaseInstanceToken:e,databaseName:n,collectionName:XQ(r),schema:cM,options:i,multiInstance:a,devMode:Tt.isDevMode()})}function cC(e){var t=ag.get(e);if(t)return ag.delete(e),t.then(n=>n.storageInstance.close())}async function fC(e,t,n){var r=Kh(10),i=await lM(r,e,t,n,{},!1);await i.remove()}function XQ(e){return"plugin-local-documents-"+e}var cM=Ng({title:"RxLocalDocument",version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:128},data:{type:"object",additionalProperties:!0}},required:["id","data"]});async function dC(e,t){var n=await Wd(this),r={id:e,data:t,_deleted:!1,_meta:ff(),_rev:Ra(),_attachments:{}};return nf(n.storageInstance,{document:r},"local-document-insert").then(i=>n.docCache.getCachedRxDocument(i))}function hC(e,t){return this.getLocal(e).then(n=>{if(n)return n.incrementalModify(()=>t);var r=this.insertLocal(e,t);return r})}async function pC(e){var t=await Wd(this),n=t.docCache,r=n.getLatestDocumentDataIfExists(e);return r?Promise.resolve(n.getCachedRxDocument(r)):pf(t.storageInstance,e).then(i=>i?t.docCache.getCachedRxDocument(i):null)}function mC(e){return this.$.pipe(Gh(null),no(async t=>{if(t)return{changeEvent:t};var n=await this.getLocal(e);return{doc:n}}),no(async t=>{if(t.changeEvent){var n=t.changeEvent;if(!n.isLocal||n.documentId!==e)return{use:!1};var r=await this.getLocal(e);return{use:!0,doc:r}}else return{use:!0,doc:t.doc}}),Nt(t=>t.use),_n(t=>t.doc))}var QQ=cN(),GQ=function(e){function t(n,r,i){var a;return a=e.call(this,null,r)||this,a.id=n,a.parent=i,a}return t1(t,e),t}(QQ),Ud={get isLocal(){return!0},get allAttachments$(){throw ze("LD1",{document:this})},get primaryPath(){return"id"},get primary(){return this.id},get $(){var e=this,t=Xc(q_,this.parent),n=this.primary;return e.parent.eventBulks$.pipe(Nt(r=>!!r.isLocal),_n(r=>r.events.find(i=>i.documentId===n)),Nt(r=>!!r),_n(r=>_R(Ye(r))),Gh(t.docCache.getLatestDocumentData(this.primary)),vh((r,i)=>r._rev===i._rev),_n(r=>t.docCache.getCachedRxDocument(r)),Qh(qh))},get $$(){var e=this,t=nw(e),n=t.getReactivityFactory();return n.fromObservable(e.$,e.getLatest()._data,t)},get deleted$$(){var e=this,t=nw(e),n=t.getReactivityFactory();return n.fromObservable(e.deleted$,e.getLatest().deleted,t)},getLatest(){var e=Xc(q_,this.parent),t=e.docCache.getLatestDocumentData(this.primary);return e.docCache.getCachedRxDocument(t)},get(e){if(e="data."+e,!!this._data){if(typeof e!="string")throw Wv("LD2",{objPath:e});var t=Zs(this._data,e);return t=Tt.deepFreezeWhenDevMode(t),t}},get$(e){if(e="data."+e,Tt.isDevMode()){if(e.includes(".item."))throw ze("LD3",{objPath:e});if(e===this.primaryPath)throw ze("LD4")}return this.$.pipe(_n(t=>t._data),_n(t=>Zs(t,e)),vh())},get$$(e){var t=nw(this),n=t.getReactivityFactory();return n.fromObservable(this.get$(e),this.getLatest().get(e),t)},async incrementalModify(e){var t=await Wd(this.parent);return t.incrementalWriteQueue.addWrite(this._data,async n=>(n.data=await e(n.data,this),n)).then(n=>t.docCache.getCachedRxDocument(n))},incrementalPatch(e){return this.incrementalModify(t=>(Object.entries(e).forEach(([n,r])=>{t[n]=r}),t))},async _saveData(e){var t=await Wd(this.parent),n=this._data;e.id=this.id;var r=[{previous:n,document:e}];return t.storageInstance.bulkWrite(r,"local-document-save-data").then(i=>{if(i.error[0])throw i.error[0];var a=na(this.collection.schema.primaryPath,r,i)[0];e=It(e),e._rev=a._rev})},async remove(){var e=await Wd(this.parent),t=It(this._data);return t._deleted=!0,nf(e.storageInstance,{previous:this._data,document:t},"local-document-remove").then(n=>e.docCache.getCachedRxDocument(n))}},vC=!1,JQ=()=>{if(!vC){vC=!0;var e=jg,t=Object.getOwnPropertyNames(e);t.forEach(r=>{var i=Object.getOwnPropertyDescriptor(Ud,r);if(!i){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(Ud,r,a)}});var n=r=>()=>{throw ze("LD6",{functionName:r})};["populate","update","putAttachment","putAttachmentBase64","getAttachment","allAttachments"].forEach(r=>Ud[r]=n(r))}};function ZQ(e,t){JQ();var n=new GQ(e.id,e,t);return Object.setPrototypeOf(n,Ud),n.prototype=Ud,n}function nw(e){var t=e.parent;return q9(t)?t:t.database}function gC(e){var t=e.database?e.database:e,n=e.database?e.name:"",r=(async()=>{var i=await lM(t.token,t.storage,t.name,n,t.instanceCreationOptions,t.multiInstance);i=m1(t,i,cM);var a=new gN("id",t.eventBulks$.pipe(Nt(h=>{var v=!1;return(n===""&&!h.collectionName||n!==""&&h.collectionName===n)&&(v=!0),v&&h.isLocal}),_n(h=>h.events)),h=>ZQ(h,e)),s=new lN(i,"id",()=>{},()=>{}),u=await t.storageToken,c=i.changeStream().subscribe(h=>{for(var v=new Array(h.events.length),g=h.events,w=e.database?e.name:void 0,_=0;_<g.length;_++){var E=g[_];v[_]={documentId:E.documentId,collectionName:w,isLocal:!0,operation:E.operation,documentData:Tt.deepFreezeWhenDevMode(E.documentData),previousDocumentData:Tt.deepFreezeWhenDevMode(E.previousDocumentData)}}var C={id:h.id,isLocal:!0,internal:!1,collectionName:e.database?e.name:void 0,storageToken:u,events:v,databaseToken:t.token,checkpoint:h.checkpoint,context:h.context};t.$emit(C)});e._subs.push(c);var d={database:t,parent:e,storageInstance:i,docCache:a,incrementalWriteQueue:s};return q_.set(e,d),d})();ag.set(e,r)}var eG={name:"local-documents",rxdb:!0,prototypes:{RxCollection:e=>{e.insertLocal=dC,e.upsertLocal=hC,e.getLocal=pC,e.getLocal$=mC},RxDatabase:e=>{e.insertLocal=dC,e.upsertLocal=hC,e.getLocal=pC,e.getLocal$=mC}},hooks:{createRxDatabase:{before:e=>{e.creator.localDocuments&&gC(e.database)}},createRxCollection:{before:e=>{e.creator.localDocuments&&gC(e.collection)}},preCloseRxDatabase:{after:e=>cC(e)},postCloseRxCollection:{after:e=>cC(e)},postRemoveRxDatabase:{after:e=>fC(e.storage,e.databaseName,"")},postRemoveRxCollection:{after:e=>fC(e.storage,e.databaseName,e.collectionName)}},overwritable:{}},tG=new WeakMap,nG={name:"migration-schema",rxdb:!0,init(){Lg(eG)},hooks:{preCloseRxDatabase:{after:YQ}},prototypes:{RxDatabase:e=>{e.migrationStates=function(){return uM(this).pipe(Qh(qh))}},RxCollection:e=>{e.getMigrationState=function(){return Ir(tG,this,()=>new VQ(this.asRxCollection,this.migrationStrategies))},e.migrationNeeded=function(){return this.schema.version===0?to:oM(this.getMigrationState())}}}},rG=nG,fM=new WeakMap,iG=new WeakMap;function yC(e){return Ir(iG,e,()=>VN(e))}function aG(){var e=XN(this.storage.name,this.token,this.name,this),t=this.close.bind(this);this.close=function(){return R_(this.token,this),t()};var n=yC(e);return n||(n=yC(e),fM.set(this,n)),this.leaderElector=()=>n,n}function oG(){return this.multiInstance?this.leaderElector().isLeader:!0}function sG(){return this.multiInstance?this.leaderElector().awaitLeadership().then(()=>!0):r1}function uG(e){var t=fM.get(e);t&&t.die()}var lG=!0,cG={RxDatabase:e=>{e.leaderElector=aG,e.isLeader=oG,e.waitForLeadership=sG}},fG={name:"leader-election",rxdb:lG,prototypes:cG,hooks:{preCloseRxDatabase:{after:uG}}},wC=e=>Promise.resolve(e);function _C(e,t){if(e==="_deleted")return t;t=It(t);var n=!!t._deleted;return t[e]=n,delete t._deleted,t}function rw(e,t,n){return n.map(r=>{var i=It(r);if(t!=="_deleted"){var a=!!i[t];i._deleted=a,delete i[t]}else i._deleted=!!i._deleted;var s=e.schema.primaryPath;return i[s]=su(e.schema.jsonSchema,i),i})}function bC(e,t){if(typeof window>"u"||typeof window!="object"||typeof window.addEventListener>"u"||navigator.onLine)return e.promiseWait(t);var n,r=new Promise(i=>{n=()=>{window.removeEventListener("online",n),i()},window.addEventListener("online",n)});return Promise.race([r,e.promiseWait(t)]).then(()=>{window.removeEventListener("online",n)})}function dG(e){function t(){if(!(typeof document>"u"||typeof document.dispatchEvent!="function")){var r=new Event("mousemove");document.dispatchEvent(r)}}var n=setInterval(t,20*1e3);e.onCancel.push(()=>clearInterval(n))}var hG=new WeakMap,pG=function(){function e(n,r,i,a,s,u,c,d,h){this.subs=[],this.subjects={received:new br,sent:new br,error:new br,canceled:new qa(!1),active:new qa(!1)},this.received$=this.subjects.received.asObservable(),this.sent$=this.subjects.sent.asObservable(),this.error$=this.subjects.error.asObservable(),this.canceled$=this.subjects.canceled.asObservable(),this.active$=this.subjects.active.asObservable(),this.wasStarted=!1,this.startQueue=Gi,this.onCancel=[],this.callOnStart=void 0,this.remoteEvents$=new br,this.replicationIdentifier=n,this.collection=r,this.deletedField=i,this.pull=a,this.push=s,this.live=u,this.retryTime=c,this.autoStart=d,this.toggleOnDocumentVisible=h,this.metaInfoPromise=(async()=>{var w="rx-replication-meta-"+await r.database.hashFunction([this.collection.name,this.replicationIdentifier].join("-")),_=D_(this.collection.schema.jsonSchema,Kv(this.collection.schema.jsonSchema));return{collectionName:w,schema:_}})();var v=Ir(hG,r,()=>[]);v.push(this),this.collection.onClose.push(()=>this.cancel()),Object.keys(this.subjects).forEach(w=>{Object.defineProperty(this,w+"$",{get:function(){return this.subjects[w].asObservable()}})});var g=new Promise(w=>{this.callOnStart=w});this.startPromise=g}var t=e.prototype;return t.start=function(){return this.startQueue=this.startQueue.then(()=>this._start()),this.startQueue},t._start=async function(){if(!this.isStopped()){if(this.internalReplicationState&&this.internalReplicationState.events.paused.next(!1),this.wasStarted){this.reSync();return}this.wasStarted=!0,this.toggleOnDocumentVisible||dG(this);var r=this.pull&&this.pull.modifier?this.pull.modifier:wC,i=this.push&&this.push.modifier?this.push.modifier:wC,a=this.collection.database,s=await this.metaInfoPromise,[u]=await Promise.all([this.collection.database.storage.createStorageInstance({databaseName:a.name,collectionName:s.collectionName,databaseInstanceToken:a.token,multiInstance:a.multiInstance,options:{},schema:s.schema,password:a.password,devMode:Tt.isDevMode()}),SN(this.collection,s.collectionName,s.schema)]);this.metaInstance=u,this.internalReplicationState=TN({pushBatchSize:this.push&&this.push.batchSize?this.push.batchSize:100,pullBatchSize:this.pull&&this.pull.batchSize?this.pull.batchSize:100,initialCheckpoint:{upstream:this.push?this.push.initialCheckpoint:void 0,downstream:this.pull?this.pull.initialCheckpoint:void 0},forkInstance:this.collection.storageInstance,metaInstance:this.metaInstance,hashFunction:a.hashFunction,identifier:"rxdbreplication"+this.replicationIdentifier,conflictHandler:this.collection.conflictHandler,replicationHandler:{masterChangeStream$:this.remoteEvents$.asObservable().pipe(Nt(c=>!!this.pull),no(async c=>{if(c==="RESYNC")return c;var d=It(c);return d.documents=rw(this.collection,this.deletedField,d.documents),d.documents=await Promise.all(d.documents.map(h=>r(h))),d})),masterChangesSince:async(c,d)=>{if(!this.pull)return{checkpoint:null,documents:[]};for(var h=!1,v={};!h&&!this.isStoppedOrPaused();)try{v=await this.pull.handler(c,d),h=!0}catch(_){var g=ze("RC_PULL",{checkpoint:c,errors:dh(_).map(E=>p_(E)),direction:"pull"});this.subjects.error.next(g),await bC(this.collection,Ye(this.retryTime))}if(this.isStoppedOrPaused())return{checkpoint:null,documents:[]};var w=It(v);return w.documents=rw(this.collection,this.deletedField,w.documents),w.documents=await Promise.all(w.documents.map(_=>r(_))),w},masterWrite:async c=>{if(!this.push)return[];var d=!1;await vl("preReplicationMasterWrite",{rows:c,collection:this.collection});var h=await Promise.all(c.map(async E=>(E.newDocumentState=await i(E.newDocumentState),E.newDocumentState===null?null:(E.assumedMasterState&&(E.assumedMasterState=await i(E.assumedMasterState)),this.deletedField!=="_deleted"&&(E.newDocumentState=_C(this.deletedField,E.newDocumentState),E.assumedMasterState&&(E.assumedMasterState=_C(this.deletedField,E.assumedMasterState))),E)))),v=h.filter(EU),g=null;for(v.length===0&&(d=!0,g=[]);!d&&!this.isStoppedOrPaused();)try{if(g=await this.push.handler(v),!Array.isArray(g))throw ze("RC_PUSH_NO_AR",{pushRows:c,direction:"push",args:{result:g}});d=!0}catch(E){var w=E.rxdb?E:ze("RC_PUSH",{pushRows:c,errors:dh(E).map(C=>p_(C)),direction:"push"});this.subjects.error.next(w),await bC(this.collection,Ye(this.retryTime))}if(this.isStoppedOrPaused())return[];await vl("preReplicationMasterWriteDocumentsHandle",{result:g,collection:this.collection});var _=rw(this.collection,this.deletedField,Ye(g));return _}}}),this.subs.push(this.internalReplicationState.events.error.subscribe(c=>{this.subjects.error.next(c)}),this.internalReplicationState.events.processed.down.subscribe(c=>this.subjects.received.next(c.document)),this.internalReplicationState.events.processed.up.subscribe(c=>{this.subjects.sent.next(c.newDocumentState)}),wR([this.internalReplicationState.events.active.down,this.internalReplicationState.events.active.up]).subscribe(([c,d])=>{var h=c||d;this.subjects.active.next(h)})),this.pull&&this.pull.stream$&&this.live&&this.subs.push(this.pull.stream$.subscribe({next:c=>{this.isStoppedOrPaused()||this.remoteEvents$.next(c)},error:c=>{this.subjects.error.next(c)}})),this.live||(await Zm(this.internalReplicationState),await $_(this.internalReplicationState),await this._cancel()),this.callOnStart()}},t.pause=function(){return this.startQueue=this.startQueue.then(()=>{this.internalReplicationState&&this.internalReplicationState.events.paused.next(!0)}),this.startQueue},t.isPaused=function(){return!!(this.internalReplicationState&&this.internalReplicationState.events.paused.getValue())},t.isStopped=function(){return!!this.subjects.canceled.getValue()},t.isStoppedOrPaused=function(){return this.isPaused()||this.isStopped()},t.awaitInitialReplication=async function(){return await this.startPromise,Zm(Ye(this.internalReplicationState))},t.awaitInSync=async function(){await this.startPromise,await Zm(Ye(this.internalReplicationState));for(var r=2;r>0;)r--,await this.collection.database.requestIdlePromise(),await $_(Ye(this.internalReplicationState));return!0},t.reSync=function(){this.remoteEvents$.next("RESYNC")},t.emitEvent=function(r){this.remoteEvents$.next(r)},t.cancel=async function(){this.startQueue=this.startQueue.catch(()=>{}).then(async()=>{await this._cancel()}),await this.startQueue},t._cancel=async function(r=!1){if(this.isStopped())return to;var i=this.onCancel.map(a=>H$(a()));return this.internalReplicationState&&await MN(this.internalReplicationState),this.metaInstance&&!r&&i.push(Ye(this.internalReplicationState).checkpointQueue.then(()=>Ye(this.metaInstance).close())),this.subs.forEach(a=>a.unsubscribe()),this.subjects.canceled.next(!0),this.subjects.active.complete(),this.subjects.canceled.complete(),this.subjects.error.complete(),this.subjects.received.complete(),this.subjects.sent.complete(),Promise.all(i)},t.remove=async function(){return this.startQueue=this.startQueue.then(async()=>{var r=await this.metaInfoPromise;await this._cancel(!0),await Ye(this.internalReplicationState).checkpointQueue.then(()=>Ye(this.metaInstance).remove()),await D9(this.collection,r.collectionName,r.schema)}),this.startQueue},e}();function mG({replicationIdentifier:e,collection:t,deletedField:n="_deleted",pull:r,push:i,live:a=!0,retryTime:s=1e3*5,waitForLeadership:u=!0,autoStart:c=!0,toggleOnDocumentVisible:d=!1}){if(Lg(fG),!r&&!i)throw ze("UT3",{collection:t.name,args:{replicationIdentifier:e}});var h=new pG(e,t,n,r,i,a,s,c,d);if(d&&typeof document<"u"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"){var v=()=>{if(!h.isStopped()){var g=document.visibilityState==="visible";g?h.start():t.database.isLeader()||h.pause()}};document.addEventListener("visibilitychange",v),h.onCancel.push(()=>document.removeEventListener("visibilitychange",v))}return vG(u,h),h}function vG(e,t){var n=e&&t.collection.database.multiInstance,r=n?t.collection.database.waitForLeadership():r1;return r.then(()=>{t.isStopped()||t.autoStart&&t.start()})}const gG={title:"data_items schema",version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},user_id:{type:"string"},entity_type:{type:"string",enum:["task","event","project"],maxLength:10},system_status:{type:"string",enum:["active","completed","dropped","archived","waiting"],default:"active",maxLength:10},title:{type:"string"},parent_id:{type:["string","null"]},sort_order:{type:"number"},do_date:{type:["string","null"],format:"date"},due_date:{type:["string","null"],format:"date-time"},start_time:{type:["string","null"],format:"date-time"},end_time:{type:["string","null"],format:"date-time"},is_all_day:{type:"boolean"},recurrence_rule:{type:["string","null"]},original_event_id:{type:["string","null"]},properties:{type:"object",properties:{priority:{type:"string",enum:["high","normal","low"]},energy_level:{type:"string",enum:["high","medium","low"]},tags:{type:"array",items:{type:"string"}},content:{type:"string"}}},updated_at:{type:"string",format:"date-time",maxLength:35},is_deleted:{type:"boolean",default:!1},created_at:{type:"number"},completed_at:{type:["number","null"]}},required:["id","entity_type","title","updated_at","system_status"],indexes:["updated_at","entity_type","system_status"]},yG={title:"canvas_widgets schema",version:2,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},canvas_id:{type:"string",maxLength:100},group_id:{type:"string"},widget_type:{type:"string",enum:["calendar_master","smart_list","matrix","detail","project_header","archive_bin","timeline"]},geometry:{type:"object",properties:{x:{type:"number"},y:{type:"number"},w:{type:"number"},h:{type:"number"},z:{type:"number"}},required:["x","y","w","h"]},data_source_config:{type:"object"},view_state:{type:"object",properties:{is_pinned:{type:"boolean"},is_collapsed:{type:"boolean"},view_mode:{type:"string"}}},updated_at:{type:"string",format:"date-time",maxLength:35},is_deleted:{type:"boolean",default:!1}},required:["id","widget_type","geometry","canvas_id","updated_at"],indexes:["canvas_id"]},wG={title:"canvas links schema",version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},source_widget_id:{type:"string"},target_widget_id:{type:"string"},type:{type:"string",default:"context_flow"},created_at:{type:"number"}},required:["id","source_widget_id","target_widget_id","created_at"]};let Dm;const _G=new Uint8Array(16);function bG(){if(!Dm&&(Dm=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Dm))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Dm(_G)}const tr=[];for(let e=0;e<256;++e)tr.push((e+256).toString(16).slice(1));function SG(e,t=0){return tr[e[t+0]]+tr[e[t+1]]+tr[e[t+2]]+tr[e[t+3]]+"-"+tr[e[t+4]]+tr[e[t+5]]+"-"+tr[e[t+6]]+tr[e[t+7]]+"-"+tr[e[t+8]]+tr[e[t+9]]+"-"+tr[e[t+10]]+tr[e[t+11]]+tr[e[t+12]]+tr[e[t+13]]+tr[e[t+14]]+tr[e[t+15]]}const xG=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),SC={randomUUID:xG};function Zr(e,t,n){if(SC.randomUUID&&!t&&!e)return SC.randomUUID();e=e||{};const r=e.random||(e.rng||bG)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return SG(r)}Lg(V8);Lg(rG);const Qu=class Qu{constructor(){zu(this,"db",null);zu(this,"initializationPromise",null)}static getInstance(){return Qu.instance||(Qu.instance=new Qu),Qu.instance}async initialize(){if(this.db)return this.db;if(this.initializationPromise)return this.initializationPromise;this.initializationPromise=this.initializeDatabase();try{return this.db=await this.initializationPromise,this.db}catch(t){throw console.error("Failed to initialize database:",t),this.initializationPromise=null,t}}async initializeDatabase(){try{const t=E8(),n=await H9({name:"project_canvas_gtd",storage:t,ignoreDuplicate:!0});await n.addCollections({items:{schema:gG},widgets:{schema:yG,migrationStrategies:{1:i=>i,2:i=>i}},links:{schema:wG}}),n.items.postSave(async(i,a)=>{var s;if(i.entity_type==="task"&&((s=i.properties)!=null&&s.project_id)){const u=i.properties.project_id,c=await n.items.findOne(u).exec();if(!c)return;const d=await n.items.find({selector:{entity_type:"task","properties.project_id":u,is_deleted:!1}}).exec();if(d.length===0)return;const h=d.some(g=>g.system_status==="active"),v=d.every(g=>g.system_status==="completed");h&&c.system_status==="completed"?(console.log(`Auto-activating project ${c.title} (${u})`),await c.incrementalPatch({system_status:"active"})):v&&c.system_status!=="completed"&&(console.log(`Auto-completing project ${c.title} (${u})`),await c.incrementalPatch({system_status:"completed"}))}},!1);const r=await mG({collection:n.items,replicationIdentifier:"items-sync",push:{handler:async i=>(await(await fetch("http://localhost:3001/sync/items/push",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({changeRows:i})})).json()).conflicts||[]},pull:{handler:async(i,a)=>{const s=new URL("http://localhost:3001/sync/items/pull");s.searchParams.set("checkpoint",i?i.toString():"0"),s.searchParams.set("limit",a.toString());const c=await(await fetch(s.toString())).json();return{documents:c.documents,checkpoint:c.checkpoint}}},live:!0,autoStart:!0,retryTime:5e3});return window.syncState=r,console.log("Database initialized successfully"),await this.seedDefaultData(n),n}catch(t){throw console.error("Database initialization error:",t),new Error(`Failed to initialize database: ${t}`)}}async seedDefaultData(t){try{if(await t.widgets.count().exec()>0)return;console.log("Seeding default widgets...");const r=new Date().toISOString(),i="default_canvas",a=Zr(),s=24415,u=24700;await t.widgets.bulkInsert([{id:Zr(),canvas_id:i,group_id:a,widget_type:"calendar_master",geometry:{x:s,y:u,w:800,h:600},data_source_config:{},updated_at:r,is_deleted:!1},{id:Zr(),canvas_id:i,widget_type:"smart_list",geometry:{x:s+820,y:u,w:350,h:400},data_source_config:{title:"Inbox",criteria:{do_date:null,system_status:"active"}},updated_at:r,is_deleted:!1},{id:Zr(),canvas_id:i,group_id:a,widget_type:"archive_bin",geometry:{x:s+820,y:u+420,w:350,h:180},data_source_config:{},view_state:{is_collapsed:!0},updated_at:r,is_deleted:!1}]),console.log("Default widgets seeded successfully")}catch(n){console.error("Failed to seed default data:",n)}}getDatabase(){if(!this.db)throw new Error("Database not initialized. Call initialize() first.");return this.db}async destroy(){this.db&&(await this.db.remove(),this.db=null,this.initializationPromise=null)}};zu(Qu,"instance");let Y_=Qu;const Ys=Y_.getInstance();var Vg={exports:{}},dM={},hM={exports:{}},EG="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",PG=EG,kG=PG;function pM(){}function mM(){}mM.resetWarningCache=pM;var CG=function(){function e(r,i,a,s,u,c){if(c!==kG){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:mM,resetWarningCache:pM};return n.PropTypes=n,n};hM.exports=CG();var vM=hM.exports;function gM(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=gM(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function xC(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=gM(e))&&(r&&(r+=" "),r+=t);return r}const DG=Object.freeze(Object.defineProperty({__proto__:null,clsx:xC,default:xC},Symbol.toStringTag,{value:"Module"})),OG=Mz(DG);var fn={},oo={};Object.defineProperty(oo,"__esModule",{value:!0});oo.dontSetMe=MG;oo.findInArray=$G;oo.int=TG;oo.isFunction=RG;oo.isNum=NG;function $G(e,t){for(let n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function RG(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function NG(e){return typeof e=="number"&&!isNaN(e)}function TG(e){return parseInt(e,10)}function MG(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))}var El={};Object.defineProperty(El,"__esModule",{value:!0});El.browserPrefixToKey=wM;El.browserPrefixToStyle=IG;El.default=void 0;El.getPrefix=yM;const iw=["Moz","Webkit","O","ms"];function yM(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(e=window.document)===null||e===void 0||(e=e.documentElement)===null||e===void 0?void 0:e.style;if(!n||t in n)return"";for(let r=0;r<iw.length;r++)if(wM(t,iw[r])in n)return iw[r];return""}function wM(e,t){return t?"".concat(t).concat(AG(e)):e}function IG(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e}function AG(e){let t="",n=!0;for(let r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):e[r]==="-"?n=!0:t+=e[r];return t}El.default=yM();Object.defineProperty(fn,"__esModule",{value:!0});fn.addClassName=SM;fn.addEvent=zG;fn.addUserSelectStyles=QG;fn.createCSSTransform=qG;fn.createSVGTransform=YG;fn.getTouch=VG;fn.getTouchIdentifier=XG;fn.getTranslation=bS;fn.innerHeight=UG;fn.innerWidth=HG;fn.matchesSelector=bM;fn.matchesSelectorAndParentsTo=LG;fn.offsetXYFromParent=KG;fn.outerHeight=BG;fn.outerWidth=WG;fn.removeClassName=xM;fn.removeEvent=FG;fn.removeUserSelectStyles=GG;var wi=oo,EC=jG(El);function _M(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(_M=function(r){return r?n:t})(e)}function jG(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=_M(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}let Om="";function bM(e,t){return Om||(Om=(0,wi.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,wi.isFunction)(e[n])})),(0,wi.isFunction)(e[Om])?e[Om](t):!1}function LG(e,t,n){let r=e;do{if(bM(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function zG(e,t,n,r){if(!e)return;const i={capture:!0,...r};e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function FG(e,t,n,r){if(!e)return;const i={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}function BG(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,wi.int)(n.borderTopWidth),t+=(0,wi.int)(n.borderBottomWidth),t}function WG(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,wi.int)(n.borderLeftWidth),t+=(0,wi.int)(n.borderRightWidth),t}function UG(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,wi.int)(n.paddingTop),t-=(0,wi.int)(n.paddingBottom),t}function HG(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,wi.int)(n.paddingLeft),t-=(0,wi.int)(n.paddingRight),t}function KG(e,t,n){const i=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-i.left)/n,s=(e.clientY+t.scrollTop-i.top)/n;return{x:a,y:s}}function qG(e,t){const n=bS(e,t,"px");return{[(0,EC.browserPrefixToKey)("transform",EC.default)]:n}}function YG(e,t){return bS(e,t,"")}function bS(e,t,n){let{x:r,y:i}=e,a="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(t){const s="".concat(typeof t.x=="string"?t.x:t.x+n),u="".concat(typeof t.y=="string"?t.y:t.y+n);a="translate(".concat(s,", ").concat(u,")")+a}return a}function VG(e,t){return e.targetTouches&&(0,wi.findInArray)(e.targetTouches,n=>t===n.identifier)||e.changedTouches&&(0,wi.findInArray)(e.changedTouches,n=>t===n.identifier)}function XG(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function QG(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&SM(e.body,"react-draggable-transparent-selection")}function GG(e){if(e)try{if(e.body&&xM(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function SM(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function xM(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var so={};Object.defineProperty(so,"__esModule",{value:!0});so.canDragX=eJ;so.canDragY=tJ;so.createCoreData=rJ;so.createDraggableData=iJ;so.getBoundPosition=JG;so.getControlPosition=nJ;so.snapToGrid=ZG;var pi=oo,_c=fn;function JG(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:r}=e.props;r=typeof r=="string"?r:aJ(r);const i=SS(e);if(typeof r=="string"){const{ownerDocument:a}=i,s=a.defaultView;let u;if(r==="parent"?u=i.parentNode:u=a.querySelector(r),!(u instanceof s.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=u,d=s.getComputedStyle(i),h=s.getComputedStyle(c);r={left:-i.offsetLeft+(0,pi.int)(h.paddingLeft)+(0,pi.int)(d.marginLeft),top:-i.offsetTop+(0,pi.int)(h.paddingTop)+(0,pi.int)(d.marginTop),right:(0,_c.innerWidth)(c)-(0,_c.outerWidth)(i)-i.offsetLeft+(0,pi.int)(h.paddingRight)-(0,pi.int)(d.marginRight),bottom:(0,_c.innerHeight)(c)-(0,_c.outerHeight)(i)-i.offsetTop+(0,pi.int)(h.paddingBottom)-(0,pi.int)(d.marginBottom)}}return(0,pi.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,pi.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,pi.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,pi.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]}function ZG(e,t,n){const r=Math.round(t/e[0])*e[0],i=Math.round(n/e[1])*e[1];return[r,i]}function eJ(e){return e.props.axis==="both"||e.props.axis==="x"}function tJ(e){return e.props.axis==="both"||e.props.axis==="y"}function nJ(e,t,n){const r=typeof t=="number"?(0,_c.getTouch)(e,t):null;if(typeof t=="number"&&!r)return null;const i=SS(n),a=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,_c.offsetXYFromParent)(r||e,a,n.props.scale)}function rJ(e,t,n){const r=!(0,pi.isNum)(e.lastX),i=SS(e);return r?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:i,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}}function iJ(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function aJ(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function SS(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Xg={},Qg={};Object.defineProperty(Qg,"__esModule",{value:!0});Qg.default=oJ;function oJ(){}Object.defineProperty(Xg,"__esModule",{value:!0});Xg.default=void 0;var aw=uJ(ne),Xr=xS(vM),sJ=xS(Xa),wr=fn,ys=so,ow=oo,md=xS(Qg);function xS(e){return e&&e.__esModule?e:{default:e}}function EM(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(EM=function(r){return r?n:t})(e)}function uJ(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=EM(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function $r(e,t,n){return t=lJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lJ(e){var t=cJ(e,"string");return typeof t=="symbol"?t:String(t)}function cJ(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const wa={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let ws=wa.mouse,Gg=class extends aw.Component{constructor(){super(...arguments),$r(this,"dragging",!1),$r(this,"lastX",NaN),$r(this,"lastY",NaN),$r(this,"touchIdentifier",null),$r(this,"mounted",!1),$r(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(t.target instanceof r.defaultView.Node)||this.props.handle&&!(0,wr.matchesSelectorAndParentsTo)(t.target,this.props.handle,n)||this.props.cancel&&(0,wr.matchesSelectorAndParentsTo)(t.target,this.props.cancel,n))return;t.type==="touchstart"&&t.preventDefault();const i=(0,wr.getTouchIdentifier)(t);this.touchIdentifier=i;const a=(0,ys.getControlPosition)(t,i,this);if(a==null)return;const{x:s,y:u}=a,c=(0,ys.createCoreData)(this,s,u);(0,md.default)("DraggableCore: handleDragStart: %j",c),(0,md.default)("calling",this.props.onStart),!(this.props.onStart(t,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,wr.addUserSelectStyles)(r),this.dragging=!0,this.lastX=s,this.lastY=u,(0,wr.addEvent)(r,ws.move,this.handleDrag),(0,wr.addEvent)(r,ws.stop,this.handleDragStop))}),$r(this,"handleDrag",t=>{const n=(0,ys.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let u=r-this.lastX,c=i-this.lastY;if([u,c]=(0,ys.snapToGrid)(this.props.grid,u,c),!u&&!c)return;r=this.lastX+u,i=this.lastY+c}const a=(0,ys.createCoreData)(this,r,i);if((0,md.default)("DraggableCore: handleDrag: %j",a),this.props.onDrag(t,a)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=i}),$r(this,"handleDragStop",t=>{if(!this.dragging)return;const n=(0,ys.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,d=i-this.lastY||0;[c,d]=(0,ys.snapToGrid)(this.props.grid,c,d),r=this.lastX+c,i=this.lastY+d}const a=(0,ys.createCoreData)(this,r,i);if(this.props.onStop(t,a)===!1||this.mounted===!1)return!1;const u=this.findDOMNode();u&&this.props.enableUserSelectHack&&(0,wr.removeUserSelectStyles)(u.ownerDocument),(0,md.default)("DraggableCore: handleDragStop: %j",a),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,u&&((0,md.default)("DraggableCore: Removing handlers"),(0,wr.removeEvent)(u.ownerDocument,ws.move,this.handleDrag),(0,wr.removeEvent)(u.ownerDocument,ws.stop,this.handleDragStop))}),$r(this,"onMouseDown",t=>(ws=wa.mouse,this.handleDragStart(t))),$r(this,"onMouseUp",t=>(ws=wa.mouse,this.handleDragStop(t))),$r(this,"onTouchStart",t=>(ws=wa.touch,this.handleDragStart(t))),$r(this,"onTouchEnd",t=>(ws=wa.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,wr.addEvent)(t,wa.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:n}=t;(0,wr.removeEvent)(n,wa.mouse.move,this.handleDrag),(0,wr.removeEvent)(n,wa.touch.move,this.handleDrag),(0,wr.removeEvent)(n,wa.mouse.stop,this.handleDragStop),(0,wr.removeEvent)(n,wa.touch.stop,this.handleDragStop),(0,wr.removeEvent)(t,wa.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,wr.removeUserSelectStyles)(n)}}findDOMNode(){var t,n;return(t=this.props)!==null&&t!==void 0&&t.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:sJ.default.findDOMNode(this)}render(){return aw.cloneElement(aw.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Xg.default=Gg;$r(Gg,"displayName","DraggableCore");$r(Gg,"propTypes",{allowAnyClick:Xr.default.bool,children:Xr.default.node.isRequired,disabled:Xr.default.bool,enableUserSelectHack:Xr.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Xr.default.arrayOf(Xr.default.number),handle:Xr.default.string,cancel:Xr.default.string,nodeRef:Xr.default.object,onStart:Xr.default.func,onDrag:Xr.default.func,onStop:Xr.default.func,onMouseDown:Xr.default.func,scale:Xr.default.number,className:ow.dontSetMe,style:ow.dontSetMe,transform:ow.dontSetMe});$r(Gg,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),e.default=void 0;var t=g(ne),n=h(vM),r=h(Xa),i=h(OG),a=fn,s=so,u=oo,c=h(Xg),d=h(Qg);function h(S){return S&&S.__esModule?S:{default:S}}function v(S){if(typeof WeakMap!="function")return null;var P=new WeakMap,M=new WeakMap;return(v=function(T){return T?M:P})(S)}function g(S,P){if(!P&&S&&S.__esModule)return S;if(S===null||typeof S!="object"&&typeof S!="function")return{default:S};var M=v(P);if(M&&M.has(S))return M.get(S);var T={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in S)if(W!=="default"&&Object.prototype.hasOwnProperty.call(S,W)){var re=U?Object.getOwnPropertyDescriptor(S,W):null;re&&(re.get||re.set)?Object.defineProperty(T,W,re):T[W]=S[W]}return T.default=S,M&&M.set(S,T),T}function w(){return w=Object.assign?Object.assign.bind():function(S){for(var P=1;P<arguments.length;P++){var M=arguments[P];for(var T in M)Object.prototype.hasOwnProperty.call(M,T)&&(S[T]=M[T])}return S},w.apply(this,arguments)}function _(S,P,M){return P=E(P),P in S?Object.defineProperty(S,P,{value:M,enumerable:!0,configurable:!0,writable:!0}):S[P]=M,S}function E(S){var P=C(S,"string");return typeof P=="symbol"?P:String(P)}function C(S,P){if(typeof S!="object"||S===null)return S;var M=S[Symbol.toPrimitive];if(M!==void 0){var T=M.call(S,P||"default");if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(S)}class x extends t.Component{static getDerivedStateFromProps(P,M){let{position:T}=P,{prevPropsPosition:U}=M;return T&&(!U||T.x!==U.x||T.y!==U.y)?((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:T,prevPropsPosition:U}),{x:T.x,y:T.y,prevPropsPosition:{...T}}):null}constructor(P){super(P),_(this,"onDragStart",(M,T)=>{if((0,d.default)("Draggable: onDragStart: %j",T),this.props.onStart(M,(0,s.createDraggableData)(this,T))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),_(this,"onDrag",(M,T)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",T);const U=(0,s.createDraggableData)(this,T),W={x:U.x,y:U.y,slackX:0,slackY:0};if(this.props.bounds){const{x:he,y:de}=W;W.x+=this.state.slackX,W.y+=this.state.slackY;const[ce,pe]=(0,s.getBoundPosition)(this,W.x,W.y);W.x=ce,W.y=pe,W.slackX=this.state.slackX+(he-W.x),W.slackY=this.state.slackY+(de-W.y),U.x=W.x,U.y=W.y,U.deltaX=W.x-this.state.x,U.deltaY=W.y-this.state.y}if(this.props.onDrag(M,U)===!1)return!1;this.setState(W)}),_(this,"onDragStop",(M,T)=>{if(!this.state.dragging||this.props.onStop(M,(0,s.createDraggableData)(this,T))===!1)return!1;(0,d.default)("Draggable: onDragStop: %j",T);const W={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:he,y:de}=this.props.position;W.x=he,W.y=de}this.setState(W)}),this.state={dragging:!1,dragged:!1,x:P.position?P.position.x:P.defaultPosition.x,y:P.position?P.position.y:P.defaultPosition.y,prevPropsPosition:{...P.position},slackX:0,slackY:0,isElementSVG:!1},P.position&&!(P.onDrag||P.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var P,M;return(P=(M=this.props)===null||M===void 0||(M=M.nodeRef)===null||M===void 0?void 0:M.current)!==null&&P!==void 0?P:r.default.findDOMNode(this)}render(){const{axis:P,bounds:M,children:T,defaultPosition:U,defaultClassName:W,defaultClassNameDragging:re,defaultClassNameDragged:he,position:de,positionOffset:ce,scale:pe,...xe}=this.props;let Ce={},Le=null;const We=!!!de||this.state.dragging,oe=de||U,_e={x:(0,s.canDragX)(this)&&We?this.state.x:oe.x,y:(0,s.canDragY)(this)&&We?this.state.y:oe.y};this.state.isElementSVG?Le=(0,a.createSVGTransform)(_e,ce):Ce=(0,a.createCSSTransform)(_e,ce);const G=(0,i.default)(T.props.className||"",W,{[re]:this.state.dragging,[he]:this.state.dragged});return t.createElement(c.default,w({},xe,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(T),{className:G,style:{...T.props.style,...Ce},transform:Le}))}}e.default=x,_(x,"displayName","Draggable"),_(x,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe}),_(x,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(dM);const{default:PM,DraggableCore:fJ}=dM;Vg.exports=PM;Vg.exports.default=PM;Vg.exports.DraggableCore=fJ;var dJ=Vg.exports;const hJ=$h(dJ);var kn=globalThis&&globalThis.__assign||function(){return kn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},kn.apply(this,arguments)},PC={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},kC={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},$m={width:"20px",height:"20px",position:"absolute",zIndex:1},pJ={top:kn(kn({},PC),{top:"-5px"}),right:kn(kn({},kC),{left:void 0,right:"-5px"}),bottom:kn(kn({},PC),{top:void 0,bottom:"-5px"}),left:kn(kn({},kC),{left:"-5px"}),topRight:kn(kn({},$m),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:kn(kn({},$m),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:kn(kn({},$m),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:kn(kn({},$m),{left:"-10px",top:"-10px",cursor:"nw-resize"})},mJ=ne.memo(function(e){var t=e.onResizeStart,n=e.direction,r=e.children,i=e.replaceStyles,a=e.className,s=ne.useCallback(function(d){t(d,n)},[t,n]),u=ne.useCallback(function(d){t(d,n)},[t,n]),c=ne.useMemo(function(){return kn(kn({position:"absolute",userSelect:"none"},pJ[n]),i??{})},[i,n]);return j.jsx("div",{className:a||void 0,style:c,onMouseDown:s,onTouchStart:u,children:r})}),vJ=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ka=globalThis&&globalThis.__assign||function(){return Ka=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ka.apply(this,arguments)},gJ={width:"auto",height:"auto"},Rm=function(e,t,n){return Math.max(Math.min(e,n),t)},CC=function(e,t,n){var r=Math.round(e/t);return r*t+n*(r-1)},ic=function(e,t){return new RegExp(e,"i").test(t)},Nm=function(e){return!!(e.touches&&e.touches.length)},yJ=function(e){return!!((e.clientX||e.clientX===0)&&(e.clientY||e.clientY===0))},DC=function(e,t,n){n===void 0&&(n=0);var r=t.reduce(function(a,s,u){return Math.abs(s-e)<Math.abs(t[a]-e)?u:a},0),i=Math.abs(t[r]-e);return n===0||i<n?t[r]:e},sw=function(e){return e=e.toString(),e==="auto"||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:"".concat(e,"px")},Tm=function(e,t,n,r){if(e&&typeof e=="string"){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%")){var i=Number(e.replace("%",""))/100;return t*i}if(e.endsWith("vw")){var i=Number(e.replace("vw",""))/100;return n*i}if(e.endsWith("vh")){var i=Number(e.replace("vh",""))/100;return r*i}}return e},wJ=function(e,t,n,r,i,a,s){return r=Tm(r,e.width,t,n),i=Tm(i,e.height,t,n),a=Tm(a,e.width,t,n),s=Tm(s,e.height,t,n),{maxWidth:typeof r>"u"?void 0:Number(r),maxHeight:typeof i>"u"?void 0:Number(i),minWidth:typeof a>"u"?void 0:Number(a),minHeight:typeof s>"u"?void 0:Number(s)}},_J=function(e){return Array.isArray(e)?e:[e,e]},bJ=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],OC="__resizable_base__",SJ=function(e){vJ(t,e);function t(n){var r,i,a,s,u=e.call(this,n)||this;return u.ratio=1,u.resizable=null,u.parentLeft=0,u.parentTop=0,u.resizableLeft=0,u.resizableRight=0,u.resizableTop=0,u.resizableBottom=0,u.targetLeft=0,u.targetTop=0,u.delta={width:0,height:0},u.appendBase=function(){if(!u.resizable||!u.window)return null;var c=u.parentNode;if(!c)return null;var d=u.window.document.createElement("div");return d.style.width="100%",d.style.height="100%",d.style.position="absolute",d.style.transform="scale(0, 0)",d.style.left="0",d.style.flex="0 0 100%",d.classList?d.classList.add(OC):d.className+=OC,c.appendChild(d),d},u.removeBase=function(c){var d=u.parentNode;d&&d.removeChild(c)},u.state={isResizing:!1,width:(i=(r=u.propsSize)===null||r===void 0?void 0:r.width)!==null&&i!==void 0?i:"auto",height:(s=(a=u.propsSize)===null||a===void 0?void 0:a.height)!==null&&s!==void 0?s:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},u.onResizeStart=u.onResizeStart.bind(u),u.onMouseMove=u.onMouseMove.bind(u),u.onMouseUp=u.onMouseUp.bind(u),u}return Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||gJ},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var n=0,r=0;if(this.resizable&&this.window){var i=this.resizable.offsetWidth,a=this.resizable.offsetHeight,s=this.resizable.style.position;s!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:i,r=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:a,this.resizable.style.position=s}return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var n=this,r=this.props.size,i=function(u){var c;if(typeof n.state[u]>"u"||n.state[u]==="auto")return"auto";if(n.propsSize&&n.propsSize[u]&&(!((c=n.propsSize[u])===null||c===void 0)&&c.toString().endsWith("%"))){if(n.state[u].toString().endsWith("%"))return n.state[u].toString();var d=n.getParentSize(),h=Number(n.state[u].toString().replace("px","")),v=h/d[u]*100;return"".concat(v,"%")}return sw(n.state[u])},a=r&&typeof r.width<"u"&&!this.state.isResizing?sw(r.width):i("width"),s=r&&typeof r.height<"u"&&!this.state.isResizing?sw(r.height):i("height");return{width:a,height:s}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var r=!1,i=this.parentNode.style.flexWrap;i!=="wrap"&&(r=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var a={width:n.offsetWidth,height:n.offsetHeight};return r&&(this.parentNode.style.flexWrap=i),this.removeBase(n),a},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(n,r){var i=this.propsSize&&this.propsSize[r];return this.state[r]==="auto"&&this.state.original[r]===n&&(typeof i>"u"||i==="auto")?"auto":n},t.prototype.calculateNewMaxFromBoundary=function(n,r){var i=this.props.boundsByDirection,a=this.state.direction,s=i&&ic("left",a),u=i&&ic("top",a),c,d;if(this.props.bounds==="parent"){var h=this.parentNode;h&&(c=s?this.resizableRight-this.parentLeft:h.offsetWidth+(this.parentLeft-this.resizableLeft),d=u?this.resizableBottom-this.parentTop:h.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(c=s?this.resizableRight:this.window.innerWidth-this.resizableLeft,d=u?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(c=s?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),d=u?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return c&&Number.isFinite(c)&&(n=n&&n<c?n:c),d&&Number.isFinite(d)&&(r=r&&r<d?r:d),{maxWidth:n,maxHeight:r}},t.prototype.calculateNewSizeFromDirection=function(n,r){var i=this.props.scale||1,a=_J(this.props.resizeRatio||1),s=a[0],u=a[1],c=this.state,d=c.direction,h=c.original,v=this.props,g=v.lockAspectRatio,w=v.lockAspectRatioExtraHeight,_=v.lockAspectRatioExtraWidth,E=h.width,C=h.height,x=w||0,S=_||0;return ic("right",d)&&(E=h.width+(n-h.x)*s/i,g&&(C=(E-S)/this.ratio+x)),ic("left",d)&&(E=h.width-(n-h.x)*s/i,g&&(C=(E-S)/this.ratio+x)),ic("bottom",d)&&(C=h.height+(r-h.y)*u/i,g&&(E=(C-x)*this.ratio+S)),ic("top",d)&&(C=h.height-(r-h.y)*u/i,g&&(E=(C-x)*this.ratio+S)),{newWidth:E,newHeight:C}},t.prototype.calculateNewSizeFromAspectRatio=function(n,r,i,a){var s=this.props,u=s.lockAspectRatio,c=s.lockAspectRatioExtraHeight,d=s.lockAspectRatioExtraWidth,h=typeof a.width>"u"?10:a.width,v=typeof i.width>"u"||i.width<0?n:i.width,g=typeof a.height>"u"?10:a.height,w=typeof i.height>"u"||i.height<0?r:i.height,_=c||0,E=d||0;if(u){var C=(g-_)*this.ratio+E,x=(w-_)*this.ratio+E,S=(h-E)/this.ratio+_,P=(v-E)/this.ratio+_,M=Math.max(h,C),T=Math.min(v,x),U=Math.max(g,S),W=Math.min(w,P);n=Rm(n,M,T),r=Rm(r,U,W)}else n=Rm(n,h,v),r=Rm(r,g,w);return{newWidth:n,newHeight:r}},t.prototype.setBoundingClientRect=function(){var n=1/(this.props.scale||1);if(this.props.bounds==="parent"){var r=this.parentNode;if(r){var i=r.getBoundingClientRect();this.parentLeft=i.left*n,this.parentTop=i.top*n}}if(this.props.bounds&&typeof this.props.bounds!="string"){var a=this.props.bounds.getBoundingClientRect();this.targetLeft=a.left*n,this.targetTop=a.top*n}if(this.resizable){var s=this.resizable.getBoundingClientRect(),u=s.left,c=s.top,d=s.right,h=s.bottom;this.resizableLeft=u*n,this.resizableRight=d*n,this.resizableTop=c*n,this.resizableBottom=h*n}},t.prototype.onResizeStart=function(n,r){if(!(!this.resizable||!this.window)){var i=0,a=0;if(n.nativeEvent&&yJ(n.nativeEvent)?(i=n.nativeEvent.clientX,a=n.nativeEvent.clientY):n.nativeEvent&&Nm(n.nativeEvent)&&(i=n.nativeEvent.touches[0].clientX,a=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var s=this.props.onResizeStart(n,r,this.resizable);if(s===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var u,c=this.window.getComputedStyle(this.resizable);if(c.flexBasis!=="auto"){var d=this.parentNode;if(d){var h=this.window.getComputedStyle(d).flexDirection;this.flexDir=h.startsWith("row")?"row":"column",u=c.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var v={original:{x:i,y:a,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Ka(Ka({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:r,flexBasis:u};this.setState(v)}},t.prototype.onMouseMove=function(n){var r=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&Nm(n))try{n.preventDefault(),n.stopPropagation()}catch{}var i=this.props,a=i.maxWidth,s=i.maxHeight,u=i.minWidth,c=i.minHeight,d=Nm(n)?n.touches[0].clientX:n.clientX,h=Nm(n)?n.touches[0].clientY:n.clientY,v=this.state,g=v.direction,w=v.original,_=v.width,E=v.height,C=this.getParentSize(),x=wJ(C,this.window.innerWidth,this.window.innerHeight,a,s,u,c);a=x.maxWidth,s=x.maxHeight,u=x.minWidth,c=x.minHeight;var S=this.calculateNewSizeFromDirection(d,h),P=S.newHeight,M=S.newWidth,T=this.calculateNewMaxFromBoundary(a,s);this.props.snap&&this.props.snap.x&&(M=DC(M,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(P=DC(P,this.props.snap.y,this.props.snapGap));var U=this.calculateNewSizeFromAspectRatio(M,P,{width:T.maxWidth,height:T.maxHeight},{width:u,height:c});if(M=U.newWidth,P=U.newHeight,this.props.grid){var W=CC(M,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),re=CC(P,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),he=this.props.snapGap||0,de=he===0||Math.abs(W-M)<=he?W:M,ce=he===0||Math.abs(re-P)<=he?re:P;M=de,P=ce}var pe={width:M-w.width,height:P-w.height};if(this.delta=pe,_&&typeof _=="string"){if(_.endsWith("%")){var xe=M/C.width*100;M="".concat(xe,"%")}else if(_.endsWith("vw")){var Ce=M/this.window.innerWidth*100;M="".concat(Ce,"vw")}else if(_.endsWith("vh")){var Le=M/this.window.innerHeight*100;M="".concat(Le,"vh")}}if(E&&typeof E=="string"){if(E.endsWith("%")){var xe=P/C.height*100;P="".concat(xe,"%")}else if(E.endsWith("vw")){var Ce=P/this.window.innerWidth*100;P="".concat(Ce,"vw")}else if(E.endsWith("vh")){var Le=P/this.window.innerHeight*100;P="".concat(Le,"vh")}}var qe={width:this.createSizeForCssProperty(M,"width"),height:this.createSizeForCssProperty(P,"height")};this.flexDir==="row"?qe.flexBasis=qe.width:this.flexDir==="column"&&(qe.flexBasis=qe.height);var We=this.state.width!==qe.width,oe=this.state.height!==qe.height,_e=this.state.flexBasis!==qe.flexBasis,G=We||oe||_e;G&&Xa.flushSync(function(){r.setState(qe)}),this.props.onResize&&G&&this.props.onResize(n,g,this.resizable,pe)}},t.prototype.onMouseUp=function(n){var r,i,a=this.state,s=a.isResizing,u=a.direction;a.original,!(!s||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(n,u,this.resizable,this.delta),this.props.size&&this.setState({width:(r=this.props.size.width)!==null&&r!==void 0?r:"auto",height:(i=this.props.size.height)!==null&&i!==void 0?i:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Ka(Ka({},this.state.backgroundStyle),{cursor:"auto"})}))},t.prototype.updateSize=function(n){var r,i;this.setState({width:(r=n.width)!==null&&r!==void 0?r:"auto",height:(i=n.height)!==null&&i!==void 0?i:"auto"})},t.prototype.renderResizer=function(){var n=this,r=this.props,i=r.enable,a=r.handleStyles,s=r.handleClasses,u=r.handleWrapperStyle,c=r.handleWrapperClass,d=r.handleComponent;if(!i)return null;var h=Object.keys(i).map(function(v){return i[v]!==!1?j.jsx(mJ,{direction:v,onResizeStart:n.onResizeStart,replaceStyles:a&&a[v],className:s&&s[v],children:d&&d[v]?d[v]:null},v):null});return j.jsx("div",{className:c,style:u,children:h})},t.prototype.render=function(){var n=this,r=Object.keys(this.props).reduce(function(s,u){return bJ.indexOf(u)!==-1||(s[u]=n.props[u]),s},{}),i=Ka(Ka(Ka({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(i.flexBasis=this.state.flexBasis);var a=this.props.as||"div";return j.jsxs(a,Ka({style:i,className:this.props.className},r,{ref:function(s){s&&(n.resizable=s)},children:[this.state.isResizing&&j.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(ne.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var V_=function(e,t){return V_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},V_(e,t)};function xJ(e,t){V_(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Tn=function(){return Tn=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Tn.apply(this,arguments)};function EJ(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var PJ={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},kJ=function(e){return{bottom:e,bottomLeft:e,bottomRight:e,left:e,right:e,top:e,topLeft:e,topRight:e}},CJ=function(e){xJ(t,e);function t(n){var r=e.call(this,n)||this;return r.resizingPosition={x:0,y:0},r.offsetFromParent={left:0,top:0},r.resizableElement={current:null},r.originalPosition={x:0,y:0},r.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:n.maxWidth,maxHeight:n.maxHeight},r.onResizeStart=r.onResizeStart.bind(r),r.onResize=r.onResize.bind(r),r.onResizeStop=r.onResizeStop.bind(r),r.onDragStart=r.onDragStart.bind(r),r.onDrag=r.onDrag.bind(r),r.onDragStop=r.onDragStop.bind(r),r.getMaxSizesFromProps=r.getMaxSizesFromProps.bind(r),r}return t.prototype.componentDidMount=function(){this.updateOffsetFromParent();var n=this.offsetFromParent,r=n.left,i=n.top,a=this.getDraggablePosition(),s=a.x,u=a.y;this.draggable.setState({x:s-r,y:u-i}),this.forceUpdate()},t.prototype.getDraggablePosition=function(){var n=this.draggable.state,r=n.x,i=n.y;return{x:r,y:i}},t.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},t.prototype.getParentSize=function(){return this.resizable.getParentSize()},t.prototype.getMaxSizesFromProps=function(){var n=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,r=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:n,maxHeight:r}},t.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},t.prototype.getOffsetHeight=function(n){var r=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/r;case"body":return document.body.offsetHeight/r;default:return n.offsetHeight}},t.prototype.getOffsetWidth=function(n){var r=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/r;case"body":return document.body.offsetWidth/r;default:return n.offsetWidth}},t.prototype.onDragStart=function(n,r){this.props.onDragStart&&this.props.onDragStart(n,r);var i=this.getDraggablePosition();if(this.originalPosition=i,!!this.props.bounds){var a=this.getParent(),s=this.props.scale,u;if(this.props.bounds==="parent")u=a;else if(this.props.bounds==="body"){var c=a.getBoundingClientRect(),d=c.left,h=c.top,v=document.body.getBoundingClientRect(),g=-(d-a.offsetLeft*s-v.left)/s,w=-(h-a.offsetTop*s-v.top)/s,_=(document.body.offsetWidth-this.resizable.size.width*s)/s+g,E=(document.body.offsetHeight-this.resizable.size.height*s)/s+w;return this.setState({bounds:{top:w,right:_,bottom:E,left:g}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var C=a.getBoundingClientRect(),x=C.left,S=C.top,P=-(x-a.offsetLeft*s)/s,M=-(S-a.offsetTop*s)/s,_=(window.innerWidth-this.resizable.size.width*s)/s+P,E=(window.innerHeight-this.resizable.size.height*s)/s+M;return this.setState({bounds:{top:M,right:_,bottom:E,left:P}})}else typeof this.props.bounds=="string"?u=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(u=this.props.bounds);if(!(!(u instanceof HTMLElement)||!(a instanceof HTMLElement))){var T=u.getBoundingClientRect(),U=T.left,W=T.top,re=a.getBoundingClientRect(),he=re.left,de=re.top,ce=(U-he)/s,pe=W-de;if(this.resizable){this.updateOffsetFromParent();var xe=this.offsetFromParent;this.setState({bounds:{top:pe-xe.top,right:ce+(u.offsetWidth-this.resizable.size.width)-xe.left/s,bottom:pe+(u.offsetHeight-this.resizable.size.height)-xe.top,left:ce-xe.left/s}})}}}},t.prototype.onDrag=function(n,r){if(this.props.onDrag){var i=this.offsetFromParent,a=i.left,s=i.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(n,Tn(Tn({},r),{x:r.x+a,y:r.y+s}));if(this.props.dragAxis==="x")return this.props.onDrag(n,Tn(Tn({},r),{x:r.x+a,y:this.originalPosition.y+s,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(n,Tn(Tn({},r),{x:this.originalPosition.x+a,y:r.y+s,deltaX:0}))}},t.prototype.onDragStop=function(n,r){if(this.props.onDragStop){var i=this.offsetFromParent,a=i.left,s=i.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(n,Tn(Tn({},r),{x:r.x+a,y:r.y+s}));if(this.props.dragAxis==="x")return this.props.onDragStop(n,Tn(Tn({},r),{x:r.x+a,y:this.originalPosition.y+s,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(n,Tn(Tn({},r),{x:this.originalPosition.x+a,y:r.y+s,deltaX:0}))}},t.prototype.onResizeStart=function(n,r,i){n.stopPropagation(),this.setState({resizing:!0});var a=this.props.scale,s=this.offsetFromParent,u=this.getDraggablePosition();if(this.resizingPosition={x:u.x+s.left,y:u.y+s.top},this.originalPosition=u,this.props.bounds){var c=this.getParent(),d=void 0;this.props.bounds==="parent"?d=c:this.props.bounds==="body"?d=document.body:this.props.bounds==="window"?d=window:typeof this.props.bounds=="string"?d=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(d=this.props.bounds);var h=this.getSelfElement();if(h instanceof Element&&(d instanceof HTMLElement||d===window)&&c instanceof HTMLElement){var v=this.getMaxSizesFromProps(),g=v.maxWidth,w=v.maxHeight,_=this.getParentSize();if(g&&typeof g=="string")if(g.endsWith("%")){var E=Number(g.replace("%",""))/100;g=_.width*E}else g.endsWith("px")&&(g=Number(g.replace("px","")));if(w&&typeof w=="string")if(w.endsWith("%")){var E=Number(w.replace("%",""))/100;w=_.height*E}else w.endsWith("px")&&(w=Number(w.replace("px","")));var C=h.getBoundingClientRect(),x=C.left,S=C.top,P=this.props.bounds==="window"?{left:0,top:0}:d.getBoundingClientRect(),M=P.left,T=P.top,U=this.getOffsetWidth(d),W=this.getOffsetHeight(d),re=r.toLowerCase().endsWith("left"),he=r.toLowerCase().endsWith("right"),de=r.startsWith("top"),ce=r.startsWith("bottom");if((re||de)&&this.resizable){var pe=(x-M)/a+this.resizable.size.width;this.setState({maxWidth:pe>Number(g)?g:pe})}if(he||this.props.lockAspectRatio&&!re&&!de){var pe=U+(M-x)/a;this.setState({maxWidth:pe>Number(g)?g:pe})}if((de||re)&&this.resizable){var pe=(S-T)/a+this.resizable.size.height;this.setState({maxHeight:pe>Number(w)?w:pe})}if(ce||this.props.lockAspectRatio&&!de&&!re){var pe=W+(T-S)/a;this.setState({maxHeight:pe>Number(w)?w:pe})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(n,r,i)},t.prototype.onResize=function(n,r,i,a){var s=this,u={x:this.originalPosition.x,y:this.originalPosition.y},c=-a.width,d=-a.height,h=["top","left","topLeft","bottomLeft","topRight"];h.includes(r)&&(r==="bottomLeft"?u.x+=c:(r==="topRight"||(u.x+=c),u.y+=d));var v=this.draggable.state;(u.x!==v.x||u.y!==v.y)&&Xa.flushSync(function(){s.draggable.setState(u)}),this.updateOffsetFromParent();var g=this.offsetFromParent,w=this.getDraggablePosition().x+g.left,_=this.getDraggablePosition().y+g.top;this.resizingPosition={x:w,y:_},this.props.onResize&&this.props.onResize(n,r,i,a,{x:w,y:_})},t.prototype.onResizeStop=function(n,r,i,a){this.setState({resizing:!1});var s=this.getMaxSizesFromProps(),u=s.maxWidth,c=s.maxHeight;this.setState({maxWidth:u,maxHeight:c}),this.props.onResizeStop&&this.props.onResizeStop(n,r,i,a,this.resizingPosition)},t.prototype.updateSize=function(n){this.resizable&&this.resizable.updateSize({width:n.width,height:n.height})},t.prototype.updatePosition=function(n){this.draggable.setState(n)},t.prototype.updateOffsetFromParent=function(){var n=this.props.scale,r=this.getParent(),i=this.getSelfElement();if(!r||i===null)return{top:0,left:0};var a=r.getBoundingClientRect(),s=a.left,u=a.top,c=i.getBoundingClientRect(),d=this.getDraggablePosition(),h=r.scrollLeft,v=r.scrollTop;this.offsetFromParent={left:c.left-s+h-d.x*n,top:c.top-u+v-d.y*n}},t.prototype.render=function(){var n=this,r=this.props,i=r.disableDragging,a=r.style,s=r.dragHandleClassName,u=r.position,c=r.onMouseDown,d=r.onMouseUp,h=r.dragAxis,v=r.dragGrid,g=r.bounds,w=r.enableUserSelectHack,_=r.cancel,E=r.children;r.onResizeStart,r.onResize,r.onResizeStop,r.onDragStart,r.onDrag,r.onDragStop;var C=r.resizeHandleStyles,x=r.resizeHandleClasses,S=r.resizeHandleComponent,P=r.enableResizing,M=r.resizeGrid,T=r.resizeHandleWrapperClass,U=r.resizeHandleWrapperStyle,W=r.scale,re=r.allowAnyClick,he=r.dragPositionOffset,de=EJ(r,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),ce=this.props.default?Tn({},this.props.default):void 0;delete de.default;var pe=i||s?{cursor:"auto"}:{cursor:"move"},xe=Tn(Tn(Tn({},PJ),pe),a),Ce=this.offsetFromParent,Le=Ce.left,qe=Ce.top,We;u&&(We={x:u.x-Le,y:u.y-qe});var oe=this.state.resizing?void 0:We,_e=this.state.resizing?"both":h;return ne.createElement(hJ,{ref:function(G){G&&(n.draggable=G)},handle:s?".".concat(s):void 0,defaultPosition:ce,onMouseDown:c,onMouseUp:d,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:_e,disabled:i,grid:v,bounds:g?this.state.bounds:void 0,position:oe,enableUserSelectHack:w,cancel:_,scale:W,allowAnyClick:re,nodeRef:this.resizableElement,positionOffset:he},ne.createElement(SJ,Tn({},de,{ref:function(G){G&&(n.resizable=G,n.resizableElement.current=G.resizable)},defaultSize:ce,size:this.props.size,enable:typeof P=="boolean"?kJ(P):P,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:xe,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:M,handleWrapperClass:T,handleWrapperStyle:U,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:C,handleClasses:x,handleComponent:S,scale:this.props.scale}),E))},t.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},t}(ne.PureComponent);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OJ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ln=(e,t)=>{const n=ne.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:u="",children:c,...d},h)=>ne.createElement("svg",{ref:h,...DJ,width:i,height:i,stroke:r,strokeWidth:s?Number(a)*24/Number(i):a,className:["lucide",`lucide-${OJ(e)}`,u].join(" "),...d},[...t.map(([v,g])=>ne.createElement(v,g)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=Ln("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=Ln("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=Ln("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=Ln("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=Ln("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=Ln("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=Ln("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=Ln("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=Ln("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=Ln("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=Ln("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=Ln("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=Ln("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=Ln("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=Ln("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=Ln("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=Ln("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=Ln("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=Ln("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function $M(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=$M(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function xt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=$M(e))&&(r&&(r+=" "),r+=t);return r}function Xo(e,t){const[n,r]=ne.useState([]);return ne.useEffect(()=>{try{const a=Ys.getDatabase()[e];if(!a)return;const u=a.find(t).$.subscribe({next:c=>r(c)});return()=>u.unsubscribe()}catch(i){return console.error("useRxQuery error:",i),()=>{}}},[e,JSON.stringify(t)]),n}const ll=async(e,t)=>{try{const n=Ys.getDatabase(),r=await n.widgets.findOne(e).exec();if(!r)return;const i=r.group_id;if(!i)return;const a=await n.widgets.find({selector:{canvas_id:r.canvas_id,is_deleted:!1,id:{$ne:e},group_id:i}}).exec();if(a.length===0)return;await Promise.all(a.map(async s=>{var d,h,v,g,w;if((d=s.view_state)!=null&&d.is_pinned)return;let u={...s.data_source_config},c=!1;if(t.type==="date"&&s.widget_type==="smart_list"){const{"properties.project_id":_,...E}=u.criteria||{};if(t.granularity==="month"){const C=new Date(t.val),x=t.val.substring(0,7);u.criteria={...E,do_date:x,entity_type:E.entity_type||"task"},u.title=C.toLocaleString("default",{month:"long",year:"numeric"})}else{u.criteria={...E,do_date:t.val,entity_type:E.entity_type||"task"};const C=new Date(t.val);u.title=C.toLocaleString("default",{month:"long",day:"numeric"})}c=!0}else if(t.type==="date"&&s.widget_type==="project_header")u.selected_date=t.val,u.date_granularity=t.granularity,u.project_id=void 0,c=!0;else if(t.type==="date"&&s.widget_type==="timeline")u.selected_date=t.val,c=!0;else if(t.type==="item"&&s.widget_type==="detail")u.item_id=t.id,c=!0;else if(t.type==="item"&&s.widget_type==="project_header"){const _=await n.items.findOne(t.id).exec();_&&_.entity_type==="project"&&(u.project_id=t.id,u.selected_date=void 0,u.date_granularity=void 0,c=!0)}else if(t.type==="item"&&s.widget_type==="smart_list"){const _=await n.items.findOne(t.id).exec();if(_&&_.entity_type==="project"){const E=((h=s.data_source_config)==null?void 0:h.criteria)||{};if(!E.entity_type||E.entity_type==="task"){if(E["properties.project_id"]===_.id){const{"properties.project_id":C,...x}=E;u.criteria=x,u.title=((v=s.data_source_config)==null?void 0:v.title)||"Tasks"}else{const{do_date:C,...x}=E;u.title=_.title,u.criteria={...x,entity_type:"task","properties.project_id":_.id}}c=!0}}}else if(t.type==="clear_project"&&s.widget_type==="smart_list"){const _=((g=s.data_source_config)==null?void 0:g.criteria)||{};if(_["properties.project_id"]){const{"properties.project_id":E,...C}=_;u.criteria=C,u.title=((w=s.data_source_config)==null?void 0:w.title)||"Tasks",c=!0}}c&&await s.patch({data_source_config:u})}))}catch(n){console.error("Signal propagation failed:",n)}},HJ=({dateStr:e,isCurrentMonth:t,isToday:n,isSelected:r,onClick:i,children:a})=>{const{isOver:s,setNodeRef:u}=Wh({id:`cell_${e}`,data:{type:"calendar_cell",date:e}});return j.jsx("div",{ref:u,onClick:i,className:xt("p-1 flex flex-col gap-0.5 overflow-hidden transition-colors cursor-pointer",t?"bg-white":"bg-gray-100 text-gray-400",n&&!r&&"bg-blue-50",r&&"bg-blue-100 ring-2 ring-inset ring-blue-500",s&&"bg-green-100 ring-2 ring-inset ring-green-500 z-10"),children:a})},KJ=({day:e,startHour:t,totalMinutes:n,children:r,isToday:i,onClick:a})=>{const s=it(e,"yyyy-MM-dd"),{setNodeRef:u}=Wh({id:`timeline_${s}`,data:{type:"timeline_day",date:s,day:e,startHour:t,totalMinutes:n}});return j.jsx("div",{ref:u,onClick:a,className:xt("border-r last:border-r-0 relative h-full",i&&"bg-blue-50/30"),children:r})},qJ=({widget:e})=>{const[t,n]=ne.useState(new Date),[r,i]=ne.useState(null),[a,s]=ne.useState("month"),[u,c]=ne.useState(0),d=ne.useRef(null),[h,v]=ne.useState(null),[g,w]=ne.useState(null);l$({onDragMove(F){var me;const{active:ee,over:X}=F;if(((me=ee.data.current)==null?void 0:me.entity_type)==="event"){w(null);return}if(!X||!X.data.current||X.data.current.type!=="timeline_day"){w(null);return}const{day:I,startHour:H,totalMinutes:ae}=X.data.current;let ge=ee.rect.current.translated;!ge&&ee.rect.current.initial&&F.delta&&(ge={top:ee.rect.current.initial.top+F.delta.y,left:ee.rect.current.initial.left+F.delta.x,height:ee.rect.current.initial.height,width:ee.rect.current.initial.width,bottom:ee.rect.current.initial.bottom+F.delta.y,right:ee.rect.current.initial.right+F.delta.x});const $e=X.rect;if(ge&&$e){const Me=ge.top-$e.top,Ke=Math.max(0,Math.min(1,Me/$e.height))*ae,an=Math.round(Ke/15)*15,Et=Oc(Ki(Ts(new Date(I),0),H),an);let At=45;const dn=ee.data.current;if(dn&&dn.start_time&&dn.end_time){const sr=Ns(new Date(dn.end_time),new Date(dn.start_time));sr>0&&(At=sr)}const on=Oc(Et,At);w({day:new Date(I),start:Et,end:on})}},onDragEnd(){w(null)}});const _=l_(t),E=u_(t),C=Gs(_),x=c_(E),S=HP({start:C,end:x}),P=Gs(t),M=c_(t),T=HP({start:P,end:M}),U=ne.useMemo(()=>{const F=a==="month"?C:P,ee=a==="month"?x:M;return{selector:{entity_type:{$in:["task","event"]},is_deleted:!1,system_status:{$ne:"archived"},do_date:{$gte:it(F,"yyyy-MM-dd"),$lte:it(ee,"yyyy-MM-dd")}}}},[a,C,x,P,M]),W=Xo("items",U),re=F=>{const ee=it(F,"yyyy-MM-dd");return W.filter(X=>X.do_date===ee)},he=(F,ee)=>{ee.stopPropagation(),i(F),ll(e.id,{type:"date",val:it(F,"yyyy-MM-dd"),granularity:"day"})},de=F=>{n(F),ll(e.id,{type:"date",val:it(F,"yyyy-MM-dd"),granularity:"month"})},ce=F=>{n(F)},pe=()=>{i(null)},xe=(F,ee)=>{ee.stopPropagation(),ll(e.id,{type:"item",id:F.id})},Ce=ne.useCallback(F=>Math.round(F/15)*15,[]),Le=ne.useCallback((F,ee,X,I)=>{if(!d.current)return null;const H=d.current.getBoundingClientRect(),ae=F-H.top,$e=Math.max(0,Math.min(1,ae/H.height))*I,me=Ce($e);return Oc(Ki(Ts(ee,0),X),me)},[Ce]),qe=ne.useCallback((F,ee,X)=>{X.stopPropagation(),X.preventDefault(),!(!F.start_time||!F.end_time)&&v({itemId:F.id,edge:ee,initialY:X.clientY,originalStart:new Date(F.start_time),originalEnd:new Date(F.end_time)})},[]),We=ne.useCallback(F=>{if(!h)return;const ee=W.find(Ge=>Ge.id===h.itemId);if(!ee||!ee.do_date)return;const X=new Date(ee.do_date),I=8,H=21,ae=(H-I)*60,ge=Le(F.clientY,X,I,ae);if(!ge)return;const $e=Ki(Ts(X,0),I),me=Ki(Ts(X,0),H),Me=ge<$e?$e:ge>me?me:ge;if(h.edge==="top"){const Ge=new Date(ee.end_time);Ns(Ge,Me)>=15&&ee.patch({start_time:Me.toISOString()})}else{const Ge=new Date(ee.start_time);Ns(Me,Ge)>=15&&ee.patch({end_time:Me.toISOString()})}},[h,W,Le]),oe=ne.useCallback(()=>{v(null)},[]);ne.useEffect(()=>{if(h)return window.addEventListener("mousemove",We),window.addEventListener("mouseup",oe),()=>{window.removeEventListener("mousemove",We),window.removeEventListener("mouseup",oe)}},[h,We,oe]),ne.useEffect(()=>{if(a!=="week")return;const F=d.current;if(F){const ee=new ResizeObserver(X=>{for(let I of X)c(I.contentRect.height)});return ee.observe(F),()=>ee.disconnect()}},[a]);const _e=()=>j.jsxs(j.Fragment,{children:[j.jsx("div",{className:"grid grid-cols-7 bg-gray-200 border-b",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(F=>j.jsx("div",{className:"bg-gray-50 py-1 text-center text-[10px] font-medium text-gray-500 uppercase tracking-wider",children:F},F))}),j.jsx("div",{className:"grid grid-cols-7 flex-1 auto-rows-fr gap-px bg-gray-200 overflow-hidden",children:S.map(F=>{const ee=re(F),X=Z5(F,t),I=ec(F,new Date),H=r&&ec(F,r),ae=it(F,"yyyy-MM-dd");return j.jsxs(HJ,{dateStr:ae,isCurrentMonth:X,isToday:I,isSelected:H,onClick:ge=>he(F,ge),children:[j.jsx("span",{className:xt("text-[10px] w-5 h-5 flex items-center justify-center rounded-full leading-none pt-[1px]",I?"bg-blue-500 text-white font-bold":"text-gray-500",H&&!I&&"bg-blue-200 text-blue-800 font-bold"),children:it(F,"d")}),j.jsxs("div",{className:"flex-1 flex flex-col gap-0.5 overflow-hidden",children:[ee.slice(0,3).map(ge=>j.jsxs("div",{className:xt("text-[9px] truncate px-1 rounded border",ge.entity_type==="event"?"bg-purple-50 text-purple-700 border-purple-100":"bg-blue-50 text-blue-700 border-blue-100",ge.system_status==="completed"&&"opacity-50 line-through grayscale"),title:ge.title,children:[ge.title,ge.do_date&&ge.due_date&&ge.do_date>ge.due_date&&j.jsx("span",{className:"ml-1 text-red-500 font-bold",title:"Do Date > Due Date",children:""})]},ge.id)),ee.length>3&&j.jsxs("div",{className:"text-[8px] text-gray-400 pl-1",children:["+",ee.length-3]})]})]},F.toISOString())})})]}),G=()=>{const H=u<300?4:u<600?2:1;return j.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-white relative",children:[j.jsxs("div",{className:"grid grid-cols-8 border-b bg-gray-50 flex-shrink-0 shadow-sm z-20",children:[j.jsx("div",{className:"p-2 border-r text-xs text-gray-400 font-medium flex items-end justify-center bg-gray-50",children:"Time"}),T.map(ae=>{const ge=ec(ae,new Date),$e=r&&ec(ae,r);return j.jsxs("div",{className:xt("py-2 text-center border-r last:border-r-0 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",ge&&"bg-gray-100",$e&&!ge&&"bg-blue-50"),onClick:me=>he(ae,me),children:[j.jsx("div",{className:"text-xs text-gray-500 uppercase",children:it(ae,"EEE")}),j.jsx("div",{className:xt("text-sm font-bold w-6 h-6 mx-auto flex items-center justify-center rounded-full mt-1 leading-none pt-[1px]",ge?"bg-blue-500 text-white":"text-gray-700",$e&&!ge&&"bg-blue-200 text-blue-800"),children:it(ae,"d")})]},ae.toISOString())})]}),j.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative",children:[j.jsx("div",{className:"flex-1 relative w-full overflow-hidden",ref:d,children:j.jsxs("div",{className:"absolute inset-0 flex",children:[j.jsx("div",{className:"w-[12.5%] border-r bg-gray-50 flex-shrink-0 relative z-10 h-full",children:Array.from({length:13+1}).map((ae,ge)=>ge%H!==0||ge===13?null:j.jsx("div",{className:"absolute w-full text-right pr-2 text-xs text-gray-400 -mt-2",style:{top:`${ge/13*100}%`},children:`${(8+ge).toString().padStart(2,"0")}:00`},ge))}),j.jsxs("div",{className:"flex-1 grid grid-cols-7 relative h-full",children:[j.jsx("div",{className:"absolute inset-0 pointer-events-none",children:Array.from({length:13*4}).map((ae,ge)=>j.jsx("div",{className:xt("absolute w-full border-b",ge%4===0?"border-gray-200":"border-gray-100"),style:{top:`${ge/(13*4)*100}%`}},ge))}),T.map(ae=>{const $e=re(ae).filter(Me=>Me.start_time&&Me.end_time),me=ec(ae,new Date);return j.jsxs(KJ,{day:ae,startHour:8,totalMinutes:780,isToday:me,children:[$e.map(Me=>{const Ge=new Date(Me.start_time),Ke=new Date(Me.end_time),an=Ge.getHours()*60+Ge.getMinutes(),At=Ke.getHours()*60+Ke.getMinutes()-an,on=(an-8*60)/780*100,sr=At/780*100;return j.jsxs("div",{className:xt("absolute left-0.5 right-0.5 rounded px-1 py-0.5 text-[10px] overflow-hidden border shadow-sm cursor-pointer hover:z-10 hover:ring-1 hover:ring-blue-400",Me.entity_type==="event"?"bg-purple-100 border-purple-200 text-purple-800":"bg-blue-100 border-blue-200 text-blue-800"),style:{top:`${on}%`,height:`${sr}%`},title:`${it(Ge,"HH:mm")} - ${it(Ke,"HH:mm")} ${Me.title}`,onClick:Yn=>xe(Me,Yn),children:[j.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 cursor-ns-resize hover:bg-blue-400 opacity-0 hover:opacity-100 transition-opacity z-20",onMouseDown:Yn=>qe(Me,"top",Yn)}),j.jsx("div",{className:"truncate leading-tight font-medium",children:Me.title}),j.jsxs("div",{className:"text-[9px] leading-tight opacity-75",children:[it(Ge,"HH:mm")," - ",it(Ke,"HH:mm")]}),j.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 cursor-ns-resize hover:bg-blue-400 opacity-0 hover:opacity-100 transition-opacity z-20",onMouseDown:Yn=>qe(Me,"bottom",Yn)})]},Me.id)}),g&&ec(ae,g.day)&&j.jsx("div",{className:"absolute left-0.5 right-0.5 rounded px-1 py-0.5 text-[10px] overflow-hidden border border-dashed border-blue-400 bg-blue-50/50 z-20 pointer-events-none",style:{top:`${(g.start.getHours()*60+g.start.getMinutes()-8*60)/780*100}%`,height:`${Ns(g.end,g.start)/780*100}%`},children:j.jsxs("div",{className:"text-blue-600 font-medium",children:[it(g.start,"HH:mm")," - ",it(g.end,"HH:mm")]})})]},ae.toISOString())})]})]})}),j.jsxs("div",{className:"flex-shrink-0 border-t-4 border-gray-200 bg-gray-50 p-2 z-20 max-h-[40%] overflow-y-auto",children:[j.jsx("div",{className:"text-xs font-bold text-gray-500 mb-2 uppercase tracking-wider",children:"Unscheduled Tasks"}),j.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[j.jsx("div",{className:"text-xs text-gray-400 text-right pt-1",children:"All Day"}),j.jsx("div",{className:"col-span-7 grid grid-cols-7 gap-2",children:T.map(ae=>{const $e=re(ae).filter(me=>!me.start_time||!me.end_time);return j.jsx("div",{className:"flex flex-col gap-1 min-h-[50px] bg-white rounded border border-dashed border-gray-300 p-1",children:$e.map(me=>j.jsx("div",{className:xt("text-[10px] px-1 py-0.5 rounded border truncate cursor-pointer hover:ring-1 hover:ring-blue-400",me.entity_type==="event"?"bg-purple-50 text-purple-700 border-purple-100":"bg-blue-50 text-blue-700 border-blue-100",me.system_status==="completed"&&"opacity-50 line-through"),title:me.title,onClick:Me=>xe(me,Me),children:me.title},me.id))},ae.toISOString())})})]})]})]})]})};return j.jsxs("div",{className:"flex flex-col h-full bg-white",onClick:pe,children:[j.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-gray-50",children:[j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx("button",{onClick:F=>{F.stopPropagation(),a==="month"?de(vU(t,1)):ce(gU(t,1))},className:"p-1 hover:bg-gray-200 rounded text-gray-600",onMouseDown:F=>F.stopPropagation(),children:j.jsx(kM,{size:16})}),j.jsx("span",{onClick:F=>{F.stopPropagation(),a==="month"&&de(t)},className:xt("font-semibold text-gray-700 text-sm w-32 text-center transition-colors select-none",a==="month"&&"cursor-pointer hover:text-blue-600"),title:a==="month"?"Click to broadcast month signal":"",children:it(t,a==="month"?"MMMM yyyy":"'Week of' MMM d")}),j.jsx("button",{onClick:F=>{F.stopPropagation(),a==="month"?de(N$(t,1)):ce(I$(t,1))},className:"p-1 hover:bg-gray-200 rounded text-gray-600",onMouseDown:F=>F.stopPropagation(),children:j.jsx(CM,{size:16})})]}),j.jsxs("div",{className:"flex bg-gray-200 rounded p-0.5",children:[j.jsx("button",{onClick:F=>{F.stopPropagation(),s("month")},className:xt("px-3 py-1 text-xs rounded font-medium transition-colors",a==="month"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"Month"}),j.jsx("button",{onClick:F=>{F.stopPropagation(),s("week")},className:xt("px-3 py-1 text-xs rounded font-medium transition-colors",a==="week"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"Week"})]})]}),a==="month"?_e():G()]})},YJ=e=>ne.useMemo(()=>{if(!e)return{selector:{}};const t={is_deleted:!1};if(e.criteria){if(e.criteria.entity_type&&(t.entity_type=e.criteria.entity_type),e.criteria.status?Array.isArray(e.criteria.status)?t.system_status={$in:e.criteria.status}:e.criteria.status==="all"?t.system_status={$ne:"archived"}:t.system_status=e.criteria.status:t.system_status={$ne:"archived"},e.criteria.do_date!==void 0){const r=new Date,i=e.criteria.do_date;if(i===null)t.do_date=null;else if(i==="today"||/^\d{4}-\d{2}-\d{2}$/.test(i)){const a=i==="today"?it(r,"yyyy-MM-dd"):i;t.$or=[{do_date:a},{do_date:{$lt:a},system_status:"active"},{due_date:{$lt:a},system_status:"active"}]}else if(i==="tomorrow")t.do_date=it(jv(r,1),"yyyy-MM-dd");else if(i==="this_week"){const a=it(Gs(r,{weekStartsOn:1}),"yyyy-MM-dd"),s=it(c_(r,{weekStartsOn:1}),"yyyy-MM-dd");t.do_date={$gte:a,$lte:s}}else if(i==="this_month"){const a=it(l_(r),"yyyy-MM-dd"),s=it(u_(r),"yyyy-MM-dd");t.do_date={$gte:a,$lte:s}}else if(/^\d{4}-\d{2}$/.test(i)){const a=new Date(i+"-01"),s=it(l_(a),"yyyy-MM-dd"),u=it(u_(a),"yyyy-MM-dd");t.do_date={$gte:s,$lte:u}}else t.do_date=i}Object.keys(e.criteria).forEach(r=>{["entity_type","status","do_date"].includes(r)||(t[r]=e.criteria[r])})}const n=e.sort||[{updated_at:"desc"}];return{selector:t,sort:n}},[e]),VJ=({item:e,widgetId:t,onToggle:n,onSelect:r})=>{var _,E;const{attributes:i,listeners:a,setNodeRef:s,isDragging:u}=O$({id:`${t}::${e.id}`,data:{id:e.id,entity_type:e.entity_type,title:e.title,start_time:e.start_time,end_time:e.end_time}}),c={opacity:u?.3:1},d=new Date;d.setHours(0,0,0,0);const h=e.entity_type==="task"&&e.due_date&&new Date(e.due_date)<d&&e.system_status==="active",v=e.entity_type==="task"&&e.do_date&&new Date(e.do_date)<d&&e.system_status==="active",g=h?Math.floor((Date.now()-new Date(e.due_date).getTime())/(1e3*60*60*24)):0,w=v?Math.floor((Date.now()-new Date(e.do_date).getTime())/(1e3*60*60*24)):0;return j.jsxs("div",{ref:s,style:c,...a,...i,className:xt("group flex items-center gap-2 p-2 rounded hover:bg-gray-50 transition-colors touch-none relative overflow-hidden",e.system_status==="completed"&&"opacity-50",h?"bg-red-50 border border-red-100":v?"bg-yellow-50 border border-yellow-100":""),children:[h&&j.jsxs("div",{className:"absolute right-1 top-0.5 text-[10px] text-red-500 font-medium px-1 bg-red-100 rounded",children:["Due ",g," days ago"]}),!h&&v&&j.jsxs("div",{className:"absolute right-1 top-0.5 text-[10px] text-yellow-600 font-medium px-1 bg-yellow-100 rounded",children:[w," days ago"]}),j.jsx("button",{onPointerDown:C=>C.stopPropagation(),onClick:C=>{C.stopPropagation(),n(e)},className:xt("flex-shrink-0 w-5 h-5 rounded border flex items-center justify-center transition-colors cursor-pointer",e.system_status==="completed"?"bg-blue-500 border-blue-500 text-white":"border-gray-300 text-transparent hover:border-blue-400"),children:j.jsx(NJ,{size:12,strokeWidth:3})}),j.jsx("div",{className:"flex-1 cursor-pointer hover:text-blue-600",onPointerDown:C=>C.stopPropagation(),onClick:()=>r(e.id),children:j.jsxs("span",{className:xt("text-sm text-gray-700 truncate block",e.system_status==="completed"&&"line-through text-gray-400",h&&"text-red-700"),children:[((_=e.properties)==null?void 0:_.energy_level)==="high"&&j.jsx("span",{title:"High Energy",children:""}),((E=e.properties)==null?void 0:E.energy_level)==="low"&&j.jsx("span",{title:"Low Energy",children:""}),e.title]})})]})},XJ=({widget:e})=>{var _,E,C,x,S;const[t,n]=ne.useState(""),r=e.data_source_config||{},i=YJ(r),s=[...Xo("items",i)].sort((P,M)=>{const T=new Date;T.setHours(0,0,0,0);const U=P.entity_type==="task"&&P.due_date&&new Date(P.due_date)<T&&P.system_status==="active",W=M.entity_type==="task"&&M.due_date&&new Date(M.due_date)<T&&M.system_status==="active";if(U&&!W)return-1;if(!U&&W)return 1;const re=P.entity_type==="task"&&P.do_date&&new Date(P.do_date)<T&&P.system_status==="active",he=M.entity_type==="task"&&M.do_date&&new Date(M.do_date)<T&&M.system_status==="active";return re&&!he?-1:!re&&he?1:0}),u=async P=>{const M=P.system_status==="completed"?"active":"completed";await P.incrementalPatch({system_status:M,completed_at:M==="completed"?Date.now():null})},c=async P=>{if(P.preventDefault(),!!t.trim())try{const M=Ys.getDatabase();let T=null;const U=(r==null?void 0:r.criteria)||{},W=U.do_date;if(console.log("Adding item with criteria:",U),W==="today")T=it(new Date,"yyyy-MM-dd");else if(W&&/^\d{4}-\d{2}-\d{2}$/.test(W))T=W;else if(W&&/^\d{4}-\d{2}$/.test(W)){const ce=new Date;it(ce,"yyyy-MM")===W?T=it(ce,"yyyy-MM-dd"):T=`${W}-01`}console.log("Calculated do_date:",T);const re={};Object.keys(U).forEach(ce=>{if(ce.startsWith("properties.")){const pe=ce.replace("properties.","");re[pe]=U[ce]}});let he="task";const de=U.entity_type;de&&["task","event","project"].includes(de)&&(he=de),await M.items.insert({id:Zr(),title:t,entity_type:he,system_status:"active",created_at:Date.now(),updated_at:new Date().toISOString(),is_deleted:!1,user_id:"user_1",do_date:T,properties:re}),n("")}catch(M){console.error("Failed to add item:",M)}},{setNodeRef:d,isOver:h}=Wh({id:`smart_list_${e.id}`,data:{type:"smart_list",config:e.data_source_config}}),v=((_=r==null?void 0:r.criteria)==null?void 0:_.entity_type)||"task",g={task:"Add a task...",event:"Add an event...",project:"Add a project...",all:"Add a task..."}[v]||"Add a task...";return((E=e.view_state)==null?void 0:E.is_flipped)?j.jsxs("div",{className:"flex flex-col h-full bg-white p-4 overflow-y-auto",onMouseDown:P=>P.stopPropagation(),children:[j.jsx("h3",{className:"font-bold text-gray-700 mb-4 border-b pb-2",children:"List Settings"}),j.jsxs("div",{className:"space-y-4",children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"List Title"}),j.jsx("input",{type:"text",defaultValue:r.title||"",onBlur:P=>e.patch({data_source_config:{...r,title:P.target.value}}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 outline-none",placeholder:"My List"})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Item Type"}),j.jsxs("select",{defaultValue:((C=r.criteria)==null?void 0:C.entity_type)||"task",onChange:P=>e.patch({data_source_config:{...r,criteria:{...r.criteria,entity_type:P.target.value}}}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 outline-none bg-white",children:[j.jsx("option",{value:"task",children:"Tasks"}),j.jsx("option",{value:"event",children:"Events"}),j.jsx("option",{value:"project",children:"Projects"}),j.jsx("option",{value:"all",children:"All Types"})]})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Date Filter"}),j.jsxs("select",{defaultValue:((x=r.criteria)==null?void 0:x.do_date)||"",onChange:P=>e.patch({data_source_config:{...r,criteria:{...r.criteria,do_date:P.target.value||null}}}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 outline-none bg-white",children:[j.jsx("option",{value:"",children:"Any Date"}),j.jsx("option",{value:"today",children:"Today"}),j.jsxs("option",{value:it(new Date,"yyyy-MM-dd"),children:["Today (Fixed: ",it(new Date,"yyyy-MM-dd"),")"]})]}),j.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"* Drag a date from calendar to set specific date"})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Status"}),j.jsxs("select",{defaultValue:((S=r.criteria)==null?void 0:S.system_status)||"active",onChange:P=>e.patch({data_source_config:{...r,criteria:{...r.criteria,system_status:P.target.value}}}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 outline-none bg-white",children:[j.jsx("option",{value:"active",children:"Active Only"}),j.jsx("option",{value:"active",children:"Active Only"}),j.jsx("option",{value:"completed",children:"Completed Only"}),j.jsx("option",{value:"archived",children:"Archived Only"}),j.jsx("option",{value:"all",children:"All Statuses (Non-Archived)"})]})]}),j.jsx("button",{onClick:()=>e.patch({view_state:{...e.view_state,is_flipped:!1}}),className:"w-full bg-blue-500 text-white rounded py-1.5 text-sm font-medium hover:bg-blue-600 transition-colors mt-4",children:"Done"})]})]}):j.jsxs("div",{ref:d,className:xt("flex flex-col h-full bg-white transition-colors",h&&"bg-blue-50 ring-2 ring-blue-200 ring-inset"),children:[j.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-2 space-y-1",children:[s.length===0&&j.jsx("div",{className:"text-center text-gray-400 py-4 text-sm",children:"No items found"}),s.map(P=>j.jsx(VJ,{item:P,widgetId:e.id,onToggle:u,onSelect:M=>ll(e.id,{type:"item",id:M})},P.id))]}),j.jsx("form",{onSubmit:c,className:"p-2 border-t border-gray-100 bg-gray-50",children:j.jsxs("div",{className:"flex items-center gap-2 bg-white border border-gray-200 rounded px-2 py-1.5 focus-within:border-blue-400 focus-within:ring-1 focus-within:ring-blue-100 transition-all",children:[j.jsx(DM,{size:16,className:"text-gray-400"}),j.jsx("input",{type:"text",value:t,onChange:P=>n(P.target.value),placeholder:g,className:"flex-1 bg-transparent border-none outline-none text-sm text-gray-700 placeholder-gray-400"})]})})]})},QJ=({widget:e})=>{var h,v,g,w;const n=Xo("widgets",{selector:{id:e.id}})[0]||e,r=(h=n.data_source_config)==null?void 0:h.item_id,s=Xo("items",{selector:{id:r||"non-existent-id"}})[0],u=ne.useCallback(KO.debounce(async(_,E)=>{await _.incrementalPatch({...E,updated_at:new Date().toISOString()})},1e3),[]);if(!r)return j.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-50 text-gray-400 text-sm p-4 text-center",children:"Select an item to view details"});if(!s)return j.jsxs("div",{className:"w-full h-full flex items-center justify-center bg-gray-50 text-gray-400 text-sm p-4 text-center",children:["Item not found (",r,")"]});const c=(v=n.view_state)==null?void 0:v.is_flipped,d=s.entity_type==="event";return c?j.jsxs("div",{className:"flex flex-col h-full bg-white overflow-y-auto p-4 space-y-4",onMouseDown:_=>_.stopPropagation(),children:[j.jsxs("div",{className:"flex justify-between items-center mb-2",children:[j.jsxs("h3",{className:"font-bold text-gray-700",children:["Edit ",d?"Event":"Task"]}),j.jsx("button",{onClick:async()=>{await e.patch({view_state:{...e.view_state,is_flipped:!1}})},className:"bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600",children:"Done"})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Title"}),j.jsx("input",{defaultValue:s.title,onChange:_=>u(s,{title:_.target.value}),className:"w-full text-lg font-bold border-b border-gray-200 focus:border-blue-500 outline-none pb-1"})]}),d?j.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Start Time"}),j.jsx("input",{type:"datetime-local",defaultValue:s.start_time?new Date(s.start_time).toISOString().slice(0,16):"",onChange:_=>u(s,{start_time:_.target.value?new Date(_.target.value).toISOString():null}),className:"w-full bg-gray-50 border border-gray-200 rounded px-2 py-1 text-sm outline-none focus:border-blue-500"})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"End Time"}),j.jsx("input",{type:"datetime-local",defaultValue:s.end_time?new Date(s.end_time).toISOString().slice(0,16):"",onChange:_=>u(s,{end_time:_.target.value?new Date(_.target.value).toISOString():null}),className:"w-full bg-gray-50 border border-gray-200 rounded px-2 py-1 text-sm outline-none focus:border-blue-500"})]})]}):j.jsxs(j.Fragment,{children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Status"}),j.jsxs("select",{defaultValue:s.system_status,onChange:_=>u(s,{system_status:_.target.value}),className:"w-full bg-gray-50 border border-gray-200 rounded px-2 py-1 text-sm outline-none focus:border-blue-500",children:[j.jsx("option",{value:"active",children:"Active"}),j.jsx("option",{value:"completed",children:"Completed"}),j.jsx("option",{value:"archived",children:"Archived"}),j.jsx("option",{value:"dropped",children:"Dropped"})]})]}),j.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Do Date"}),j.jsx("input",{type:"date",defaultValue:s.do_date||"",onChange:_=>u(s,{do_date:_.target.value||null}),className:"w-full bg-gray-50 border border-gray-200 rounded px-2 py-1 text-sm outline-none focus:border-blue-500"})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Due Date"}),j.jsx("input",{type:"datetime-local",defaultValue:s.due_date?s.due_date.slice(0,16):"",onChange:_=>u(s,{due_date:_.target.value?new Date(_.target.value).toISOString():null}),className:"w-full bg-gray-50 border border-gray-200 rounded px-2 py-1 text-sm outline-none focus:border-blue-500"})]})]})]}),j.jsxs("div",{className:"flex-1 flex flex-col min-h-[100px]",children:[j.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Notes"}),j.jsx("textarea",{defaultValue:((g=s.properties)==null?void 0:g.content)||"",onChange:_=>u(s,{properties:{...s.properties,content:_.target.value}}),className:"flex-1 w-full bg-gray-50 border border-gray-200 rounded p-2 text-sm resize-none focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Add notes..."})]})]},s.id):j.jsxs("div",{className:"flex flex-col h-full bg-white overflow-y-auto p-4 space-y-4",onMouseDown:_=>_.stopPropagation(),children:[j.jsxs("div",{className:"border-b border-gray-100 pb-2",children:[j.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[j.jsx("span",{className:xt("text-[10px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded",d?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:d?"Event":"Task"}),s.system_status==="completed"&&j.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded bg-green-100 text-green-700",children:"Completed"})]}),j.jsx("h2",{className:"text-xl font-bold text-gray-800 leading-tight",children:s.title}),j.jsx("div",{className:"flex flex-col gap-1 mt-3 text-xs text-gray-500",children:d?j.jsxs(j.Fragment,{children:[s.start_time&&j.jsxs("div",{children:[j.jsx("span",{className:"font-medium text-gray-700",children:"Start:"})," ",new Date(s.start_time).toLocaleString()]}),s.end_time&&j.jsxs("div",{children:[j.jsx("span",{className:"font-medium text-gray-700",children:"End:"})," ",new Date(s.end_time).toLocaleString()]})]}):j.jsxs(j.Fragment,{children:[s.do_date&&j.jsxs("div",{children:[j.jsx("span",{className:"font-medium text-gray-700",children:"Do Date:"})," ",s.do_date]}),s.due_date&&j.jsxs("div",{children:[j.jsx("span",{className:"font-medium text-gray-700",children:"Due Date:"})," ",new Date(s.due_date).toLocaleString()]}),s.completed_at&&j.jsxs("div",{children:[j.jsx("span",{className:"font-medium text-gray-700",children:"Achieved:"})," ",new Date(s.completed_at).toLocaleString()]})]})})]}),j.jsx("div",{className:"flex-1 text-sm text-gray-600 whitespace-pre-wrap",children:((w=s.properties)==null?void 0:w.content)||j.jsx("span",{className:"italic text-gray-400",children:"No notes provided."})}),s.updated_at&&j.jsxs("div",{className:"text-[10px] text-gray-400 pt-2 border-t border-gray-50",children:["Last updated: ",new Date(s.updated_at).toLocaleString()]})]})},GJ=({widget:e})=>{const[t,n]=ne.useState(!1),{isOver:r,setNodeRef:i}=Wh({id:`archive_bin_${e.id}`,data:{type:"archive_bin"}}),a=Xo("items",{selector:{system_status:"archived",is_deleted:!1},sort:[{completed_at:"desc"}],limit:50}),s=t?a:[];return j.jsxs("div",{ref:i,className:xt("w-full h-full flex flex-col rounded-lg border-2 transition-all duration-200 bg-white overflow-hidden",r?"bg-red-50 border-red-500 text-red-600 shadow-lg":"border-gray-200 text-gray-600"),children:[j.jsxs("div",{className:xt("flex flex-col items-center justify-center p-4 cursor-pointer transition-colors",t?"h-auto border-b border-gray-100":"h-full",r&&"bg-red-50"),onClick:()=>n(!t),children:[j.jsx("div",{className:xt("transition-transform duration-200",r&&"animate-bounce"),children:r?j.jsx(OM,{size:32}):j.jsx($J,{size:32})}),j.jsx("span",{className:"mt-2 text-sm font-medium",children:r?"Drop to Archive":"Archive Bin"}),j.jsxs("div",{className:"mt-1 text-xs text-gray-400",children:[a.length," items"]}),t?j.jsx(MJ,{size:16,className:"mt-2 text-gray-400"}):j.jsx(TJ,{size:16,className:"mt-auto text-gray-400"})]}),t&&j.jsxs("div",{className:"flex-1 overflow-y-auto p-2 bg-gray-50",children:[s.length===0&&j.jsx("div",{className:"text-center text-gray-400 text-xs py-4",children:"Empty"}),s.map(u=>j.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-gray-100 mb-1 text-xs",children:[j.jsx("span",{className:"truncate flex-1 line-through text-gray-400",children:u.title}),j.jsx("span",{className:"text-gray-300 ml-2 whitespace-nowrap",children:u.completed_at?it(new Date(u.completed_at),"MMM d"):"-"})]},u.id))]})]})},Mm=({id:e,label:t,className:n,children:r})=>{const{isOver:i,setNodeRef:a}=Wh({id:`matrix_${e}`,data:{type:"matrix_quad",quad:e}});return j.jsxs("div",{ref:a,className:xt("relative flex flex-col p-2 border transition-colors",n,i&&"bg-blue-50 ring-2 ring-inset ring-blue-400 z-10"),children:[j.jsx("div",{className:"absolute top-2 left-2 text-xs font-bold text-gray-400 uppercase tracking-wider pointer-events-none",children:t}),r]})},JJ=({item:e,widgetId:t,top:n,left:r})=>{var c,d;const{attributes:i,listeners:a,setNodeRef:s,isDragging:u}=O$({id:`${t}::${e.id}`,data:{id:e.id,entity_type:"task",title:e.title}});return j.jsx("div",{ref:s,...a,...i,className:xt("absolute w-3 h-3 rounded-full shadow-sm transform -translate-x-1/2 -translate-y-1/2 border border-white cursor-grab active:cursor-grabbing hover:scale-125 transition-transform z-20",((c=e.properties)==null?void 0:c.priority)==="high"?"bg-red-500":((d=e.properties)==null?void 0:d.priority)==="low"?"bg-gray-400":"bg-blue-500",u&&"opacity-30"),style:{top:n,left:r},title:`${e.title} (Due: ${e.due_date})`})},ZJ=({widget:e})=>{const t=ne.useMemo(()=>({selector:{entity_type:"task",system_status:"active",is_deleted:!1}}),[]),n=Xo("items",t);console.log("Matrix Items:",n.length,n[0]);const r=i=>{var u,c;let a=50;((u=i.properties)==null?void 0:u.priority)==="high"?a=15:((c=i.properties)==null?void 0:c.priority)==="low"&&(a=85);let s=5;if(i.due_date){const d=new Date;d.setHours(0,0,0,0);const h=eU(i.due_date),v=QW(h,d);v<=0?s=95:s=5+1/v*90}return{top:`${a}%`,left:`${s}%`}};return j.jsxs("div",{className:"w-full h-full flex flex-col bg-white",children:[j.jsxs("div",{className:"absolute inset-0 pointer-events-none flex flex-col items-center justify-center",children:[j.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 -rotate-90 text-xs font-bold text-gray-400 tracking-widest uppercase origin-left translate-x-2",children:"Importance"}),j.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 text-xs font-bold text-gray-400 tracking-widest uppercase mb-1",children:"Urgency"})]}),j.jsxs("div",{className:"flex-1 grid grid-cols-2 grid-rows-2 relative z-0",children:[j.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[j.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-0.5 bg-gray-300 -translate-x-1/2"}),j.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-0.5 bg-gray-300 -translate-y-1/2"})]}),j.jsx(Mm,{id:"Q2",label:"Q2: Plan",className:"border-r border-b border-gray-100 bg-blue-50/30"}),j.jsx(Mm,{id:"Q1",label:"Q1: Do",className:"border-b border-gray-100 bg-red-50/30"}),j.jsx(Mm,{id:"Q4",label:"Q4: Drop",className:"border-r border-gray-100 bg-gray-50/30"}),j.jsx(Mm,{id:"Q3",label:"Q3: Delegate",className:"bg-yellow-50/30"})]}),j.jsx("div",{className:"absolute inset-0 pointer-events-none",children:n.map(i=>{const a=r(i);return j.jsx("div",{className:"pointer-events-auto",children:j.jsx(JJ,{item:i,widgetId:e.id,top:a.top,left:a.left})},i.id)})})]})},eZ=({widget:e})=>{var w,_,E,C,x,S;const t=(w=e.data_source_config)==null?void 0:w.project_id,n=(_=e.data_source_config)==null?void 0:_.selected_date,r=(E=e.data_source_config)==null?void 0:E.date_granularity,a=Xo("items",{selector:{id:t||"non-existent"}})[0],s={entity_type:"task",is_deleted:!1};n?r==="month"?s.do_date={$regex:`^${n}`}:s.do_date=n:t&&(s["properties.project_id"]=t);const u=Xo("items",{selector:s}),c=u.length,d=u.filter(P=>P.system_status==="completed").length,h=c>0?Math.round(d/c*100):0,v=(C=e.view_state)==null?void 0:C.is_flipped,g=async P=>{P.preventDefault();const M=new FormData(P.target),T={title:M.get("title"),system_status:M.get("status"),properties:{...a==null?void 0:a.properties,content:M.get("content")}},U=M.get("start_time"),W=M.get("due_date");U&&(T.start_time=new Date(U).toISOString()),W&&(T.due_date=W),await a.incrementalPatch(T),await e.patch({view_state:{...e.view_state,is_flipped:!1}})};return!a&&!n?j.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-50 text-gray-400 text-sm",children:"Project not found"}):v&&a?j.jsx("div",{className:"w-full h-full bg-white p-4 overflow-y-auto",children:j.jsxs("form",{onSubmit:g,className:"flex flex-col gap-3 h-full",children:[j.jsxs("div",{className:"flex justify-between items-center",children:[j.jsx("h3",{className:"font-bold text-gray-700",children:"Edit Project"}),j.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600",children:"Save"})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Title"}),j.jsx("input",{name:"title",defaultValue:a.title,className:"w-full border rounded p-1 text-sm font-bold"})]}),j.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Status"}),j.jsxs("select",{name:"status",defaultValue:a.system_status,className:"w-full border rounded p-1 text-xs",children:[j.jsx("option",{value:"active",children:"Active"}),j.jsx("option",{value:"completed",children:"Completed"}),j.jsx("option",{value:"dropped",children:"Dropped"})]})]}),j.jsxs("div",{children:[j.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Due Date"}),j.jsx("input",{type:"date",name:"due_date",defaultValue:a.due_date?it(new Date(a.due_date),"yyyy-MM-dd"):"",className:"w-full border rounded p-1 text-xs"})]})]}),j.jsxs("div",{className:"flex-1 flex flex-col",children:[j.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Notes"}),j.jsx("textarea",{name:"content",defaultValue:(x=a.properties)==null?void 0:x.content,className:"flex-1 w-full border rounded p-2 text-sm resize-none",placeholder:"Project description..."})]})]})}):j.jsxs("div",{className:"w-full h-full bg-white p-4 flex flex-col justify-center",children:[j.jsxs("div",{className:"flex items-center justify-between mb-2",children:[j.jsx("div",{className:"flex items-center gap-2",children:n?j.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:r==="month"?(()=>{const P=new Date(n+"-01");return isNaN(P.getTime())?n:it(P,"MMMM yyyy")})():(()=>{const P=new Date(n);return isNaN(P.getTime())?n:it(P,"MMMM d, yyyy")})()}):j.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:(a==null?void 0:a.title)||"Project"})}),j.jsxs("span",{className:"text-sm font-medium text-blue-600 bg-blue-50 px-2 py-1 rounded",children:[d,"/",c]})]}),!n&&a&&j.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mb-3",children:[j.jsxs("div",{className:"flex items-center gap-1",children:[j.jsx("span",{className:"font-medium",children:"Status:"}),j.jsx("span",{className:xt("px-1.5 py-0.5 rounded capitalize",a.system_status==="active"?"bg-green-100 text-green-700":a.system_status==="completed"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:a.system_status})]}),a.start_time&&j.jsxs("div",{children:[j.jsx("span",{className:"font-medium",children:"Start:"})," ",it(new Date(a.start_time),"MMM d, yyyy")]}),a.due_date&&j.jsxs("div",{children:[j.jsx("span",{className:"font-medium",children:"Due:"})," ",it(new Date(a.due_date),"MMM d, yyyy")]})]}),j.jsx("div",{className:"w-full h-2 bg-gray-100 rounded-full overflow-hidden mb-3",children:j.jsx("div",{className:"h-full bg-blue-500 transition-all duration-500",style:{width:`${h}%`}})}),a&&j.jsxs("div",{className:"flex-1 overflow-y-auto bg-gray-50 rounded p-2 text-sm text-gray-600 whitespace-pre-wrap",children:[j.jsx("div",{className:"font-medium text-xs text-gray-400 mb-1 uppercase tracking-wider",children:"Notes"}),((S=a.properties)==null?void 0:S.content)||j.jsx("span",{className:"italic text-gray-400",children:"No notes provided."})]}),n&&!a&&j.jsx("div",{className:"flex-1 overflow-y-auto",children:j.jsxs("div",{className:"text-sm text-gray-600",children:[j.jsxs("div",{className:"font-medium text-xs text-gray-400 mb-2 uppercase tracking-wider",children:["Tasks for this ",r==="month"?"month":"day"]}),u.length>0?j.jsxs("div",{className:"space-y-1",children:[u.slice(0,10).map(P=>j.jsx("div",{className:"flex items-center gap-2 text-xs",children:j.jsx("span",{className:P.system_status==="completed"?"line-through text-gray-400":"",children:P.title})},P.id)),u.length>10&&j.jsxs("div",{className:"text-xs text-gray-400 italic",children:["... and ",u.length-10," more tasks"]})]}):j.jsxs("span",{className:"italic text-gray-400 text-sm",children:["No tasks for this ",r==="month"?"month":"day"]})]})})]})},tZ=({widget:e})=>{var M;const[t,n]=ne.useState(()=>{var T;return(T=e.data_source_config)!=null&&T.selected_date?new Date(e.data_source_config.selected_date):new Date}),r=ne.useRef(null);ne.useEffect(()=>{var T;(T=e.data_source_config)!=null&&T.selected_date&&n(new Date(e.data_source_config.selected_date))},[(M=e.data_source_config)==null?void 0:M.selected_date]);const[i,a]=ne.useState(0),[s,u]=ne.useState(null),c=8,d=21,h=(d-c)*60;ne.useEffect(()=>{const T=r.current;if(T){const U=new ResizeObserver(W=>{for(let re of W)a(re.contentRect.height)});return U.observe(T),()=>U.disconnect()}},[]);const v=ne.useMemo(()=>{const T=Ki(Rs(t),c),U=Ki(Rs(t),d);return{selector:{entity_type:{$in:["task","event"]},is_deleted:!1,system_status:{$ne:"archived"},start_time:{$gte:T.toISOString(),$lt:U.toISOString()},end_time:{$gt:T.toISOString(),$lte:U.toISOString()}}}},[t]),g=Xo("items",v),w=T=>{if(!T.start_time||!T.end_time)return null;let U=new Date(T.start_time),W=new Date(T.end_time);s&&s.itemId===T.id&&(U=s.proposedStart,W=s.proposedEnd);const re=Ki(Rs(t),c),he=Ki(Rs(t),d);U<re&&(U=re),W>he&&(W=he);const de=Ns(U,re),ce=Ns(W,U),pe=de/h*100,xe=ce/h*100;return{top:`${Math.max(0,pe)}%`,height:`${Math.min(100,xe)}%`}},_=ne.useCallback(T=>{if(!r.current)return null;const U=r.current.getBoundingClientRect(),W=T-U.top,he=Math.max(0,Math.min(1,W/U.height))*h,de=Math.round(he/15)*15;return Oc(Ki(Ts(t,0),c),de)},[t,h]),E=ne.useCallback((T,U,W)=>{if(W.stopPropagation(),W.preventDefault(),!T.start_time||!T.end_time)return;const re=new Date(T.start_time),he=new Date(T.end_time);u({itemId:T.id,edge:U,initialY:W.clientY,originalStart:re,originalEnd:he,proposedStart:re,proposedEnd:he})},[]),C=ne.useCallback(T=>{if(!s)return;const U=_(T.clientY);if(!U)return;const W=Ki(Ts(t,0),c),re=Ki(Ts(t,0),d),he=U<W?W:U>re?re:U;u(de=>{if(!de)return null;let ce=de.proposedStart,pe=de.proposedEnd;return de.edge==="top"?Ns(de.originalEnd,he)>=15&&(ce=he,pe=de.originalEnd):Ns(he,de.originalStart)>=15&&(pe=he,ce=de.originalStart),{...de,proposedStart:ce,proposedEnd:pe}})},[s,_,t]),x=ne.useCallback(()=>{if(s){const T=g.find(U=>U.id===s.itemId);T&&(s.proposedStart.getTime()!==s.originalStart.getTime()||s.proposedEnd.getTime()!==s.originalEnd.getTime())&&T.patch({start_time:s.proposedStart.toISOString(),end_time:s.proposedEnd.toISOString()}).catch(U=>console.error("Resize patch failed:",U)),u(null)}},[s,g]);ne.useEffect(()=>{if(s)return window.addEventListener("mousemove",C),window.addEventListener("mouseup",x),()=>{window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",x)}},[s,C,x]);const S=Array.from({length:d-c+1},(T,U)=>c+U),P=i<300?4:i<600?2:1;return j.jsxs("div",{className:"flex flex-col h-full bg-white overflow-hidden",children:[j.jsx("div",{className:"flex items-center justify-between p-2 border-b bg-gray-50 flex-shrink-0",children:j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx("button",{onClick:()=>n(jv(t,-1)),className:"p-1 hover:bg-gray-200 rounded text-gray-600",children:j.jsx(kM,{size:16})}),j.jsx("span",{className:"font-semibold text-gray-700 text-sm",children:it(t,"MMMM d, yyyy")}),j.jsx("button",{onClick:()=>n(jv(t,1)),className:"p-1 hover:bg-gray-200 rounded text-gray-600",children:j.jsx(CM,{size:16})})]})}),j.jsxs("div",{className:"flex-1 relative overflow-hidden",ref:r,children:[Array.from({length:h/15}).map((T,U)=>j.jsx("div",{className:xt("absolute left-12 right-0 border-t",U%4===0?"border-gray-200":"border-gray-50 border-dashed"),style:{top:`${U*15/h*100}%`}},`grid-${U}`)),S.map((T,U)=>U%P!==0||T===d?null:j.jsxs("div",{className:"absolute left-0 w-12 text-right pr-2 text-[10px] text-gray-400 -mt-2 bg-white z-10",style:{top:`${(T-c)/(d-c)*100}%`},children:[T,":00"]},T)),j.jsx("div",{className:"absolute top-0 bottom-0 left-12 right-0",children:g.map(T=>{const U=w(T);return U?j.jsxs("div",{className:xt("absolute left-1 right-1 rounded px-2 py-1 text-xs overflow-hidden border shadow-sm cursor-pointer hover:z-20 hover:ring-1 hover:ring-blue-400 transition-all group",T.entity_type==="event"?"bg-purple-100 text-purple-700 border-purple-200":"bg-blue-100 text-blue-700 border-blue-200",T.system_status==="completed"&&"opacity-50 grayscale",(s==null?void 0:s.itemId)===T.id&&"z-30 ring-2 ring-blue-500 shadow-md"),style:{top:U.top,height:U.height},title:`${T.title} (${T.start_time?it(new Date(T.start_time),"HH:mm"):"All Day"})`,onClick:W=>{W.stopPropagation(),ll(e.id,{type:"item",id:T.id})},children:[j.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 -mt-1 cursor-ns-resize hover:bg-blue-400 opacity-0 group-hover:opacity-100 transition-opacity z-20",onMouseDown:W=>E(T,"top",W)}),j.jsx("div",{className:"font-medium leading-tight truncate",children:T.title}),j.jsxs("div",{className:"text-[10px] opacity-75 truncate",children:[T.start_time&&it(new Date(T.start_time),"HH:mm")," - ",T.end_time&&it(new Date(T.end_time),"HH:mm")]}),j.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2 -mb-1 cursor-ns-resize hover:bg-blue-400 opacity-0 group-hover:opacity-100 transition-opacity z-20",onMouseDown:W=>E(T,"bottom",W)})]},T.id):null})})]})]})},nZ={calendar_master:qJ,smart_list:XJ,detail:QJ,archive_bin:GJ,matrix:ZJ,project_header:eZ,timeline:tZ},rZ=({widget:e})=>{const t=nZ[e.widget_type];return t?j.jsx(t,{widget:e}):j.jsxs("div",{className:"w-full h-full flex items-center justify-center bg-red-50 text-red-500",children:["Unknown Widget: ",e.widget_type]})},RC=50,Wi=e=>Math.round(e/RC)*RC,iZ=({widget:e,isActive:t,onSetActive:n,onBringToFront:r,scale:i})=>{var Le,qe,We;const[a,s]=ne.useState(!1),[u,c]=ne.useState(null),[d,h]=ne.useState(!1),v=ne.useRef(null),g=ne.useRef(null),w=ne.useRef(null),[_,E]=ne.useState(!1),C=e.geometry,x=e.view_state||{},S=x.is_pinned||!1,[P,M]=ne.useState({x:C.x,y:C.y,w:C.w,h:C.h});ne.useEffect(()=>{a||M({x:C.x,y:C.y,w:C.w,h:C.h})},[C.x,C.y,C.w,C.h]),ne.useEffect(()=>{const oe=_e=>{g.current&&!g.current.contains(_e.target)&&h(!1),w.current&&!w.current.contains(_e.target)&&E(!1)};if(d||_)return document.addEventListener("mousedown",oe),()=>{document.removeEventListener("mousedown",oe)}},[d,_]);const T=ne.useCallback(()=>{s(!0)},[]),U=ne.useCallback((oe,_e)=>{M(G=>({...G,x:_e.x,y:_e.y})),c({x:Wi(_e.x),y:Wi(_e.y)})},[]),W=ne.useCallback((oe,_e)=>{s(!1),c(null);const G=Wi(_e.x),F=Wi(_e.y);M(ee=>({...ee,x:G,y:F})),e.patch({geometry:{...C,x:G,y:F}})},[e,C]),re=ne.useCallback(()=>{s(!0)},[]),he=ne.useCallback((oe,_e,G,F,ee)=>{M({x:ee.x,y:ee.y,w:G.offsetWidth,h:G.offsetHeight}),c({x:Wi(ee.x),y:Wi(ee.y),w:Wi(G.offsetWidth),h:Wi(G.offsetHeight)})},[]),de=ne.useCallback((oe,_e,G,F,ee)=>{s(!1),c(null);const X=Wi(ee.x),I=Wi(ee.y),H=Wi(G.offsetWidth),ae=Wi(G.offsetHeight);M({x:X,y:I,w:H,h:ae}),e.patch({geometry:{...C,x:X,y:I,w:H,h:ae}})},[e,C]),ce=ne.useCallback(oe=>{var _e,G,F;if(oe.stopPropagation(),n(),r(),e.widget_type==="project_header"){const ee=(_e=e.data_source_config)==null?void 0:_e.selected_date,X=(G=e.data_source_config)==null?void 0:G.date_granularity,I=(F=e.data_source_config)==null?void 0:F.project_id;ee?ll(e.id,{type:"date",val:ee,granularity:X}):I&&ll(e.id,{type:"item",id:I})}},[n,r,e]),pe=ne.useCallback(async oe=>{oe.stopPropagation(),oe.preventDefault(),await e.patch({view_state:{...x,is_pinned:!S}})},[e,x,S]),xe=ne.useCallback(async(oe,_e)=>{oe.stopPropagation(),oe.preventDefault();try{const G=Ys.getDatabase();let F=e.group_id;F||(F=Zr(),await e.patch({group_id:F}));const ee=350,X=50,I=C.x+ee,H=C.y+X,ge={smart_list:{w:300,h:400},matrix:{w:500,h:500},project_header:{w:400,h:300},detail:{w:400,h:500},timeline:{w:800,h:400}}[_e]||{w:300,h:400};if(_e==="project_header"){const me=Zr();await G.items.insert({id:me,user_id:"local",entity_type:"project",system_status:"active",title:"New Project",properties:{content:""},updated_at:new Date().toISOString(),is_deleted:!1,created_at:Date.now()}),await G.widgets.insert({id:Zr(),canvas_id:e.canvas_id,widget_type:"project_header",geometry:{x:I,y:H,w:400,h:300,z:(C.z||0)+1},data_source_config:{project_id:me},group_id:F,view_state:{},updated_at:new Date().toISOString(),is_deleted:!1}),console.log(`Created Project Hub (${me}) with header in group ${F}`);return}let $e={};if(_e==="smart_list"){const me=new Date,Me=`${me.getFullYear()}-${String(me.getMonth()+1).padStart(2,"0")}`;$e={title:me.toLocaleString("default",{month:"long"}),criteria:{do_date:Me,entity_type:"task"}}}await G.widgets.insert({id:Zr(),canvas_id:e.canvas_id,widget_type:_e,geometry:{x:I,y:H,w:ge.w,h:ge.h,z:(C.z||0)+1},data_source_config:$e,group_id:F,view_state:{},updated_at:new Date().toISOString(),is_deleted:!1}),console.log(`Created ${_e} in group ${F}`)}catch(G){console.error("Failed to create widget:",G)}},[e,C,x]),Ce=ne.useCallback(async oe=>{oe.stopPropagation(),oe.preventDefault(),await e.patch({is_deleted:!0})},[e]);return j.jsxs(j.Fragment,{children:[u&&j.jsx("div",{style:{position:"absolute",left:u.x,top:u.y,width:u.w||C.w,height:u.h||C.h,border:"2px dashed #10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderRadius:"0.5rem",pointerEvents:"none",zIndex:(C.z||0)-1}}),j.jsx(CJ,{ref:v,position:{x:P.x,y:P.y},size:{width:P.w,height:P.h},onDragStart:T,onDrag:U,onDragStop:W,onResizeStart:re,onResize:he,onResizeStop:de,onMouseDown:ce,dragHandleClassName:"widget-header",dragGrid:[1,1],resizeGrid:[1,1],scale:i,enableUserSelectHack:!1,style:{zIndex:C.z||0},className:xt("rounded-lg border-2",!a&&"shadow-lg backdrop-blur-sm transition-shadow",a&&"shadow-md",t?"border-blue-500":"border-gray-300"),children:j.jsxs("div",{className:xt("w-full h-full flex flex-col rounded-lg overflow-hidden",a?"bg-white":"bg-white bg-opacity-95"),style:{willChange:a?"transform":"auto"},children:[j.jsxs("div",{className:"widget-header flex items-center justify-between bg-gray-100 px-3 py-2 cursor-move border-b border-gray-200 rounded-t-lg",children:[j.jsx("span",{className:"font-bold text-xs text-gray-600 uppercase tracking-wider",children:((Le=e.data_source_config)==null?void 0:Le.title)||e.widget_type.replace("_"," ")}),e.widget_type==="smart_list"&&j.jsxs("div",{className:"relative ml-2",ref:w,children:[j.jsxs("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:oe=>{oe.stopPropagation(),E(!_)},className:"flex items-center gap-1 text-xs font-medium text-gray-500 hover:text-blue-600 transition-colors px-1 py-0.5 rounded hover:bg-gray-200",children:[j.jsx("span",{className:"capitalize",children:((We=(qe=e.data_source_config)==null?void 0:qe.criteria)==null?void 0:We.entity_type)||"All"}),j.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:j.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),_&&j.jsx("div",{className:"absolute left-0 top-full mt-1 bg-white border border-gray-200 rounded shadow-lg z-50 min-w-[100px]",children:["task","event","project","all"].map(oe=>{var _e,G;return j.jsx("button",{onMouseDown:F=>F.stopPropagation(),onClick:async F=>{var X;F.stopPropagation();const ee=oe==="all"?void 0:oe;await e.patch({data_source_config:{...e.data_source_config,criteria:{...(X=e.data_source_config)==null?void 0:X.criteria,entity_type:ee}}}),E(!1)},className:xt("w-full text-left px-3 py-2 text-xs hover:bg-gray-100 transition-colors capitalize",(((G=(_e=e.data_source_config)==null?void 0:_e.criteria)==null?void 0:G.entity_type)||"all")===oe&&"text-blue-600 font-medium bg-blue-50"),children:oe},oe)})})]}),j.jsxs("div",{className:"flex space-x-1",onMouseDown:oe=>oe.stopPropagation(),children:[(e.widget_type==="calendar_master"||e.widget_type==="smart_list")&&j.jsxs("div",{className:"relative",ref:g,children:[j.jsx("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:oe=>{oe.stopPropagation(),h(!d)},className:"p-1 rounded hover:bg-gray-200 transition-colors text-gray-400 hover:text-blue-600",title:"Add Widget to Group",children:j.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[j.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),j.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),d&&j.jsxs("div",{className:"absolute left-0 top-full mt-1 bg-white border border-gray-200 rounded shadow-lg z-50 min-w-[120px]",children:[e.widget_type==="calendar_master"&&j.jsxs(j.Fragment,{children:[j.jsx("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:oe=>{xe(oe,"smart_list"),h(!1)},className:"w-full text-left px-3 py-2 text-xs hover:bg-gray-100 transition-colors",children:"Smart List"}),j.jsx("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:oe=>{xe(oe,"matrix"),h(!1)},className:"w-full text-left px-3 py-2 text-xs hover:bg-gray-100 transition-colors",children:"Matrix"}),j.jsx("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:oe=>{xe(oe,"project_header"),h(!1)},className:"w-full text-left px-3 py-2 text-xs hover:bg-gray-100 transition-colors",children:"Project Header"}),j.jsx("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:oe=>{xe(oe,"timeline"),h(!1)},className:"w-full text-left px-3 py-2 text-xs hover:bg-gray-100 transition-colors",children:"Timeline"})]}),e.widget_type==="smart_list"&&j.jsx("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:oe=>{xe(oe,"detail"),h(!1)},className:"w-full text-left px-3 py-2 text-xs hover:bg-gray-100 transition-colors",children:"Detail"})]})]}),j.jsx("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:pe,className:xt("p-1 rounded hover:bg-gray-200 transition-colors",S?"text-blue-600":"text-gray-400"),title:S?"Unpin Data":"Pin Data",children:j.jsx(BJ,{size:14,fill:S?"currentColor":"none"})}),j.jsx("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:Ce,className:"p-1 rounded hover:bg-gray-200 transition-colors text-gray-400 hover:text-red-600",title:"Close",children:j.jsx(UJ,{size:14})}),e.widget_type!=="smart_list"&&e.widget_type!=="calendar_master"&&j.jsx("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:async oe=>{oe.stopPropagation(),await e.patch({view_state:{...x,is_flipped:!x.is_flipped}})},className:xt("p-1 rounded hover:bg-gray-200 transition-colors",x.is_flipped?"text-blue-600":"text-gray-400 hover:text-blue-600"),title:["detail","project_detail","project_header","smart_list"].includes(e.widget_type)?x.is_flipped?"View Mode":"Edit Mode":"Switch View",children:["detail","project_detail","project_header","smart_list"].includes(e.widget_type)?x.is_flipped?j.jsx(AJ,{size:14}):j.jsx(FJ,{size:14}):j.jsx(zJ,{size:14})})]})]}),j.jsx("div",{className:"flex-1 overflow-hidden relative",onMouseDown:oe=>oe.stopPropagation(),children:j.jsx(rZ,{widget:e})})]})})]})},bc=5e4,aZ=({widgets:e,activeWidgetId:t,setActiveWidgetId:n,onBringToFront:r,scale:i})=>j.jsxs("div",{className:"relative",style:{width:bc,height:bc,backgroundImage:"radial-gradient(circle, #cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"},onMouseDown:()=>n(null),children:[j.jsx(wU,{widgets:e}),e.map(a=>j.jsx(iZ,{widget:a,isActive:t===a.id,onSetActive:()=>n(a.id),onBringToFront:()=>r(a.id),scale:i},a.id))]}),oZ=({canvasId:e="default_canvas"})=>{const[t,n]=ne.useState(!1),[r,i]=ne.useState([]),[a,s]=ne.useState(null),[u]=ne.useState(()=>{try{const U=localStorage.getItem("canvas_transform_state_v2");if(U)return JSON.parse(U)}catch(U){console.error("Failed to load canvas state",U)}const S=typeof window<"u"?window.innerWidth:1920,P=typeof window<"u"?window.innerHeight:1080,M=bc/2,T=bc/2;return{scale:1,positionX:S/2-M,positionY:P/2-T}}),[c,d]=ne.useState(u.scale),h=KO.debounce(S=>{if(!S.state)return;const{scale:P,positionX:M,positionY:T}=S.state;d(P),localStorage.setItem("canvas_transform_state_v2",JSON.stringify({scale:P,positionX:M,positionY:T}))},500),v=S=>{S.state&&d(S.state.scale)};ne.useEffect(()=>{Ys.initialize().then(()=>{n(!0)}).catch(S=>console.error("Failed to initialize database:",S))},[]),ne.useEffect(()=>{if(t)try{const M=Ys.getDatabase().widgets.find({selector:{canvas_id:e,is_deleted:!1}}).$.subscribe({next:T=>i(T)});return()=>M.unsubscribe()}catch(S){console.error("Failed to subscribe to widgets:",S)}},[t,e]);const g=S=>{var re;const P=r.find(he=>he.id===S);if(!P)return;const M=((re=P.geometry)==null?void 0:re.z)||0,T=Math.max(...r.map(he=>{var de;return((de=he.geometry)==null?void 0:de.z)||0})),U=M===T,W=r.filter(he=>{var de;return(((de=he.geometry)==null?void 0:de.z)||0)===T}).length===1;(!U||!W)&&P.patch({geometry:{...P.geometry,z:T+1}})},w=RB(OP(S$,{activationConstraint:{distance:10}}),OP(x$,{activationConstraint:{delay:250,tolerance:5}})),[_,E]=ne.useState(null),C=S=>{S.active.data.current&&E(S.active.data.current)},x=async S=>{E(null);const P=Ys.getDatabase();await yU(S,P)};return t?j.jsxs("div",{className:"w-screen h-screen overflow-hidden bg-gray-50",children:[j.jsxs(kW,{sensors:w,onDragStart:C,onDragEnd:x,children:[j.jsx(mB,{initialScale:u.scale,initialPositionX:u.positionX,initialPositionY:u.positionY,minScale:.1,maxScale:4,limitToBounds:!1,centerOnInit:!1,wheel:{step:.1},panning:{velocityDisabled:!0,excluded:["react-draggable","widget-header","dnd-draggable"]},onTransformed:h,onInit:v,children:j.jsx(yB,{wrapperClass:"w-full h-full",contentClass:"",contentStyle:{width:bc,height:bc},children:j.jsx(aZ,{widgets:r,activeWidgetId:a,setActiveWidgetId:s,onBringToFront:g,scale:c})})}),j.jsx(HW,{children:_?j.jsx("div",{className:"bg-white p-2 rounded shadow-lg border border-blue-200 w-48 opacity-90 cursor-grabbing origin-top-left",style:{transform:`scale(${c})`},children:j.jsx("div",{className:"text-sm font-medium text-gray-700 truncate",children:_.title||"Task"})}):null})]}),j.jsxs("div",{className:"fixed bottom-4 right-4 bg-white/95 backdrop-blur-sm border-2 border-gray-300 shadow-lg px-3 py-2 rounded-lg font-mono text-xs font-bold text-gray-600 uppercase tracking-wider pointer-events-none z-50",children:["Scale: ",c.toFixed(3)]})]}):j.jsx("div",{className:"w-screen h-screen flex items-center justify-center bg-gray-50",children:j.jsx("div",{className:"text-gray-600 text-lg",children:"Initializing database..."})})},sZ=[{type:"project_hub",label:"Project Header",icon:WJ,w:0,h:0},{type:"inbox",label:"Inbox (Smart List)",icon:$C,w:300,h:400},{type:"calendar_master",label:"Master Calendar",icon:RJ,w:600,h:500},{type:"smart_list",label:"Smart List",icon:$C,w:300,h:400},{type:"detail",label:"Detail Inspector",icon:jJ,w:300,h:400},{type:"archive_bin",label:"Archive Bin",icon:OM,w:200,h:200},{type:"matrix",label:"Eisenhower Matrix",icon:LJ,w:500,h:500},{type:"timeline",label:"Timeline",icon:IJ,w:800,h:400}],uZ=()=>{const[e,t]=ne.useState(!1),n=async(r,i,a,s={})=>{try{const u=Ys.getDatabase();let c=100,d=100;try{const h=localStorage.getItem("canvas_transform_state");if(h){const{scale:v,positionX:g,positionY:w}=JSON.parse(h),_=window.innerWidth/2,E=window.innerHeight*.2;c=(_-g)/v-i/2,d=(E-w)/v}}catch(h){console.error("Failed to calculate widget position",h)}if(r==="project_hub"){const h=Zr();await u.items.insert({id:h,title:"New Project",entity_type:"project",system_status:"active",created_at:Date.now(),updated_at:new Date().toISOString(),is_deleted:!1,user_id:"user_1",properties:{content:"Project description goes here."}}),await u.widgets.insert({id:Zr(),canvas_id:"default_canvas",widget_type:"project_header",geometry:{x:c,y:d,w:600,h:150,z:100},data_source_config:{project_id:h,title:"Project Header"},updated_at:new Date().toISOString(),is_deleted:!1}),await u.widgets.insert({id:Zr(),canvas_id:"default_canvas",widget_type:"calendar_master",geometry:{x:c,y:d+160,w:600,h:400,z:100},data_source_config:{project_id:h,title:"Project Calendar"},updated_at:new Date().toISOString(),is_deleted:!1}),await u.widgets.insert({id:Zr(),canvas_id:"default_canvas",widget_type:"smart_list",geometry:{x:c+610,y:d+160,w:300,h:400,z:100},data_source_config:{criteria:{"properties.project_id":h},title:"Project Actions"},updated_at:new Date().toISOString(),is_deleted:!1})}else await u.widgets.insert({id:Zr(),canvas_id:"default_canvas",widget_type:r,geometry:{x:c,y:d,w:i,h:a,z:100},data_source_config:s,updated_at:new Date().toISOString(),is_deleted:!1});t(!1)}catch(u){console.error("Failed to add widget:",u),alert("Failed to add widget")}};return j.jsxs("div",{className:"absolute top-4 left-4 z-50 font-sans",children:[j.jsxs("button",{onClick:()=>t(!e),className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 rounded-lg shadow-lg hover:bg-gray-50 border border-gray-200 font-medium transition-colors",children:[j.jsx(DM,{size:18}),j.jsx("span",{children:"Add Widget"})]}),e&&j.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[j.jsx("div",{className:"p-2 bg-gray-50 border-b border-gray-100 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Component Library"}),j.jsx("div",{className:"p-1 max-h-[80vh] overflow-y-auto",children:sZ.map(r=>j.jsxs("button",{onClick:()=>{r.type==="inbox"?n("smart_list",r.w,r.h,{criteria:{do_date:null,system_status:"active"},title:"Inbox"}):n(r.type,r.w,r.h)},className:"w-full flex items-center gap-3 p-2 hover:bg-blue-50 rounded text-left transition-colors group",children:[j.jsx("div",{className:"p-2 bg-gray-100 rounded group-hover:bg-blue-100 text-gray-600 group-hover:text-blue-600 transition-colors",children:j.jsx(r.icon,{size:18})}),j.jsxs("div",{children:[j.jsx("div",{className:"text-sm font-medium text-gray-700 group-hover:text-blue-700",children:r.label}),j.jsxs("div",{className:"text-xs text-gray-400",children:[r.w,"x",r.h,"px"]})]})]},r.type))})]})]})},lZ=()=>j.jsxs("div",{className:"relative w-screen h-screen",children:[j.jsx(oZ,{}),j.jsx(uZ,{})]});function cZ(){return j.jsx("div",{className:"app",children:j.jsx(lZ,{})})}uw.createRoot(document.getElementById("root")).render(j.jsx(Dt.StrictMode,{children:j.jsx(cZ,{})}));
