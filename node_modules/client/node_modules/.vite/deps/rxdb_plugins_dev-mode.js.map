{
  "version": 3,
  "sources": ["../../../../../node_modules/rxdb/src/plugins/dev-mode/error-messages.ts", "../../../../../node_modules/rxdb/src/plugins/dev-mode/entity-properties.ts", "../../../../../node_modules/rxdb/src/plugins/dev-mode/check-schema.ts", "../../../../../node_modules/rxdb/src/plugins/dev-mode/check-orm.ts", "../../../../../node_modules/rxdb/src/plugins/dev-mode/check-migration-strategies.ts", "../../../../../node_modules/rxdb/src/plugins/dev-mode/unallowed-properties.ts", "../../../../../node_modules/rxdb/src/plugins/dev-mode/check-query.ts", "../../../../../node_modules/rxdb/src/plugins/dev-mode/check-document.ts", "../../../../../node_modules/rxdb/src/plugins/dev-mode/dev-mode-tracking.ts", "../../../../../node_modules/rxdb/src/plugins/dev-mode/index.ts"],
  "sourcesContent": ["/**\n * this plugin adds the error-messages\n * without it, only error-codes will be shown\n * This is mainly because error-string are hard to compress and we need a smaller build\n */\n\nimport { NON_PREMIUM_COLLECTION_LIMIT } from '../utils/utils-premium.ts';\n\n\nexport const ERROR_MESSAGES = {\n    // util.js / config\n    UT1: 'given name is no string or empty',\n    UT2: `collection- and database-names must match the regex to be compatible with couchdb databases.\n    See https://neighbourhood.ie/blog/2020/10/13/everything-you-need-to-know-about-couchdb-database-names/\n    info: if your database-name specifies a folder, the name must contain the slash-char '/' or '\\\\'`,\n    UT3: 'replication-direction must either be push or pull or both. But not none',\n    UT4: 'given leveldown is no valid adapter',\n    UT5: 'keyCompression is set to true in the schema but no key-compression handler is used in the storage',\n    UT6: 'schema contains encrypted fields but no encryption handler is used in the storage',\n    UT7: 'attachments.compression is enabled but no attachment-compression plugin is used',\n    UT8: 'crypto.subtle.digest is not available in your runtime. For expo/react-native see https://discord.com/channels/969553741705539624/1341392686267109458/1343639513850843217 ',\n\n    // plugins\n    PL1: 'Given plugin is not RxDB plugin.',\n    // removed in 14.0.0 - PouchDB RxStorage was removed - PL2: 'You tried importing a RxDB plugin to pouchdb. Use addRxPlugin() instead.',\n    PL3: 'A plugin with the same name was already added but it was not the exact same JavaScript object',\n\n    // pouch-db.js\n    // removed in 12.0.0 - P1: 'PouchDB.getBatch: limit must be > 2',\n    P2: 'bulkWrite() cannot be called with an empty array',\n    // removed in 12.0.0 - P3: 'bulkAddRevisions cannot be called with an empty array',\n\n    // rx-query\n    QU1: 'RxQuery._execOverDatabase(): op not known',\n    // removed in 9.0.0 - QU2: 'limit() must get a number',\n    // removed in 9.0.0 - QU3: 'skip() must get a number',\n    QU4: 'RxQuery.regex(): You cannot use .regex() on the primary field',\n    QU5: 'RxQuery.sort(): does not work because key is not defined in the schema',\n    QU6: 'RxQuery.limit(): cannot be called on .findOne()',\n    // removed in 12.0.0 (should by ensured by the typings) - QU7: 'query must be an object',\n    // removed in 12.0.0 (should by ensured by the typings) - QU8: 'query cannot be an array',\n    QU9: 'throwIfMissing can only be used in findOne queries',\n    QU10: 'result empty and throwIfMissing: true',\n    QU11: 'RxQuery: no valid query params given',\n    QU12: 'Given index is not in schema',\n    QU13: 'A top level field of the query is not included in the schema',\n    QU14: 'Running a count() query in slow mode is now allowed. Either run a count() query with a selector that fully matches an index ' +\n        'or set allowSlowCount=true when calling the createRxDatabase',\n    QU15: 'For count queries it is not allowed to use skip or limit',\n    QU16: '$regex queries must be defined by a string, not an RegExp instance. ' +\n        'This is because RegExp objects cannot be JSON stringified and also they are mutable which would be dangerous',\n    QU17: 'Chained queries cannot be used on findByIds() RxQuery instances',\n    QU18: 'Malformed query result data. This likely happens because you create a OPFS-storage RxDatabase inside of a worker but did not set the usesRxDatabaseInWorker setting. https://rxdb.info/rx-storage-opfs.html#setting-usesrxdatabaseinworker-when-a-rxdatabase-is-also-used-inside-of-the-worker ',\n    QU19: 'Queries must not contain fields or properties with the value `undefined`: https://github.com/pubkey/rxdb/issues/6792#issuecomment-2624555824 ',\n\n    // mquery.js\n    MQ1: 'path must be a string or object',\n    MQ2: 'Invalid argument',\n    MQ3: 'Invalid sort() argument. Must be a string, object, or array',\n    MQ4: 'Invalid argument. Expected instanceof mquery or plain object',\n    MQ5: 'method must be used after where() when called with these arguments',\n    MQ6: 'Can\\'t mix sort syntaxes. Use either array or object | .sort([[\\'field\\', 1], [\\'test\\', -1]]) | .sort({ field: 1, test: -1 })',\n    MQ7: 'Invalid sort value',\n    MQ8: 'Can\\'t mix sort syntaxes. Use either array or object',\n\n    // rx-database\n    DB1: 'RxDocument.prepare(): another instance on this adapter has a different password',\n    DB2: 'RxDatabase.addCollections(): collection-names cannot start with underscore _',\n    DB3: 'RxDatabase.addCollections(): collection already exists. use myDatabase[collectionName] to get it',\n    DB4: 'RxDatabase.addCollections(): schema is missing',\n    DB5: 'RxDatabase.addCollections(): collection-name not allowed',\n    DB6: 'RxDatabase.addCollections(): another instance created this collection with a different schema. Read this https://rxdb.info/questions-answers.html?console=qa#cant-change-the-schema ',\n    // removed in 13.0.0 (now part of the encryption plugin) DB7: 'RxDatabase.addCollections(): schema encrypted but no password given',\n    DB8: 'createRxDatabase(): A RxDatabase with the same name and adapter already exists.\\n' +\n        'Make sure to use this combination of storage+databaseName only once\\n' +\n        'If you have the duplicate database on purpose to simulate multi-tab behavior in unit tests, set \"ignoreDuplicate: true\".\\n' +\n        'As alternative you can set \"closeDuplicates: true\" like if this happens in your react projects with hot reload that reloads the code without reloading the process.',\n    DB9: 'ignoreDuplicate is only allowed in dev-mode and must never be used in production',\n    // removed in 14.0.0 - PouchDB RxStorage is removed - DB9: 'createRxDatabase(): Adapter not added. Use addPouchPlugin(require(\\'pouchdb-adapter-[adaptername]\\'));',\n    // removed in 14.0.0 - PouchDB RxStorage is removed DB10: 'createRxDatabase(): To use leveldown-adapters, you have to add the leveldb-plugin. Use addPouchPlugin(require(\\'pouchdb-adapter-leveldb\\'));',\n    DB11: 'createRxDatabase(): Invalid db-name, folder-paths must not have an ending slash',\n    DB12: 'RxDatabase.addCollections(): could not write to internal store',\n    DB13: 'createRxDatabase(): Invalid db-name or collection name, name contains the dollar sign',\n    DB14: 'no custom reactivity factory added on database creation',\n\n    // rx-collection\n    COL1: 'RxDocument.insert() You cannot insert an existing document',\n    COL2: 'RxCollection.insert() fieldName ._id can only be used as primaryKey',\n    COL3: 'RxCollection.upsert() does not work without primary',\n    COL4: 'RxCollection.incrementalUpsert() does not work without primary',\n    COL5: 'RxCollection.find() if you want to search by _id, use .findOne(_id)',\n    COL6: 'RxCollection.findOne() needs a queryObject or string. Notice that in RxDB, primary keys must be strings and cannot be numbers.',\n    COL7: 'hook must be a function',\n    COL8: 'hooks-when not known',\n    COL9: 'RxCollection.addHook() hook-name not known',\n    COL10: 'RxCollection .postCreate-hooks cannot be async',\n    COL11: 'migrationStrategies must be an object',\n    COL12: 'A migrationStrategy is missing or too much',\n    COL13: 'migrationStrategy must be a function',\n    COL14: 'given static method-name is not a string',\n    COL15: 'static method-names cannot start with underscore _',\n    COL16: 'given static method is not a function',\n    COL17: 'RxCollection.ORM: statics-name not allowed',\n    COL18: 'collection-method not allowed because fieldname is in the schema',\n    // removed in 14.0.0, use CONFLICT instead - COL19: 'Document update conflict. When changing a document you must work on the previous revision',\n    COL20: 'Storage write error',\n    COL21: 'The RxCollection is closed or removed already, either from this JavaScript realm or from another, like a browser tab',\n    CONFLICT: 'Document update conflict. When changing a document you must work on the previous revision',\n    COL22: '.bulkInsert() and .bulkUpsert() cannot be run with multiple documents that have the same primary key',\n    COL23: 'In the open-source version of RxDB, the amount of collections that can exist in parallel is limited to ' + NON_PREMIUM_COLLECTION_LIMIT + '. If you already purchased the premium access, you can remove this limit: https://rxdb.info/rx-collection.html#faq',\n\n    // rx-document.js\n    DOC1: 'RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed',\n    DOC2: 'cannot observe primary path',\n    DOC3: 'final fields cannot be observed',\n    DOC4: 'RxDocument.get$ cannot observe a non-existed field',\n    DOC5: 'RxDocument.populate() cannot populate a non-existed field',\n    DOC6: 'RxDocument.populate() cannot populate because path has no ref',\n    DOC7: 'RxDocument.populate() ref-collection not in database',\n    DOC8: 'RxDocument.set(): primary-key cannot be modified',\n    DOC9: 'final fields cannot be modified',\n    DOC10: 'RxDocument.set(): cannot set childpath when rootPath not selected',\n    DOC11: 'RxDocument.save(): can\\'t save deleted document',\n    // removed in 10.0.0 DOC12: 'RxDocument.save(): error',\n    DOC13: 'RxDocument.remove(): Document is already deleted',\n    DOC14: 'RxDocument.close() does not exist',\n    DOC15: 'query cannot be an array',\n    DOC16: 'Since version 8.0.0 RxDocument.set() can only be called on temporary RxDocuments',\n    DOC17: 'Since version 8.0.0 RxDocument.save() can only be called on non-temporary documents',\n    DOC18: 'Document property for composed primary key is missing',\n    DOC19: 'Value of primary key(s) cannot be changed',\n    DOC20: 'PrimaryKey missing',\n    DOC21: 'PrimaryKey must be equal to PrimaryKey.trim(). It cannot start or end with a whitespace',\n    DOC22: 'PrimaryKey must not contain a linebreak',\n    DOC23: 'PrimaryKey must not contain a double-quote [\"]',\n    DOC24: 'Given document data could not be structured cloned. This happens if you pass non-plain-json data into it, like a Date() object or a Function. ' +\n        'In vue.js this happens if you use ref() on the document data which transforms it into a Proxy object.',\n\n    // data-migrator.js\n    DM1: 'migrate() Migration has already run',\n    DM2: 'migration of document failed final document does not match final schema',\n    DM3: 'migration already running',\n    DM4: 'Migration errored',\n    DM5: 'Cannot open database state with newer RxDB version. You have to migrate your database state first. See https://rxdb.info/migration-storage.html?console=storage ',\n\n    // plugins/attachments.js\n    AT1: 'to use attachments, please define this in your schema',\n\n    // plugins/encryption-crypto-js.js\n    EN1: 'password is not valid',\n    EN2: 'validatePassword: min-length of password not complied',\n    EN3: 'Schema contains encrypted properties but no password is given',\n    EN4: 'Password not valid',\n\n    // plugins/json-dump.js\n    JD1: 'You must create the collections before you can import their data',\n    JD2: 'RxCollection.importJSON(): the imported json relies on a different schema',\n    JD3: 'RxCollection.importJSON(): json.passwordHash does not match the own',\n\n    // plugins/leader-election.js\n\n    // plugins/local-documents.js\n    LD1: 'RxDocument.allAttachments$ can\\'t use attachments on local documents',\n    LD2: 'RxDocument.get(): objPath must be a string',\n    LD3: 'RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed',\n    LD4: 'cannot observe primary path',\n    LD5: 'RxDocument.set() id cannot be modified',\n    LD6: 'LocalDocument: Function is not usable on local documents',\n    LD7: 'Local document already exists',\n    LD8: 'localDocuments not activated. Set localDocuments=true on creation, when you want to store local documents on the RxDatabase or RxCollection.',\n\n    // plugins/replication.js\n    RC1: 'Replication: already added',\n    RC2: 'replicateCouchDB() query must be from the same RxCollection',\n    // removed in 14.0.0 - PouchDB RxStorage is removed RC3: 'RxCollection.syncCouchDB() Do not use a collection\\'s pouchdb as remote, use the collection instead',\n    RC4: 'RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication when live: true',\n    RC5: 'RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication if multiInstance because the replication might run on another instance',\n    RC6: 'syncFirestore() serverTimestampField MUST NOT be part of the collections schema and MUST NOT be nested.',\n    RC7: 'SimplePeer requires to have process.nextTick() polyfilled, see https://rxdb.info/replication-webrtc.html?console=webrtc ',\n    RC_PULL: 'RxReplication pull handler threw an error - see .errors for more details',\n    RC_STREAM: 'RxReplication pull stream$ threw an error - see .errors for more details',\n    RC_PUSH: 'RxReplication push handler threw an error - see .errors for more details',\n    RC_PUSH_NO_AR: 'RxReplication push handler did not return an array with the conflicts',\n    RC_WEBRTC_PEER: 'RxReplication WebRTC Peer has error',\n    RC_COUCHDB_1: 'replicateCouchDB() url must end with a slash like \\'https://example.com/mydatabase/\\'',\n    RC_COUCHDB_2: 'replicateCouchDB() did not get valid result with rows.',\n    RC_OUTDATED: 'Outdated client, update required. Replication was canceled',\n    RC_UNAUTHORIZED: 'Unauthorized client, update the replicationState.headers to set correct auth data',\n    RC_FORBIDDEN: 'Client behaves wrong so the replication was canceled. Mostly happens if the client tries to write data that it is not allowed to',\n\n    // plugins/dev-mode/check-schema.js\n    SC1: 'fieldnames do not match the regex',\n    SC2: 'SchemaCheck: name \\'item\\' reserved for array-fields',\n    SC3: 'SchemaCheck: fieldname has a ref-array but items-type is not string',\n    SC4: 'SchemaCheck: fieldname has a ref but is not type string, [string,null] or array<string>',\n    SC6: 'SchemaCheck: primary can only be defined at top-level',\n    SC7: 'SchemaCheck: default-values can only be defined at top-level',\n    SC8: 'SchemaCheck: first level-fields cannot start with underscore _',\n    SC10: 'SchemaCheck: schema defines ._rev, this will be done automatically',\n    SC11: 'SchemaCheck: schema needs a number >=0 as version',\n    // removed in 10.0.0 - SC12: 'SchemaCheck: primary can only be defined once',\n    SC13: 'SchemaCheck: primary is always index, do not declare it as index',\n    SC14: 'SchemaCheck: primary is always unique, do not declare it as index',\n    SC15: 'SchemaCheck: primary cannot be encrypted',\n    SC16: 'SchemaCheck: primary must have type: string',\n    SC17: 'SchemaCheck: top-level fieldname is not allowed. See https://rxdb.info/rx-schema.html#non-allowed-properties ',\n    SC18: 'SchemaCheck: indexes must be an array',\n    SC19: 'SchemaCheck: indexes must contain strings or arrays of strings',\n    SC20: 'SchemaCheck: indexes.array must contain strings',\n    SC21: 'SchemaCheck: given index is not defined in schema',\n    SC22: 'SchemaCheck: given indexKey is not type:string',\n    SC23: 'SchemaCheck: fieldname is not allowed',\n    SC24: 'SchemaCheck: required fields must be set via array. See https://spacetelescope.github.io/understanding-json-schema/reference/object.html#required',\n    SC25: 'SchemaCheck: compoundIndexes needs to be specified in the indexes field',\n    SC26: 'SchemaCheck: indexes needs to be specified at collection schema level',\n    // removed in 16.0.0 - SC27: 'SchemaCheck: encrypted fields need to be specified at collection schema level',\n    SC28: 'SchemaCheck: encrypted fields is not defined in the schema',\n    SC29: 'SchemaCheck: missing object key \\'properties\\'',\n    SC30: 'SchemaCheck: primaryKey is required',\n    SC32: 'SchemaCheck: primary field must have the type string/number/integer',\n    SC33: 'SchemaCheck: used primary key is not a property in the schema',\n    SC34: 'Fields of type string that are used in an index, must have set the maxLength attribute in the schema',\n    SC35: 'Fields of type number/integer that are used in an index, must have set the multipleOf attribute in the schema',\n    SC36: 'A field of this type cannot be used as index',\n    SC37: 'Fields of type number that are used in an index, must have set the minimum and maximum attribute in the schema',\n    SC38: 'Fields of type boolean that are used in an index, must be required in the schema',\n    SC39: 'The primary key must have the maxLength attribute set. Ensure you use the dev-mode plugin when developing with RxDB.',\n    SC40: '$ref fields in the schema are not allowed. RxDB cannot resolve related schemas because it would have a negative performance impact.' +\n        'It would have to run http requests on runtime. $ref fields should be resolved during build time.',\n    SC41: 'minimum, maximum and maxLength values for indexes must be real numbers, not Infinity or -Infinity',\n\n    // plugins/dev-mode\n    // removed in 13.9.0, use PL3 instead - DEV1: 'dev-mode added multiple times',\n    DVM1: 'When dev-mode is enabled, your storage must use one of the schema validators at the top level. This is because most problems people have with RxDB is because they store data that is not valid to the schema which causes strange bugs and problems.',\n\n    // plugins/validate.js\n    VD1: 'Sub-schema not found, does the schemaPath exists in your schema?',\n    VD2: 'object does not match schema',\n\n    // plugins/in-memory.js\n    // removed in 14.0.0 - PouchDB RxStorage is removed IM1: 'InMemory: Memory-Adapter must be added. Use addPouchPlugin(require(\\'pouchdb-adapter-memory\\'));',\n    // removed in 14.0.0 - PouchDB RxStorage is removed IM2: 'inMemoryCollection.sync(): Do not replicate with the in-memory instance. Replicate with the parent instead',\n\n    // plugins/server.js\n    S1: 'You cannot create collections after calling RxDatabase.server()',\n\n    // plugins/replication-graphql.js\n    GQL1: 'GraphQL replication: cannot find sub schema by key',\n    // removed in 13.0.0, use RC_PULL instead - GQL2: 'GraphQL replication: unknown errors occurred in replication pull - see innerErrors for more details',\n    GQL3: 'GraphQL replication: pull returns more documents then batchSize',\n    // removed in 13.0.0, use RC_PUSH instead - GQL4: 'GraphQL replication: unknown errors occurred in replication push - see innerErrors for more details',\n\n    // plugins/crdt/\n    CRDT1: 'CRDT operations cannot be used because the crdt options are not set in the schema.',\n    CRDT2: 'RxDocument.incrementalModify() cannot be used when CRDTs are activated.',\n    CRDT3: 'To use CRDTs you MUST NOT set a conflictHandler because the default CRDT conflict handler must be used',\n\n    // plugins/storage-dexie/\n    DXE1: 'non-required index fields are not possible with the dexie.js RxStorage: https://github.com/pubkey/rxdb/pull/6643#issuecomment-2505310082',\n    // removed in 15.0.0, added boolean index support to dexie storage - DXE1: 'The dexie.js RxStorage does not support boolean indexes, see https://rxdb.info/rx-storage-dexie.html#boolean-index',\n\n    // plugins/storage-localstorage\n    LS1: 'The localstorage RxStorage does not use attachments. In browsers use the IndexedDB, OPFS or Dexie RxStorage if you need attachments support.',\n\n    // plugins/storage-sqlite-trial/\n    SQL1: 'The trial version of the SQLite storage does not support attachments.',\n    SQL2: 'The trial version of the SQLite storage is limited to contain 300 documents',\n    SQL3: 'The trial version of the SQLite storage is limited to running 110 operations',\n\n\n    // plugins/storage-remote\n    RM1: 'Cannot communicate with a remote that was build on a different RxDB version. Did you forget to rebuild your workers when updating RxDB?',\n\n    // plugins/replication-mongodb\n    MG1: 'If _id is used as primaryKey, all documents in the MongoDB instance must have a string-value as _id, not an ObjectId or number',\n\n    /**\n     * Should never be thrown, use this for\n     * null checks etc. so you do not have to increase the\n     * build size with error message strings.\n     */\n    SNH: 'This should never happen'\n};\n", "import { RxCollectionBase } from '../../rx-collection.ts';\nimport { RxDatabaseBase } from '../../rx-database.ts';\nimport { createRxDocumentConstructor, basePrototype } from '../../rx-document.ts';\n\n/**\n * returns all possible properties of a RxCollection-instance\n */\nlet _rxCollectionProperties: string[];\nexport function rxCollectionProperties(): string[] {\n    if (!_rxCollectionProperties) {\n        const pseudoInstance = new (RxCollectionBase as any)();\n        const ownProperties = Object.getOwnPropertyNames(pseudoInstance);\n        const prototypeProperties = Object.getOwnPropertyNames(\n            Object.getPrototypeOf(pseudoInstance)\n        );\n        _rxCollectionProperties = [...ownProperties, ...prototypeProperties];\n    }\n    return _rxCollectionProperties;\n}\n\n\n/**\n * returns all possible properties of a RxDatabase-instance\n */\nlet _rxDatabaseProperties: string[];\nexport function rxDatabaseProperties(): string[] {\n    if (!_rxDatabaseProperties) {\n        const pseudoInstance: RxDatabaseBase<any, any> = new (RxDatabaseBase as any)(\n            'pseudoInstance',\n            'memory'\n        );\n        const ownProperties = Object.getOwnPropertyNames(pseudoInstance);\n        const prototypeProperties = Object.getOwnPropertyNames(\n            Object.getPrototypeOf(pseudoInstance)\n        );\n        _rxDatabaseProperties = [...ownProperties, ...prototypeProperties];\n        pseudoInstance.close();\n    }\n    return _rxDatabaseProperties;\n}\n\n/**\n * returns all possible properties of a RxDocument\n */\nconst pseudoConstructor = createRxDocumentConstructor(basePrototype);\nconst pseudoRxDocument = new (pseudoConstructor as any)();\nlet _rxDocumentProperties: string[];\nexport function rxDocumentProperties(): string[] {\n    if (!_rxDocumentProperties) {\n        const reserved = ['deleted', 'synced'];\n        const ownProperties = Object.getOwnPropertyNames(pseudoRxDocument);\n        const prototypeProperties = Object.getOwnPropertyNames(basePrototype);\n        _rxDocumentProperties = [...ownProperties, ...prototypeProperties, ...reserved];\n    }\n    return _rxDocumentProperties;\n}\n", "/**\n * does additional checks over the schema-json\n * to ensure nothing is broken or not supported\n */\nimport {\n    newRxError\n} from '../../rx-error.ts';\nimport { getPrimaryFieldOfPrimaryKey, getSchemaByObjectPath } from '../../rx-schema-helper.ts';\nimport type {\n    CompositePrimaryKey,\n    JsonSchema,\n    JsonSchemaTypes,\n    RxJsonSchema,\n    TopLevelProperty\n} from '../../types/index.d.ts';\nimport {\n    appendToArray,\n    flattenObject, getProperty, isMaybeReadonlyArray,\n    trimDots\n} from '../../plugins/utils/index.ts';\nimport { rxDocumentProperties } from './entity-properties.ts';\n\n/**\n * checks if the fieldname is allowed\n * this makes sure that the fieldnames can be transformed into javascript-vars\n * and does not conquer the observe$ and populate_ fields\n * @throws {Error}\n */\nexport function checkFieldNameRegex(fieldName: string) {\n    if (fieldName === '_deleted') {\n        return;\n    }\n\n    if (['properties'].includes(fieldName)) {\n        throw newRxError('SC23', {\n            fieldName\n        });\n    }\n\n    const regexStr = '^[a-zA-Z](?:[[a-zA-Z0-9_]*]?[a-zA-Z0-9])?$';\n    const regex = new RegExp(regexStr);\n    if (\n        /**\n         * It must be allowed to set _id as primaryKey.\n         * This makes it sometimes easier to work with RxDB+CouchDB\n         * @link https://github.com/pubkey/rxdb/issues/681\n         */\n        fieldName !== '_id' &&\n        !fieldName.match(regex)\n    ) {\n        throw newRxError('SC1', {\n            regex: regexStr,\n            fieldName\n        });\n    }\n}\n\n/**\n * validate that all schema-related things are ok\n */\nexport function validateFieldsDeep(rxJsonSchema: RxJsonSchema<any>): true {\n\n    const primaryPath = getPrimaryFieldOfPrimaryKey(rxJsonSchema.primaryKey);\n\n    function checkField(\n        fieldName: string,\n        schemaObj: JsonSchema<any>,\n        path: string\n    ) {\n        if (\n            typeof fieldName === 'string' &&\n            typeof schemaObj === 'object' &&\n            !Array.isArray(schemaObj) &&\n            path.split('.').pop() !== 'patternProperties'\n        ) checkFieldNameRegex(fieldName);\n\n        // 'item' only allowed it type=='array'\n        if (Object.prototype.hasOwnProperty.call(schemaObj, 'item') && schemaObj.type !== 'array') {\n            throw newRxError('SC2', {\n                fieldName\n            });\n        }\n\n        /**\n         * required fields cannot be set via 'required: true',\n         * but must be set via required: []\n         */\n        if (\n            Object.prototype.hasOwnProperty.call(schemaObj, 'required') &&\n            typeof schemaObj.required === 'boolean'\n        ) {\n            throw newRxError('SC24', {\n                fieldName\n            });\n        }\n\n        // $ref is not allowed\n        if (Object.prototype.hasOwnProperty.call(schemaObj, '$ref')) {\n            throw newRxError('SC40', {\n                fieldName\n            });\n        }\n\n\n        // if ref given, must be type=='string', type=='array' with string-items or type==['string','null']\n        if (Object.prototype.hasOwnProperty.call(schemaObj, 'ref')) {\n            if (Array.isArray(schemaObj.type)) {\n                if (schemaObj.type.length > 2 || !schemaObj.type.includes('string') || !schemaObj.type.includes('null')) {\n                    throw newRxError('SC4', {\n                        fieldName\n                    });\n                }\n            } else {\n                switch (schemaObj.type) {\n                    case 'string':\n                        break;\n                    case 'array':\n                        if (\n                            !schemaObj.items ||\n                            !(schemaObj.items as any).type ||\n                            (schemaObj.items as any).type !== 'string'\n                        ) {\n                            throw newRxError('SC3', {\n                                fieldName\n                            });\n                        }\n                        break;\n                    default:\n                        throw newRxError('SC4', {\n                            fieldName\n                        });\n                }\n            }\n        }\n\n        const isNested = path.split('.').length >= 2;\n\n        // nested only\n        if (isNested) {\n            if ((schemaObj as any).default) {\n                throw newRxError('SC7', {\n                    path\n                });\n            }\n        }\n\n        // first level\n        if (!isNested) {\n\n            // if _id is used, it must be primaryKey\n            if (\n                fieldName === '_id' &&\n                primaryPath !== '_id'\n            ) {\n                throw newRxError('COL2', {\n                    fieldName\n                });\n            }\n\n            // check underscore fields\n            if (fieldName.charAt(0) === '_') {\n                if (\n                    // exceptional allow underscore on these fields.\n                    fieldName === '_id' ||\n                    fieldName === '_deleted'\n                ) {\n                    return;\n                }\n                throw newRxError('SC8', {\n                    fieldName\n                });\n            }\n        }\n    }\n\n    function traverse(currentObj: any, currentPath: any) {\n        if (!currentObj || typeof currentObj !== 'object') {\n            return;\n        }\n        Object.keys(currentObj).forEach(attributeName => {\n            const schemaObj = currentObj[attributeName];\n            if (\n                !currentObj.properties &&\n                schemaObj &&\n                typeof schemaObj === 'object' &&\n                !Array.isArray(currentObj)\n            ) {\n                checkField(\n                    attributeName,\n                    schemaObj,\n                    currentPath\n                );\n            }\n            let nextPath = currentPath;\n            if (attributeName !== 'properties') nextPath = nextPath + '.' + attributeName;\n            traverse(schemaObj, nextPath);\n        });\n    }\n    traverse(rxJsonSchema, '');\n    return true;\n}\n\nexport function checkPrimaryKey(\n    jsonSchema: RxJsonSchema<any>\n) {\n    if (!jsonSchema.primaryKey) {\n        throw newRxError('SC30', { schema: jsonSchema });\n    }\n\n\n\n    function validatePrimarySchemaPart(\n        schemaPart: JsonSchema | TopLevelProperty\n    ) {\n        if (!schemaPart) {\n            throw newRxError('SC33', { schema: jsonSchema });\n        }\n\n        const type: string = schemaPart.type as any;\n        if (\n            !type ||\n            !['string', 'number', 'integer'].includes(type)\n        ) {\n            throw newRxError('SC32', { schema: jsonSchema, args: { schemaPart } });\n        }\n    }\n\n    if (typeof jsonSchema.primaryKey === 'string') {\n        const key = jsonSchema.primaryKey;\n        const schemaPart = jsonSchema.properties[key];\n        validatePrimarySchemaPart(schemaPart);\n    } else {\n        const compositePrimaryKey: CompositePrimaryKey<any> = jsonSchema.primaryKey as any;\n\n        const keySchemaPart = getSchemaByObjectPath(jsonSchema, compositePrimaryKey.key);\n        validatePrimarySchemaPart(keySchemaPart);\n\n        compositePrimaryKey.fields.forEach(field => {\n            const schemaPart = getSchemaByObjectPath(jsonSchema, field);\n            validatePrimarySchemaPart(schemaPart);\n        });\n    }\n\n\n    /**\n     * The primary key must have a maxLength set\n     * which is required by some RxStorage implementations\n     * to ensure we can craft custom index strings.\n     */\n    const primaryPath = getPrimaryFieldOfPrimaryKey(jsonSchema.primaryKey);\n    const primaryPathSchemaPart = jsonSchema.properties[primaryPath];\n    if (!primaryPathSchemaPart.maxLength) {\n        throw newRxError('SC39', { schema: jsonSchema, args: { primaryPathSchemaPart } });\n    } else if (!isFinite(primaryPathSchemaPart.maxLength)) {\n        throw newRxError('SC41', { schema: jsonSchema, args: { primaryPathSchemaPart } });\n    }\n}\n\n/**\n * computes real path of the object path in the collection schema\n */\nfunction getSchemaPropertyRealPath(shortPath: string) {\n    const pathParts = shortPath.split('.');\n    let realPath = '';\n    for (let i = 0; i < pathParts.length; i += 1) {\n        if (pathParts[i] !== '[]') {\n            realPath = realPath.concat('.properties.'.concat(pathParts[i]));\n        } else {\n            realPath = realPath.concat('.items');\n        }\n    }\n    return trimDots(realPath);\n}\n\n/**\n * does the checking\n * @throws {Error} if something is not ok\n */\nexport function checkSchema(jsonSchema: RxJsonSchema<any>) {\n\n    if (!jsonSchema.primaryKey) {\n        throw newRxError('SC30', {\n            schema: jsonSchema\n        });\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(jsonSchema, 'properties')) {\n        throw newRxError('SC29', {\n            schema: jsonSchema\n        });\n    }\n\n    // _rev MUST NOT exist, it is added by RxDB\n    if (jsonSchema.properties._rev) {\n        throw newRxError('SC10', {\n            schema: jsonSchema\n        });\n    }\n\n    // check version\n    if (!Object.prototype.hasOwnProperty.call(jsonSchema, 'version') ||\n        typeof jsonSchema.version !== 'number' ||\n        jsonSchema.version < 0\n    ) {\n        throw newRxError('SC11', {\n            version: jsonSchema.version\n        });\n    }\n\n    validateFieldsDeep(jsonSchema);\n    checkPrimaryKey(jsonSchema);\n\n    Object.keys(jsonSchema.properties).forEach(key => {\n        const value: any = jsonSchema.properties[key];\n        // check primary\n        if (key === jsonSchema.primaryKey) {\n            if (jsonSchema.indexes && jsonSchema.indexes.includes(key)) {\n                throw newRxError('SC13', {\n                    value,\n                    schema: jsonSchema\n                });\n            }\n            if (value.unique) {\n                throw newRxError('SC14', {\n                    value,\n                    schema: jsonSchema\n                });\n            }\n            if (jsonSchema.encrypted && jsonSchema.encrypted.includes(key)) {\n                throw newRxError('SC15', {\n                    value,\n                    schema: jsonSchema\n                });\n            }\n            if (value.type !== 'string') {\n                throw newRxError('SC16', {\n                    value,\n                    schema: jsonSchema\n                });\n            }\n        }\n\n        // check if RxDocument-property\n        if (rxDocumentProperties().includes(key)) {\n            throw newRxError('SC17', {\n                key,\n                schema: jsonSchema\n            });\n        }\n    });\n\n    // check format of jsonSchema.indexes\n    if (jsonSchema.indexes) {\n        // should be an array\n        if (!isMaybeReadonlyArray(jsonSchema.indexes)) {\n            throw newRxError('SC18', {\n                indexes: jsonSchema.indexes,\n                schema: jsonSchema\n            });\n        }\n\n        jsonSchema.indexes.forEach(index => {\n            // should contain strings or array of strings\n            if (!(typeof index === 'string' || Array.isArray(index))) {\n                throw newRxError('SC19', { index, schema: jsonSchema });\n            }\n            // if is a compound index it must contain strings\n            if (Array.isArray(index)) {\n                for (let i = 0; i < index.length; i += 1) {\n                    if (typeof index[i] !== 'string') {\n                        throw newRxError('SC20', { index, schema: jsonSchema });\n                    }\n                }\n            }\n\n            /**\n             * To be able to craft custom indexable string with compound fields,\n             * we need to know the maximum fieldlength of the fields values\n             * when they are transformed to strings.\n             * Therefore we need to enforce some properties inside of the schema.\n             */\n            const indexAsArray = isMaybeReadonlyArray(index) ? index : [index];\n            indexAsArray.forEach(fieldName => {\n                const schemaPart = getSchemaByObjectPath(\n                    jsonSchema,\n                    fieldName\n                );\n\n\n                const type: JsonSchemaTypes = schemaPart.type as any;\n                switch (type) {\n                    case 'string':\n                        const maxLength = schemaPart.maxLength;\n                        if (!maxLength) {\n                            throw newRxError('SC34', {\n                                index,\n                                field: fieldName,\n                                schema: jsonSchema\n                            });\n                        }\n                        break;\n                    case 'number':\n                    case 'integer':\n                        const multipleOf = schemaPart.multipleOf;\n                        if (!multipleOf) {\n                            throw newRxError('SC35', {\n                                index,\n                                field: fieldName,\n                                schema: jsonSchema\n                            });\n                        }\n                        const maximum = schemaPart.maximum;\n                        const minimum = schemaPart.minimum;\n                        if (\n                            typeof maximum === 'undefined' ||\n                            typeof minimum === 'undefined'\n                        ) {\n                            throw newRxError('SC37', {\n                                index,\n                                field: fieldName,\n                                schema: jsonSchema\n                            });\n                        }\n\n                        if (\n                            !isFinite(maximum) ||\n                            !isFinite(minimum)\n                        ) {\n                            throw newRxError('SC41', {\n                                index,\n                                field: fieldName,\n                                schema: jsonSchema\n                            });\n                        }\n\n                        break;\n                    case 'boolean':\n                        /**\n                         * If a boolean field is used as an index,\n                         * it must be required.\n                         */\n                        let parentPath = '';\n                        let lastPathPart = fieldName;\n                        if (fieldName.includes('.')) {\n                            const partParts = fieldName.split('.');\n                            lastPathPart = partParts.pop();\n                            parentPath = partParts.join('.');\n                        }\n                        const parentSchemaPart = parentPath === '' ? jsonSchema : getSchemaByObjectPath(\n                            jsonSchema,\n                            parentPath\n                        );\n\n                        if (\n                            !parentSchemaPart.required ||\n                            !parentSchemaPart.required.includes(lastPathPart)\n                        ) {\n                            throw newRxError('SC38', {\n                                index,\n                                field: fieldName,\n                                schema: jsonSchema\n                            });\n                        }\n                        break;\n\n                    default:\n                        throw newRxError('SC36', {\n                            fieldName,\n                            type: schemaPart.type as any,\n                            schema: jsonSchema,\n                        });\n                }\n            });\n\n        });\n    }\n\n    // remove backward-compatibility for index: true\n    Object.keys(flattenObject(jsonSchema))\n        .map(key => {\n            // flattenObject returns only ending paths, we need all paths pointing to an object\n            const split = key.split('.');\n            split.pop(); // all but last\n            return split.join('.');\n        })\n        .filter(key => key !== '')\n        .filter((elem, pos, arr) => arr.indexOf(elem) === pos) // unique\n        .filter(key => { // check if this path defines an index\n            const value = getProperty(jsonSchema, key);\n            return value && !!value.index;\n        })\n        .forEach(key => { // replace inner properties\n            key = key.replace('properties.', ''); // first\n            key = key.replace(/\\.properties\\./g, '.'); // middle\n            throw newRxError('SC26', {\n                index: trimDots(key),\n                schema: jsonSchema\n            });\n        });\n\n    /* check types of the indexes */\n    (jsonSchema.indexes || [])\n        .reduce((indexPaths: string[], currentIndex) => {\n            if (isMaybeReadonlyArray(currentIndex)) {\n                appendToArray(indexPaths, currentIndex);\n            } else {\n                indexPaths.push(currentIndex);\n            }\n            return indexPaths;\n        }, [])\n        .filter((elem, pos, arr) => arr.indexOf(elem) === pos) // from now on working only with unique indexes\n        .map(indexPath => {\n            const realPath = getSchemaPropertyRealPath(indexPath); // real path in the collection schema\n            const schemaObj = getProperty(jsonSchema, realPath); // get the schema of the indexed property\n            if (!schemaObj || typeof schemaObj !== 'object') {\n                throw newRxError('SC21', {\n                    index: indexPath,\n                    schema: jsonSchema\n                });\n            }\n            return { indexPath, schemaObj };\n        })\n        .filter(index =>\n            index.schemaObj.type !== 'string' &&\n            index.schemaObj.type !== 'integer' &&\n            index.schemaObj.type !== 'number' &&\n            index.schemaObj.type !== 'boolean'\n        )\n        .forEach(index => {\n            throw newRxError('SC22', {\n                key: index.indexPath,\n                type: index.schemaObj.type,\n                schema: jsonSchema\n            });\n        });\n\n    /* ensure encrypted fields exist in the schema */\n    if (jsonSchema.encrypted) {\n        jsonSchema.encrypted\n            .forEach(propPath => {\n                // real path in the collection schema\n                const realPath = getSchemaPropertyRealPath(propPath);\n                // get the schema of the indexed property\n                const schemaObj = getProperty(jsonSchema, realPath);\n                if (!schemaObj || typeof schemaObj !== 'object') {\n                    throw newRxError('SC28', {\n                        field: propPath,\n                        schema: jsonSchema\n                    });\n                }\n            });\n    }\n}\n", "import {\n    newRxError,\n    newRxTypeError\n} from '../../rx-error.ts';\nimport type { KeyFunctionMap, RxJsonSchema } from '../../types/index.d.ts';\nimport { rxCollectionProperties, rxDocumentProperties } from './entity-properties.ts';\n\n/**\n * checks if the given static methods are allowed\n * @throws if not allowed\n */\nexport function checkOrmMethods(statics?: KeyFunctionMap) {\n    if (!statics) {\n        return;\n    }\n    Object\n        .entries(statics)\n        .forEach(([k, v]) => {\n            if (typeof k !== 'string') {\n                throw newRxTypeError('COL14', {\n                    name: k\n                });\n            }\n\n            if (k.startsWith('_')) {\n                throw newRxTypeError('COL15', {\n                    name: k\n                });\n            }\n\n            if (typeof v !== 'function') {\n                throw newRxTypeError('COL16', {\n                    name: k,\n                    type: typeof k\n                });\n            }\n\n            if (\n                rxCollectionProperties().includes(k) ||\n                rxDocumentProperties().includes(k)\n            ) {\n                throw newRxError('COL17', {\n                    name: k\n                });\n            }\n        });\n}\n\n\nexport function checkOrmDocumentMethods<RxDocType>(\n    schema: RxJsonSchema<RxDocType>,\n    methods?: any,\n) {\n    const topLevelFields = Object.keys(schema.properties) as (keyof RxDocType)[];\n    if (!methods) {\n        return;\n    }\n    Object.keys(methods)\n        .filter(funName => topLevelFields.includes(funName as any))\n        .forEach(funName => {\n            throw newRxError('COL18', {\n                funName\n            });\n        });\n}\n", "import type { RxJsonSchema, NumberFunctionMap } from '../../types/index.d.ts';\nimport { newRxTypeError, newRxError } from '../../rx-error.ts';\nimport { getPreviousVersions } from '../../rx-schema.ts';\n\n\n/**\n * checks if the migrationStrategies are ok, throws if not\n * @throws {Error|TypeError} if not ok\n */\nexport function checkMigrationStrategies(\n    schema: RxJsonSchema<any>,\n    migrationStrategies: NumberFunctionMap\n): boolean {\n    // migrationStrategies must be object not array\n    if (\n        typeof migrationStrategies !== 'object' ||\n        Array.isArray(migrationStrategies)\n    ) {\n        throw newRxTypeError('COL11', {\n            schema\n        });\n    }\n\n    const previousVersions = getPreviousVersions(schema);\n\n    // for every previousVersion there must be strategy\n    if (\n        previousVersions.length !== Object\n            .keys(migrationStrategies).length\n    ) {\n        throw newRxError('COL12', {\n            have: Object.keys(migrationStrategies),\n            should: previousVersions\n        });\n    }\n\n    // every strategy must have number as property and be a function\n    previousVersions\n        .map(vNr => ({\n            v: vNr,\n            s: migrationStrategies[(vNr + 1)]\n        }))\n        .filter(strategy => typeof strategy.s !== 'function')\n        .forEach(strategy => {\n            throw newRxTypeError('COL13', {\n                version: strategy.v,\n                type: typeof strategy,\n                schema\n            });\n        });\n\n    return true;\n}\n", "import type { RxCollectionCreator, RxDatabaseCreator } from '../../types/index.d.ts';\nimport { newRxError, newRxTypeError } from '../../rx-error.ts';\nimport { rxDatabaseProperties } from './entity-properties.ts';\nimport { isFolderPath } from '../../plugins/utils/index.ts';\n\n/**\n * if the name of a collection\n * clashes with a property of RxDatabase,\n * we get problems so this function prohibits this\n */\nexport function ensureCollectionNameValid(\n    args: RxCollectionCreator & { name: string; }\n) {\n    if (rxDatabaseProperties().includes(args.name)) {\n        throw newRxError('DB5', {\n            name: args.name\n        });\n    }\n    validateDatabaseName(args.name);\n}\n\nexport function ensureDatabaseNameIsValid(args: RxDatabaseCreator<any, any>) {\n\n    validateDatabaseName(args.name);\n\n    if(args.name.includes('$')){\n        throw newRxError('DB13', {\n            name: args.name,\n        });\n    }\n\n    /**\n     * The server-plugin has problems when a path with and ending slash is given\n     * So we do not allow this.\n     * @link https://github.com/pubkey/rxdb/issues/2251\n     */\n    if (isFolderPath(args.name)) {\n        if (args.name.endsWith('/') || args.name.endsWith('\\\\')) {\n            throw newRxError('DB11', {\n                name: args.name,\n            });\n        }\n    }\n}\n\n\n\n/**\n * In contrast to CouchDB, we still allow inner uppercase letters\n * like the name fooBar. This makes it way less confusing when naming\n * collections with a JavaScript variable name convention.\n */\nconst validCouchDBStringRegexStr = '^[a-z][_$a-zA-Z0-9\\\\-]*$';\nconst validCouchDBStringRegex = new RegExp(validCouchDBStringRegexStr);\n\n/**\n * Validates that a given string is ok to be used with couchdb-collection-names.\n * We only allow these strings as database- or collection names because it ensures\n * that you later do not get in trouble when you want to use the database together witch couchdb.\n *\n * @link https://docs.couchdb.org/en/stable/api/database/common.html\n * @link https://neighbourhood.ie/blog/2020/10/13/everything-you-need-to-know-about-couchdb-database-names/\n * @throws  {RxError}\n */\nexport function validateDatabaseName(name: string): true {\n    if (\n        typeof name !== 'string' ||\n        name.length === 0\n    ) {\n        throw newRxTypeError('UT1', {\n            name\n        });\n    }\n\n\n    // do not check, if foldername is given\n    if (isFolderPath(name)) {\n        return true;\n    }\n\n    if (\n        !name.match(validCouchDBStringRegex) &&\n        /**\n         * The string ':memory:' is used in the SQLite RxStorage\n         * to persist data into a memory state. Often used in tests.\n         */\n        name !== ':memory:'\n    ) {\n        throw newRxError('UT2', {\n            regex: validCouchDBStringRegexStr,\n            givenName: name,\n        });\n    }\n\n    return true;\n}\n", "import type {\n    RxPluginPreCreateRxQueryArgs,\n    MangoQuery,\n    RxPluginPrePrepareQueryArgs,\n    FilledMangoQuery,\n    RxJsonSchema,\n    RxDocumentData,\n    MangoQuerySelector,\n    PreparedQuery,\n    RxQueryOP,\n    RxPluginPrePrepareRxQueryArgs\n} from '../../types/index.d.ts';\nimport { newRxError, newRxTypeError } from '../../rx-error.ts';\nimport { deepEqual, findUndefinedPath } from '../utils/index.ts';\nimport { prepareQuery } from '../../rx-query-helper.ts';\n\n/**\n * accidentally passing a non-valid object into the query params\n * is very hard to debug especially when queries are observed\n * This is why we do some checks here in dev-mode\n */\nexport function checkQuery(args: RxPluginPreCreateRxQueryArgs) {\n    const isPlainObject = Object.prototype.toString.call(args.queryObj) === '[object Object]';\n    if (!isPlainObject) {\n        throw newRxTypeError('QU11', {\n            op: args.op,\n            collection: args.collection.name,\n            queryObj: args.queryObj\n        });\n    }\n\n    const validKeys: (keyof MangoQuery)[] = [\n        'selector',\n        'limit',\n        'skip',\n        'sort',\n        'index'\n    ];\n    Object.keys(args.queryObj).forEach(key => {\n        if (!(validKeys as string[]).includes(key)) {\n            throw newRxTypeError('QU11', {\n                op: args.op,\n                collection: args.collection.name,\n                queryObj: args.queryObj,\n                key,\n                args: {\n                    validKeys\n                }\n            });\n        }\n    });\n\n    // do not allow skip or limit for count queries\n    if (\n        args.op === 'count' &&\n        (\n            args.queryObj.limit ||\n            args.queryObj.skip\n        )\n    ) {\n        throw newRxError(\n            'QU15',\n            {\n                collection: args.collection.name,\n                query: args.queryObj\n            }\n        );\n    }\n\n    ensureObjectDoesNotContainRegExp(args.queryObj);\n}\n\n\nexport function checkMangoQuery(args: RxPluginPrePrepareQueryArgs) {\n    const schema = args.rxQuery.collection.schema.jsonSchema;\n\n    const undefinedFieldPath = findUndefinedPath(args.mangoQuery);\n    if (undefinedFieldPath) {\n        throw newRxError('QU19', {\n            field: undefinedFieldPath,\n            query: args.mangoQuery,\n        });\n    }\n\n    /**\n     * Ensure that all top level fields are included in the schema.\n     * TODO this check can be augmented to also check sub-fields.\n     */\n    const massagedSelector: MangoQuerySelector<any> = args.mangoQuery.selector;\n    const schemaTopLevelFields = Object.keys(schema.properties);\n    Object.keys(massagedSelector)\n        // do not check operators\n        .filter(fieldOrOperator => !fieldOrOperator.startsWith('$'))\n        // skip this check on non-top-level fields\n        .filter(field => !field.includes('.'))\n        .forEach(field => {\n            if (!schemaTopLevelFields.includes(field)) {\n                throw newRxError('QU13', {\n                    schema,\n                    field,\n                    query: args.mangoQuery,\n                });\n            }\n        });\n\n    /**\n     * ensure if custom index is set,\n     * it is also defined in the schema\n     */\n    const schemaIndexes = schema.indexes ? schema.indexes : [];\n    const index = args.mangoQuery.index;\n    if (index) {\n        const isInSchema = schemaIndexes.find(schemaIndex => deepEqual(schemaIndex, index));\n        if (!isInSchema) {\n            throw newRxError(\n                'QU12',\n                {\n                    collection: args.rxQuery.collection.name,\n                    query: args.mangoQuery,\n                    schema\n                }\n            );\n        }\n    }\n\n\n    /**\n     * Ensure that a count() query can only be used\n     * with selectors that are fully satisfied by the used index.\n     */\n    if (args.rxQuery.op === 'count') {\n        if (\n            !areSelectorsSatisfiedByIndex(\n                args.rxQuery.collection.schema.jsonSchema,\n                args.mangoQuery\n            ) &&\n            !args.rxQuery.collection.database.allowSlowCount\n        ) {\n            throw newRxError('QU14', {\n                collection: args.rxQuery.collection,\n                query: args.mangoQuery\n            });\n        }\n    }\n\n    /**\n     * Ensure that sort only runs on known fields\n     * TODO also check nested fields\n     */\n    if (args.mangoQuery.sort) {\n        args.mangoQuery.sort\n            .map(sortPart => Object.keys(sortPart)[0])\n            .filter(field => !field.includes('.'))\n            .forEach(field => {\n                if (!schemaTopLevelFields.includes(field)) {\n                    throw newRxError('QU13', {\n                        schema,\n                        field,\n                        query: args.mangoQuery,\n                    });\n                }\n            });\n    }\n\n    // Do not allow RexExp instances\n    ensureObjectDoesNotContainRegExp(args.mangoQuery);\n}\n\n\nexport function areSelectorsSatisfiedByIndex<RxDocType>(\n    schema: RxJsonSchema<RxDocumentData<RxDocType>>,\n    query: FilledMangoQuery<RxDocType>\n): boolean {\n    const preparedQuery: PreparedQuery<any> = prepareQuery(\n        schema,\n        query\n    );\n    return preparedQuery.queryPlan.selectorSatisfiedByIndex;\n}\n\n/**\n * Ensures that the selector does not contain any RegExp instance.\n * @recursive\n */\nexport function ensureObjectDoesNotContainRegExp(selector: any) {\n    if (typeof selector !== 'object' || selector === null) {\n        return;\n    }\n    const keys = Object.keys(selector);\n    keys.forEach(key => {\n        const value: any = selector[key];\n        if (value instanceof RegExp) {\n            throw newRxError('QU16', {\n                field: key,\n                query: selector,\n            });\n        } else if (Array.isArray(value)) {\n            value.forEach(item => ensureObjectDoesNotContainRegExp(item));\n        } else {\n            ensureObjectDoesNotContainRegExp(value);\n        }\n    });\n}\n\n\n/**\n * People often use queries wrong\n * so we have some checks here.\n * For example people use numbers as primary keys\n * which is not allowed.\n */\nexport function isQueryAllowed(args: RxPluginPrePrepareRxQueryArgs) {\n    if (args.op === 'findOne') {\n        if (\n            typeof args.queryObj === 'number' ||\n            Array.isArray(args.queryObj)\n        ) {\n            throw newRxTypeError('COL6', {\n                collection: args.collection.name,\n                queryObj: args.queryObj\n            });\n        }\n    } else if (args.op === 'find') {\n        if (typeof args.queryObj === 'string') {\n            throw newRxError('COL5', {\n                collection: args.collection.name,\n                queryObj: args.queryObj\n            });\n        }\n    }\n}\n", "import { newRxError } from '../../rx-error.ts';\nimport { fillPrimaryKey, getPrimaryFieldOfPrimaryKey } from '../../rx-schema-helper.ts';\nimport type { BulkWriteRow, RxDocumentData, RxStorageInstance } from '../../types/index.d.ts';\n\nexport function ensurePrimaryKeyValid(\n    primaryKey: string,\n    docData: RxDocumentData<any>\n) {\n    if (!primaryKey) {\n        throw newRxError('DOC20', {\n            primaryKey,\n            document: docData\n        });\n    }\n\n\n    /**\n     * This is required so that we can left-pad\n     * the primaryKey and we are still able to de-left-pad\n     * it to get again the original key.\n     */\n    if (\n        primaryKey !== primaryKey.trim()\n    ) {\n        throw newRxError('DOC21', {\n            primaryKey,\n            document: docData\n        });\n    }\n    if (\n        primaryKey.includes('\\r') ||\n        primaryKey.includes('\\n')\n    ) {\n        throw newRxError('DOC22', {\n            primaryKey,\n            document: docData\n        });\n    }\n    if (\n        primaryKey.includes('\"')\n    ) {\n        throw newRxError('DOC23', {\n            primaryKey,\n            document: docData\n        });\n    }\n}\n\n/**\n * Deeply checks if the object contains an\n * instance of the JavaScript Date class.\n * @recursive\n */\nexport function containsDateInstance(obj: any): boolean {\n    if (typeof obj !== 'object' || obj === null) {\n        return false;\n    }\n    for (let key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            if (obj[key] instanceof Date) {\n                return true;\n            }\n            if (typeof obj[key] === 'object' && containsDateInstance(obj[key])) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\n\nexport function checkWriteRows<RxDocType>(\n    storageInstance: RxStorageInstance<RxDocType, any, any, any>,\n    rows: BulkWriteRow<RxDocType>[]\n) {\n    const primaryPath = getPrimaryFieldOfPrimaryKey(storageInstance.schema.primaryKey);\n    for (const writeRow of rows) {\n        // ensure that the primary key has not been changed\n        writeRow.document = fillPrimaryKey(\n            primaryPath,\n            storageInstance.schema,\n            writeRow.document\n        );\n\n\n\n        /**\n         * Ensure that _meta fields have been merged\n         * and not replaced.\n         * This is important so that when one plugin A\n         * sets a _meta field and another plugin B does a write\n         * to the document, it must be ensured that the\n         * field of plugin A was not removed.\n         */\n        if (writeRow.previous) {\n            Object.keys(writeRow.previous._meta)\n                .forEach(metaFieldName => {\n                    if (!Object.prototype.hasOwnProperty.call(writeRow.document._meta, metaFieldName)) {\n                        throw newRxError('SNH', {\n                            dataBefore: writeRow.previous,\n                            dataAfter: writeRow.document,\n                            args: {\n                                metaFieldName\n                            }\n                        });\n                    }\n                });\n        }\n\n        /**\n         * Ensure it can be structured cloned\n         */\n        try {\n            /**\n             * Notice that structuredClone() is not available\n             * in ReactNative, so we test for JSON.stringify() instead\n             * @link https://github.com/pubkey/rxdb/issues/5046#issuecomment-1827374498\n             */\n            if (typeof structuredClone === 'function') {\n                structuredClone(writeRow);\n            } else {\n                JSON.parse(JSON.stringify(writeRow));\n            }\n        } catch (err) {\n            throw newRxError('DOC24', {\n                collection: storageInstance.collectionName,\n                document: writeRow.document\n            });\n        }\n\n\n        /**\n         * Ensure it does not contain a Date() object\n         */\n        if (containsDateInstance(writeRow.document)) {\n            throw newRxError('DOC24', {\n                collection: storageInstance.collectionName,\n                document: writeRow.document\n            });\n        }\n    }\n\n}\n", "import type { RxDatabase } from '../../types';\nimport {\n    RXDB_VERSION,\n    hasPremiumFlag,\n    hashStringToNumber\n} from '../utils/index.ts';\n\n\nlet iframeShown = false;\n\nconst links: {\n    text: string;\n    url: string;\n}[] = [\n        {\n            text: 'JavaScript Database',\n            url: 'https://rxdb.info/'\n        },\n        {\n            text: 'React Native Database',\n            url: 'https://rxdb.info/react-native-database.html'\n        },\n        {\n            text: 'Local First',\n            url: 'https://rxdb.info/articles/local-first-future.html'\n        },\n        {\n            text: 'Angular IndexedDB',\n            url: 'https://rxdb.info/articles/angular-indexeddb.html'\n        },\n        {\n            text: 'React IndexedDB',\n            url: 'https://rxdb.info/articles/react-indexeddb.html'\n        },\n        {\n            text: 'Firestore Alternative',\n            url: 'https://rxdb.info/articles/firestore-alternative.html'\n        },\n        {\n            text: 'Offline Database',\n            url: 'https://rxdb.info/articles/offline-database.html'\n        },\n        {\n            text: 'JSON Database',\n            url: 'https://rxdb.info/articles/json-database.html'\n        },\n        {\n            text: 'NodeJS Database',\n            url: 'https://rxdb.info/nodejs-database.html'\n        }\n    ];\n\n\n/**\n * Adds an iframe to track the results of marketing efforts.\n */\nexport async function addDevModeTrackingIframe() {\n    /**\n     * Only run this in browser AND localhost AND dev-mode.\n     * Make sure this is never used in production by someone.\n     */\n    if (\n        iframeShown ||\n        typeof window === 'undefined' ||\n        typeof location === 'undefined' ||\n        typeof document === 'undefined'\n        // !isLocalHost()\n    ) {\n        return;\n    }\n\n\n    // do not show if premium flag is set.\n    if (await hasPremiumFlag()) {\n        return;\n    }\n\n    iframeShown = true;\n\n    /**\n     * Do not use display:none\n     * @link https://medium.com/@zachcaceres/dont-use-display-none-to-hide-iframes-in-safari-b51715eb22c4\n     */\n    const containerDiv = document.createElement('div');\n    containerDiv.style.visibility = 'hidden';\n    containerDiv.style.position = 'absolute';\n    containerDiv.style.top = '0';\n    containerDiv.style.left = '0';\n    containerDiv.style.opacity = '0.1';\n    containerDiv.style.width = '1px';\n    containerDiv.style.height = '1px';\n    containerDiv.style.overflow = 'hidden';\n\n    const iframe = document.createElement('iframe');\n    iframe.width = '1px';\n    iframe.height = '1px';\n    iframe.src = 'https://rxdb.info/html/dev-mode-iframe.html?version=' + RXDB_VERSION;\n    containerDiv.appendChild(iframe);\n\n    const hashNr = hashStringToNumber(location.host);\n    const useLinkId = hashNr % links.length;\n    const useLink = links[useLinkId];\n    const link = document.createElement('a');\n    link.href = useLink.url;\n    link.target = '_blank';\n    link.innerText = useLink.text;\n\n    const p = document.createElement('p');\n    p.innerText = 'This is the iframe which is shown when the RxDB Dev-Mode is enabled. Also see ';\n    p.appendChild(link);\n    containerDiv.appendChild(p);\n\n    document.body.appendChild(containerDiv);\n}\n\n\nfunction isLocalHost() {\n    return (\n        location.hostname === 'localhost' ||\n        location.hostname.includes('localhost') ||\n        location.hostname === '127.0.0.1' ||\n        location.hostname === '0.0.0.0' ||\n        location.hostname === '[::1]'  // IPv6\n    );\n}\n", "import type {\n    RxPlugin,\n    RxCollectionCreator,\n    RxDatabaseCreator,\n    RxErrorKey,\n    RxDocument,\n    RxDatabase\n} from '../../types/index.d.ts';\n\nimport {\n    ERROR_MESSAGES\n} from './error-messages.ts';\nimport {\n    checkSchema\n} from './check-schema.ts';\nimport {\n    checkOrmDocumentMethods,\n    checkOrmMethods\n} from './check-orm.ts';\nimport { checkMigrationStrategies } from './check-migration-strategies.ts';\nimport {\n    ensureCollectionNameValid,\n    ensureDatabaseNameIsValid\n} from './unallowed-properties.ts';\nimport { checkMangoQuery, checkQuery, isQueryAllowed } from './check-query.ts';\nimport { newRxError } from '../../rx-error.ts';\nimport { DeepReadonly } from '../../types/util.ts';\nimport { deepFreeze } from '../../plugins/utils/index.ts';\nimport { checkWriteRows, ensurePrimaryKeyValid } from './check-document.ts';\nimport { addDevModeTrackingIframe } from './dev-mode-tracking.ts';\n\nexport * from './check-schema.ts';\nexport * from './unallowed-properties.ts';\nexport * from './check-query.ts';\n\nlet showDevModeWarning = true;\n\n/**\n * Suppresses the warning message shown in the console, typically invoked once the developer (hello!) \n * has acknowledged it.\n */\nexport function disableWarnings() {\n    showDevModeWarning = false;\n}\n\n/**\n * Deep freezes and object when in dev-mode.\n * Deep-Freezing has the same performance as deep-cloning, so we only do that in dev-mode.\n * Also we can ensure the readonly state via typescript\n * @link https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n */\nexport function deepFreezeWhenDevMode<T>(obj: T): DeepReadonly<T> {\n    // direct return if not suitable for deepFreeze()\n    if (\n        !obj ||\n        typeof obj === 'string' ||\n        typeof obj === 'number'\n    ) {\n        return obj as any;\n    }\n\n    return deepFreeze(obj) as any;\n}\n\n\nexport const DEV_MODE_PLUGIN_NAME = 'dev-mode';\nexport const RxDBDevModePlugin: RxPlugin = {\n    name: DEV_MODE_PLUGIN_NAME,\n    rxdb: true,\n    init: () => {\n        addDevModeTrackingIframe();\n        if (showDevModeWarning) {\n            console.warn(\n                [\n                    '-------------- RxDB dev-mode warning -------------------------------',\n                    'you are seeing this because you use the RxDB dev-mode plugin https://rxdb.info/dev-mode.html?console=dev-mode ',\n                    'This is great in development mode, because it will run many checks to ensure',\n                    'that you use RxDB correct. If you see this in production mode,',\n                    'you did something wrong because the dev-mode plugin will decrease the performance.',\n                    '',\n                    ' Hint: To get the most out of RxDB, check out the Premium Plugins',\n                    'to get access to faster storages and more professional features: https://rxdb.info/premium/?console=dev-mode ',\n                    '',\n                    'You can disable this warning by calling disableWarnings() from the dev-mode plugin.',\n                    // '',\n                    // 'Also take part in the RxDB User Survey: https://rxdb.info/survey.html',\n                    '---------------------------------------------------------------------'\n                ].join('\\n')\n            );\n        }\n    },\n    overwritable: {\n        isDevMode() {\n            return true;\n        },\n        deepFreezeWhenDevMode,\n        tunnelErrorMessage(code: RxErrorKey) {\n            if (!ERROR_MESSAGES[code]) {\n                console.error('RxDB: Error-Code not known: ' + code);\n                throw new Error('Error-Code ' + code + ' not known, contact the maintainer');\n            }\n            const errorMessage = ERROR_MESSAGES[code];\n            return `\nError message: ${errorMessage}\nError code: ${code}`;\n        }\n    },\n    hooks: {\n        preCreateRxSchema: {\n            after: checkSchema\n        },\n        preCreateRxDatabase: {\n            before: function (args: RxDatabaseCreator<any, any>) {\n                if (!args.storage.name.startsWith('validate-')) {\n                    throw newRxError('DVM1', {\n                        database: args.name,\n                        storage: args.storage.name\n                    });\n                }\n            },\n            after: function (args: RxDatabaseCreator<any, any>) {\n                ensureDatabaseNameIsValid(args);\n            }\n        },\n        createRxDatabase: {\n            after: async function (args) {\n            }\n        },\n        preCreateRxCollection: {\n            after: function (args: RxCollectionCreator<any> & { name: string; }) {\n                ensureCollectionNameValid(args);\n                checkOrmDocumentMethods(args.schema as any, args.methods);\n                if (args.name.charAt(0) === '_') {\n                    throw newRxError('DB2', {\n                        name: args.name\n                    });\n                }\n                if (!args.schema) {\n                    throw newRxError('DB4', {\n                        name: args.name,\n                        args\n                    });\n                }\n            }\n        },\n        createRxDocument: {\n            before: function (doc: RxDocument) {\n                ensurePrimaryKeyValid(doc.primary, doc.toJSON(true));\n            }\n        },\n        prePrepareRxQuery: {\n            after: function (args) {\n                isQueryAllowed(args);\n            }\n        },\n        preCreateRxQuery: {\n            after: function (args) {\n                checkQuery(args);\n            }\n        },\n        prePrepareQuery: {\n            after: (args) => {\n                checkMangoQuery(args);\n            }\n        },\n        preStorageWrite: {\n            before: (args) => {\n                checkWriteRows(args.storageInstance, args.rows);\n            }\n        },\n        createRxCollection: {\n            after: (args) => {\n                // check ORM-methods\n                checkOrmMethods(args.creator.statics);\n                checkOrmMethods(args.creator.methods);\n                checkOrmMethods(args.creator.attachments);\n\n                // check migration strategies\n                if (args.creator.schema && args.creator.migrationStrategies) {\n                    checkMigrationStrategies(\n                        args.creator.schema,\n                        args.creator.migrationStrategies\n                    );\n                }\n            }\n        }\n    }\n};\n"],
  "mappings": "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",
  "names": ["ERROR_MESSAGES", "UT1", "UT2", "UT3", "UT4", "UT5", "UT6", "UT7", "UT8", "PL1", "PL3", "P2", "QU1", "QU4", "QU5", "QU6", "QU9", "QU10", "QU11", "QU12", "QU13", "QU14", "QU15", "QU16", "QU17", "QU18", "QU19", "MQ1", "MQ2", "MQ3", "MQ4", "MQ5", "MQ6", "MQ7", "MQ8", "DB1", "DB2", "DB3", "DB4", "DB5", "DB6", "DB8", "DB9", "DB11", "DB12", "DB13", "DB14", "COL1", "COL2", "COL3", "COL4", "COL5", "COL6", "COL7", "COL8", "COL9", "COL10", "COL11", "COL12", "COL13", "COL14", "COL15", "COL16", "COL17", "COL18", "COL20", "COL21", "CONFLICT", "COL22", "COL23", "NON_PREMIUM_COLLECTION_LIMIT", "DOC1", "DOC2", "DOC3", "DOC4", "DOC5", "DOC6", "DOC7", "DOC8", "DOC9", "DOC10", "DOC11", "DOC13", "DOC14", "DOC15", "DOC16", "DOC17", "DOC18", "DOC19", "DOC20", "DOC21", "DOC22", "DOC23", "DOC24", "DM1", "DM2", "DM3", "DM4", "DM5", "AT1", "EN1", "EN2", "EN3", "EN4", "JD1", "JD2", "JD3", "LD1", "LD2", "LD3", "LD4", "LD5", "LD6", "LD7", "LD8", "RC1", "RC2", "RC4", "RC5", "RC6", "RC7", "RC_PULL", "RC_STREAM", "RC_PUSH", "RC_PUSH_NO_AR", "RC_WEBRTC_PEER", "RC_COUCHDB_1", "RC_COUCHDB_2", "RC_OUTDATED", "RC_UNAUTHORIZED", "RC_FORBIDDEN", "SC1", "SC2", "SC3", "SC4", "SC6", "SC7", "SC8", "SC10", "SC11", "SC13", "SC14", "SC15", "SC16", "SC17", "SC18", "SC19", "SC20", "SC21", "SC22", "SC23", "SC24", "SC25", "SC26", "SC28", "SC29", "SC30", "SC32", "SC33", "SC34", "SC35", "SC36", "SC37", "SC38", "SC39", "SC40", "SC41", "DVM1", "VD1", "VD2", "S1", "GQL1", "GQL3", "CRDT1", "CRDT2", "CRDT3", "DXE1", "LS1", "SQL1", "SQL2", "SQL3", "RM1", "MG1", "SNH", "_rxCollectionProperties", "rxCollectionProperties", "pseudoInstance", "RxCollectionBase", "ownProperties", "Object", "getOwnPropertyNames", "prototypeProperties", "getPrototypeOf", "_rxDatabaseProperties", "rxDatabaseProperties", "RxDatabaseBase", "close", "pseudoConstructor", "createRxDocumentConstructor", "basePrototype", "pseudoRxDocument", "_rxDocumentProperties", "rxDocumentProperties", "reserved", "checkFieldNameRegex", "fieldName", "includes", "newRxError", "regexStr", "regex", "RegExp", "match", "validateFieldsDeep", "rxJsonSchema", "primaryPath", "getPrimaryFieldOfPrimaryKey", "primaryKey", "checkField", "schemaObj", "path", "Array", "isArray", "split", "pop", "Object", "prototype", "hasOwnProperty", "call", "type", "required", "length", "items", "isNested", "default", "charAt", "traverse", "currentObj", "currentPath", "keys", "forEach", "attributeName", "properties", "nextPath", "checkPrimaryKey", "jsonSchema", "schema", "validatePrimarySchemaPart", "schemaPart", "args", "key", "compositePrimaryKey", "keySchemaPart", "getSchemaByObjectPath", "fields", "field", "primaryPathSchemaPart", "maxLength", "isFinite", "getSchemaPropertyRealPath", "shortPath", "pathParts", "realPath", "i", "concat", "trimDots", "checkSchema", "_rev", "version", "value", "indexes", "unique", "encrypted", "rxDocumentProperties", "isMaybeReadonlyArray", "index", "indexAsArray", "multipleOf", "maximum", "minimum", "parentPath", "lastPathPart", "partParts", "join", "parentSchemaPart", "flattenObject", "map", "filter", "elem", "pos", "arr", "indexOf", "getProperty", "replace", "reduce", "indexPaths", "currentIndex", "appendToArray", "push", "indexPath", "propPath", "checkOrmMethods", "statics", "Object", "entries", "forEach", "k", "v", "newRxTypeError", "name", "startsWith", "type", "rxCollectionProperties", "includes", "rxDocumentProperties", "newRxError", "checkOrmDocumentMethods", "schema", "methods", "topLevelFields", "keys", "properties", "filter", "funName", "checkMigrationStrategies", "schema", "migrationStrategies", "Array", "isArray", "newRxTypeError", "previousVersions", "getPreviousVersions", "length", "Object", "keys", "newRxError", "have", "should", "map", "vNr", "v", "s", "filter", "strategy", "forEach", "version", "type", "ensureCollectionNameValid", "args", "rxDatabaseProperties", "includes", "name", "newRxError", "validateDatabaseName", "ensureDatabaseNameIsValid", "isFolderPath", "endsWith", "validCouchDBStringRegexStr", "validCouchDBStringRegex", "RegExp", "length", "newRxTypeError", "match", "regex", "givenName", "checkQuery", "args", "isPlainObject", "Object", "prototype", "toString", "call", "queryObj", "newRxTypeError", "op", "collection", "name", "validKeys", "keys", "forEach", "key", "includes", "limit", "skip", "newRxError", "query", "ensureObjectDoesNotContainRegExp", "checkMangoQuery", "schema", "rxQuery", "jsonSchema", "undefinedFieldPath", "findUndefinedPath", "mangoQuery", "field", "massagedSelector", "selector", "schemaTopLevelFields", "properties", "filter", "fieldOrOperator", "startsWith", "schemaIndexes", "indexes", "index", "isInSchema", "find", "schemaIndex", "deepEqual", "areSelectorsSatisfiedByIndex", "database", "allowSlowCount", "sort", "map", "sortPart", "preparedQuery", "prepareQuery", "queryPlan", "selectorSatisfiedByIndex", "value", "RegExp", "Array", "isArray", "item", "isQueryAllowed", "ensurePrimaryKeyValid", "primaryKey", "docData", "newRxError", "document", "trim", "includes", "containsDateInstance", "obj", "key", "hasOwnProperty", "Date", "checkWriteRows", "storageInstance", "rows", "primaryPath", "getPrimaryFieldOfPrimaryKey", "schema", "_loop", "writeRow", "fillPrimaryKey", "previous", "Object", "keys", "_meta", "forEach", "metaFieldName", "prototype", "call", "dataBefore", "dataAfter", "args", "structuredClone", "JSON", "parse", "stringify", "err", "collection", "collectionName", "iframeShown", "links", "text", "url", "addDevModeTrackingIframe", "window", "location", "document", "hasPremiumFlag", "containerDiv", "createElement", "style", "visibility", "position", "top", "left", "opacity", "width", "height", "overflow", "iframe", "src", "RXDB_VERSION", "appendChild", "hashNr", "hashStringToNumber", "host", "useLinkId", "length", "useLink", "link", "href", "target", "innerText", "p", "body", "showDevModeWarning", "disableWarnings", "deepFreezeWhenDevMode", "obj", "deepFreeze", "DEV_MODE_PLUGIN_NAME", "RxDBDevModePlugin", "name", "rxdb", "init", "addDevModeTrackingIframe", "console", "warn", "join", "overwritable", "isDevMode", "tunnelErrorMessage", "code", "ERROR_MESSAGES", "error", "Error", "errorMessage", "hooks", "preCreateRxSchema", "after", "checkSchema", "preCreateRxDatabase", "before", "args", "storage", "startsWith", "newRxError", "database", "ensureDatabaseNameIsValid", "createRxDatabase", "preCreateRxCollection", "ensureCollectionNameValid", "checkOrmDocumentMethods", "schema", "methods", "charAt", "createRxDocument", "doc", "ensurePrimaryKeyValid", "primary", "toJSON", "prePrepareRxQuery", "isQueryAllowed", "preCreateRxQuery", "checkQuery", "prePrepareQuery", "checkMangoQuery", "preStorageWrite", "checkWriteRows", "storageInstance", "rows", "createRxCollection", "checkOrmMethods", "creator", "statics", "attachments", "migrationStrategies", "checkMigrationStrategies"]
}
