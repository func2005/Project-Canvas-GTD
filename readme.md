# Project Canvas GTD


## 项目简介

本项目旨在构建一个基于 **画布** 的下一代 GTD 工作空间。


### 核心理念

1.  **空间化**：打破传统列表的线性限制，利用二维空间的“位置”和“连接”来组织上下文。
2.  **组件实例化**：视图（日历、列表、矩阵）不再是单例页面，而是画布上可无限复用的组件实例 (`canvas_widgets`)。
3.  **本地优先**：采用 RxDB + PostgreSQL 架构。数据优先存储在本地，通过增量复制协议与云端同步，以提高响应速度。
4.  **数据与视图分离**：业务数据 (`Data Store`) 是唯一的数据来源，而画布 (`Canvas Store`) 仅是数据的投影方式。
5.  **幽灵视图**：昨日未完任务会在不更改任何信息的情况下显示在今日代办列表中，以防止遗忘。



### 核心实体


#### 任务 —— "软时间"与"自我排程"

-   **定义**：需要用户主动执行的原子行动。
-   **时间行为扩充**：
    -   通常仅有工作时间（即安排在哪一天做）。
    -   **Time Blocking (时间块)**：Task 也可以拥有开始时间和结束时间。这意味着用户决定“自我约束”，在特定时间段专注处理该任务。


#### 事件/日程 —— "硬时间"与"外部契约"

-   **定义**：具有排他性的、通常涉及他人的固定事务。
-   **重复性 (Recurrence)**：
    -   Event 支持 iCal 标准的 `recurrence_rule`，例如“每周一上午10点”。
-   **Canvas 形态**：始终显示为时间轴上的实心色块。


#### 项目 —— 聚合标签

-   **定义**：一个需要多步操作才能完成的结果。它是 Task 和 Event 的父级。
-   **核心状态**：
    1.  **活跃 (Active)**：项目中至少包含一个未完成的 Task。
    2.  **完成 (Completed)**：所有子任务均已归档。
-   **交互**：可展开为一组独立的看板视图组件。


## 快速启动

### Docker快速部署

拉取项目后在项目根目录下执行以下命令

```bash
docker-compose up --build -d
```
即可通过 `http://localhost:80` 访问项目。


## 操作手册

在本项目中，所有功能模块均被封装为**独立的、可实例化的浮动窗口**。它们的数据状态持久化于 `canvas_widgets` 表中，通过 RxDB 在客户端实时渲染。组件通用属性有：

**Header Bar (标题栏)**：

-   **Title**：显示当前上下文（如 "Nov 20" 或 project名称"Apollo"）。
-   **Pin Button (📌)**：修改 `view_state.is_pinned`。锁定后，组件不再响应上游信号，`data_source_config` 被固化。
-   **Add**: 创建同组组件。信号在组内传递。
-   **View Switcher**：切换模式（例如视图模式与修改模式）


### Project 操作

在日历组件添加组件 `Project Header` 用于显示项目名称及进度。

在智能列表中切换类型至 Project 可以查看并添加项目。

点击智能列表中的项目可以切换 `Project Header` 显示的项目

点击 `Project Header` 能够将智能列表切换为改项目的任务列表。