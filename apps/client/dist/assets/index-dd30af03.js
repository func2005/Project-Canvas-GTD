var Az=Object.defineProperty;var jz=(e,t,n)=>t in e?Az(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zu=(e,t,n)=>(jz(e,typeof t!="symbol"?t+"":t,n),n),hE=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var Me=(e,t,n)=>(hE(e,t,"read from private field"),n?n.call(e):t.get(e)),vn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},gn=(e,t,n,r)=>(hE(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var qu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Lz(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var AC={exports:{}},ug={},jC={exports:{}},vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Th=Symbol.for("react.element"),zz=Symbol.for("react.portal"),Fz=Symbol.for("react.fragment"),Bz=Symbol.for("react.strict_mode"),Wz=Symbol.for("react.profiler"),Uz=Symbol.for("react.provider"),Hz=Symbol.for("react.context"),Kz=Symbol.for("react.forward_ref"),qz=Symbol.for("react.suspense"),Yz=Symbol.for("react.memo"),Vz=Symbol.for("react.lazy"),pE=Symbol.iterator;function Xz(e){return e===null||typeof e!="object"?null:(e=pE&&e[pE]||e["@@iterator"],typeof e=="function"?e:null)}var LC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zC=Object.assign,FC={};function sf(e,t,n){this.props=e,this.context=t,this.refs=FC,this.updater=n||LC}sf.prototype.isReactComponent={};sf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function BC(){}BC.prototype=sf.prototype;function G_(e,t,n){this.props=e,this.context=t,this.refs=FC,this.updater=n||LC}var J_=G_.prototype=new BC;J_.constructor=G_;zC(J_,sf.prototype);J_.isPureReactComponent=!0;var mE=Array.isArray,WC=Object.prototype.hasOwnProperty,Z_={current:null},UC={key:!0,ref:!0,__self:!0,__source:!0};function HC(e,t,n){var r,i={},a=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)WC.call(t,r)&&!UC.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Th,type:e,key:a,ref:s,props:i,_owner:Z_.current}}function Qz(e,t){return{$$typeof:Th,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function eb(e){return typeof e=="object"&&e!==null&&e.$$typeof===Th}function Gz(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var vE=/\/+/g;function e0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Gz(""+e.key):t.toString(36)}function jm(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Th:case zz:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+e0(s,0):r,mE(i)?(n="",e!=null&&(n=e.replace(vE,"$&/")+"/"),jm(i,t,n,"",function(d){return d})):i!=null&&(eb(i)&&(i=Qz(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(vE,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",mE(e))for(var u=0;u<e.length;u++){a=e[u];var c=r+e0(a,u);s+=jm(a,t,n,c,i)}else if(c=Xz(e),typeof c=="function")for(e=c.call(e),u=0;!(a=e.next()).done;)a=a.value,c=r+e0(a,u++),s+=jm(a,t,n,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function em(e,t,n){if(e==null)return e;var r=[],i=0;return jm(e,r,"","",function(a){return t.call(n,a,i++)}),r}function Jz(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var jr={current:null},Lm={transition:null},Zz={ReactCurrentDispatcher:jr,ReactCurrentBatchConfig:Lm,ReactCurrentOwner:Z_};function KC(){throw Error("act(...) is not supported in production builds of React.")}vt.Children={map:em,forEach:function(e,t,n){em(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return em(e,function(){t++}),t},toArray:function(e){return em(e,function(t){return t})||[]},only:function(e){if(!eb(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};vt.Component=sf;vt.Fragment=Fz;vt.Profiler=Wz;vt.PureComponent=G_;vt.StrictMode=Bz;vt.Suspense=qz;vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zz;vt.act=KC;vt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=zC({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=Z_.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)WC.call(t,c)&&!UC.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&u!==void 0?u[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:Th,type:e.type,key:i,ref:a,props:r,_owner:s}};vt.createContext=function(e){return e={$$typeof:Hz,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Uz,_context:e},e.Consumer=e};vt.createElement=HC;vt.createFactory=function(e){var t=HC.bind(null,e);return t.type=e,t};vt.createRef=function(){return{current:null}};vt.forwardRef=function(e){return{$$typeof:Kz,render:e}};vt.isValidElement=eb;vt.lazy=function(e){return{$$typeof:Vz,_payload:{_status:-1,_result:e},_init:Jz}};vt.memo=function(e,t){return{$$typeof:Yz,type:e,compare:t===void 0?null:t}};vt.startTransition=function(e){var t=Lm.transition;Lm.transition={};try{e()}finally{Lm.transition=t}};vt.unstable_act=KC;vt.useCallback=function(e,t){return jr.current.useCallback(e,t)};vt.useContext=function(e){return jr.current.useContext(e)};vt.useDebugValue=function(){};vt.useDeferredValue=function(e){return jr.current.useDeferredValue(e)};vt.useEffect=function(e,t){return jr.current.useEffect(e,t)};vt.useId=function(){return jr.current.useId()};vt.useImperativeHandle=function(e,t,n){return jr.current.useImperativeHandle(e,t,n)};vt.useInsertionEffect=function(e,t){return jr.current.useInsertionEffect(e,t)};vt.useLayoutEffect=function(e,t){return jr.current.useLayoutEffect(e,t)};vt.useMemo=function(e,t){return jr.current.useMemo(e,t)};vt.useReducer=function(e,t,n){return jr.current.useReducer(e,t,n)};vt.useRef=function(e){return jr.current.useRef(e)};vt.useState=function(e){return jr.current.useState(e)};vt.useSyncExternalStore=function(e,t,n){return jr.current.useSyncExternalStore(e,t,n)};vt.useTransition=function(){return jr.current.useTransition()};vt.version="18.3.1";jC.exports=vt;var J=jC.exports;const Dt=Nh(J);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eF=J,tF=Symbol.for("react.element"),nF=Symbol.for("react.fragment"),rF=Object.prototype.hasOwnProperty,iF=eF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aF={key:!0,ref:!0,__self:!0,__source:!0};function qC(e,t,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)rF.call(t,r)&&!aF.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:tF,type:e,key:a,ref:s,props:i,_owner:iF.current}}ug.Fragment=nF;ug.jsx=qC;ug.jsxs=qC;AC.exports=ug;var $=AC.exports,cw={},YC={exports:{}},Ei={},VC={exports:{}},XC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(oe,_e){var G=oe.length;oe.push(_e);e:for(;0<G;){var F=G-1>>>1,te=oe[F];if(0<i(te,_e))oe[F]=_e,oe[G]=te,G=F;else break e}}function n(oe){return oe.length===0?null:oe[0]}function r(oe){if(oe.length===0)return null;var _e=oe[0],G=oe.pop();if(G!==_e){oe[0]=G;e:for(var F=0,te=oe.length,X=te>>>1;F<X;){var A=2*(F+1)-1,H=oe[A],ae=A+1,ge=oe[ae];if(0>i(H,G))ae<te&&0>i(ge,H)?(oe[F]=ge,oe[ae]=G,F=ae):(oe[F]=H,oe[A]=G,F=A);else if(ae<te&&0>i(ge,G))oe[F]=ge,oe[ae]=G,F=ae;else break e}}return _e}function i(oe,_e){var G=oe.sortIndex-_e.sortIndex;return G!==0?G:oe.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var c=[],d=[],h=1,v=null,y=3,g=!1,w=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(oe){for(var _e=n(d);_e!==null;){if(_e.callback===null)r(d);else if(_e.startTime<=oe)r(d),_e.sortIndex=_e.expirationTime,t(c,_e);else break;_e=n(d)}}function N(oe){if(x=!1,P(oe),!w)if(n(c)!==null)w=!0,qe(T);else{var _e=n(d);_e!==null&&We(N,_e.startTime-oe)}}function T(oe,_e){w=!1,x&&(x=!1,S(re),re=-1),g=!0;var G=y;try{for(P(_e),v=n(c);v!==null&&(!(v.expirationTime>_e)||oe&&!ce());){var F=v.callback;if(typeof F=="function"){v.callback=null,y=v.priorityLevel;var te=F(v.expirationTime<=_e);_e=e.unstable_now(),typeof te=="function"?v.callback=te:v===n(c)&&r(c),P(_e)}else r(c);v=n(c)}if(v!==null)var X=!0;else{var A=n(d);A!==null&&We(N,A.startTime-_e),X=!1}return X}finally{v=null,y=G,g=!1}}var U=!1,W=null,re=-1,pe=5,he=-1;function ce(){return!(e.unstable_now()-he<pe)}function fe(){if(W!==null){var oe=e.unstable_now();he=oe;var _e=!0;try{_e=W(!0,oe)}finally{_e?xe():(U=!1,W=null)}}else U=!1}var xe;if(typeof E=="function")xe=function(){E(fe)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Le=Ce.port2;Ce.port1.onmessage=fe,xe=function(){Le.postMessage(null)}}else xe=function(){C(fe,0)};function qe(oe){W=oe,U||(U=!0,xe())}function We(oe,_e){re=C(function(){oe(e.unstable_now())},_e)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(oe){oe.callback=null},e.unstable_continueExecution=function(){w||g||(w=!0,qe(T))},e.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pe=0<oe?Math.floor(1e3/oe):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(oe){switch(y){case 1:case 2:case 3:var _e=3;break;default:_e=y}var G=y;y=_e;try{return oe()}finally{y=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(oe,_e){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var G=y;y=oe;try{return _e()}finally{y=G}},e.unstable_scheduleCallback=function(oe,_e,G){var F=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?F+G:F):G=F,oe){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=G+te,oe={id:h++,callback:_e,priorityLevel:oe,startTime:G,expirationTime:te,sortIndex:-1},G>F?(oe.sortIndex=G,t(d,oe),n(c)===null&&oe===n(d)&&(x?(S(re),re=-1):x=!0,We(N,G-F))):(oe.sortIndex=te,t(c,oe),w||g||(w=!0,qe(T))),oe},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(oe){var _e=y;return function(){var G=y;y=_e;try{return oe.apply(this,arguments)}finally{y=G}}}})(XC);VC.exports=XC;var oF=VC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sF=J,_i=oF;function ke(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var QC=new Set,qd={};function _l(e,t){Bc(e,t),Bc(e+"Capture",t)}function Bc(e,t){for(qd[e]=t,e=0;e<t.length;e++)QC.add(t[e])}var Bo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fw=Object.prototype.hasOwnProperty,uF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gE={},yE={};function lF(e){return fw.call(yE,e)?!0:fw.call(gE,e)?!1:uF.test(e)?yE[e]=!0:(gE[e]=!0,!1)}function cF(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fF(e,t,n,r){if(t===null||typeof t>"u"||cF(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Lr(e,t,n,r,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var or={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){or[e]=new Lr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];or[t]=new Lr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){or[e]=new Lr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){or[e]=new Lr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){or[e]=new Lr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){or[e]=new Lr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){or[e]=new Lr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){or[e]=new Lr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){or[e]=new Lr(e,5,!1,e.toLowerCase(),null,!1,!1)});var tb=/[\-:]([a-z])/g;function nb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(tb,nb);or[t]=new Lr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(tb,nb);or[t]=new Lr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(tb,nb);or[t]=new Lr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){or[e]=new Lr(e,1,!1,e.toLowerCase(),null,!1,!1)});or.xlinkHref=new Lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){or[e]=new Lr(e,1,!1,e.toLowerCase(),null,!0,!0)});function rb(e,t,n,r){var i=or.hasOwnProperty(t)?or[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(fF(t,n,i,r)&&(n=null),r||i===null?lF(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Go=sF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tm=Symbol.for("react.element"),uc=Symbol.for("react.portal"),lc=Symbol.for("react.fragment"),ib=Symbol.for("react.strict_mode"),dw=Symbol.for("react.profiler"),GC=Symbol.for("react.provider"),JC=Symbol.for("react.context"),ab=Symbol.for("react.forward_ref"),hw=Symbol.for("react.suspense"),pw=Symbol.for("react.suspense_list"),ob=Symbol.for("react.memo"),bs=Symbol.for("react.lazy"),ZC=Symbol.for("react.offscreen"),wE=Symbol.iterator;function td(e){return e===null||typeof e!="object"?null:(e=wE&&e[wE]||e["@@iterator"],typeof e=="function"?e:null)}var nn=Object.assign,t0;function gd(e){if(t0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);t0=t&&t[1]||""}return`
`+t0+e}var n0=!1;function r0(e,t){if(!e||n0)return"";n0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,u=a.length-1;1<=s&&0<=u&&i[s]!==a[u];)u--;for(;1<=s&&0<=u;s--,u--)if(i[s]!==a[u]){if(s!==1||u!==1)do if(s--,u--,0>u||i[s]!==a[u]){var c=`
`+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=u);break}}}finally{n0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?gd(e):""}function dF(e){switch(e.tag){case 5:return gd(e.type);case 16:return gd("Lazy");case 13:return gd("Suspense");case 19:return gd("SuspenseList");case 0:case 2:case 15:return e=r0(e.type,!1),e;case 11:return e=r0(e.type.render,!1),e;case 1:return e=r0(e.type,!0),e;default:return""}}function mw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case lc:return"Fragment";case uc:return"Portal";case dw:return"Profiler";case ib:return"StrictMode";case hw:return"Suspense";case pw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case JC:return(e.displayName||"Context")+".Consumer";case GC:return(e._context.displayName||"Context")+".Provider";case ab:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ob:return t=e.displayName||null,t!==null?t:mw(e.type)||"Memo";case bs:t=e._payload,e=e._init;try{return mw(e(t))}catch{}}return null}function hF(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mw(t);case 8:return t===ib?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function eD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pF(e){var t=eD(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function nm(e){e._valueTracker||(e._valueTracker=pF(e))}function tD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=eD(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function uv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vw(e,t){var n=t.checked;return nn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function _E(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Vs(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function nD(e,t){t=t.checked,t!=null&&rb(e,"checked",t,!1)}function gw(e,t){nD(e,t);var n=Vs(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?yw(e,t.type,n):t.hasOwnProperty("defaultValue")&&yw(e,t.type,Vs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function yw(e,t,n){(t!=="number"||uv(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var yd=Array.isArray;function Sc(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Vs(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ww(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ke(91));return nn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function SE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ke(92));if(yd(n)){if(1<n.length)throw Error(ke(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Vs(n)}}function rD(e,t){var n=Vs(t.value),r=Vs(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function xE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function iD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _w(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?iD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var rm,aD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(rm=rm||document.createElement("div"),rm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yd(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ed={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mF=["Webkit","ms","Moz","O"];Object.keys(Ed).forEach(function(e){mF.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ed[t]=Ed[e]})});function oD(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ed.hasOwnProperty(e)&&Ed[e]?(""+t).trim():t+"px"}function sD(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=oD(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var vF=nn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bw(e,t){if(t){if(vF[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ke(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ke(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ke(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ke(62))}}function Sw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xw=null;function sb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ew=null,xc=null,Ec=null;function EE(e){if(e=Ah(e)){if(typeof Ew!="function")throw Error(ke(280));var t=e.stateNode;t&&(t=hg(t),Ew(e.stateNode,e.type,t))}}function uD(e){xc?Ec?Ec.push(e):Ec=[e]:xc=e}function lD(){if(xc){var e=xc,t=Ec;if(Ec=xc=null,EE(e),t)for(e=0;e<t.length;e++)EE(t[e])}}function cD(e,t){return e(t)}function fD(){}var i0=!1;function dD(e,t,n){if(i0)return e(t,n);i0=!0;try{return cD(e,t,n)}finally{i0=!1,(xc!==null||Ec!==null)&&(fD(),lD())}}function Vd(e,t){var n=e.stateNode;if(n===null)return null;var r=hg(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ke(231,t,typeof n));return n}var Pw=!1;if(Bo)try{var nd={};Object.defineProperty(nd,"passive",{get:function(){Pw=!0}}),window.addEventListener("test",nd,nd),window.removeEventListener("test",nd,nd)}catch{Pw=!1}function gF(e,t,n,r,i,a,s,u,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(h){this.onError(h)}}var Pd=!1,lv=null,cv=!1,kw=null,yF={onError:function(e){Pd=!0,lv=e}};function wF(e,t,n,r,i,a,s,u,c){Pd=!1,lv=null,gF.apply(yF,arguments)}function _F(e,t,n,r,i,a,s,u,c){if(wF.apply(this,arguments),Pd){if(Pd){var d=lv;Pd=!1,lv=null}else throw Error(ke(198));cv||(cv=!0,kw=d)}}function bl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function hD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function PE(e){if(bl(e)!==e)throw Error(ke(188))}function bF(e){var t=e.alternate;if(!t){if(t=bl(e),t===null)throw Error(ke(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return PE(i),e;if(a===r)return PE(i),t;a=a.sibling}throw Error(ke(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(ke(189))}}if(n.alternate!==r)throw Error(ke(190))}if(n.tag!==3)throw Error(ke(188));return n.stateNode.current===n?e:t}function pD(e){return e=bF(e),e!==null?mD(e):null}function mD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=mD(e);if(t!==null)return t;e=e.sibling}return null}var vD=_i.unstable_scheduleCallback,kE=_i.unstable_cancelCallback,SF=_i.unstable_shouldYield,xF=_i.unstable_requestPaint,wn=_i.unstable_now,EF=_i.unstable_getCurrentPriorityLevel,ub=_i.unstable_ImmediatePriority,gD=_i.unstable_UserBlockingPriority,fv=_i.unstable_NormalPriority,PF=_i.unstable_LowPriority,yD=_i.unstable_IdlePriority,lg=null,eo=null;function kF(e){if(eo&&typeof eo.onCommitFiberRoot=="function")try{eo.onCommitFiberRoot(lg,e,void 0,(e.current.flags&128)===128)}catch{}}var Pa=Math.clz32?Math.clz32:OF,CF=Math.log,DF=Math.LN2;function OF(e){return e>>>=0,e===0?32:31-(CF(e)/DF|0)|0}var im=64,am=4194304;function wd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dv(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=n&268435455;if(s!==0){var u=s&~i;u!==0?r=wd(u):(a&=s,a!==0&&(r=wd(a)))}else s=n&~i,s!==0?r=wd(s):a!==0&&(r=wd(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Pa(t),i=1<<n,r|=e[n],t&=~i;return r}function $F(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RF(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Pa(a),u=1<<s,c=i[s];c===-1?(!(u&n)||u&r)&&(i[s]=$F(u,t)):c<=t&&(e.expiredLanes|=u),a&=~u}}function Cw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wD(){var e=im;return im<<=1,!(im&4194240)&&(im=64),e}function a0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Mh(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pa(t),e[t]=n}function NF(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Pa(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function lb(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Pa(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ot=0;function _D(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var bD,cb,SD,xD,ED,Dw=!1,om=[],js=null,Ls=null,zs=null,Xd=new Map,Qd=new Map,Ps=[],TF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function CE(e,t){switch(e){case"focusin":case"focusout":js=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":Xd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qd.delete(t.pointerId)}}function rd(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Ah(t),t!==null&&cb(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function MF(e,t,n,r,i){switch(t){case"focusin":return js=rd(js,e,t,n,r,i),!0;case"dragenter":return Ls=rd(Ls,e,t,n,r,i),!0;case"mouseover":return zs=rd(zs,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Xd.set(a,rd(Xd.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Qd.set(a,rd(Qd.get(a)||null,e,t,n,r,i)),!0}return!1}function PD(e){var t=Gu(e.target);if(t!==null){var n=bl(t);if(n!==null){if(t=n.tag,t===13){if(t=hD(n),t!==null){e.blockedOn=t,ED(e.priority,function(){SD(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ow(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);xw=r,n.target.dispatchEvent(r),xw=null}else return t=Ah(n),t!==null&&cb(t),e.blockedOn=n,!1;t.shift()}return!0}function DE(e,t,n){zm(e)&&n.delete(t)}function IF(){Dw=!1,js!==null&&zm(js)&&(js=null),Ls!==null&&zm(Ls)&&(Ls=null),zs!==null&&zm(zs)&&(zs=null),Xd.forEach(DE),Qd.forEach(DE)}function id(e,t){e.blockedOn===t&&(e.blockedOn=null,Dw||(Dw=!0,_i.unstable_scheduleCallback(_i.unstable_NormalPriority,IF)))}function Gd(e){function t(i){return id(i,e)}if(0<om.length){id(om[0],e);for(var n=1;n<om.length;n++){var r=om[n];r.blockedOn===e&&(r.blockedOn=null)}}for(js!==null&&id(js,e),Ls!==null&&id(Ls,e),zs!==null&&id(zs,e),Xd.forEach(t),Qd.forEach(t),n=0;n<Ps.length;n++)r=Ps[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ps.length&&(n=Ps[0],n.blockedOn===null);)PD(n),n.blockedOn===null&&Ps.shift()}var Pc=Go.ReactCurrentBatchConfig,hv=!0;function AF(e,t,n,r){var i=Ot,a=Pc.transition;Pc.transition=null;try{Ot=1,fb(e,t,n,r)}finally{Ot=i,Pc.transition=a}}function jF(e,t,n,r){var i=Ot,a=Pc.transition;Pc.transition=null;try{Ot=4,fb(e,t,n,r)}finally{Ot=i,Pc.transition=a}}function fb(e,t,n,r){if(hv){var i=Ow(e,t,n,r);if(i===null)m0(e,t,r,pv,n),CE(e,r);else if(MF(i,e,t,n,r))r.stopPropagation();else if(CE(e,r),t&4&&-1<TF.indexOf(e)){for(;i!==null;){var a=Ah(i);if(a!==null&&bD(a),a=Ow(e,t,n,r),a===null&&m0(e,t,r,pv,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else m0(e,t,r,null,n)}}var pv=null;function Ow(e,t,n,r){if(pv=null,e=sb(r),e=Gu(e),e!==null)if(t=bl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=hD(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return pv=e,null}function kD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EF()){case ub:return 1;case gD:return 4;case fv:case PF:return 16;case yD:return 536870912;default:return 16}default:return 16}}var $s=null,db=null,Fm=null;function CD(){if(Fm)return Fm;var e,t=db,n=t.length,r,i="value"in $s?$s.value:$s.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[a-r];r++);return Fm=i.slice(e,1<r?1-r:void 0)}function Bm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function sm(){return!0}function OE(){return!1}function Pi(e){function t(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(a):a[u]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?sm:OE,this.isPropagationStopped=OE,this}return nn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sm)},persist:function(){},isPersistent:sm}),t}var uf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hb=Pi(uf),Ih=nn({},uf,{view:0,detail:0}),LF=Pi(Ih),o0,s0,ad,cg=nn({},Ih,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pb,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ad&&(ad&&e.type==="mousemove"?(o0=e.screenX-ad.screenX,s0=e.screenY-ad.screenY):s0=o0=0,ad=e),o0)},movementY:function(e){return"movementY"in e?e.movementY:s0}}),$E=Pi(cg),zF=nn({},cg,{dataTransfer:0}),FF=Pi(zF),BF=nn({},Ih,{relatedTarget:0}),u0=Pi(BF),WF=nn({},uf,{animationName:0,elapsedTime:0,pseudoElement:0}),UF=Pi(WF),HF=nn({},uf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),KF=Pi(HF),qF=nn({},uf,{data:0}),RE=Pi(qF),YF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=XF[e])?!!t[e]:!1}function pb(){return QF}var GF=nn({},Ih,{key:function(e){if(e.key){var t=YF[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?VF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pb,charCode:function(e){return e.type==="keypress"?Bm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),JF=Pi(GF),ZF=nn({},cg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),NE=Pi(ZF),e4=nn({},Ih,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pb}),t4=Pi(e4),n4=nn({},uf,{propertyName:0,elapsedTime:0,pseudoElement:0}),r4=Pi(n4),i4=nn({},cg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),a4=Pi(i4),o4=[9,13,27,32],mb=Bo&&"CompositionEvent"in window,kd=null;Bo&&"documentMode"in document&&(kd=document.documentMode);var s4=Bo&&"TextEvent"in window&&!kd,DD=Bo&&(!mb||kd&&8<kd&&11>=kd),TE=String.fromCharCode(32),ME=!1;function OD(e,t){switch(e){case"keyup":return o4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $D(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cc=!1;function u4(e,t){switch(e){case"compositionend":return $D(t);case"keypress":return t.which!==32?null:(ME=!0,TE);case"textInput":return e=t.data,e===TE&&ME?null:e;default:return null}}function l4(e,t){if(cc)return e==="compositionend"||!mb&&OD(e,t)?(e=CD(),Fm=db=$s=null,cc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return DD&&t.locale!=="ko"?null:t.data;default:return null}}var c4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function IE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!c4[e.type]:t==="textarea"}function RD(e,t,n,r){uD(r),t=mv(t,"onChange"),0<t.length&&(n=new hb("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Cd=null,Jd=null;function f4(e){WD(e,0)}function fg(e){var t=hc(e);if(tD(t))return e}function d4(e,t){if(e==="change")return t}var ND=!1;if(Bo){var l0;if(Bo){var c0="oninput"in document;if(!c0){var AE=document.createElement("div");AE.setAttribute("oninput","return;"),c0=typeof AE.oninput=="function"}l0=c0}else l0=!1;ND=l0&&(!document.documentMode||9<document.documentMode)}function jE(){Cd&&(Cd.detachEvent("onpropertychange",TD),Jd=Cd=null)}function TD(e){if(e.propertyName==="value"&&fg(Jd)){var t=[];RD(t,Jd,e,sb(e)),dD(f4,t)}}function h4(e,t,n){e==="focusin"?(jE(),Cd=t,Jd=n,Cd.attachEvent("onpropertychange",TD)):e==="focusout"&&jE()}function p4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fg(Jd)}function m4(e,t){if(e==="click")return fg(t)}function v4(e,t){if(e==="input"||e==="change")return fg(t)}function g4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Oa=typeof Object.is=="function"?Object.is:g4;function Zd(e,t){if(Oa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!fw.call(t,i)||!Oa(e[i],t[i]))return!1}return!0}function LE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zE(e,t){var n=LE(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=LE(n)}}function MD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?MD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ID(){for(var e=window,t=uv();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=uv(e.document)}return t}function vb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function y4(e){var t=ID(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&MD(n.ownerDocument.documentElement,n)){if(r!==null&&vb(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=zE(n,a);var s=zE(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var w4=Bo&&"documentMode"in document&&11>=document.documentMode,fc=null,$w=null,Dd=null,Rw=!1;function FE(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rw||fc==null||fc!==uv(r)||(r=fc,"selectionStart"in r&&vb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Dd&&Zd(Dd,r)||(Dd=r,r=mv($w,"onSelect"),0<r.length&&(t=new hb("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fc)))}function um(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var dc={animationend:um("Animation","AnimationEnd"),animationiteration:um("Animation","AnimationIteration"),animationstart:um("Animation","AnimationStart"),transitionend:um("Transition","TransitionEnd")},f0={},AD={};Bo&&(AD=document.createElement("div").style,"AnimationEvent"in window||(delete dc.animationend.animation,delete dc.animationiteration.animation,delete dc.animationstart.animation),"TransitionEvent"in window||delete dc.transitionend.transition);function dg(e){if(f0[e])return f0[e];if(!dc[e])return e;var t=dc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in AD)return f0[e]=t[n];return e}var jD=dg("animationend"),LD=dg("animationiteration"),zD=dg("animationstart"),FD=dg("transitionend"),BD=new Map,BE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nu(e,t){BD.set(e,t),_l(t,[e])}for(var d0=0;d0<BE.length;d0++){var h0=BE[d0],_4=h0.toLowerCase(),b4=h0[0].toUpperCase()+h0.slice(1);nu(_4,"on"+b4)}nu(jD,"onAnimationEnd");nu(LD,"onAnimationIteration");nu(zD,"onAnimationStart");nu("dblclick","onDoubleClick");nu("focusin","onFocus");nu("focusout","onBlur");nu(FD,"onTransitionEnd");Bc("onMouseEnter",["mouseout","mouseover"]);Bc("onMouseLeave",["mouseout","mouseover"]);Bc("onPointerEnter",["pointerout","pointerover"]);Bc("onPointerLeave",["pointerout","pointerover"]);_l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_l("onBeforeInput",["compositionend","keypress","textInput","paste"]);_l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _d="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S4=new Set("cancel close invalid load scroll toggle".split(" ").concat(_d));function WE(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,_F(r,t,void 0,e),e.currentTarget=null}function WD(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var u=r[s],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==a&&i.isPropagationStopped())break e;WE(i,u,d),a=c}else for(s=0;s<r.length;s++){if(u=r[s],c=u.instance,d=u.currentTarget,u=u.listener,c!==a&&i.isPropagationStopped())break e;WE(i,u,d),a=c}}}if(cv)throw e=kw,cv=!1,kw=null,e}function Ut(e,t){var n=t[Aw];n===void 0&&(n=t[Aw]=new Set);var r=e+"__bubble";n.has(r)||(UD(t,e,2,!1),n.add(r))}function p0(e,t,n){var r=0;t&&(r|=4),UD(n,e,r,t)}var lm="_reactListening"+Math.random().toString(36).slice(2);function eh(e){if(!e[lm]){e[lm]=!0,QC.forEach(function(n){n!=="selectionchange"&&(S4.has(n)||p0(n,!1,e),p0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[lm]||(t[lm]=!0,p0("selectionchange",!1,t))}}function UD(e,t,n,r){switch(kD(t)){case 1:var i=AF;break;case 4:i=jF;break;default:i=fb}n=i.bind(null,t,n,e),i=void 0,!Pw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function m0(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;u!==null;){if(s=Gu(u),s===null)return;if(c=s.tag,c===5||c===6){r=a=s;continue e}u=u.parentNode}}r=r.return}dD(function(){var d=a,h=sb(n),v=[];e:{var y=BD.get(e);if(y!==void 0){var g=hb,w=e;switch(e){case"keypress":if(Bm(n)===0)break e;case"keydown":case"keyup":g=JF;break;case"focusin":w="focus",g=u0;break;case"focusout":w="blur",g=u0;break;case"beforeblur":case"afterblur":g=u0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=$E;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=FF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=t4;break;case jD:case LD:case zD:g=UF;break;case FD:g=r4;break;case"scroll":g=LF;break;case"wheel":g=a4;break;case"copy":case"cut":case"paste":g=KF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=NE}var x=(t&4)!==0,C=!x&&e==="scroll",S=x?y!==null?y+"Capture":null:y;x=[];for(var E=d,P;E!==null;){P=E;var N=P.stateNode;if(P.tag===5&&N!==null&&(P=N,S!==null&&(N=Vd(E,S),N!=null&&x.push(th(E,N,P)))),C)break;E=E.return}0<x.length&&(y=new g(y,w,null,n,h),v.push({event:y,listeners:x}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",y&&n!==xw&&(w=n.relatedTarget||n.fromElement)&&(Gu(w)||w[Wo]))break e;if((g||y)&&(y=h.window===h?h:(y=h.ownerDocument)?y.defaultView||y.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=d,w=w?Gu(w):null,w!==null&&(C=bl(w),w!==C||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=d),g!==w)){if(x=$E,N="onMouseLeave",S="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(x=NE,N="onPointerLeave",S="onPointerEnter",E="pointer"),C=g==null?y:hc(g),P=w==null?y:hc(w),y=new x(N,E+"leave",g,n,h),y.target=C,y.relatedTarget=P,N=null,Gu(h)===d&&(x=new x(S,E+"enter",w,n,h),x.target=P,x.relatedTarget=C,N=x),C=N,g&&w)t:{for(x=g,S=w,E=0,P=x;P;P=Jl(P))E++;for(P=0,N=S;N;N=Jl(N))P++;for(;0<E-P;)x=Jl(x),E--;for(;0<P-E;)S=Jl(S),P--;for(;E--;){if(x===S||S!==null&&x===S.alternate)break t;x=Jl(x),S=Jl(S)}x=null}else x=null;g!==null&&UE(v,y,g,x,!1),w!==null&&C!==null&&UE(v,C,w,x,!0)}}e:{if(y=d?hc(d):window,g=y.nodeName&&y.nodeName.toLowerCase(),g==="select"||g==="input"&&y.type==="file")var T=d4;else if(IE(y))if(ND)T=v4;else{T=p4;var U=h4}else(g=y.nodeName)&&g.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(T=m4);if(T&&(T=T(e,d))){RD(v,T,n,h);break e}U&&U(e,y,d),e==="focusout"&&(U=y._wrapperState)&&U.controlled&&y.type==="number"&&yw(y,"number",y.value)}switch(U=d?hc(d):window,e){case"focusin":(IE(U)||U.contentEditable==="true")&&(fc=U,$w=d,Dd=null);break;case"focusout":Dd=$w=fc=null;break;case"mousedown":Rw=!0;break;case"contextmenu":case"mouseup":case"dragend":Rw=!1,FE(v,n,h);break;case"selectionchange":if(w4)break;case"keydown":case"keyup":FE(v,n,h)}var W;if(mb)e:{switch(e){case"compositionstart":var re="onCompositionStart";break e;case"compositionend":re="onCompositionEnd";break e;case"compositionupdate":re="onCompositionUpdate";break e}re=void 0}else cc?OD(e,n)&&(re="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(re="onCompositionStart");re&&(DD&&n.locale!=="ko"&&(cc||re!=="onCompositionStart"?re==="onCompositionEnd"&&cc&&(W=CD()):($s=h,db="value"in $s?$s.value:$s.textContent,cc=!0)),U=mv(d,re),0<U.length&&(re=new RE(re,e,null,n,h),v.push({event:re,listeners:U}),W?re.data=W:(W=$D(n),W!==null&&(re.data=W)))),(W=s4?u4(e,n):l4(e,n))&&(d=mv(d,"onBeforeInput"),0<d.length&&(h=new RE("onBeforeInput","beforeinput",null,n,h),v.push({event:h,listeners:d}),h.data=W))}WD(v,t)})}function th(e,t,n){return{instance:e,listener:t,currentTarget:n}}function mv(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Vd(e,n),a!=null&&r.unshift(th(e,a,i)),a=Vd(e,t),a!=null&&r.push(th(e,a,i))),e=e.return}return r}function Jl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function UE(e,t,n,r,i){for(var a=t._reactName,s=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,i?(c=Vd(n,a),c!=null&&s.unshift(th(n,c,u))):i||(c=Vd(n,a),c!=null&&s.push(th(n,c,u)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var x4=/\r\n?/g,E4=/\u0000|\uFFFD/g;function HE(e){return(typeof e=="string"?e:""+e).replace(x4,`
`).replace(E4,"")}function cm(e,t,n){if(t=HE(t),HE(e)!==t&&n)throw Error(ke(425))}function vv(){}var Nw=null,Tw=null;function Mw(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Iw=typeof setTimeout=="function"?setTimeout:void 0,P4=typeof clearTimeout=="function"?clearTimeout:void 0,KE=typeof Promise=="function"?Promise:void 0,k4=typeof queueMicrotask=="function"?queueMicrotask:typeof KE<"u"?function(e){return KE.resolve(null).then(e).catch(C4)}:Iw;function C4(e){setTimeout(function(){throw e})}function v0(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Gd(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Gd(t)}function Fs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var lf=Math.random().toString(36).slice(2),Ya="__reactFiber$"+lf,nh="__reactProps$"+lf,Wo="__reactContainer$"+lf,Aw="__reactEvents$"+lf,D4="__reactListeners$"+lf,O4="__reactHandles$"+lf;function Gu(e){var t=e[Ya];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Wo]||n[Ya]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=qE(e);e!==null;){if(n=e[Ya])return n;e=qE(e)}return t}e=n,n=e.parentNode}return null}function Ah(e){return e=e[Ya]||e[Wo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ke(33))}function hg(e){return e[nh]||null}var jw=[],pc=-1;function ru(e){return{current:e}}function Kt(e){0>pc||(e.current=jw[pc],jw[pc]=null,pc--)}function Bt(e,t){pc++,jw[pc]=e.current,e.current=t}var Xs={},Sr=ru(Xs),ti=ru(!1),cl=Xs;function Wc(e,t){var n=e.type.contextTypes;if(!n)return Xs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ni(e){return e=e.childContextTypes,e!=null}function gv(){Kt(ti),Kt(Sr)}function YE(e,t,n){if(Sr.current!==Xs)throw Error(ke(168));Bt(Sr,t),Bt(ti,n)}function HD(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ke(108,hF(e)||"Unknown",i));return nn({},n,r)}function yv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xs,cl=Sr.current,Bt(Sr,e),Bt(ti,ti.current),!0}function VE(e,t,n){var r=e.stateNode;if(!r)throw Error(ke(169));n?(e=HD(e,t,cl),r.__reactInternalMemoizedMergedChildContext=e,Kt(ti),Kt(Sr),Bt(Sr,e)):Kt(ti),Bt(ti,n)}var Co=null,pg=!1,g0=!1;function KD(e){Co===null?Co=[e]:Co.push(e)}function $4(e){pg=!0,KD(e)}function iu(){if(!g0&&Co!==null){g0=!0;var e=0,t=Ot;try{var n=Co;for(Ot=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Co=null,pg=!1}catch(i){throw Co!==null&&(Co=Co.slice(e+1)),vD(ub,iu),i}finally{Ot=t,g0=!1}}return null}var mc=[],vc=0,wv=null,_v=0,qi=[],Yi=0,fl=null,No=1,To="";function Wu(e,t){mc[vc++]=_v,mc[vc++]=wv,wv=e,_v=t}function qD(e,t,n){qi[Yi++]=No,qi[Yi++]=To,qi[Yi++]=fl,fl=e;var r=No;e=To;var i=32-Pa(r)-1;r&=~(1<<i),n+=1;var a=32-Pa(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,No=1<<32-Pa(t)+i|n<<i|r,To=a+e}else No=1<<a|n<<i|r,To=e}function gb(e){e.return!==null&&(Wu(e,1),qD(e,1,0))}function yb(e){for(;e===wv;)wv=mc[--vc],mc[vc]=null,_v=mc[--vc],mc[vc]=null;for(;e===fl;)fl=qi[--Yi],qi[Yi]=null,To=qi[--Yi],qi[Yi]=null,No=qi[--Yi],qi[Yi]=null}var yi=null,gi=null,Vt=!1,Sa=null;function YD(e,t){var n=Xi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function XE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yi=e,gi=Fs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yi=e,gi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=fl!==null?{id:No,overflow:To}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Xi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,yi=e,gi=null,!0):!1;default:return!1}}function Lw(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zw(e){if(Vt){var t=gi;if(t){var n=t;if(!XE(e,t)){if(Lw(e))throw Error(ke(418));t=Fs(n.nextSibling);var r=yi;t&&XE(e,t)?YD(r,n):(e.flags=e.flags&-4097|2,Vt=!1,yi=e)}}else{if(Lw(e))throw Error(ke(418));e.flags=e.flags&-4097|2,Vt=!1,yi=e}}}function QE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yi=e}function fm(e){if(e!==yi)return!1;if(!Vt)return QE(e),Vt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mw(e.type,e.memoizedProps)),t&&(t=gi)){if(Lw(e))throw VD(),Error(ke(418));for(;t;)YD(e,t),t=Fs(t.nextSibling)}if(QE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ke(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){gi=Fs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}gi=null}}else gi=yi?Fs(e.stateNode.nextSibling):null;return!0}function VD(){for(var e=gi;e;)e=Fs(e.nextSibling)}function Uc(){gi=yi=null,Vt=!1}function wb(e){Sa===null?Sa=[e]:Sa.push(e)}var R4=Go.ReactCurrentBatchConfig;function od(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ke(309));var r=n.stateNode}if(!r)throw Error(ke(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var u=i.refs;s===null?delete u[a]:u[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(ke(284));if(!n._owner)throw Error(ke(290,e))}return e}function dm(e,t){throw e=Object.prototype.toString.call(t),Error(ke(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function GE(e){var t=e._init;return t(e._payload)}function XD(e){function t(S,E){if(e){var P=S.deletions;P===null?(S.deletions=[E],S.flags|=16):P.push(E)}}function n(S,E){if(!e)return null;for(;E!==null;)t(S,E),E=E.sibling;return null}function r(S,E){for(S=new Map;E!==null;)E.key!==null?S.set(E.key,E):S.set(E.index,E),E=E.sibling;return S}function i(S,E){return S=Hs(S,E),S.index=0,S.sibling=null,S}function a(S,E,P){return S.index=P,e?(P=S.alternate,P!==null?(P=P.index,P<E?(S.flags|=2,E):P):(S.flags|=2,E)):(S.flags|=1048576,E)}function s(S){return e&&S.alternate===null&&(S.flags|=2),S}function u(S,E,P,N){return E===null||E.tag!==6?(E=E0(P,S.mode,N),E.return=S,E):(E=i(E,P),E.return=S,E)}function c(S,E,P,N){var T=P.type;return T===lc?h(S,E,P.props.children,N,P.key):E!==null&&(E.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===bs&&GE(T)===E.type)?(N=i(E,P.props),N.ref=od(S,E,P),N.return=S,N):(N=Vm(P.type,P.key,P.props,null,S.mode,N),N.ref=od(S,E,P),N.return=S,N)}function d(S,E,P,N){return E===null||E.tag!==4||E.stateNode.containerInfo!==P.containerInfo||E.stateNode.implementation!==P.implementation?(E=P0(P,S.mode,N),E.return=S,E):(E=i(E,P.children||[]),E.return=S,E)}function h(S,E,P,N,T){return E===null||E.tag!==7?(E=al(P,S.mode,N,T),E.return=S,E):(E=i(E,P),E.return=S,E)}function v(S,E,P){if(typeof E=="string"&&E!==""||typeof E=="number")return E=E0(""+E,S.mode,P),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case tm:return P=Vm(E.type,E.key,E.props,null,S.mode,P),P.ref=od(S,null,E),P.return=S,P;case uc:return E=P0(E,S.mode,P),E.return=S,E;case bs:var N=E._init;return v(S,N(E._payload),P)}if(yd(E)||td(E))return E=al(E,S.mode,P,null),E.return=S,E;dm(S,E)}return null}function y(S,E,P,N){var T=E!==null?E.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return T!==null?null:u(S,E,""+P,N);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case tm:return P.key===T?c(S,E,P,N):null;case uc:return P.key===T?d(S,E,P,N):null;case bs:return T=P._init,y(S,E,T(P._payload),N)}if(yd(P)||td(P))return T!==null?null:h(S,E,P,N,null);dm(S,P)}return null}function g(S,E,P,N,T){if(typeof N=="string"&&N!==""||typeof N=="number")return S=S.get(P)||null,u(E,S,""+N,T);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case tm:return S=S.get(N.key===null?P:N.key)||null,c(E,S,N,T);case uc:return S=S.get(N.key===null?P:N.key)||null,d(E,S,N,T);case bs:var U=N._init;return g(S,E,P,U(N._payload),T)}if(yd(N)||td(N))return S=S.get(P)||null,h(E,S,N,T,null);dm(E,N)}return null}function w(S,E,P,N){for(var T=null,U=null,W=E,re=E=0,pe=null;W!==null&&re<P.length;re++){W.index>re?(pe=W,W=null):pe=W.sibling;var he=y(S,W,P[re],N);if(he===null){W===null&&(W=pe);break}e&&W&&he.alternate===null&&t(S,W),E=a(he,E,re),U===null?T=he:U.sibling=he,U=he,W=pe}if(re===P.length)return n(S,W),Vt&&Wu(S,re),T;if(W===null){for(;re<P.length;re++)W=v(S,P[re],N),W!==null&&(E=a(W,E,re),U===null?T=W:U.sibling=W,U=W);return Vt&&Wu(S,re),T}for(W=r(S,W);re<P.length;re++)pe=g(W,S,re,P[re],N),pe!==null&&(e&&pe.alternate!==null&&W.delete(pe.key===null?re:pe.key),E=a(pe,E,re),U===null?T=pe:U.sibling=pe,U=pe);return e&&W.forEach(function(ce){return t(S,ce)}),Vt&&Wu(S,re),T}function x(S,E,P,N){var T=td(P);if(typeof T!="function")throw Error(ke(150));if(P=T.call(P),P==null)throw Error(ke(151));for(var U=T=null,W=E,re=E=0,pe=null,he=P.next();W!==null&&!he.done;re++,he=P.next()){W.index>re?(pe=W,W=null):pe=W.sibling;var ce=y(S,W,he.value,N);if(ce===null){W===null&&(W=pe);break}e&&W&&ce.alternate===null&&t(S,W),E=a(ce,E,re),U===null?T=ce:U.sibling=ce,U=ce,W=pe}if(he.done)return n(S,W),Vt&&Wu(S,re),T;if(W===null){for(;!he.done;re++,he=P.next())he=v(S,he.value,N),he!==null&&(E=a(he,E,re),U===null?T=he:U.sibling=he,U=he);return Vt&&Wu(S,re),T}for(W=r(S,W);!he.done;re++,he=P.next())he=g(W,S,re,he.value,N),he!==null&&(e&&he.alternate!==null&&W.delete(he.key===null?re:he.key),E=a(he,E,re),U===null?T=he:U.sibling=he,U=he);return e&&W.forEach(function(fe){return t(S,fe)}),Vt&&Wu(S,re),T}function C(S,E,P,N){if(typeof P=="object"&&P!==null&&P.type===lc&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case tm:e:{for(var T=P.key,U=E;U!==null;){if(U.key===T){if(T=P.type,T===lc){if(U.tag===7){n(S,U.sibling),E=i(U,P.props.children),E.return=S,S=E;break e}}else if(U.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===bs&&GE(T)===U.type){n(S,U.sibling),E=i(U,P.props),E.ref=od(S,U,P),E.return=S,S=E;break e}n(S,U);break}else t(S,U);U=U.sibling}P.type===lc?(E=al(P.props.children,S.mode,N,P.key),E.return=S,S=E):(N=Vm(P.type,P.key,P.props,null,S.mode,N),N.ref=od(S,E,P),N.return=S,S=N)}return s(S);case uc:e:{for(U=P.key;E!==null;){if(E.key===U)if(E.tag===4&&E.stateNode.containerInfo===P.containerInfo&&E.stateNode.implementation===P.implementation){n(S,E.sibling),E=i(E,P.children||[]),E.return=S,S=E;break e}else{n(S,E);break}else t(S,E);E=E.sibling}E=P0(P,S.mode,N),E.return=S,S=E}return s(S);case bs:return U=P._init,C(S,E,U(P._payload),N)}if(yd(P))return w(S,E,P,N);if(td(P))return x(S,E,P,N);dm(S,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,E!==null&&E.tag===6?(n(S,E.sibling),E=i(E,P),E.return=S,S=E):(n(S,E),E=E0(P,S.mode,N),E.return=S,S=E),s(S)):n(S,E)}return C}var Hc=XD(!0),QD=XD(!1),bv=ru(null),Sv=null,gc=null,_b=null;function bb(){_b=gc=Sv=null}function Sb(e){var t=bv.current;Kt(bv),e._currentValue=t}function Fw(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function kc(e,t){Sv=e,_b=gc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ei=!0),e.firstContext=null)}function Zi(e){var t=e._currentValue;if(_b!==e)if(e={context:e,memoizedValue:t,next:null},gc===null){if(Sv===null)throw Error(ke(308));gc=e,Sv.dependencies={lanes:0,firstContext:e}}else gc=gc.next=e;return t}var Ju=null;function xb(e){Ju===null?Ju=[e]:Ju.push(e)}function GD(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,xb(t)):(n.next=i.next,i.next=n),t.interleaved=n,Uo(e,r)}function Uo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ss=!1;function Eb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JD(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bs(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,wt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Uo(e,n)}return i=r.interleaved,i===null?(t.next=t,xb(r)):(t.next=i.next,i.next=t),r.interleaved=t,Uo(e,n)}function Wm(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,lb(e,n)}}function JE(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function xv(e,t,n,r){var i=e.updateQueue;Ss=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,d=c.next;c.next=null,s===null?a=d:s.next=d,s=c;var h=e.alternate;h!==null&&(h=h.updateQueue,u=h.lastBaseUpdate,u!==s&&(u===null?h.firstBaseUpdate=d:u.next=d,h.lastBaseUpdate=c))}if(a!==null){var v=i.baseState;s=0,h=d=c=null,u=a;do{var y=u.lane,g=u.eventTime;if((r&y)===y){h!==null&&(h=h.next={eventTime:g,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var w=e,x=u;switch(y=t,g=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){v=w.call(g,v,y);break e}v=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,y=typeof w=="function"?w.call(g,v,y):w,y==null)break e;v=nn({},v,y);break e;case 2:Ss=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,y=i.effects,y===null?i.effects=[u]:y.push(u))}else g={eventTime:g,lane:y,tag:u.tag,payload:u.payload,callback:u.callback,next:null},h===null?(d=h=g,c=v):h=h.next=g,s|=y;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;y=u,u=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(1);if(h===null&&(c=v),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);hl|=s,e.lanes=s,e.memoizedState=v}}function ZE(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ke(191,i));i.call(r)}}}var jh={},to=ru(jh),rh=ru(jh),ih=ru(jh);function Zu(e){if(e===jh)throw Error(ke(174));return e}function Pb(e,t){switch(Bt(ih,t),Bt(rh,e),Bt(to,jh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_w(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_w(t,e)}Kt(to),Bt(to,t)}function Kc(){Kt(to),Kt(rh),Kt(ih)}function ZD(e){Zu(ih.current);var t=Zu(to.current),n=_w(t,e.type);t!==n&&(Bt(rh,e),Bt(to,n))}function kb(e){rh.current===e&&(Kt(to),Kt(rh))}var en=ru(0);function Ev(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var y0=[];function Cb(){for(var e=0;e<y0.length;e++)y0[e]._workInProgressVersionPrimary=null;y0.length=0}var Um=Go.ReactCurrentDispatcher,w0=Go.ReactCurrentBatchConfig,dl=0,tn=null,Mn=null,Un=null,Pv=!1,Od=!1,ah=0,N4=0;function vr(){throw Error(ke(321))}function Db(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Oa(e[n],t[n]))return!1;return!0}function Ob(e,t,n,r,i,a){if(dl=a,tn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Um.current=e===null||e.memoizedState===null?A4:j4,e=n(r,i),Od){a=0;do{if(Od=!1,ah=0,25<=a)throw Error(ke(301));a+=1,Un=Mn=null,t.updateQueue=null,Um.current=L4,e=n(r,i)}while(Od)}if(Um.current=kv,t=Mn!==null&&Mn.next!==null,dl=0,Un=Mn=tn=null,Pv=!1,t)throw Error(ke(300));return e}function $b(){var e=ah!==0;return ah=0,e}function Ha(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?tn.memoizedState=Un=e:Un=Un.next=e,Un}function ea(){if(Mn===null){var e=tn.alternate;e=e!==null?e.memoizedState:null}else e=Mn.next;var t=Un===null?tn.memoizedState:Un.next;if(t!==null)Un=t,Mn=e;else{if(e===null)throw Error(ke(310));Mn=e,e={memoizedState:Mn.memoizedState,baseState:Mn.baseState,baseQueue:Mn.baseQueue,queue:Mn.queue,next:null},Un===null?tn.memoizedState=Un=e:Un=Un.next=e}return Un}function oh(e,t){return typeof t=="function"?t(e):t}function _0(e){var t=ea(),n=t.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=e;var r=Mn,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var u=s=null,c=null,d=a;do{var h=d.lane;if((dl&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var v={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=v,s=r):c=c.next=v,tn.lanes|=h,hl|=h}d=d.next}while(d!==null&&d!==a);c===null?s=r:c.next=u,Oa(r,t.memoizedState)||(ei=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,tn.lanes|=a,hl|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function b0(e){var t=ea(),n=t.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);Oa(a,t.memoizedState)||(ei=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function eO(){}function tO(e,t){var n=tn,r=ea(),i=t(),a=!Oa(r.memoizedState,i);if(a&&(r.memoizedState=i,ei=!0),r=r.queue,Rb(iO.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Un!==null&&Un.memoizedState.tag&1){if(n.flags|=2048,sh(9,rO.bind(null,n,r,i,t),void 0,null),Kn===null)throw Error(ke(349));dl&30||nO(n,t,i)}return i}function nO(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=tn.updateQueue,t===null?(t={lastEffect:null,stores:null},tn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function rO(e,t,n,r){t.value=n,t.getSnapshot=r,aO(t)&&oO(e)}function iO(e,t,n){return n(function(){aO(t)&&oO(e)})}function aO(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Oa(e,n)}catch{return!0}}function oO(e){var t=Uo(e,1);t!==null&&ka(t,e,1,-1)}function eP(e){var t=Ha();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oh,lastRenderedState:e},t.queue=e,e=e.dispatch=I4.bind(null,tn,e),[t.memoizedState,e]}function sh(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=tn.updateQueue,t===null?(t={lastEffect:null,stores:null},tn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function sO(){return ea().memoizedState}function Hm(e,t,n,r){var i=Ha();tn.flags|=e,i.memoizedState=sh(1|t,n,void 0,r===void 0?null:r)}function mg(e,t,n,r){var i=ea();r=r===void 0?null:r;var a=void 0;if(Mn!==null){var s=Mn.memoizedState;if(a=s.destroy,r!==null&&Db(r,s.deps)){i.memoizedState=sh(t,n,a,r);return}}tn.flags|=e,i.memoizedState=sh(1|t,n,a,r)}function tP(e,t){return Hm(8390656,8,e,t)}function Rb(e,t){return mg(2048,8,e,t)}function uO(e,t){return mg(4,2,e,t)}function lO(e,t){return mg(4,4,e,t)}function cO(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fO(e,t,n){return n=n!=null?n.concat([e]):null,mg(4,4,cO.bind(null,t,e),n)}function Nb(){}function dO(e,t){var n=ea();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Db(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function hO(e,t){var n=ea();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Db(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function pO(e,t,n){return dl&21?(Oa(n,t)||(n=wD(),tn.lanes|=n,hl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ei=!0),e.memoizedState=n)}function T4(e,t){var n=Ot;Ot=n!==0&&4>n?n:4,e(!0);var r=w0.transition;w0.transition={};try{e(!1),t()}finally{Ot=n,w0.transition=r}}function mO(){return ea().memoizedState}function M4(e,t,n){var r=Us(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},vO(e))gO(t,n);else if(n=GD(e,t,n,r),n!==null){var i=Mr();ka(n,e,r,i),yO(n,t,r)}}function I4(e,t,n){var r=Us(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(vO(e))gO(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,u=a(s,n);if(i.hasEagerState=!0,i.eagerState=u,Oa(u,s)){var c=t.interleaved;c===null?(i.next=i,xb(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=GD(e,t,i,r),n!==null&&(i=Mr(),ka(n,e,r,i),yO(n,t,r))}}function vO(e){var t=e.alternate;return e===tn||t!==null&&t===tn}function gO(e,t){Od=Pv=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function yO(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,lb(e,n)}}var kv={readContext:Zi,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},A4={readContext:Zi,useCallback:function(e,t){return Ha().memoizedState=[e,t===void 0?null:t],e},useContext:Zi,useEffect:tP,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Hm(4194308,4,cO.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hm(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hm(4,2,e,t)},useMemo:function(e,t){var n=Ha();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ha();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=M4.bind(null,tn,e),[r.memoizedState,e]},useRef:function(e){var t=Ha();return e={current:e},t.memoizedState=e},useState:eP,useDebugValue:Nb,useDeferredValue:function(e){return Ha().memoizedState=e},useTransition:function(){var e=eP(!1),t=e[0];return e=T4.bind(null,e[1]),Ha().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=tn,i=Ha();if(Vt){if(n===void 0)throw Error(ke(407));n=n()}else{if(n=t(),Kn===null)throw Error(ke(349));dl&30||nO(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,tP(iO.bind(null,r,a,e),[e]),r.flags|=2048,sh(9,rO.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ha(),t=Kn.identifierPrefix;if(Vt){var n=To,r=No;n=(r&~(1<<32-Pa(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ah++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=N4++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},j4={readContext:Zi,useCallback:dO,useContext:Zi,useEffect:Rb,useImperativeHandle:fO,useInsertionEffect:uO,useLayoutEffect:lO,useMemo:hO,useReducer:_0,useRef:sO,useState:function(){return _0(oh)},useDebugValue:Nb,useDeferredValue:function(e){var t=ea();return pO(t,Mn.memoizedState,e)},useTransition:function(){var e=_0(oh)[0],t=ea().memoizedState;return[e,t]},useMutableSource:eO,useSyncExternalStore:tO,useId:mO,unstable_isNewReconciler:!1},L4={readContext:Zi,useCallback:dO,useContext:Zi,useEffect:Rb,useImperativeHandle:fO,useInsertionEffect:uO,useLayoutEffect:lO,useMemo:hO,useReducer:b0,useRef:sO,useState:function(){return b0(oh)},useDebugValue:Nb,useDeferredValue:function(e){var t=ea();return Mn===null?t.memoizedState=e:pO(t,Mn.memoizedState,e)},useTransition:function(){var e=b0(oh)[0],t=ea().memoizedState;return[e,t]},useMutableSource:eO,useSyncExternalStore:tO,useId:mO,unstable_isNewReconciler:!1};function _a(e,t){if(e&&e.defaultProps){t=nn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Bw(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:nn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vg={isMounted:function(e){return(e=e._reactInternals)?bl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Mr(),i=Us(e),a=Mo(r,i);a.payload=t,n!=null&&(a.callback=n),t=Bs(e,a,i),t!==null&&(ka(t,e,i,r),Wm(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Mr(),i=Us(e),a=Mo(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Bs(e,a,i),t!==null&&(ka(t,e,i,r),Wm(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Mr(),r=Us(e),i=Mo(n,r);i.tag=2,t!=null&&(i.callback=t),t=Bs(e,i,r),t!==null&&(ka(t,e,r,n),Wm(t,e,r))}};function nP(e,t,n,r,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,s):t.prototype&&t.prototype.isPureReactComponent?!Zd(n,r)||!Zd(i,a):!0}function wO(e,t,n){var r=!1,i=Xs,a=t.contextType;return typeof a=="object"&&a!==null?a=Zi(a):(i=ni(t)?cl:Sr.current,r=t.contextTypes,a=(r=r!=null)?Wc(e,i):Xs),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vg,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function rP(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vg.enqueueReplaceState(t,t.state,null)}function Ww(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Eb(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Zi(a):(a=ni(t)?cl:Sr.current,i.context=Wc(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Bw(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&vg.enqueueReplaceState(i,i.state,null),xv(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function qc(e,t){try{var n="",r=t;do n+=dF(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function S0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Uw(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var z4=typeof WeakMap=="function"?WeakMap:Map;function _O(e,t,n){n=Mo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Dv||(Dv=!0,Zw=r),Uw(e,t)},n}function bO(e,t,n){n=Mo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Uw(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Uw(e,t),typeof r!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function iP(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new z4;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Z4.bind(null,e,t,n),t.then(e,e))}function aP(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function oP(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Mo(-1,1),t.tag=2,Bs(n,t,1))),n.lanes|=1),e)}var F4=Go.ReactCurrentOwner,ei=!1;function Rr(e,t,n,r){t.child=e===null?QD(t,null,n,r):Hc(t,e.child,n,r)}function sP(e,t,n,r,i){n=n.render;var a=t.ref;return kc(t,i),r=Ob(e,t,n,r,a,i),n=$b(),e!==null&&!ei?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i)):(Vt&&n&&gb(t),t.flags|=1,Rr(e,t,r,i),t.child)}function uP(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!Fb(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,SO(e,t,a,r,i)):(e=Vm(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Zd,n(s,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,e=Hs(a,r),e.ref=t.ref,e.return=t,t.child=e}function SO(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Zd(a,r)&&e.ref===t.ref)if(ei=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(ei=!0);else return t.lanes=e.lanes,Ho(e,t,i)}return Hw(e,t,n,r,i)}function xO(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(wc,vi),vi|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Bt(wc,vi),vi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Bt(wc,vi),vi|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Bt(wc,vi),vi|=r;return Rr(e,t,i,n),t.child}function EO(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Hw(e,t,n,r,i){var a=ni(n)?cl:Sr.current;return a=Wc(t,a),kc(t,i),n=Ob(e,t,n,r,a,i),r=$b(),e!==null&&!ei?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i)):(Vt&&r&&gb(t),t.flags|=1,Rr(e,t,n,i),t.child)}function lP(e,t,n,r,i){if(ni(n)){var a=!0;yv(t)}else a=!1;if(kc(t,i),t.stateNode===null)Km(e,t),wO(t,n,r),Ww(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,u=t.memoizedProps;s.props=u;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Zi(d):(d=ni(n)?cl:Sr.current,d=Wc(t,d));var h=n.getDerivedStateFromProps,v=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";v||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==r||c!==d)&&rP(t,s,r,d),Ss=!1;var y=t.memoizedState;s.state=y,xv(t,r,s,i),c=t.memoizedState,u!==r||y!==c||ti.current||Ss?(typeof h=="function"&&(Bw(t,n,h,r),c=t.memoizedState),(u=Ss||nP(t,n,u,r,y,c,d))?(v||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=d,r=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,JD(e,t),u=t.memoizedProps,d=t.type===t.elementType?u:_a(t.type,u),s.props=d,v=t.pendingProps,y=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Zi(c):(c=ni(n)?cl:Sr.current,c=Wc(t,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==v||y!==c)&&rP(t,s,r,c),Ss=!1,y=t.memoizedState,s.state=y,xv(t,r,s,i);var w=t.memoizedState;u!==v||y!==w||ti.current||Ss?(typeof g=="function"&&(Bw(t,n,g,r),w=t.memoizedState),(d=Ss||nP(t,n,d,r,y,w,c)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,w,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,w,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),s.props=r,s.state=w,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),r=!1)}return Kw(e,t,n,r,a,i)}function Kw(e,t,n,r,i,a){EO(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&VE(t,n,!1),Ho(e,t,a);r=t.stateNode,F4.current=t;var u=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Hc(t,e.child,null,a),t.child=Hc(t,null,u,a)):Rr(e,t,u,a),t.memoizedState=r.state,i&&VE(t,n,!0),t.child}function PO(e){var t=e.stateNode;t.pendingContext?YE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&YE(e,t.context,!1),Pb(e,t.containerInfo)}function cP(e,t,n,r,i){return Uc(),wb(i),t.flags|=256,Rr(e,t,n,r),t.child}var qw={dehydrated:null,treeContext:null,retryLane:0};function Yw(e){return{baseLanes:e,cachePool:null,transitions:null}}function kO(e,t,n){var r=t.pendingProps,i=en.current,a=!1,s=(t.flags&128)!==0,u;if((u=s)||(u=e!==null&&e.memoizedState===null?!1:(i&2)!==0),u?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Bt(en,i&1),e===null)return zw(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,a?(r=t.mode,a=t.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=wg(s,r,0,null),e=al(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Yw(n),t.memoizedState=qw,e):Tb(t,s));if(i=e.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return B4(e,t,s,r,u,i,n);if(a){a=r.fallback,s=t.mode,i=e.child,u=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Hs(i,c),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?a=Hs(u,a):(a=al(a,s,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,s=e.child.memoizedState,s=s===null?Yw(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~n,t.memoizedState=qw,r}return a=e.child,e=a.sibling,r=Hs(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Tb(e,t){return t=wg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function hm(e,t,n,r){return r!==null&&wb(r),Hc(t,e.child,null,n),e=Tb(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function B4(e,t,n,r,i,a,s){if(n)return t.flags&256?(t.flags&=-257,r=S0(Error(ke(422))),hm(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=wg({mode:"visible",children:r.children},i,0,null),a=al(a,i,s,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Hc(t,e.child,null,s),t.child.memoizedState=Yw(s),t.memoizedState=qw,a);if(!(t.mode&1))return hm(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,a=Error(ke(419)),r=S0(a,r,void 0),hm(e,t,s,r)}if(u=(s&e.childLanes)!==0,ei||u){if(r=Kn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Uo(e,i),ka(r,e,i,-1))}return zb(),r=S0(Error(ke(421))),hm(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=e3.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,gi=Fs(i.nextSibling),yi=t,Vt=!0,Sa=null,e!==null&&(qi[Yi++]=No,qi[Yi++]=To,qi[Yi++]=fl,No=e.id,To=e.overflow,fl=t),t=Tb(t,r.children),t.flags|=4096,t)}function fP(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Fw(e.return,t,n)}function x0(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function CO(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Rr(e,t,r.children,n),r=en.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fP(e,n,t);else if(e.tag===19)fP(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Bt(en,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ev(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),x0(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ev(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}x0(t,!0,n,null,a);break;case"together":x0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Km(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),hl|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ke(153));if(t.child!==null){for(e=t.child,n=Hs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Hs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function W4(e,t,n){switch(t.tag){case 3:PO(t),Uc();break;case 5:ZD(t);break;case 1:ni(t.type)&&yv(t);break;case 4:Pb(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Bt(bv,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Bt(en,en.current&1),t.flags|=128,null):n&t.child.childLanes?kO(e,t,n):(Bt(en,en.current&1),e=Ho(e,t,n),e!==null?e.sibling:null);Bt(en,en.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return CO(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Bt(en,en.current),r)break;return null;case 22:case 23:return t.lanes=0,xO(e,t,n)}return Ho(e,t,n)}var DO,Vw,OO,$O;DO=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vw=function(){};OO=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Zu(to.current);var a=null;switch(n){case"input":i=vw(e,i),r=vw(e,r),a=[];break;case"select":i=nn({},i,{value:void 0}),r=nn({},r,{value:void 0}),a=[];break;case"textarea":i=ww(e,i),r=ww(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=vv)}bw(n,r);var s;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var u=i[d];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(qd.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(u=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(qd.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ut("scroll",e),a||u===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};$O=function(e,t,n,r){n!==r&&(t.flags|=4)};function sd(e,t){if(!Vt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function U4(e,t,n){var r=t.pendingProps;switch(yb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gr(t),null;case 1:return ni(t.type)&&gv(),gr(t),null;case 3:return r=t.stateNode,Kc(),Kt(ti),Kt(Sr),Cb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(fm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Sa!==null&&(n_(Sa),Sa=null))),Vw(e,t),gr(t),null;case 5:kb(t);var i=Zu(ih.current);if(n=t.type,e!==null&&t.stateNode!=null)OO(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ke(166));return gr(t),null}if(e=Zu(to.current),fm(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Ya]=t,r[nh]=a,e=(t.mode&1)!==0,n){case"dialog":Ut("cancel",r),Ut("close",r);break;case"iframe":case"object":case"embed":Ut("load",r);break;case"video":case"audio":for(i=0;i<_d.length;i++)Ut(_d[i],r);break;case"source":Ut("error",r);break;case"img":case"image":case"link":Ut("error",r),Ut("load",r);break;case"details":Ut("toggle",r);break;case"input":_E(r,a),Ut("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ut("invalid",r);break;case"textarea":SE(r,a),Ut("invalid",r)}bw(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="children"?typeof u=="string"?r.textContent!==u&&(a.suppressHydrationWarning!==!0&&cm(r.textContent,u,e),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(a.suppressHydrationWarning!==!0&&cm(r.textContent,u,e),i=["children",""+u]):qd.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&Ut("scroll",r)}switch(n){case"input":nm(r),bE(r,a,!0);break;case"textarea":nm(r),xE(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=vv)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=iD(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Ya]=t,e[nh]=r,DO(e,t,!1,!1),t.stateNode=e;e:{switch(s=Sw(n,r),n){case"dialog":Ut("cancel",e),Ut("close",e),i=r;break;case"iframe":case"object":case"embed":Ut("load",e),i=r;break;case"video":case"audio":for(i=0;i<_d.length;i++)Ut(_d[i],e);i=r;break;case"source":Ut("error",e),i=r;break;case"img":case"image":case"link":Ut("error",e),Ut("load",e),i=r;break;case"details":Ut("toggle",e),i=r;break;case"input":_E(e,r),i=vw(e,r),Ut("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=nn({},r,{value:void 0}),Ut("invalid",e);break;case"textarea":SE(e,r),i=ww(e,r),Ut("invalid",e);break;default:i=r}bw(n,i),u=i;for(a in u)if(u.hasOwnProperty(a)){var c=u[a];a==="style"?sD(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&aD(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Yd(e,c):typeof c=="number"&&Yd(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(qd.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ut("scroll",e):c!=null&&rb(e,a,c,s))}switch(n){case"input":nm(e),bE(e,r,!1);break;case"textarea":nm(e),xE(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Vs(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Sc(e,!!r.multiple,a,!1):r.defaultValue!=null&&Sc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=vv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gr(t),null;case 6:if(e&&t.stateNode!=null)$O(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ke(166));if(n=Zu(ih.current),Zu(to.current),fm(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ya]=t,(a=r.nodeValue!==n)&&(e=yi,e!==null))switch(e.tag){case 3:cm(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&cm(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ya]=t,t.stateNode=r}return gr(t),null;case 13:if(Kt(en),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Vt&&gi!==null&&t.mode&1&&!(t.flags&128))VD(),Uc(),t.flags|=98560,a=!1;else if(a=fm(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(ke(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ke(317));a[Ya]=t}else Uc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gr(t),a=!1}else Sa!==null&&(n_(Sa),Sa=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||en.current&1?jn===0&&(jn=3):zb())),t.updateQueue!==null&&(t.flags|=4),gr(t),null);case 4:return Kc(),Vw(e,t),e===null&&eh(t.stateNode.containerInfo),gr(t),null;case 10:return Sb(t.type._context),gr(t),null;case 17:return ni(t.type)&&gv(),gr(t),null;case 19:if(Kt(en),a=t.memoizedState,a===null)return gr(t),null;if(r=(t.flags&128)!==0,s=a.rendering,s===null)if(r)sd(a,!1);else{if(jn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Ev(e),s!==null){for(t.flags|=128,sd(a,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Bt(en,en.current&1|2),t.child}e=e.sibling}a.tail!==null&&wn()>Yc&&(t.flags|=128,r=!0,sd(a,!1),t.lanes=4194304)}else{if(!r)if(e=Ev(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),sd(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Vt)return gr(t),null}else 2*wn()-a.renderingStartTime>Yc&&n!==1073741824&&(t.flags|=128,r=!0,sd(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(n=a.last,n!==null?n.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=wn(),t.sibling=null,n=en.current,Bt(en,r?n&1|2:n&1),t):(gr(t),null);case 22:case 23:return Lb(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?vi&1073741824&&(gr(t),t.subtreeFlags&6&&(t.flags|=8192)):gr(t),null;case 24:return null;case 25:return null}throw Error(ke(156,t.tag))}function H4(e,t){switch(yb(t),t.tag){case 1:return ni(t.type)&&gv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Kc(),Kt(ti),Kt(Sr),Cb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return kb(t),null;case 13:if(Kt(en),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ke(340));Uc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Kt(en),null;case 4:return Kc(),null;case 10:return Sb(t.type._context),null;case 22:case 23:return Lb(),null;case 24:return null;default:return null}}var pm=!1,_r=!1,K4=typeof WeakSet=="function"?WeakSet:Set,Be=null;function yc(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){cn(e,t,r)}else n.current=null}function Xw(e,t,n){try{n()}catch(r){cn(e,t,r)}}var dP=!1;function q4(e,t){if(Nw=hv,e=ID(),vb(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,u=-1,c=-1,d=0,h=0,v=e,y=null;t:for(;;){for(var g;v!==n||i!==0&&v.nodeType!==3||(u=s+i),v!==a||r!==0&&v.nodeType!==3||(c=s+r),v.nodeType===3&&(s+=v.nodeValue.length),(g=v.firstChild)!==null;)y=v,v=g;for(;;){if(v===e)break t;if(y===n&&++d===i&&(u=s),y===a&&++h===r&&(c=s),(g=v.nextSibling)!==null)break;v=y,y=v.parentNode}v=g}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tw={focusedElem:e,selectionRange:n},hv=!1,Be=t;Be!==null;)if(t=Be,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Be=e;else for(;Be!==null;){t=Be;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,C=w.memoizedState,S=t.stateNode,E=S.getSnapshotBeforeUpdate(t.elementType===t.type?x:_a(t.type,x),C);S.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var P=t.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(N){cn(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Be=e;break}Be=t.return}return w=dP,dP=!1,w}function $d(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Xw(t,n,a)}i=i.next}while(i!==r)}}function gg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Qw(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function RO(e){var t=e.alternate;t!==null&&(e.alternate=null,RO(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ya],delete t[nh],delete t[Aw],delete t[D4],delete t[O4])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function NO(e){return e.tag===5||e.tag===3||e.tag===4}function hP(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||NO(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gw(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=vv));else if(r!==4&&(e=e.child,e!==null))for(Gw(e,t,n),e=e.sibling;e!==null;)Gw(e,t,n),e=e.sibling}function Jw(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Jw(e,t,n),e=e.sibling;e!==null;)Jw(e,t,n),e=e.sibling}var rr=null,ba=!1;function ms(e,t,n){for(n=n.child;n!==null;)TO(e,t,n),n=n.sibling}function TO(e,t,n){if(eo&&typeof eo.onCommitFiberUnmount=="function")try{eo.onCommitFiberUnmount(lg,n)}catch{}switch(n.tag){case 5:_r||yc(n,t);case 6:var r=rr,i=ba;rr=null,ms(e,t,n),rr=r,ba=i,rr!==null&&(ba?(e=rr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):rr.removeChild(n.stateNode));break;case 18:rr!==null&&(ba?(e=rr,n=n.stateNode,e.nodeType===8?v0(e.parentNode,n):e.nodeType===1&&v0(e,n),Gd(e)):v0(rr,n.stateNode));break;case 4:r=rr,i=ba,rr=n.stateNode.containerInfo,ba=!0,ms(e,t,n),rr=r,ba=i;break;case 0:case 11:case 14:case 15:if(!_r&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&Xw(n,t,s),i=i.next}while(i!==r)}ms(e,t,n);break;case 1:if(!_r&&(yc(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){cn(n,t,u)}ms(e,t,n);break;case 21:ms(e,t,n);break;case 22:n.mode&1?(_r=(r=_r)||n.memoizedState!==null,ms(e,t,n),_r=r):ms(e,t,n);break;default:ms(e,t,n)}}function pP(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new K4),t.forEach(function(r){var i=t3.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function va(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,u=s;e:for(;u!==null;){switch(u.tag){case 5:rr=u.stateNode,ba=!1;break e;case 3:rr=u.stateNode.containerInfo,ba=!0;break e;case 4:rr=u.stateNode.containerInfo,ba=!0;break e}u=u.return}if(rr===null)throw Error(ke(160));TO(a,s,i),rr=null,ba=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){cn(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)MO(t,e),t=t.sibling}function MO(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(va(t,e),Ua(e),r&4){try{$d(3,e,e.return),gg(3,e)}catch(x){cn(e,e.return,x)}try{$d(5,e,e.return)}catch(x){cn(e,e.return,x)}}break;case 1:va(t,e),Ua(e),r&512&&n!==null&&yc(n,n.return);break;case 5:if(va(t,e),Ua(e),r&512&&n!==null&&yc(n,n.return),e.flags&32){var i=e.stateNode;try{Yd(i,"")}catch(x){cn(e,e.return,x)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=n!==null?n.memoizedProps:a,u=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{u==="input"&&a.type==="radio"&&a.name!=null&&nD(i,a),Sw(u,s);var d=Sw(u,a);for(s=0;s<c.length;s+=2){var h=c[s],v=c[s+1];h==="style"?sD(i,v):h==="dangerouslySetInnerHTML"?aD(i,v):h==="children"?Yd(i,v):rb(i,h,v,d)}switch(u){case"input":gw(i,a);break;case"textarea":rD(i,a);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?Sc(i,!!a.multiple,g,!1):y!==!!a.multiple&&(a.defaultValue!=null?Sc(i,!!a.multiple,a.defaultValue,!0):Sc(i,!!a.multiple,a.multiple?[]:"",!1))}i[nh]=a}catch(x){cn(e,e.return,x)}}break;case 6:if(va(t,e),Ua(e),r&4){if(e.stateNode===null)throw Error(ke(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(x){cn(e,e.return,x)}}break;case 3:if(va(t,e),Ua(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gd(t.containerInfo)}catch(x){cn(e,e.return,x)}break;case 4:va(t,e),Ua(e);break;case 13:va(t,e),Ua(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Ab=wn())),r&4&&pP(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(_r=(d=_r)||h,va(t,e),_r=d):va(t,e),Ua(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(Be=e,h=e.child;h!==null;){for(v=Be=h;Be!==null;){switch(y=Be,g=y.child,y.tag){case 0:case 11:case 14:case 15:$d(4,y,y.return);break;case 1:yc(y,y.return);var w=y.stateNode;if(typeof w.componentWillUnmount=="function"){r=y,n=y.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(x){cn(r,n,x)}}break;case 5:yc(y,y.return);break;case 22:if(y.memoizedState!==null){vP(v);continue}}g!==null?(g.return=y,Be=g):vP(v)}h=h.sibling}e:for(h=null,v=e;;){if(v.tag===5){if(h===null){h=v;try{i=v.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(u=v.stateNode,c=v.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=oD("display",s))}catch(x){cn(e,e.return,x)}}}else if(v.tag===6){if(h===null)try{v.stateNode.nodeValue=d?"":v.memoizedProps}catch(x){cn(e,e.return,x)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;h===v&&(h=null),v=v.return}h===v&&(h=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:va(t,e),Ua(e),r&4&&pP(e);break;case 21:break;default:va(t,e),Ua(e)}}function Ua(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(NO(n)){var r=n;break e}n=n.return}throw Error(ke(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Yd(i,""),r.flags&=-33);var a=hP(e);Jw(e,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,u=hP(e);Gw(e,u,s);break;default:throw Error(ke(161))}}catch(c){cn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Y4(e,t,n){Be=e,IO(e)}function IO(e,t,n){for(var r=(e.mode&1)!==0;Be!==null;){var i=Be,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||pm;if(!s){var u=i.alternate,c=u!==null&&u.memoizedState!==null||_r;u=pm;var d=_r;if(pm=s,(_r=c)&&!d)for(Be=i;Be!==null;)s=Be,c=s.child,s.tag===22&&s.memoizedState!==null?gP(i):c!==null?(c.return=s,Be=c):gP(i);for(;a!==null;)Be=a,IO(a),a=a.sibling;Be=i,pm=u,_r=d}mP(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Be=a):mP(e)}}function mP(e){for(;Be!==null;){var t=Be;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_r||gg(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!_r)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:_a(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&ZE(t,a,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ZE(t,s,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var v=h.dehydrated;v!==null&&Gd(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}_r||t.flags&512&&Qw(t)}catch(y){cn(t,t.return,y)}}if(t===e){Be=null;break}if(n=t.sibling,n!==null){n.return=t.return,Be=n;break}Be=t.return}}function vP(e){for(;Be!==null;){var t=Be;if(t===e){Be=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Be=n;break}Be=t.return}}function gP(e){for(;Be!==null;){var t=Be;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{gg(4,t)}catch(c){cn(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){cn(t,i,c)}}var a=t.return;try{Qw(t)}catch(c){cn(t,a,c)}break;case 5:var s=t.return;try{Qw(t)}catch(c){cn(t,s,c)}}}catch(c){cn(t,t.return,c)}if(t===e){Be=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Be=u;break}Be=t.return}}var V4=Math.ceil,Cv=Go.ReactCurrentDispatcher,Mb=Go.ReactCurrentOwner,Ji=Go.ReactCurrentBatchConfig,wt=0,Kn=null,Cn=null,ar=0,vi=0,wc=ru(0),jn=0,uh=null,hl=0,yg=0,Ib=0,Rd=null,Jr=null,Ab=0,Yc=1/0,ko=null,Dv=!1,Zw=null,Ws=null,mm=!1,Rs=null,Ov=0,Nd=0,e_=null,qm=-1,Ym=0;function Mr(){return wt&6?wn():qm!==-1?qm:qm=wn()}function Us(e){return e.mode&1?wt&2&&ar!==0?ar&-ar:R4.transition!==null?(Ym===0&&(Ym=wD()),Ym):(e=Ot,e!==0||(e=window.event,e=e===void 0?16:kD(e.type)),e):1}function ka(e,t,n,r){if(50<Nd)throw Nd=0,e_=null,Error(ke(185));Mh(e,n,r),(!(wt&2)||e!==Kn)&&(e===Kn&&(!(wt&2)&&(yg|=n),jn===4&&ks(e,ar)),ri(e,r),n===1&&wt===0&&!(t.mode&1)&&(Yc=wn()+500,pg&&iu()))}function ri(e,t){var n=e.callbackNode;RF(e,t);var r=dv(e,e===Kn?ar:0);if(r===0)n!==null&&kE(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&kE(n),t===1)e.tag===0?$4(yP.bind(null,e)):KD(yP.bind(null,e)),k4(function(){!(wt&6)&&iu()}),n=null;else{switch(_D(r)){case 1:n=ub;break;case 4:n=gD;break;case 16:n=fv;break;case 536870912:n=yD;break;default:n=fv}n=UO(n,AO.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function AO(e,t){if(qm=-1,Ym=0,wt&6)throw Error(ke(327));var n=e.callbackNode;if(Cc()&&e.callbackNode!==n)return null;var r=dv(e,e===Kn?ar:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=$v(e,r);else{t=r;var i=wt;wt|=2;var a=LO();(Kn!==e||ar!==t)&&(ko=null,Yc=wn()+500,il(e,t));do try{G4();break}catch(u){jO(e,u)}while(1);bb(),Cv.current=a,wt=i,Cn!==null?t=0:(Kn=null,ar=0,t=jn)}if(t!==0){if(t===2&&(i=Cw(e),i!==0&&(r=i,t=t_(e,i))),t===1)throw n=uh,il(e,0),ks(e,r),ri(e,wn()),n;if(t===6)ks(e,r);else{if(i=e.current.alternate,!(r&30)&&!X4(i)&&(t=$v(e,r),t===2&&(a=Cw(e),a!==0&&(r=a,t=t_(e,a))),t===1))throw n=uh,il(e,0),ks(e,r),ri(e,wn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ke(345));case 2:Uu(e,Jr,ko);break;case 3:if(ks(e,r),(r&130023424)===r&&(t=Ab+500-wn(),10<t)){if(dv(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Mr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Iw(Uu.bind(null,e,Jr,ko),t);break}Uu(e,Jr,ko);break;case 4:if(ks(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-Pa(r);a=1<<s,s=t[s],s>i&&(i=s),r&=~a}if(r=i,r=wn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*V4(r/1960))-r,10<r){e.timeoutHandle=Iw(Uu.bind(null,e,Jr,ko),r);break}Uu(e,Jr,ko);break;case 5:Uu(e,Jr,ko);break;default:throw Error(ke(329))}}}return ri(e,wn()),e.callbackNode===n?AO.bind(null,e):null}function t_(e,t){var n=Rd;return e.current.memoizedState.isDehydrated&&(il(e,t).flags|=256),e=$v(e,t),e!==2&&(t=Jr,Jr=n,t!==null&&n_(t)),e}function n_(e){Jr===null?Jr=e:Jr.push.apply(Jr,e)}function X4(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Oa(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ks(e,t){for(t&=~Ib,t&=~yg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Pa(t),r=1<<n;e[n]=-1,t&=~r}}function yP(e){if(wt&6)throw Error(ke(327));Cc();var t=dv(e,0);if(!(t&1))return ri(e,wn()),null;var n=$v(e,t);if(e.tag!==0&&n===2){var r=Cw(e);r!==0&&(t=r,n=t_(e,r))}if(n===1)throw n=uh,il(e,0),ks(e,t),ri(e,wn()),n;if(n===6)throw Error(ke(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Uu(e,Jr,ko),ri(e,wn()),null}function jb(e,t){var n=wt;wt|=1;try{return e(t)}finally{wt=n,wt===0&&(Yc=wn()+500,pg&&iu())}}function pl(e){Rs!==null&&Rs.tag===0&&!(wt&6)&&Cc();var t=wt;wt|=1;var n=Ji.transition,r=Ot;try{if(Ji.transition=null,Ot=1,e)return e()}finally{Ot=r,Ji.transition=n,wt=t,!(wt&6)&&iu()}}function Lb(){vi=wc.current,Kt(wc)}function il(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,P4(n)),Cn!==null)for(n=Cn.return;n!==null;){var r=n;switch(yb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gv();break;case 3:Kc(),Kt(ti),Kt(Sr),Cb();break;case 5:kb(r);break;case 4:Kc();break;case 13:Kt(en);break;case 19:Kt(en);break;case 10:Sb(r.type._context);break;case 22:case 23:Lb()}n=n.return}if(Kn=e,Cn=e=Hs(e.current,null),ar=vi=t,jn=0,uh=null,Ib=yg=hl=0,Jr=Rd=null,Ju!==null){for(t=0;t<Ju.length;t++)if(n=Ju[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}Ju=null}return e}function jO(e,t){do{var n=Cn;try{if(bb(),Um.current=kv,Pv){for(var r=tn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Pv=!1}if(dl=0,Un=Mn=tn=null,Od=!1,ah=0,Mb.current=null,n===null||n.return===null){jn=1,uh=t,Cn=null;break}e:{var a=e,s=n.return,u=n,c=t;if(t=ar,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=u,v=h.tag;if(!(h.mode&1)&&(v===0||v===11||v===15)){var y=h.alternate;y?(h.updateQueue=y.updateQueue,h.memoizedState=y.memoizedState,h.lanes=y.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=aP(s);if(g!==null){g.flags&=-257,oP(g,s,u,a,t),g.mode&1&&iP(a,d,t),t=g,c=d;var w=t.updateQueue;if(w===null){var x=new Set;x.add(c),t.updateQueue=x}else w.add(c);break e}else{if(!(t&1)){iP(a,d,t),zb();break e}c=Error(ke(426))}}else if(Vt&&u.mode&1){var C=aP(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),oP(C,s,u,a,t),wb(qc(c,u));break e}}a=c=qc(c,u),jn!==4&&(jn=2),Rd===null?Rd=[a]:Rd.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var S=_O(a,c,t);JE(a,S);break e;case 1:u=c;var E=a.type,P=a.stateNode;if(!(a.flags&128)&&(typeof E.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Ws===null||!Ws.has(P)))){a.flags|=65536,t&=-t,a.lanes|=t;var N=bO(a,u,t);JE(a,N);break e}}a=a.return}while(a!==null)}FO(n)}catch(T){t=T,Cn===n&&n!==null&&(Cn=n=n.return);continue}break}while(1)}function LO(){var e=Cv.current;return Cv.current=kv,e===null?kv:e}function zb(){(jn===0||jn===3||jn===2)&&(jn=4),Kn===null||!(hl&268435455)&&!(yg&268435455)||ks(Kn,ar)}function $v(e,t){var n=wt;wt|=2;var r=LO();(Kn!==e||ar!==t)&&(ko=null,il(e,t));do try{Q4();break}catch(i){jO(e,i)}while(1);if(bb(),wt=n,Cv.current=r,Cn!==null)throw Error(ke(261));return Kn=null,ar=0,jn}function Q4(){for(;Cn!==null;)zO(Cn)}function G4(){for(;Cn!==null&&!SF();)zO(Cn)}function zO(e){var t=WO(e.alternate,e,vi);e.memoizedProps=e.pendingProps,t===null?FO(e):Cn=t,Mb.current=null}function FO(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=H4(n,t),n!==null){n.flags&=32767,Cn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{jn=6,Cn=null;return}}else if(n=U4(n,t,vi),n!==null){Cn=n;return}if(t=t.sibling,t!==null){Cn=t;return}Cn=t=e}while(t!==null);jn===0&&(jn=5)}function Uu(e,t,n){var r=Ot,i=Ji.transition;try{Ji.transition=null,Ot=1,J4(e,t,n,r)}finally{Ji.transition=i,Ot=r}return null}function J4(e,t,n,r){do Cc();while(Rs!==null);if(wt&6)throw Error(ke(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ke(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(NF(e,a),e===Kn&&(Cn=Kn=null,ar=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mm||(mm=!0,UO(fv,function(){return Cc(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Ji.transition,Ji.transition=null;var s=Ot;Ot=1;var u=wt;wt|=4,Mb.current=null,q4(e,n),MO(n,e),y4(Tw),hv=!!Nw,Tw=Nw=null,e.current=n,Y4(n),xF(),wt=u,Ot=s,Ji.transition=a}else e.current=n;if(mm&&(mm=!1,Rs=e,Ov=i),a=e.pendingLanes,a===0&&(Ws=null),kF(n.stateNode),ri(e,wn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Dv)throw Dv=!1,e=Zw,Zw=null,e;return Ov&1&&e.tag!==0&&Cc(),a=e.pendingLanes,a&1?e===e_?Nd++:(Nd=0,e_=e):Nd=0,iu(),null}function Cc(){if(Rs!==null){var e=_D(Ov),t=Ji.transition,n=Ot;try{if(Ji.transition=null,Ot=16>e?16:e,Rs===null)var r=!1;else{if(e=Rs,Rs=null,Ov=0,wt&6)throw Error(ke(331));var i=wt;for(wt|=4,Be=e.current;Be!==null;){var a=Be,s=a.child;if(Be.flags&16){var u=a.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(Be=d;Be!==null;){var h=Be;switch(h.tag){case 0:case 11:case 15:$d(8,h,a)}var v=h.child;if(v!==null)v.return=h,Be=v;else for(;Be!==null;){h=Be;var y=h.sibling,g=h.return;if(RO(h),h===d){Be=null;break}if(y!==null){y.return=g,Be=y;break}Be=g}}}var w=a.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var C=x.sibling;x.sibling=null,x=C}while(x!==null)}}Be=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Be=s;else e:for(;Be!==null;){if(a=Be,a.flags&2048)switch(a.tag){case 0:case 11:case 15:$d(9,a,a.return)}var S=a.sibling;if(S!==null){S.return=a.return,Be=S;break e}Be=a.return}}var E=e.current;for(Be=E;Be!==null;){s=Be;var P=s.child;if(s.subtreeFlags&2064&&P!==null)P.return=s,Be=P;else e:for(s=E;Be!==null;){if(u=Be,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:gg(9,u)}}catch(T){cn(u,u.return,T)}if(u===s){Be=null;break e}var N=u.sibling;if(N!==null){N.return=u.return,Be=N;break e}Be=u.return}}if(wt=i,iu(),eo&&typeof eo.onPostCommitFiberRoot=="function")try{eo.onPostCommitFiberRoot(lg,e)}catch{}r=!0}return r}finally{Ot=n,Ji.transition=t}}return!1}function wP(e,t,n){t=qc(n,t),t=_O(e,t,1),e=Bs(e,t,1),t=Mr(),e!==null&&(Mh(e,1,t),ri(e,t))}function cn(e,t,n){if(e.tag===3)wP(e,e,n);else for(;t!==null;){if(t.tag===3){wP(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ws===null||!Ws.has(r))){e=qc(n,e),e=bO(t,e,1),t=Bs(t,e,1),e=Mr(),t!==null&&(Mh(t,1,e),ri(t,e));break}}t=t.return}}function Z4(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Mr(),e.pingedLanes|=e.suspendedLanes&n,Kn===e&&(ar&n)===n&&(jn===4||jn===3&&(ar&130023424)===ar&&500>wn()-Ab?il(e,0):Ib|=n),ri(e,t)}function BO(e,t){t===0&&(e.mode&1?(t=am,am<<=1,!(am&130023424)&&(am=4194304)):t=1);var n=Mr();e=Uo(e,t),e!==null&&(Mh(e,t,n),ri(e,n))}function e3(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),BO(e,n)}function t3(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ke(314))}r!==null&&r.delete(t),BO(e,n)}var WO;WO=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ti.current)ei=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ei=!1,W4(e,t,n);ei=!!(e.flags&131072)}else ei=!1,Vt&&t.flags&1048576&&qD(t,_v,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Km(e,t),e=t.pendingProps;var i=Wc(t,Sr.current);kc(t,n),i=Ob(null,t,r,e,i,n);var a=$b();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ni(r)?(a=!0,yv(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Eb(t),i.updater=vg,t.stateNode=i,i._reactInternals=t,Ww(t,r,e,n),t=Kw(null,t,r,!0,a,n)):(t.tag=0,Vt&&a&&gb(t),Rr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Km(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=r3(r),e=_a(r,e),i){case 0:t=Hw(null,t,r,e,n);break e;case 1:t=lP(null,t,r,e,n);break e;case 11:t=sP(null,t,r,e,n);break e;case 14:t=uP(null,t,r,_a(r.type,e),n);break e}throw Error(ke(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_a(r,i),Hw(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_a(r,i),lP(e,t,r,i,n);case 3:e:{if(PO(t),e===null)throw Error(ke(387));r=t.pendingProps,a=t.memoizedState,i=a.element,JD(e,t),xv(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=qc(Error(ke(423)),t),t=cP(e,t,r,n,i);break e}else if(r!==i){i=qc(Error(ke(424)),t),t=cP(e,t,r,n,i);break e}else for(gi=Fs(t.stateNode.containerInfo.firstChild),yi=t,Vt=!0,Sa=null,n=QD(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Uc(),r===i){t=Ho(e,t,n);break e}Rr(e,t,r,n)}t=t.child}return t;case 5:return ZD(t),e===null&&zw(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,Mw(r,i)?s=null:a!==null&&Mw(r,a)&&(t.flags|=32),EO(e,t),Rr(e,t,s,n),t.child;case 6:return e===null&&zw(t),null;case 13:return kO(e,t,n);case 4:return Pb(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Hc(t,null,r,n):Rr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_a(r,i),sP(e,t,r,i,n);case 7:return Rr(e,t,t.pendingProps,n),t.child;case 8:return Rr(e,t,t.pendingProps.children,n),t.child;case 12:return Rr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Bt(bv,r._currentValue),r._currentValue=s,a!==null)if(Oa(a.value,s)){if(a.children===i.children&&!ti.current){t=Ho(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var u=a.dependencies;if(u!==null){s=a.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Mo(-1,n&-n),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Fw(a.return,n,t),u.lanes|=n;break}c=c.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(ke(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Fw(s,n,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Rr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,kc(t,n),i=Zi(i),r=r(i),t.flags|=1,Rr(e,t,r,n),t.child;case 14:return r=t.type,i=_a(r,t.pendingProps),i=_a(r.type,i),uP(e,t,r,i,n);case 15:return SO(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_a(r,i),Km(e,t),t.tag=1,ni(r)?(e=!0,yv(t)):e=!1,kc(t,n),wO(t,r,i),Ww(t,r,i,n),Kw(null,t,r,!0,e,n);case 19:return CO(e,t,n);case 22:return xO(e,t,n)}throw Error(ke(156,t.tag))};function UO(e,t){return vD(e,t)}function n3(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xi(e,t,n,r){return new n3(e,t,n,r)}function Fb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function r3(e){if(typeof e=="function")return Fb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ab)return 11;if(e===ob)return 14}return 2}function Hs(e,t){var n=e.alternate;return n===null?(n=Xi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Vm(e,t,n,r,i,a){var s=2;if(r=e,typeof e=="function")Fb(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case lc:return al(n.children,i,a,t);case ib:s=8,i|=8;break;case dw:return e=Xi(12,n,t,i|2),e.elementType=dw,e.lanes=a,e;case hw:return e=Xi(13,n,t,i),e.elementType=hw,e.lanes=a,e;case pw:return e=Xi(19,n,t,i),e.elementType=pw,e.lanes=a,e;case ZC:return wg(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case GC:s=10;break e;case JC:s=9;break e;case ab:s=11;break e;case ob:s=14;break e;case bs:s=16,r=null;break e}throw Error(ke(130,e==null?e:typeof e,""))}return t=Xi(s,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function al(e,t,n,r){return e=Xi(7,e,r,t),e.lanes=n,e}function wg(e,t,n,r){return e=Xi(22,e,r,t),e.elementType=ZC,e.lanes=n,e.stateNode={isHidden:!1},e}function E0(e,t,n){return e=Xi(6,e,null,t),e.lanes=n,e}function P0(e,t,n){return t=Xi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function i3(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=a0(0),this.expirationTimes=a0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=a0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bb(e,t,n,r,i,a,s,u,c){return e=new i3(e,t,n,u,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Xi(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eb(a),e}function a3(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uc,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function HO(e){if(!e)return Xs;e=e._reactInternals;e:{if(bl(e)!==e||e.tag!==1)throw Error(ke(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ke(171))}if(e.tag===1){var n=e.type;if(ni(n))return HD(e,n,t)}return t}function KO(e,t,n,r,i,a,s,u,c){return e=Bb(n,r,!0,e,i,a,s,u,c),e.context=HO(null),n=e.current,r=Mr(),i=Us(n),a=Mo(r,i),a.callback=t??null,Bs(n,a,i),e.current.lanes=i,Mh(e,i,r),ri(e,r),e}function _g(e,t,n,r){var i=t.current,a=Mr(),s=Us(i);return n=HO(n),t.context===null?t.context=n:t.pendingContext=n,t=Mo(a,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Bs(i,t,s),e!==null&&(ka(e,i,s,a),Wm(e,i,s)),s}function Rv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _P(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Wb(e,t){_P(e,t),(e=e.alternate)&&_P(e,t)}function o3(){return null}var qO=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ub(e){this._internalRoot=e}bg.prototype.render=Ub.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ke(409));_g(e,t,null,null)};bg.prototype.unmount=Ub.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;pl(function(){_g(null,e,null,null)}),t[Wo]=null}};function bg(e){this._internalRoot=e}bg.prototype.unstable_scheduleHydration=function(e){if(e){var t=xD();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ps.length&&t!==0&&t<Ps[n].priority;n++);Ps.splice(n,0,e),n===0&&PD(e)}};function Hb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bP(){}function s3(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var d=Rv(s);a.call(d)}}var s=KO(t,r,e,0,null,!1,!1,"",bP);return e._reactRootContainer=s,e[Wo]=s.current,eh(e.nodeType===8?e.parentNode:e),pl(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var d=Rv(c);u.call(d)}}var c=Bb(e,0,!1,null,null,!1,!1,"",bP);return e._reactRootContainer=c,e[Wo]=c.current,eh(e.nodeType===8?e.parentNode:e),pl(function(){_g(t,c,n,r)}),c}function xg(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var u=i;i=function(){var c=Rv(s);u.call(c)}}_g(t,s,e,i)}else s=s3(n,t,e,i,r);return Rv(s)}bD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=wd(t.pendingLanes);n!==0&&(lb(t,n|1),ri(t,wn()),!(wt&6)&&(Yc=wn()+500,iu()))}break;case 13:pl(function(){var r=Uo(e,1);if(r!==null){var i=Mr();ka(r,e,1,i)}}),Wb(e,1)}};cb=function(e){if(e.tag===13){var t=Uo(e,134217728);if(t!==null){var n=Mr();ka(t,e,134217728,n)}Wb(e,134217728)}};SD=function(e){if(e.tag===13){var t=Us(e),n=Uo(e,t);if(n!==null){var r=Mr();ka(n,e,t,r)}Wb(e,t)}};xD=function(){return Ot};ED=function(e,t){var n=Ot;try{return Ot=e,t()}finally{Ot=n}};Ew=function(e,t,n){switch(t){case"input":if(gw(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=hg(r);if(!i)throw Error(ke(90));tD(r),gw(r,i)}}}break;case"textarea":rD(e,n);break;case"select":t=n.value,t!=null&&Sc(e,!!n.multiple,t,!1)}};cD=jb;fD=pl;var u3={usingClientEntryPoint:!1,Events:[Ah,hc,hg,uD,lD,jb]},ud={findFiberByHostInstance:Gu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l3={bundleType:ud.bundleType,version:ud.version,rendererPackageName:ud.rendererPackageName,rendererConfig:ud.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Go.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=pD(e),e===null?null:e.stateNode},findFiberByHostInstance:ud.findFiberByHostInstance||o3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vm.isDisabled&&vm.supportsFiber)try{lg=vm.inject(l3),eo=vm}catch{}}Ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u3;Ei.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hb(t))throw Error(ke(200));return a3(e,t,null,n)};Ei.createRoot=function(e,t){if(!Hb(e))throw Error(ke(299));var n=!1,r="",i=qO;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Bb(e,1,!1,null,null,n,!1,r,i),e[Wo]=t.current,eh(e.nodeType===8?e.parentNode:e),new Ub(t)};Ei.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ke(188)):(e=Object.keys(e).join(","),Error(ke(268,e)));return e=pD(t),e=e===null?null:e.stateNode,e};Ei.flushSync=function(e){return pl(e)};Ei.hydrate=function(e,t,n){if(!Sg(t))throw Error(ke(200));return xg(null,e,t,!0,n)};Ei.hydrateRoot=function(e,t,n){if(!Hb(e))throw Error(ke(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=qO;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=KO(t,null,e,1,n??null,i,!1,a,s),e[Wo]=t.current,eh(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new bg(t)};Ei.render=function(e,t,n){if(!Sg(t))throw Error(ke(200));return xg(null,e,t,!1,n)};Ei.unmountComponentAtNode=function(e){if(!Sg(e))throw Error(ke(40));return e._reactRootContainer?(pl(function(){xg(null,null,e,!1,function(){e._reactRootContainer=null,e[Wo]=null})}),!0):!1};Ei.unstable_batchedUpdates=jb;Ei.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Sg(n))throw Error(ke(200));if(e==null||e._reactInternals===void 0)throw Error(ke(38));return xg(e,t,n,!1,r)};Ei.version="18.3.1-next-f1338f8080-20240426";function YO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YO)}catch(e){console.error(e)}}YO(),YC.exports=Ei;var Qa=YC.exports,SP=Qa;cw.createRoot=SP.createRoot,cw.hydrateRoot=SP.hydrateRoot;function lh(e){"@babel/helpers - typeof";return lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lh(e)}function c3(e,t){if(lh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(lh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f3(e){var t=c3(e,"string");return lh(t)=="symbol"?t:t+""}function xP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f3(r.key),r)}}function au(e,t,n){return t&&xP(e.prototype,t),n&&xP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d3(e){return e[e.length-1]}function ch(e){return Array.isArray(e)?e.slice(0):[e]}function h3(e,t){e=e.slice(0);for(var n=[];e.length;){var r=e.splice(0,t);n.push(r)}return n}function Nv(e){return Array.isArray(e)}function p3(e){return e!=null}function k0(e,t){var n=0,r=-1;for(var i of e){r=r+1;var a=t(i,r);if(a)n=n+1;else break}return n}function ml(e,t){var n=t.length;if(n!==0){var r=e.length;e.length=r+t.length;for(var i=0;i<n;++i)e[r+i]=t[i]}}function m3(e){return e.filter(function(t,n,r){return r.indexOf(t)===n})}function Qs(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(r==="-")return parseInt(t,10);t+=r}throw new Error("malformatted revision: "+e)}function Ko(e,t){var n=t?Qs(t._rev)+1:1;return n+"-"+e}function v3(e){var t=e.split("."),n=t.length;return n===1?r=>r[e]:r=>{for(var i=r,a=0;a<n;++a){var s=t[a];if(i=i[s],typeof i>"u")return i}return i}}function It(e){return Object.assign({},e)}function g3(e){return Object.keys(e)[0]}function Tv(e,t=!1){if(!e)return e;if(!t&&Array.isArray(e))return e.sort((r,i)=>typeof r=="string"&&typeof i=="string"?r.localeCompare(i):typeof r=="object"?1:-1).map(r=>Tv(r,t));if(typeof e=="object"&&!Array.isArray(e)){var n={};return Object.keys(e).sort((r,i)=>r.localeCompare(i)).forEach(r=>{n[r]=Tv(e[r],t)}),n}return e}function r_(e){if(!e||e===null||typeof e!="object")return e;if(Array.isArray(e)){for(var t=new Array(e.length),n=t.length;n--;)t[n]=r_(e[n]);return t}var r={};for(var i in e)r[i]=r_(e[i]);return r}var Ir=r_;function Io(e,t,n){return Object.defineProperty(e,t,{get:function(){return n}}),n}var Kb=1;function cf(){return{lwt:Kb}}function $a(){return""}function y3(e){return Object.assign({},e,{_meta:void 0,_deleted:void 0,_rev:void 0})}function w3(e,t,n){if(t.length!==n.length)return!1;for(var r=0,i=t.length;r<i;){var a=t[r],s=n[r];if(r++,a[e]!==s[e]||a._rev!==s._rev||a._meta.lwt!==s._meta.lwt)return!1}return!0}function fh(e,t){return fh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},fh(e,t)}function qb(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,fh(e,t)}function i_(e){return i_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},i_(e)}function _3(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function VO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VO=function(){return!!e})()}function b3(e,t,n){if(VO())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&fh(i,n.prototype),i}function Mv(e){var t=typeof Map=="function"?new Map:void 0;return Mv=function(r){if(r===null||!_3(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(r))return t.get(r);t.set(r,i)}function i(){return b3(r,arguments,i_(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),fh(i,r)},Mv(e)}var Tt={isDevMode(){return!1},deepFreezeWhenDevMode(e){return e},tunnelErrorMessage(e){return`
        RxDB Error-Code: `+e+`.
        Hint: Error messages are not included in RxDB core to reduce build size.
        To show the full error messages and to ensure that you do not make any mistakes when using RxDB,
        use the dev-mode plugin when you are in development mode: https://rxdb.info/dev-mode.html?console=error
        `}};function S3(e){var t="";return Object.keys(e).length===0||(t+="-".repeat(20)+`
`,t+=`Parameters:
`,t+=Object.keys(e).map(n=>{var r="[object Object]";try{n==="errors"?r=e[n].map(i=>JSON.stringify(i,Object.getOwnPropertyNames(i))):r=JSON.stringify(e[n],function(i,a){return a===void 0?null:a},2)}catch{}return n+": "+r}).join(`
`),t+=`
`),t}function XO(e,t,n){return`
`+e+`
`+S3(n)}var x3=function(e){function t(r,i,a={}){var s,u=XO(i,r,a);return s=e.call(this,u)||this,s.code=r,s.message=u,s.url=Yb(r),s.parameters=a,s.rxdb=!0,s}qb(t,e);var n=t.prototype;return n.toString=function(){return this.message},au(t,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])}(Mv(Error)),E3=function(e){function t(r,i,a={}){var s,u=XO(i,r,a);return s=e.call(this,u)||this,s.code=r,s.message=u,s.url=Yb(r),s.parameters=a,s.rxdb=!0,s}qb(t,e);var n=t.prototype;return n.toString=function(){return this.message},au(t,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])}(Mv(TypeError));function Yb(e){return"https://rxdb.info/errors.html?console=errors#"+e}function QO(e){return`
Find out more about this error here: `+Yb(e)+` 
`}function ze(e,t){return new x3(e,Tt.tunnelErrorMessage(e)+QO(e),t)}function Iv(e,t){return new E3(e,Tt.tunnelErrorMessage(e)+QO(e),t)}function Vc(e){return e&&e.status===409?e:!1}var P3={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function GO(e){return ze("COL20",{name:P3[e.status],document:e.documentId,writeError:e})}var gm;function k3(){var e;if(gm)return gm;if(typeof crypto>"u"||typeof crypto.subtle>"u"||typeof crypto.subtle.digest!="function")throw ze("UT8",{args:{typeof_crypto:typeof crypto,typeof_crypto_subtle:typeof(crypto==null?void 0:crypto.subtle),typeof_crypto_subtle_digest:typeof((e=crypto==null?void 0:crypto.subtle)==null?void 0:e.digest)}});return gm=crypto.subtle.digest.bind(crypto.subtle),gm}async function C3(e){var t=new TextEncoder().encode(e),n=await k3()("SHA-256",t),r=Array.prototype.map.call(new Uint8Array(n),i=>("00"+i.toString(16)).slice(-2)).join("");return r}var JO=C3;function D3(){return new Promise(e=>setTimeout(e,0))}function O3(e=0){return new Promise(t=>setTimeout(t,e))}function ZO(e){return e&&typeof e.then=="function"?e:Promise.resolve(e)}var Vb=Promise.resolve(!0),no=Promise.resolve(!1),Xb=Promise.resolve(null),Qi=Promise.resolve();function Eg(e=1e4){return typeof requestIdleCallback=="function"?new Promise(t=>{requestIdleCallback(()=>t(),{timeout:e})}):O3(0)}var C0=Qi;function $3(e=void 0){return C0=C0.then(()=>Eg(e)),C0}function R3(e){typeof requestIdleCallback=="function"&&requestIdleCallback(()=>{e()})}function N3(e,t){return e.reduce((n,r)=>n.then(r),Promise.resolve(t))}var T3=/\./g,EP="abcdefghijklmnopqrstuvwxyz";function Lh(e=10){for(var t="",n=0;n<e;n++)t+=EP.charAt(Math.floor(Math.random()*EP.length));return t}function e$(e){e+="";var t=e.charAt(0).toUpperCase();return t+e.substr(1)}function bd(e){for(;e.charAt(0)===".";)e=e.substr(1);for(;e.slice(-1)===".";)e=e.slice(0,-1);return e}function dh(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r;if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!dh(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){var a=i[r];if(!dh(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}var a_=e=>{var t=typeof e;return e!==null&&(t==="object"||t==="function")},D0=new Set(["__proto__","prototype","constructor"]),M3=new Set("0123456789");function t$(e){var t=[],n="",r="start",i=!1;for(var a of e)switch(a){case"\\":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");i&&(n+=a),r="property",i=!i;break}case".":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="property";break}if(i){i=!1,n+=a;break}if(D0.has(n))return[];t.push(n),n="",r="property";break}case"[":{if(r==="index")throw new Error("Invalid character in an index");if(r==="indexEnd"){r="index";break}if(i){i=!1,n+=a;break}if(r==="property"){if(D0.has(n))return[];t.push(n),n=""}r="index";break}case"]":{if(r==="index"){t.push(Number.parseInt(n,10)),n="",r="indexEnd";break}if(r==="indexEnd")throw new Error("Invalid character after an index")}default:{if(r==="index"&&!M3.has(a))throw new Error("Invalid character in an index");if(r==="indexEnd")throw new Error("Invalid character after an index");r==="start"&&(r="property"),i&&(i=!1,n+="\\"),n+=a}}switch(i&&(n+="\\"),r){case"property":{if(D0.has(n))return[];t.push(n);break}case"index":throw new Error("Index was not closed");case"start":{t.push("");break}}return t}function n$(e,t){if(typeof t!="number"&&Array.isArray(e)){var n=Number.parseInt(t,10);return Number.isInteger(n)&&e[n]===e[t]}return!1}function I3(e,t){if(n$(e,t))throw new Error("Cannot use string index")}function Gs(e,t,n){if(Array.isArray(t)&&(t=t.join(".")),!t.includes(".")&&!t.includes("["))return e[t];if(!a_(e)||typeof t!="string")return n===void 0?e:n;var r=t$(t);if(r.length===0)return n;for(var i=0;i<r.length;i++){var a=r[i];if(n$(e,a)?e=i===r.length-1?void 0:null:e=e[a],e==null){if(i!==r.length-1)return n;break}}return e===void 0?n:e}function r$(e,t,n){if(Array.isArray(t)&&(t=t.join(".")),!a_(e)||typeof t!="string")return e;for(var r=e,i=t$(t),a=0;a<i.length;a++){var s=i[a];I3(e,s),a===i.length-1?e[s]=n:a_(e[s])||(e[s]=typeof i[a+1]=="number"?[]:{}),e=e[s]}return r}function Xc(e,t){var n=e.get(t);if(typeof n>"u")throw new Error("missing value from map "+t);return n}function Ar(e,t,n,r){var i=e.get(t);return typeof i>"u"?(i=n(),e.set(t,i)):r&&r(i),i}function Rt(e){var t=e.split("-"),n="RxDB";return t.forEach(r=>{n+=e$(r)}),n+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+n+" } from 'rxdb/plugins/"+e+`';
            addRxPlugin(`+n+`);
        `)}function o_(e){var t={name:e.name,message:e.message,rxdb:e.rxdb,parameters:e.parameters,extensions:e.extensions,code:e.code,url:e.url,stack:e.stack?e.stack.replace(/\n/g,` 
 `):void 0};return t}var O0=0;function ki(){var e=Date.now();e=e+.01,e<=O0&&(e=O0+.01);var t=parseFloat(e.toFixed(2));return O0=t,t}function Ye(e,t){if(!e)throw t||(t=""),new Error("ensureNotFalsy() is falsy: "+t);return e}var zh={bufferSize:1,refCount:!0},i$="16.20.0",$0={},A3="6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93",PP=16,R0=no,kP=!1;async function a$(){return kP||(kP=!0,R0=(async()=>!!($0.premium&&typeof $0.premium=="string"&&await JO($0.premium)===A3))()),R0}var hh={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postCloseRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],prePrepareRxQuery:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preCloseRxDatabase:[],postRemoveRxDatabase:[],postCleanup:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function ii(e,t){hh[e].length>0&&hh[e].forEach(n=>n(t))}async function vl(e,t){for(var n of hh[e])await n(t)}function Qc(e,t){var n=t;n=n.replace(T3,".properties."),n="properties."+n,n=bd(n);var r=Gs(e,n);return r}function j3(e,t,n){if(typeof t.primaryKey=="string")return n;var r=ou(t,n),i=n[e];if(i&&i!==r)throw ze("DOC19",{args:{documentData:n,existingPrimary:i,newPrimary:r},schema:t});return n[e]=r,n}function ai(e){return typeof e=="string"?e:e.key}function L3(e){var t=ai(e.primaryKey),n=Qc(e,t);return Ye(n.maxLength)}function ou(e,t){if(typeof e.primaryKey=="string")return t[e.primaryKey];var n=e.primaryKey;return n.fields.map(r=>{var i=Gs(t,r);if(typeof i>"u")throw ze("DOC18",{args:{field:r,documentData:t}});return i}).join(n.separator)}function z3(e){var t=Tv(e,!0);return t}function F3(e){return["_deleted",e]}function Pg(e){e=It(e);var t=ai(e.primaryKey);e.properties=It(e.properties),e.additionalProperties=!1,Object.prototype.hasOwnProperty.call(e,"keyCompression")||(e.keyCompression=!1),e.indexes=e.indexes?e.indexes.slice(0):[],e.required=e.required?e.required.slice(0):[],e.encrypted=e.encrypted?e.encrypted.slice(0):[],e.properties._rev={type:"string",minLength:1},e.properties._attachments={type:"object"},e.properties._deleted={type:"boolean"},e.properties._meta=W3,e.required=e.required?e.required.slice(0):[],e.required.push("_deleted"),e.required.push("_rev"),e.required.push("_meta"),e.required.push("_attachments");var n=o$(e);ml(e.required,n),e.required=e.required.filter(a=>!a.includes(".")).filter((a,s,u)=>u.indexOf(a)===s),e.version=e.version||0;var r=e.indexes.map(a=>{var s=Nv(a)?a.slice(0):[a];return s.includes(t)||s.push(t),s[0]!=="_deleted"&&s.unshift("_deleted"),s});r.length===0&&r.push(F3(t)),r.push(["_meta.lwt",t]),e.internalIndexes&&e.internalIndexes.map(a=>{r.push(a)});var i=new Set;return r.filter(a=>{var s=a.join(",");return i.has(s)?!1:(i.add(s),!0)}),e.indexes=r,e}var B3=1e15,W3={type:"object",properties:{lwt:{type:"number",minimum:Kb,maximum:B3,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function o$(e){var t=Object.keys(e.properties).filter(r=>e.properties[r].final),n=ai(e.primaryKey);return t.push(n),typeof e.primaryKey!="string"&&e.primaryKey.fields.forEach(r=>t.push(r)),t}function U3(e,t){for(var n=Object.keys(e.defaultValues),r=0;r<n.length;++r){var i=n[r];(!Object.prototype.hasOwnProperty.call(t,i)||typeof t[i]>"u")&&(t[i]=e.defaultValues[i])}return t}var s$=function(){function e(n,r){if(this.jsonSchema=n,this.hashFunction=r,this.indexes=H3(this.jsonSchema),this.primaryPath=ai(this.jsonSchema.primaryKey),!n.properties[this.primaryPath].maxLength)throw ze("SC39",{schema:n});this.finalFields=o$(this.jsonSchema)}var t=e.prototype;return t.validateChange=function(r,i){this.finalFields.forEach(a=>{if(!dh(r[a],i[a]))throw ze("DOC9",{dataBefore:r,dataAfter:i,fieldName:a,schema:this.jsonSchema})})},t.getDocumentPrototype=function(){var r={},i=Qc(this.jsonSchema,"");return Object.keys(i).forEach(a=>{var s=a;r.__defineGetter__(a,function(){if(!(!this.get||typeof this.get!="function")){var u=this.get(s);return u}}),Object.defineProperty(r,a+"$",{get:function(){return this.get$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(r,a+"$$",{get:function(){return this.get$$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(r,a+"_",{get:function(){return this.populate(s)},enumerable:!1,configurable:!1})}),Io(this,"getDocumentPrototype",()=>r),r},t.getPrimaryOfDocumentData=function(r){return ou(this.jsonSchema,r)},au(e,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var n={};return Object.entries(this.jsonSchema.properties).filter(([,r])=>Object.prototype.hasOwnProperty.call(r,"default")).forEach(([r,i])=>n[r]=i.default),Io(this,"defaultValues",n)}},{key:"hash",get:function(){return Io(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])}();function H3(e){return(e.indexes||[]).map(t=>Nv(t)?t:[t])}function K3(e){var t=e.version?e.version:0,n=0;return new Array(t).fill(0).map(()=>n++)}function q3(e,t,n=!0){n&&ii("preCreateRxSchema",e);var r=Pg(e);r=z3(r),Tt.deepFreezeWhenDevMode(r);var i=new s$(r,t);return ii("createRxSchema",i),i}function Dn(e){return typeof e=="function"}function Y3(e){return Dn(e==null?void 0:e.lift)}function ao(e){return function(t){if(Y3(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}var s_=function(e,t){return s_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},s_(e,t)};function Sl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");s_(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function V3(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function u(h){try{d(r.next(h))}catch(v){s(v)}}function c(h){try{d(r.throw(h))}catch(v){s(v)}}function d(h){h.done?a(h.value):i(h.value).then(u,c)}d((r=r.apply(e,t||[])).next())})}function u$(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(h){return c([d,h])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){n.label=d[1];break}if(d[0]===6&&n.label<a[1]){n.label=a[1],a=d;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(d);break}a[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(h){d=[6,h],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Gc(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Js(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function Zs(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function Dc(e){return this instanceof Dc?(this.v=e,this):new Dc(e)}function X3(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(w){return Promise.resolve(w).then(g,v)}}function u(g,w){r[g]&&(i[g]=function(x){return new Promise(function(C,S){a.push([g,x,C,S])>1||c(g,x)})},w&&(i[g]=w(i[g])))}function c(g,w){try{d(r[g](w))}catch(x){y(a[0][3],x)}}function d(g){g.value instanceof Dc?Promise.resolve(g.value.v).then(h,v):y(a[0][2],g)}function h(g){c("next",g)}function v(g){c("throw",g)}function y(g,w){g(w),a.shift(),a.length&&c(a[0][0],a[0][1])}}function Q3(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Gc=="function"?Gc(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(s){return new Promise(function(u,c){s=e[a](s),i(u,c,s.done,s.value)})}}function i(a,s,u,c){Promise.resolve(c).then(function(d){a({value:d,done:u})},s)}}var l$=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function c$(e){return Dn(e==null?void 0:e.then)}function Qb(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var N0=Qb(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function u_(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var kg=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,a;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var u=Gc(s),c=u.next();!c.done;c=u.next()){var d=c.value;d.remove(this)}}catch(x){t={error:x}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}else s.remove(this);var h=this.initialTeardown;if(Dn(h))try{h()}catch(x){a=x instanceof N0?x.errors:[x]}var v=this._finalizers;if(v){this._finalizers=null;try{for(var y=Gc(v),g=y.next();!g.done;g=y.next()){var w=g.value;try{CP(w)}catch(x){a=a??[],x instanceof N0?a=Zs(Zs([],Js(a)),Js(x.errors)):a.push(x)}}}catch(x){r={error:x}}finally{try{g&&!g.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}}if(a)throw new N0(a)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)CP(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&u_(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&u_(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),f$=kg.EMPTY;function d$(e){return e instanceof kg||e&&"closed"in e&&Dn(e.remove)&&Dn(e.add)&&Dn(e.unsubscribe)}function CP(e){Dn(e)?e():e.unsubscribe()}var h$={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},l_={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=l_.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,Zs([e,t],Js(n))):setTimeout.apply(void 0,Zs([e,t],Js(n)))},clearTimeout:function(e){var t=l_.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function p$(e){l_.setTimeout(function(){throw e})}function DP(){}function Xm(e){e()}var Gb=function(e){Sl(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,d$(n)&&n.add(r)):r.destination=eB,r}return t.create=function(n,r,i){return new Jc(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(kg),G3=Function.prototype.bind;function T0(e,t){return G3.call(e,t)}var J3=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){ym(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){ym(r)}else ym(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){ym(n)}},e}(),Jc=function(e){Sl(t,e);function t(n,r,i){var a=e.call(this)||this,s;if(Dn(n)||!n)s={next:n??void 0,error:r??void 0,complete:i??void 0};else{var u;a&&h$.useDeprecatedNextContext?(u=Object.create(n),u.unsubscribe=function(){return a.unsubscribe()},s={next:n.next&&T0(n.next,u),error:n.error&&T0(n.error,u),complete:n.complete&&T0(n.complete,u)}):s=n}return a.destination=new J3(s),a}return t}(Gb);function ym(e){p$(e)}function Z3(e){throw e}var eB={closed:!0,next:DP,error:Z3,complete:DP},Jb=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Fh(e){return e}function tB(e){return e.length===0?Fh:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var bi=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,a=rB(t)?t:new Jc(t,n,r);return Xm(function(){var s=i,u=s.operator,c=s.source;a.add(u?u.call(a,c):c?i._subscribe(a):i._trySubscribe(a))}),a},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=OP(n),new n(function(i,a){var s=new Jc({next:function(u){try{t(u)}catch(c){a(c),s.unsubscribe()}},error:a,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[Jb]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return tB(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=OP(t),new t(function(r,i){var a;n.subscribe(function(s){return a=s},function(s){return i(s)},function(){return r(a)})})},e.create=function(t){return new e(t)},e}();function OP(e){var t;return(t=e??h$.Promise)!==null&&t!==void 0?t:Promise}function nB(e){return e&&Dn(e.next)&&Dn(e.error)&&Dn(e.complete)}function rB(e){return e&&e instanceof Gb||nB(e)&&d$(e)}function m$(e){return Dn(e[Jb])}function v$(e){return Symbol.asyncIterator&&Dn(e==null?void 0:e[Symbol.asyncIterator])}function g$(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function iB(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var y$=iB();function w$(e){return Dn(e==null?void 0:e[y$])}function _$(e){return X3(this,arguments,function(){var n,r,i,a;return u$(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,Dc(n.read())];case 3:return r=s.sent(),i=r.value,a=r.done,a?[4,Dc(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,Dc(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function b$(e){return Dn(e==null?void 0:e.getReader)}function Jo(e){if(e instanceof bi)return e;if(e!=null){if(m$(e))return aB(e);if(l$(e))return oB(e);if(c$(e))return sB(e);if(v$(e))return S$(e);if(w$(e))return uB(e);if(b$(e))return lB(e)}throw g$(e)}function aB(e){return new bi(function(t){var n=e[Jb]();if(Dn(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function oB(e){return new bi(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function sB(e){return new bi(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,p$)})}function uB(e){return new bi(function(t){var n,r;try{for(var i=Gc(e),a=i.next();!a.done;a=i.next()){var s=a.value;if(t.next(s),t.closed)return}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function S$(e){return new bi(function(t){cB(e,t).catch(function(n){return t.error(n)})})}function lB(e){return S$(_$(e))}function cB(e,t){var n,r,i,a;return V3(this,void 0,void 0,function(){var s,u;return u$(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=Q3(e),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=c.sent(),i={error:u},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function qo(e,t,n,r,i){return new fB(e,t,n,r,i)}var fB=function(e){Sl(t,e);function t(n,r,i,a,s,u){var c=e.call(this,n)||this;return c.onFinalize=s,c.shouldUnsubscribe=u,c._next=r?function(d){try{r(d)}catch(h){n.error(h)}}:e.prototype._next,c._error=a?function(d){try{a(d)}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=i?function(){try{i()}catch(d){n.error(d)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(Gb),x$={now:function(){return(x$.delegate||Date).now()},delegate:void 0};function dB(e){return e&&Dn(e.schedule)}function Zb(e){return e[e.length-1]}function hB(e){return Dn(Zb(e))?e.pop():void 0}function Bh(e){return dB(Zb(e))?e.pop():void 0}function E$(e,t){return typeof Zb(e)=="number"?e.pop():t}function Ao(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var a=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(a),!i)return a}var pB=Array.isArray,mB=Object.getPrototypeOf,vB=Object.prototype,gB=Object.keys;function yB(e){if(e.length===1){var t=e[0];if(pB(t))return{args:t,keys:null};if(wB(t)){var n=gB(t);return{args:n.map(function(r){return t[r]}),keys:n}}}return{args:e,keys:null}}function wB(e){return e&&typeof e=="object"&&mB(e)===vB}function P$(e,t){return t===void 0&&(t=0),ao(function(n,r){n.subscribe(qo(r,function(i){return Ao(r,e,function(){return r.next(i)},t)},function(){return Ao(r,e,function(){return r.complete()},t)},function(i){return Ao(r,e,function(){return r.error(i)},t)}))})}function k$(e,t){return t===void 0&&(t=0),ao(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function _B(e,t){return Jo(e).pipe(k$(t),P$(t))}function bB(e,t){return Jo(e).pipe(k$(t),P$(t))}function SB(e,t){return new bi(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function xB(e,t){return new bi(function(n){var r;return Ao(n,t,function(){r=e[y$](),Ao(n,t,function(){var i,a,s;try{i=r.next(),a=i.value,s=i.done}catch(u){n.error(u);return}s?n.complete():n.next(a)},0,!0)}),function(){return Dn(r==null?void 0:r.return)&&r.return()}})}function C$(e,t){if(!e)throw new Error("Iterable cannot be null");return new bi(function(n){Ao(n,t,function(){var r=e[Symbol.asyncIterator]();Ao(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function EB(e,t){return C$(_$(e),t)}function PB(e,t){if(e!=null){if(m$(e))return _B(e,t);if(l$(e))return SB(e,t);if(c$(e))return bB(e,t);if(v$(e))return C$(e,t);if(w$(e))return xB(e,t);if(b$(e))return EB(e,t)}throw g$(e)}function Wh(e,t){return t?PB(e,t):Jo(e)}function _n(e,t){return ao(function(n,r){var i=0;n.subscribe(qo(r,function(a){r.next(e.call(t,a,i++))}))})}var kB=Array.isArray;function CB(e,t){return kB(t)?e.apply(void 0,Zs([],Js(t))):e(t)}function DB(e){return _n(function(t){return CB(e,t)})}function OB(e,t){return e.reduce(function(n,r,i){return n[r]=t[i],n},{})}function D$(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Bh(e),r=hB(e),i=yB(e),a=i.args,s=i.keys;if(a.length===0)return Wh([],n);var u=new bi($B(a,n,s?function(c){return OB(s,c)}:Fh));return r?u.pipe(DB(r)):u}function $B(e,t,n){return n===void 0&&(n=Fh),function(r){$P(t,function(){for(var i=e.length,a=new Array(i),s=i,u=i,c=function(h){$P(t,function(){var v=Wh(e[h],t),y=!1;v.subscribe(qo(r,function(g){a[h]=g,y||(y=!0,u--),u||r.next(n(a.slice()))},function(){--s||r.complete()}))},r)},d=0;d<i;d++)c(d)},r)}}function $P(e,t,n){e?Ao(n,e,t):t()}function RB(e,t,n,r,i,a,s,u){var c=[],d=0,h=0,v=!1,y=function(){v&&!c.length&&!d&&t.complete()},g=function(x){return d<r?w(x):c.push(x)},w=function(x){a&&t.next(x),d++;var C=!1;Jo(n(x,h++)).subscribe(qo(t,function(S){i==null||i(S),a?g(S):t.next(S)},function(){C=!0},void 0,function(){if(C)try{d--;for(var S=function(){var E=c.shift();s?Ao(t,s,function(){return w(E)}):w(E)};c.length&&d<r;)S();y()}catch(E){t.error(E)}}))};return e.subscribe(qo(t,g,function(){v=!0,y()})),function(){u==null||u()}}function ro(e,t,n){return n===void 0&&(n=1/0),Dn(t)?ro(function(r,i){return _n(function(a,s){return t(r,a,i,s)})(Jo(e(r,i)))},n):(typeof t=="number"&&(n=t),ao(function(r,i){return RB(r,i,e,n)}))}function e1(e){return e===void 0&&(e=1/0),ro(Fh,e)}function NB(){return e1(1)}var TB=Qb(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),br=function(e){Sl(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new RP(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new TB},t.prototype.next=function(n){var r=this;Xm(function(){var i,a;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=Gc(r.currentObservers),u=s.next();!u.done;u=s.next()){var c=u.value;c.next(n)}}catch(d){i={error:d}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;Xm(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;Xm(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,a=i.hasError,s=i.isStopped,u=i.observers;return a||s?f$:(this.currentObservers=null,u.push(n),new kg(function(){r.currentObservers=null,u_(u,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,a=r.thrownError,s=r.isStopped;i?n.error(a):s&&n.complete()},t.prototype.asObservable=function(){var n=new bi;return n.source=this,n},t.create=function(n,r){return new RP(n,r)},t}(bi),RP=function(e){Sl(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:f$},t}(br);function NP(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return NB()(Wh(e,Bh(e)))}var MB=new bi(function(e){return e.complete()});function ph(e,t){return t===void 0&&(t=Fh),e=e??IB,ao(function(n,r){var i,a=!0;n.subscribe(qo(r,function(s){var u=t(s);(a||!e(i,u))&&(a=!1,i=u,r.next(s))}))})}function IB(e,t){return e===t}function Nt(e,t){return ao(function(n,r){var i=0;n.subscribe(qo(r,function(a){return e.call(t,a,i++)&&r.next(a)}))})}var AB=Qb(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function jB(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Bh(e),r=E$(e,1/0);return ao(function(i,a){e1(r)(Wh(Zs([i],Js(e)),n)).subscribe(a)})}function LB(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return jB.apply(void 0,Zs([],Js(e)))}var qa=function(e){Sl(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,a=n._value;if(r)throw i;return this._throwIfClosed(),a},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t}(br),zB=function(e){Sl(t,e);function t(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=x$);var a=e.call(this)||this;return a._bufferSize=n,a._windowTime=r,a._timestampProvider=i,a._buffer=[],a._infiniteTimeWindow=!0,a._infiniteTimeWindow=r===1/0,a._bufferSize=Math.max(1,n),a._windowTime=Math.max(1,r),a}return t.prototype.next=function(n){var r=this,i=r.isStopped,a=r._buffer,s=r._infiniteTimeWindow,u=r._timestampProvider,c=r._windowTime;i||(a.push(n),!s&&a.push(u.now()+c)),this._trimBuffer(),e.prototype.next.call(this,n)},t.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,a=i._infiniteTimeWindow,s=i._buffer,u=s.slice(),c=0;c<u.length&&!n.closed;c+=a?1:2)n.next(u[c]);return this._checkFinalizedStatuses(n),r},t.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,a=n._buffer,s=n._infiniteTimeWindow,u=(s?1:2)*r;if(r<1/0&&u<a.length&&a.splice(0,a.length-u),!s){for(var c=i.now(),d=0,h=1;h<a.length&&a[h]<=c;h+=2)d=h;d&&a.splice(0,d+1)}},t}(br);function FB(e){e===void 0&&(e={});var t=e.connector,n=t===void 0?function(){return new br}:t,r=e.resetOnError,i=r===void 0?!0:r,a=e.resetOnComplete,s=a===void 0?!0:a,u=e.resetOnRefCountZero,c=u===void 0?!0:u;return function(d){var h,v,y,g=0,w=!1,x=!1,C=function(){v==null||v.unsubscribe(),v=void 0},S=function(){C(),h=y=void 0,w=x=!1},E=function(){var P=h;S(),P==null||P.unsubscribe()};return ao(function(P,N){g++,!x&&!w&&C();var T=y=y??n();N.add(function(){g--,g===0&&!x&&!w&&(v=M0(E,c))}),T.subscribe(N),!h&&g>0&&(h=new Jc({next:function(U){return T.next(U)},error:function(U){x=!0,C(),v=M0(S,i,U),T.error(U)},complete:function(){w=!0,C(),v=M0(S,s),T.complete()}}),Jo(P).subscribe(h))})(d)}}function M0(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t===!0){e();return}if(t!==!1){var i=new Jc({next:function(){i.unsubscribe(),e()}});return Jo(t.apply(void 0,Zs([],Js(n)))).subscribe(i)}}function Uh(e,t,n){var r,i,a,s,u=!1;return e&&typeof e=="object"?(r=e.bufferSize,s=r===void 0?1/0:r,i=e.windowTime,t=i===void 0?1/0:i,a=e.refCount,u=a===void 0?!1:a,n=e.scheduler):s=e??1/0,FB({connector:function(){return new zB(s,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}function Hh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Bh(e);return ao(function(r,i){(n?NP(e,r,n):NP(e,r)).subscribe(i)})}function BB(e,t){return ao(function(n,r){var i=null,a=0,s=!1,u=function(){return s&&!i&&r.complete()};n.subscribe(qo(r,function(c){i==null||i.unsubscribe();var d=0,h=a++;Jo(e(c,h)).subscribe(i=qo(r,function(v){return r.next(t?t(c,v,h,d++):v)},function(){i=null,u()}))},function(){s=!0,u()}))})}function O$(e){return e.documentData?e.documentData:e.previousDocumentData}function WB(e){switch(e.operation){case"INSERT":return{operation:e.operation,id:e.documentId,doc:e.documentData,previous:null};case"UPDATE":return{operation:e.operation,id:e.documentId,doc:Tt.deepFreezeWhenDevMode(e.documentData),previous:e.previousDocumentData?e.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:e.operation,id:e.documentId,doc:null,previous:e.previousDocumentData}}}var UB=new Map;function $$(e){return Ar(UB,e,()=>{for(var t=new Array(e.events.length),n=e.events,r=e.collectionName,i=e.isLocal,a=Tt.deepFreezeWhenDevMode,s=0;s<n.length;s++){var u=n[s];t[s]={documentId:u.documentId,collectionName:r,isLocal:i,operation:u.operation,documentData:a(u.documentData),previousDocumentData:a(u.previousDocumentData)}}return t})}function ol(e,t){var n=typeof t=="object";return new Promise(function(r,i){var a=new Jc({next:function(s){r(s),a.unsubscribe()},error:i,complete:function(){n?r(t.defaultValue):i(new AB)}});e.subscribe(a)})}function HB(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Bh(e),r=E$(e,1/0),i=e;return i.length?i.length===1?Jo(i[0]):e1(r)(Wh(i,n)):MB}var Oc=String.fromCharCode(65535),$c=Number.MIN_SAFE_INTEGER;function KB(e,t){var n=t.selector,r=e.indexes?e.indexes.slice(0):[];t.index&&(r=[t.index]);var i=!!t.sort.find(h=>Object.values(h)[0]==="desc"),a=new Set;Object.keys(n).forEach(h=>{var v=Qc(e,h);v&&v.type==="boolean"&&Object.prototype.hasOwnProperty.call(n[h],"$eq")&&a.add(h)});var s=t.sort.map(h=>Object.keys(h)[0]),u=s.filter(h=>!a.has(h)).join(","),c=-1,d;if(r.forEach(h=>{var v=!0,y=!0,g=h.map(E=>{var P=n[E],N=P?Object.keys(P):[],T={};if(!P||!N.length){var U=y?$c:Oc;T={startKey:U,endKey:v?Oc:$c,inclusiveStart:!0,inclusiveEnd:!0}}else N.forEach(W=>{if(t1.has(W)){var re=P[W],pe=XB(W,re);T=Object.assign(T,pe)}});return typeof T.startKey>"u"&&(T.startKey=$c),typeof T.endKey>"u"&&(T.endKey=Oc),typeof T.inclusiveStart>"u"&&(T.inclusiveStart=!0),typeof T.inclusiveEnd>"u"&&(T.inclusiveEnd=!0),y&&!T.inclusiveStart&&(y=!1),v&&!T.inclusiveEnd&&(v=!1),T}),w=g.map(E=>E.startKey),x=g.map(E=>E.endKey),C={index:h,startKeys:w,endKeys:x,inclusiveEnd:v,inclusiveStart:y,sortSatisfiedByIndex:!i&&u===h.filter(E=>!a.has(E)).join(","),selectorSatisfiedByIndex:VB(h,t.selector,w,x)},S=QB(e,t,C);(S>=c||t.index)&&(c=S,d=C)}),!d)throw ze("SNH",{query:t});return d}var t1=new Set(["$eq","$gt","$gte","$lt","$lte"]),qB=new Set(["$eq","$gt","$gte"]),YB=new Set(["$eq","$lt","$lte"]);function VB(e,t,n,r){var i=Object.entries(t),a=i.find(([W,re])=>{if(!e.includes(W))return!0;var pe=Object.entries(re).find(([he,ce])=>!t1.has(he));return pe});if(a||t.$and||t.$or)return!1;var s=[],u=new Set;for(var[c,d]of Object.entries(t)){if(!e.includes(c))return!1;var h=Object.keys(d).filter(W=>qB.has(W));if(h.length>1)return!1;var v=h[0];if(v&&u.add(c),v!=="$eq"){if(s.length>0)return!1;s.push(v)}}var y=[],g=new Set;for(var[w,x]of Object.entries(t)){if(!e.includes(w))return!1;var C=Object.keys(x).filter(W=>YB.has(W));if(C.length>1)return!1;var S=C[0];if(S&&g.add(w),S!=="$eq"){if(y.length>0)return!1;y.push(S)}}var E=0;for(var P of e){for(var N of[u,g]){if(!N.has(P)&&N.size>0)return!1;N.delete(P)}var T=n[E],U=r[E];if(T!==U&&u.size>0&&g.size>0)return!1;E++}return!0}function XB(e,t){switch(e){case"$eq":return{startKey:t,endKey:t,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:t,inclusiveEnd:!0};case"$gte":return{startKey:t,inclusiveStart:!0};case"$lt":return{endKey:t,inclusiveEnd:!1};case"$gt":return{startKey:t,inclusiveStart:!1};default:throw new Error("SNH")}}function QB(e,t,n){var r=0,i=h=>{h>0&&(r=r+h)},a=10,s=k0(n.startKeys,h=>h!==$c&&h!==Oc);i(s*a);var u=k0(n.startKeys,h=>h!==Oc&&h!==$c);i(u*a);var c=k0(n.startKeys,(h,v)=>h===n.endKeys[v]);i(c*a*1.5);var d=n.sortSatisfiedByIndex?5:0;return i(d),r}class Kh extends Error{}const mh=Symbol("missing"),R$=Object.freeze(new Error("mingo: cycle detected while processing object/array")),qh=e=>{const t=Qm(e);let n=0,r=t.length;for(;r;)n=(n<<5)-n^t.charCodeAt(--r);return n>>>0},Ns=e=>typeof e!="object"&&typeof e!="function"||e===null,N$=e=>Ns(e)||Zc(e)||jo(e),T$={undefined:1,null:2,number:3,string:4,symbol:5,object:6,array:7,arraybuffer:8,boolean:9,date:10,regexp:11,function:12},ta=(e,t)=>{e===mh&&(e=void 0),t===mh&&(t=void 0);const[n,r]=[e,t].map(i=>T$[gh(i)]||0);return n!==r?n-r:Ca(e,t)?0:e<t?-1:e>t?1:0};var Dh,Do,tl;const CS=class CS extends Map{constructor(){super();vn(this,Dh,qh);vn(this,Do,new Map);vn(this,tl,n=>{const r=Me(this,Dh).call(this,n);return[(Me(this,Do).get(r)||[]).find(i=>Ca(i,n)),r]})}static init(n){const r=new CS;return n&&gn(r,Dh,n),r}clear(){super.clear(),Me(this,Do).clear()}delete(n){if(Ns(n))return super.delete(n);const[r,i]=Me(this,tl).call(this,n);return super.delete(r)?(Me(this,Do).set(i,Me(this,Do).get(i).filter(a=>!Ca(a,r))),!0):!1}get(n){if(Ns(n))return super.get(n);const[r,i]=Me(this,tl).call(this,n);return super.get(r)}has(n){if(Ns(n))return super.has(n);const[r,i]=Me(this,tl).call(this,n);return super.has(r)}set(n,r){if(Ns(n))return super.set(n,r);const[i,a]=Me(this,tl).call(this,n);if(super.has(i))super.set(i,r);else{super.set(n,r);const s=Me(this,Do).get(a)||[];s.push(n),Me(this,Do).set(a,s)}return this}get size(){return super.size}};Dh=new WeakMap,Do=new WeakMap,tl=new WeakMap;let vh=CS;function Mt(e,t){if(!e)throw new Kh(t)}const GB=Object.keys(T$).reduce((e,t)=>(e["[object "+t[0].toUpperCase()+t.substring(1)+"]"]=t,e),{});function gh(e){var n,r;const t=Object.prototype.toString.call(e);return t==="[object Object]"?((r=(n=e==null?void 0:e.constructor)==null?void 0:n.name)==null?void 0:r.toLowerCase())||"object":GB[t]||t.substring(8,t.length-1).toLowerCase()}const Rc=e=>typeof e=="boolean",Ra=e=>typeof e=="string",JB=e=>typeof e=="symbol",Wn=e=>!isNaN(e)&&typeof e=="number",mt=Array.isArray;function bn(e){if(!e)return!1;const t=Object.getPrototypeOf(e);return(t===Object.prototype||t===null)&&gh(e)==="object"}const M$=e=>!Ns(e),Zc=e=>e instanceof Date,jo=e=>e instanceof RegExp,Cg=e=>typeof e=="function",Si=e=>e==null,ef=(e,t=!0)=>!!e||t&&e==="",n1=e=>Si(e)||Ra(e)&&!e||mt(e)&&e.length===0||bn(e)&&Object.keys(e).length===0,ff=e=>mt(e)?e:[e],Na=(e,t)=>!!e&&Object.prototype.hasOwnProperty.call(e,t),ZB=e=>typeof ArrayBuffer<"u"&&ArrayBuffer.isView(e),tf=(e,t)=>{if(Si(e)||Rc(e)||Wn(e)||Ra(e))return e;if(Zc(e))return new Date(e);if(jo(e))return new RegExp(e);if(ZB(e)){const n=e.constructor;return new n(e)}if(t instanceof Set||(t=new Set),t.has(e))throw R$;t.add(e);try{if(mt(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=tf(e[r],t);return n}if(bn(e)){const n={};for(const r of Object.keys(e))n[r]=tf(e[r],t);return n}}finally{t.delete(e)}return e},TP=e=>e===mh;function c_(e,t){if(TP(e)||Si(e))return t;if(TP(t)||Si(t))return e;if(Ns(e)||Ns(t))return t;mt(e)&&mt(t)&&Mt(e.length===t.length,"arrays must be of equal length to merge.");for(const n of Object.keys(t))e[n]=c_(e[n],t[n]);return e}function I$(e,t=qh){const n=[vh.init(t),vh.init(t)];if(e.length===0)return[];if(e.some(r=>r.length===0))return[];if(e.length===1)return[...e];e[e.length-1].forEach(r=>n[0].set(r,!0));for(let r=e.length-2;r>-1;r--){if(e[r].forEach(i=>{n[0].has(i)&&n[1].set(i,!0)}),n[1].size===0)return[];n.reverse(),n[1].clear()}return Array.from(n[0].keys())}function A$(e,t=1){const n=new Array;function r(i,a){for(let s=0,u=i.length;s<u;s++)mt(i[s])&&(a>0||a<0)?r(i[s],Math.max(-1,a-1)):n.push(i[s])}return r(e,t),n}function eW(e){const t={};for(;e;){for(const n of Object.getOwnPropertyNames(e))n in t||(t[n]=e[n]);e=Object.getPrototypeOf(e)}return t}function j$(e){for(;e;){if(Object.getOwnPropertyNames(e).includes("toString"))return e.toString!==Object.prototype.toString;e=Object.getPrototypeOf(e)}return!1}function Ca(e,t){if(e===t||Object.is(e,t))return!0;if(e===null||t===null||typeof e!=typeof t||typeof e!="object"||e.constructor!==t.constructor)return!1;if(e instanceof Date)return+e==+t;if(e instanceof RegExp)return e.toString()===t.toString();const n=e.constructor;if(n===Array||n===Object){const r=Object.keys(e).sort(),i=Object.keys(t).sort();if(r.length!==i.length)return!1;for(let a=0,s=r[a];a<r.length;s=r[++a])if(s!==i[a]||!Ca(e[s],t[s]))return!1;return!0}return j$(e)&&e.toString()===t.toString()}function tW(e,t=qh){const n=vh.init(t);return e.forEach(r=>n.set(r,!0)),Array.from(n.keys())}const Qm=(e,t)=>{if(e===null)return"null";if(e===void 0)return"undefined";if(Ra(e)||Wn(e)||Rc(e))return JSON.stringify(e);if(Zc(e))return e.toISOString();if(jo(e)||JB(e)||Cg(e))return e.toString();if(t instanceof Set||(t=new Set),t.has(e))throw R$;try{if(t.add(e),mt(e))return"["+e.map(r=>Qm(r,t)).join(",")+"]";if(bn(e))return"{"+Object.keys(e).sort().map(i=>`${i}:${Qm(e[i],t)}`).join()+"}";const n=j$(e)?e.toString():Qm(eW(e),t);return gh(e)+"("+n+")"}finally{t.delete(e)}};function nW(e,t){return Si(e)?null:(t=t||qh,t(e))}function rW(e,t,n=qh){if(e.length<1)return new Map;const r=new Map,i=new Map;for(let a=0;a<e.length;a++){const s=e[a],u=t(s,a),c=nW(u,n);if(c===null)i.has(null)?i.get(null).push(s):i.set(null,[s]);else{const d=r.has(c)?r.get(c).find(h=>Ca(h,u)):null;Si(d)?(i.set(u,[s]),r.has(c)?r.get(c).push(u):r.set(c,[u])):i.get(d).push(s)}}return i}function f_(e,t){return M$(e)?e[t]:void 0}function iW(e,t){if(t<1)return e;for(;t--&&e.length===1;)e=e[0];return e}function io(e,t,n){let r=0;function i(s,u){let c=s;for(let d=0;d<u.length;d++){const h=u[d];if(/^\d+$/.exec(h)===null&&mt(c)){if(d===0&&r>0)break;r+=1;const y=u.slice(d);c=c.reduce((g,w)=>{const x=i(w,y);return x!==void 0&&g.push(x),g},[]);break}else c=f_(c,h);if(c===void 0)break}return c}const a=N$(e)?e:i(e,t.split("."));return mt(a)&&(n!=null&&n.unwrapArray)?iW(a,r):a}function Td(e,t,n){const r=t.indexOf("."),i=r==-1?t:t.substring(0,r),a=t.substring(r+1),s=r!=-1;if(mt(e)){const d=/^\d+$/.test(i),h=d&&(n!=null&&n.preserveIndex)?[...e]:[];if(d){const v=parseInt(i);let y=f_(e,v);s&&(y=Td(y,a,n)),n!=null&&n.preserveIndex?h[v]=y:h.push(y)}else for(const v of e){const y=Td(v,t,n);n!=null&&n.preserveMissing?h.push(y??mh):(y!=null||n!=null&&n.preserveIndex)&&h.push(y)}return h}const u=n!=null&&n.preserveKeys?{...e}:{};let c=f_(e,i);if(s&&(c=Td(c,a,n)),c!==void 0)return u[i]=c,u}function d_(e){if(mt(e))for(let t=e.length-1;t>=0;t--)e[t]===mh?e.splice(t,1):d_(e[t]);else if(bn(e))for(const t in e)Na(e,t)&&d_(e[t])}const MP=/^\d+$/;function yh(e,t,n,r){const i=t.split("."),a=i[0],s=i.slice(1).join(".");if(i.length===1)(bn(e)||mt(e)&&MP.test(a))&&n(e,a);else{r!=null&&r.buildGraph&&Si(e[a])&&(e[a]={});const u=e[a];if(!u)return;const c=!!(i.length>1&&MP.test(i[1]));mt(u)&&(r!=null&&r.descendArray)&&!c?u.forEach(d=>yh(d,s,n,r)):yh(u,s,n,r)}}function aW(e,t,n){yh(e,t,(r,i)=>{r[i]=Cg(n)?n(r[i]):n},{buildGraph:!0})}function IP(e,t,n){yh(e,t,(r,i)=>{if(mt(r)){if(/^\d+$/.test(i))r.splice(parseInt(i),1);else if(n&&n.descendArray)for(const a of r)bn(a)&&delete a[i]}else bn(r)&&delete r[i]},n)}const oW=/^\$[a-zA-Z0-9_]+$/;function su(e){return oW.test(e)}function L$(e){if(N$(e))return jo(e)?{$regex:e}:{$eq:e};if(M$(e)){if(!Object.keys(e).some(su))return{$eq:e};if(Na(e,"$regex")){const t={...e};return t.$regex=new RegExp(e.$regex,e.$options),delete t.$options,t}}return e}var h_=(e=>(e[e.CLONE_OFF=0]="CLONE_OFF",e[e.CLONE_INPUT=1]="CLONE_INPUT",e[e.CLONE_OUTPUT=2]="CLONE_OUTPUT",e[e.CLONE_ALL=3]="CLONE_ALL",e))(h_||{}),Bn,Oh,Oo;const Kd=class Kd{constructor(t,n,r){vn(this,Bn,void 0);vn(this,Oh,void 0);vn(this,Oo,void 0);gn(this,Bn,t),this.update(n,r)}static init(t,n,r){var i;return t instanceof Kd?new Kd(Me(t,Bn),t.root??n,{...Me(t,Oo),...r,variables:Object.assign({},(i=Me(t,Oo))==null?void 0:i.variables,r==null?void 0:r.variables)}):new Kd(t,n,r)}update(t,n){var i;gn(this,Oh,t);const r=Object.assign({},(i=Me(this,Oo))==null?void 0:i.variables,n==null?void 0:n.variables);return Object.keys(r).length?gn(this,Oo,{...n,variables:r}):gn(this,Oo,n??{}),this}getOptions(){return Object.freeze({...Me(this,Bn),context:_h.from(Me(this,Bn).context)})}get root(){return Me(this,Oh)}get local(){return Me(this,Oo)}get idKey(){return Me(this,Bn).idKey}get collation(){var t;return(t=Me(this,Bn))==null?void 0:t.collation}get processingMode(){var t;return((t=Me(this,Bn))==null?void 0:t.processingMode)||0}get useStrictMode(){var t;return(t=Me(this,Bn))==null?void 0:t.useStrictMode}get scriptEnabled(){var t;return(t=Me(this,Bn))==null?void 0:t.scriptEnabled}get useGlobalContext(){var t;return(t=Me(this,Bn))==null?void 0:t.useGlobalContext}get hashFunction(){var t;return(t=Me(this,Bn))==null?void 0:t.hashFunction}get collectionResolver(){var t;return(t=Me(this,Bn))==null?void 0:t.collectionResolver}get jsonSchemaValidator(){var t;return(t=Me(this,Bn))==null?void 0:t.jsonSchemaValidator}get variables(){var t;return(t=Me(this,Bn))==null?void 0:t.variables}get context(){var t;return(t=Me(this,Bn))==null?void 0:t.context}};Bn=new WeakMap,Oh=new WeakMap,Oo=new WeakMap;let wh=Kd;function z$(e){return e instanceof wh?e.getOptions():Object.freeze({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:0,...e,context:e!=null&&e.context?_h.from(e==null?void 0:e.context):_h.init()})}var Cs,of;let _h=(of=class{constructor(){vn(this,Cs,new Map)}static init(){return new of}static from(t){const n=of.init();return Si(t)||Me(t,Cs).forEach((r,i)=>n.addOperators(i,r)),n}addOperators(t,n){Me(this,Cs).has(t)||Me(this,Cs).set(t,{});for(const[r,i]of Object.entries(n))this.getOperator(t,r)||(Me(this,Cs).get(t)[r]=i);return this}getOperator(t,n){return(Me(this,Cs).get(t)??{})[n]??null}addAccumulatorOps(t){return this.addOperators("accumulator",t)}addExpressionOps(t){return this.addOperators("expression",t)}addQueryOps(t){return this.addOperators("query",t)}addPipelineOps(t){return this.addOperators("pipeline",t)}addProjectionOps(t){return this.addOperators("projection",t)}addWindowOps(t){return this.addOperators("window",t)}},Cs=new WeakMap,of);const Hu=_h.init();function AP(e,t){for(const[n,r]of Object.entries(t)){Mt(Cg(r)&&su(n),`'${n}' is not a valid operator`);const i=bh(e,n,null);Mt(!i||r===i,`${n} already exists for '${e}' operators. Cannot change operator function once registered.`)}switch(e){case"accumulator":Hu.addAccumulatorOps(t);break;case"expression":Hu.addExpressionOps(t);break;case"pipeline":Hu.addPipelineOps(t);break;case"projection":Hu.addProjectionOps(t);break;case"query":Hu.addQueryOps(t);break;case"window":Hu.addWindowOps(t);break}}function bh(e,t,n){const{context:r,useGlobalContext:i}=n||{},a=r?r.getOperator(e,t):null;return!a&&i?Hu.getOperator(e,t):a}function Vi(e,t,n,r){const i=wh.init(r,e);return n&&su(n)?F$(e,t,n,i):Av(e,t,i)}const sW=["$$ROOT","$$CURRENT","$$REMOVE","$$NOW"];function Av(e,t,n){var r;if(Ra(t)&&t.length>0&&t[0]==="$"){if(uW.includes(t))return t;let i=n.root;const a=t.split(".");if(sW.includes(a[0])){switch(a[0]){case"$$ROOT":break;case"$$CURRENT":i=e;break;case"$$REMOVE":i=void 0;break;case"$$NOW":i=new Date;break}t=t.slice(a[0].length+1)}else if(a[0].slice(0,2)==="$$"){i=Object.assign({},n.variables,{this:e},(r=n==null?void 0:n.local)==null?void 0:r.variables);const s=a[0].slice(2);Mt(Na(i,s),`Use of undefined variable: ${s}`),t=t.slice(2)}else t=t.slice(1);return t===""?i:io(i,t)}if(mt(t))return t.map(i=>Av(e,i,n));if(bn(t)){const i={},a=Object.entries(t);for(const[s,u]of a){if(su(s))return Mt(a.length==1,"expression must have single operator."),F$(e,u,s,n);i[s]=Av(e,u,n)}return i}return t}function F$(e,t,n,r){const i=bh("expression",n,r);if(i)return i(e,t,r);const a=bh("accumulator",n,r);return Mt(!!a,`accumulator '${n}' is not registered.`),mt(e)||(e=Av(e,t,r),t=null),Mt(mt(e),`arguments must resolve to array for ${n}.`),a(e,t,r)}const uW=["$$KEEP","$$PRUNE","$$DESCEND"];function Sh(e){return e instanceof jP?e:new jP(e)}function lW(...e){let t=0;return Sh(()=>{for(;t<e.length;){const n=e[t].next();if(!n.done)return n;t++}return{done:!0}})}function cW(e){return!!e&&typeof e=="object"&&(e==null?void 0:e.next)instanceof Function}function fW(e,t){const n=e.slice(t+1);e.splice(t),Array.prototype.push.apply(e,n)}const p_=new Error;function dW(e,t,n){let r=!1,i=-1,a=0;return function(s){try{e:for(;!r;){let u=e();i++;let c=-1;const d=t.length;let h=!1;for(;++c<d;){const v=t[c];switch(v.action){case 0:u=v.func(u,i);break;case 1:if(!v.func(u,i))continue e;break;case 2:--v.count,v.count||(h=!0);break;case 3:--v.count,v.count||fW(t,c);continue e;default:break e}}if(r=h,s)n[a++]=u;else return{value:u,done:!1}}}catch(u){if(u!==p_)throw u}return r=!0,{done:r}}}var nl,jc,Lc,IC;let jP=(IC=class{constructor(t){vn(this,nl,void 0);vn(this,jc,void 0);vn(this,Lc,void 0);gn(this,nl,[]),gn(this,jc,[]),this.isDone=!1;let n;if(t instanceof Function&&(t={next:t}),cW(t)){const r=t;n=()=>{const i=r.next();if(i.done)throw p_;return i.value}}else if(mt(t)){const r=t,i=r.length;let a=0;n=()=>{if(a<i)return r[a++];throw p_}}else if(!(t instanceof Function))throw new Kh("Lazy must be initialized with an array, generator, or function.");gn(this,Lc,dW(n,Me(this,nl),Me(this,jc)))}push(t,n){return typeof n=="function"?Me(this,nl).push({action:t,func:n}):typeof n=="number"&&Me(this,nl).push({action:t,count:n}),this}next(){return Me(this,Lc).call(this)}map(t){return this.push(0,t)}filter(t){return this.push(1,t)}take(t){return t>0?this.push(2,t):this}drop(t){return t>0?this.push(3,t):this}transform(t){const n=this;let r;return Sh(()=>(r||(r=Sh(t(n.value()))),r.next()))}value(){return this.isDone||(this.isDone=Me(this,Lc).call(this,!0).done),Me(this,jc)}each(t){for(;;){const n=this.next();if(n.done)break;if(t(n.value)===!1)return!1}return!0}reduce(t,n){let r=this.next();for(n===void 0&&!r.done&&(n=r.value,r=this.next());!r.done;)n=t(n,r.value),r=this.next();return n}size(){return this.reduce((t,n)=>++t,0)}[Symbol.iterator](){return this}},nl=new WeakMap,jc=new WeakMap,Lc=new WeakMap,IC);const hW=(e,t,n)=>e.take(t),B$=(e,t,n)=>n1(t)?e:(U$(t,n),e.map(W$(t,wh.init(n))));function W$(e,t,n=!0){const r=t.idKey,i=Object.keys(e),a=new Array,s=new Array,u={};for(const g of i){const w=e[g];if(Wn(w)||Rc(w))w?s.push(g):a.push(g);else if(mt(w))u[g]=x=>w.map(C=>Vi(x,C,null,t.update(x))??null);else if(bn(w)){const x=Object.keys(w),C=x.length==1?x[0]:"",S=bh("projection",C,t);S?C==="$slice"&&!ff(w[C]).every(Wn)?u[g]=P=>Vi(P,w,g,t.update(P)):u[g]=P=>S(P,w[C],g,t.update(P)):su(C)?u[g]=E=>Vi(E,w[C],C,t):(U$(w,t),u[g]=E=>{if(!Na(E,g))return Vi(E,w,null,t);n&&t.update(E);const P=io(E,g),N=W$(w,t,!1);return mt(P)?P.map(N):bn(P)?N(P):N(E)})}else u[g]=Ra(w)&&w[0]==="$"?x=>Vi(x,w,g,t):x=>w}const c=Object.keys(u),d=a.includes(r);if(n&&d&&a.length===1&&!s.length&&!c.length)return g=>{const w={...g};return delete w[r],w};const v=n&&!d&&!s.includes(r),y={preserveMissing:!0};return g=>{const w={};if(a.length&&!s.length){c_(w,g);for(const x of a)IP(w,x,{descendArray:!0})}for(const x of s){const C=Td(g,x,y)??{};c_(w,C)}s.length&&d_(w);for(const x of c){const C=u[x](g);C===void 0?IP(w,x,{descendArray:!0}):aW(w,x,C)}return v&&Na(g,r)&&(w[r]=io(g,r)),w}}function U$(e,t){let n=!1,r=!1;for(const[i,a]of Object.entries(e))Mt(!i.startsWith("$"),"Field names may not start with '$'."),Mt(!i.endsWith(".$"),"Positional projection operator '$' is not supported."),i!==(t==null?void 0:t.idKey)&&(a===0||a===!1?n=!0:(a===1||a===!0)&&(r=!0),Mt(!(n&&r),"Projection cannot have a mix of inclusion and exclusion."))}const pW=(e,t,n)=>e.drop(t),H$=(e,t,n)=>{if(n1(t)||!bn(t))return e;let r=ta;const i=n.collation;return bn(i)&&Ra(i.locale)&&(r=vW(i)),e.transform(a=>{const s=Object.keys(t);for(const u of s.reverse()){const c=rW(a,v=>io(v,u),n.hashFunction),d=Array.from(c.keys()).sort(r);t[u]===-1&&d.reverse();let h=0;for(const v of d)for(const y of c.get(v))a[h++]=y;Mt(h==a.length,"bug: counter must match collection size.")}return a})},mW={1:"base",2:"accent",3:"variant"};function vW(e){const t={sensitivity:mW[e.strength||3],caseFirst:e.caseFirst==="off"?"false":e.caseFirst||"false",numeric:e.numericOrdering||!1,ignorePunctuation:e.alternate==="shifted"};(e.caseLevel||!1)===!0&&(t.sensitivity==="base"&&(t.sensitivity="case"),t.sensitivity==="accent"&&(t.sensitivity="variant"));const n=new Intl.Collator(e.locale,t);return(r,i)=>{if(!Ra(r)||!Ra(i))return ta(r,i);const a=n.compare(r,i);return a<0?-1:a>0?1:0}}const gW={$sort:H$,$skip:pW,$limit:hW};var $h,Rh,zc,$o,Ds,mi,Ro;class yW{constructor(t,n,r,i){vn(this,$h,void 0);vn(this,Rh,void 0);vn(this,zc,void 0);vn(this,$o,void 0);vn(this,Ds,{});vn(this,mi,null);vn(this,Ro,[]);gn(this,$h,t),gn(this,Rh,n),gn(this,zc,r),gn(this,$o,i)}fetch(){if(Me(this,mi))return Me(this,mi);gn(this,mi,Sh(Me(this,$h)).filter(Me(this,Rh)));const t=Me(this,$o).processingMode;t&h_.CLONE_INPUT&&Me(this,mi).map(tf);for(const n of["$sort","$skip","$limit"])Na(Me(this,Ds),n)&&gn(this,mi,gW[n](Me(this,mi),Me(this,Ds)[n],Me(this,$o)));return Object.keys(Me(this,zc)).length&&gn(this,mi,B$(Me(this,mi),Me(this,zc),Me(this,$o))),t&h_.CLONE_OUTPUT&&Me(this,mi).map(tf),Me(this,mi)}fetchAll(){const t=Sh([...Me(this,Ro)]);return gn(this,Ro,[]),lW(t,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(t){return Me(this,Ds).$skip=t,this}limit(t){return Me(this,Ds).$limit=t,this}sort(t){return Me(this,Ds).$sort=t,this}collation(t){return gn(this,$o,{...Me(this,$o),collation:t}),this}next(){if(Me(this,Ro).length>0)return Me(this,Ro).pop();const t=this.fetch().next();if(!t.done)return t.value}hasNext(){if(Me(this,Ro).length>0)return!0;const t=this.fetch().next();return t.done?!1:(Me(this,Ro).push(t.value),!0)}map(t){return this.all().map(t)}forEach(t){this.all().forEach(t)}[Symbol.iterator](){return this.fetchAll()}}$h=new WeakMap,Rh=new WeakMap,zc=new WeakMap,$o=new WeakMap,Ds=new WeakMap,mi=new WeakMap,Ro=new WeakMap;const wW=new Set(Array.from(["$and","$or","$nor","$expr","$jsonSchema"]));var Fc,Os,rl;class uu{constructor(t,n){vn(this,Fc,void 0);vn(this,Os,void 0);vn(this,rl,void 0);gn(this,rl,tf(t)),gn(this,Os,z$(n)),gn(this,Fc,[]),this.compile()}compile(){Mt(bn(Me(this,rl)),`query criteria must be an object: ${JSON.stringify(Me(this,rl))}`);const t={};for(const[n,r]of Object.entries(Me(this,rl))){if(n==="$where")Mt(Me(this,Os).scriptEnabled,"$where operator requires 'scriptEnabled' option to be true."),Object.assign(t,{field:n,expr:r});else if(wW.has(n))this.processOperator(n,n,r);else{Mt(!su(n),`unknown top level operator: ${n}`);for(const[i,a]of Object.entries(L$(r)))this.processOperator(n,i,a)}t.field&&this.processOperator(t.field,t.field,t.expr)}}processOperator(t,n,r){const i=bh("query",n,Me(this,Os));Mt(!!i,`unknown query operator ${n}`),Me(this,Fc).push(i(t,r,Me(this,Os)))}test(t){return Me(this,Fc).every(n=>n(t))}find(t,n){return new yW(t,r=>this.test(r),n||{},Me(this,Os))}remove(t){return t.reduce((n,r)=>(this.test(r)||n.push(r),n),[])}}Fc=new WeakMap,Os=new WeakMap,rl=new WeakMap;const _W=["monday","mon","tuesday","tue","wednesday","wed","thursday","thu","friday","fri","saturday","sat","sunday","sun"];new Set(_W);function zr(e){return(n,r,i)=>{const a={unwrapArray:!0},s=Math.max(1,n.split(".").length-1);return u=>{const c=io(u,n,a);return e(c,r,{...i,depth:s})}}}function df(e){return(t,n,r)=>{const i=Vi(t,n,null,r);return e(...i)}}function r1(e,t,n){return Ca(e,t)||Si(e)&&Si(t)?!0:mt(e)?e.some(r=>Ca(r,t))||A$(e,n==null?void 0:n.depth).some(r=>Ca(r,t)):!1}function K$(e,t,n){return!r1(e,t,n)}function q$(e,t,n){return Si(e)?t.some(r=>r===null):I$([ff(e),t],n==null?void 0:n.hashFunction).length>0}function bW(e,t,n){return!q$(e,t,n)}function Y$(e,t,n){return Dg(e,t,(r,i)=>ta(r,i)<0)}function V$(e,t,n){return Dg(e,t,(r,i)=>ta(r,i)<=0)}function X$(e,t,n){return Dg(e,t,(r,i)=>ta(r,i)>0)}function Q$(e,t,n){return Dg(e,t,(r,i)=>ta(r,i)>=0)}function SW(e,t,n){return ff(e).some(r=>t.length===2&&r%t[0]===t[1])}function xW(e,t,n){const r=ff(e),i=a=>Ra(a)&&ef(t.exec(a),n==null?void 0:n.useStrictMode);return r.some(i)||A$(r,1).some(i)}function EW(e,t,n){if(!mt(e)||!mt(t)||!e.length||!t.length)return!1;let r=!0;for(const i of t){if(!r)break;bn(i)&&Object.keys(i).includes("$elemMatch")?r=G$(e,i.$elemMatch,n):jo(i)?r=e.some(a=>typeof a=="string"&&i.test(a)):r=e.some(a=>Ca(i,a))}return r}function PW(e,t,n){return Array.isArray(e)&&e.length===t}function kW(e){return su(e)&&["$and","$or","$nor"].indexOf(e)===-1}function G$(e,t,n){if(mt(e)&&!n1(e)){let r=s=>s,i=t;Object.keys(t).every(kW)&&(i={temp:t},r=s=>({temp:s}));const a=new uu(i,n);for(let s=0,u=e.length;s<u;s++)if(a.test(r(e[s])))return!0}return!1}const LP=e=>e===null,CW={array:mt,boolean:Rc,bool:Rc,date:Zc,number:Wn,int:Wn,long:Wn,double:Wn,decimal:Wn,null:LP,object:bn,regexp:jo,regex:jo,string:Ra,undefined:Si,function:e=>{throw new Kh("unsupported type key `function`.")},1:Wn,2:Ra,3:bn,4:mt,6:Si,8:Rc,9:Zc,10:LP,11:jo,16:Wn,18:Wn,19:Wn};function zP(e,t,n){const r=CW[t];return r?r(e):!1}function DW(e,t,n){return mt(t)?t.findIndex(r=>zP(e,r))>=0:zP(e,t)}function Dg(e,t,n){return ff(e).some(r=>gh(r)===gh(t)&&n(r,t))}const OW=(e,t,n)=>{const r=Vi(e,t,null,n);return ef(r,n.useStrictMode)&&r.every(i=>ef(i,n.useStrictMode))},$W=(e,t,n)=>{const r=ff(t);return r.length==0?!1:(Mt(r.length==1,"Expression $not takes exactly 1 argument"),!Vi(e,r[0],null,n))},RW=(e,t,n)=>{const r=Vi(e,t,null,n),i=n.useStrictMode;return ef(r,i)&&r.some(a=>ef(a,i))},NW=Object.freeze(Object.defineProperty({__proto__:null,$and:OW,$not:$W,$or:RW},Symbol.toStringTag,{value:"Module"})),TW=(e,t,n)=>{const r=Vi(e,t,null,n);return Mt(mt(r)&&r.length==2,"$cmp: expression must resolve to array of size 2."),ta(r[0],r[1])},MW=df(r1),IW=df(X$),AW=df(Q$),jW=df(Y$),LW=df(V$),zW=df(K$),FW=Object.freeze(Object.defineProperty({__proto__:null,$cmp:TW,$eq:MW,$gt:IW,$gte:AW,$lt:jW,$lte:LW,$ne:zW},Symbol.toStringTag,{value:"Module"})),FP=(e,t)=>{const n={};return e.split("").forEach((r,i)=>n[r]=t*(i+1)),n};({...FP("ABCDEFGHIKLM",1),...FP("NOPQRSTUVWXY",-1)});const BP={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function Ci(e,t=BP){const n=Object.assign({},BP,t),r=new Set(Object.keys(n));return(i,a,s)=>{const u=Vi(i,a,null,s);if(r.has(`${u}`)){const c=n[`${u}`];if(c instanceof Error)throw new Kh(`cannot apply $${e.name} to -inf, value must in (-inf,inf)`);return c}return e(u)}}Ci(Math.acos,{Infinity:1/0,0:new Error});Ci(Math.acosh,{Infinity:1/0,0:new Error});Ci(Math.asin);Ci(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});Ci(Math.atan);Ci(Math.atanh,{1:1/0,"-1":-1/0});Ci(Math.cos);Ci(Math.cosh,{"-Infinity":1/0,Infinity:1/0});const BW=Math.PI/180;Ci(e=>e*BW,{Infinity:1/0,"-Infinity":1/0});const WW=180/Math.PI;Ci(e=>e*WW,{Infinity:1/0,"-Infinity":-1/0});Ci(Math.sin);Ci(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});Ci(Math.tan);const J$=(e,t,n)=>{Mt(mt(t),"Invalid expression: $and expects value to be an Array.");const r=t.map(i=>new uu(i,n));return i=>r.every(a=>a.test(i))},i1=(e,t,n)=>{Mt(mt(t),"Invalid expression. $or expects value to be an Array");const r=t.map(i=>new uu(i,n));return i=>r.some(a=>a.test(i))},Z$=(e,t,n)=>{Mt(mt(t),"Invalid expression. $nor expects value to be an array.");const r=i1("$or",t,n);return i=>!r(i)},eR=(e,t,n)=>{const r={};r[e]=L$(t);const i=new uu(r,n);return a=>!i.test(a)},tR=zr(r1),nR=zr(X$),rR=zr(Q$),iR=zr(q$),aR=zr(Y$),oR=zr(V$),sR=zr(K$),uR=zr(bW);function UW(e,t,n){return r=>Vi(r,t,null,n)}function HW(e,t,n){if(!(n!=null&&n.jsonSchemaValidator))throw new Kh("Missing option 'jsonSchemaValidator'. Configure to use '$jsonSchema' operator.");const r=n==null?void 0:n.jsonSchemaValidator(t);return i=>r(i)}const lR=zr(SW),cR=zr(xW);function KW(e,t,n){Mt(n.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true");const r=t;return Mt(Cg(r),"$where only accepts a Function object"),i=>ef(r.call(i),n==null?void 0:n.useStrictMode)}const qW=zr(EW),fR=zr(G$),dR=zr(PW),hR=(e,t,n)=>{const r=e.includes("."),i=!!t;return!r||e.match(/\.\d+$/)?a=>io(a,e)!==void 0===i:a=>{const s=Td(a,e,{preserveIndex:!0}),u=io(s,e.substring(0,e.lastIndexOf(".")));return mt(u)?u.some(c=>c!==void 0)===i:u!==void 0===i}},pR=zr(DW);var WP=!1;function YW(e){return WP||(AP("pipeline",{$sort:H$,$project:B$}),AP("query",{$and:J$,$eq:tR,$elemMatch:fR,$exists:hR,$gt:nR,$gte:rR,$in:iR,$lt:aR,$lte:oR,$ne:sR,$nin:uR,$mod:lR,$nor:Z$,$not:eR,$or:i1,$regex:cR,$size:dR,$type:pR}),WP=!0),new uu(e)}function Nc(e,t){var n=ai(e.primaryKey);t=It(t);var r=Ir(t);if(typeof r.skip!="number"&&(r.skip=0),r.selector?(r.selector=r.selector,Object.entries(r.selector).forEach(([v,y])=>{(typeof y!="object"||y===null)&&(r.selector[v]={$eq:y})})):r.selector={},r.index){var i=ch(r.index);i.includes(n)||i.push(n),r.index=i}if(r.sort){var h=r.sort.find(v=>g3(v)===n);h||(r.sort=r.sort.slice(0),r.sort.push({[n]:"asc"}))}else if(r.index)r.sort=r.index.map(v=>({[v]:"asc"}));else{if(e.indexes){var a=new Set;Object.entries(r.selector).forEach(([v,y])=>{var g=!1;typeof y=="object"&&y!==null?g=!!Object.keys(y).find(w=>t1.has(w)):g=!0,g&&a.add(v)});var s=-1,u;e.indexes.forEach(v=>{var y=Nv(v)?v:[v],g=y.findIndex(w=>!a.has(w));g>0&&g>s&&(s=g,u=y)}),u&&(r.sort=u.map(v=>({[v]:"asc"})))}if(!r.sort)if(e.indexes&&e.indexes.length>0){var c=e.indexes[0],d=Nv(c)?c:[c];r.sort=d.map(v=>({[v]:"asc"}))}else r.sort=[{[n]:"asc"}]}return r}function mR(e,t){if(!t.sort)throw ze("SNH",{query:t});var n=[];t.sort.forEach(i=>{var a=Object.keys(i)[0],s=Object.values(i)[0];n.push({key:a,direction:s,getValueFn:v3(a)})});var r=(i,a)=>{for(var s=0;s<n.length;++s){var u=n[s],c=u.getValueFn(i),d=u.getValueFn(a);if(c!==d){var h=u.direction==="asc"?ta(c,d):ta(d,c);return h}}};return r}function a1(e,t){if(!t.sort)throw ze("SNH",{query:t});var n=YW(t.selector),r=i=>n.test(i);return r}async function ac(e,t){var n=await e.exec();if(!n)return null;if(Array.isArray(n))return Promise.all(n.map(i=>t(i)));if(n instanceof Map)return Promise.all([...n.values()].map(i=>t(i)));var r=await t(n);return r}function Og(e,t){if(!t.sort)throw ze("SNH",{query:t});var n=KB(e,t);return{query:t,queryPlan:n}}var VW="_rxdb_internal";async function hf(e,t){var n=await e.findDocumentsById([t],!1),r=n[0];if(r)return r}async function nf(e,t,n){var r=await e.bulkWrite([t],n);if(r.error.length>0){var i=r.error[0];throw i}else{var a=ai(e.schema.primaryKey),s=na(a,[t],r),u=s[0];return u}}function XW(e,t){var n=hf(e,t),r=e.changeStream().pipe(_n(i=>i.events.find(a=>a.documentId===t)),Nt(i=>!!i),_n(i=>Promise.resolve(Ye(i).documentData)),Hh(n),BB(i=>i),Nt(i=>!!i));return r}function xh(e){return Object.assign({},...e.filter(t=>!!t))}function jv(e,t,n,r){if(r)throw r.status===409?ze("CONFLICT",{collection:e.name,id:t,writeError:r,data:n}):r.status===422?ze("VD2",{collection:e.name,id:t,writeError:r,data:n}):r}function QW(e,t,n,r,i,a,s){for(var u=!!e.schema.attachments,c=[],d=[],h=[],v=Lh(10),y={id:v,events:[],checkpoint:null,context:i},g=y.events,w=[],x=[],C=[],S=n.size>0,E,P=r.length,N=function(){var U=r[T],W=U.document,re=U.previous,pe=W[t],he=W._deleted,ce=re&&re._deleted,fe=void 0;S&&(fe=n.get(pe));var xe;if(fe){var qe=fe._rev;if(!re||re&&qe!==re._rev){var We={isError:!0,status:409,documentId:pe,writeRow:U,documentInDb:fe};return h.push(We),1}var oe=u?I0(U):U;u&&(he?re&&Object.keys(re._attachments).forEach(X=>{x.push({documentId:pe,attachmentId:X,digest:Ye(re)._attachments[X].digest})}):(Object.entries(W._attachments).find(([X,A])=>{var H=re?re._attachments[X]:void 0;return!H&&!A.data&&(xe={documentId:pe,documentInDb:fe,isError:!0,status:510,writeRow:U,attachmentId:X}),!0}),xe||Object.entries(W._attachments).forEach(([X,A])=>{var H=re?re._attachments[X]:void 0;if(!H)w.push({documentId:pe,attachmentId:X,attachmentData:A,digest:A.digest});else{var ae=oe.document._attachments[X].digest;A.data&&H.digest!==ae&&C.push({documentId:pe,attachmentId:X,attachmentData:A,digest:A.digest})}}))),xe?h.push(xe):(u?(d.push(I0(oe)),s&&s(W)):(d.push(oe),s&&s(W)),E=oe);var _e=null,G=null,F=null;if(ce&&!he)F="INSERT",_e=u?Ga(W):W;else if(re&&!ce&&!he)F="UPDATE",_e=u?Ga(W):W,G=re;else if(he)F="DELETE",_e=Ye(W),G=re;else throw ze("SNH",{args:{writeRow:U}});var te={documentId:pe,documentData:_e,previousDocumentData:G,operation:F};g.push(te)}else{var Ce=!!he;if(u&&Object.entries(W._attachments).forEach(([X,A])=>{A.data?w.push({documentId:pe,attachmentId:X,attachmentData:A,digest:A.digest}):(xe={documentId:pe,isError:!0,status:510,writeRow:U,attachmentId:X},h.push(xe))}),xe||(u?(c.push(I0(U)),a&&a(W)):(c.push(U),a&&a(W)),E=U),!Ce){var Le={documentId:pe,operation:"INSERT",documentData:u?Ga(W):W,previousDocumentData:u&&re?Ga(re):re};g.push(Le)}}},T=0;T<P;T++)N();return{bulkInsertDocs:c,bulkUpdateDocs:d,newestRow:E,errors:h,eventBulk:y,attachmentsAdd:w,attachmentsRemove:x,attachmentsUpdate:C}}function I0(e){return{previous:e.previous,document:Ga(e.document)}}function GW(e){return atob(e).length}function JW(e){var t=e.data;if(!t)return e;var n={length:GW(t),digest:e.digest,type:e.type};return n}function Ga(e){if(!e._attachments||Object.keys(e._attachments).length===0)return e;var t=It(e);return t._attachments={},Object.entries(e._attachments).forEach(([n,r])=>{t._attachments[n]=JW(r)}),t}function Yh(e){return Object.assign({},e,{_meta:It(e._meta)})}function o1(e,t,n){Tt.deepFreezeWhenDevMode(n);var r=ai(t.schema.primaryKey),i={originalStorageInstance:t,schema:t.schema,internals:t.internals,collectionName:t.collectionName,databaseName:t.databaseName,options:t.options,async bulkWrite(a,s){for(var u=e.token,c=new Array(a.length),d=ki(),h=0;h<a.length;h++){var v=a[h],y=Yh(v.document);y._meta.lwt=d;var g=v.previous;y._rev=Ko(u,g),c[h]={document:y,previous:g}}ii("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:c});var w=await e.lockedRun(()=>t.bulkWrite(c,s)),x={error:[]};gR.set(x,c);var C=w.error.length===0?[]:w.error.filter(U=>U.status===409&&!U.writeRow.previous&&!U.writeRow.document._deleted&&Ye(U.documentInDb)._deleted?!0:(x.error.push(U),!1));if(C.length>0){var S=new Set,E=C.map(U=>(S.add(U.documentId),{previous:U.documentInDb,document:Object.assign({},U.writeRow.document,{_rev:Ko(e.token,U.documentInDb)})})),P=await e.lockedRun(()=>t.bulkWrite(E,s));ml(x.error,P.error);var N=na(r,c,x,S),T=na(r,E,P);return ml(N,T),x}return x},query(a){return e.lockedRun(()=>t.query(a))},count(a){return e.lockedRun(()=>t.count(a))},findDocumentsById(a,s){return e.lockedRun(()=>t.findDocumentsById(a,s))},getAttachmentData(a,s,u){return e.lockedRun(()=>t.getAttachmentData(a,s,u))},getChangedDocumentsSince:t.getChangedDocumentsSince?(a,s)=>e.lockedRun(()=>t.getChangedDocumentsSince(Ye(a),s)):void 0,cleanup(a){return e.lockedRun(()=>t.cleanup(a))},remove(){return e.storageInstances.delete(i),e.lockedRun(()=>t.remove())},close(){return e.storageInstances.delete(i),e.lockedRun(()=>t.close())},changeStream(){return t.changeStream()}};return e.storageInstances.add(i),i}function ZW(e){if(e.schema.keyCompression)throw ze("UT5",{args:{params:e}});if(Lv(e.schema))throw ze("UT6",{args:{params:e}});if(e.schema.attachments&&e.schema.attachments.compression)throw ze("UT7",{args:{params:e}})}function Lv(e){return!!(e.encrypted&&e.encrypted.length>0||e.attachments&&e.attachments.encrypted)}function e5(e,t,n){var r=ai(e.schema.primaryKey),i=n?n.lwt:Kb,a=n?n.id:"";return Nc(e.schema,{selector:{$or:[{"_meta.lwt":{$gt:i}},{"_meta.lwt":{$eq:i},[r]:{$gt:n?a:""}}],"_meta.lwt":{$gte:i}},sort:[{"_meta.lwt":"asc"},{[r]:"asc"}],skip:0,limit:t})}async function vR(e,t,n){if(e.getChangedDocumentsSince)return e.getChangedDocumentsSince(t,n);var r=ai(e.schema.primaryKey),i=Og(e.schema,e5(e,t,n)),a=await e.query(i),s=a.documents,u=d3(s);return{documents:s,checkpoint:u?{id:u[r],lwt:u._meta.lwt}:n||{id:"",lwt:0}}}var gR=new WeakMap,t5=new WeakMap;function na(e,t,n,r){return Ar(t5,n,()=>{var i=[],a=gR.get(n);if(a||(a=t),n.error.length>0||r){for(var s=r||new Set,u=0;u<n.error.length;u++){var c=n.error[u];s.add(c.documentId)}for(var d=0;d<a.length;d++){var h=a[d].document;s.has(h[e])||i.push(Ga(h))}}else{i.length=t.length-n.error.length;for(var v=0;v<a.length;v++){var y=a[v].document;i[v]=Ga(y)}}return i})}var yR=function(){function e(n,r,i,a){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=n,this.primaryPath=r,this.preWrite=i,this.postWrite=a}var t=e.prototype;return t.addWrite=function(r,i){var a=r[this.primaryPath],s=Ar(this.queueByDocId,a,()=>[]),u=new Promise((c,d)=>{var h={lastKnownDocumentState:r,modifier:i,resolve:c,reject:d};Ye(s).push(h),this.triggerRun()});return u},t.triggerRun=async function(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var r=[],i=this.queueByDocId;this.queueByDocId=new Map,await Promise.all(Array.from(i.entries()).map(async([s,u])=>{var c=n5(u.map(v=>v.lastKnownDocumentState)),d=c;for(var h of u)try{d=await h.modifier(Ir(d))}catch(v){h.reject(v),h.reject=()=>{},h.resolve=()=>{}}try{await this.preWrite(d,c)}catch(v){u.forEach(y=>y.reject(v));return}r.push({previous:c,document:d})}));var a=r.length>0?await this.storageInstance.bulkWrite(r,"incremental-write"):{error:[]};return await Promise.all(na(this.primaryPath,r,a).map(s=>{var u=s[this.primaryPath];this.postWrite(s);var c=Xc(i,u);c.forEach(d=>d.resolve(s))})),a.error.forEach(s=>{var u=s.documentId,c=Xc(i,u),d=Vc(s);if(d){var h=Ar(this.queueByDocId,u,()=>[]);c.reverse().forEach(y=>{y.lastKnownDocumentState=Ye(d.documentInDb),Ye(h).unshift(y)})}else{var v=GO(s);c.forEach(y=>y.reject(v))}}),this.isRunning=!1,this.triggerRun()}},e}();function UP(e){var t=async n=>{var r=y3(n);r._deleted=n._deleted;var i=await e(r),a=Object.assign({},i,{_meta:n._meta,_attachments:n._attachments,_rev:n._rev,_deleted:typeof i._deleted<"u"?i._deleted:n._deleted});return typeof a._deleted>"u"&&(a._deleted=!1),a};return t}function n5(e){var t=e[0],n=Qs(t._rev);return e.forEach(r=>{var i=Qs(r._rev);i>n&&(t=r,n=i)}),t}var $g={get primaryPath(){var e=this;if(e.isInstanceOfRxDocument)return e.collection.schema.primaryPath},get primary(){var e=this;if(e.isInstanceOfRxDocument)return e._data[e.primaryPath]},get revision(){var e=this;if(e.isInstanceOfRxDocument)return e._data._rev},get deleted$(){var e=this;if(e.isInstanceOfRxDocument)return e.$.pipe(_n(t=>t._data._deleted))},get deleted$$(){var e=this,t=e.collection.database.getReactivityFactory();return t.fromObservable(e.deleted$,e.getLatest().deleted,e.collection.database)},get deleted(){var e=this;if(e.isInstanceOfRxDocument)return e._data._deleted},getLatest(){var e=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(e)},get $(){var e=this,t=this.primary;return e.collection.eventBulks$.pipe(Nt(n=>!n.isLocal),_n(n=>n.events.find(r=>r.documentId===t)),Nt(n=>!!n),_n(n=>O$(Ye(n))),Hh(e.collection._docCache.getLatestDocumentData(t)),ph((n,r)=>n._rev===r._rev),_n(n=>this.collection._docCache.getCachedRxDocument(n)),Uh(zh))},get $$(){var e=this,t=e.collection.database.getReactivityFactory();return t.fromObservable(e.$,e.getLatest()._data,e.collection.database)},get$(e){if(Tt.isDevMode()){if(e.includes(".item."))throw ze("DOC1",{path:e});if(e===this.primaryPath)throw ze("DOC2");if(this.collection.schema.finalFields.includes(e))throw ze("DOC3",{path:e});var t=Qc(this.collection.schema.jsonSchema,e);if(!t)throw ze("DOC4",{path:e})}return this.$.pipe(_n(n=>Gs(n,e)),ph())},get$$(e){var t=this.get$(e),n=this.collection.database.getReactivityFactory();return n.fromObservable(t,this.getLatest().get(e),this.collection.database)},populate(e){var t=Qc(this.collection.schema.jsonSchema,e),n=this.get(e);if(!n)return Xb;if(!t)throw ze("DOC5",{path:e});if(!t.ref)throw ze("DOC6",{path:e,schemaObj:t});var r=this.collection.database.collections[t.ref];if(!r)throw ze("DOC7",{ref:t.ref,path:e,schemaObj:t});return t.type==="array"?r.findByIds(n).exec().then(i=>{var a=i.values();return Array.from(a)}):r.findOne(n).exec()},get(e){return bR(this,e)},toJSON(e=!1){if(e)return Tt.deepFreezeWhenDevMode(this._data);var t=It(this._data);return delete t._rev,delete t._attachments,delete t._deleted,delete t._meta,Tt.deepFreezeWhenDevMode(t)},toMutableJSON(e=!1){return Ir(this.toJSON(e))},update(e){throw Rt("update")},incrementalUpdate(e){throw Rt("update")},updateCRDT(e){throw Rt("crdt")},putAttachment(){throw Rt("attachments")},putAttachmentBase64(){throw Rt("attachments")},getAttachment(){throw Rt("attachments")},allAttachments(){throw Rt("attachments")},get allAttachments$(){throw Rt("attachments")},async modify(e,t){var n=this._data,r=await UP(e)(n);return this._saveData(r,n)},incrementalModify(e,t){return this.collection.incrementalWriteQueue.addWrite(this._data,UP(e)).then(n=>this.collection._docCache.getCachedRxDocument(n))},patch(e){var t=this._data,n=Ir(t);return Object.entries(e).forEach(([r,i])=>{n[r]=i}),this._saveData(n,t)},incrementalPatch(e){return this.incrementalModify(t=>(Object.entries(e).forEach(([n,r])=>{t[n]=r}),t))},async _saveData(e,t){if(e=It(e),this._data._deleted)throw ze("DOC11",{id:this.primary,document:this});await _R(this.collection,e,t);var n=[{previous:t,document:e}],r=await this.collection.storageInstance.bulkWrite(n,"rx-document-save-data"),i=r.error[0];return jv(this.collection,this.primary,e,i),await this.collection._runHooks("post","save",e,this),this.collection._docCache.getCachedRxDocument(na(this.collection.schema.primaryPath,n,r)[0])},async remove(){if(this.deleted)return Promise.reject(ze("DOC13",{document:this,id:this.primary}));var e=await this.collection.bulkRemove([this]);if(e.error.length>0){var t=e.error[0];jv(this.collection,this.primary,this._data,t)}return e.success[0]},incrementalRemove(){return this.incrementalModify(async e=>(await this.collection._runHooks("pre","remove",e,this),e._deleted=!0,e)).then(async e=>(await this.collection._runHooks("post","remove",e._data,e),e))},close(){throw ze("DOC14")}};function wR(e=$g){var t=function(r,i){this.collection=r,this._data=i,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return t.prototype=e,t}function r5(e,t,n){var r=new e(t,n);return ii("createRxDocument",r),r}function _R(e,t,n){return t._meta=Object.assign({},n._meta,t._meta),Tt.isDevMode()&&e.schema.validateChange(n,t),e._runHooks("pre","save",t,n)}function bR(e,t){return Ar(e._propertyCache,t,()=>{var n=Gs(e._data,t);if(typeof n!="object"||n===null||Array.isArray(n))return Tt.deepFreezeWhenDevMode(n);var r=new Proxy(It(n),{get(i,a){if(typeof a!="string")return i[a];var s=a.charAt(a.length-1);if(s==="$")if(a.endsWith("$$")){var u=a.slice(0,-2);return e.get$$(bd(t+"."+u))}else{var c=a.slice(0,-1);return e.get$(bd(t+"."+c))}else if(s==="_"){var d=a.slice(0,-1);return e.populate(bd(t+"."+d))}else{var h=i[a];return typeof h=="number"||typeof h=="string"||typeof h=="boolean"?h:bR(e,bd(t+"."+a))}}});return r})}function s1(e){return e[e.length-1]}function i5(e){const t=typeof e;return e!==null&&(t==="object"||t==="function")}function HP(e,t,n){if(Array.isArray(t)&&(t=t.join(".")),!i5(e)||typeof t!="string")return n===void 0?e:n;const r=t.split(".");if(r.length===0)return n;for(let i=0;i<r.length;i++){const a=r[i];if(a5(e,a)?e=i===r.length-1?void 0:null:e=e[a],e==null){if(i!==r.length-1)return n;break}}return e===void 0?n:e}function a5(e,t){if(typeof t!="number"&&Array.isArray(e)){const n=Number.parseInt(t,10);return Number.isInteger(n)&&e[n]===e[t]}return!1}const SR=e=>!!e.queryParams.limit,o5=e=>e.queryParams.limit===1,s5=e=>!!(e.queryParams.skip&&e.queryParams.skip>0),u5=e=>e.changeEvent.operation==="DELETE",l5=e=>e.changeEvent.operation==="INSERT",c5=e=>e.changeEvent.operation==="UPDATE",f5=e=>SR(e)&&e.previousResults.length>=e.queryParams.limit,d5=e=>{const t=e.queryParams.sortFields,n=e.changeEvent.previous,r=e.changeEvent.doc;if(!r)return!1;if(!n)return!0;for(let i=0;i<t.length;i++){const a=t[i],s=HP(n,a),u=HP(r,a);if(s!==u)return!0}return!1},h5=e=>{const t=e.changeEvent.id;if(e.keyDocumentMap)return e.keyDocumentMap.has(t);{const n=e.queryParams.primaryKey,r=e.previousResults;for(let i=0;i<r.length;i++)if(r[i][n]===t)return!0;return!1}},p5=e=>{const t=e.previousResults[0];return!!(t&&t[e.queryParams.primaryKey]===e.changeEvent.id)},m5=e=>{const t=s1(e.previousResults);return!!(t&&t[e.queryParams.primaryKey]===e.changeEvent.id)},v5=e=>{const t=e.changeEvent.previous;if(!t)return!1;const n=e.previousResults[0];return n?n[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,n)<0:!1},g5=e=>{const t=e.changeEvent.previous;if(!t)return!1;const n=s1(e.previousResults);return n?n[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,n)>0:!1},y5=e=>{const t=e.changeEvent.doc;if(!t)return!1;const n=e.previousResults[0];return n?n[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,n)<0:!1},w5=e=>{const t=e.changeEvent.doc;if(!t)return!1;const n=s1(e.previousResults);return n?n[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,n)>0:!1},_5=e=>{const t=e.changeEvent.previous;return t?e.queryParams.queryMatcher(t):!1},b5=e=>{const t=e.changeEvent.doc;return t?e.queryParams.queryMatcher(t):!1},S5=e=>e.previousResults.length===0,x5={0:l5,1:c5,2:u5,3:SR,4:o5,5:s5,6:S5,7:f5,8:p5,9:m5,10:d5,11:h5,12:v5,13:g5,14:y5,15:w5,16:_5,17:b5};function E5(e,t,n,r){var i=e.length,a=i-1,s=0;if(i===0)return e.push(t),0;for(var u;r<=a;)s=r+(a-r>>1),u=e[s],n(u,t)<=0?r=s+1:a=s-1;return n(u,t)<=0&&s++,e.splice(s,0,t),s}const P5=e=>{},u1=e=>{e.previousResults.unshift(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},l1=e=>{e.previousResults.push(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},c1=e=>{const t=e.previousResults.shift();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},f1=e=>{const t=e.previousResults.pop();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},k5=e=>{c1(e),l1(e)},C5=e=>{f1(e),u1(e)},D5=e=>{c1(e),u1(e)},O5=e=>{f1(e),l1(e)},xR=e=>{e.keyDocumentMap&&e.keyDocumentMap.delete(e.changeEvent.id);const t=e.queryParams.primaryKey,n=e.previousResults;for(let r=0;r<n.length;r++)if(n[r][t]===e.changeEvent.id){n.splice(r,1);break}},$5=e=>{const t=e.changeEvent.doc,n=e.queryParams.primaryKey,r=e.previousResults;for(let i=0;i<r.length;i++)if(r[i][n]===e.changeEvent.id){r[i]=t,e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,t);break}},R5=e=>{const t={_id:"wrongHuman"+new Date().getTime()};e.previousResults.length=0,e.previousResults.push(t),e.keyDocumentMap&&(e.keyDocumentMap.clear(),e.keyDocumentMap.set(t._id,t))},ER=e=>{const t=e.changeEvent.id,n=e.changeEvent.doc;if(e.keyDocumentMap){if(e.keyDocumentMap.has(t))return;e.keyDocumentMap.set(t,n)}else if(e.previousResults.find(i=>i[e.queryParams.primaryKey]===t))return;E5(e.previousResults,n,e.queryParams.sortComparator,0)},N5=e=>{xR(e),ER(e)},T5=e=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},M5=e=>{throw new Error("Action unknownAction should never be called")},I5=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],A5={doNothing:P5,insertFirst:u1,insertLast:l1,removeFirstItem:c1,removeLastItem:f1,removeFirstInsertLast:k5,removeLastInsertFirst:C5,removeFirstInsertFirst:D5,removeLastInsertLast:O5,removeExisting:xR,replaceExisting:$5,alwaysWrong:R5,insertAtSortPosition:ER,removeExistingAndInsertAtSortPosition:N5,runFullQueryAgain:T5,unknownAction:M5},j5=40;function A0(e){return e.charCodeAt(0)-j5}function L5(e){return e?"1":"0"}function KP(e,t){const n=[];for(let r=0,i=e.length;r<i;r+=t)n.push(e.substring(r,r+t));return n}function z5(e){const t=new Map,r=2+parseInt(e.charAt(0)+e.charAt(1),10)*2,i=e.substring(2,r),a=KP(i,2);for(let x=0;x<a.length;x++){const C=a[x],S=C.charAt(0),E=A0(C.charAt(1));t.set(S,E)}const s=e.substring(r,e.length-3),u=KP(s,4);for(let x=0;x<u.length;x++){const C=u[x],S=C.charAt(0),E=C.charAt(1),P=C.charAt(2),N=A0(C.charAt(3));if(!t.has(E))throw new Error("missing node with id "+E);if(!t.has(P))throw new Error("missing node with id "+P);const T=t.get(E),U=t.get(P),W={l:N,0:T,1:U};t.set(S,W)}const c=e.slice(-3),d=c.charAt(0),h=c.charAt(1),v=A0(c.charAt(2)),y=t.get(d),g=t.get(h);return{l:v,0:y,1:g}}function F5(e,t,n){let r=e,i=e.l;for(;;){const a=t[i](n),s=L5(a);if(r=r[s],typeof r=="number"||typeof r=="string")return r;i=r.l}}const B5="14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9ae9bf9bq9cg9ck9cn9nd9np9nq9nf9ng9nm9nk9mr9ms9mt9mj9mk9ml9mn9mc8{8}888mn88m8m4z4w4z44444m4v7yn77~777n777m77m7m7m5m5m55m555m55m5m552|2u2222x222|222222n2n222n2/an/bn/cn///////////,cn,,,,,,,ac0bc00000000000m-m-----------3333(((++++11*m*.";let j0;function W5(){return j0||(j0=z5(B5)),j0}const U5=e=>F5(W5(),x5,e);function H5(e){const t=U5(e);return I5[t]}function K5(e,t,n,r,i){const a=A5[e];return a({queryParams:t,changeEvent:n,previousResults:r,keyDocumentMap:i}),r}function q5(e,t){return!t.sort||t.sort.length===0?[e]:t.sort.map(n=>Object.keys(n)[0])}var Y5=new WeakMap;function V5(e){return Ar(Y5,e,()=>{var t=e.collection,n=Nc(t.storageInstance.schema,Ir(e.mangoQuery)),r=t.schema.primaryPath,i=mR(t.schema.jsonSchema,n),a=(d,h)=>{var v={docA:d,docB:h,rxQuery:e};return i(v.docA,v.docB)},s=a1(t.schema.jsonSchema,n),u=d=>{var h={doc:d,rxQuery:e};return s(h.doc)},c={primaryKey:e.collection.schema.primaryPath,skip:n.skip,limit:n.limit,sortFields:q5(r,n),sortComparator:a,queryMatcher:u};return c})}function X5(e,t){if(!e.collection.database.eventReduce)return{runFullQueryAgain:!0};for(var n=V5(e),r=Ye(e._result).docsData.slice(0),i=Ye(e._result).docsDataMap,a=!1,s=[],u=0;u<t.length;u++){var c=t[u],d=WB(c);d&&s.push(d)}var h=s.find(v=>{var y={queryParams:n,changeEvent:v,previousResults:r,keyDocumentMap:i},g=H5(y);if(g==="runFullQueryAgain")return!0;if(g!=="doNothing")return a=!0,K5(g,n,v,r,i),!1});return h?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:a,newResults:r}}var Q5=function(){function e(){this._map=new Map}var t=e.prototype;return t.getByQuery=function(r){var i=r.toString(),a=Ar(this._map,i,()=>r);return a},e}();function G5(){return new Q5}function qP(e,t){t.uncached=!0;var n=t.toString();e._map.delete(n)}function J5(e){return e.refCount$.observers.length}var Z5=100,eU=30*1e3,tU=(e,t)=>(n,r)=>{if(!(r._map.size<e)){var i=ki()-t,a=[],s=Array.from(r._map.values());for(var u of s)if(!(J5(u)>0)){if(u._lastEnsureEqual===0&&u._creationTime<i){qP(r,u);continue}a.push(u)}var c=a.length-e;if(!(c<=0)){var d=a.sort((v,y)=>v._lastEnsureEqual-y._lastEnsureEqual),h=d.slice(0,c);h.forEach(v=>qP(r,v))}}},PR=tU(Z5,eU),L0=new WeakSet;function nU(e){L0.has(e)||(L0.add(e),D3().then(()=>$3(200)).then(()=>{e.closed||e.cacheReplacementPolicy(e,e._queryCache),L0.delete(e)}))}var kR=function(){function e(n,r,i){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(a=>{var s=a.docId,u=this.cacheItemByDocId.get(s);u&&(u[0].delete(a.revisionHeight+a.lwt+""),u[0].size===0&&this.cacheItemByDocId.delete(s))}):void 0,this.primaryPath=n,this.changes$=r,this.documentCreator=i,r.subscribe(a=>{this.tasks.add(()=>{for(var s=this.cacheItemByDocId,u=0;u<a.length;u++){var c=a[u],d=s.get(c.documentId);if(d){var h=c.documentData;h||(h=c.previousDocumentData),d[1]=h}}}),this.tasks.size<=1&&Eg().then(()=>{this.processTasks()})})}var t=e.prototype;return t.processTasks=function(){if(this.tasks.size!==0){var r=Array.from(this.tasks);r.forEach(i=>i()),this.tasks.clear()}},t.getLatestDocumentData=function(r){this.processTasks();var i=Xc(this.cacheItemByDocId,r);return i[1]},t.getLatestDocumentDataIfExists=function(r){this.processTasks();var i=this.cacheItemByDocId.get(r);if(i)return i[1]},au(e,[{key:"getCachedRxDocuments",get:function(){var n=YP(this);return Io(this,"getCachedRxDocuments",n)}},{key:"getCachedRxDocument",get:function(){var n=YP(this);return Io(this,"getCachedRxDocument",r=>n([r])[0])}}])}();function YP(e){var t=e.primaryPath,n=e.cacheItemByDocId,r=e.registry,i=Tt.deepFreezeWhenDevMode,a=e.documentCreator,s=u=>{for(var c=new Array(u.length),d=[],h=0;h<u.length;h++){var v=u[h],y=v[t],g=Qs(v._rev),w=void 0,x=void 0,C=n.get(y);C?(w=C[0],x=w.get(g+v._meta.lwt+"")):(w=new Map,C=[w,v],n.set(y,C));var S=x?x.deref():void 0;S||(v=i(v),S=a(v),w.set(g+v._meta.lwt+"",iU(S)),r&&d.push(S)),c[h]=S}return d.length>0&&r&&(e.tasks.add(()=>{for(var E=0;E<d.length;E++){var P=d[E];r.register(P,{docId:P.primary,revisionHeight:Qs(P.revision),lwt:P._data._meta.lwt})}}),e.tasks.size<=1&&Eg().then(()=>{e.processTasks()})),c};return s}function m_(e,t){var n=e.getCachedRxDocuments;return n(t)}var rU=typeof WeakRef=="function",iU=rU?aU:oU;function aU(e){return new WeakRef(e)}function oU(e){return{deref(){return e}}}var VP=function(){function e(n,r,i){this.time=ki(),this.query=n,this.count=i,this.documents=m_(this.query.collection._docCache,r)}var t=e.prototype;return t.getValue=function(r){var i=this.query.op;if(i==="count")return this.count;if(i==="findOne"){var a=this.documents.length===0?null:this.documents[0];if(!a&&r)throw ze("QU10",{collection:this.query.collection.name,query:this.query.mangoQuery,op:i});return a}else return i==="findByIds"?this.docsMap:this.documents.slice(0)},au(e,[{key:"docsData",get:function(){return Io(this,"docsData",this.documents.map(n=>n._data))}},{key:"docsDataMap",get:function(){var n=new Map;return this.documents.forEach(r=>{n.set(r.primary,r._data)}),Io(this,"docsDataMap",n)}},{key:"docsMap",get:function(){for(var n=new Map,r=this.documents,i=0;i<r.length;i++){var a=r[i];n.set(a.primary,a)}return Io(this,"docsMap",n)}}])}(),sU=0,uU=function(){return++sU},CR=function(){function e(n,r,i,a={}){this.id=uU(),this._execOverDatabaseCount=0,this._creationTime=ki(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new qa(null),this._result=null,this._latestChangeEvent=-1,this._ensureEqualQueue=no,this.op=n,this.mangoQuery=r,this.collection=i,this.other=a,r||(this.mangoQuery=Gm()),this.isFindOneByIdQuery=dU(this.collection.schema.primaryPath,r)}var t=e.prototype;return t._setResultData=function(r){if(typeof r>"u")throw ze("QU18",{database:this.collection.database.name,collection:this.collection.name});if(typeof r=="number"){this._result=new VP(this,[],r);return}else r instanceof Map&&(r=Array.from(r.values()));var i=new VP(this,r,r.length);this._result=i},t._execOverDatabase=async function(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this.op==="count"){var r=this.getPreparedQuery(),i=await this.collection.storageInstance.count(r);if(i.mode==="slow"&&!this.collection.database.allowSlowCount)throw ze("QU14",{collection:this.collection,queryObj:this.mangoQuery});return i.count}if(this.op==="findByIds"){var a=Ye(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,s=new Map,u=[];if(a.forEach(h=>{var v=this.collection._docCache.getLatestDocumentDataIfExists(h);if(v){if(!v._deleted){var y=this.collection._docCache.getCachedRxDocument(v);s.set(h,y)}}else u.push(h)}),u.length>0){var c=await this.collection.storageInstance.findDocumentsById(u,!1);c.forEach(h=>{var v=this.collection._docCache.getCachedRxDocument(h);s.set(v.primary,v)})}return s}var d=fU(this);return d.then(h=>h)},t.exec=async function(r){if(r&&this.op!=="findOne")throw ze("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});await XP(this);var i=Ye(this._result);return i.getValue(r)},t.toString=function(){var r=Tv({op:this.op,query:Nc(this.collection.schema.jsonSchema,this.mangoQuery),other:this.other},!0),i=JSON.stringify(r);return this.toString=()=>i,i},t.getPreparedQuery=function(){var r={rxQuery:this,mangoQuery:Nc(this.collection.schema.jsonSchema,this.mangoQuery)};r.mangoQuery.selector._deleted={$eq:!1},r.mangoQuery.index&&r.mangoQuery.index.unshift("_deleted"),ii("prePrepareQuery",r);var i=Og(this.collection.schema.jsonSchema,r.mangoQuery);return this.getPreparedQuery=()=>i,i},t.doesDocumentDataMatch=function(r){return r._deleted?!1:this.queryMatcher(r)},t.remove=async function(){var r=await this.exec();if(Array.isArray(r)){var i=await this.collection.bulkRemove(r);if(i.error.length>0)throw GO(i.error[0]);return i.success}else return r.remove()},t.incrementalRemove=function(){return ac(this.asRxQuery,r=>r.incrementalRemove())},t.update=function(r){throw Rt("update")},t.patch=function(r){return ac(this.asRxQuery,i=>i.patch(r))},t.incrementalPatch=function(r){return ac(this.asRxQuery,i=>i.incrementalPatch(r))},t.modify=function(r){return ac(this.asRxQuery,i=>i.modify(r))},t.incrementalModify=function(r){return ac(this.asRxQuery,i=>i.incrementalModify(r))},t.where=function(r){throw Rt("query-builder")},t.sort=function(r){throw Rt("query-builder")},t.skip=function(r){throw Rt("query-builder")},t.limit=function(r){throw Rt("query-builder")},au(e,[{key:"$",get:function(){if(!this._$){var n=this.collection.eventBulks$.pipe(Nt(r=>!r.isLocal),Hh(null),ro(()=>XP(this)),_n(()=>this._result),Uh(zh),ph((r,i)=>!!(r&&r.time===Ye(i).time)),Nt(r=>!!r),_n(r=>Ye(r).getValue()));this._$=HB(n,this.refCount$.pipe(Nt(()=>!1)))}return this._$}},{key:"$$",get:function(){var n=this.collection.database.getReactivityFactory();return n.fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){var n=this.collection.schema.jsonSchema,r=Nc(this.collection.schema.jsonSchema,this.mangoQuery);return Io(this,"queryMatcher",a1(n,r))}},{key:"asRxQuery",get:function(){return this}}])}();function Gm(){return{selector:{}}}function lU(e){return e.collection._queryCache.getByQuery(e)}function ld(e,t,n,r){ii("preCreateRxQuery",{op:e,queryObj:t,collection:n,other:r});var i=new CR(e,t,n,r);return i=lU(i),nU(n),i}function DR(e){var t=e.asRxQuery.collection._changeEventBuffer.getCounter();return e._latestChangeEvent>=t}async function XP(e){return e.collection.awaitBeforeReads.size>0&&await Promise.all(Array.from(e.collection.awaitBeforeReads).map(t=>t())),e.collection.database.closed||DR(e)?!1:(e._ensureEqualQueue=e._ensureEqualQueue.then(()=>cU(e)),e._ensureEqualQueue)}function cU(e){if(e._lastEnsureEqual=ki(),e.collection.database.closed||DR(e))return no;var t=!1,n=!1;if(e._latestChangeEvent===-1&&(n=!0),!n){var r=e.asRxQuery.collection._changeEventBuffer.getFrom(e._latestChangeEvent+1);if(r===null)n=!0;else{e._latestChangeEvent=e.asRxQuery.collection._changeEventBuffer.getCounter();var i=e.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(r);if(e.op==="count"){var a=Ye(e._result).count,s=a;i.forEach(c=>{var d=c.previousDocumentData&&e.doesDocumentDataMatch(c.previousDocumentData),h=e.doesDocumentDataMatch(c.documentData);!d&&h&&s++,d&&!h&&s--}),s!==a&&(t=!0,e._setResultData(s))}else{var u=X5(e,i);u.runFullQueryAgain?n=!0:u.changed&&(t=!0,e._setResultData(u.newResults))}}}return n?e._execOverDatabase().then(c=>(e._latestChangeEvent=e.collection._changeEventBuffer.getCounter(),typeof c=="number"?((!e._result||c!==e._result.count)&&(t=!0,e._setResultData(c)),t):((!e._result||!w3(e.collection.schema.primaryPath,c,e._result.docsData))&&(t=!0,e._setResultData(c)),t))):Promise.resolve(t)}async function fU(e){var t=[],n=e.collection;if(e.isFindOneByIdQuery)if(Array.isArray(e.isFindOneByIdQuery)){var r=e.isFindOneByIdQuery;if(r=r.filter(h=>{var v=e.collection._docCache.getLatestDocumentDataIfExists(h);return v?(v._deleted||t.push(v),!1):!0}),r.length>0){var i=await n.storageInstance.findDocumentsById(r,!1);ml(t,i)}}else{var a=e.isFindOneByIdQuery,s=e.collection._docCache.getLatestDocumentDataIfExists(a);if(!s){var u=await n.storageInstance.findDocumentsById([a],!1);u[0]&&(s=u[0])}s&&!s._deleted&&t.push(s)}else{var c=e.getPreparedQuery(),d=await n.storageInstance.query(c);t=d.documents}return t}function dU(e,t){if(!t.skip&&t.selector&&Object.keys(t.selector).length===1&&t.selector[e]){var n=t.selector[e];if(typeof n=="string")return n;if(Object.keys(n).length===1&&typeof n.$eq=="string"||Object.keys(n).length===1&&Array.isArray(n.$eq)&&!n.$eq.find(r=>typeof r!="string"))return n.$eq}return!1}var Ks="collection",d1="storage-token",Jm="rx-migration-status",hU="rx-pipeline-checkpoint",pU="RxInternalDocument",h1=Pg({version:0,title:pU,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[Ks,d1,Jm,hU,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function gl(e,t){return ou(h1,{key:e,context:t})}async function OR(e){var t=Og(e.schema,{selector:{context:Ks,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0}),n=await e.query(t),r=n.documents;return r}var $R="storageToken",mU=gl($R,d1);async function vU(e){var t=Lh(10),n=e.password?await e.hashFunction(JSON.stringify(e.password)):void 0,r={id:mU,context:d1,key:$R,data:{rxdbVersion:e.rxdbVersion,token:t,instanceToken:e.token,passwordHash:n},_deleted:!1,_meta:cf(),_rev:$a(),_attachments:{}},i=[{document:r}],a=await e.internalStore.bulkWrite(i,"internal-add-storage-token");if(!a.error[0])return na("id",i,a)[0];var s=Ye(a.error[0]);if(s.isError&&Vc(s)){var u=s;if(!gU(u.documentInDb.data.rxdbVersion,e.rxdbVersion))throw ze("DM5",{args:{database:e.name,databaseStateVersion:u.documentInDb.data.rxdbVersion,codeVersion:e.rxdbVersion}});if(n&&n!==u.documentInDb.data.passwordHash)throw ze("DB1",{passwordHash:n,existingPasswordHash:u.documentInDb.data.passwordHash});var c=u.documentInDb;return Ye(c)}throw s}function gU(e,t){if(!e)return!1;var n=e.split(".")[0],r=t.split(".")[0];return n==="15"&&r==="16"?!0:n===r}async function RR(e,t,n){if(e.schema.version!==n.version)throw ze("SNH",{schema:n,version:e.schema.version,name:e.name,collection:e,args:{storageCollectionName:t}});for(var r=zv(e.name,e.schema.jsonSchema),i=gl(r,Ks);;){var a=await hf(e.database.internalStore,i),s=Ir(Ye(a)),u=s.data.connectedStorages.find(c=>c.collectionName===t&&c.schema.version===n.version);if(u)return;s.data.connectedStorages.push({collectionName:t,schema:n});try{await nf(e.database.internalStore,{previous:Ye(a),document:s},"add-connected-storage-to-collection")}catch(c){if(!Vc(c))throw c}}}async function yU(e,t,n){if(e.schema.version!==n.version)throw ze("SNH",{schema:n,version:e.schema.version,name:e.name,collection:e,args:{storageCollectionName:t}});for(var r=zv(e.name,e.schema.jsonSchema),i=gl(r,Ks);;){var a=await hf(e.database.internalStore,i),s=Ir(Ye(a)),u=s.data.connectedStorages.find(c=>c.collectionName===t&&c.schema.version===n.version);if(!u)return;s.data.connectedStorages=s.data.connectedStorages.filter(c=>c.collectionName!==t);try{await nf(e.database.internalStore,{previous:Ye(a),document:s},"remove-connected-storage-from-collection")}catch(c){if(!Vc(c))throw c}}}function zv(e,t){return e+"-"+t.version}function wm(e,t){return t=It(t),t=U3(e,t),typeof e.jsonSchema.primaryKey!="string"&&(t=j3(e.primaryPath,e.jsonSchema,t)),t._meta=cf(),Object.prototype.hasOwnProperty.call(t,"_deleted")||(t._deleted=!1),Object.prototype.hasOwnProperty.call(t,"_attachments")||(t._attachments={}),Object.prototype.hasOwnProperty.call(t,"_rev")||(t._rev=$a()),t}async function wU(e,t){t.multiInstance=e.multiInstance;var n=await e.storage.createStorageInstance(t);return n}async function NR(e,t,n,r,i,a,s,u){var c=await OR(t),d=c.filter(g=>g.data.name===i),h=[];d.forEach(g=>{h.push({collectionName:g.data.name,schema:g.data.schema,isCollection:!0}),g.data.connectedStorages.forEach(w=>h.push({collectionName:w.collectionName,isCollection:!1,schema:w.schema}))});var v=new Set;if(h=h.filter(g=>{var w=g.collectionName+"||"+g.schema.version;return v.has(w)?!1:(v.add(w),!0)}),await Promise.all(h.map(async g=>{var w=await e.createStorageInstance({collectionName:g.collectionName,databaseInstanceToken:n,databaseName:r,multiInstance:a,options:{},schema:g.schema,password:s,devMode:Tt.isDevMode()});await w.remove(),g.isCollection&&await vl("postRemoveRxCollection",{storage:e,databaseName:r,collectionName:i})})),u){var y=d.map(g=>{var w=Yh(g);return w._deleted=!0,w._meta.lwt=ki(),w._rev=Ko(n,g),{previous:g,document:w}});await t.bulkWrite(y,"rx-database-remove-collection-all")}}function Bi(e){if(e.closed)throw ze("COL21",{collection:e.name,version:e.schema.version})}var _U=function(){function e(n){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=n,this.subs.push(this.collection.eventBulks$.pipe(Nt(r=>!r.isLocal)).subscribe(r=>{this.tasks.add(()=>this._handleChangeEvents(r.events)),this.tasks.size<=1&&Eg().then(()=>{this.processTasks()})}))}var t=e.prototype;return t.processTasks=function(){if(this.tasks.size!==0){var r=Array.from(this.tasks);r.forEach(i=>i()),this.tasks.clear()}},t._handleChangeEvents=function(r){var i=this.counter;this.counter=this.counter+r.length,r.length>this.limit?this.buffer=r.slice(r.length*-1):(ml(this.buffer,r),this.buffer=this.buffer.slice(this.limit*-1));for(var a=i+1,s=this.eventCounterMap,u=0;u<r.length;u++){var c=r[u];s.set(c,a+u)}},t.getCounter=function(){return this.processTasks(),this.counter},t.getBuffer=function(){return this.processTasks(),this.buffer},t.getArrayIndexByPointer=function(r){this.processTasks();var i=this.buffer[0],a=this.eventCounterMap.get(i);if(r<a)return null;var s=r-a;return s},t.getFrom=function(r){this.processTasks();var i=[],a=this.getArrayIndexByPointer(r);if(a===null)return null;for(;;){var s=this.buffer[a];if(a++,s)i.push(s);else return i}},t.runFrom=function(r,i){this.processTasks();var a=this.getFrom(r);if(a===null)throw new Error("out of bounds");a.forEach(s=>i(s))},t.reduceByLastOfDoc=function(r){return this.processTasks(),r.slice(0)},t.close=function(){this.tasks.clear(),this.subs.forEach(r=>r.unsubscribe())},e}();function bU(e){return new _U(e)}var SU=new WeakMap;function xU(e){var t=e.schema.getDocumentPrototype(),n=kU(e),r=$g,i={};return[t,n,r].forEach(a=>{var s=Object.getOwnPropertyNames(a);s.forEach(u=>{var c=Object.getOwnPropertyDescriptor(a,u),d=!0;(u.startsWith("_")||u.endsWith("_")||u.startsWith("$")||u.endsWith("$"))&&(d=!1),typeof c.value=="function"?Object.defineProperty(i,u,{get(){return c.value.bind(this)},enumerable:d,configurable:!1}):(c.enumerable=d,c.configurable=!1,c.writable&&(c.writable=!1),Object.defineProperty(i,u,c))})}),i}function EU(e){return Ar(SU,e,()=>wR(xU(e)))}function PU(e,t,n){var r=r5(t,e,Tt.deepFreezeWhenDevMode(n));return e._runHooksSync("post","create",n,r),ii("postCreateRxDocument",r),r}function kU(e){var t={};return Object.entries(e.methods).forEach(([n,r])=>{t[n]=r}),t}var Fv={isEqual(e,t,n){e=QP(e),t=QP(t);var r=dh(Ga(e),Ga(t));return r},resolve(e){return e.realMasterState}};function QP(e){return e._attachments||(e=It(e),e._attachments={}),e}var TR=["pre","post"],MR=["insert","save","remove","create"],GP=!1,oc=new Set,IR=function(){function e(n,r,i,a,s={},u={},c={},d={},h={},v=PR,y={},g=Fv){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this.awaitBeforeReads=new Set,this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=G5(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.eventBulks$={},this.onClose=[],this.closed=!1,this.onRemove=[],this.database=n,this.name=r,this.schema=i,this.internalStorageInstance=a,this.instanceCreationOptions=s,this.migrationStrategies=u,this.methods=c,this.attachments=d,this.options=h,this.cacheReplacementPolicy=v,this.statics=y,this.conflictHandler=g,CU(this.asRxCollection),n&&(this.eventBulks$=n.eventBulks$.pipe(Nt(w=>w.collectionName===this.name))),this.database&&oc.add(this)}var t=e.prototype;return t.prepare=async function(){if(!await a$()){for(var r=0;r<10&&oc.size>PP;)r++,await this.promiseWait(30);if(oc.size>PP)throw ze("COL23",{database:this.database.name,collection:this.name,args:{existing:Array.from(oc.values()).map(c=>({db:c.database?c.database.name:"",c:c.name}))}})}this.storageInstance=o1(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new yR(this.storageInstance,this.schema.primaryPath,(c,d)=>_R(this,c,d),c=>this._runHooks("post","save",c)),this.$=this.eventBulks$.pipe(ro(c=>$$(c))),this.checkpoint$=this.eventBulks$.pipe(_n(c=>c.checkpoint)),this._changeEventBuffer=bU(this.asRxCollection);var i;this._docCache=new kR(this.schema.primaryPath,this.eventBulks$.pipe(Nt(c=>!c.isLocal),_n(c=>c.events)),c=>(i||(i=EU(this.asRxCollection)),PU(this.asRxCollection,i,c)));var a=this.database.internalStore.changeStream().pipe(Nt(c=>{var d=this.name+"-"+this.schema.version,h=c.events.find(v=>v.documentData.context==="collection"&&v.documentData.key===d&&v.operation==="DELETE");return!!h})).subscribe(async()=>{await this.close(),await Promise.all(this.onRemove.map(c=>c()))});this._subs.push(a);var s=await this.database.storageToken,u=this.storageInstance.changeStream().subscribe(c=>{var d={id:c.id,isLocal:!1,internal:!1,collectionName:this.name,storageToken:s,events:c.events,databaseToken:this.database.token,checkpoint:c.checkpoint,context:c.context};this.database.$emit(d)});return this._subs.push(u),Qi},t.cleanup=function(r){throw Bi(this),Rt("cleanup")},t.migrationNeeded=function(){throw Rt("migration-schema")},t.getMigrationState=function(){throw Rt("migration-schema")},t.startMigration=function(r=10){return Bi(this),this.getMigrationState().startMigration(r)},t.migratePromise=function(r=10){return this.getMigrationState().migratePromise(r)},t.insert=async function(r){Bi(this);var i=await this.bulkInsert([r]),a=i.error[0];jv(this,r[this.schema.primaryPath],r,a);var s=Ye(i.success[0]);return s},t.insertIfNotExists=async function(r){var i=await this.bulkInsert([r]);if(i.error.length>0){var a=i.error[0];if(a.status===409){var s=a.documentInDb;return m_(this._docCache,[s])[0]}else throw a}return i.success[0]},t.bulkInsert=async function(r){if(Bi(this),r.length===0)return{success:[],error:[]};var i=this.schema.primaryPath,a=new Set,s;if(this.hasHooks("pre","insert"))s=await Promise.all(r.map(C=>{var S=wm(this.schema,C);return this._runHooks("pre","insert",S).then(()=>(a.add(S[i]),{document:S}))}));else{s=new Array(r.length);for(var u=this.schema,c=0;c<r.length;c++){var d=r[c],h=wm(u,d);a.add(h[i]),s[c]={document:h}}}if(a.size!==r.length)throw ze("COL22",{collection:this.name,args:{documents:r}});var v=await this.storageInstance.bulkWrite(s,"rx-collection-bulk-insert"),y,g=this,w={get success(){if(!y){var C=na(g.schema.primaryPath,s,v);y=m_(g._docCache,C)}return y},error:v.error};if(this.hasHooks("post","insert")){var x=new Map;s.forEach(C=>{var S=C.document;x.set(S[i],S)}),await Promise.all(w.success.map(C=>this._runHooks("post","insert",x.get(C.primary),C)))}return w},t.bulkRemove=async function(r){Bi(this);var i=this.schema.primaryPath;if(r.length===0)return{success:[],error:[]};var a;typeof r[0]=="string"?a=await this.findByIds(r).exec():(a=new Map,r.forEach(g=>a.set(g.primary,g)));var s=[],u=new Map;Array.from(a.values()).forEach(g=>{var w=g.toMutableJSON(!0);s.push(w),u.set(g.primary,w)}),await Promise.all(s.map(g=>{var w=g[this.schema.primaryPath];return this._runHooks("pre","remove",g,a.get(w))}));var c=s.map(g=>{var w=It(g);return w._deleted=!0,{previous:g,document:w}}),d=await this.storageInstance.bulkWrite(c,"rx-collection-bulk-remove"),h=na(this.schema.primaryPath,c,d),v=[],y=h.map(g=>{var w=g[i],x=this._docCache.getCachedRxDocument(g);return v.push(x),w});return await Promise.all(y.map(g=>this._runHooks("post","remove",u.get(g),a.get(g)))),{success:v,error:d.error}},t.bulkUpsert=async function(r){Bi(this);var i=[],a=new Map;r.forEach(d=>{var h=wm(this.schema,d),v=h[this.schema.primaryPath];if(!v)throw ze("COL3",{primaryPath:this.schema.primaryPath,data:h,schema:this.schema.jsonSchema});a.set(v,h),i.push(h)});var s=await this.bulkInsert(i),u=s.success.slice(0),c=[];return await Promise.all(s.error.map(async d=>{if(d.status!==409)c.push(d);else{var h=d.documentId,v=Xc(a,h),y=Ye(d.documentInDb),g=this._docCache.getCachedRxDocuments([y])[0],w=await g.incrementalModify(()=>v);u.push(w)}})),{error:c,success:u}},t.upsert=async function(r){Bi(this);var i=await this.bulkUpsert([r]);return jv(this.asRxCollection,r[this.schema.primaryPath],r,i.error[0]),i.success[0]},t.incrementalUpsert=function(r){Bi(this);var i=wm(this.schema,r),a=i[this.schema.primaryPath];if(!a)throw ze("COL4",{data:r});var s=this._incrementalUpsertQueues.get(a);return s||(s=Qi),s=s.then(()=>OU(this,a,i)).then(u=>u.inserted?u.doc:DU(u.doc,i)),this._incrementalUpsertQueues.set(a,s),s},t.find=function(r){Bi(this),ii("prePrepareRxQuery",{op:"find",queryObj:r,collection:this}),r||(r=Gm());var i=ld("find",r,this);return i},t.findOne=function(r){Bi(this),ii("prePrepareRxQuery",{op:"findOne",queryObj:r,collection:this});var i;if(typeof r=="string")i=ld("findOne",{selector:{[this.schema.primaryPath]:r},limit:1},this);else{if(r||(r=Gm()),r.limit)throw ze("QU6");r=It(r),r.limit=1,i=ld("findOne",r,this)}return i},t.count=function(r){Bi(this),r||(r=Gm());var i=ld("count",r,this);return i},t.findByIds=function(r){Bi(this);var i={selector:{[this.schema.primaryPath]:{$in:r.slice(0)}}},a=ld("findByIds",i,this);return a},t.exportJSON=function(){throw Rt("json-dump")},t.importJSON=function(r){throw Rt("json-dump")},t.insertCRDT=function(r){throw Rt("crdt")},t.addPipeline=function(r){throw Rt("pipeline")},t.addHook=function(r,i,a,s=!1){if(typeof a!="function")throw Iv("COL7",{key:i,when:r});if(!TR.includes(r))throw Iv("COL8",{key:i,when:r});if(!MR.includes(i))throw ze("COL9",{key:i});if(r==="post"&&i==="create"&&s===!0)throw ze("COL10",{when:r,key:i,parallel:s});var u=a.bind(this),c=s?"parallel":"series";this.hooks[i]=this.hooks[i]||{},this.hooks[i][r]=this.hooks[i][r]||{series:[],parallel:[]},this.hooks[i][r][c].push(u)},t.getHooks=function(r,i){return!this.hooks[i]||!this.hooks[i][r]?{series:[],parallel:[]}:this.hooks[i][r]},t.hasHooks=function(r,i){if(!this.hooks[i]||!this.hooks[i][r])return!1;var a=this.getHooks(r,i);return a?a.series.length>0||a.parallel.length>0:!1},t._runHooks=function(r,i,a,s){var u=this.getHooks(r,i);if(!u)return Qi;var c=u.series.map(d=>()=>d(a,s));return N3(c).then(()=>Promise.all(u.parallel.map(d=>d(a,s))))},t._runHooksSync=function(r,i,a,s){if(this.hasHooks(r,i)){var u=this.getHooks(r,i);u&&u.series.forEach(c=>c(a,s))}},t.promiseWait=function(r){var i=new Promise(a=>{var s=setTimeout(()=>{this.timeouts.delete(s),a()},r);this.timeouts.add(s)});return i},t.close=async function(){return this.closed?no:(oc.delete(this),await Promise.all(this.onClose.map(r=>r())),this.closed=!0,Array.from(this.timeouts).forEach(r=>clearTimeout(r)),this._changeEventBuffer&&this._changeEventBuffer.close(),this.database.requestIdlePromise().then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(r=>r.unsubscribe()),delete this.database.collections[this.name],vl("postCloseRxCollection",this).then(()=>!0))))},t.remove=async function(){await this.close(),await Promise.all(this.onRemove.map(r=>r())),await NR(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.multiInstance,this.database.password,this.database.hashFunction)},au(e,[{key:"insert$",get:function(){return this.$.pipe(Nt(n=>n.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(Nt(n=>n.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(Nt(n=>n.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}])}();function CU(e){if(!GP){GP=!0;var t=Object.getPrototypeOf(e);MR.forEach(n=>{TR.map(r=>{var i=r+e$(n);t[i]=function(a,s){return this.addHook(r,n,a,s)}})})}}function DU(e,t){return e.incrementalModify(n=>t)}function OU(e,t,n){var r=e._docCache.getLatestDocumentDataIfExists(t);return r?Promise.resolve({doc:e._docCache.getCachedRxDocuments([r])[0],inserted:!1}):e.findOne(t).exec().then(i=>i?{doc:i,inserted:!1}:e.insert(n).then(a=>({doc:a,inserted:!0})))}async function $U({database:e,name:t,schema:n,instanceCreationOptions:r={},migrationStrategies:i={},autoMigrate:a=!0,statics:s={},methods:u={},attachments:c={},options:d={},localDocuments:h=!1,cacheReplacementPolicy:v=PR,conflictHandler:y=Fv}){var g={databaseInstanceToken:e.token,databaseName:e.name,collectionName:t,schema:n.jsonSchema,options:r,multiInstance:e.multiInstance,password:e.password,devMode:Tt.isDevMode()};ii("preCreateRxStorageInstance",g);var w=await wU(e,g),x=new IR(e,t,n,w,r,i,u,c,d,v,s,y);try{await x.prepare(),Object.entries(s).forEach(([C,S])=>{Object.defineProperty(x,C,{get:()=>S.bind(x)})}),ii("createRxCollection",{collection:x,creator:{name:t,schema:n,storageInstance:w,instanceCreationOptions:r,migrationStrategies:i,methods:u,attachments:c,options:d,cacheReplacementPolicy:v,localDocuments:h,statics:s}}),a&&x.schema.version!==0&&await x.migratePromise()}catch(C){throw oc.delete(x),await w.close(),C}return x}var AR=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=t||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};AR.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,v_(this)},wrapCall:function(t){var n=this;this._qC++;var r;try{r=t()}catch(i){throw this.unlock(),i}return!r.then||typeof r.then!="function"?(this.unlock(),r):r.then(function(i){return n.unlock(),i}).catch(function(i){throw n.unlock(),i})},requestIdlePromise:function(t){var n=this;t=t||{};var r,i=new Promise(function(u){return r=u}),a=function(){z0(n,i),r()};if(i._manRes=a,t.timeout){var s=setTimeout(function(){i._manRes()},t.timeout);i._timeoutObj=s}return this._iC.add(i),v_(this),i},cancelIdlePromise:function(t){z0(this,t)},requestIdleCallback:function(t,n){var r=this._lHN++,i=this.requestIdlePromise(n);return this._hPM.set(r,i),this._pHM.set(i,r),i.then(function(){return t()}),r},cancelIdleCallback:function(t){var n=this._hPM.get(t);this.cancelIdlePromise(n)},clear:function(){var t=this;this._iC.forEach(function(n){return z0(t,n)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function RU(e){if(e._iC.size!==0){var t=e._iC.values(),n=t.next().value;n._manRes(),setTimeout(function(){return v_(e)},0)}}function z0(e,t){if(t){if(t._timeoutObj&&clearTimeout(t._timeoutObj),e._pHM.has(t)){var n=e._pHM.get(t);e._hPM.delete(n),e._pHM.delete(t)}e._iC.delete(t)}}function v_(e){e._tryIR||e._iC.size===0||(e._tryIR=!0,setTimeout(function(){if(!e.isIdle()){e._tryIR=!1;return}setTimeout(function(){if(!e.isIdle()){e._tryIR=!1;return}RU(e),e._tryIR=!1},0)},0))}class p1{constructor(t){zu(this,"ttl");zu(this,"map",new Map);zu(this,"_to",!1);this.ttl=t}has(t){return this.map.has(t)}add(t){this.map.set(t,jR()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,NU(this)},0))}clear(){this.map.clear()}}function NU(e){const t=jR()-e.ttl,n=e.map[Symbol.iterator]();for(;;){const r=n.next().value;if(!r)return;const i=r[0];if(r[1]<t)e.map.delete(i);else return}}function jR(){return Date.now()}var g_=new Set,JP=new Map,m1=function(){function e(n,r,i,a,s,u,c=!1,d={},h,v,y,g,w,x){this.idleQueue=new AR,this.rxdbVersion=i$,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onClose=[],this.closed=!1,this.collections={},this.states={},this.eventBulks$=new br,this.closePromise=null,this.observable$=this.eventBulks$.pipe(ro(C=>$$(C))),this.storageToken=no,this.storageTokenDocument=no,this.emittedEventBulkIds=new p1(60*1e3),this.name=n,this.token=r,this.storage=i,this.instanceCreationOptions=a,this.password=s,this.multiInstance=u,this.eventReduce=c,this.options=d,this.internalStore=h,this.hashFunction=v,this.cleanupPolicy=y,this.allowSlowCount=g,this.reactivity=w,this.onClosed=x,this.name!=="pseudoInstance"&&(this.internalStore=o1(this.asRxDatabase,h,h1),this.storageTokenDocument=vU(this.asRxDatabase).catch(C=>this.startupErrors.push(C)),this.storageToken=this.storageTokenDocument.then(C=>C.data.token).catch(C=>this.startupErrors.push(C)))}var t=e.prototype;return t.getReactivityFactory=function(){if(!this.reactivity)throw ze("DB14",{database:this.name});return this.reactivity},t.$emit=function(r){this.emittedEventBulkIds.has(r.id)||(this.emittedEventBulkIds.add(r.id),this.eventBulks$.next(r))},t.removeCollectionDoc=async function(r,i){var a=await hf(this.internalStore,gl(zv(r,i),Ks));if(!a)throw ze("SNH",{name:r,schema:i});var s=Yh(a);s._deleted=!0,await this.internalStore.bulkWrite([{document:s,previous:a}],"rx-database-remove-collection")},t.addCollections=async function(r){var i={},a={},s=[],u={};await Promise.all(Object.entries(r).map(async([h,v])=>{var y=h,g=v.schema;i[y]=g;var w=q3(g,this.hashFunction);if(a[y]=w,this.collections[h])throw ze("DB3",{name:h});var x=zv(h,g),C={id:gl(x,Ks),key:x,context:Ks,data:{name:y,schemaHash:await w.hash,schema:w.jsonSchema,version:w.version,connectedStorages:[]},_deleted:!1,_meta:cf(),_rev:$a(),_attachments:{}};s.push({document:C});var S=Object.assign({},v,{name:y,schema:w,database:this}),E=It(v);E.database=this,E.name=h,ii("preCreateRxCollection",E),S.conflictHandler=E.conflictHandler,u[y]=S}));var c=await this.internalStore.bulkWrite(s,"rx-database-add-collection");await jU(this),await Promise.all(c.error.map(async h=>{if(h.status!==409)throw ze("DB12",{database:this.name,writeError:h});var v=Ye(h.documentInDb),y=v.data.name,g=a[y];if(v.data.schemaHash!==await g.hash)throw ze("DB6",{database:this.name,collection:y,previousSchemaHash:v.data.schemaHash,schemaHash:await g.hash,previousSchema:v.data.schema,schema:Ye(i[y])})}));var d={};return await Promise.all(Object.keys(r).map(async h=>{var v=u[h],y=await $U(v);d[h]=y,this.collections[h]=y,this[h]||Object.defineProperty(this,h,{get:()=>this.collections[h]})})),d},t.lockedRun=function(r){return this.idleQueue.wrapCall(r)},t.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},t.exportJSON=function(r){throw Rt("json-dump")},t.addState=function(r){throw Rt("state")},t.importJSON=function(r){throw Rt("json-dump")},t.backup=function(r){throw Rt("backup")},t.leaderElector=function(){throw Rt("leader-election")},t.isLeader=function(){throw Rt("leader-election")},t.waitForLeadership=function(){throw Rt("leader-election")},t.migrationStates=function(){throw Rt("migration-schema")},t.close=function(){if(this.closePromise)return this.closePromise;var{promise:r,resolve:i}=LR(),a=s=>{this.onClosed&&this.onClosed(),this.closed=!0,i(s)};return this.closePromise=r,(async()=>{if(await vl("preCloseRxDatabase",this),this.eventBulks$.complete(),this._subs.map(s=>s.unsubscribe()),this.name==="pseudoInstance"){a(!1);return}return this.requestIdlePromise().then(()=>Promise.all(this.onClose.map(s=>s()))).then(()=>Promise.all(Object.keys(this.collections).map(s=>this.collections[s]).map(s=>s.close()))).then(()=>this.internalStore.close()).then(()=>a(!0))})(),r},t.remove=function(){return this.close().then(()=>IU(this.name,this.storage,this.multiInstance,this.password))},au(e,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])}();function TU(e,t){if(g_.has(zR(e,t)))throw ze("DB8",{name:e,storage:t.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}function LR(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}function zR(e,t){return t.name+"|"+e}async function FR(e,t,n,r,i,a){var s=await t.createStorageInstance({databaseInstanceToken:e,databaseName:n,collectionName:VW,schema:h1,options:r,multiInstance:i,password:a,devMode:Tt.isDevMode()});return s}function MU({storage:e,instanceCreationOptions:t,name:n,password:r,multiInstance:i=!0,eventReduce:a=!0,ignoreDuplicate:s=!1,options:u={},cleanupPolicy:c,closeDuplicates:d=!1,allowSlowCount:h=!1,localDocuments:v=!1,hashFunction:y=JO,reactivity:g}){ii("preCreateRxDatabase",{storage:e,instanceCreationOptions:t,name:n,password:r,multiInstance:i,eventReduce:a,ignoreDuplicate:s,options:u,localDocuments:v});var w=zR(n,e),x=JP.get(w)||new Set,C=LR(),S=Array.from(x),E=()=>{x.delete(C.promise),g_.delete(w)};return x.add(C.promise),JP.set(w,x),(async()=>{if(d&&await Promise.all(S.map(U=>U.catch(()=>null).then(W=>W&&W.close()))),s){if(!Tt.isDevMode())throw ze("DB9",{database:n})}else TU(n,e);g_.add(w);var P=Lh(10),N=await FR(P,e,n,t,i,r),T=new m1(n,P,e,t,r,i,a,u,N,y,c,h,g,E);return await vl("createRxDatabase",{database:T,creator:{storage:e,instanceCreationOptions:t,name:n,password:r,multiInstance:i,eventReduce:a,ignoreDuplicate:s,options:u,localDocuments:v}}),T})().then(P=>{C.resolve(P)}).catch(P=>{C.reject(P),E()}),C.promise}async function IU(e,t,n=!0,r){var i=Lh(10),a=await FR(i,t,e,{},n,r),s=await OR(a),u=new Set;s.forEach(d=>u.add(d.data.name));var c=Array.from(u);return await Promise.all(c.map(d=>NR(t,a,i,e,d,n,r))),await vl("postRemoveRxDatabase",{databaseName:e,storage:t}),await a.remove(),c}function AU(e){return e instanceof m1}async function jU(e){if(await e.storageToken,e.startupErrors[0])throw e.startupErrors[0]}var LU={RxSchema:s$.prototype,RxDocument:$g,RxQuery:CR.prototype,RxCollection:IR.prototype,RxDatabase:m1.prototype},F0=new Set,ZP=new Set;function Rg(e){if(ii("preAddRxPlugin",{plugin:e,plugins:F0}),!F0.has(e)){{if(ZP.has(e.name))throw ze("PL3",{name:e.name,plugin:e});F0.add(e),ZP.add(e.name)}if(!e.rxdb)throw Iv("PL1",{plugin:e});e.init&&e.init(),e.prototypes&&Object.entries(e.prototypes).forEach(([t,n])=>n(LU[t])),e.overwritable&&Object.assign(Tt,e.overwritable),e.hooks&&Object.entries(e.hooks).forEach(([t,n])=>{n.after&&hh[t].push(n.after),n.before&&hh[t].unshift(n.before)})}}async function Bv(e,t){var n=ou(e.input.metaInstance.schema,{isCheckpoint:"1",itemId:t}),r=await e.input.metaInstance.findDocumentsById([n],!1),i=r[0];if(e.lastCheckpointDoc[t]=i,i)return i.checkpointData}async function Wv(e,t,n){e.checkpointQueue=e.checkpointQueue.then(async()=>{var r=e.lastCheckpointDoc[t];if(n&&!e.events.canceled.getValue()&&(!r||JSON.stringify(r.checkpointData)!==JSON.stringify(n))){var i={id:"",isCheckpoint:"1",itemId:t,_deleted:!1,_attachments:{},checkpointData:n,_meta:cf(),_rev:$a()};for(i.id=ou(e.input.metaInstance.schema,i);!e.events.canceled.getValue();){if(r&&(i.checkpointData=xh([r.checkpointData,i.checkpointData])),i._meta.lwt=ki(),i._rev=Ko(await e.checkpointKey,r),e.events.canceled.getValue())return;var a=[{previous:r,document:i}],s=await e.input.metaInstance.bulkWrite(a,"replication-set-checkpoint"),u=na(e.primaryPath,a,s)[0];if(u){e.lastCheckpointDoc[t]=u;return}else{var c=s.error[0];if(c.status!==409)throw c;r=Ye(c.documentInDb),i._rev=Ko(await e.checkpointKey,r)}}}}),await e.checkpointQueue}async function zU(e){var t=await e.hashFunction([e.identifier,e.forkInstance.databaseName,e.forkInstance.collectionName].join("||"));return"rx_storage_replication_"+t}function ek(e,t,n,r,i){var a=Object.assign({},r,{_attachments:t&&r._attachments?r._attachments:{},_meta:n?r._meta:Object.assign({},i?i._meta:{},{lwt:ki()}),_rev:n?r._rev:$a()});return a._rev||(a._rev=Ko(e,i)),a}function xs(e,t,n){var r=It(e);return t||delete r._attachments,n||(delete r._meta,delete r._rev),r}function y_(e,t){return e.hasAttachments?t.map(n=>{var r=Ir(n.document);return r.docData=Ga(r.docData),{document:r,previous:n.previous}}):t}function w_(e){for(;;)if(e.underlyingPersistentStorage)e=e.underlyingPersistentStorage;else return e}var Zm="RxReplicationProtocolMetaData";function __(e,t){var n=L3(e),r={title:Zm,primaryKey:{key:"id",fields:["itemId","isCheckpoint"],separator:"|"},type:"object",version:e.version,additionalProperties:!1,properties:{id:{type:"string",minLength:1,maxLength:n+2},isCheckpoint:{type:"string",enum:["0","1"],minLength:1,maxLength:1},itemId:{type:"string",maxLength:n>4?n:4},checkpointData:{type:"object",additionalProperties:!0},docData:{type:"object",properties:e.properties},isResolvedConflict:{type:"string"}},keyCompression:e.keyCompression,required:["id","isCheckpoint","itemId"]};t&&(r.encrypted=["docData"]);var i=Pg(r);return i}function BR(e,t){return e.input.metaInstance.findDocumentsById(t.map(n=>{var r=ou(e.input.metaInstance.schema,{itemId:n,isCheckpoint:"0"});return r}),!0).then(n=>{var r={};return Object.values(n).forEach(i=>{r[i.itemId]={docData:i.docData,metaDocument:i}}),r})}async function Uv(e,t,n,r){var i=t[e.primaryPath],a=n?Yh(n):{id:"",isCheckpoint:"0",itemId:i,docData:t,_attachments:{},_deleted:!1,_rev:$a(),_meta:{lwt:0}};a.docData=t,r&&(a.isResolvedConflict=r),a._meta.lwt=ki(),a.id=ou(e.input.metaInstance.schema,a),a._rev=Ko(await e.checkpointKey,n);var s={previous:n,document:a};return s}async function FU(e){if(e.input.initialCheckpoint&&e.input.initialCheckpoint.downstream){var t=await Bv(e,"down");t||await Wv(e,"down",e.input.initialCheckpoint.downstream)}var n=await e.input.hashFunction(e.input.identifier),r=e.input.replicationHandler,i=0,a=[];function s(w){e.stats.down.addNewTask=e.stats.down.addNewTask+1;var x={time:i++,task:w};a.push(x),e.streamQueue.down=e.streamQueue.down.then(()=>{for(var C=[];a.length>0;){e.events.active.down.next(!0);var S=Ye(a.shift());if(!(S.time<c)){if(S.task==="RESYNC")if(C.length===0){C.push(S.task);break}else break;C.push(S.task)}}if(C.length!==0)return C[0]==="RESYNC"?d():h(C)}).then(()=>{e.events.active.down.next(!1),!e.firstSyncDone.down.getValue()&&!e.events.canceled.getValue()&&e.firstSyncDone.down.next(!0)})}if(s("RESYNC"),!e.events.canceled.getValue()){var u=r.masterChangeStream$.pipe(ro(async w=>(await ol(e.events.active.up.pipe(Nt(x=>!x))),w))).subscribe(w=>{e.stats.down.masterChangeStreamEmit=e.stats.down.masterChangeStreamEmit+1,s(w)});ol(e.events.canceled.pipe(Nt(w=>!!w))).then(()=>u.unsubscribe())}var c=-1;async function d(){if(e.stats.down.downstreamResyncOnce=e.stats.down.downstreamResyncOnce+1,!e.events.canceled.getValue()){e.checkpointQueue=e.checkpointQueue.then(()=>Bv(e,"down"));for(var w=await e.checkpointQueue,x=[];!e.events.canceled.getValue();){c=i++;var C=await r.masterChangesSince(w,e.input.pullBatchSize);if(C.documents.length===0||(w=xh([w,C.checkpoint]),x.push(g(C.documents,w)),C.documents.length<e.input.pullBatchSize))break}await Promise.all(x)}}function h(w){e.stats.down.downstreamProcessChanges=e.stats.down.downstreamProcessChanges+1;var x=[],C=null;return w.forEach(S=>{if(S==="RESYNC")throw new Error("SNH");ml(x,S.documents),C=xh([C,S.checkpoint])}),g(x,Ye(C))}var v=Qi,y={docs:{}};function g(w,x){var C=e.primaryPath;return e.stats.down.persistFromMaster=e.stats.down.persistFromMaster+1,w.forEach(S=>{var E=S[C];y.docs[E]=S}),y.checkpoint=x,v=v.then(()=>{var S=y.docs;y.docs={};var E=y.checkpoint,P=Object.keys(S);if(e.events.canceled.getValue()||P.length===0)return Qi;var N=[],T={},U={},W=[];return Promise.all([e.input.forkInstance.findDocumentsById(P,!0),BR(e,P)]).then(([re,pe])=>{var he=new Map;return re.forEach(ce=>he.set(ce[C],ce)),Promise.all(P.map(async ce=>{var fe=he.get(ce),xe=fe?xs(fe,e.hasAttachments,!1):void 0,Ce=S[ce],Le=pe[ce];Le&&fe&&Le.metaDocument.isResolvedConflict===fe._rev&&await e.streamQueue.up;var qe=!Le||!xe?!1:e.input.conflictHandler.isEqual(Le.docData,xe,"downstream-check-if-equal-0");if(!qe&&Le&&Le.docData._rev&&fe&&fe._meta[e.input.identifier]&&Qs(fe._rev)===fe._meta[e.input.identifier]&&(qe=!0),fe&&Le&&qe===!1||fe&&!Le)return Qi;var We=xe?e.input.conflictHandler.isEqual(Ce,xe,"downstream-check-if-equal-1"):!1;if(xe&&We)return(!Le||qe===!1)&&W.push(await Uv(e,xe,Le?Le.metaDocument:void 0)),Qi;var oe=Object.assign({},Ce,fe?{_meta:It(fe._meta),_attachments:e.hasAttachments&&Ce._attachments?Ce._attachments:{},_rev:$a()}:{_meta:{lwt:ki()},_rev:$a(),_attachments:e.hasAttachments&&Ce._attachments?Ce._attachments:{}});if(Ce._rev){var _e=fe?Qs(fe._rev)+1:1;oe._meta[e.input.identifier]=_e,e.input.keepMeta&&(oe._rev=Ce._rev)}e.input.keepMeta&&Ce._meta&&(oe._meta=Ce._meta);var G={previous:fe,document:oe};G.document._rev=G.document._rev?G.document._rev:Ko(n,G.previous),N.push(G),T[ce]=G,U[ce]=await Uv(e,Ce,Le?Le.metaDocument:void 0)}))}).then(async()=>{if(N.length>0)return e.input.forkInstance.bulkWrite(N,await e.downstreamBulkWriteFlag).then(re=>{var pe=na(e.primaryPath,N,re);pe.forEach(ce=>{var fe=ce[C];e.events.processed.down.next(T[fe]),W.push(U[fe])});var he;if(re.error.forEach(ce=>{if(ce.status!==409){var fe=ze("RC_PULL",{writeError:ce});e.events.error.next(fe),he=fe}}),he)throw he})}).then(()=>{if(W.length>0)return e.input.metaInstance.bulkWrite(y_(e,W),"replication-down-write-meta").then(re=>{re.error.forEach(pe=>{e.events.error.next(ze("RC_PULL",{id:pe.documentId,writeError:pe}))})})}).then(()=>{Wv(e,"down",E)})}).catch(S=>e.events.error.next(S)),v}}async function BU(e,t,n){var r=e.input.conflictHandler,i=r.isEqual(t.realMasterState,t.newDocumentState,"replication-resolve-conflict");if(!i){var a=await r.resolve(t,"replication-resolve-conflict"),s=Object.assign({},a,{_meta:It(n._meta),_rev:$a(),_attachments:It(n._attachments)});return s._meta.lwt=ki(),s._rev=Ko(await e.checkpointKey,n),s}}async function b_(e,t,n,r){if(!n._attachments||r&&!r._attachments)throw new Error("_attachments missing");var i=n[e],a=new Set(r&&r._attachments?Object.keys(r._attachments):[]);return await Promise.all(Object.entries(n._attachments).map(async([s,u])=>{if((!a.has(s)||r&&Ye(r._attachments)[s].digest!==u.digest)&&!u.data){var c=await t.getAttachmentData(i,s,u.digest);u.data=c}})),n}async function WU(e){if(e.input.initialCheckpoint&&e.input.initialCheckpoint.upstream){var t=await Bv(e,"up");t||await Wv(e,"up",e.input.initialCheckpoint.upstream)}var n=e.input.replicationHandler;e.streamQueue.up=e.streamQueue.up.then(()=>h().then(()=>v()));var r=0,i=-1,a=[],s=no,u={docs:{}},c=e.input.forkInstance.changeStream().subscribe(g=>{if(!e.events.paused.getValue())return e.stats.up.forkChangeStreamEmit=e.stats.up.forkChangeStreamEmit+1,a.push({task:g,time:r++}),e.events.active.up.getValue()||e.events.active.up.next(!0),e.input.waitBeforePersist?e.input.waitBeforePersist().then(()=>v()):v()}),d=n.masterChangeStream$.pipe(Nt(g=>g==="RESYNC")).subscribe(()=>{a.push({task:"RESYNC",time:r++}),v()});ol(e.events.canceled.pipe(Nt(g=>!!g))).then(()=>{c.unsubscribe(),d.unsubscribe()});async function h(){if(e.stats.up.upstreamInitialSync=e.stats.up.upstreamInitialSync+1,!e.events.canceled.getValue()){e.checkpointQueue=e.checkpointQueue.then(()=>Bv(e,"up"));for(var g=await e.checkpointQueue,w=new Set,x=async function(){i=r++,w.size>3&&await Promise.race(Array.from(w));var E=await vR(e.input.forkInstance,e.input.pushBatchSize,g);if(E.documents.length===0)return 1;g=xh([g,E.checkpoint]);var P=y(E.documents,Ye(g));w.add(P),P.catch().then(()=>w.delete(P))};!e.events.canceled.getValue()&&!await x(););var C=await Promise.all(w),S=C.find(E=>!!E);S?await h():!e.firstSyncDone.up.getValue()&&!e.events.canceled.getValue()&&e.firstSyncDone.up.next(!0)}}function v(){if(e.events.canceled.getValue()||a.length===0){e.events.active.up.next(!1);return}e.stats.up.processTasks=e.stats.up.processTasks+1,e.events.active.up.next(!0),e.streamQueue.up=e.streamQueue.up.then(async()=>{for(var g=[],w;a.length>0;){var x=Ye(a.shift());if(!(x.time<i)){if(x.task==="RESYNC"){e.events.active.up.next(!1),await h();return}x.task.context!==await e.downstreamBulkWriteFlag&&ml(g,x.task.events.map(C=>C.documentData)),w=xh([w,x.task.checkpoint])}}if(await y(g,w),a.length===0)e.events.active.up.next(!1);else return v()})}function y(g,w){return e.stats.up.persistToMaster=e.stats.up.persistToMaster+1,g.forEach(x=>{var C=x[e.primaryPath];u.docs[C]=x}),u.checkpoint=w,s=s.then(async()=>{if(e.events.canceled.getValue())return!1;var x=u.docs;u.docs={};var C=u.checkpoint,S=Object.keys(x);function E(){return Wv(e,"up",C)}if(S.length===0)return E(),!1;var P=await BR(e,S),N={},T=[],U={},W={};if(await Promise.all(S.map(async G=>{var F=x[G];W[G]=F;var te=xs(F,e.hasAttachments,!!e.input.keepMeta),X=P[G];X&&X.metaDocument.isResolvedConflict!==F._rev&&e.input.conflictHandler.isEqual(X.docData,te,"upstream-check-if-equal")||X&&X.docData._rev&&Qs(F._rev)===F._meta[e.input.identifier]||(T.push(G),N[G]={assumedMasterState:X?X.docData:void 0,newDocumentState:te},U[G]=await Uv(e,te,X?X.metaDocument:void 0))})),T.length===0)return E(),!1;var re=Object.values(N),pe=new Set,he={},ce=h3(re,e.input.pushBatchSize);await Promise.all(ce.map(async G=>{e.hasAttachments&&await Promise.all(G.map(async te=>{te.newDocumentState=await b_(e.primaryPath,e.input.forkInstance,Ir(te.newDocumentState),te.assumedMasterState)}));var F=await n.masterWrite(G);F.forEach(te=>{var X=te[e.primaryPath];pe.add(X),he[X]=te})}));var fe=[];if(T.forEach(G=>{pe.has(G)||(e.events.processed.up.next(N[G]),fe.push(U[G]))}),e.events.canceled.getValue())return!1;fe.length>0&&await e.input.metaInstance.bulkWrite(y_(e,fe),"replication-up-write-meta");var xe=!1;if(pe.size>0){e.stats.up.persistToMasterHadConflicts=e.stats.up.persistToMasterHadConflicts+1;var Ce=[],Le={};if(await Promise.all(Object.entries(he).map(([G,F])=>{var te=N[G],X={newDocumentState:te.newDocumentState,assumedMasterState:te.assumedMasterState,realMasterState:F};return BU(e,X,W[G]).then(async A=>{if(A){e.events.resolvedConflicts.next({input:X,output:A}),Ce.push({previous:W[G],document:A});var H=P[G];Le[G]=await Uv(e,Ye(F),H?H.metaDocument:void 0,A._rev)}})})),Ce.length>0){xe=!0,e.stats.up.persistToMasterConflictWrites=e.stats.up.persistToMasterConflictWrites+1;var qe=await e.input.forkInstance.bulkWrite(Ce,"replication-up-write-conflict"),We;if(qe.error.forEach(G=>{if(G.status!==409){var F=ze("RC_PUSH",{writeError:G});e.events.error.next(F),We=F}}),We)throw We;var oe=[],_e=na(e.primaryPath,Ce,qe);_e.forEach(G=>{var F=G[e.primaryPath];oe.push(Le[F])}),oe.length>0&&await e.input.metaInstance.bulkWrite(y_(e,oe),"replication-up-write-conflict-meta")}}return E(),xe}).catch(x=>(e.events.error.next(x),!1)),s}}function WR(e){e=It(e),e.forkInstance=w_(e.forkInstance),e.metaInstance=w_(e.metaInstance);var t=zU(e),n={primaryPath:ai(e.forkInstance.schema.primaryKey),hasAttachments:!!e.forkInstance.schema.attachments,input:e,checkpointKey:t,downstreamBulkWriteFlag:t.then(r=>"replication-downstream-"+r),events:{canceled:new qa(!1),paused:new qa(!1),active:{down:new qa(!0),up:new qa(!0)},processed:{down:new br,up:new br},resolvedConflicts:new br,error:new br},stats:{down:{addNewTask:0,downstreamProcessChanges:0,downstreamResyncOnce:0,masterChangeStreamEmit:0,persistFromMaster:0},up:{forkChangeStreamEmit:0,persistToMaster:0,persistToMasterConflictWrites:0,persistToMasterHadConflicts:0,processTasks:0,upstreamInitialSync:0}},firstSyncDone:{down:new qa(!1),up:new qa(!1)},streamQueue:{down:Qi,up:Qi},checkpointQueue:Qi,lastCheckpointDoc:{}};return FU(n),WU(n),n}function ev(e){return ol(D$([e.firstSyncDone.down.pipe(Nt(t=>!!t)),e.firstSyncDone.up.pipe(Nt(t=>!!t))])).then(()=>{})}function S_(e){return Promise.all([e.streamQueue.up,e.streamQueue.down,e.checkpointQueue])}function UU(e,t,n,r=!1){e=w_(e);var i=!!e.schema.attachments,a=ai(e.schema.primaryKey),s={masterChangeStream$:e.changeStream().pipe(ro(async u=>{var c={checkpoint:u.checkpoint,documents:await Promise.all(u.events.map(async d=>{var h=xs(d.documentData,i,r);return i&&(h=await b_(a,e,Ir(h),void 0)),h}))};return c})),masterChangesSince(u,c){return vR(e,c,u).then(async d=>({checkpoint:d.documents.length>0?d.checkpoint:u,documents:await Promise.all(d.documents.map(async h=>{var v=xs(h,i,r);return i&&(v=await b_(a,e,Ir(v),void 0)),v}))}))},async masterWrite(u){var c={};u.forEach(x=>{var C=x.newDocumentState[a];c[C]=x});var d=Object.keys(c),h=await e.findDocumentsById(d,!0),v=new Map;h.forEach(x=>v.set(x[a],x));var y=[],g=[];if(await Promise.all(Object.entries(c).map(([x,C])=>{var S=v.get(x);S?S&&!C.assumedMasterState?y.push(xs(S,i,r)):t.isEqual(xs(S,i,r),Ye(C.assumedMasterState),"rxStorageInstanceToReplicationHandler-masterWrite")===!0?g.push({previous:S,document:ek(n,i,r,C.newDocumentState,S)}):y.push(xs(S,i,r)):g.push({document:ek(n,i,r,C.newDocumentState)})})),g.length>0){var w=await e.bulkWrite(g,"replication-master-write");w.error.forEach(x=>{if(x.status!==409)throw ze("SNH",{name:"non conflict error",error:x});y.push(xs(Ye(x.documentInDb),i,r))})}return y}};return s}async function UR(e){e.events.canceled.next(!0),e.events.active.up.complete(),e.events.active.down.complete(),e.events.processed.up.complete(),e.events.processed.down.complete(),e.events.resolvedConflicts.complete(),e.events.canceled.complete(),await e.checkpointQueue}function HU(e){return e&&typeof e.then=="function"}Promise.resolve(!1);var KU=Promise.resolve(!0),Lo=Promise.resolve();function el(e,t){return e||(e=0),new Promise(function(n){return setTimeout(function(){return n(t)},e)})}function qU(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Vh(){return Math.random().toString(36).substring(2)}var B0=0;function Xh(){var e=Date.now()*1e3;return e<=B0&&(e=B0+1),B0=e,e}function YU(){return typeof navigator<"u"&&typeof navigator.locks<"u"&&typeof navigator.locks.request=="function"}var VU=Xh,XU="native";function QU(e){var t={time:Xh(),messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(n){t.messagesCallback&&t.messagesCallback(n.data)},t}function GU(e){e.bc.close(),e.subFns=[]}function JU(e,t){try{return e.bc.postMessage(t,!1),Lo}catch(n){return Promise.reject(n)}}function ZU(e,t){e.messagesCallback=t}function eH(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function tH(){return 150}var nH={create:QU,close:GU,onMessage:ZU,postMessage:JU,canBeUsed:eH,type:XU,averageResponseTime:tH,microSeconds:VU};function v1(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return typeof t.webWorkerSupport>"u"&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=1e3*45),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&typeof e.idb.onclose=="function"&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=1e3*60),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=1e3*60*2),t.node.maxParallelWrites||(t.node.maxParallelWrites=2048),typeof t.node.useFastPath>"u"&&(t.node.useFastPath=!0),t}var rH=Xh,iH="pubkey.broadcast-channel-0-",Yo="messages",Ng={durability:"relaxed"},aH="idb";function HR(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function g1(e){e.commit&&e.commit()}function oH(e){var t=HR(),n=iH+e,r=t.open(n);return r.onupgradeneeded=function(i){var a=i.target.result;a.createObjectStore(Yo,{keyPath:"id",autoIncrement:!0})},new Promise(function(i,a){r.onerror=function(s){return a(s)},r.onsuccess=function(){i(r.result)}})}function sH(e,t,n){var r=Date.now(),i={uuid:t,time:r,data:n},a=e.transaction([Yo],"readwrite",Ng);return new Promise(function(s,u){a.oncomplete=function(){return s()},a.onerror=function(d){return u(d)};var c=a.objectStore(Yo);c.add(i),g1(a)})}function uH(e,t){var n=e.transaction(Yo,"readonly",Ng),r=n.objectStore(Yo),i=[],a=IDBKeyRange.bound(t+1,1/0);if(r.getAll){var s=r.getAll(a);return new Promise(function(c,d){s.onerror=function(h){return d(h)},s.onsuccess=function(h){c(h.target.result)}})}function u(){try{return a=IDBKeyRange.bound(t+1,1/0),r.openCursor(a)}catch{return r.openCursor()}}return new Promise(function(c,d){var h=u();h.onerror=function(v){return d(v)},h.onsuccess=function(v){var y=v.target.result;y?y.value.id<t+1?y.continue(t+1):(i.push(y.value),y.continue()):(g1(n),c(i))}})}function lH(e,t){if(e.closed)return Promise.resolve([]);var n=e.db.transaction(Yo,"readwrite",Ng),r=n.objectStore(Yo);return Promise.all(t.map(function(i){var a=r.delete(i);return new Promise(function(s){a.onsuccess=function(){return s()}})}))}function cH(e,t){var n=Date.now()-t,r=e.transaction(Yo,"readonly",Ng),i=r.objectStore(Yo),a=[];return new Promise(function(s){i.openCursor().onsuccess=function(u){var c=u.target.result;if(c){var d=c.value;d.time<n?(a.push(d),c.continue()):(g1(r),s(a))}else s(a)}})}function fH(e){return cH(e.db,e.options.idb.ttl).then(function(t){return lH(e,t.map(function(n){return n.id}))})}function dH(e,t){return t=v1(t),oH(e).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:Vh(),eMIs:new p1(t.idb.ttl*2),writeBlockPromise:Lo,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},KR(r),r})}function KR(e){e.closed||qR(e).then(function(){return el(e.options.idb.fallbackInterval)}).then(function(){return KR(e)})}function hH(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}function qR(e){return e.closed||!e.messagesCallback?Lo:uH(e.db,e.lastCursorId).then(function(t){var n=t.filter(function(r){return!!r}).map(function(r){return r.id>e.lastCursorId&&(e.lastCursorId=r.id),r}).filter(function(r){return hH(r,e)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){e.messagesCallback&&(e.eMIs.add(r.id),e.messagesCallback(r.data))}),Lo})}function pH(e){e.closed=!0,e.db.close()}function mH(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return sH(e.db,e.uuid,t)}).then(function(){qU(0,10)===0&&fH(e)}),e.writeBlockPromise}function vH(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,qR(e)}function gH(){return!!HR()}function yH(e){return e.idb.fallbackInterval*2}var wH={create:dH,close:pH,onMessage:vH,postMessage:mH,canBeUsed:gH,type:aH,averageResponseTime:yH,microSeconds:rH},_H=Xh,bH="pubkey.broadcastChannel-",SH="localstorage";function YR(){var e;if(typeof window>"u")return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function VR(e){return bH+e}function xH(e,t){return new Promise(function(n){el().then(function(){var r=VR(e.channelName),i={token:Vh(),time:Date.now(),data:t,uuid:e.uuid},a=JSON.stringify(i);YR().setItem(r,a);var s=document.createEvent("Event");s.initEvent("storage",!0,!0),s.key=r,s.newValue=a,window.dispatchEvent(s),n()})})}function EH(e,t){var n=VR(e),r=function(a){a.key===n&&t(JSON.parse(a.newValue))};return window.addEventListener("storage",r),r}function PH(e){window.removeEventListener("storage",e)}function kH(e,t){if(t=v1(t),!XR())throw new Error("BroadcastChannel: localstorage cannot be used");var n=Vh(),r=new p1(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=EH(e,function(a){i.messagesCallback&&a.uuid!==n&&(!a.token||r.has(a.token)||a.data.time&&a.data.time<i.messagesCallbackTime||(r.add(a.token),i.messagesCallback(a.data)))}),i}function CH(e){PH(e.listener)}function DH(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function XR(){var e=YR();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}function OH(){var e=120,t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?e*2:e}var $H={create:kH,close:CH,onMessage:DH,postMessage:xH,canBeUsed:XR,type:SH,averageResponseTime:OH,microSeconds:_H},QR=Xh,RH="simulate",y1=new Set;function NH(e){var t={time:QR(),name:e,messagesCallback:null};return y1.add(t),t}function TH(e){y1.delete(e)}var GR=5;function MH(e,t){return new Promise(function(n){return setTimeout(function(){var r=Array.from(y1);r.forEach(function(i){i.name===e.name&&i!==e&&i.messagesCallback&&i.time<t.time&&i.messagesCallback(t)}),n()},GR)})}function IH(e,t){e.messagesCallback=t}function AH(){return!0}function jH(){return GR}var LH={create:NH,close:TH,onMessage:IH,postMessage:MH,canBeUsed:AH,type:RH,averageResponseTime:jH,microSeconds:QR},tk=[nH,wH,$H];function zH(e){var t=[].concat(e.methods,tk).filter(Boolean);if(e.type){if(e.type==="simulate")return LH;var n=t.find(function(i){return i.type===e.type});if(n)return n;throw new Error("method-type "+e.type+" not found")}e.webWorkerSupport||(t=t.filter(function(i){return i.type!=="idb"}));var r=t.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No usable method found in "+JSON.stringify(tk.map(function(i){return i.type})))}var JR=new Set,FH=0,Tg=function(t,n){this.id=FH++,JR.add(this),this.name=t,nk&&(n=nk),this.options=v1(n),this.method=zH(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,BH(this)};Tg._pubkey=!0;var nk;Tg.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(t));return rk(this,"message",t)},postInternal:function(t){return rk(this,"internal",t)},set onmessage(e){var t=this.method.microSeconds(),n={time:t,fn:e};ak(this,"message",this._onML),e&&typeof e=="function"?(this._onML=n,ik(this,"message",n)):this._onML=null},addEventListener:function(t,n){var r=this.method.microSeconds(),i={time:r,fn:n};ik(this,t,i)},removeEventListener:function(t,n){var r=this._addEL[t].find(function(i){return i.fn===n});ak(this,t,r)},close:function(){var t=this;if(!this.closed){JR.delete(this),this.closed=!0;var n=this._prepP?this._prepP:Lo;return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(r){return r()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function rk(e,t,n){var r=e.method.microSeconds(),i={time:r,type:t,data:n},a=e._prepP?e._prepP:Lo;return a.then(function(){var s=e.method.postMessage(e._state,i);return e._uMP.add(s),s.catch().then(function(){return e._uMP.delete(s)}),s})}function BH(e){var t=e.method.create(e.name,e.options);HU(t)?(e._prepP=t,t.then(function(n){e._state=n})):e._state=t}function ZR(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function ik(e,t,n){e._addEL[t].push(n),WH(e)}function ak(e,t,n){e._addEL[t]=e._addEL[t].filter(function(r){return r!==n}),UH(e)}function WH(e){if(!e._iL&&ZR(e)){var t=function(i){e._addEL[i.type].forEach(function(a){i.time>=a.time&&a.fn(i.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}function UH(e){if(e._iL&&!ZR(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}function HH(e){if(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope){var t=self.close.bind(self);self.close=function(){return e(),t()}}else{if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){e()},!0),window.addEventListener("unload",function(){e()},!0)}}function KH(e){process.on("exit",function(){return e()}),process.on("beforeExit",function(){return e().then(function(){return process.exit()})}),process.on("SIGINT",function(){return e().then(function(){return process.exit()})}),process.on("uncaughtException",function(t){return e().then(function(){console.trace(t),process.exit(101)})})}var qH=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",YH=qH?KH:HH,Md=new Set,ok=!1;function VH(){ok||(ok=!0,YH(QH))}function XH(e){if(VH(),typeof e!="function")throw new Error("Listener is no function");Md.add(e);var t={remove:function(){return Md.delete(e)},run:function(){return Md.delete(e),e()}};return t}function QH(){var e=[];return Md.forEach(function(t){e.push(t()),Md.delete(t)}),Promise.all(e)}function sl(e,t){var n={context:"leader",action:t,token:e.token};return e.broadcastChannel.postInternal(n)}function eN(e){e.isLeader=!0,e._hasLeader=!0;var t=XH(function(){return e.die()});e._unl.push(t);var n=function(i){i.context==="leader"&&i.action==="apply"&&sl(e,"tell"),i.context==="leader"&&i.action==="tell"&&!e._dpLC&&(e._dpLC=!0,e._dpL(),sl(e,"tell"))};return e.broadcastChannel.addEventListener("internal",n),e._lstns.push(n),sl(e,"tell")}var tN=function(t,n){var r=this;this.broadcastChannel=t,t._befC.push(function(){return r.die()}),this._options=n,this.isLeader=!1,this.isDead=!1,this.token=Vh(),this._lstns=[],this._unl=[],this._dpL=function(){},this._dpLC=!1,this._wKMC={},this.lN="pubkey-bc||"+t.method.type+"||"+t.name};tN.prototype={hasLeader:function(){var t=this;return navigator.locks.query().then(function(n){var r=n.held?n.held.filter(function(i){return i.name===t.lN}):[];return!!(r&&r.length>0)})},awaitLeadership:function(){var t=this;if(!this._wLMP){this._wKMC.c=new AbortController;var n=new Promise(function(r,i){t._wKMC.res=r,t._wKMC.rej=i});this._wLMP=new Promise(function(r){navigator.locks.request(t.lN,{signal:t._wKMC.c.signal},function(){return t._wKMC.c=void 0,eN(t),r(),n}).catch(function(){})})}return this._wLMP},set onduplicate(e){},die:function(){var t=this;return this._lstns.forEach(function(n){return t.broadcastChannel.removeEventListener("internal",n)}),this._lstns=[],this._unl.forEach(function(n){return n.remove()}),this._unl=[],this.isLeader&&(this.isLeader=!1),this.isDead=!0,this._wKMC.res&&this._wKMC.res(),this._wKMC.c&&this._wKMC.c.abort("LeaderElectionWebLock.die() called"),sl(this,"death")}};var nN=function(t,n){var r=this;this.broadcastChannel=t,this._options=n,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=Vh(),this._aplQ=Lo,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var i=function(s){s.context==="leader"&&(s.action==="death"&&(r._hasLeader=!1),s.action==="tell"&&(r._hasLeader=!0))};this.broadcastChannel.addEventListener("internal",i),this._lstns.push(i)};nN.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(t){var n=this;if(this.isLeader)return el(0,!0);if(this.isDead)return el(0,!1);if(this._aplQC>1)return this._aplQ;var r=function(){if(n.isLeader)return KU;var a=!1,s,u=new Promise(function(h){s=function(){a=!0,h()}}),c=function(v){v.context==="leader"&&v.token!=n.token&&(v.action==="apply"&&v.token>n.token&&s(),v.action==="tell"&&(s(),n._hasLeader=!0))};n.broadcastChannel.addEventListener("internal",c);var d=t?n._options.responseTime*4:n._options.responseTime;return sl(n,"apply").then(function(){return Promise.race([el(d),u.then(function(){return Promise.reject(new Error)})])}).then(function(){return sl(n,"apply")}).then(function(){return Promise.race([el(d),u.then(function(){return Promise.reject(new Error)})])}).catch(function(){}).then(function(){return n.broadcastChannel.removeEventListener("internal",c),a?!1:eN(n).then(function(){return!0})})};return this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then(function(){return r()}).then(function(){n._aplQC=n._aplQC-1}),this._aplQ.then(function(){return n.isLeader})},awaitLeadership:function(){return this._aLP||(this._aLP=GH(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var t=this;return this._lstns.forEach(function(n){return t.broadcastChannel.removeEventListener("internal",n)}),this._lstns=[],this._unl.forEach(function(n){return n.remove()}),this._unl=[],this.isLeader&&(this._hasLeader=!1,this.isLeader=!1),this.isDead=!0,sl(this,"death")}};function GH(e){return e.isLeader?Lo:new Promise(function(t){var n=!1;function r(){n||(n=!0,e.broadcastChannel.removeEventListener("internal",a),t(!0))}e.applyOnce().then(function(){e.isLeader&&r()});var i=function(){return el(e._options.fallbackInterval).then(function(){if(!(e.isDead||n))if(e.isLeader)r();else return e.applyOnce(!0).then(function(){e.isLeader?r():i()})})};i();var a=function(u){u.context==="leader"&&u.action==="death"&&(e._hasLeader=!1,e.applyOnce().then(function(){e.isLeader&&r()}))};e.broadcastChannel.addEventListener("internal",a),e._lstns.push(a)})}function JH(e,t){return e||(e={}),e=JSON.parse(JSON.stringify(e)),e.fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options)),e}function rN(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=JH(t,e);var n=YU()?new tN(e,t):new nN(e,t);return e._befC.push(function(){return n.die()}),e._leaderElector=n,n}var Hv=new Map;function iN(e,t,n,r){var i=Hv.get(t);return i||(i={bc:new Tg(["RxDB:",e,n].join("|")),refs:new Set},Hv.set(t,i)),i.refs.add(r),i.bc}function x_(e,t){var n=Hv.get(e);if(n&&(n.refs.delete(t),n.refs.size===0))return Hv.delete(e),n.bc.close()}function ZH(e,t,n,r){if(t.multiInstance){var i=r||iN(e,t.databaseInstanceToken,n.databaseName,n),a=new br,s=y=>{y.storageName===e&&y.databaseName===t.databaseName&&y.collectionName===t.collectionName&&y.version===t.schema.version&&a.next(y.eventBulk)};i.addEventListener("message",s);var u=n.changeStream(),c=!1,d=u.subscribe(y=>{c||i.postMessage({storageName:e,databaseName:t.databaseName,collectionName:t.collectionName,version:t.schema.version,eventBulk:y})});n.changeStream=function(){return a.asObservable().pipe(LB(u))};var h=n.close.bind(n);n.close=async function(){return c=!0,d.unsubscribe(),i.removeEventListener("message",s),r||await x_(t.databaseInstanceToken,n),h()};var v=n.remove.bind(n);n.remove=async function(){return c=!0,d.unsubscribe(),i.removeEventListener("message",s),r||await x_(t.databaseInstanceToken,n),v()}}}var eK=new Map;function tK(e,t){var n=Ar(eK,t,()=>new Map);function r(i){return Ar(n,JSON.stringify(i),()=>e(i))}return i=>Object.assign({},i.storage,{name:"validate-"+t+"-"+i.storage.name,async createStorageInstance(a){var s=await i.storage.createStorageInstance(a),u=ai(a.schema.primaryKey),c;R3(()=>c=r(a.schema));var d=s.bulkWrite.bind(s);return s.bulkWrite=(h,v)=>{c||(c=r(a.schema));var y=[],g=[];h.forEach(x=>{var C=x.document[u],S=c(x.document);S.length>0?y.push({status:422,isError:!0,documentId:C,writeRow:x,validationErrors:S,schema:s.schema}):g.push(x)});var w=g.length>0?d(g,v):Promise.resolve({error:[],success:[]});return w.then(x=>(y.forEach(C=>{x.error.push(C)}),x))},s}})}var aN={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(qu,function(){var n=function(f,m){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,k){_.__proto__=k}||function(_,k){for(var D in k)Object.prototype.hasOwnProperty.call(k,D)&&(_[D]=k[D])})(f,m)},r=function(){return(r=Object.assign||function(f){for(var m,_=1,k=arguments.length;_<k;_++)for(var D in m=arguments[_])Object.prototype.hasOwnProperty.call(m,D)&&(f[D]=m[D]);return f}).apply(this,arguments)};function i(f,m,_){if(_||arguments.length===2)for(var k,D=0,I=m.length;D<I;D++)!k&&D in m||((k=k||Array.prototype.slice.call(m,0,D))[D]=m[D]);return f.concat(k||Array.prototype.slice.call(m))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:qu,s=Object.keys,u=Array.isArray;function c(f,m){return typeof m!="object"||s(m).forEach(function(_){f[_]=m[_]}),f}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var d=Object.getPrototypeOf,h={}.hasOwnProperty;function v(f,m){return h.call(f,m)}function y(f,m){typeof m=="function"&&(m=m(d(f))),(typeof Reflect>"u"?s:Reflect.ownKeys)(m).forEach(function(_){w(f,_,m[_])})}var g=Object.defineProperty;function w(f,m,_,k){g(f,m,c(_&&v(_,"get")&&typeof _.get=="function"?{get:_.get,set:_.set,configurable:!0}:{value:_,configurable:!0,writable:!0},k))}function x(f){return{from:function(m){return f.prototype=Object.create(m.prototype),w(f.prototype,"constructor",f),{extend:y.bind(null,f.prototype)}}}}var C=Object.getOwnPropertyDescriptor,S=[].slice;function E(f,m,_){return S.call(f,m,_)}function P(f,m){return m(f)}function N(f){if(!f)throw new Error("Assertion Failed")}function T(f){a.setImmediate?setImmediate(f):setTimeout(f,0)}function U(f,m){if(typeof m=="string"&&v(f,m))return f[m];if(!m)return f;if(typeof m!="string"){for(var _=[],k=0,D=m.length;k<D;++k){var I=U(f,m[k]);_.push(I)}return _}var B=m.indexOf(".");if(B!==-1){var Y=f[m.substr(0,B)];return Y==null?void 0:U(Y,m.substr(B+1))}}function W(f,m,_){if(f&&m!==void 0&&!("isFrozen"in Object&&Object.isFrozen(f)))if(typeof m!="string"&&"length"in m){N(typeof _!="string"&&"length"in _);for(var k=0,D=m.length;k<D;++k)W(f,m[k],_[k])}else{var I,B,Y=m.indexOf(".");Y!==-1?(I=m.substr(0,Y),(B=m.substr(Y+1))===""?_===void 0?u(f)&&!isNaN(parseInt(I))?f.splice(I,1):delete f[I]:f[I]=_:W(Y=!(Y=f[I])||!v(f,I)?f[I]={}:Y,B,_)):_===void 0?u(f)&&!isNaN(parseInt(m))?f.splice(m,1):delete f[m]:f[m]=_}}function re(f){var m,_={};for(m in f)v(f,m)&&(_[m]=f[m]);return _}var pe=[].concat;function he(f){return pe.apply([],f)}var oa="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(he([8,16,32,64].map(function(f){return["Int","Uint","Float"].map(function(m){return m+f+"Array"})}))).filter(function(f){return a[f]}),ce=new Set(oa.map(function(f){return a[f]})),fe=null;function xe(f){return fe=new WeakMap,f=function m(_){if(!_||typeof _!="object")return _;var k=fe.get(_);if(k)return k;if(u(_)){k=[],fe.set(_,k);for(var D=0,I=_.length;D<I;++D)k.push(m(_[D]))}else if(ce.has(_.constructor))k=_;else{var B,Y=d(_);for(B in k=Y===Object.prototype?{}:Object.create(Y),fe.set(_,k),_)v(_,B)&&(k[B]=m(_[B]))}return k}(f),fe=null,f}var Ce={}.toString;function Le(f){return Ce.call(f).slice(8,-1)}var qe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",We=typeof qe=="symbol"?function(f){var m;return f!=null&&(m=f[qe])&&m.apply(f)}:function(){return null};function oe(f,m){return m=f.indexOf(m),0<=m&&f.splice(m,1),0<=m}var _e={};function G(f){var m,_,k,D;if(arguments.length===1){if(u(f))return f.slice();if(this===_e&&typeof f=="string")return[f];if(D=We(f)){for(_=[];!(k=D.next()).done;)_.push(k.value);return _}if(f==null)return[f];if(typeof(m=f.length)!="number")return[f];for(_=new Array(m);m--;)_[m]=f[m];return _}for(m=arguments.length,_=new Array(m);m--;)_[m]=arguments[m];return _}var F=typeof Symbol<"u"?function(f){return f[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Qn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Kr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Qn),te={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function X(f,m){this.name=f,this.message=m}function A(f,m){return f+". Errors: "+Object.keys(m).map(function(_){return m[_].toString()}).filter(function(_,k,D){return D.indexOf(_)===k}).join(`
`)}function H(f,m,_,k){this.failures=m,this.failedKeys=k,this.successCount=_,this.message=A(f,m)}function ae(f,m){this.name="BulkError",this.failures=Object.keys(m).map(function(_){return m[_]}),this.failuresByPos=m,this.message=A(f,this.failures)}x(X).from(Error).extend({toString:function(){return this.name+": "+this.message}}),x(H).from(X),x(ae).from(X);var ge=Kr.reduce(function(f,m){return f[m]=m+"Error",f},{}),Oe=X,ve=Kr.reduce(function(f,m){var _=m+"Error";function k(D,I){this.name=_,D?typeof D=="string"?(this.message="".concat(D).concat(I?`
 `+I:""),this.inner=I||null):typeof D=="object"&&(this.message="".concat(D.name," ").concat(D.message),this.inner=D):(this.message=te[m]||_,this.inner=null)}return x(k).from(Oe),f[m]=k,f},{});ve.Syntax=SyntaxError,ve.Type=TypeError,ve.Range=RangeError;var Ne=Qn.reduce(function(f,m){return f[m+"Error"]=ve[m],f},{}),Ge=Kr.reduce(function(f,m){return["Syntax","Type","Range"].indexOf(m)===-1&&(f[m+"Error"]=ve[m]),f},{});function He(){}function an(f){return f}function Et(f,m){return f==null||f===an?m:function(_){return m(f(_))}}function At(f,m){return function(){f.apply(this,arguments),m.apply(this,arguments)}}function dn(f,m){return f===He?m:function(){var _=f.apply(this,arguments);_!==void 0&&(arguments[0]=_);var k=this.onsuccess,D=this.onerror;this.onsuccess=null,this.onerror=null;var I=m.apply(this,arguments);return k&&(this.onsuccess=this.onsuccess?At(k,this.onsuccess):k),D&&(this.onerror=this.onerror?At(D,this.onerror):D),I!==void 0?I:_}}function on(f,m){return f===He?m:function(){f.apply(this,arguments);var _=this.onsuccess,k=this.onerror;this.onsuccess=this.onerror=null,m.apply(this,arguments),_&&(this.onsuccess=this.onsuccess?At(_,this.onsuccess):_),k&&(this.onerror=this.onerror?At(k,this.onerror):k)}}function sr(f,m){return f===He?m:function(_){var k=f.apply(this,arguments);c(_,k);var D=this.onsuccess,I=this.onerror;return this.onsuccess=null,this.onerror=null,_=m.apply(this,arguments),D&&(this.onsuccess=this.onsuccess?At(D,this.onsuccess):D),I&&(this.onerror=this.onerror?At(I,this.onerror):I),k===void 0?_===void 0?void 0:_:c(k,_)}}function Yn(f,m){return f===He?m:function(){return m.apply(this,arguments)!==!1&&f.apply(this,arguments)}}function sn(f,m){return f===He?m:function(){var _=f.apply(this,arguments);if(_&&typeof _.then=="function"){for(var k=this,D=arguments.length,I=new Array(D);D--;)I[D]=arguments[D];return _.then(function(){return m.apply(k,I)})}return m.apply(this,arguments)}}Ge.ModifyError=H,Ge.DexieError=X,Ge.BulkError=ae;var _t=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Vn(f){_t=f}var Xn={},ra=100,oa=typeof Promise>"u"?[]:function(){var f=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[f,d(f),f];var m=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[m,d(m),f]}(),Qn=oa[0],Kr=oa[1],oa=oa[2],Kr=Kr&&Kr.then,Gn=Qn&&Qn.constructor,Sn=!!oa,un=function(f,m){Oi.push([f,m]),si&&(queueMicrotask(lr),si=!1)},ur=!0,si=!0,xn=[],ia=[],lo=an,Wr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:He,pgp:!1,env:{},finalize:He},Fe=Wr,Oi=[],ui=0,co=[];function Te(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var m=this._PSD=Fe;if(typeof f!="function"){if(f!==Xn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Xt(this,this._value))}this._state=null,this._value=null,++m.ref,function _(k,D){try{D(function(I){if(k._state===null){if(I===k)throw new TypeError("A promise cannot be resolved with itself.");var B=k._lib&&Qt();I&&typeof I.then=="function"?_(k,function(Y,ne){I instanceof Te?I._then(Y,ne):I.then(Y,ne)}):(k._state=!0,k._value=I,Ln(k)),B&&$n()}},Xt.bind(null,k))}catch(I){Xt(k,I)}}(this,f)}var cu={get:function(){var f=Fe,m=Er;function _(k,D){var I=this,B=!f.global&&(f!==Fe||m!==Er),Y=B&&!Ma(),ne=new Te(function(R,z){On(I,new fu(cp(k,f,B,Y),cp(D,f,B,Y),R,z,f))});return this._consoleTask&&(ne._consoleTask=this._consoleTask),ne}return _.prototype=Xn,_},set:function(f){w(this,"then",f&&f.prototype===Xn?cu:{get:function(){return f},set:cu.set})}};function fu(f,m,_,k,D){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof m=="function"?m:null,this.resolve=_,this.reject=k,this.psd=D}function Xt(f,m){var _,k;ia.push(m),f._state===null&&(_=f._lib&&Qt(),m=lo(m),f._state=!1,f._value=m,k=f,xn.some(function(D){return D._value===k._value})||xn.push(k),Ln(f),_&&$n())}function Ln(f){var m=f._listeners;f._listeners=[];for(var _=0,k=m.length;_<k;++_)On(f,m[_]);var D=f._PSD;--D.ref||D.finalize(),ui===0&&(++ui,un(function(){--ui==0&&Ri()},[]))}function On(f,m){if(f._state!==null){var _=f._state?m.onFulfilled:m.onRejected;if(_===null)return(f._state?m.resolve:m.reject)(f._value);++m.psd.ref,++ui,un($i,[_,f,m])}else f._listeners.push(m)}function $i(f,m,_){try{var k,D=m._value;!m._state&&ia.length&&(ia=[]),k=_t&&m._consoleTask?m._consoleTask.run(function(){return f(D)}):f(D),m._state||ia.indexOf(D)!==-1||function(I){for(var B=xn.length;B;)if(xn[--B]._value===I._value)return xn.splice(B,1)}(m),_.resolve(k)}catch(I){_.reject(I)}finally{--ui==0&&Ri(),--_.psd.ref||_.psd.finalize()}}function lr(){ho(Wr,function(){Qt()&&$n()})}function Qt(){var f=ur;return si=ur=!1,f}function $n(){var f,m,_;do for(;0<Oi.length;)for(f=Oi,Oi=[],_=f.length,m=0;m<_;++m){var k=f[m];k[0].apply(null,k[1])}while(0<Oi.length);si=ur=!0}function Ri(){var f=xn;xn=[],f.forEach(function(k){k._PSD.onunhandled.call(null,k._value,k)});for(var m=co.slice(0),_=m.length;_;)m[--_]()}function qt(f){return new Te(Xn,!1,f)}function dt(f,m){var _=Fe;return function(){var k=Qt(),D=Fe;try{return Ia(_,!0),f.apply(this,arguments)}catch(I){m&&m(I)}finally{Ia(D,!1),k&&$n()}}}y(Te.prototype,{then:cu,_then:function(f,m){On(this,new fu(null,null,f,m,Fe))},catch:function(f){if(arguments.length===1)return this.then(null,f);var m=f,_=arguments[1];return typeof m=="function"?this.then(null,function(k){return(k instanceof m?_:qt)(k)}):this.then(null,function(k){return(k&&k.name===m?_:qt)(k)})},finally:function(f){return this.then(function(m){return Te.resolve(f()).then(function(){return m})},function(m){return Te.resolve(f()).then(function(){return qt(m)})})},timeout:function(f,m){var _=this;return f<1/0?new Te(function(k,D){var I=setTimeout(function(){return D(new ve.Timeout(m))},f);_.then(k,D).finally(clearTimeout.bind(null,I))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&w(Te.prototype,Symbol.toStringTag,"Dexie.Promise"),Wr.env=lp(),y(Te,{all:function(){var f=G.apply(null,arguments).map(El);return new Te(function(m,_){f.length===0&&m([]);var k=f.length;f.forEach(function(D,I){return Te.resolve(D).then(function(B){f[I]=B,--k||m(f)},_)})})},resolve:function(f){return f instanceof Te?f:f&&typeof f.then=="function"?new Te(function(m,_){f.then(m,_)}):new Te(Xn,!0,f)},reject:qt,race:function(){var f=G.apply(null,arguments).map(El);return new Te(function(m,_){f.map(function(k){return Te.resolve(k).then(m,_)})})},PSD:{get:function(){return Fe},set:function(f){return Fe=f}},totalEchoes:{get:function(){return Er}},newPSD:Ur,usePSD:ho,scheduler:{get:function(){return un},set:function(f){un=f}},rejectionMapper:{get:function(){return lo},set:function(f){lo=f}},follow:function(f,m){return new Te(function(_,k){return Ur(function(D,I){var B=Fe;B.unhandleds=[],B.onunhandled=I,B.finalize=At(function(){var Y,ne=this;Y=function(){ne.unhandleds.length===0?D():I(ne.unhandleds[0])},co.push(function R(){Y(),co.splice(co.indexOf(R),1)}),++ui,un(function(){--ui==0&&Ri()},[])},B.finalize),f()},m,_,k)})}}),Gn&&(Gn.allSettled&&w(Te,"allSettled",function(){var f=G.apply(null,arguments).map(El);return new Te(function(m){f.length===0&&m([]);var _=f.length,k=new Array(_);f.forEach(function(D,I){return Te.resolve(D).then(function(B){return k[I]={status:"fulfilled",value:B}},function(B){return k[I]={status:"rejected",reason:B}}).then(function(){return--_||m(k)})})})}),Gn.any&&typeof AggregateError<"u"&&w(Te,"any",function(){var f=G.apply(null,arguments).map(El);return new Te(function(m,_){f.length===0&&_(new AggregateError([]));var k=f.length,D=new Array(k);f.forEach(function(I,B){return Te.resolve(I).then(function(Y){return m(Y)},function(Y){D[B]=Y,--k||_(new AggregateError(D))})})})}),Gn.withResolvers&&(Te.withResolvers=Gn.withResolvers));var bt={awaits:0,echoes:0,id:0},xr=0,Ni=[],Ti=0,Er=0,fo=0;function Ur(f,m,_,k){var D=Fe,I=Object.create(D);return I.parent=D,I.ref=0,I.global=!1,I.id=++fo,Wr.env,I.env=Sn?{Promise:Te,PromiseProp:{value:Te,configurable:!0,writable:!0},all:Te.all,race:Te.race,allSettled:Te.allSettled,any:Te.any,resolve:Te.resolve,reject:Te.reject}:{},m&&c(I,m),++D.ref,I.finalize=function(){--this.parent.ref||this.parent.finalize()},k=ho(I,f,_,k),I.ref===0&&I.finalize(),k}function Zo(){return bt.id||(bt.id=++xr),++bt.awaits,bt.echoes+=ra,bt.id}function Ma(){return!!bt.awaits&&(--bt.awaits==0&&(bt.id=0),bt.echoes=bt.awaits*ra,!0)}function El(f){return bt.echoes&&f&&f.constructor===Gn?(Zo(),f.then(function(m){return Ma(),m},function(m){return Ma(),Gt(m)})):f}function up(){var f=Ni[Ni.length-1];Ni.pop(),Ia(f,!1)}function Ia(f,m){var _,k=Fe;(m?!bt.echoes||Ti++&&f===Fe:!Ti||--Ti&&f===Fe)||queueMicrotask(m?(function(D){++Er,bt.echoes&&--bt.echoes!=0||(bt.echoes=bt.awaits=bt.id=0),Ni.push(Fe),Ia(D,!0)}).bind(null,f):up),f!==Fe&&(Fe=f,k===Wr&&(Wr.env=lp()),Sn&&(_=Wr.env.Promise,m=f.env,(k.global||f.global)&&(Object.defineProperty(a,"Promise",m.PromiseProp),_.all=m.all,_.race=m.race,_.resolve=m.resolve,_.reject=m.reject,m.allSettled&&(_.allSettled=m.allSettled),m.any&&(_.any=m.any))))}function lp(){var f=a.Promise;return Sn?{Promise:f,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:f.all,race:f.race,allSettled:f.allSettled,any:f.any,resolve:f.resolve,reject:f.reject}:{}}function ho(f,m,_,k,D){var I=Fe;try{return Ia(f,!0),m(_,k,D)}finally{Ia(I,!1)}}function cp(f,m,_,k){return typeof f!="function"?f:function(){var D=Fe;_&&Zo(),Ia(m,!0);try{return f.apply(this,arguments)}finally{Ia(D,!1),k&&queueMicrotask(Ma)}}}function _f(f){Promise===Gn&&bt.echoes===0?Ti===0?f():enqueueNativeMicroTask(f):setTimeout(f,0)}(""+Kr).indexOf("[native code]")===-1&&(Zo=Ma=He);var Gt=Te.reject,Mi=String.fromCharCode(65535),aa="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",du="String expected.",es=[],Pl="__dbnames",bf="readonly",kl="readwrite";function Aa(f,m){return f?m?function(){return f.apply(this,arguments)&&m.apply(this,arguments)}:f:m}var Sf={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Cl(f){return typeof f!="string"||/\./.test(f)?function(m){return m}:function(m){return m[f]===void 0&&f in m&&delete(m=xe(m))[f],m}}function fp(){throw ve.Type()}function ht(f,m){try{var _=dp(f),k=dp(m);if(_!==k)return _==="Array"?1:k==="Array"?-1:_==="binary"?1:k==="binary"?-1:_==="string"?1:k==="string"?-1:_==="Date"?1:k!=="Date"?NaN:-1;switch(_){case"number":case"Date":case"string":return m<f?1:f<m?-1:0;case"binary":return function(D,I){for(var B=D.length,Y=I.length,ne=B<Y?B:Y,R=0;R<ne;++R)if(D[R]!==I[R])return D[R]<I[R]?-1:1;return B===Y?0:B<Y?-1:1}(xf(f),xf(m));case"Array":return function(D,I){for(var B=D.length,Y=I.length,ne=B<Y?B:Y,R=0;R<ne;++R){var z=ht(D[R],I[R]);if(z!==0)return z}return B===Y?0:B<Y?-1:1}(f,m)}}catch{}return NaN}function dp(f){var m=typeof f;return m!="object"?m:ArrayBuffer.isView(f)?"binary":(f=Le(f),f==="ArrayBuffer"?"binary":f)}function xf(f){return f instanceof Uint8Array?f:ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(f)}var Ef=($t.prototype._trans=function(f,m,_){var k=this._tx||Fe.trans,D=this.name,I=_t&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(f==="readonly"?"read":"write"," ").concat(this.name));function B(R,z,M){if(!M.schema[D])throw new ve.NotFound("Table "+D+" not part of transaction");return m(M.idbtrans,M)}var Y=Qt();try{var ne=k&&k.db._novip===this.db._novip?k===Fe.trans?k._promise(f,B,_):Ur(function(){return k._promise(f,B,_)},{trans:k,transless:Fe.transless||Fe}):function R(z,M,V,K){if(z.idbdb&&(z._state.openComplete||Fe.letThrough||z._vip)){var Z=z._createTransaction(M,V,z._dbSchema);try{Z.create(),z._state.PR1398_maxLoop=3}catch(ie){return ie.name===ge.InvalidState&&z.isOpen()&&0<--z._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),z.close({disableAutoOpen:!1}),z.open().then(function(){return R(z,M,V,K)})):Gt(ie)}return Z._promise(M,function(ie,Q){return Ur(function(){return Fe.trans=Z,K(ie,Q,Z)})}).then(function(ie){if(M==="readwrite")try{Z.idbtrans.commit()}catch{}return M==="readonly"?ie:Z._completion.then(function(){return ie})})}if(z._state.openComplete)return Gt(new ve.DatabaseClosed(z._state.dbOpenError));if(!z._state.isBeingOpened){if(!z._state.autoOpen)return Gt(new ve.DatabaseClosed);z.open().catch(He)}return z._state.dbReadyPromise.then(function(){return R(z,M,V,K)})}(this.db,f,[this.name],B);return I&&(ne._consoleTask=I,ne=ne.catch(function(R){return console.trace(R),Gt(R)})),ne}finally{Y&&$n()}},$t.prototype.get=function(f,m){var _=this;return f&&f.constructor===Object?this.where(f).first(m):f==null?Gt(new ve.Type("Invalid argument to Table.get()")):this._trans("readonly",function(k){return _.core.get({trans:k,key:f}).then(function(D){return _.hook.reading.fire(D)})}).then(m)},$t.prototype.where=function(f){if(typeof f=="string")return new this.db.WhereClause(this,f);if(u(f))return new this.db.WhereClause(this,"[".concat(f.join("+"),"]"));var m=s(f);if(m.length===1)return this.where(m[0]).equals(f[m[0]]);var _=this.schema.indexes.concat(this.schema.primKey).filter(function(Y){if(Y.compound&&m.every(function(R){return 0<=Y.keyPath.indexOf(R)})){for(var ne=0;ne<m.length;++ne)if(m.indexOf(Y.keyPath[ne])===-1)return!1;return!0}return!1}).sort(function(Y,ne){return Y.keyPath.length-ne.keyPath.length})[0];if(_&&this.db._maxKey!==Mi){var I=_.keyPath.slice(0,m.length);return this.where(I).equals(I.map(function(ne){return f[ne]}))}!_&&_t&&console.warn("The query ".concat(JSON.stringify(f)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(m.join("+"),"]"));var k=this.schema.idxByName;function D(Y,ne){return ht(Y,ne)===0}var B=m.reduce(function(M,ne){var R=M[0],z=M[1],M=k[ne],V=f[ne];return[R||M,R||!M?Aa(z,M&&M.multi?function(K){return K=U(K,ne),u(K)&&K.some(function(Z){return D(V,Z)})}:function(K){return D(V,U(K,ne))}):z]},[null,null]),I=B[0],B=B[1];return I?this.where(I.name).equals(f[I.keyPath]).filter(B):_?this.filter(B):this.where(m).equals("")},$t.prototype.filter=function(f){return this.toCollection().and(f)},$t.prototype.count=function(f){return this.toCollection().count(f)},$t.prototype.offset=function(f){return this.toCollection().offset(f)},$t.prototype.limit=function(f){return this.toCollection().limit(f)},$t.prototype.each=function(f){return this.toCollection().each(f)},$t.prototype.toArray=function(f){return this.toCollection().toArray(f)},$t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},$t.prototype.orderBy=function(f){return new this.db.Collection(new this.db.WhereClause(this,u(f)?"[".concat(f.join("+"),"]"):f))},$t.prototype.reverse=function(){return this.toCollection().reverse()},$t.prototype.mapToClass=function(f){var m,_=this.db,k=this.name;function D(){return m!==null&&m.apply(this,arguments)||this}(this.schema.mappedClass=f).prototype instanceof fp&&(function(ne,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function z(){this.constructor=ne}n(ne,R),ne.prototype=R===null?Object.create(R):(z.prototype=R.prototype,new z)}(D,m=f),Object.defineProperty(D.prototype,"db",{get:function(){return _},enumerable:!1,configurable:!0}),D.prototype.table=function(){return k},f=D);for(var I=new Set,B=f.prototype;B;B=d(B))Object.getOwnPropertyNames(B).forEach(function(ne){return I.add(ne)});function Y(ne){if(!ne)return ne;var R,z=Object.create(f.prototype);for(R in ne)if(!I.has(R))try{z[R]=ne[R]}catch{}return z}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Y,this.hook("reading",Y),f},$t.prototype.defineClass=function(){return this.mapToClass(function(f){c(this,f)})},$t.prototype.add=function(f,m){var _=this,k=this.schema.primKey,D=k.auto,I=k.keyPath,B=f;return I&&D&&(B=Cl(I)(f)),this._trans("readwrite",function(Y){return _.core.mutate({trans:Y,type:"add",keys:m!=null?[m]:null,values:[B]})}).then(function(Y){return Y.numFailures?Te.reject(Y.failures[0]):Y.lastResult}).then(function(Y){if(I)try{W(f,I,Y)}catch{}return Y})},$t.prototype.update=function(f,m){return typeof f!="object"||u(f)?this.where(":id").equals(f).modify(m):(f=U(f,this.schema.primKey.keyPath),f===void 0?Gt(new ve.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(f).modify(m))},$t.prototype.put=function(f,m){var _=this,k=this.schema.primKey,D=k.auto,I=k.keyPath,B=f;return I&&D&&(B=Cl(I)(f)),this._trans("readwrite",function(Y){return _.core.mutate({trans:Y,type:"put",values:[B],keys:m!=null?[m]:null})}).then(function(Y){return Y.numFailures?Te.reject(Y.failures[0]):Y.lastResult}).then(function(Y){if(I)try{W(f,I,Y)}catch{}return Y})},$t.prototype.delete=function(f){var m=this;return this._trans("readwrite",function(_){return m.core.mutate({trans:_,type:"delete",keys:[f]})}).then(function(_){return _.numFailures?Te.reject(_.failures[0]):void 0})},$t.prototype.clear=function(){var f=this;return this._trans("readwrite",function(m){return f.core.mutate({trans:m,type:"deleteRange",range:Sf})}).then(function(m){return m.numFailures?Te.reject(m.failures[0]):void 0})},$t.prototype.bulkGet=function(f){var m=this;return this._trans("readonly",function(_){return m.core.getMany({keys:f,trans:_}).then(function(k){return k.map(function(D){return m.hook.reading.fire(D)})})})},$t.prototype.bulkAdd=function(f,m,_){var k=this,D=Array.isArray(m)?m:void 0,I=(_=_||(D?void 0:m))?_.allKeys:void 0;return this._trans("readwrite",function(B){var R=k.schema.primKey,Y=R.auto,R=R.keyPath;if(R&&D)throw new ve.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(D&&D.length!==f.length)throw new ve.InvalidArgument("Arguments objects and keys must have the same length");var ne=f.length,R=R&&Y?f.map(Cl(R)):f;return k.core.mutate({trans:B,type:"add",keys:D,values:R,wantResults:I}).then(function(Z){var M=Z.numFailures,V=Z.results,K=Z.lastResult,Z=Z.failures;if(M===0)return I?V:K;throw new ae("".concat(k.name,".bulkAdd(): ").concat(M," of ").concat(ne," operations failed"),Z)})})},$t.prototype.bulkPut=function(f,m,_){var k=this,D=Array.isArray(m)?m:void 0,I=(_=_||(D?void 0:m))?_.allKeys:void 0;return this._trans("readwrite",function(B){var R=k.schema.primKey,Y=R.auto,R=R.keyPath;if(R&&D)throw new ve.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(D&&D.length!==f.length)throw new ve.InvalidArgument("Arguments objects and keys must have the same length");var ne=f.length,R=R&&Y?f.map(Cl(R)):f;return k.core.mutate({trans:B,type:"put",keys:D,values:R,wantResults:I}).then(function(Z){var M=Z.numFailures,V=Z.results,K=Z.lastResult,Z=Z.failures;if(M===0)return I?V:K;throw new ae("".concat(k.name,".bulkPut(): ").concat(M," of ").concat(ne," operations failed"),Z)})})},$t.prototype.bulkUpdate=function(f){var m=this,_=this.core,k=f.map(function(B){return B.key}),D=f.map(function(B){return B.changes}),I=[];return this._trans("readwrite",function(B){return _.getMany({trans:B,keys:k,cache:"clone"}).then(function(Y){var ne=[],R=[];f.forEach(function(M,V){var K=M.key,Z=M.changes,ie=Y[V];if(ie){for(var Q=0,ue=Object.keys(Z);Q<ue.length;Q++){var de=ue[Q],le=Z[de];if(de===m.schema.primKey.keyPath){if(ht(le,K)!==0)throw new ve.Constraint("Cannot update primary key in bulkUpdate()")}else W(ie,de,le)}I.push(V),ne.push(K),R.push(ie)}});var z=ne.length;return _.mutate({trans:B,type:"put",keys:ne,values:R,updates:{keys:k,changeSpecs:D}}).then(function(M){var V=M.numFailures,K=M.failures;if(V===0)return z;for(var Z=0,ie=Object.keys(K);Z<ie.length;Z++){var Q,ue=ie[Z],de=I[Number(ue)];de!=null&&(Q=K[ue],delete K[ue],K[de]=Q)}throw new ae("".concat(m.name,".bulkUpdate(): ").concat(V," of ").concat(z," operations failed"),K)})})})},$t.prototype.bulkDelete=function(f){var m=this,_=f.length;return this._trans("readwrite",function(k){return m.core.mutate({trans:k,type:"delete",keys:f})}).then(function(B){var D=B.numFailures,I=B.lastResult,B=B.failures;if(D===0)return I;throw new ae("".concat(m.name,".bulkDelete(): ").concat(D," of ").concat(_," operations failed"),B)})},$t);function $t(){}function po(f){function m(B,Y){if(Y){for(var ne=arguments.length,R=new Array(ne-1);--ne;)R[ne-1]=arguments[ne];return _[B].subscribe.apply(null,R),f}if(typeof B=="string")return _[B]}var _={};m.addEventType=I;for(var k=1,D=arguments.length;k<D;++k)I(arguments[k]);return m;function I(B,Y,ne){if(typeof B!="object"){var R;Y=Y||Yn;var z={subscribers:[],fire:ne=ne||He,subscribe:function(M){z.subscribers.indexOf(M)===-1&&(z.subscribers.push(M),z.fire=Y(z.fire,M))},unsubscribe:function(M){z.subscribers=z.subscribers.filter(function(V){return V!==M}),z.fire=z.subscribers.reduce(Y,ne)}};return _[B]=m[B]=z}s(R=B).forEach(function(M){var V=R[M];if(u(V))I(M,R[M][0],R[M][1]);else{if(V!=="asap")throw new ve.InvalidArgument("Invalid event config");var K=I(M,an,function(){for(var Z=arguments.length,ie=new Array(Z);Z--;)ie[Z]=arguments[Z];K.subscribers.forEach(function(Q){T(function(){Q.apply(null,ie)})})})}})}}function hu(f,m){return x(m).from({prototype:f}),m}function mo(f,m){return!(f.filter||f.algorithm||f.or)&&(m?f.justLimit:!f.replayFilter)}function ts(f,m){f.filter=Aa(f.filter,m)}function Dl(f,m,_){var k=f.replayFilter;f.replayFilter=k?function(){return Aa(k(),m())}:m,f.justLimit=_&&!k}function Ol(f,m){if(f.isPrimKey)return m.primaryKey;var _=m.getIndexByKeyPath(f.index);if(!_)throw new ve.Schema("KeyPath "+f.index+" on object store "+m.name+" is not indexed");return _}function Pf(f,m,_){var k=Ol(f,m.schema);return m.openCursor({trans:_,values:!f.keysOnly,reverse:f.dir==="prev",unique:!!f.unique,query:{index:k,range:f.range}})}function pu(f,m,_,k){var D=f.replayFilter?Aa(f.filter,f.replayFilter()):f.filter;if(f.or){var I={},B=function(Y,ne,R){var z,M;D&&!D(ne,R,function(V){return ne.stop(V)},function(V){return ne.fail(V)})||((M=""+(z=ne.primaryKey))=="[object ArrayBuffer]"&&(M=""+new Uint8Array(z)),v(I,M)||(I[M]=!0,m(Y,ne,R)))};return Promise.all([f.or._iterate(B,_),$l(Pf(f,k,_),f.algorithm,B,!f.keysOnly&&f.valueMapper)])}return $l(Pf(f,k,_),Aa(f.algorithm,D),m,!f.keysOnly&&f.valueMapper)}function $l(f,m,_,k){var D=dt(k?function(I,B,Y){return _(k(I),B,Y)}:_);return f.then(function(I){if(I)return I.start(function(){var B=function(){return I.continue()};m&&!m(I,function(Y){return B=Y},function(Y){I.stop(Y),B=He},function(Y){I.fail(Y),B=He})||D(I.value,I,function(Y){return B=Y}),B()})})}var oa=Symbol(),ns=(Rl.prototype.execute=function(f){if(this.add!==void 0){var m=this.add;if(u(m))return i(i([],u(f)?f:[],!0),m,!0).sort();if(typeof m=="number")return(Number(f)||0)+m;if(typeof m=="bigint")try{return BigInt(f)+m}catch{return BigInt(0)+m}throw new TypeError("Invalid term ".concat(m))}if(this.remove!==void 0){var _=this.remove;if(u(_))return u(f)?f.filter(function(k){return!_.includes(k)}).sort():[];if(typeof _=="number")return Number(f)-_;if(typeof _=="bigint")try{return BigInt(f)-_}catch{return BigInt(0)-_}throw new TypeError("Invalid subtrahend ".concat(_))}return m=(m=this.replacePrefix)===null||m===void 0?void 0:m[0],m&&typeof f=="string"&&f.startsWith(m)?this.replacePrefix[1]+f.substring(m.length):f},Rl);function Rl(f){Object.assign(this,f)}var kf=(lt.prototype._read=function(f,m){var _=this._ctx;return _.error?_.table._trans(null,Gt.bind(null,_.error)):_.table._trans("readonly",f).then(m)},lt.prototype._write=function(f){var m=this._ctx;return m.error?m.table._trans(null,Gt.bind(null,m.error)):m.table._trans("readwrite",f,"locked")},lt.prototype._addAlgorithm=function(f){var m=this._ctx;m.algorithm=Aa(m.algorithm,f)},lt.prototype._iterate=function(f,m){return pu(this._ctx,f,m,this._ctx.table.core)},lt.prototype.clone=function(f){var m=Object.create(this.constructor.prototype),_=Object.create(this._ctx);return f&&c(_,f),m._ctx=_,m},lt.prototype.raw=function(){return this._ctx.valueMapper=null,this},lt.prototype.each=function(f){var m=this._ctx;return this._read(function(_){return pu(m,f,_,m.table.core)})},lt.prototype.count=function(f){var m=this;return this._read(function(_){var k=m._ctx,D=k.table.core;if(mo(k,!0))return D.count({trans:_,query:{index:Ol(k,D.schema),range:k.range}}).then(function(B){return Math.min(B,k.limit)});var I=0;return pu(k,function(){return++I,!1},_,D).then(function(){return I})}).then(f)},lt.prototype.sortBy=function(f,m){var _=f.split(".").reverse(),k=_[0],D=_.length-1;function I(ne,R){return R?I(ne[_[R]],R-1):ne[k]}var B=this._ctx.dir==="next"?1:-1;function Y(ne,R){return ht(I(ne,D),I(R,D))*B}return this.toArray(function(ne){return ne.sort(Y)}).then(m)},lt.prototype.toArray=function(f){var m=this;return this._read(function(_){var k=m._ctx;if(k.dir==="next"&&mo(k,!0)&&0<k.limit){var D=k.valueMapper,I=Ol(k,k.table.core.schema);return k.table.core.query({trans:_,limit:k.limit,values:!0,query:{index:I,range:k.range}}).then(function(Y){return Y=Y.result,D?Y.map(D):Y})}var B=[];return pu(k,function(Y){return B.push(Y)},_,k.table.core).then(function(){return B})},f)},lt.prototype.offset=function(f){var m=this._ctx;return f<=0||(m.offset+=f,mo(m)?Dl(m,function(){var _=f;return function(k,D){return _===0||(_===1?--_:D(function(){k.advance(_),_=0}),!1)}}):Dl(m,function(){var _=f;return function(){return--_<0}})),this},lt.prototype.limit=function(f){return this._ctx.limit=Math.min(this._ctx.limit,f),Dl(this._ctx,function(){var m=f;return function(_,k,D){return--m<=0&&k(D),0<=m}},!0),this},lt.prototype.until=function(f,m){return ts(this._ctx,function(_,k,D){return!f(_.value)||(k(D),m)}),this},lt.prototype.first=function(f){return this.limit(1).toArray(function(m){return m[0]}).then(f)},lt.prototype.last=function(f){return this.reverse().first(f)},lt.prototype.filter=function(f){var m;return ts(this._ctx,function(_){return f(_.value)}),(m=this._ctx).isMatch=Aa(m.isMatch,f),this},lt.prototype.and=function(f){return this.filter(f)},lt.prototype.or=function(f){return new this.db.WhereClause(this._ctx.table,f,this)},lt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},lt.prototype.desc=function(){return this.reverse()},lt.prototype.eachKey=function(f){var m=this._ctx;return m.keysOnly=!m.isMatch,this.each(function(_,k){f(k.key,k)})},lt.prototype.eachUniqueKey=function(f){return this._ctx.unique="unique",this.eachKey(f)},lt.prototype.eachPrimaryKey=function(f){var m=this._ctx;return m.keysOnly=!m.isMatch,this.each(function(_,k){f(k.primaryKey,k)})},lt.prototype.keys=function(f){var m=this._ctx;m.keysOnly=!m.isMatch;var _=[];return this.each(function(k,D){_.push(D.key)}).then(function(){return _}).then(f)},lt.prototype.primaryKeys=function(f){var m=this._ctx;if(m.dir==="next"&&mo(m,!0)&&0<m.limit)return this._read(function(k){var D=Ol(m,m.table.core.schema);return m.table.core.query({trans:k,values:!1,limit:m.limit,query:{index:D,range:m.range}})}).then(function(k){return k.result}).then(f);m.keysOnly=!m.isMatch;var _=[];return this.each(function(k,D){_.push(D.primaryKey)}).then(function(){return _}).then(f)},lt.prototype.uniqueKeys=function(f){return this._ctx.unique="unique",this.keys(f)},lt.prototype.firstKey=function(f){return this.limit(1).keys(function(m){return m[0]}).then(f)},lt.prototype.lastKey=function(f){return this.reverse().firstKey(f)},lt.prototype.distinct=function(){var f=this._ctx,f=f.index&&f.table.schema.idxByName[f.index];if(!f||!f.multi)return this;var m={};return ts(this._ctx,function(D){var k=D.primaryKey.toString(),D=v(m,k);return m[k]=!0,!D}),this},lt.prototype.modify=function(f){var m=this,_=this._ctx;return this._write(function(k){var D,I,B;B=typeof f=="function"?f:(D=s(f),I=D.length,function(Q){for(var ue=!1,de=0;de<I;++de){var le=D[de],me=f[le],Pe=U(Q,le);me instanceof ns?(W(Q,le,me.execute(Pe)),ue=!0):Pe!==me&&(W(Q,le,me),ue=!0)}return ue});var Y=_.table.core,M=Y.schema.primaryKey,ne=M.outbound,R=M.extractKey,z=200,M=m.db._options.modifyChunkSize;M&&(z=typeof M=="object"?M[Y.name]||M["*"]||200:M);function V(Q,le){var de=le.failures,le=le.numFailures;Z+=Q-le;for(var me=0,Pe=s(de);me<Pe.length;me++){var $e=Pe[me];K.push(de[$e])}}var K=[],Z=0,ie=[];return m.clone().primaryKeys().then(function(Q){function ue(le){var me=Math.min(z,Q.length-le);return Y.getMany({trans:k,keys:Q.slice(le,le+me),cache:"immutable"}).then(function(Pe){for(var $e=[],Ee=[],De=ne?[]:null,be=[],Re=0;Re<me;++Re){var Ae=Pe[Re],Ze={value:xe(Ae),primKey:Q[le+Re]};B.call(Ze,Ze.value,Ze)!==!1&&(Ze.value==null?be.push(Q[le+Re]):ne||ht(R(Ae),R(Ze.value))===0?(Ee.push(Ze.value),ne&&De.push(Q[le+Re])):(be.push(Q[le+Re]),$e.push(Ze.value)))}return Promise.resolve(0<$e.length&&Y.mutate({trans:k,type:"add",values:$e}).then(function(at){for(var ot in at.failures)be.splice(parseInt(ot),1);V($e.length,at)})).then(function(){return(0<Ee.length||de&&typeof f=="object")&&Y.mutate({trans:k,type:"put",keys:De,values:Ee,criteria:de,changeSpec:typeof f!="function"&&f,isAdditionalChunk:0<le}).then(function(at){return V(Ee.length,at)})}).then(function(){return(0<be.length||de&&f===Nl)&&Y.mutate({trans:k,type:"delete",keys:be,criteria:de,isAdditionalChunk:0<le}).then(function(at){return V(be.length,at)})}).then(function(){return Q.length>le+me&&ue(le+z)})})}var de=mo(_)&&_.limit===1/0&&(typeof f!="function"||f===Nl)&&{index:_.index,range:_.range};return ue(0).then(function(){if(0<K.length)throw new H("Error modifying one or more objects",K,Z,ie);return Q.length})})})},lt.prototype.delete=function(){var f=this._ctx,m=f.range;return mo(f)&&(f.isPrimKey||m.type===3)?this._write(function(_){var k=f.table.core.schema.primaryKey,D=m;return f.table.core.count({trans:_,query:{index:k,range:D}}).then(function(I){return f.table.core.mutate({trans:_,type:"deleteRange",range:D}).then(function(B){var Y=B.failures;if(B.lastResult,B.results,B=B.numFailures,B)throw new H("Could not delete some values",Object.keys(Y).map(function(ne){return Y[ne]}),I-B);return I-B})})}):this.modify(Nl)},lt);function lt(){}var Nl=function(f,m){return m.value=null};function hp(f,m){return f<m?-1:f===m?0:1}function Zg(f,m){return m<f?-1:f===m?0:1}function cr(f,m,_){return f=f instanceof mp?new f.Collection(f):f,f._ctx.error=new(_||TypeError)(m),f}function vo(f){return new f.Collection(f,function(){return pp("")}).limit(0)}function mu(f,m,_,k){var D,I,B,Y,ne,R,z,M=_.length;if(!_.every(function(Z){return typeof Z=="string"}))return cr(f,du);function V(Z){D=Z==="next"?function(Q){return Q.toUpperCase()}:function(Q){return Q.toLowerCase()},I=Z==="next"?function(Q){return Q.toLowerCase()}:function(Q){return Q.toUpperCase()},B=Z==="next"?hp:Zg;var ie=_.map(function(Q){return{lower:I(Q),upper:D(Q)}}).sort(function(Q,ue){return B(Q.lower,ue.lower)});Y=ie.map(function(Q){return Q.upper}),ne=ie.map(function(Q){return Q.lower}),z=(R=Z)==="next"?"":k}V("next"),f=new f.Collection(f,function(){return sa(Y[0],ne[M-1]+k)}),f._ondirectionchange=function(Z){V(Z)};var K=0;return f._addAlgorithm(function(Z,ie,Q){var ue=Z.key;if(typeof ue!="string")return!1;var de=I(ue);if(m(de,ne,K))return!0;for(var le=null,me=K;me<M;++me){var Pe=function($e,Ee,De,be,Re,Ae){for(var Ze=Math.min($e.length,be.length),at=-1,ot=0;ot<Ze;++ot){var Pr=Ee[ot];if(Pr!==be[ot])return Re($e[ot],De[ot])<0?$e.substr(0,ot)+De[ot]+De.substr(ot+1):Re($e[ot],be[ot])<0?$e.substr(0,ot)+be[ot]+De.substr(ot+1):0<=at?$e.substr(0,at)+Ee[at]+De.substr(at+1):null;Re($e[ot],Pr)<0&&(at=ot)}return Ze<be.length&&Ae==="next"?$e+De.substr($e.length):Ze<$e.length&&Ae==="prev"?$e.substr(0,De.length):at<0?null:$e.substr(0,at)+be[at]+De.substr(at+1)}(ue,de,Y[me],ne[me],B,R);Pe===null&&le===null?K=me+1:(le===null||0<B(le,Pe))&&(le=Pe)}return ie(le!==null?function(){Z.continue(le+z)}:Q),!1}),f}function sa(f,m,_,k){return{type:2,lower:f,upper:m,lowerOpen:_,upperOpen:k}}function pp(f){return{type:1,lower:f,upper:f}}var mp=(Object.defineProperty(En.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),En.prototype.between=function(f,m,_,k){_=_!==!1,k=k===!0;try{return 0<this._cmp(f,m)||this._cmp(f,m)===0&&(_||k)&&(!_||!k)?vo(this):new this.Collection(this,function(){return sa(f,m,!_,!k)})}catch{return cr(this,aa)}},En.prototype.equals=function(f){return f==null?cr(this,aa):new this.Collection(this,function(){return pp(f)})},En.prototype.above=function(f){return f==null?cr(this,aa):new this.Collection(this,function(){return sa(f,void 0,!0)})},En.prototype.aboveOrEqual=function(f){return f==null?cr(this,aa):new this.Collection(this,function(){return sa(f,void 0,!1)})},En.prototype.below=function(f){return f==null?cr(this,aa):new this.Collection(this,function(){return sa(void 0,f,!1,!0)})},En.prototype.belowOrEqual=function(f){return f==null?cr(this,aa):new this.Collection(this,function(){return sa(void 0,f)})},En.prototype.startsWith=function(f){return typeof f!="string"?cr(this,du):this.between(f,f+Mi,!0,!0)},En.prototype.startsWithIgnoreCase=function(f){return f===""?this.startsWith(f):mu(this,function(m,_){return m.indexOf(_[0])===0},[f],Mi)},En.prototype.equalsIgnoreCase=function(f){return mu(this,function(m,_){return m===_[0]},[f],"")},En.prototype.anyOfIgnoreCase=function(){var f=G.apply(_e,arguments);return f.length===0?vo(this):mu(this,function(m,_){return _.indexOf(m)!==-1},f,"")},En.prototype.startsWithAnyOfIgnoreCase=function(){var f=G.apply(_e,arguments);return f.length===0?vo(this):mu(this,function(m,_){return _.some(function(k){return m.indexOf(k)===0})},f,Mi)},En.prototype.anyOf=function(){var f=this,m=G.apply(_e,arguments),_=this._cmp;try{m.sort(_)}catch{return cr(this,aa)}if(m.length===0)return vo(this);var k=new this.Collection(this,function(){return sa(m[0],m[m.length-1])});k._ondirectionchange=function(I){_=I==="next"?f._ascending:f._descending,m.sort(_)};var D=0;return k._addAlgorithm(function(I,B,Y){for(var ne=I.key;0<_(ne,m[D]);)if(++D===m.length)return B(Y),!1;return _(ne,m[D])===0||(B(function(){I.continue(m[D])}),!1)}),k},En.prototype.notEqual=function(f){return this.inAnyRange([[-1/0,f],[f,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},En.prototype.noneOf=function(){var f=G.apply(_e,arguments);if(f.length===0)return new this.Collection(this);try{f.sort(this._ascending)}catch{return cr(this,aa)}var m=f.reduce(function(_,k){return _?_.concat([[_[_.length-1][1],k]]):[[-1/0,k]]},null);return m.push([f[f.length-1],this.db._maxKey]),this.inAnyRange(m,{includeLowers:!1,includeUppers:!1})},En.prototype.inAnyRange=function(ue,m){var _=this,k=this._cmp,D=this._ascending,I=this._descending,B=this._min,Y=this._max;if(ue.length===0)return vo(this);if(!ue.every(function(de){return de[0]!==void 0&&de[1]!==void 0&&D(de[0],de[1])<=0}))return cr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ve.InvalidArgument);var ne=!m||m.includeLowers!==!1,R=m&&m.includeUppers===!0,z,M=D;function V(de,le){return M(de[0],le[0])}try{(z=ue.reduce(function(de,le){for(var me=0,Pe=de.length;me<Pe;++me){var $e=de[me];if(k(le[0],$e[1])<0&&0<k(le[1],$e[0])){$e[0]=B($e[0],le[0]),$e[1]=Y($e[1],le[1]);break}}return me===Pe&&de.push(le),de},[])).sort(V)}catch{return cr(this,aa)}var K=0,Z=R?function(de){return 0<D(de,z[K][1])}:function(de){return 0<=D(de,z[K][1])},ie=ne?function(de){return 0<I(de,z[K][0])}:function(de){return 0<=I(de,z[K][0])},Q=Z,ue=new this.Collection(this,function(){return sa(z[0][0],z[z.length-1][1],!ne,!R)});return ue._ondirectionchange=function(de){M=de==="next"?(Q=Z,D):(Q=ie,I),z.sort(V)},ue._addAlgorithm(function(de,le,me){for(var Pe,$e=de.key;Q($e);)if(++K===z.length)return le(me),!1;return!Z(Pe=$e)&&!ie(Pe)||(_._cmp($e,z[K][1])===0||_._cmp($e,z[K][0])===0||le(function(){M===D?de.continue(z[K][0]):de.continue(z[K][1])}),!1)}),ue},En.prototype.startsWithAnyOf=function(){var f=G.apply(_e,arguments);return f.every(function(m){return typeof m=="string"})?f.length===0?vo(this):this.inAnyRange(f.map(function(m){return[m,m+Mi]})):cr(this,"startsWithAnyOf() only works with strings")},En);function En(){}function li(f){return dt(function(m){return vu(m),f(m.target.error),!1})}function vu(f){f.stopPropagation&&f.stopPropagation(),f.preventDefault&&f.preventDefault()}var gu="storagemutated",Cf="x-storagemutated-1",ja=po(null,gu),Df=(Ii.prototype._lock=function(){return N(!Fe.global),++this._reculock,this._reculock!==1||Fe.global||(Fe.lockOwnerFor=this),this},Ii.prototype._unlock=function(){if(N(!Fe.global),--this._reculock==0)for(Fe.global||(Fe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var f=this._blockedFuncs.shift();try{ho(f[1],f[0])}catch{}}return this},Ii.prototype._locked=function(){return this._reculock&&Fe.lockOwnerFor!==this},Ii.prototype.create=function(f){var m=this;if(!this.mode)return this;var _=this.db.idbdb,k=this.db._state.dbOpenError;if(N(!this.idbtrans),!f&&!_)switch(k&&k.name){case"DatabaseClosedError":throw new ve.DatabaseClosed(k);case"MissingAPIError":throw new ve.MissingAPI(k.message,k);default:throw new ve.OpenFailed(k)}if(!this.active)throw new ve.TransactionInactive;return N(this._completion._state===null),(f=this.idbtrans=f||(this.db.core||_).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=dt(function(D){vu(D),m._reject(f.error)}),f.onabort=dt(function(D){vu(D),m.active&&m._reject(new ve.Abort(f.error)),m.active=!1,m.on("abort").fire(D)}),f.oncomplete=dt(function(){m.active=!1,m._resolve(),"mutatedParts"in f&&ja.storagemutated.fire(f.mutatedParts)}),this},Ii.prototype._promise=function(f,m,_){var k=this;if(f==="readwrite"&&this.mode!=="readwrite")return Gt(new ve.ReadOnly("Transaction is readonly"));if(!this.active)return Gt(new ve.TransactionInactive);if(this._locked())return new Te(function(I,B){k._blockedFuncs.push([function(){k._promise(f,m,_).then(I,B)},Fe])});if(_)return Ur(function(){var I=new Te(function(B,Y){k._lock();var ne=m(B,Y,k);ne&&ne.then&&ne.then(B,Y)});return I.finally(function(){return k._unlock()}),I._lib=!0,I});var D=new Te(function(I,B){var Y=m(I,B,k);Y&&Y.then&&Y.then(I,B)});return D._lib=!0,D},Ii.prototype._root=function(){return this.parent?this.parent._root():this},Ii.prototype.waitFor=function(f){var m,_=this._root(),k=Te.resolve(f);_._waitingFor?_._waitingFor=_._waitingFor.then(function(){return k}):(_._waitingFor=k,_._waitingQueue=[],m=_.idbtrans.objectStore(_.storeNames[0]),function I(){for(++_._spinCount;_._waitingQueue.length;)_._waitingQueue.shift()();_._waitingFor&&(m.get(-1/0).onsuccess=I)}());var D=_._waitingFor;return new Te(function(I,B){k.then(function(Y){return _._waitingQueue.push(dt(I.bind(null,Y)))},function(Y){return _._waitingQueue.push(dt(B.bind(null,Y)))}).finally(function(){_._waitingFor===D&&(_._waitingFor=null)})})},Ii.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ve.Abort))},Ii.prototype.table=function(f){var m=this._memoizedTables||(this._memoizedTables={});if(v(m,f))return m[f];var _=this.schema[f];if(!_)throw new ve.NotFound("Table "+f+" not part of transaction");return _=new this.db.Table(f,_,this),_.core=this.db.core.table(f),m[f]=_},Ii);function Ii(){}function Of(f,m,_,k,D,I,B){return{name:f,keyPath:m,unique:_,multi:k,auto:D,compound:I,src:(_&&!B?"&":"")+(k?"*":"")+(D?"++":"")+vp(m)}}function vp(f){return typeof f=="string"?f:f?"["+[].join.call(f,"+")+"]":""}function $f(f,m,_){return{name:f,primKey:m,indexes:_,mappedClass:null,idxByName:(k=function(D){return[D.name,D]},_.reduce(function(D,I,B){return B=k(I,B),B&&(D[B[0]]=B[1]),D},{}))};var k}var yu=function(f){try{return f.only([[]]),yu=function(){return[[]]},[[]]}catch{return yu=function(){return Mi},Mi}};function Pt(f){return f==null?function(){}:typeof f=="string"?(m=f).split(".").length===1?function(_){return _[m]}:function(_){return U(_,m)}:function(_){return U(_,f)};var m}function kt(f){return[].slice.call(f)}var ey=0;function wu(f){return f==null?":id":typeof f=="string"?f:"[".concat(f.join("+"),"]")}function ty(f,m,ne){function k(Q){if(Q.type===3)return null;if(Q.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var K=Q.lower,Z=Q.upper,ie=Q.lowerOpen,Q=Q.upperOpen;return K===void 0?Z===void 0?null:m.upperBound(Z,!!Q):Z===void 0?m.lowerBound(K,!!ie):m.bound(K,Z,!!ie,!!Q)}function D(V){var K,Z=V.name;return{name:Z,schema:V,mutate:function(ie){var Q=ie.trans,ue=ie.type,de=ie.keys,le=ie.values,me=ie.range;return new Promise(function(Pe,$e){Pe=dt(Pe);var Ee=Q.objectStore(Z),De=Ee.keyPath==null,be=ue==="put"||ue==="add";if(!be&&ue!=="delete"&&ue!=="deleteRange")throw new Error("Invalid operation type: "+ue);var Re,Ae=(de||le||{length:1}).length;if(de&&le&&de.length!==le.length)throw new Error("Given keys array must have same length as given values array.");if(Ae===0)return Pe({numFailures:0,failures:{},results:[],lastResult:void 0});function Ze(Pn){++Pr,vu(Pn)}var at=[],ot=[],Pr=0;if(ue==="deleteRange"){if(me.type===4)return Pe({numFailures:Pr,failures:ot,results:[],lastResult:void 0});me.type===3?at.push(Re=Ee.clear()):at.push(Re=Ee.delete(k(me)))}else{var De=be?De?[le,de]:[le,null]:[de,null],Je=De[0],Wt=De[1];if(be)for(var hn=0;hn<Ae;++hn)at.push(Re=Wt&&Wt[hn]!==void 0?Ee[ue](Je[hn],Wt[hn]):Ee[ue](Je[hn])),Re.onerror=Ze;else for(hn=0;hn<Ae;++hn)at.push(Re=Ee[ue](Je[hn])),Re.onerror=Ze}function $u(Pn){Pn=Pn.target.result,at.forEach(function(za,Ul){return za.error!=null&&(ot[Ul]=za.error)}),Pe({numFailures:Pr,failures:ot,results:ue==="delete"?de:at.map(function(za){return za.result}),lastResult:Pn})}Re.onerror=function(Pn){Ze(Pn),$u(Pn)},Re.onsuccess=$u})},getMany:function(ie){var Q=ie.trans,ue=ie.keys;return new Promise(function(de,le){de=dt(de);for(var me,Pe=Q.objectStore(Z),$e=ue.length,Ee=new Array($e),De=0,be=0,Re=function(at){at=at.target,Ee[at._pos]=at.result,++be===De&&de(Ee)},Ae=li(le),Ze=0;Ze<$e;++Ze)ue[Ze]!=null&&((me=Pe.get(ue[Ze]))._pos=Ze,me.onsuccess=Re,me.onerror=Ae,++De);De===0&&de(Ee)})},get:function(ie){var Q=ie.trans,ue=ie.key;return new Promise(function(de,le){de=dt(de);var me=Q.objectStore(Z).get(ue);me.onsuccess=function(Pe){return de(Pe.target.result)},me.onerror=li(le)})},query:(K=R,function(ie){return new Promise(function(Q,ue){Q=dt(Q);var de,le,me,De=ie.trans,Pe=ie.values,$e=ie.limit,Re=ie.query,Ee=$e===1/0?void 0:$e,be=Re.index,Re=Re.range,De=De.objectStore(Z),be=be.isPrimaryKey?De:De.index(be.name),Re=k(Re);if($e===0)return Q({result:[]});K?((Ee=Pe?be.getAll(Re,Ee):be.getAllKeys(Re,Ee)).onsuccess=function(Ae){return Q({result:Ae.target.result})},Ee.onerror=li(ue)):(de=0,le=!Pe&&"openKeyCursor"in be?be.openKeyCursor(Re):be.openCursor(Re),me=[],le.onsuccess=function(Ae){var Ze=le.result;return Ze?(me.push(Pe?Ze.value:Ze.primaryKey),++de===$e?Q({result:me}):void Ze.continue()):Q({result:me})},le.onerror=li(ue))})}),openCursor:function(ie){var Q=ie.trans,ue=ie.values,de=ie.query,le=ie.reverse,me=ie.unique;return new Promise(function(Pe,$e){Pe=dt(Pe);var be=de.index,Ee=de.range,De=Q.objectStore(Z),De=be.isPrimaryKey?De:De.index(be.name),be=le?me?"prevunique":"prev":me?"nextunique":"next",Re=!ue&&"openKeyCursor"in De?De.openKeyCursor(k(Ee),be):De.openCursor(k(Ee),be);Re.onerror=li($e),Re.onsuccess=dt(function(Ae){var Ze,at,ot,Pr,Je=Re.result;Je?(Je.___id=++ey,Je.done=!1,Ze=Je.continue.bind(Je),at=(at=Je.continuePrimaryKey)&&at.bind(Je),ot=Je.advance.bind(Je),Pr=function(){throw new Error("Cursor not stopped")},Je.trans=Q,Je.stop=Je.continue=Je.continuePrimaryKey=Je.advance=function(){throw new Error("Cursor not started")},Je.fail=dt($e),Je.next=function(){var Wt=this,hn=1;return this.start(function(){return hn--?Wt.continue():Wt.stop()}).then(function(){return Wt})},Je.start=function(Wt){function hn(){if(Re.result)try{Wt()}catch(Pn){Je.fail(Pn)}else Je.done=!0,Je.start=function(){throw new Error("Cursor behind last entry")},Je.stop()}var $u=new Promise(function(Pn,za){Pn=dt(Pn),Re.onerror=li(za),Je.fail=za,Je.stop=function(Ul){Je.stop=Je.continue=Je.continuePrimaryKey=Je.advance=Pr,Pn(Ul)}});return Re.onsuccess=dt(function(Pn){Re.onsuccess=hn,hn()}),Je.continue=Ze,Je.continuePrimaryKey=at,Je.advance=ot,hn(),$u},Pe(Je)):Pe(null)},$e)})},count:function(ie){var Q=ie.query,ue=ie.trans,de=Q.index,le=Q.range;return new Promise(function(me,Pe){var $e=ue.objectStore(Z),Ee=de.isPrimaryKey?$e:$e.index(de.name),$e=k(le),Ee=$e?Ee.count($e):Ee.count();Ee.onsuccess=dt(function(De){return me(De.target.result)}),Ee.onerror=li(Pe)})}}}var I,B,Y,z=(B=ne,Y=kt((I=f).objectStoreNames),{schema:{name:I.name,tables:Y.map(function(V){return B.objectStore(V)}).map(function(V){var K=V.keyPath,Q=V.autoIncrement,Z=u(K),ie={},Q={name:V.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:K==null,compound:Z,keyPath:K,autoIncrement:Q,unique:!0,extractKey:Pt(K)},indexes:kt(V.indexNames).map(function(ue){return V.index(ue)}).map(function(me){var de=me.name,le=me.unique,Pe=me.multiEntry,me=me.keyPath,Pe={name:de,compound:u(me),keyPath:me,unique:le,multiEntry:Pe,extractKey:Pt(me)};return ie[wu(me)]=Pe}),getIndexByKeyPath:function(ue){return ie[wu(ue)]}};return ie[":id"]=Q.primaryKey,K!=null&&(ie[wu(K)]=Q.primaryKey),Q})},hasGetAll:0<Y.length&&"getAll"in B.objectStore(Y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),ne=z.schema,R=z.hasGetAll,z=ne.tables.map(D),M={};return z.forEach(function(V){return M[V.name]=V}),{stack:"dbcore",transaction:f.transaction.bind(f),table:function(V){if(!M[V])throw new Error("Table '".concat(V,"' not found"));return M[V]},MIN_KEY:-1/0,MAX_KEY:yu(m),schema:ne}}function ny(f,m,_,k){var D=_.IDBKeyRange;return _.indexedDB,{dbcore:(k=ty(m,D,k),f.dbcore.reduce(function(I,B){return B=B.create,r(r({},I),B(I))},k))}}function Tl(f,k){var _=k.db,k=ny(f._middlewares,_,f._deps,k);f.core=k.dbcore,f.tables.forEach(function(D){var I=D.name;f.core.schema.tables.some(function(B){return B.name===I})&&(D.core=f.core.table(I),f[I]instanceof f.Table&&(f[I].core=D.core))})}function Ml(f,m,_,k){_.forEach(function(D){var I=k[D];m.forEach(function(B){var Y=function ne(R,z){return C(R,z)||(R=d(R))&&ne(R,z)}(B,D);(!Y||"value"in Y&&Y.value===void 0)&&(B===f.Transaction.prototype||B instanceof f.Transaction?w(B,D,{get:function(){return this.table(D)},set:function(ne){g(this,D,{value:ne,writable:!0,configurable:!0,enumerable:!0})}}):B[D]=new f.Table(D,I))})})}function Il(f,m){m.forEach(function(_){for(var k in _)_[k]instanceof f.Table&&delete _[k]})}function ry(f,m){return f._cfg.version-m._cfg.version}function Rn(f,m,_,k){var D=f._dbSchema;_.objectStoreNames.contains("$meta")&&!D.$meta&&(D.$meta=$f("$meta",Nf("")[0],[]),f._storeNames.push("$meta"));var I=f._createTransaction("readwrite",f._storeNames,D);I.create(_),I._completion.catch(k);var B=I._reject.bind(I),Y=Fe.transless||Fe;Ur(function(){return Fe.trans=I,Fe.transless=Y,m!==0?(Tl(f,_),R=m,((ne=I).storeNames.includes("$meta")?ne.table("$meta").get("version").then(function(z){return z??R}):Te.resolve(R)).then(function(z){return V=z,K=I,Z=_,ie=[],z=(M=f)._versions,Q=M._dbSchema=_u(0,M.idbdb,Z),(z=z.filter(function(ue){return ue._cfg.version>=V})).length!==0?(z.forEach(function(ue){ie.push(function(){var de=Q,le=ue._cfg.dbschema;bu(M,de,Z),bu(M,le,Z),Q=M._dbSchema=le;var me=ua(de,le);me.add.forEach(function(be){Al(Z,be[0],be[1].primKey,be[1].indexes)}),me.change.forEach(function(be){if(be.recreate)throw new ve.Upgrade("Not yet support for changing primary key");var Re=Z.objectStore(be.name);be.add.forEach(function(Ae){return Jn(Re,Ae)}),be.change.forEach(function(Ae){Re.deleteIndex(Ae.name),Jn(Re,Ae)}),be.del.forEach(function(Ae){return Re.deleteIndex(Ae)})});var Pe=ue._cfg.contentUpgrade;if(Pe&&ue._cfg.version>V){Tl(M,Z),K._memoizedTables={};var $e=re(le);me.del.forEach(function(be){$e[be]=de[be]}),Il(M,[M.Transaction.prototype]),Ml(M,[M.Transaction.prototype],s($e),$e),K.schema=$e;var Ee,De=F(Pe);return De&&Zo(),me=Te.follow(function(){var be;(Ee=Pe(K))&&De&&(be=Ma.bind(null,null),Ee.then(be,be))}),Ee&&typeof Ee.then=="function"?Te.resolve(Ee):me.then(function(){return Ee})}}),ie.push(function(de){var le,me,Pe=ue._cfg.dbschema;le=Pe,me=de,[].slice.call(me.db.objectStoreNames).forEach(function($e){return le[$e]==null&&me.db.deleteObjectStore($e)}),Il(M,[M.Transaction.prototype]),Ml(M,[M.Transaction.prototype],M._storeNames,M._dbSchema),K.schema=M._dbSchema}),ie.push(function(de){M.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(M.idbdb.version/10)===ue._cfg.version?(M.idbdb.deleteObjectStore("$meta"),delete M._dbSchema.$meta,M._storeNames=M._storeNames.filter(function(le){return le!=="$meta"})):de.objectStore("$meta").put(ue._cfg.version,"version"))})}),function ue(){return ie.length?Te.resolve(ie.shift()(K.idbtrans)).then(ue):Te.resolve()}().then(function(){jl(Q,Z)})):Te.resolve();var M,V,K,Z,ie,Q}).catch(B)):(s(D).forEach(function(z){Al(_,z,D[z].primKey,D[z].indexes)}),Tl(f,_),void Te.follow(function(){return f.on.populate.fire(I)}).catch(B));var ne,R})}function Rf(f,m){jl(f._dbSchema,m),m.db.version%10!=0||m.objectStoreNames.contains("$meta")||m.db.createObjectStore("$meta").add(Math.ceil(m.db.version/10-1),"version");var _=_u(0,f.idbdb,m);bu(f,f._dbSchema,m);for(var k=0,D=ua(_,f._dbSchema).change;k<D.length;k++){var I=function(B){if(B.change.length||B.recreate)return console.warn("Unable to patch indexes of table ".concat(B.name," because it has changes on the type of index or primary key.")),{value:void 0};var Y=m.objectStore(B.name);B.add.forEach(function(ne){_t&&console.debug("Dexie upgrade patch: Creating missing index ".concat(B.name,".").concat(ne.src)),Jn(Y,ne)})}(D[k]);if(typeof I=="object")return I.value}}function ua(f,m){var _,k={del:[],add:[],change:[]};for(_ in f)m[_]||k.del.push(_);for(_ in m){var D=f[_],I=m[_];if(D){var B={name:_,def:I,recreate:!1,del:[],add:[],change:[]};if(""+(D.primKey.keyPath||"")!=""+(I.primKey.keyPath||"")||D.primKey.auto!==I.primKey.auto)B.recreate=!0,k.change.push(B);else{var Y=D.idxByName,ne=I.idxByName,R=void 0;for(R in Y)ne[R]||B.del.push(R);for(R in ne){var z=Y[R],M=ne[R];z?z.src!==M.src&&B.change.push(M):B.add.push(M)}(0<B.del.length||0<B.add.length||0<B.change.length)&&k.change.push(B)}}else k.add.push([_,I])}return k}function Al(f,m,_,k){var D=f.db.createObjectStore(m,_.keyPath?{keyPath:_.keyPath,autoIncrement:_.auto}:{autoIncrement:_.auto});return k.forEach(function(I){return Jn(D,I)}),D}function jl(f,m){s(f).forEach(function(_){m.db.objectStoreNames.contains(_)||(_t&&console.debug("Dexie: Creating missing table",_),Al(m,_,f[_].primKey,f[_].indexes))})}function Jn(f,m){f.createIndex(m.name,m.keyPath,{unique:m.unique,multiEntry:m.multi})}function _u(f,m,_){var k={};return E(m.objectStoreNames,0).forEach(function(D){for(var I=_.objectStore(D),B=Of(vp(R=I.keyPath),R||"",!0,!1,!!I.autoIncrement,R&&typeof R!="string",!0),Y=[],ne=0;ne<I.indexNames.length;++ne){var z=I.index(I.indexNames[ne]),R=z.keyPath,z=Of(z.name,R,!!z.unique,!!z.multiEntry,!1,R&&typeof R!="string",!1);Y.push(z)}k[D]=$f(D,B,Y)}),k}function bu(f,m,_){for(var k=_.db.objectStoreNames,D=0;D<k.length;++D){var I=k[D],B=_.objectStore(I);f._hasGetAll="getAll"in B;for(var Y=0;Y<B.indexNames.length;++Y){var ne=B.indexNames[Y],R=B.index(ne).keyPath,z=typeof R=="string"?R:"["+E(R).join("+")+"]";!m[I]||(R=m[I].idxByName[z])&&(R.name=ne,delete m[I].idxByName[z],m[I].idxByName[ne]=R)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f._hasGetAll=!1)}function Nf(f){return f.split(",").map(function(m,_){var k=(m=m.trim()).replace(/([&*]|\+\+)/g,""),D=/^\[/.test(k)?k.match(/^\[(.*)\]$/)[1].split("+"):k;return Of(k,D||null,/\&/.test(m),/\*/.test(m),/\+\+/.test(m),u(D),_===0)})}var gp=(Su.prototype._parseStoresSpec=function(f,m){s(f).forEach(function(_){if(f[_]!==null){var k=Nf(f[_]),D=k.shift();if(D.unique=!0,D.multi)throw new ve.Schema("Primary key cannot be multi-valued");k.forEach(function(I){if(I.auto)throw new ve.Schema("Only primary key can be marked as autoIncrement (++)");if(!I.keyPath)throw new ve.Schema("Index must have a name and cannot be an empty string")}),m[_]=$f(_,D,k)}})},Su.prototype.stores=function(_){var m=this.db;this._cfg.storesSource=this._cfg.storesSource?c(this._cfg.storesSource,_):_;var _=m._versions,k={},D={};return _.forEach(function(I){c(k,I._cfg.storesSource),D=I._cfg.dbschema={},I._parseStoresSpec(k,D)}),m._dbSchema=D,Il(m,[m._allTables,m,m.Transaction.prototype]),Ml(m,[m._allTables,m,m.Transaction.prototype,this._cfg.tables],s(D),D),m._storeNames=s(D),this},Su.prototype.upgrade=function(f){return this._cfg.contentUpgrade=sn(this._cfg.contentUpgrade||He,f),this},Su);function Su(){}function Ll(f,m){var _=f._dbNamesDB;return _||(_=f._dbNamesDB=new fa(Pl,{addons:[],indexedDB:f,IDBKeyRange:m})).version(1).stores({dbnames:"name"}),_.table("dbnames")}function Zn(f){return f&&typeof f.databases=="function"}function Tf(f){return Ur(function(){return Fe.letThrough=!0,f()})}function fr(f){return!("from"in f)}var zn=function(f,m){if(!this){var _=new zn;return f&&"d"in f&&c(_,f),_}c(this,arguments.length?{d:1,from:f,to:1<arguments.length?m:f}:{d:0})};function rs(f,m,_){var k=ht(m,_);if(!isNaN(k)){if(0<k)throw RangeError();if(fr(f))return c(f,{from:m,to:_,d:1});var D=f.l,k=f.r;if(ht(_,f.from)<0)return D?rs(D,m,_):f.l={from:m,to:_,d:1,l:null,r:null},jt(f);if(0<ht(m,f.to))return k?rs(k,m,_):f.r={from:m,to:_,d:1,l:null,r:null},jt(f);ht(m,f.from)<0&&(f.from=m,f.l=null,f.d=k?k.d+1:1),0<ht(_,f.to)&&(f.to=_,f.r=null,f.d=f.l?f.l.d+1:1),_=!f.r,D&&!f.l&&Hr(f,D),k&&_&&Hr(f,k)}}function Hr(f,m){fr(m)||function _(k,ne){var I=ne.from,B=ne.to,Y=ne.l,ne=ne.r;rs(k,I,B),Y&&_(k,Y),ne&&_(k,ne)}(f,m)}function xu(f,m){var _=is(m),k=_.next();if(k.done)return!1;for(var D=k.value,I=is(f),B=I.next(D.from),Y=B.value;!k.done&&!B.done;){if(ht(Y.from,D.to)<=0&&0<=ht(Y.to,D.from))return!0;ht(D.from,Y.from)<0?D=(k=_.next(Y.from)).value:Y=(B=I.next(D.from)).value}return!1}function is(f){var m=fr(f)?null:{s:0,n:f};return{next:function(_){for(var k=0<arguments.length;m;)switch(m.s){case 0:if(m.s=1,k)for(;m.n.l&&ht(_,m.n.from)<0;)m={up:m,n:m.n.l,s:1};else for(;m.n.l;)m={up:m,n:m.n.l,s:1};case 1:if(m.s=2,!k||ht(_,m.n.to)<=0)return{value:m.n,done:!1};case 2:if(m.n.r){m.s=3,m={up:m,n:m.n.r,s:0};continue}case 3:m=m.up}return{done:!0}}}}function jt(f){var m,_,k=(((m=f.r)===null||m===void 0?void 0:m.d)||0)-(((_=f.l)===null||_===void 0?void 0:_.d)||0),D=1<k?"r":k<-1?"l":"";D&&(m=D=="r"?"l":"r",_=r({},f),k=f[D],f.from=k.from,f.to=k.to,f[D]=k[D],_[D]=k[m],(f[m]=_).d=la(_)),f.d=la(f)}function la(_){var m=_.r,_=_.l;return(m?_?Math.max(m.d,_.d):m.d:_?_.d:0)+1}function as(f,m){return s(m).forEach(function(_){f[_]?Hr(f[_],m[_]):f[_]=function k(D){var I,B,Y={};for(I in D)v(D,I)&&(B=D[I],Y[I]=!B||typeof B!="object"||ce.has(B.constructor)?B:k(B));return Y}(m[_])}),f}function Mf(f,m){return f.all||m.all||Object.keys(f).some(function(_){return m[_]&&xu(m[_],f[_])})}y(zn.prototype,((Kr={add:function(f){return Hr(this,f),this},addKey:function(f){return rs(this,f,f),this},addKeys:function(f){var m=this;return f.forEach(function(_){return rs(m,_,_)}),this},hasKey:function(f){var m=is(this).next(f).value;return m&&ht(m.from,f)<=0&&0<=ht(m.to,f)}})[qe]=function(){return is(this)},Kr));var ca={},If={},Af=!1;function zl(f){as(If,f),Af||(Af=!0,setTimeout(function(){Af=!1,Fl(If,!(If={}))},0))}function Fl(f,m){m===void 0&&(m=!1);var _=new Set;if(f.all)for(var k=0,D=Object.values(ca);k<D.length;k++)Eu(B=D[k],f,_,m);else for(var I in f){var B,Y=/^idb\:\/\/(.*)\/(.*)\//.exec(I);Y&&(I=Y[1],Y=Y[2],(B=ca["idb://".concat(I,"/").concat(Y)])&&Eu(B,f,_,m))}_.forEach(function(ne){return ne()})}function Eu(f,m,_,k){for(var D=[],I=0,B=Object.entries(f.queries.query);I<B.length;I++){for(var Y=B[I],ne=Y[0],R=[],z=0,M=Y[1];z<M.length;z++){var V=M[z];Mf(m,V.obsSet)?V.subscribers.forEach(function(Q){return _.add(Q)}):k&&R.push(V)}k&&D.push([ne,R])}if(k)for(var K=0,Z=D;K<Z.length;K++){var ie=Z[K],ne=ie[0],R=ie[1];f.queries.query[ne]=R}}function os(f){var m=f._state,_=f._deps.indexedDB;if(m.isBeingOpened||f.idbdb)return m.dbReadyPromise.then(function(){return m.dbOpenError?Gt(m.dbOpenError):f});m.isBeingOpened=!0,m.dbOpenError=null,m.openComplete=!1;var k=m.openCanceller,D=Math.round(10*f.verno),I=!1;function B(){if(m.openCanceller!==k)throw new ve.DatabaseClosed("db.open() was cancelled")}function Y(){return new Te(function(V,K){if(B(),!_)throw new ve.MissingAPI;var Z=f.name,ie=m.autoSchema||!D?_.open(Z):_.open(Z,D);if(!ie)throw new ve.MissingAPI;ie.onerror=li(K),ie.onblocked=dt(f._fireOnBlocked),ie.onupgradeneeded=dt(function(Q){var ue;z=ie.transaction,m.autoSchema&&!f._options.allowEmptyDB?(ie.onerror=vu,z.abort(),ie.result.close(),(ue=_.deleteDatabase(Z)).onsuccess=ue.onerror=dt(function(){K(new ve.NoSuchDatabase("Database ".concat(Z," doesnt exist")))})):(z.onerror=li(K),Q=Q.oldVersion>Math.pow(2,62)?0:Q.oldVersion,M=Q<1,f.idbdb=ie.result,I&&Rf(f,z),Rn(f,Q/10,z,K))},K),ie.onsuccess=dt(function(){z=null;var Q,ue,de,le,me,Pe=f.idbdb=ie.result,$e=E(Pe.objectStoreNames);if(0<$e.length)try{var Ee=Pe.transaction((le=$e).length===1?le[0]:le,"readonly");if(m.autoSchema)ue=Pe,de=Ee,(Q=f).verno=ue.version/10,de=Q._dbSchema=_u(0,ue,de),Q._storeNames=E(ue.objectStoreNames,0),Ml(Q,[Q._allTables],s(de),de);else if(bu(f,f._dbSchema,Ee),((me=ua(_u(0,(me=f).idbdb,Ee),me._dbSchema)).add.length||me.change.some(function(De){return De.add.length||De.change.length}))&&!I)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Pe.close(),D=Pe.version+1,I=!0,V(Y());Tl(f,Ee)}catch{}es.push(f),Pe.onversionchange=dt(function(De){m.vcFired=!0,f.on("versionchange").fire(De)}),Pe.onclose=dt(function(De){f.on("close").fire(De)}),M&&(me=f._deps,Ee=Z,Pe=me.indexedDB,me=me.IDBKeyRange,Zn(Pe)||Ee===Pl||Ll(Pe,me).put({name:Ee}).catch(He)),V()},K)}).catch(function(V){switch(V==null?void 0:V.name){case"UnknownError":if(0<m.PR1398_maxLoop)return m.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Y();break;case"VersionError":if(0<D)return D=0,Y()}return Te.reject(V)})}var ne,R=m.dbReadyResolve,z=null,M=!1;return Te.race([k,(typeof navigator>"u"?Te.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(V){function K(){return indexedDB.databases().finally(V)}ne=setInterval(K,100),K()}).finally(function(){return clearInterval(ne)}):Promise.resolve()).then(Y)]).then(function(){return B(),m.onReadyBeingFired=[],Te.resolve(Tf(function(){return f.on.ready.fire(f.vip)})).then(function V(){if(0<m.onReadyBeingFired.length){var K=m.onReadyBeingFired.reduce(sn,He);return m.onReadyBeingFired=[],Te.resolve(Tf(function(){return K(f.vip)})).then(V)}})}).finally(function(){m.openCanceller===k&&(m.onReadyBeingFired=null,m.isBeingOpened=!1)}).catch(function(V){m.dbOpenError=V;try{z&&z.abort()}catch{}return k===m.openCanceller&&f._close(),Gt(V)}).finally(function(){m.openComplete=!0,R()}).then(function(){var V;return M&&(V={},f.tables.forEach(function(K){K.schema.indexes.forEach(function(Z){Z.name&&(V["idb://".concat(f.name,"/").concat(K.name,"/").concat(Z.name)]=new zn(-1/0,[[[]]]))}),V["idb://".concat(f.name,"/").concat(K.name,"/")]=V["idb://".concat(f.name,"/").concat(K.name,"/:dels")]=new zn(-1/0,[[[]]])}),ja(gu).fire(V),Fl(V,!0)),f})}function jf(f){function m(I){return f.next(I)}var _=D(m),k=D(function(I){return f.throw(I)});function D(I){return function(ne){var Y=I(ne),ne=Y.value;return Y.done?ne:ne&&typeof ne.then=="function"?ne.then(_,k):u(ne)?Promise.all(ne).then(_,k):_(ne)}}return D(m)()}function Pu(f,m,_){for(var k=u(f)?f.slice():[f],D=0;D<_;++D)k.push(m);return k}var yp={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(f){return r(r({},f),{table:function(m){var _=f.table(m),k=_.schema,D={},I=[];function B(M,V,K){var Z=wu(M),ie=D[Z]=D[Z]||[],Q=M==null?0:typeof M=="string"?1:M.length,ue=0<V,ue=r(r({},K),{name:ue?"".concat(Z,"(virtual-from:").concat(K.name,")"):K.name,lowLevelIndex:K,isVirtual:ue,keyTail:V,keyLength:Q,extractKey:Pt(M),unique:!ue&&K.unique});return ie.push(ue),ue.isPrimaryKey||I.push(ue),1<Q&&B(Q===2?M[0]:M.slice(0,Q-1),V+1,K),ie.sort(function(de,le){return de.keyTail-le.keyTail}),ue}m=B(k.primaryKey.keyPath,0,k.primaryKey),D[":id"]=[m];for(var Y=0,ne=k.indexes;Y<ne.length;Y++){var R=ne[Y];B(R.keyPath,0,R)}function z(M){var V,K=M.query.index;return K.isVirtual?r(r({},M),{query:{index:K.lowLevelIndex,range:(V=M.query.range,K=K.keyTail,{type:V.type===1?2:V.type,lower:Pu(V.lower,V.lowerOpen?f.MAX_KEY:f.MIN_KEY,K),lowerOpen:!0,upper:Pu(V.upper,V.upperOpen?f.MIN_KEY:f.MAX_KEY,K),upperOpen:!0})}}):M}return r(r({},_),{schema:r(r({},k),{primaryKey:m,indexes:I,getIndexByKeyPath:function(M){return(M=D[wu(M)])&&M[0]}}),count:function(M){return _.count(z(M))},query:function(M){return _.query(z(M))},openCursor:function(M){var V=M.query.index,K=V.keyTail,Z=V.isVirtual,ie=V.keyLength;return Z?_.openCursor(z(M)).then(function(ue){return ue&&Q(ue)}):_.openCursor(M);function Q(ue){return Object.create(ue,{continue:{value:function(de){de!=null?ue.continue(Pu(de,M.reverse?f.MAX_KEY:f.MIN_KEY,K)):M.unique?ue.continue(ue.key.slice(0,ie).concat(M.reverse?f.MIN_KEY:f.MAX_KEY,K)):ue.continue()}},continuePrimaryKey:{value:function(de,le){ue.continuePrimaryKey(Pu(de,f.MAX_KEY,K),le)}},primaryKey:{get:function(){return ue.primaryKey}},key:{get:function(){var de=ue.key;return ie===1?de[0]:de.slice(0,ie)}},value:{get:function(){return ue.value}}})}}})}})}};function ku(f,m,_,k){return _=_||{},k=k||"",s(f).forEach(function(D){var I,B,Y;v(m,D)?(I=f[D],B=m[D],typeof I=="object"&&typeof B=="object"&&I&&B?(Y=Le(I))!==Le(B)?_[k+D]=m[D]:Y==="Object"?ku(I,B,_,k+D+"."):I!==B&&(_[k+D]=m[D]):I!==B&&(_[k+D]=m[D])):_[k+D]=void 0}),s(m).forEach(function(D){v(f,D)||(_[k+D]=m[D])}),_}function Cu(f,m){return m.type==="delete"?m.keys:m.keys||m.values.map(f.extractKey)}var wp={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(f){return r(r({},f),{table:function(m){var _=f.table(m),k=_.schema.primaryKey;return r(r({},_),{mutate:function(D){var I=Fe.trans,B=I.table(m).hook,Y=B.deleting,ne=B.creating,R=B.updating;switch(D.type){case"add":if(ne.fire===He)break;return I._promise("readwrite",function(){return z(D)},!0);case"put":if(ne.fire===He&&R.fire===He)break;return I._promise("readwrite",function(){return z(D)},!0);case"delete":if(Y.fire===He)break;return I._promise("readwrite",function(){return z(D)},!0);case"deleteRange":if(Y.fire===He)break;return I._promise("readwrite",function(){return function M(V,K,Z){return _.query({trans:V,values:!1,query:{index:k,range:K},limit:Z}).then(function(ie){var Q=ie.result;return z({type:"delete",keys:Q,trans:V}).then(function(ue){return 0<ue.numFailures?Promise.reject(ue.failures[0]):Q.length<Z?{failures:[],numFailures:0,lastResult:void 0}:M(V,r(r({},K),{lower:Q[Q.length-1],lowerOpen:!0}),Z)})})}(D.trans,D.range,1e4)},!0)}return _.mutate(D);function z(M){var V,K,Z,ie=Fe.trans,Q=M.keys||Cu(k,M);if(!Q)throw new Error("Keys missing");return(M=M.type==="add"||M.type==="put"?r(r({},M),{keys:Q}):r({},M)).type!=="delete"&&(M.values=i([],M.values,!0)),M.keys&&(M.keys=i([],M.keys,!0)),V=_,Z=Q,((K=M).type==="add"?Promise.resolve([]):V.getMany({trans:K.trans,keys:Z,cache:"immutable"})).then(function(ue){var de=Q.map(function(le,me){var Pe,$e,Ee,De=ue[me],be={onerror:null,onsuccess:null};return M.type==="delete"?Y.fire.call(be,le,De,ie):M.type==="add"||De===void 0?(Pe=ne.fire.call(be,le,M.values[me],ie),le==null&&Pe!=null&&(M.keys[me]=le=Pe,k.outbound||W(M.values[me],k.keyPath,le))):(Pe=ku(De,M.values[me]),($e=R.fire.call(be,Pe,le,De,ie))&&(Ee=M.values[me],Object.keys($e).forEach(function(Re){v(Ee,Re)?Ee[Re]=$e[Re]:W(Ee,Re,$e[Re])}))),be});return _.mutate(M).then(function(le){for(var me=le.failures,Pe=le.results,$e=le.numFailures,le=le.lastResult,Ee=0;Ee<Q.length;++Ee){var De=(Pe||Q)[Ee],be=de[Ee];De==null?be.onerror&&be.onerror(me[Ee]):be.onsuccess&&be.onsuccess(M.type==="put"&&ue[Ee]?M.values[Ee]:De)}return{failures:me,results:Pe,numFailures:$e,lastResult:le}}).catch(function(le){return de.forEach(function(me){return me.onerror&&me.onerror(le)}),Promise.reject(le)})})}}})}})}};function _p(f,m,_){try{if(!m||m.keys.length<f.length)return null;for(var k=[],D=0,I=0;D<m.keys.length&&I<f.length;++D)ht(m.keys[D],f[I])===0&&(k.push(_?xe(m.values[D]):m.values[D]),++I);return k.length===f.length?k:null}catch{return null}}var Lf={stack:"dbcore",level:-1,create:function(f){return{table:function(m){var _=f.table(m);return r(r({},_),{getMany:function(k){if(!k.cache)return _.getMany(k);var D=_p(k.keys,k.trans._cache,k.cache==="clone");return D?Te.resolve(D):_.getMany(k).then(function(I){return k.trans._cache={keys:k.keys,values:k.cache==="clone"?xe(I):I},I})},mutate:function(k){return k.type!=="add"&&(k.trans._cache=null),_.mutate(k)}})}}}};function Bl(f,m){return f.trans.mode==="readonly"&&!!f.subscr&&!f.trans.explicit&&f.trans.db._options.cache!=="disabled"&&!m.schema.primaryKey.outbound}function bp(f,m){switch(f){case"query":return m.values&&!m.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Sp={stack:"dbcore",level:0,name:"Observability",create:function(f){var m=f.schema.name,_=new zn(f.MIN_KEY,f.MAX_KEY);return r(r({},f),{transaction:function(k,D,I){if(Fe.subscr&&D!=="readonly")throw new ve.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Fe.querier));return f.transaction(k,D,I)},table:function(k){var D=f.table(k),I=D.schema,B=I.primaryKey,M=I.indexes,Y=B.extractKey,ne=B.outbound,R=B.autoIncrement&&M.filter(function(K){return K.compound&&K.keyPath.includes(B.keyPath)}),z=r(r({},D),{mutate:function(K){function Z(Re){return Re="idb://".concat(m,"/").concat(k,"/").concat(Re),le[Re]||(le[Re]=new zn)}var ie,Q,ue,de=K.trans,le=K.mutatedParts||(K.mutatedParts={}),me=Z(""),Pe=Z(":dels"),$e=K.type,be=K.type==="deleteRange"?[K.range]:K.type==="delete"?[K.keys]:K.values.length<50?[Cu(B,K).filter(function(Re){return Re}),K.values]:[],Ee=be[0],De=be[1],be=K.trans._cache;return u(Ee)?(me.addKeys(Ee),(be=$e==="delete"||Ee.length===De.length?_p(Ee,be):null)||Pe.addKeys(Ee),(be||De)&&(ie=Z,Q=be,ue=De,I.indexes.forEach(function(Re){var Ae=ie(Re.name||"");function Ze(ot){return ot!=null?Re.extractKey(ot):null}function at(ot){return Re.multiEntry&&u(ot)?ot.forEach(function(Pr){return Ae.addKey(Pr)}):Ae.addKey(ot)}(Q||ue).forEach(function(ot,Wt){var Je=Q&&Ze(Q[Wt]),Wt=ue&&Ze(ue[Wt]);ht(Je,Wt)!==0&&(Je!=null&&at(Je),Wt!=null&&at(Wt))})}))):Ee?(De={from:(De=Ee.lower)!==null&&De!==void 0?De:f.MIN_KEY,to:(De=Ee.upper)!==null&&De!==void 0?De:f.MAX_KEY},Pe.add(De),me.add(De)):(me.add(_),Pe.add(_),I.indexes.forEach(function(Re){return Z(Re.name).add(_)})),D.mutate(K).then(function(Re){return!Ee||K.type!=="add"&&K.type!=="put"||(me.addKeys(Re.results),R&&R.forEach(function(Ae){for(var Ze=K.values.map(function(Je){return Ae.extractKey(Je)}),at=Ae.keyPath.findIndex(function(Je){return Je===B.keyPath}),ot=0,Pr=Re.results.length;ot<Pr;++ot)Ze[ot][at]=Re.results[ot];Z(Ae.name).addKeys(Ze)})),de.mutatedParts=as(de.mutatedParts||{},le),Re})}}),M=function(Z){var ie=Z.query,Z=ie.index,ie=ie.range;return[Z,new zn((Z=ie.lower)!==null&&Z!==void 0?Z:f.MIN_KEY,(ie=ie.upper)!==null&&ie!==void 0?ie:f.MAX_KEY)]},V={get:function(K){return[B,new zn(K.key)]},getMany:function(K){return[B,new zn().addKeys(K.keys)]},count:M,query:M,openCursor:M};return s(V).forEach(function(K){z[K]=function(Z){var ie=Fe.subscr,Q=!!ie,ue=Bl(Fe,D)&&bp(K,Z)?Z.obsSet={}:ie;if(Q){var de=function(De){return De="idb://".concat(m,"/").concat(k,"/").concat(De),ue[De]||(ue[De]=new zn)},le=de(""),me=de(":dels"),ie=V[K](Z),Q=ie[0],ie=ie[1];if((K==="query"&&Q.isPrimaryKey&&!Z.values?me:de(Q.name||"")).add(ie),!Q.isPrimaryKey){if(K!=="count"){var Pe=K==="query"&&ne&&Z.values&&D.query(r(r({},Z),{values:!1}));return D[K].apply(this,arguments).then(function(De){if(K==="query"){if(ne&&Z.values)return Pe.then(function(Ze){return Ze=Ze.result,le.addKeys(Ze),De});var be=Z.values?De.result.map(Y):De.result;(Z.values?le:me).addKeys(be)}else if(K==="openCursor"){var Re=De,Ae=Z.values;return Re&&Object.create(Re,{key:{get:function(){return me.addKey(Re.primaryKey),Re.key}},primaryKey:{get:function(){var Ze=Re.primaryKey;return me.addKey(Ze),Ze}},value:{get:function(){return Ae&&le.addKey(Re.primaryKey),Re.value}}})}return De})}me.add(_)}}return D[K].apply(this,arguments)}}),z}})}};function dr(f,m,_){if(_.numFailures===0)return m;if(m.type==="deleteRange")return null;var k=m.keys?m.keys.length:"values"in m&&m.values?m.values.length:1;return _.numFailures===k?null:(m=r({},m),u(m.keys)&&(m.keys=m.keys.filter(function(D,I){return!(I in _.failures)})),"values"in m&&u(m.values)&&(m.values=m.values.filter(function(D,I){return!(I in _.failures)})),m)}function Du(f,m){return _=f,((k=m).lower===void 0||(k.lowerOpen?0<ht(_,k.lower):0<=ht(_,k.lower)))&&(f=f,(m=m).upper===void 0||(m.upperOpen?ht(f,m.upper)<0:ht(f,m.upper)<=0));var _,k}function ss(f,m,V,k,D,I){if(!V||V.length===0)return f;var B=m.query.index,Y=B.multiEntry,ne=m.query.range,R=k.schema.primaryKey.extractKey,z=B.extractKey,M=(B.lowLevelIndex||B).extractKey,V=V.reduce(function(K,Z){var ie=K,Q=[];if(Z.type==="add"||Z.type==="put")for(var ue=new zn,de=Z.values.length-1;0<=de;--de){var le,me=Z.values[de],Pe=R(me);ue.hasKey(Pe)||(le=z(me),(Y&&u(le)?le.some(function(Re){return Du(Re,ne)}):Du(le,ne))&&(ue.addKey(Pe),Q.push(me)))}switch(Z.type){case"add":var $e=new zn().addKeys(m.values?K.map(function(Ae){return R(Ae)}):K),ie=K.concat(m.values?Q.filter(function(Ae){return Ae=R(Ae),!$e.hasKey(Ae)&&($e.addKey(Ae),!0)}):Q.map(function(Ae){return R(Ae)}).filter(function(Ae){return!$e.hasKey(Ae)&&($e.addKey(Ae),!0)}));break;case"put":var Ee=new zn().addKeys(Z.values.map(function(Ae){return R(Ae)}));ie=K.filter(function(Ae){return!Ee.hasKey(m.values?R(Ae):Ae)}).concat(m.values?Q:Q.map(function(Ae){return R(Ae)}));break;case"delete":var De=new zn().addKeys(Z.keys);ie=K.filter(function(Ae){return!De.hasKey(m.values?R(Ae):Ae)});break;case"deleteRange":var be=Z.range;ie=K.filter(function(Ae){return!Du(R(Ae),be)})}return ie},f);return V===f?f:(V.sort(function(K,Z){return ht(M(K),M(Z))||ht(R(K),R(Z))}),m.limit&&m.limit<1/0&&(V.length>m.limit?V.length=m.limit:f.length===m.limit&&V.length<m.limit&&(D.dirty=!0)),I?Object.freeze(V):V)}function zf(f,m){return ht(f.lower,m.lower)===0&&ht(f.upper,m.upper)===0&&!!f.lowerOpen==!!m.lowerOpen&&!!f.upperOpen==!!m.upperOpen}function xp(f,m){return function(_,k,D,I){if(_===void 0)return k!==void 0?-1:0;if(k===void 0)return 1;if((k=ht(_,k))===0){if(D&&I)return 0;if(D)return 1;if(I)return-1}return k}(f.lower,m.lower,f.lowerOpen,m.lowerOpen)<=0&&0<=function(_,k,D,I){if(_===void 0)return k!==void 0?1:0;if(k===void 0)return-1;if((k=ht(_,k))===0){if(D&&I)return 0;if(D)return-1;if(I)return 1}return k}(f.upper,m.upper,f.upperOpen,m.upperOpen)}function iy(f,m,_,k){f.subscribers.add(_),k.addEventListener("abort",function(){var D,I;f.subscribers.delete(_),f.subscribers.size===0&&(D=f,I=m,setTimeout(function(){D.subscribers.size===0&&oe(I,D)},3e3))})}var ay={stack:"dbcore",level:0,name:"Cache",create:function(f){var m=f.schema.name;return r(r({},f),{transaction:function(_,k,D){var I,B,Y=f.transaction(_,k,D);return k==="readwrite"&&(B=(I=new AbortController).signal,D=function(ne){return function(){if(I.abort(),k==="readwrite"){for(var R=new Set,z=0,M=_;z<M.length;z++){var V=M[z],K=ca["idb://".concat(m,"/").concat(V)];if(K){var Z=f.table(V),ie=K.optimisticOps.filter(function(Ae){return Ae.trans===Y});if(Y._explicit&&ne&&Y.mutatedParts)for(var Q=0,ue=Object.values(K.queries.query);Q<ue.length;Q++)for(var de=0,le=($e=ue[Q]).slice();de<le.length;de++)Mf((Ee=le[de]).obsSet,Y.mutatedParts)&&(oe($e,Ee),Ee.subscribers.forEach(function(Ae){return R.add(Ae)}));else if(0<ie.length){K.optimisticOps=K.optimisticOps.filter(function(Ae){return Ae.trans!==Y});for(var me=0,Pe=Object.values(K.queries.query);me<Pe.length;me++)for(var $e,Ee,De,be=0,Re=($e=Pe[me]).slice();be<Re.length;be++)(Ee=Re[be]).res!=null&&Y.mutatedParts&&(ne&&!Ee.dirty?(De=Object.isFrozen(Ee.res),De=ss(Ee.res,Ee.req,ie,Z,Ee,De),Ee.dirty?(oe($e,Ee),Ee.subscribers.forEach(function(Ae){return R.add(Ae)})):De!==Ee.res&&(Ee.res=De,Ee.promise=Te.resolve({result:De}))):(Ee.dirty&&oe($e,Ee),Ee.subscribers.forEach(function(Ae){return R.add(Ae)})))}}}R.forEach(function(Ae){return Ae()})}}},Y.addEventListener("abort",D(!1),{signal:B}),Y.addEventListener("error",D(!1),{signal:B}),Y.addEventListener("complete",D(!0),{signal:B})),Y},table:function(_){var k=f.table(_),D=k.schema.primaryKey;return r(r({},k),{mutate:function(I){var B=Fe.trans;if(D.outbound||B.db._options.cache==="disabled"||B.explicit||B.idbtrans.mode!=="readwrite")return k.mutate(I);var Y=ca["idb://".concat(m,"/").concat(_)];return Y?(B=k.mutate(I),I.type!=="add"&&I.type!=="put"||!(50<=I.values.length||Cu(D,I).some(function(ne){return ne==null}))?(Y.optimisticOps.push(I),I.mutatedParts&&zl(I.mutatedParts),B.then(function(ne){0<ne.numFailures&&(oe(Y.optimisticOps,I),(ne=dr(0,I,ne))&&Y.optimisticOps.push(ne),I.mutatedParts&&zl(I.mutatedParts))}),B.catch(function(){oe(Y.optimisticOps,I),I.mutatedParts&&zl(I.mutatedParts)})):B.then(function(ne){var R=dr(0,r(r({},I),{values:I.values.map(function(z,M){var V;return ne.failures[M]?z:(z=(V=D.keyPath)!==null&&V!==void 0&&V.includes(".")?xe(z):r({},z),W(z,D.keyPath,ne.results[M]),z)})}),ne);Y.optimisticOps.push(R),queueMicrotask(function(){return I.mutatedParts&&zl(I.mutatedParts)})}),B):k.mutate(I)},query:function(I){if(!Bl(Fe,k)||!bp("query",I))return k.query(I);var B=((R=Fe.trans)===null||R===void 0?void 0:R.db._options.cache)==="immutable",M=Fe,Y=M.requery,ne=M.signal,R=function(Z,ie,Q,ue){var de=ca["idb://".concat(Z,"/").concat(ie)];if(!de)return[];if(!(ie=de.queries[Q]))return[null,!1,de,null];var le=ie[(ue.query?ue.query.index.name:null)||""];if(!le)return[null,!1,de,null];switch(Q){case"query":var me=le.find(function(Pe){return Pe.req.limit===ue.limit&&Pe.req.values===ue.values&&zf(Pe.req.query.range,ue.query.range)});return me?[me,!0,de,le]:[le.find(function(Pe){return("limit"in Pe.req?Pe.req.limit:1/0)>=ue.limit&&(!ue.values||Pe.req.values)&&xp(Pe.req.query.range,ue.query.range)}),!1,de,le];case"count":return me=le.find(function(Pe){return zf(Pe.req.query.range,ue.query.range)}),[me,!!me,de,le]}}(m,_,"query",I),z=R[0],M=R[1],V=R[2],K=R[3];return z&&M?z.obsSet=I.obsSet:(M=k.query(I).then(function(Z){var ie=Z.result;if(z&&(z.res=ie),B){for(var Q=0,ue=ie.length;Q<ue;++Q)Object.freeze(ie[Q]);Object.freeze(ie)}else Z.result=xe(ie);return Z}).catch(function(Z){return K&&z&&oe(K,z),Promise.reject(Z)}),z={obsSet:I.obsSet,promise:M,subscribers:new Set,type:"query",req:I,dirty:!1},K?K.push(z):(K=[z],(V=V||(ca["idb://".concat(m,"/").concat(_)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[I.query.index.name||""]=K)),iy(z,K,Y,ne),z.promise.then(function(Z){return{result:ss(Z.result,I,V==null?void 0:V.optimisticOps,k,z,B)}})}})}})}};function Wl(f,m){return new Proxy(f,{get:function(_,k,D){return k==="db"?m:Reflect.get(_,k,D)}})}var fa=(Jt.prototype.version=function(f){if(isNaN(f)||f<.1)throw new ve.Type("Given version is not a positive number");if(f=Math.round(10*f)/10,this.idbdb||this._state.isBeingOpened)throw new ve.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,f);var m=this._versions,_=m.filter(function(k){return k._cfg.version===f})[0];return _||(_=new this.Version(f),m.push(_),m.sort(ry),_.stores({}),this._state.autoSchema=!1,_)},Jt.prototype._whenReady=function(f){var m=this;return this.idbdb&&(this._state.openComplete||Fe.letThrough||this._vip)?f():new Te(function(_,k){if(m._state.openComplete)return k(new ve.DatabaseClosed(m._state.dbOpenError));if(!m._state.isBeingOpened){if(!m._state.autoOpen)return void k(new ve.DatabaseClosed);m.open().catch(He)}m._state.dbReadyPromise.then(_,k)}).then(f)},Jt.prototype.use=function(f){var m=f.stack,_=f.create,k=f.level,D=f.name;return D&&this.unuse({stack:m,name:D}),f=this._middlewares[m]||(this._middlewares[m]=[]),f.push({stack:m,create:_,level:k??10,name:D}),f.sort(function(I,B){return I.level-B.level}),this},Jt.prototype.unuse=function(f){var m=f.stack,_=f.name,k=f.create;return m&&this._middlewares[m]&&(this._middlewares[m]=this._middlewares[m].filter(function(D){return k?D.create!==k:!!_&&D.name!==_})),this},Jt.prototype.open=function(){var f=this;return ho(Wr,function(){return os(f)})},Jt.prototype._close=function(){var f=this._state,m=es.indexOf(this);if(0<=m&&es.splice(m,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}f.isBeingOpened||(f.dbReadyPromise=new Te(function(_){f.dbReadyResolve=_}),f.openCanceller=new Te(function(_,k){f.cancelOpen=k}))},Jt.prototype.close=function(_){var m=(_===void 0?{disableAutoOpen:!0}:_).disableAutoOpen,_=this._state;m?(_.isBeingOpened&&_.cancelOpen(new ve.DatabaseClosed),this._close(),_.autoOpen=!1,_.dbOpenError=new ve.DatabaseClosed):(this._close(),_.autoOpen=this._options.autoOpen||_.isBeingOpened,_.openComplete=!1,_.dbOpenError=null)},Jt.prototype.delete=function(f){var m=this;f===void 0&&(f={disableAutoOpen:!0});var _=0<arguments.length&&typeof arguments[0]!="object",k=this._state;return new Te(function(D,I){function B(){m.close(f);var Y=m._deps.indexedDB.deleteDatabase(m.name);Y.onsuccess=dt(function(){var ne,R,z;ne=m._deps,R=m.name,z=ne.indexedDB,ne=ne.IDBKeyRange,Zn(z)||R===Pl||Ll(z,ne).delete(R).catch(He),D()}),Y.onerror=li(I),Y.onblocked=m._fireOnBlocked}if(_)throw new ve.InvalidArgument("Invalid closeOptions argument to db.delete()");k.isBeingOpened?k.dbReadyPromise.then(B):B()})},Jt.prototype.backendDB=function(){return this.idbdb},Jt.prototype.isOpen=function(){return this.idbdb!==null},Jt.prototype.hasBeenClosed=function(){var f=this._state.dbOpenError;return f&&f.name==="DatabaseClosed"},Jt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Jt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Jt.prototype,"tables",{get:function(){var f=this;return s(this._allTables).map(function(m){return f._allTables[m]})},enumerable:!1,configurable:!0}),Jt.prototype.transaction=function(){var f=(function(m,_,k){var D=arguments.length;if(D<2)throw new ve.InvalidArgument("Too few arguments");for(var I=new Array(D-1);--D;)I[D-1]=arguments[D];return k=I.pop(),[m,he(I),k]}).apply(this,arguments);return this._transaction.apply(this,f)},Jt.prototype._transaction=function(f,m,_){var k=this,D=Fe.trans;D&&D.db===this&&f.indexOf("!")===-1||(D=null);var I,B,Y=f.indexOf("?")!==-1;f=f.replace("!","").replace("?","");try{if(B=m.map(function(R){if(R=R instanceof k.Table?R.name:R,typeof R!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return R}),f=="r"||f===bf)I=bf;else{if(f!="rw"&&f!=kl)throw new ve.InvalidArgument("Invalid transaction mode: "+f);I=kl}if(D){if(D.mode===bf&&I===kl){if(!Y)throw new ve.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");D=null}D&&B.forEach(function(R){if(D&&D.storeNames.indexOf(R)===-1){if(!Y)throw new ve.SubTransaction("Table "+R+" not included in parent transaction.");D=null}}),Y&&D&&!D.active&&(D=null)}}catch(R){return D?D._promise(null,function(z,M){M(R)}):Gt(R)}var ne=(function R(z,M,V,K,Z){return Te.resolve().then(function(){var ie=Fe.transless||Fe,Q=z._createTransaction(M,V,z._dbSchema,K);if(Q.explicit=!0,ie={trans:Q,transless:ie},K)Q.idbtrans=K.idbtrans;else try{Q.create(),Q.idbtrans._explicit=!0,z._state.PR1398_maxLoop=3}catch(le){return le.name===ge.InvalidState&&z.isOpen()&&0<--z._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),z.close({disableAutoOpen:!1}),z.open().then(function(){return R(z,M,V,null,Z)})):Gt(le)}var ue,de=F(Z);return de&&Zo(),ie=Te.follow(function(){var le;(ue=Z.call(Q,Q))&&(de?(le=Ma.bind(null,null),ue.then(le,le)):typeof ue.next=="function"&&typeof ue.throw=="function"&&(ue=jf(ue)))},ie),(ue&&typeof ue.then=="function"?Te.resolve(ue).then(function(le){return Q.active?le:Gt(new ve.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ie.then(function(){return ue})).then(function(le){return K&&Q._resolve(),Q._completion.then(function(){return le})}).catch(function(le){return Q._reject(le),Gt(le)})})}).bind(null,this,I,B,D,_);return D?D._promise(I,ne,"lock"):Fe.trans?ho(Fe.transless,function(){return k._whenReady(ne)}):this._whenReady(ne)},Jt.prototype.table=function(f){if(!v(this._allTables,f))throw new ve.InvalidTable("Table ".concat(f," does not exist"));return this._allTables[f]},Jt);function Jt(f,m){var _=this;this._middlewares={},this.verno=0;var k=Jt.dependencies;this._options=m=r({addons:Jt.addons,autoOpen:!0,indexedDB:k.indexedDB,IDBKeyRange:k.IDBKeyRange,cache:"cloned"},m),this._deps={indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange},k=m.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var D,I,B,Y,ne,R={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:He,dbReadyPromise:null,cancelOpen:He,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:m.autoOpen};R.dbReadyPromise=new Te(function(M){R.dbReadyResolve=M}),R.openCanceller=new Te(function(M,V){R.cancelOpen=V}),this._state=R,this.name=f,this.on=po(this,"populate","blocked","versionchange","close",{ready:[sn,He]}),this.on.ready.subscribe=P(this.on.ready.subscribe,function(M){return function(V,K){Jt.vip(function(){var Z,ie=_._state;ie.openComplete?(ie.dbOpenError||Te.resolve().then(V),K&&M(V)):ie.onReadyBeingFired?(ie.onReadyBeingFired.push(V),K&&M(V)):(M(V),Z=_,K||M(function Q(){Z.on.ready.unsubscribe(V),Z.on.ready.unsubscribe(Q)}))})}}),this.Collection=(D=this,hu(kf.prototype,function(ue,Q){this.db=D;var K=Sf,Z=null;if(Q)try{K=Q()}catch(de){Z=de}var ie=ue._ctx,Q=ie.table,ue=Q.hook.reading.fire;this._ctx={table:Q,index:ie.index,isPrimKey:!ie.index||Q.schema.primKey.keyPath&&ie.index===Q.schema.primKey.name,range:K,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Z,or:ie.or,valueMapper:ue!==an?ue:null}})),this.Table=(I=this,hu(Ef.prototype,function(M,V,K){this.db=I,this._tx=K,this.name=M,this.schema=V,this.hook=I._allTables[M]?I._allTables[M].hook:po(null,{creating:[dn,He],reading:[Et,an],updating:[sr,He],deleting:[on,He]})})),this.Transaction=(B=this,hu(Df.prototype,function(M,V,K,Z,ie){var Q=this;this.db=B,this.mode=M,this.storeNames=V,this.schema=K,this.chromeTransactionDurability=Z,this.idbtrans=null,this.on=po(this,"complete","error","abort"),this.parent=ie||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Te(function(ue,de){Q._resolve=ue,Q._reject=de}),this._completion.then(function(){Q.active=!1,Q.on.complete.fire()},function(ue){var de=Q.active;return Q.active=!1,Q.on.error.fire(ue),Q.parent?Q.parent._reject(ue):de&&Q.idbtrans&&Q.idbtrans.abort(),Gt(ue)})})),this.Version=(Y=this,hu(gp.prototype,function(M){this.db=Y,this._cfg={version:M,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(ne=this,hu(mp.prototype,function(M,V,K){if(this.db=ne,this._ctx={table:M,index:V===":id"?null:V,or:K},this._cmp=this._ascending=ht,this._descending=function(Z,ie){return ht(ie,Z)},this._max=function(Z,ie){return 0<ht(Z,ie)?Z:ie},this._min=function(Z,ie){return ht(Z,ie)<0?Z:ie},this._IDBKeyRange=ne._deps.IDBKeyRange,!this._IDBKeyRange)throw new ve.MissingAPI})),this.on("versionchange",function(M){0<M.newVersion?console.warn("Another connection wants to upgrade database '".concat(_.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(_.name,"'. Closing db now to resume the delete request.")),_.close({disableAutoOpen:!1})}),this.on("blocked",function(M){!M.newVersion||M.newVersion<M.oldVersion?console.warn("Dexie.delete('".concat(_.name,"') was blocked")):console.warn("Upgrade '".concat(_.name,"' blocked by other connection holding version ").concat(M.oldVersion/10))}),this._maxKey=yu(m.IDBKeyRange),this._createTransaction=function(M,V,K,Z){return new _.Transaction(M,V,K,_._options.chromeTransactionDurability,Z)},this._fireOnBlocked=function(M){_.on("blocked").fire(M),es.filter(function(V){return V.name===_.name&&V!==_&&!V._state.vcFired}).map(function(V){return V.on("versionchange").fire(M)})},this.use(Lf),this.use(ay),this.use(Sp),this.use(yp),this.use(wp);var z=new Proxy(this,{get:function(M,V,K){if(V==="_vip")return!0;if(V==="table")return function(ie){return Wl(_.table(ie),z)};var Z=Reflect.get(M,V,K);return Z instanceof Ef?Wl(Z,z):V==="tables"?Z.map(function(ie){return Wl(ie,z)}):V==="_createTransaction"?function(){return Wl(Z.apply(this,arguments),z)}:Z}});this.vip=z,k.forEach(function(M){return M(_)})}var da,Kr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",oy=(Ou.prototype.subscribe=function(f,m,_){return this._subscribe(f&&typeof f!="function"?f:{next:f,error:m,complete:_})},Ou.prototype[Kr]=function(){return this},Ou);function Ou(f){this._subscribe=f}try{da={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{da={indexedDB:null,IDBKeyRange:null}}function Ff(f){var m,_=!1,k=new oy(function(D){var I=F(f),B,Y=!1,ne={},R={},z={get closed(){return Y},unsubscribe:function(){Y||(Y=!0,B&&B.abort(),M&&ja.storagemutated.unsubscribe(K))}};D.start&&D.start(z);var M=!1,V=function(){return _f(Z)},K=function(ie){as(ne,ie),Mf(R,ne)&&V()},Z=function(){var ie,Q,ue;!Y&&da.indexedDB&&(ne={},ie={},B&&B.abort(),B=new AbortController,ue=function(de){var le=Qt();try{I&&Zo();var me=Ur(f,de);return me=I?me.finally(Ma):me}finally{le&&$n()}}(Q={subscr:ie,signal:B.signal,requery:V,querier:f,trans:null}),Promise.resolve(ue).then(function(de){_=!0,m=de,Y||Q.signal.aborted||(ne={},function(le){for(var me in le)if(v(le,me))return;return 1}(R=ie)||M||(ja(gu,K),M=!0),_f(function(){return!Y&&D.next&&D.next(de)}))},function(de){_=!1,["DatabaseClosedError","AbortError"].includes(de==null?void 0:de.name)||Y||_f(function(){Y||D.error&&D.error(de)})}))};return setTimeout(V,0),z});return k.hasValue=function(){return _},k.getValue=function(){return m},k}var hr=fa;function us(f){var m=La;try{La=!0,ja.storagemutated.fire(f),Fl(f,!0)}finally{La=m}}y(hr,r(r({},Ge),{delete:function(f){return new hr(f,{addons:[]}).delete()},exists:function(f){return new hr(f,{addons:[]}).open().then(function(m){return m.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(f){try{return m=hr.dependencies,_=m.indexedDB,m=m.IDBKeyRange,(Zn(_)?Promise.resolve(_.databases()).then(function(k){return k.map(function(D){return D.name}).filter(function(D){return D!==Pl})}):Ll(_,m).toCollection().primaryKeys()).then(f)}catch{return Gt(new ve.MissingAPI)}var m,_},defineClass:function(){return function(f){c(this,f)}},ignoreTransaction:function(f){return Fe.trans?ho(Fe.transless,f):f()},vip:Tf,async:function(f){return function(){try{var m=jf(f.apply(this,arguments));return m&&typeof m.then=="function"?m:Te.resolve(m)}catch(_){return Gt(_)}}},spawn:function(f,m,_){try{var k=jf(f.apply(_,m||[]));return k&&typeof k.then=="function"?k:Te.resolve(k)}catch(D){return Gt(D)}},currentTransaction:{get:function(){return Fe.trans||null}},waitFor:function(f,m){return m=Te.resolve(typeof f=="function"?hr.ignoreTransaction(f):f).timeout(m||6e4),Fe.trans?Fe.trans.waitFor(m):m},Promise:Te,debug:{get:function(){return _t},set:function(f){Vn(f)}},derive:x,extend:c,props:y,override:P,Events:po,on:ja,liveQuery:Ff,extendObservabilitySet:as,getByKeyPath:U,setByKeyPath:W,delByKeyPath:function(f,m){typeof m=="string"?W(f,m,void 0):"length"in m&&[].map.call(m,function(_){W(f,_,void 0)})},shallowClone:re,deepClone:xe,getObjectDiff:ku,cmp:ht,asap:T,minKey:-1/0,addons:[],connections:es,errnames:ge,dependencies:da,cache:ca,semVer:"4.0.10",version:"4.0.10".split(".").map(function(f){return parseInt(f)}).reduce(function(f,m,_){return f+m/Math.pow(10,2*_)})})),hr.maxKey=yu(hr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ja(gu,function(f){La||(f=new CustomEvent(Cf,{detail:f}),La=!0,dispatchEvent(f),La=!1)}),addEventListener(Cf,function(f){f=f.detail,La||us(f)}));var ls,La=!1,Ep=function(){};return typeof BroadcastChannel<"u"&&((Ep=function(){(ls=new BroadcastChannel(Cf)).onmessage=function(f){return f.data&&us(f.data)}})(),typeof ls.unref=="function"&&ls.unref(),ja(gu,function(f){La||ls.postMessage(f)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(f){if(!fa.disableBfCache&&f.persisted){_t&&console.debug("Dexie: handling persisted pagehide"),ls!=null&&ls.close();for(var m=0,_=es;m<_.length;m++)_[m].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(f){!fa.disableBfCache&&f.persisted&&(_t&&console.debug("Dexie: handling persisted pageshow"),Ep(),us({all:new zn(-1/0,[[]])}))})),Te.rejectionMapper=function(f,m){return!f||f instanceof X||f instanceof TypeError||f instanceof SyntaxError||!f.name||!Ne[f.name]?f:(m=new Ne[f.name](m||f.message,f),"stack"in f&&w(m,"stack",{get:function(){return this.inner.stack}}),m)},Vn(_t),r(fa,Object.freeze({__proto__:null,Dexie:fa,liveQuery:Ff,Entity:fp,cmp:ht,PropModSymbol:oa,PropModification:ns,replacePrefix:function(f,m){return new ns({replacePrefix:[f,m]})},add:function(f){return new ns({add:f})},remove:function(f){return new ns({remove:f})},default:fa,RangeSet:zn,mergeRanges:Hr,rangesOverlap:xu}),{default:fa}),fa})})(aN);var nK=aN.exports;const E_=Nh(nK),sk=Symbol.for("Dexie"),P_=globalThis[sk]||(globalThis[sk]=E_);if(E_.semVer!==P_.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${E_.semVer} and ${P_.semVer}`);var Kv="docs",rK="changes",uk="attachments",oN="dexie",lk=new Map,tv=new Map;function iK(e,t,n,r){var i="rxdb-dexie-"+e+"--"+r.version+"--"+t,a=Ar(lk,i,()=>{var s=(async()=>{var u=It(n);u.autoOpen=!1;var c=new P_(i,u);n.onCreate&&await n.onCreate(c,i);var d={[Kv]:sK(r),[rK]:"++sequence, id",[uk]:"id"};return c.version(1).stores(d),await c.open(),{dexieDb:c,dexieTable:c[Kv],dexieAttachmentsTable:c[uk],booleanIndexes:uK(r)}})();return lk.set(i,a),tv.set(a,0),s});return a}async function aK(e){var t=await e,n=tv.get(e),r=n-1;r===0?(t.dexieDb.close(),tv.delete(e)):tv.set(e,r)}var k_="__";function pf(e){var t=e.split(".");if(t.length>1)return t.map(r=>pf(r)).join(".");if(e.startsWith("|")){var n=e.substring(1);return k_+n}else return e}function sN(e){var t=e.split(".");if(t.length>1)return t.map(r=>sN(r)).join(".");if(e.startsWith(k_)){var n=e.substring(k_.length);return"|"+n}else return e}function oK(e,t){if(!t)return t;var n=It(t);return n=C_(n),e.forEach(r=>{var i=Gs(t,r),a=i?"1":"0",s=pf(r);r$(n,s,a)}),n}function uN(e,t){return t&&(t=It(t),t=D_(t),e.forEach(n=>{var r=Gs(t,n),i=r==="1";r$(t,n,i)}),t)}function C_(e){if(!e||typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(Array.isArray(e))return e.map(n=>C_(n));if(typeof e=="object"){var t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="object"&&(r=C_(r)),t[pf(n)]=r}),t}}function D_(e){if(!e||typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(Array.isArray(e))return e.map(n=>D_(n));if(typeof e=="object"){var t={};return Object.entries(e).forEach(([n,r])=>{(typeof r=="object"||Array.isArray(e))&&(r=D_(r)),t[sN(n)]=r}),t}}function sK(e){var t=[],n=ai(e.primaryKey);t.push([n]),t.push(["_deleted",n]),e.indexes&&e.indexes.forEach(a=>{var s=ch(a);t.push(s)}),t.push(["_meta.lwt",n]),t.push(["_meta.lwt"]),t=t.map(a=>a.map(s=>pf(s)));var r=t.map(a=>a.length===1?a[0]:"["+a.join("+")+"]");r=r.filter((a,s,u)=>u.indexOf(a)===s);var i=r.join(", ");return i}async function ck(e,t){var n=await e,r=await n.dexieTable.bulkGet(t);return r.map(i=>uN(n.booleanIndexes,i))}function _m(e,t){return e+"||"+t}function uK(e){var t=new Set,n=[];return e.indexes?(e.indexes.forEach(r=>{var i=ch(r);i.forEach(a=>{if(!t.has(a)){t.add(a);var s=Qc(e,a);s.type==="boolean"&&n.push(a)}})}),n.push("_deleted"),m3(n)):n}function fk(e){return e===$c?-1/0:e}function dk(e,t,n){if(e.includes(t)){var r=n===Oc||n===!0?"1":"0";return r}else return n}function lN(e,t,n){if(!n){if(typeof window>"u")throw new Error("IDBKeyRange missing");n=window.IDBKeyRange}var r=t.startKeys.map((s,u)=>{var c=t.index[u];return dk(e,c,s)}).map(fk),i=t.endKeys.map((s,u)=>{var c=t.index[u];return dk(e,c,s)}).map(fk),a=n.bound(r,i,!t.inclusiveStart,!t.inclusiveEnd);return a}async function hk(e,t){var n=await e.internals,r=t.query,i=r.skip?r.skip:0,a=r.limit?r.limit:1/0,s=i+a,u=t.queryPlan,c=!1;u.selectorSatisfiedByIndex||(c=a1(e.schema,t.query));var d=lN(n.booleanIndexes,u,n.dexieDb._options.IDBKeyRange),h=u.index,v=[];if(await n.dexieDb.transaction("r",n.dexieTable,async g=>{var w=g.idbtrans,x=w.objectStore(Kv),C,S;S="["+h.map(P=>pf(P)).join("+")+"]",C=x.index(S);var E=C.openCursor(d);await new Promise(P=>{E.onsuccess=function(N){var T=N.target.result;if(T){var U=uN(n.booleanIndexes,T.value);(!c||c(U))&&v.push(U),u.sortSatisfiedByIndex&&v.length===s?P():T.continue()}else P()}})}),!u.sortSatisfiedByIndex){var y=mR(e.schema,t.query);v=v.sort(y)}return v=v.slice(i,s),{documents:v}}async function lK(e,t){var n=await e.internals,r=t.queryPlan,i=r.index,a=lN(n.booleanIndexes,r,n.dexieDb._options.IDBKeyRange),s=-1;return await n.dexieDb.transaction("r",n.dexieTable,async u=>{var c=u.idbtrans,d=c.objectStore(Kv),h,v;v="["+i.map(g=>pf(g)).join("+")+"]",h=d.index(v);var y=h.count(a);s=await new Promise((g,w)=>{y.onsuccess=function(){g(y.result)},y.onerror=x=>w(x)})}),s}var cK=ki(),W0=!1,fK=function(){function e(n,r,i,a,s,u,c,d){this.changes$=new br,this.instanceId=cK++,this.storage=n,this.databaseName=r,this.collectionName=i,this.schema=a,this.internals=s,this.options=u,this.settings=c,this.devMode=d,this.primaryPath=ai(this.schema.primaryKey)}var t=e.prototype;return t.bulkWrite=async function(r,i){Fu(this),!W0&&!await a$()&&console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium/?console=dexie ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join(`
`)),W0=!0,r.forEach(h=>{if(!h.document._rev||h.previous&&!h.previous._rev)throw ze("SNH",{args:{row:h}})});var a=await this.internals,s={error:[]};this.devMode&&(r=r.map(h=>{var v=Yh(h.document);return{previous:h.previous,document:v}}));var u=r.map(h=>h.document[this.primaryPath]),c;if(await a.dexieDb.transaction("rw",a.dexieTable,a.dexieAttachmentsTable,async()=>{var h=new Map,v=await ck(this.internals,u);v.forEach(w=>{var x=w;return x&&h.set(x[this.primaryPath],x),x}),c=QW(this,this.primaryPath,h,r,i),s.error=c.errors;var y=[];c.bulkInsertDocs.forEach(w=>{y.push(w.document)}),c.bulkUpdateDocs.forEach(w=>{y.push(w.document)}),y=y.map(w=>oK(a.booleanIndexes,w)),y.length>0&&await a.dexieTable.bulkPut(y);var g=[];c.attachmentsAdd.forEach(w=>{g.push({id:_m(w.documentId,w.attachmentId),data:w.attachmentData.data})}),c.attachmentsUpdate.forEach(w=>{g.push({id:_m(w.documentId,w.attachmentId),data:w.attachmentData.data})}),await a.dexieAttachmentsTable.bulkPut(g),await a.dexieAttachmentsTable.bulkDelete(c.attachmentsRemove.map(w=>_m(w.documentId,w.attachmentId)))}),c=Ye(c),c.eventBulk.events.length>0){var d=Ye(c.newestRow).document;c.eventBulk.checkpoint={id:d[this.primaryPath],lwt:d._meta.lwt},this.changes$.next(c.eventBulk)}return s},t.findDocumentsById=async function(r,i){Fu(this);var a=await this.internals,s=[];return await a.dexieDb.transaction("r",a.dexieTable,async()=>{var u=await ck(this.internals,r);u.forEach(c=>{c&&(!c._deleted||i)&&s.push(c)})}),s},t.query=function(r){return Fu(this),hk(this,r)},t.count=async function(r){if(r.queryPlan.selectorSatisfiedByIndex){var i=await lK(this,r);return{count:i,mode:"fast"}}else{var a=await hk(this,r);return{count:a.documents.length,mode:"slow"}}},t.changeStream=function(){return Fu(this),this.changes$.asObservable()},t.cleanup=async function(r){Fu(this);var i=await this.internals;return await i.dexieDb.transaction("rw",i.dexieTable,async()=>{var a=ki()-r,s=await i.dexieTable.where("_meta.lwt").below(a).toArray(),u=[];s.forEach(c=>{c._deleted==="1"&&u.push(c[this.primaryPath])}),await i.dexieTable.bulkDelete(u)}),!0},t.getAttachmentData=async function(r,i,a){Fu(this);var s=await this.internals,u=_m(r,i);return await s.dexieDb.transaction("r",s.dexieAttachmentsTable,async()=>{var c=await s.dexieAttachmentsTable.get(u);if(c)return c.data;throw new Error("attachment missing documentId: "+r+" attachmentId: "+i)})},t.remove=async function(){Fu(this);var r=await this.internals;return await r.dexieTable.clear(),this.close()},t.close=function(){return this.closed?this.closed:(this.closed=(async()=>{this.changes$.complete(),await aK(this.internals)})(),this.closed)},e}();async function dK(e,t,n){var r=iK(t.databaseName,t.collectionName,n,t.schema),i=new fK(e,t.databaseName,t.collectionName,t.schema,r,t.options,n,t.devMode);return await ZH(oN,t,i),Promise.resolve(i)}function Fu(e){if(e.closed)throw new Error("RxStorageInstanceDexie is closed "+e.databaseName+"-"+e.collectionName)}var hK=function(){function e(n){this.name=oN,this.rxdbVersion=i$,this.settings=n}var t=e.prototype;return t.createStorageInstance=function(r){if(ZW(r),r.schema.indexes){var i=r.schema.indexes.flat();i.filter(a=>!a.includes(".")).forEach(a=>{if(!r.schema.required||!r.schema.required.includes(a))throw ze("DXE1",{field:a,schema:r.schema})})}return dK(this,r,this.settings)},e}();function pK(e={}){var t=new hK(e);return t}const Mg=e=>zr((t,n,r)=>{let i=0;if(mt(n))for(const a of n)i=i|1<<a;else i=n;return e(t&i,i)}),mK=Mg((e,t)=>e==0),vK=Mg((e,t)=>e==t),gK=Mg((e,t)=>e<t),yK=Mg((e,t)=>e>0),wK=Object.freeze(Object.defineProperty({__proto__:null,$all:qW,$and:J$,$bitsAllClear:mK,$bitsAllSet:vK,$bitsAnyClear:gK,$bitsAnySet:yK,$elemMatch:fR,$eq:tR,$exists:hR,$expr:UW,$gt:nR,$gte:rR,$in:iR,$jsonSchema:HW,$lt:aR,$lte:oR,$mod:lR,$ne:sR,$nin:uR,$nor:Z$,$not:eR,$or:i1,$regex:cR,$size:dR,$type:pR,$where:KW},Symbol.toStringTag,{value:"Module"})),Fr={cloneMode:"copy",queryOptions:z$({context:_h.init().addQueryOps(wK).addExpressionOps(NW).addExpressionOps(FW)})},w1=(e,t)=>{switch(e){case"deep":return tf(t);case"copy":return Zc(t)?new Date(t):mt(t)?[...t]:bn(t)?{...t}:jo(t)?new RegExp(t):t;default:return t}},_K=/^[a-z]+[a-zA-Z0-9]*$/;function cN(e){if(!e.includes(".$"))return[{parent:e,selector:e},[]];const t=e.indexOf(".$"),n=e.indexOf("]"),r=e.substring(0,t),i=e.substring(t+3,n);Mt(i===""||_K.test(i),"The filter <identifier> must begin with a lowercase letter and contain only alphanumeric characters.");const a=e.substring(n+2),[s,u]=a?cN(a):[];return[{selector:e,parent:r,child:i||"$",next:s},[i,...u||[]].filter(Boolean)]}const oi=(e,t,n,r,i)=>{const{parent:a,child:s,next:u}=t;if(!s){let d=!1;return yh(e,a,(v,y)=>d=!!r(v,y)||d,i),d}const c=io(e,a);return mt(c)?c.map((d,h)=>n[s]&&!n[s].test({[s]:d})?!1:u?oi(d,u,n,r,i):r(c,h)).some(Boolean):!1};function Di(e,t,n,r){const i=[];for(const[a,s]of Object.entries(e)){const[u,c]=cN(a);if(!c.length)r(s,u,{})&&i.push(u.parent);else{const d={};t.forEach(v=>{Object.keys(v).forEach(y=>{c.forEach(g=>{(y===g||y.startsWith(g+"."))&&(d[g]=d[g]||{},Object.assign(d[g],{[y]:v[y]}))})})});const h={};for(const[v,y]of Object.entries(d))h[v]=new uu(y,n.queryOptions);r(s,u,h)&&i.push(u.parent)}}return i}const bK=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>{const u={$each:[i]};return bn(i)&&Na(i,"$each")&&Object.assign(u,i),oi(e,a,s,(c,d)=>{const h=c[d]||(c[d]=[]);return I$([h,u.$each]).length===u.$each.length?!1:(c[d]=w1(r.cloneMode,tW(h.concat(u.$each))),!0)},{buildGraph:!0})}),SK=new Set(["and","or","xor"]),xK=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>{const u=Object.keys(i);return Mt(u.length===1&&SK.has(u[0]),`Invalid bit operator '${u[0]}'. Must be one of 'and', 'or', or 'xor'.`),oi(e,a,s,(c,d)=>{let h=c[d];const v=i[u[0]];if(h!==void 0&&!(Wn(h)&&Wn(v)))return!1;switch(h=h||0,u[0]){case"and":c[d]=h&v;break;case"or":c[d]=h|v;break;case"xor":c[d]=h^v;break}return c[d]!==h},{buildGraph:!0})}),EK=(e,t,n=[],r=Fr)=>{const i=Date.now();return Di(t,n,r,(a,s,u)=>oi(e,s,u,(c,d)=>(c[d]=i,!0),{buildGraph:!0}))},PK=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>{if(!a.child){const u=io(e,a.parent);Mt(u===void 0||Wn(u),"cannot apply $inc to a value of non-numeric type")}return oi(e,a,s,(u,c)=>(u[c]=(u[c]||(u[c]=0))+i,!0),{buildGraph:!0})}),kK=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>oi(e,a,s,(u,c)=>u[c]!==void 0&&ta(u[c],i)>-1?!1:(u[c]=i,!0),{buildGraph:!0})),CK=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>oi(e,a,s,(u,c)=>u[c]!==void 0&&ta(u[c],i)<1?!1:(u[c]=i,!0),{buildGraph:!0})),DK=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>oi(e,a,s,(u,c)=>{const d=u[c];return u[c]=u[c]===void 0?0:u[c]*i,u[c]!==d},{buildGraph:!0})),OK=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>oi(e,a,s,(u,c)=>{const d=u[c];return Mt(mt(d),`path '${a.selector}' contains an element of non-array type.`),d.length?(i===-1?d.splice(0,1):d.pop(),!0):!1})),fN=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>{const u=!bn(i)||Object.keys(i).some(su),c=new uu(u?{k:i}:i,r.queryOptions),d=u?h=>c.test({k:h}):h=>c.test(h);return oi(e,a,s,(h,v)=>{const y=h[v],g=new Array;return y.map(x=>{const C=d(x);return C||g.push(x),C}).some(Boolean)?(h[v]=g,!0):!1})}),$K=(e,t,n=[],r=Fr)=>{const i={};return Object.entries(t).forEach(([a,s])=>{i[a]={$in:s}}),fN(e,i,n,r)},RK=Object.freeze(["$each","$slice","$sort","$position"]),NK=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>{const u={$each:[i]};return bn(i)&&RK.some(c=>Na(i,c))&&Object.assign(u,i),oi(e,a,s,(c,d)=>{const h=c[d]||(c[d]=[]),v=h.slice(0,u.$slice||h.length),y=h.length,g=Wn(u.$position)?u.$position:h.length;if(h.splice(g,0,...w1(r.cloneMode,u.$each)),u.$sort){const w=bn(u.$sort)?Object.keys(u.$sort||{}).pop():"",x=w?u.$sort[w]:u.$sort,C=w?S=>io(S,w):S=>S;h.sort((S,E)=>x*ta(C(S),C(E)))}return Wn(u.$slice)&&(u.$slice<0?h.splice(0,h.length+u.$slice):h.splice(u.$slice)),y!=h.length||!Ca(v,h)},{descendArray:!0,buildGraph:!0})}),dN=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>oi(e,a,s,(u,c)=>Ca(u[c],i)?!1:(u[c]=w1(r.cloneMode,i),!0),{buildGraph:!0})),TK=(e,t,n=[],r=Fr)=>{const i=[],a=Di(t,n,r,(s,u,c)=>oi(e,u,c,(d,h)=>Na(d,h)?(i.push(...dN(e,{[s]:d[h]},n,r)),delete d[h],!0):!1));return Array.from(new Set(a.concat(i)))},MK=(e,t,n=[],r=Fr)=>Di(t,n,r,(i,a,s)=>oi(e,a,s,(u,c)=>Na(u,c)?(mt(u)?u[c]=null:delete u[c],!0):!1)),pk=Object.freeze(Object.defineProperty({__proto__:null,$addToSet:bK,$bit:xK,$currentDate:EK,$inc:PK,$max:kK,$min:CK,$mul:DK,$pop:OK,$pull:fN,$pullAll:$K,$push:NK,$rename:TK,$set:dN,$unset:MK},Symbol.toStringTag,{value:"Module"}));function hN(e){return e=e??Fr,(t,n,r=[],i={},a=e)=>{const s=Object.entries(n);Mt(s.length===1,"Update expression must contain only one operator.");const[u,c]=s[0];Mt(Na(pk,u),`Update operator '${u}' is not supported.`);const d=pk[u];return Object.keys(i).length&&!new uu(i,a.queryOptions).test(t)?[]:d(t,c,r,a)}}hN();var U0;function pN(e,t){if(!U0){var n=hN({cloneMode:"none"});U0=(r,i)=>{var a=Ir(r);return n(a,i),a}}return U0(e,t)}function IK(e){return this.incrementalModify(t=>{var n=pN(t,e);return n})}function AK(e){var t=this._data,n=pN(t,e);return this._saveData(n,t)}async function jK(e){return ac(this.asRxQuery,t=>t.update(e))}var LK={name:"update",rxdb:!0,prototypes:{RxDocument:e=>{e.update=AK,e.incrementalUpdate=IK},RxQuery:e=>{e.update=jK}}},O_={exports:{}},mN={},Da={},rf={},Qh={},ut={},Eh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(E){if(super(),!e.IDENTIFIER.test(E))throw new Error("CodeGen: name must be a valid identifier");this.str=E}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(E){super(),this._items=typeof E=="string"?[E]:E}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const E=this._items[0];return E===""||E==='""'}get str(){var E;return(E=this._str)!==null&&E!==void 0?E:this._str=this._items.reduce((P,N)=>`${P}${N}`,"")}get names(){var E;return(E=this._names)!==null&&E!==void 0?E:this._names=this._items.reduce((P,N)=>(N instanceof n&&(P[N.str]=(P[N.str]||0)+1),P),{})}}e._Code=r,e.nil=new r("");function i(S,...E){const P=[S[0]];let N=0;for(;N<E.length;)u(P,E[N]),P.push(S[++N]);return new r(P)}e._=i;const a=new r("+");function s(S,...E){const P=[g(S[0])];let N=0;for(;N<E.length;)P.push(a),u(P,E[N]),P.push(a,g(S[++N]));return c(P),new r(P)}e.str=s;function u(S,E){E instanceof r?S.push(...E._items):E instanceof n?S.push(E):S.push(v(E))}e.addCodeArg=u;function c(S){let E=1;for(;E<S.length-1;){if(S[E]===a){const P=d(S[E-1],S[E+1]);if(P!==void 0){S.splice(E-1,3,P);continue}S[E++]="+"}E++}}function d(S,E){if(E==='""')return S;if(S==='""')return E;if(typeof S=="string")return E instanceof n||S[S.length-1]!=='"'?void 0:typeof E!="string"?`${S.slice(0,-1)}${E}"`:E[0]==='"'?S.slice(0,-1)+E.slice(1):void 0;if(typeof E=="string"&&E[0]==='"'&&!(S instanceof n))return`"${S}${E.slice(1)}`}function h(S,E){return E.emptyStr()?S:S.emptyStr()?E:s`${S}${E}`}e.strConcat=h;function v(S){return typeof S=="number"||typeof S=="boolean"||S===null?S:g(Array.isArray(S)?S.join(","):S)}function y(S){return new r(g(S))}e.stringify=y;function g(S){return JSON.stringify(S).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=g;function w(S){return typeof S=="string"&&e.IDENTIFIER.test(S)?new r(`.${S}`):i`[${S}]`}e.getProperty=w;function x(S){if(typeof S=="string"&&e.IDENTIFIER.test(S))return new r(`${S}`);throw new Error(`CodeGen: invalid export name: ${S}, use explicit $id name mapping`)}e.getEsmExportName=x;function C(S){return new r(S.toString())}e.regexpCode=C})(Eh);var $_={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Eh;class n extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var r;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:d,parent:h}={}){this._names={},this._prefixes=d,this._parent=h}toName(d){return d instanceof t.Name?d:this.name(d)}name(d){return new t.Name(this._newName(d))}_newName(d){const h=this._names[d]||this._nameGroup(d);return`${d}${h.index++}`}_nameGroup(d){var h,v;if(!((v=(h=this._parent)===null||h===void 0?void 0:h._prefixes)===null||v===void 0)&&v.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}e.Scope=i;class a extends t.Name{constructor(d,h){super(h),this.prefix=d}setValue(d,{property:h,itemIndex:v}){this.value=d,this.scopePath=(0,t._)`.${new t.Name(h)}[${v}]`}}e.ValueScopeName=a;const s=(0,t._)`\n`;class u extends i{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?s:t.nil}}get(){return this._scope}name(d){return new a(d,this._newName(d))}value(d,h){var v;if(h.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const y=this.toName(d),{prefix:g}=y,w=(v=h.key)!==null&&v!==void 0?v:h.ref;let x=this._values[g];if(x){const E=x.get(w);if(E)return E}else x=this._values[g]=new Map;x.set(w,y);const C=this._scope[g]||(this._scope[g]=[]),S=C.length;return C[S]=h.ref,y.setValue(h,{property:g,itemIndex:S}),y}getValue(d,h){const v=this._values[d];if(v)return v.get(h)}scopeRefs(d,h=this._values){return this._reduceValues(h,v=>{if(v.scopePath===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return(0,t._)`${d}${v.scopePath}`})}scopeCode(d=this._values,h,v){return this._reduceValues(d,y=>{if(y.value===void 0)throw new Error(`CodeGen: name "${y}" has no value`);return y.value.code},h,v)}_reduceValues(d,h,v={},y){let g=t.nil;for(const w in d){const x=d[w];if(!x)continue;const C=v[w]=v[w]||new Map;x.forEach(S=>{if(C.has(S))return;C.set(S,r.Started);let E=h(S);if(E){const P=this.opts.es5?e.varKinds.var:e.varKinds.const;g=(0,t._)`${g}${P} ${S} = ${E};${this.opts._n}`}else if(E=y==null?void 0:y(S))g=(0,t._)`${g}${E}${this.opts._n}`;else throw new n(S);C.set(S,r.Completed)})}return g}}e.ValueScope=u})($_);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Eh,n=$_;var r=Eh;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=$_;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class a{optimizeNodes(){return this}optimizeNames(A,H){return this}}class s extends a{constructor(A,H,ae){super(),this.varKind=A,this.name=H,this.rhs=ae}render({es5:A,_n:H}){const ae=A?n.varKinds.var:this.varKind,ge=this.rhs===void 0?"":` = ${this.rhs}`;return`${ae} ${this.name}${ge};`+H}optimizeNames(A,H){if(A[this.name.str])return this.rhs&&(this.rhs=Ce(this.rhs,A,H)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class u extends a{constructor(A,H,ae){super(),this.lhs=A,this.rhs=H,this.sideEffects=ae}render({_n:A}){return`${this.lhs} = ${this.rhs};`+A}optimizeNames(A,H){if(!(this.lhs instanceof t.Name&&!A[this.lhs.str]&&!this.sideEffects))return this.rhs=Ce(this.rhs,A,H),this}get names(){const A=this.lhs instanceof t.Name?{}:{...this.lhs.names};return xe(A,this.rhs)}}class c extends u{constructor(A,H,ae,ge){super(A,ae,ge),this.op=H}render({_n:A}){return`${this.lhs} ${this.op}= ${this.rhs};`+A}}class d extends a{constructor(A){super(),this.label=A,this.names={}}render({_n:A}){return`${this.label}:`+A}}class h extends a{constructor(A){super(),this.label=A,this.names={}}render({_n:A}){return`break${this.label?` ${this.label}`:""};`+A}}class v extends a{constructor(A){super(),this.error=A}render({_n:A}){return`throw ${this.error};`+A}get names(){return this.error.names}}class y extends a{constructor(A){super(),this.code=A}render({_n:A}){return`${this.code};`+A}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(A,H){return this.code=Ce(this.code,A,H),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class g extends a{constructor(A=[]){super(),this.nodes=A}render(A){return this.nodes.reduce((H,ae)=>H+ae.render(A),"")}optimizeNodes(){const{nodes:A}=this;let H=A.length;for(;H--;){const ae=A[H].optimizeNodes();Array.isArray(ae)?A.splice(H,1,...ae):ae?A[H]=ae:A.splice(H,1)}return A.length>0?this:void 0}optimizeNames(A,H){const{nodes:ae}=this;let ge=ae.length;for(;ge--;){const Oe=ae[ge];Oe.optimizeNames(A,H)||(Le(A,Oe.names),ae.splice(ge,1))}return ae.length>0?this:void 0}get names(){return this.nodes.reduce((A,H)=>fe(A,H.names),{})}}class w extends g{render(A){return"{"+A._n+super.render(A)+"}"+A._n}}class x extends g{}class C extends w{}C.kind="else";class S extends w{constructor(A,H){super(H),this.condition=A}render(A){let H=`if(${this.condition})`+super.render(A);return this.else&&(H+="else "+this.else.render(A)),H}optimizeNodes(){super.optimizeNodes();const A=this.condition;if(A===!0)return this.nodes;let H=this.else;if(H){const ae=H.optimizeNodes();H=this.else=Array.isArray(ae)?new C(ae):ae}if(H)return A===!1?H instanceof S?H:H.nodes:this.nodes.length?this:new S(qe(A),H instanceof S?[H]:H.nodes);if(!(A===!1||!this.nodes.length))return this}optimizeNames(A,H){var ae;if(this.else=(ae=this.else)===null||ae===void 0?void 0:ae.optimizeNames(A,H),!!(super.optimizeNames(A,H)||this.else))return this.condition=Ce(this.condition,A,H),this}get names(){const A=super.names;return xe(A,this.condition),this.else&&fe(A,this.else.names),A}}S.kind="if";class E extends w{}E.kind="for";class P extends E{constructor(A){super(),this.iteration=A}render(A){return`for(${this.iteration})`+super.render(A)}optimizeNames(A,H){if(super.optimizeNames(A,H))return this.iteration=Ce(this.iteration,A,H),this}get names(){return fe(super.names,this.iteration.names)}}class N extends E{constructor(A,H,ae,ge){super(),this.varKind=A,this.name=H,this.from=ae,this.to=ge}render(A){const H=A.es5?n.varKinds.var:this.varKind,{name:ae,from:ge,to:Oe}=this;return`for(${H} ${ae}=${ge}; ${ae}<${Oe}; ${ae}++)`+super.render(A)}get names(){const A=xe(super.names,this.from);return xe(A,this.to)}}class T extends E{constructor(A,H,ae,ge){super(),this.loop=A,this.varKind=H,this.name=ae,this.iterable=ge}render(A){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(A)}optimizeNames(A,H){if(super.optimizeNames(A,H))return this.iterable=Ce(this.iterable,A,H),this}get names(){return fe(super.names,this.iterable.names)}}class U extends w{constructor(A,H,ae){super(),this.name=A,this.args=H,this.async=ae}render(A){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(A)}}U.kind="func";class W extends g{render(A){return"return "+super.render(A)}}W.kind="return";class re extends w{render(A){let H="try"+super.render(A);return this.catch&&(H+=this.catch.render(A)),this.finally&&(H+=this.finally.render(A)),H}optimizeNodes(){var A,H;return super.optimizeNodes(),(A=this.catch)===null||A===void 0||A.optimizeNodes(),(H=this.finally)===null||H===void 0||H.optimizeNodes(),this}optimizeNames(A,H){var ae,ge;return super.optimizeNames(A,H),(ae=this.catch)===null||ae===void 0||ae.optimizeNames(A,H),(ge=this.finally)===null||ge===void 0||ge.optimizeNames(A,H),this}get names(){const A=super.names;return this.catch&&fe(A,this.catch.names),this.finally&&fe(A,this.finally.names),A}}class pe extends w{constructor(A){super(),this.error=A}render(A){return`catch(${this.error})`+super.render(A)}}pe.kind="catch";class he extends w{render(A){return"finally"+super.render(A)}}he.kind="finally";class ce{constructor(A,H={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...H,_n:H.lines?`
`:""},this._extScope=A,this._scope=new n.Scope({parent:A}),this._nodes=[new x]}toString(){return this._root.render(this.opts)}name(A){return this._scope.name(A)}scopeName(A){return this._extScope.name(A)}scopeValue(A,H){const ae=this._extScope.value(A,H);return(this._values[ae.prefix]||(this._values[ae.prefix]=new Set)).add(ae),ae}getScopeValue(A,H){return this._extScope.getValue(A,H)}scopeRefs(A){return this._extScope.scopeRefs(A,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(A,H,ae,ge){const Oe=this._scope.toName(H);return ae!==void 0&&ge&&(this._constants[Oe.str]=ae),this._leafNode(new s(A,Oe,ae)),Oe}const(A,H,ae){return this._def(n.varKinds.const,A,H,ae)}let(A,H,ae){return this._def(n.varKinds.let,A,H,ae)}var(A,H,ae){return this._def(n.varKinds.var,A,H,ae)}assign(A,H,ae){return this._leafNode(new u(A,H,ae))}add(A,H){return this._leafNode(new c(A,e.operators.ADD,H))}code(A){return typeof A=="function"?A():A!==t.nil&&this._leafNode(new y(A)),this}object(...A){const H=["{"];for(const[ae,ge]of A)H.length>1&&H.push(","),H.push(ae),(ae!==ge||this.opts.es5)&&(H.push(":"),(0,t.addCodeArg)(H,ge));return H.push("}"),new t._Code(H)}if(A,H,ae){if(this._blockNode(new S(A)),H&&ae)this.code(H).else().code(ae).endIf();else if(H)this.code(H).endIf();else if(ae)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(A){return this._elseNode(new S(A))}else(){return this._elseNode(new C)}endIf(){return this._endBlockNode(S,C)}_for(A,H){return this._blockNode(A),H&&this.code(H).endFor(),this}for(A,H){return this._for(new P(A),H)}forRange(A,H,ae,ge,Oe=this.opts.es5?n.varKinds.var:n.varKinds.let){const ve=this._scope.toName(A);return this._for(new N(Oe,ve,H,ae),()=>ge(ve))}forOf(A,H,ae,ge=n.varKinds.const){const Oe=this._scope.toName(A);if(this.opts.es5){const ve=H instanceof t.Name?H:this.var("_arr",H);return this.forRange("_i",0,(0,t._)`${ve}.length`,Ne=>{this.var(Oe,(0,t._)`${ve}[${Ne}]`),ae(Oe)})}return this._for(new T("of",ge,Oe,H),()=>ae(Oe))}forIn(A,H,ae,ge=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(A,(0,t._)`Object.keys(${H})`,ae);const Oe=this._scope.toName(A);return this._for(new T("in",ge,Oe,H),()=>ae(Oe))}endFor(){return this._endBlockNode(E)}label(A){return this._leafNode(new d(A))}break(A){return this._leafNode(new h(A))}return(A){const H=new W;if(this._blockNode(H),this.code(A),H.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(W)}try(A,H,ae){if(!H&&!ae)throw new Error('CodeGen: "try" without "catch" and "finally"');const ge=new re;if(this._blockNode(ge),this.code(A),H){const Oe=this.name("e");this._currNode=ge.catch=new pe(Oe),H(Oe)}return ae&&(this._currNode=ge.finally=new he,this.code(ae)),this._endBlockNode(pe,he)}throw(A){return this._leafNode(new v(A))}block(A,H){return this._blockStarts.push(this._nodes.length),A&&this.code(A).endBlock(H),this}endBlock(A){const H=this._blockStarts.pop();if(H===void 0)throw new Error("CodeGen: not in self-balancing block");const ae=this._nodes.length-H;if(ae<0||A!==void 0&&ae!==A)throw new Error(`CodeGen: wrong number of nodes: ${ae} vs ${A} expected`);return this._nodes.length=H,this}func(A,H=t.nil,ae,ge){return this._blockNode(new U(A,H,ae)),ge&&this.code(ge).endFunc(),this}endFunc(){return this._endBlockNode(U)}optimize(A=1){for(;A-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(A){return this._currNode.nodes.push(A),this}_blockNode(A){this._currNode.nodes.push(A),this._nodes.push(A)}_endBlockNode(A,H){const ae=this._currNode;if(ae instanceof A||H&&ae instanceof H)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${H?`${A.kind}/${H.kind}`:A.kind}"`)}_elseNode(A){const H=this._currNode;if(!(H instanceof S))throw new Error('CodeGen: "else" without "if"');return this._currNode=H.else=A,this}get _root(){return this._nodes[0]}get _currNode(){const A=this._nodes;return A[A.length-1]}set _currNode(A){const H=this._nodes;H[H.length-1]=A}}e.CodeGen=ce;function fe(X,A){for(const H in A)X[H]=(X[H]||0)+(A[H]||0);return X}function xe(X,A){return A instanceof t._CodeOrName?fe(X,A.names):X}function Ce(X,A,H){if(X instanceof t.Name)return ae(X);if(!ge(X))return X;return new t._Code(X._items.reduce((Oe,ve)=>(ve instanceof t.Name&&(ve=ae(ve)),ve instanceof t._Code?Oe.push(...ve._items):Oe.push(ve),Oe),[]));function ae(Oe){const ve=H[Oe.str];return ve===void 0||A[Oe.str]!==1?Oe:(delete A[Oe.str],ve)}function ge(Oe){return Oe instanceof t._Code&&Oe._items.some(ve=>ve instanceof t.Name&&A[ve.str]===1&&H[ve.str]!==void 0)}}function Le(X,A){for(const H in A)X[H]=(X[H]||0)-(A[H]||0)}function qe(X){return typeof X=="boolean"||typeof X=="number"||X===null?!X:(0,t._)`!${te(X)}`}e.not=qe;const We=F(e.operators.AND);function oe(...X){return X.reduce(We)}e.and=oe;const _e=F(e.operators.OR);function G(...X){return X.reduce(_e)}e.or=G;function F(X){return(A,H)=>A===t.nil?H:H===t.nil?A:(0,t._)`${te(A)} ${X} ${te(H)}`}function te(X){return X instanceof t.Name?X:(0,t._)`(${X})`}})(ut);var je={};Object.defineProperty(je,"__esModule",{value:!0});je.checkStrictMode=je.getErrorPath=je.Type=je.useFunc=je.setEvaluated=je.evaluatedPropsToName=je.mergeEvaluated=je.eachItem=je.unescapeJsonPointer=je.escapeJsonPointer=je.escapeFragment=je.unescapeFragment=je.schemaRefOrVal=je.schemaHasRulesButRef=je.schemaHasRules=je.checkUnknownRules=je.alwaysValidSchema=je.toHash=void 0;const zt=ut,zK=Eh;function FK(e){const t={};for(const n of e)t[n]=!0;return t}je.toHash=FK;function BK(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(vN(e,t),!gN(t,e.self.RULES.all))}je.alwaysValidSchema=BK;function vN(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const a in t)i[a]||_N(e,`unknown keyword: "${a}"`)}je.checkUnknownRules=vN;function gN(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}je.schemaHasRules=gN;function WK(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}je.schemaHasRulesButRef=WK;function UK({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,zt._)`${n}`}return(0,zt._)`${e}${t}${(0,zt.getProperty)(r)}`}je.schemaRefOrVal=UK;function HK(e){return yN(decodeURIComponent(e))}je.unescapeFragment=HK;function KK(e){return encodeURIComponent(_1(e))}je.escapeFragment=KK;function _1(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}je.escapeJsonPointer=_1;function yN(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}je.unescapeJsonPointer=yN;function qK(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}je.eachItem=qK;function mk({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,a,s,u)=>{const c=s===void 0?a:s instanceof zt.Name?(a instanceof zt.Name?e(i,a,s):t(i,a,s),s):a instanceof zt.Name?(t(i,s,a),a):n(a,s);return u===zt.Name&&!(c instanceof zt.Name)?r(i,c):c}}je.mergeEvaluated={props:mk({mergeNames:(e,t,n)=>e.if((0,zt._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,zt._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,zt._)`${n} || {}`).code((0,zt._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,zt._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,zt._)`${n} || {}`),b1(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:wN}),items:mk({mergeNames:(e,t,n)=>e.if((0,zt._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,zt._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,zt._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,zt._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function wN(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,zt._)`{}`);return t!==void 0&&b1(e,n,t),n}je.evaluatedPropsToName=wN;function b1(e,t,n){Object.keys(n).forEach(r=>e.assign((0,zt._)`${t}${(0,zt.getProperty)(r)}`,!0))}je.setEvaluated=b1;const vk={};function YK(e,t){return e.scopeValue("func",{ref:t,code:vk[t.code]||(vk[t.code]=new zK._Code(t.code))})}je.useFunc=YK;var R_;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(R_||(je.Type=R_={}));function VK(e,t,n){if(e instanceof zt.Name){const r=t===R_.Num;return n?r?(0,zt._)`"[" + ${e} + "]"`:(0,zt._)`"['" + ${e} + "']"`:r?(0,zt._)`"/" + ${e}`:(0,zt._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,zt.getProperty)(e).toString():"/"+_1(e)}je.getErrorPath=VK;function _N(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}je.checkStrictMode=_N;var oo={};Object.defineProperty(oo,"__esModule",{value:!0});const yr=ut,XK={data:new yr.Name("data"),valCxt:new yr.Name("valCxt"),instancePath:new yr.Name("instancePath"),parentData:new yr.Name("parentData"),parentDataProperty:new yr.Name("parentDataProperty"),rootData:new yr.Name("rootData"),dynamicAnchors:new yr.Name("dynamicAnchors"),vErrors:new yr.Name("vErrors"),errors:new yr.Name("errors"),this:new yr.Name("this"),self:new yr.Name("self"),scope:new yr.Name("scope"),json:new yr.Name("json"),jsonPos:new yr.Name("jsonPos"),jsonLen:new yr.Name("jsonLen"),jsonPart:new yr.Name("jsonPart")};oo.default=XK;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=ut,n=je,r=oo;e.keywordError={message:({keyword:C})=>(0,t.str)`must pass "${C}" keyword validation`},e.keyword$DataError={message:({keyword:C,schemaType:S})=>S?(0,t.str)`"${C}" keyword must be ${S} ($data)`:(0,t.str)`"${C}" keyword is invalid ($data)`};function i(C,S=e.keywordError,E,P){const{it:N}=C,{gen:T,compositeRule:U,allErrors:W}=N,re=v(C,S,E);P??(U||W)?c(T,re):d(N,(0,t._)`[${re}]`)}e.reportError=i;function a(C,S=e.keywordError,E){const{it:P}=C,{gen:N,compositeRule:T,allErrors:U}=P,W=v(C,S,E);c(N,W),T||U||d(P,r.default.vErrors)}e.reportExtraError=a;function s(C,S){C.assign(r.default.errors,S),C.if((0,t._)`${r.default.vErrors} !== null`,()=>C.if(S,()=>C.assign((0,t._)`${r.default.vErrors}.length`,S),()=>C.assign(r.default.vErrors,null)))}e.resetErrorsCount=s;function u({gen:C,keyword:S,schemaValue:E,data:P,errsCount:N,it:T}){if(N===void 0)throw new Error("ajv implementation error");const U=C.name("err");C.forRange("i",N,r.default.errors,W=>{C.const(U,(0,t._)`${r.default.vErrors}[${W}]`),C.if((0,t._)`${U}.instancePath === undefined`,()=>C.assign((0,t._)`${U}.instancePath`,(0,t.strConcat)(r.default.instancePath,T.errorPath))),C.assign((0,t._)`${U}.schemaPath`,(0,t.str)`${T.errSchemaPath}/${S}`),T.opts.verbose&&(C.assign((0,t._)`${U}.schema`,E),C.assign((0,t._)`${U}.data`,P))})}e.extendErrors=u;function c(C,S){const E=C.const("err",S);C.if((0,t._)`${r.default.vErrors} === null`,()=>C.assign(r.default.vErrors,(0,t._)`[${E}]`),(0,t._)`${r.default.vErrors}.push(${E})`),C.code((0,t._)`${r.default.errors}++`)}function d(C,S){const{gen:E,validateName:P,schemaEnv:N}=C;N.$async?E.throw((0,t._)`new ${C.ValidationError}(${S})`):(E.assign((0,t._)`${P}.errors`,S),E.return(!1))}const h={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function v(C,S,E){const{createErrors:P}=C.it;return P===!1?(0,t._)`{}`:y(C,S,E)}function y(C,S,E={}){const{gen:P,it:N}=C,T=[g(N,E),w(C,E)];return x(C,S,T),P.object(...T)}function g({errorPath:C},{instancePath:S}){const E=S?(0,t.str)`${C}${(0,n.getErrorPath)(S,n.Type.Str)}`:C;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,E)]}function w({keyword:C,it:{errSchemaPath:S}},{schemaPath:E,parentSchema:P}){let N=P?S:(0,t.str)`${S}/${C}`;return E&&(N=(0,t.str)`${N}${(0,n.getErrorPath)(E,n.Type.Str)}`),[h.schemaPath,N]}function x(C,{params:S,message:E},P){const{keyword:N,data:T,schemaValue:U,it:W}=C,{opts:re,propertyName:pe,topSchemaRef:he,schemaPath:ce}=W;P.push([h.keyword,N],[h.params,typeof S=="function"?S(C):S||(0,t._)`{}`]),re.messages&&P.push([h.message,typeof E=="function"?E(C):E]),re.verbose&&P.push([h.schema,U],[h.parentSchema,(0,t._)`${he}${ce}`],[r.default.data,T]),pe&&P.push([h.propertyName,pe])}})(Qh);Object.defineProperty(rf,"__esModule",{value:!0});rf.boolOrEmptySchema=rf.topBoolOrEmptySchema=void 0;const QK=Qh,GK=ut,JK=oo,ZK={message:"boolean schema is false"};function e6(e){const{gen:t,schema:n,validateName:r}=e;n===!1?bN(e,!1):typeof n=="object"&&n.$async===!0?t.return(JK.default.data):(t.assign((0,GK._)`${r}.errors`,null),t.return(!0))}rf.topBoolOrEmptySchema=e6;function t6(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),bN(e)):n.var(t,!0)}rf.boolOrEmptySchema=t6;function bN(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,QK.reportError)(i,ZK,void 0,t)}var In={},yl={};Object.defineProperty(yl,"__esModule",{value:!0});yl.getRules=yl.isJSONType=void 0;const n6=["string","number","integer","boolean","null","object","array"],r6=new Set(n6);function i6(e){return typeof e=="string"&&r6.has(e)}yl.isJSONType=i6;function a6(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}yl.getRules=a6;var zo={};Object.defineProperty(zo,"__esModule",{value:!0});zo.shouldUseRule=zo.shouldUseGroup=zo.schemaHasRulesForType=void 0;function o6({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&SN(e,r)}zo.schemaHasRulesForType=o6;function SN(e,t){return t.rules.some(n=>xN(e,n))}zo.shouldUseGroup=SN;function xN(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}zo.shouldUseRule=xN;Object.defineProperty(In,"__esModule",{value:!0});In.reportTypeError=In.checkDataTypes=In.checkDataType=In.coerceAndCheckDataType=In.getJSONTypes=In.getSchemaTypes=In.DataType=void 0;const s6=yl,u6=zo,l6=Qh,rt=ut,EN=je;var Tc;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Tc||(In.DataType=Tc={}));function c6(e){const t=PN(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}In.getSchemaTypes=c6;function PN(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(s6.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}In.getJSONTypes=PN;function f6(e,t){const{gen:n,data:r,opts:i}=e,a=d6(t,i.coerceTypes),s=t.length>0&&!(a.length===0&&t.length===1&&(0,u6.schemaHasRulesForType)(e,t[0]));if(s){const u=S1(t,r,i.strictNumbers,Tc.Wrong);n.if(u,()=>{a.length?h6(e,t,a):x1(e)})}return s}In.coerceAndCheckDataType=f6;const kN=new Set(["string","number","integer","boolean","null"]);function d6(e,t){return t?e.filter(n=>kN.has(n)||t==="array"&&n==="array"):[]}function h6(e,t,n){const{gen:r,data:i,opts:a}=e,s=r.let("dataType",(0,rt._)`typeof ${i}`),u=r.let("coerced",(0,rt._)`undefined`);a.coerceTypes==="array"&&r.if((0,rt._)`${s} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,rt._)`${i}[0]`).assign(s,(0,rt._)`typeof ${i}`).if(S1(t,i,a.strictNumbers),()=>r.assign(u,i))),r.if((0,rt._)`${u} !== undefined`);for(const d of n)(kN.has(d)||d==="array"&&a.coerceTypes==="array")&&c(d);r.else(),x1(e),r.endIf(),r.if((0,rt._)`${u} !== undefined`,()=>{r.assign(i,u),p6(e,u)});function c(d){switch(d){case"string":r.elseIf((0,rt._)`${s} == "number" || ${s} == "boolean"`).assign(u,(0,rt._)`"" + ${i}`).elseIf((0,rt._)`${i} === null`).assign(u,(0,rt._)`""`);return;case"number":r.elseIf((0,rt._)`${s} == "boolean" || ${i} === null
              || (${s} == "string" && ${i} && ${i} == +${i})`).assign(u,(0,rt._)`+${i}`);return;case"integer":r.elseIf((0,rt._)`${s} === "boolean" || ${i} === null
              || (${s} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(u,(0,rt._)`+${i}`);return;case"boolean":r.elseIf((0,rt._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(u,!1).elseIf((0,rt._)`${i} === "true" || ${i} === 1`).assign(u,!0);return;case"null":r.elseIf((0,rt._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(u,null);return;case"array":r.elseIf((0,rt._)`${s} === "string" || ${s} === "number"
              || ${s} === "boolean" || ${i} === null`).assign(u,(0,rt._)`[${i}]`)}}}function p6({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,rt._)`${t} !== undefined`,()=>e.assign((0,rt._)`${t}[${n}]`,r))}function N_(e,t,n,r=Tc.Correct){const i=r===Tc.Correct?rt.operators.EQ:rt.operators.NEQ;let a;switch(e){case"null":return(0,rt._)`${t} ${i} null`;case"array":a=(0,rt._)`Array.isArray(${t})`;break;case"object":a=(0,rt._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":a=s((0,rt._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":a=s();break;default:return(0,rt._)`typeof ${t} ${i} ${e}`}return r===Tc.Correct?a:(0,rt.not)(a);function s(u=rt.nil){return(0,rt.and)((0,rt._)`typeof ${t} == "number"`,u,n?(0,rt._)`isFinite(${t})`:rt.nil)}}In.checkDataType=N_;function S1(e,t,n,r){if(e.length===1)return N_(e[0],t,n,r);let i;const a=(0,EN.toHash)(e);if(a.array&&a.object){const s=(0,rt._)`typeof ${t} != "object"`;i=a.null?s:(0,rt._)`!${t} || ${s}`,delete a.null,delete a.array,delete a.object}else i=rt.nil;a.number&&delete a.integer;for(const s in a)i=(0,rt.and)(i,N_(s,t,n,r));return i}In.checkDataTypes=S1;const m6={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,rt._)`{type: ${e}}`:(0,rt._)`{type: ${t}}`};function x1(e){const t=v6(e);(0,l6.reportError)(t,m6)}In.reportTypeError=x1;function v6(e){const{gen:t,data:n,schema:r}=e,i=(0,EN.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var Ig={};Object.defineProperty(Ig,"__esModule",{value:!0});Ig.assignDefaults=void 0;const Zl=ut,g6=je;function y6(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)gk(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,a)=>gk(e,a,i.default))}Ig.assignDefaults=y6;function gk(e,t,n){const{gen:r,compositeRule:i,data:a,opts:s}=e;if(n===void 0)return;const u=(0,Zl._)`${a}${(0,Zl.getProperty)(t)}`;if(i){(0,g6.checkStrictMode)(e,`default is ignored for: ${u}`);return}let c=(0,Zl._)`${u} === undefined`;s.useDefaults==="empty"&&(c=(0,Zl._)`${c} || ${u} === null || ${u} === ""`),r.if(c,(0,Zl._)`${u} = ${(0,Zl.stringify)(n)}`)}var Ja={},ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.validateUnion=ft.validateArray=ft.usePattern=ft.callValidateCode=ft.schemaProperties=ft.allSchemaProperties=ft.noPropertyInData=ft.propertyInData=ft.isOwnProperty=ft.hasPropFunc=ft.reportMissingProp=ft.checkMissingProp=ft.checkReportMissingProp=void 0;const Ht=ut,E1=je,vs=oo,w6=je;function _6(e,t){const{gen:n,data:r,it:i}=e;n.if(k1(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Ht._)`${t}`},!0),e.error()})}ft.checkReportMissingProp=_6;function b6({gen:e,data:t,it:{opts:n}},r,i){return(0,Ht.or)(...r.map(a=>(0,Ht.and)(k1(e,t,a,n.ownProperties),(0,Ht._)`${i} = ${a}`)))}ft.checkMissingProp=b6;function S6(e,t){e.setParams({missingProperty:t},!0),e.error()}ft.reportMissingProp=S6;function CN(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Ht._)`Object.prototype.hasOwnProperty`})}ft.hasPropFunc=CN;function P1(e,t,n){return(0,Ht._)`${CN(e)}.call(${t}, ${n})`}ft.isOwnProperty=P1;function x6(e,t,n,r){const i=(0,Ht._)`${t}${(0,Ht.getProperty)(n)} !== undefined`;return r?(0,Ht._)`${i} && ${P1(e,t,n)}`:i}ft.propertyInData=x6;function k1(e,t,n,r){const i=(0,Ht._)`${t}${(0,Ht.getProperty)(n)} === undefined`;return r?(0,Ht.or)(i,(0,Ht.not)(P1(e,t,n))):i}ft.noPropertyInData=k1;function DN(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}ft.allSchemaProperties=DN;function E6(e,t){return DN(t).filter(n=>!(0,E1.alwaysValidSchema)(e,t[n]))}ft.schemaProperties=E6;function P6({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:a},it:s},u,c,d){const h=d?(0,Ht._)`${e}, ${t}, ${r}${i}`:t,v=[[vs.default.instancePath,(0,Ht.strConcat)(vs.default.instancePath,a)],[vs.default.parentData,s.parentData],[vs.default.parentDataProperty,s.parentDataProperty],[vs.default.rootData,vs.default.rootData]];s.opts.dynamicRef&&v.push([vs.default.dynamicAnchors,vs.default.dynamicAnchors]);const y=(0,Ht._)`${h}, ${n.object(...v)}`;return c!==Ht.nil?(0,Ht._)`${u}.call(${c}, ${y})`:(0,Ht._)`${u}(${y})`}ft.callValidateCode=P6;const k6=(0,Ht._)`new RegExp`;function C6({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,a=i(n,r);return e.scopeValue("pattern",{key:a.toString(),ref:a,code:(0,Ht._)`${i.code==="new RegExp"?k6:(0,w6.useFunc)(e,i)}(${n}, ${r})`})}ft.usePattern=C6;function D6(e){const{gen:t,data:n,keyword:r,it:i}=e,a=t.name("valid");if(i.allErrors){const u=t.let("valid",!0);return s(()=>t.assign(u,!1)),u}return t.var(a,!0),s(()=>t.break()),a;function s(u){const c=t.const("len",(0,Ht._)`${n}.length`);t.forRange("i",0,c,d=>{e.subschema({keyword:r,dataProp:d,dataPropType:E1.Type.Num},a),t.if((0,Ht.not)(a),u)})}}ft.validateArray=D6;function O6(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(c=>(0,E1.alwaysValidSchema)(i,c))&&!i.opts.unevaluated)return;const s=t.let("valid",!1),u=t.name("_valid");t.block(()=>n.forEach((c,d)=>{const h=e.subschema({keyword:r,schemaProp:d,compositeRule:!0},u);t.assign(s,(0,Ht._)`${s} || ${u}`),e.mergeValidEvaluated(h,u)||t.if((0,Ht.not)(s))})),e.result(s,()=>e.reset(),()=>e.error(!0))}ft.validateUnion=O6;Object.defineProperty(Ja,"__esModule",{value:!0});Ja.validateKeywordUsage=Ja.validSchemaType=Ja.funcKeywordCode=Ja.macroKeywordCode=void 0;const Nr=ut,Yu=oo,$6=ft,R6=Qh;function N6(e,t){const{gen:n,keyword:r,schema:i,parentSchema:a,it:s}=e,u=t.macro.call(s.self,i,a,s),c=ON(n,r,u);s.opts.validateSchema!==!1&&s.self.validateSchema(u,!0);const d=n.name("valid");e.subschema({schema:u,schemaPath:Nr.nil,errSchemaPath:`${s.errSchemaPath}/${r}`,topSchemaRef:c,compositeRule:!0},d),e.pass(d,()=>e.error(!0))}Ja.macroKeywordCode=N6;function T6(e,t){var n;const{gen:r,keyword:i,schema:a,parentSchema:s,$data:u,it:c}=e;I6(c,t);const d=!u&&t.compile?t.compile.call(c.self,a,s,c):t.validate,h=ON(r,i,d),v=r.let("valid");e.block$data(v,y),e.ok((n=t.valid)!==null&&n!==void 0?n:v);function y(){if(t.errors===!1)x(),t.modifying&&yk(e),C(()=>e.error());else{const S=t.async?g():w();t.modifying&&yk(e),C(()=>M6(e,S))}}function g(){const S=r.let("ruleErrs",null);return r.try(()=>x((0,Nr._)`await `),E=>r.assign(v,!1).if((0,Nr._)`${E} instanceof ${c.ValidationError}`,()=>r.assign(S,(0,Nr._)`${E}.errors`),()=>r.throw(E))),S}function w(){const S=(0,Nr._)`${h}.errors`;return r.assign(S,null),x(Nr.nil),S}function x(S=t.async?(0,Nr._)`await `:Nr.nil){const E=c.opts.passContext?Yu.default.this:Yu.default.self,P=!("compile"in t&&!u||t.schema===!1);r.assign(v,(0,Nr._)`${S}${(0,$6.callValidateCode)(e,h,E,P)}`,t.modifying)}function C(S){var E;r.if((0,Nr.not)((E=t.valid)!==null&&E!==void 0?E:v),S)}}Ja.funcKeywordCode=T6;function yk(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Nr._)`${r.parentData}[${r.parentDataProperty}]`))}function M6(e,t){const{gen:n}=e;n.if((0,Nr._)`Array.isArray(${t})`,()=>{n.assign(Yu.default.vErrors,(0,Nr._)`${Yu.default.vErrors} === null ? ${t} : ${Yu.default.vErrors}.concat(${t})`).assign(Yu.default.errors,(0,Nr._)`${Yu.default.vErrors}.length`),(0,R6.extendErrors)(e)},()=>e.error())}function I6({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function ON(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Nr.stringify)(n)})}function A6(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Ja.validSchemaType=A6;function j6({schema:e,opts:t,self:n,errSchemaPath:r},i,a){if(Array.isArray(i.keyword)?!i.keyword.includes(a):i.keyword!==a)throw new Error("ajv implementation error");const s=i.dependencies;if(s!=null&&s.some(u=>!Object.prototype.hasOwnProperty.call(e,u)))throw new Error(`parent schema must have dependencies of ${a}: ${s.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[a])){const c=`keyword "${a}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(c);else throw new Error(c)}}Ja.validateKeywordUsage=j6;var qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.extendSubschemaMode=qs.extendSubschemaData=qs.getSubschema=void 0;const Va=ut,$N=je;function L6(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:a,topSchemaRef:s}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const u=e.schema[t];return n===void 0?{schema:u,schemaPath:(0,Va._)`${e.schemaPath}${(0,Va.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:u[n],schemaPath:(0,Va._)`${e.schemaPath}${(0,Va.getProperty)(t)}${(0,Va.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,$N.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||a===void 0||s===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:s,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')}qs.getSubschema=L6;function z6(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:a,propertyName:s}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:u}=t;if(n!==void 0){const{errorPath:d,dataPathArr:h,opts:v}=t,y=u.let("data",(0,Va._)`${t.data}${(0,Va.getProperty)(n)}`,!0);c(y),e.errorPath=(0,Va.str)`${d}${(0,$N.getErrorPath)(n,r,v.jsPropertySyntax)}`,e.parentDataProperty=(0,Va._)`${n}`,e.dataPathArr=[...h,e.parentDataProperty]}if(i!==void 0){const d=i instanceof Va.Name?i:u.let("data",i,!0);c(d),s!==void 0&&(e.propertyName=s)}a&&(e.dataTypes=a);function c(d){e.data=d,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,d]}}qs.extendSubschemaData=z6;function F6(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:a}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),a!==void 0&&(e.allErrors=a),e.jtdDiscriminator=t,e.jtdMetadata=n}qs.extendSubschemaMode=F6;var ir={},RN=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),r=a.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;i--!==0;){var s=a[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n},NN={exports:{}},Ts=NN.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};nv(t,r,i,e,"",e)};Ts.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Ts.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ts.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ts.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function nv(e,t,n,r,i,a,s,u,c,d){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,a,s,u,c,d);for(var h in r){var v=r[h];if(Array.isArray(v)){if(h in Ts.arrayKeywords)for(var y=0;y<v.length;y++)nv(e,t,n,v[y],i+"/"+h+"/"+y,a,i,h,r,y)}else if(h in Ts.propsKeywords){if(v&&typeof v=="object")for(var g in v)nv(e,t,n,v[g],i+"/"+h+"/"+B6(g),a,i,h,r,g)}else(h in Ts.keywords||e.allKeys&&!(h in Ts.skipKeywords))&&nv(e,t,n,v,i+"/"+h,a,i,h,r)}n(r,i,a,s,u,c,d)}}function B6(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var W6=NN.exports;Object.defineProperty(ir,"__esModule",{value:!0});ir.getSchemaRefs=ir.resolveUrl=ir.normalizeId=ir._getFullPath=ir.getFullPath=ir.inlineRef=void 0;const U6=je,H6=RN,K6=W6,q6=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Y6(e,t=!0){return typeof e=="boolean"?!0:t===!0?!T_(e):t?TN(e)<=t:!1}ir.inlineRef=Y6;const V6=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function T_(e){for(const t in e){if(V6.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(T_)||typeof n=="object"&&T_(n))return!0}return!1}function TN(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!q6.has(n)&&(typeof e[n]=="object"&&(0,U6.eachItem)(e[n],r=>t+=TN(r)),t===1/0))return 1/0}return t}function MN(e,t="",n){n!==!1&&(t=Mc(t));const r=e.parse(t);return IN(e,r)}ir.getFullPath=MN;function IN(e,t){return e.serialize(t).split("#")[0]+"#"}ir._getFullPath=IN;const X6=/#\/?$/;function Mc(e){return e?e.replace(X6,""):""}ir.normalizeId=Mc;function Q6(e,t,n){return n=Mc(n),e.resolve(t,n)}ir.resolveUrl=Q6;const G6=/^[a-z_][-a-z0-9._]*$/i;function J6(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Mc(e[n]||t),a={"":i},s=MN(r,i,!1),u={},c=new Set;return K6(e,{allKeys:!0},(v,y,g,w)=>{if(w===void 0)return;const x=s+y;let C=a[w];typeof v[n]=="string"&&(C=S.call(this,v[n])),E.call(this,v.$anchor),E.call(this,v.$dynamicAnchor),a[y]=C;function S(P){const N=this.opts.uriResolver.resolve;if(P=Mc(C?N(C,P):P),c.has(P))throw h(P);c.add(P);let T=this.refs[P];return typeof T=="string"&&(T=this.refs[T]),typeof T=="object"?d(v,T.schema,P):P!==Mc(x)&&(P[0]==="#"?(d(v,u[P],P),u[P]=v):this.refs[P]=x),P}function E(P){if(typeof P=="string"){if(!G6.test(P))throw new Error(`invalid anchor "${P}"`);S.call(this,`#${P}`)}}}),u;function d(v,y,g){if(y!==void 0&&!H6(v,y))throw h(g)}function h(v){return new Error(`reference "${v}" resolves to more than one schema`)}}ir.getSchemaRefs=J6;Object.defineProperty(Da,"__esModule",{value:!0});Da.getData=Da.KeywordCxt=Da.validateFunctionCode=void 0;const AN=rf,wk=In,C1=zo,qv=In,Z6=Ig,Id=Ja,H0=qs,Ke=ut,et=oo,e9=ir,Fo=je,cd=Qh;function t9(e){if(zN(e)&&(FN(e),LN(e))){i9(e);return}jN(e,()=>(0,AN.topBoolOrEmptySchema)(e))}Da.validateFunctionCode=t9;function jN({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},a){i.code.es5?e.func(t,(0,Ke._)`${et.default.data}, ${et.default.valCxt}`,r.$async,()=>{e.code((0,Ke._)`"use strict"; ${_k(n,i)}`),r9(e,i),e.code(a)}):e.func(t,(0,Ke._)`${et.default.data}, ${n9(i)}`,r.$async,()=>e.code(_k(n,i)).code(a))}function n9(e){return(0,Ke._)`{${et.default.instancePath}="", ${et.default.parentData}, ${et.default.parentDataProperty}, ${et.default.rootData}=${et.default.data}${e.dynamicRef?(0,Ke._)`, ${et.default.dynamicAnchors}={}`:Ke.nil}}={}`}function r9(e,t){e.if(et.default.valCxt,()=>{e.var(et.default.instancePath,(0,Ke._)`${et.default.valCxt}.${et.default.instancePath}`),e.var(et.default.parentData,(0,Ke._)`${et.default.valCxt}.${et.default.parentData}`),e.var(et.default.parentDataProperty,(0,Ke._)`${et.default.valCxt}.${et.default.parentDataProperty}`),e.var(et.default.rootData,(0,Ke._)`${et.default.valCxt}.${et.default.rootData}`),t.dynamicRef&&e.var(et.default.dynamicAnchors,(0,Ke._)`${et.default.valCxt}.${et.default.dynamicAnchors}`)},()=>{e.var(et.default.instancePath,(0,Ke._)`""`),e.var(et.default.parentData,(0,Ke._)`undefined`),e.var(et.default.parentDataProperty,(0,Ke._)`undefined`),e.var(et.default.rootData,et.default.data),t.dynamicRef&&e.var(et.default.dynamicAnchors,(0,Ke._)`{}`)})}function i9(e){const{schema:t,opts:n,gen:r}=e;jN(e,()=>{n.$comment&&t.$comment&&WN(e),l9(e),r.let(et.default.vErrors,null),r.let(et.default.errors,0),n.unevaluated&&a9(e),BN(e),d9(e)})}function a9(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Ke._)`${n}.evaluated`),t.if((0,Ke._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Ke._)`${e.evaluated}.props`,(0,Ke._)`undefined`)),t.if((0,Ke._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Ke._)`${e.evaluated}.items`,(0,Ke._)`undefined`))}function _k(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Ke._)`/*# sourceURL=${n} */`:Ke.nil}function o9(e,t){if(zN(e)&&(FN(e),LN(e))){s9(e,t);return}(0,AN.boolOrEmptySchema)(e,t)}function LN({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function zN(e){return typeof e.schema!="boolean"}function s9(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&WN(e),c9(e),f9(e);const a=r.const("_errs",et.default.errors);BN(e,a),r.var(t,(0,Ke._)`${a} === ${et.default.errors}`)}function FN(e){(0,Fo.checkUnknownRules)(e),u9(e)}function BN(e,t){if(e.opts.jtd)return bk(e,[],!1,t);const n=(0,wk.getSchemaTypes)(e.schema),r=(0,wk.coerceAndCheckDataType)(e,n);bk(e,n,!r,t)}function u9(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Fo.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function l9(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Fo.checkStrictMode)(e,"default is ignored in the schema root")}function c9(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,e9.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function f9(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function WN({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const a=n.$comment;if(i.$comment===!0)e.code((0,Ke._)`${et.default.self}.logger.log(${a})`);else if(typeof i.$comment=="function"){const s=(0,Ke.str)`${r}/$comment`,u=e.scopeValue("root",{ref:t.root});e.code((0,Ke._)`${et.default.self}.opts.$comment(${a}, ${s}, ${u}.schema)`)}}function d9(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:a}=e;n.$async?t.if((0,Ke._)`${et.default.errors} === 0`,()=>t.return(et.default.data),()=>t.throw((0,Ke._)`new ${i}(${et.default.vErrors})`)):(t.assign((0,Ke._)`${r}.errors`,et.default.vErrors),a.unevaluated&&h9(e),t.return((0,Ke._)`${et.default.errors} === 0`))}function h9({gen:e,evaluated:t,props:n,items:r}){n instanceof Ke.Name&&e.assign((0,Ke._)`${t}.props`,n),r instanceof Ke.Name&&e.assign((0,Ke._)`${t}.items`,r)}function bk(e,t,n,r){const{gen:i,schema:a,data:s,allErrors:u,opts:c,self:d}=e,{RULES:h}=d;if(a.$ref&&(c.ignoreKeywordsWithRef||!(0,Fo.schemaHasRulesButRef)(a,h))){i.block(()=>KN(e,"$ref",h.all.$ref.definition));return}c.jtd||p9(e,t),i.block(()=>{for(const y of h.rules)v(y);v(h.post)});function v(y){(0,C1.shouldUseGroup)(a,y)&&(y.type?(i.if((0,qv.checkDataType)(y.type,s,c.strictNumbers)),Sk(e,y),t.length===1&&t[0]===y.type&&n&&(i.else(),(0,qv.reportTypeError)(e)),i.endIf()):Sk(e,y),u||i.if((0,Ke._)`${et.default.errors} === ${r||0}`))}}function Sk(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,Z6.assignDefaults)(e,t.type),n.block(()=>{for(const a of t.rules)(0,C1.shouldUseRule)(r,a)&&KN(e,a.keyword,a.definition,t.type)})}function p9(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(m9(e,t),e.opts.allowUnionTypes||v9(e,t),g9(e,e.dataTypes))}function m9(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{UN(e.dataTypes,n)||D1(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),w9(e,t)}}function v9(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&D1(e,"use allowUnionTypes to allow union type keyword")}function g9(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,C1.shouldUseRule)(e.schema,i)){const{type:a}=i.definition;a.length&&!a.some(s=>y9(t,s))&&D1(e,`missing type "${a.join(",")}" for keyword "${r}"`)}}}function y9(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function UN(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function w9(e,t){const n=[];for(const r of e.dataTypes)UN(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function D1(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Fo.checkStrictMode)(e,t,e.opts.strictTypes)}class HN{constructor(t,n,r){if((0,Id.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Fo.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",qN(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Id.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",et.default.errors))}result(t,n,r){this.failResult((0,Ke.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Ke.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Ke._)`${n} !== undefined && (${(0,Ke.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?cd.reportExtraError:cd.reportError)(this,this.def.error,n)}$dataError(){(0,cd.reportError)(this,this.def.$dataError||cd.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,cd.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Ke.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Ke.nil,n=Ke.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:a,def:s}=this;r.if((0,Ke.or)((0,Ke._)`${i} === undefined`,n)),t!==Ke.nil&&r.assign(t,!0),(a.length||s.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Ke.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:a}=this;return(0,Ke.or)(s(),u());function s(){if(r.length){if(!(n instanceof Ke.Name))throw new Error("ajv implementation error");const c=Array.isArray(r)?r:[r];return(0,Ke._)`${(0,qv.checkDataTypes)(c,n,a.opts.strictNumbers,qv.DataType.Wrong)}`}return Ke.nil}function u(){if(i.validateSchema){const c=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Ke._)`!${c}(${n})`}return Ke.nil}}subschema(t,n){const r=(0,H0.getSubschema)(this.it,t);(0,H0.extendSubschemaData)(r,this.it,t),(0,H0.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return o9(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Fo.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Fo.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Ke.Name)),!0}}Da.KeywordCxt=HN;function KN(e,t,n,r){const i=new HN(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,Id.funcKeywordCode)(i,n):"macro"in n?(0,Id.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,Id.funcKeywordCode)(i,n)}const _9=/^\/(?:[^~]|~0|~1)*$/,b9=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function qN(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,a;if(e==="")return et.default.rootData;if(e[0]==="/"){if(!_9.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,a=et.default.rootData}else{const d=b9.exec(e);if(!d)throw new Error(`Invalid JSON-pointer: ${e}`);const h=+d[1];if(i=d[2],i==="#"){if(h>=t)throw new Error(c("property/index",h));return r[t-h]}if(h>t)throw new Error(c("data",h));if(a=n[t-h],!i)return a}let s=a;const u=i.split("/");for(const d of u)d&&(a=(0,Ke._)`${a}${(0,Ke.getProperty)((0,Fo.unescapeJsonPointer)(d))}`,s=(0,Ke._)`${s} && ${a}`);return s;function c(d,h){return`Cannot access ${d} ${h} levels up, current level is ${t}`}}Da.getData=qN;var Gh={};Object.defineProperty(Gh,"__esModule",{value:!0});class S9 extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Gh.default=S9;var mf={};Object.defineProperty(mf,"__esModule",{value:!0});const K0=ir;class x9 extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,K0.resolveUrl)(t,n,r),this.missingSchema=(0,K0.normalizeId)((0,K0.getFullPath)(t,this.missingRef))}}mf.default=x9;var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.resolveSchema=Zr.getCompilingSchema=Zr.resolveRef=Zr.compileSchema=Zr.SchemaEnv=void 0;const ga=ut,E9=Gh,Bu=oo,Ea=ir,xk=je,P9=Da;class Ag{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Ea.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Zr.SchemaEnv=Ag;function O1(e){const t=YN.call(this,e);if(t)return t;const n=(0,Ea.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:a}=this.opts,s=new ga.CodeGen(this.scope,{es5:r,lines:i,ownProperties:a});let u;e.$async&&(u=s.scopeValue("Error",{ref:E9.default,code:(0,ga._)`require("ajv/dist/runtime/validation_error").default`}));const c=s.scopeName("validate");e.validateName=c;const d={gen:s,allErrors:this.opts.allErrors,data:Bu.default.data,parentData:Bu.default.parentData,parentDataProperty:Bu.default.parentDataProperty,dataNames:[Bu.default.data],dataPathArr:[ga.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:s.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,ga.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:u,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:ga.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ga._)`""`,opts:this.opts,self:this};let h;try{this._compilations.add(e),(0,P9.validateFunctionCode)(d),s.optimize(this.opts.code.optimize);const v=s.toString();h=`${s.scopeRefs(Bu.default.scope)}return ${v}`,this.opts.code.process&&(h=this.opts.code.process(h,e));const g=new Function(`${Bu.default.self}`,`${Bu.default.scope}`,h)(this,this.scope.get());if(this.scope.value(c,{ref:g}),g.errors=null,g.schema=e.schema,g.schemaEnv=e,e.$async&&(g.$async=!0),this.opts.code.source===!0&&(g.source={validateName:c,validateCode:v,scopeValues:s._values}),this.opts.unevaluated){const{props:w,items:x}=d;g.evaluated={props:w instanceof ga.Name?void 0:w,items:x instanceof ga.Name?void 0:x,dynamicProps:w instanceof ga.Name,dynamicItems:x instanceof ga.Name},g.source&&(g.source.evaluated=(0,ga.stringify)(g.evaluated))}return e.validate=g,e}catch(v){throw delete e.validate,delete e.validateName,h&&this.logger.error("Error compiling schema, function code:",h),v}finally{this._compilations.delete(e)}}Zr.compileSchema=O1;function k9(e,t,n){var r;n=(0,Ea.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let a=O9.call(this,e,n);if(a===void 0){const s=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:u}=this.opts;s&&(a=new Ag({schema:s,schemaId:u,root:e,baseId:t}))}if(a!==void 0)return e.refs[n]=C9.call(this,a)}Zr.resolveRef=k9;function C9(e){return(0,Ea.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:O1.call(this,e)}function YN(e){for(const t of this._compilations)if(D9(t,e))return t}Zr.getCompilingSchema=YN;function D9(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function O9(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||jg.call(this,e,t)}function jg(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Ea._getFullPath)(this.opts.uriResolver,n);let i=(0,Ea.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return q0.call(this,n,e);const a=(0,Ea.normalizeId)(r),s=this.refs[a]||this.schemas[a];if(typeof s=="string"){const u=jg.call(this,e,s);return typeof(u==null?void 0:u.schema)!="object"?void 0:q0.call(this,n,u)}if(typeof(s==null?void 0:s.schema)=="object"){if(s.validate||O1.call(this,s),a===(0,Ea.normalizeId)(t)){const{schema:u}=s,{schemaId:c}=this.opts,d=u[c];return d&&(i=(0,Ea.resolveUrl)(this.opts.uriResolver,i,d)),new Ag({schema:u,schemaId:c,root:e,baseId:i})}return q0.call(this,n,s)}}Zr.resolveSchema=jg;const $9=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function q0(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const u of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const c=n[(0,xk.unescapeFragment)(u)];if(c===void 0)return;n=c;const d=typeof n=="object"&&n[this.opts.schemaId];!$9.has(u)&&d&&(t=(0,Ea.resolveUrl)(this.opts.uriResolver,t,d))}let a;if(typeof n!="boolean"&&n.$ref&&!(0,xk.schemaHasRulesButRef)(n,this.RULES)){const u=(0,Ea.resolveUrl)(this.opts.uriResolver,t,n.$ref);a=jg.call(this,r,u)}const{schemaId:s}=this.opts;if(a=a||new Ag({schema:n,schemaId:s,root:r,baseId:t}),a.schema!==a.root.schema)return a}const R9="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",N9="Meta-schema for $data reference (JSON AnySchema extension proposal)",T9="object",M9=["$data"],I9={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},A9=!1,j9={$id:R9,description:N9,type:T9,required:M9,properties:I9,additionalProperties:A9};var $1={},Lg={exports:{}};const L9=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),VN=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function R1(e){let t="",n=0,r=0;for(r=0;r<e.length;r++)if(n=e[r].charCodeAt(0),n!==48){if(!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r];break}for(r+=1;r<e.length;r++){if(n=e[r].charCodeAt(0),!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r]}return t}const z9=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function Ek(e){return e.length=0,!0}function F9(e,t,n){if(e.length){const r=R1(e);if(r!=="")t.push(r);else return n.error=!0,!1;e.length=0}return!0}function B9(e){let t=0;const n={error:!1,address:"",zone:""},r=[],i=[];let a=!1,s=!1,u=F9;for(let c=0;c<e.length;c++){const d=e[c];if(!(d==="["||d==="]"))if(d===":"){if(a===!0&&(s=!0),!u(i,r,n))break;if(++t>7){n.error=!0;break}c>0&&e[c-1]===":"&&(a=!0),r.push(":");continue}else if(d==="%"){if(!u(i,r,n))break;u=Ek}else{i.push(d);continue}}return i.length&&(u===Ek?n.zone=i.join(""):s?r.push(i.join("")):r.push(R1(i))),n.address=r.join(""),n}function XN(e){if(W9(e,":")<2)return{host:e,isIPV6:!1};const t=B9(e);if(t.error)return{host:e,isIPV6:!1};{let n=t.address,r=t.address;return t.zone&&(n+="%"+t.zone,r+="%25"+t.zone),{host:n,isIPV6:!0,escapedHost:r}}}function W9(e,t){let n=0;for(let r=0;r<e.length;r++)e[r]===t&&n++;return n}function U9(e){let t=e;const n=[];let r=-1,i=0;for(;i=t.length;){if(i===1){if(t===".")break;if(t==="/"){n.push("/");break}else{n.push(t);break}}else if(i===2){if(t[0]==="."){if(t[1]===".")break;if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&(t[1]==="."||t[1]==="/")){n.push("/");break}}else if(i===3&&t==="/.."){n.length!==0&&n.pop(),n.push("/");break}if(t[0]==="."){if(t[1]==="."){if(t[2]==="/"){t=t.slice(3);continue}}else if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&t[1]==="."){if(t[2]==="/"){t=t.slice(2);continue}else if(t[2]==="."&&t[3]==="/"){t=t.slice(3),n.length!==0&&n.pop();continue}}if((r=t.indexOf("/",1))===-1){n.push(t);break}else n.push(t.slice(0,r)),t=t.slice(r)}return n.join("")}function H9(e,t){const n=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=n(e.scheme)),e.userinfo!==void 0&&(e.userinfo=n(e.userinfo)),e.host!==void 0&&(e.host=n(e.host)),e.path!==void 0&&(e.path=n(e.path)),e.query!==void 0&&(e.query=n(e.query)),e.fragment!==void 0&&(e.fragment=n(e.fragment)),e}function K9(e){const t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let n=unescape(e.host);if(!VN(n)){const r=XN(n);r.isIPV6===!0?n=`[${r.escapedHost}]`:n=e.host}t.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}var QN={nonSimpleDomain:z9,recomposeAuthority:K9,normalizeComponentEncoding:H9,removeDotSegments:U9,isIPv4:VN,isUUID:L9,normalizeIPv6:XN,stringArrayToHexStripped:R1};const{isUUID:q9}=QN,Y9=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,V9=["http","https","ws","wss","urn","urn:uuid"];function X9(e){return V9.indexOf(e)!==-1}function N1(e){return e.secure===!0?!0:e.secure===!1?!1:e.scheme?e.scheme.length===3&&(e.scheme[0]==="w"||e.scheme[0]==="W")&&(e.scheme[1]==="s"||e.scheme[1]==="S")&&(e.scheme[2]==="s"||e.scheme[2]==="S"):!1}function GN(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function JN(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function Q9(e){return e.secure=N1(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function G9(e){if((e.port===(N1(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,n]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=n,e.resourceName=void 0}return e.fragment=void 0,e}function J9(e,t){if(!e.path)return e.error="URN can not be parsed",e;const n=e.path.match(Y9);if(n){const r=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];const i=`${r}:${t.nid||e.nid}`,a=T1(i);e.path=void 0,a&&(e=a.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function Z9(e,t){if(e.nid===void 0)throw new Error("URN without nid cannot be serialized");const n=t.scheme||e.scheme||"urn",r=e.nid.toLowerCase(),i=`${n}:${t.nid||r}`,a=T1(i);a&&(e=a.serialize(e,t));const s=e,u=e.nss;return s.path=`${r||t.nid}:${u}`,t.skipEscape=!0,s}function eq(e,t){const n=e;return n.uuid=n.nss,n.nss=void 0,!t.tolerant&&(!n.uuid||!q9(n.uuid))&&(n.error=n.error||"UUID is not valid."),n}function tq(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const ZN={scheme:"http",domainHost:!0,parse:GN,serialize:JN},nq={scheme:"https",domainHost:ZN.domainHost,parse:GN,serialize:JN},rv={scheme:"ws",domainHost:!0,parse:Q9,serialize:G9},rq={scheme:"wss",domainHost:rv.domainHost,parse:rv.parse,serialize:rv.serialize},iq={scheme:"urn",parse:J9,serialize:Z9,skipNormalize:!0},aq={scheme:"urn:uuid",parse:eq,serialize:tq,skipNormalize:!0},Yv={http:ZN,https:nq,ws:rv,wss:rq,urn:iq,"urn:uuid":aq};Object.setPrototypeOf(Yv,null);function T1(e){return e&&(Yv[e]||Yv[e.toLowerCase()])||void 0}var oq={wsIsSecure:N1,SCHEMES:Yv,isValidSchemeName:X9,getSchemeHandler:T1};const{normalizeIPv6:sq,removeDotSegments:Sd,recomposeAuthority:uq,normalizeComponentEncoding:bm,isIPv4:lq,nonSimpleDomain:cq}=QN,{SCHEMES:fq,getSchemeHandler:eT}=oq;function dq(e,t){return typeof e=="string"?e=Za(Vo(e,t),t):typeof e=="object"&&(e=Vo(Za(e,t),t)),e}function hq(e,t,n){const r=n?Object.assign({scheme:"null"},n):{scheme:"null"},i=tT(Vo(e,r),Vo(t,r),r,!0);return r.skipEscape=!0,Za(i,r)}function tT(e,t,n,r){const i={};return r||(e=Vo(Za(e,n),n),t=Vo(Za(t,n),n)),n=n||{},!n.tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=Sd(t.path||""),i.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=Sd(t.path||""),i.query=t.query):(t.path?(t.path[0]==="/"?i.path=Sd(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?i.path="/"+t.path:e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path,i.path=Sd(i.path)),i.query=t.query):(i.path=e.path,t.query!==void 0?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function pq(e,t,n){return typeof e=="string"?(e=unescape(e),e=Za(bm(Vo(e,n),!0),{...n,skipEscape:!0})):typeof e=="object"&&(e=Za(bm(e,!0),{...n,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Za(bm(Vo(t,n),!0),{...n,skipEscape:!0})):typeof t=="object"&&(t=Za(bm(t,!0),{...n,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Za(e,t){const n={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},r=Object.assign({},t),i=[],a=eT(r.scheme||n.scheme);a&&a.serialize&&a.serialize(n,r),n.path!==void 0&&(r.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),n.scheme!==void 0&&(n.path=n.path.split("%3A").join(":")))),r.reference!=="suffix"&&n.scheme&&i.push(n.scheme,":");const s=uq(n);if(s!==void 0&&(r.reference!=="suffix"&&i.push("//"),i.push(s),n.path&&n.path[0]!=="/"&&i.push("/")),n.path!==void 0){let u=n.path;!r.absolutePath&&(!a||!a.absolutePath)&&(u=Sd(u)),s===void 0&&u[0]==="/"&&u[1]==="/"&&(u="/%2F"+u.slice(2)),i.push(u)}return n.query!==void 0&&i.push("?",n.query),n.fragment!==void 0&&i.push("#",n.fragment),i.join("")}const mq=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Vo(e,t){const n=Object.assign({},t),r={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let i=!1;n.reference==="suffix"&&(n.scheme?e=n.scheme+":"+e:e="//"+e);const a=e.match(mq);if(a){if(r.scheme=a[1],r.userinfo=a[3],r.host=a[4],r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=a[7],r.fragment=a[8],isNaN(r.port)&&(r.port=a[5]),r.host)if(lq(r.host)===!1){const c=sq(r.host);r.host=c.host.toLowerCase(),i=c.isIPV6}else i=!0;r.scheme===void 0&&r.userinfo===void 0&&r.host===void 0&&r.port===void 0&&r.query===void 0&&!r.path?r.reference="same-document":r.scheme===void 0?r.reference="relative":r.fragment===void 0?r.reference="absolute":r.reference="uri",n.reference&&n.reference!=="suffix"&&n.reference!==r.reference&&(r.error=r.error||"URI is not a "+n.reference+" reference.");const s=eT(n.scheme||r.scheme);if(!n.unicodeSupport&&(!s||!s.unicodeSupport)&&r.host&&(n.domainHost||s&&s.domainHost)&&i===!1&&cq(r.host))try{r.host=URL.domainToASCII(r.host.toLowerCase())}catch(u){r.error=r.error||"Host's domain name can not be converted to ASCII: "+u}(!s||s&&!s.skipNormalize)&&(e.indexOf("%")!==-1&&(r.scheme!==void 0&&(r.scheme=unescape(r.scheme)),r.host!==void 0&&(r.host=unescape(r.host))),r.path&&(r.path=escape(unescape(r.path))),r.fragment&&(r.fragment=encodeURI(decodeURIComponent(r.fragment)))),s&&s.parse&&s.parse(r,n)}else r.error=r.error||"URI can not be parsed.";return r}const M1={SCHEMES:fq,normalize:dq,resolve:hq,resolveComponent:tT,equal:pq,serialize:Za,parse:Vo};Lg.exports=M1;Lg.exports.default=M1;Lg.exports.fastUri=M1;var vq=Lg.exports;Object.defineProperty($1,"__esModule",{value:!0});const nT=vq;nT.code='require("ajv/dist/runtime/uri").default';$1.default=nT;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Da;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=ut;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Gh,i=mf,a=yl,s=Zr,u=ut,c=ir,d=In,h=je,v=j9,y=$1,g=(G,F)=>new RegExp(G,F);g.code="new RegExp";const w=["removeAdditional","useDefaults","coerceTypes"],x=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),C={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},S={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},E=200;function P(G){var F,te,X,A,H,ae,ge,Oe,ve,Ne,Ge,He,an,Et,At,dn,on,sr,Yn,sn,_t,Vn,Xn,ra,Qn;const Gn=G.strict,Sn=(F=G.code)===null||F===void 0?void 0:F.optimize,un=Sn===!0||Sn===void 0?1:Sn||0,ur=(X=(te=G.code)===null||te===void 0?void 0:te.regExp)!==null&&X!==void 0?X:g,si=(A=G.uriResolver)!==null&&A!==void 0?A:y.default;return{strictSchema:(ae=(H=G.strictSchema)!==null&&H!==void 0?H:Gn)!==null&&ae!==void 0?ae:!0,strictNumbers:(Oe=(ge=G.strictNumbers)!==null&&ge!==void 0?ge:Gn)!==null&&Oe!==void 0?Oe:!0,strictTypes:(Ne=(ve=G.strictTypes)!==null&&ve!==void 0?ve:Gn)!==null&&Ne!==void 0?Ne:"log",strictTuples:(He=(Ge=G.strictTuples)!==null&&Ge!==void 0?Ge:Gn)!==null&&He!==void 0?He:"log",strictRequired:(Et=(an=G.strictRequired)!==null&&an!==void 0?an:Gn)!==null&&Et!==void 0?Et:!1,code:G.code?{...G.code,optimize:un,regExp:ur}:{optimize:un,regExp:ur},loopRequired:(At=G.loopRequired)!==null&&At!==void 0?At:E,loopEnum:(dn=G.loopEnum)!==null&&dn!==void 0?dn:E,meta:(on=G.meta)!==null&&on!==void 0?on:!0,messages:(sr=G.messages)!==null&&sr!==void 0?sr:!0,inlineRefs:(Yn=G.inlineRefs)!==null&&Yn!==void 0?Yn:!0,schemaId:(sn=G.schemaId)!==null&&sn!==void 0?sn:"$id",addUsedSchema:(_t=G.addUsedSchema)!==null&&_t!==void 0?_t:!0,validateSchema:(Vn=G.validateSchema)!==null&&Vn!==void 0?Vn:!0,validateFormats:(Xn=G.validateFormats)!==null&&Xn!==void 0?Xn:!0,unicodeRegExp:(ra=G.unicodeRegExp)!==null&&ra!==void 0?ra:!0,int32range:(Qn=G.int32range)!==null&&Qn!==void 0?Qn:!0,uriResolver:si}}class N{constructor(F={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,F=this.opts={...F,...P(F)};const{es5:te,lines:X}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:x,es5:te,lines:X}),this.logger=fe(F.logger);const A=F.validateFormats;F.validateFormats=!1,this.RULES=(0,a.getRules)(),T.call(this,C,F,"NOT SUPPORTED"),T.call(this,S,F,"DEPRECATED","warn"),this._metaOpts=he.call(this),F.formats&&re.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),F.keywords&&pe.call(this,F.keywords),typeof F.meta=="object"&&this.addMetaSchema(F.meta),W.call(this),F.validateFormats=A}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:F,meta:te,schemaId:X}=this.opts;let A=v;X==="id"&&(A={...v},A.id=A.$id,delete A.$id),te&&F&&this.addMetaSchema(A,A[X],!1)}defaultMeta(){const{meta:F,schemaId:te}=this.opts;return this.opts.defaultMeta=typeof F=="object"?F[te]||F:void 0}validate(F,te){let X;if(typeof F=="string"){if(X=this.getSchema(F),!X)throw new Error(`no schema with key or ref "${F}"`)}else X=this.compile(F);const A=X(te);return"$async"in X||(this.errors=X.errors),A}compile(F,te){const X=this._addSchema(F,te);return X.validate||this._compileSchemaEnv(X)}compileAsync(F,te){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:X}=this.opts;return A.call(this,F,te);async function A(Ne,Ge){await H.call(this,Ne.$schema);const He=this._addSchema(Ne,Ge);return He.validate||ae.call(this,He)}async function H(Ne){Ne&&!this.getSchema(Ne)&&await A.call(this,{$ref:Ne},!0)}async function ae(Ne){try{return this._compileSchemaEnv(Ne)}catch(Ge){if(!(Ge instanceof i.default))throw Ge;return ge.call(this,Ge),await Oe.call(this,Ge.missingSchema),ae.call(this,Ne)}}function ge({missingSchema:Ne,missingRef:Ge}){if(this.refs[Ne])throw new Error(`AnySchema ${Ne} is loaded but ${Ge} cannot be resolved`)}async function Oe(Ne){const Ge=await ve.call(this,Ne);this.refs[Ne]||await H.call(this,Ge.$schema),this.refs[Ne]||this.addSchema(Ge,Ne,te)}async function ve(Ne){const Ge=this._loading[Ne];if(Ge)return Ge;try{return await(this._loading[Ne]=X(Ne))}finally{delete this._loading[Ne]}}}addSchema(F,te,X,A=this.opts.validateSchema){if(Array.isArray(F)){for(const ae of F)this.addSchema(ae,void 0,X,A);return this}let H;if(typeof F=="object"){const{schemaId:ae}=this.opts;if(H=F[ae],H!==void 0&&typeof H!="string")throw new Error(`schema ${ae} must be string`)}return te=(0,c.normalizeId)(te||H),this._checkUnique(te),this.schemas[te]=this._addSchema(F,X,te,A,!0),this}addMetaSchema(F,te,X=this.opts.validateSchema){return this.addSchema(F,te,!0,X),this}validateSchema(F,te){if(typeof F=="boolean")return!0;let X;if(X=F.$schema,X!==void 0&&typeof X!="string")throw new Error("$schema must be a string");if(X=X||this.opts.defaultMeta||this.defaultMeta(),!X)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const A=this.validate(X,F);if(!A&&te){const H="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(H);else throw new Error(H)}return A}getSchema(F){let te;for(;typeof(te=U.call(this,F))=="string";)F=te;if(te===void 0){const{schemaId:X}=this.opts,A=new s.SchemaEnv({schema:{},schemaId:X});if(te=s.resolveSchema.call(this,A,F),!te)return;this.refs[F]=te}return te.validate||this._compileSchemaEnv(te)}removeSchema(F){if(F instanceof RegExp)return this._removeAllSchemas(this.schemas,F),this._removeAllSchemas(this.refs,F),this;switch(typeof F){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const te=U.call(this,F);return typeof te=="object"&&this._cache.delete(te.schema),delete this.schemas[F],delete this.refs[F],this}case"object":{const te=F;this._cache.delete(te);let X=F[this.opts.schemaId];return X&&(X=(0,c.normalizeId)(X),delete this.schemas[X],delete this.refs[X]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(F){for(const te of F)this.addKeyword(te);return this}addKeyword(F,te){let X;if(typeof F=="string")X=F,typeof te=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),te.keyword=X);else if(typeof F=="object"&&te===void 0){if(te=F,X=te.keyword,Array.isArray(X)&&!X.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Ce.call(this,X,te),!te)return(0,h.eachItem)(X,H=>Le.call(this,H)),this;We.call(this,te);const A={...te,type:(0,d.getJSONTypes)(te.type),schemaType:(0,d.getJSONTypes)(te.schemaType)};return(0,h.eachItem)(X,A.type.length===0?H=>Le.call(this,H,A):H=>A.type.forEach(ae=>Le.call(this,H,A,ae))),this}getKeyword(F){const te=this.RULES.all[F];return typeof te=="object"?te.definition:!!te}removeKeyword(F){const{RULES:te}=this;delete te.keywords[F],delete te.all[F];for(const X of te.rules){const A=X.rules.findIndex(H=>H.keyword===F);A>=0&&X.rules.splice(A,1)}return this}addFormat(F,te){return typeof te=="string"&&(te=new RegExp(te)),this.formats[F]=te,this}errorsText(F=this.errors,{separator:te=", ",dataVar:X="data"}={}){return!F||F.length===0?"No errors":F.map(A=>`${X}${A.instancePath} ${A.message}`).reduce((A,H)=>A+te+H)}$dataMetaSchema(F,te){const X=this.RULES.all;F=JSON.parse(JSON.stringify(F));for(const A of te){const H=A.split("/").slice(1);let ae=F;for(const ge of H)ae=ae[ge];for(const ge in X){const Oe=X[ge];if(typeof Oe!="object")continue;const{$data:ve}=Oe.definition,Ne=ae[ge];ve&&Ne&&(ae[ge]=_e(Ne))}}return F}_removeAllSchemas(F,te){for(const X in F){const A=F[X];(!te||te.test(X))&&(typeof A=="string"?delete F[X]:A&&!A.meta&&(this._cache.delete(A.schema),delete F[X]))}}_addSchema(F,te,X,A=this.opts.validateSchema,H=this.opts.addUsedSchema){let ae;const{schemaId:ge}=this.opts;if(typeof F=="object")ae=F[ge];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof F!="boolean")throw new Error("schema must be object or boolean")}let Oe=this._cache.get(F);if(Oe!==void 0)return Oe;X=(0,c.normalizeId)(ae||X);const ve=c.getSchemaRefs.call(this,F,X);return Oe=new s.SchemaEnv({schema:F,schemaId:ge,meta:te,baseId:X,localRefs:ve}),this._cache.set(Oe.schema,Oe),H&&!X.startsWith("#")&&(X&&this._checkUnique(X),this.refs[X]=Oe),A&&this.validateSchema(F,!0),Oe}_checkUnique(F){if(this.schemas[F]||this.refs[F])throw new Error(`schema with key or id "${F}" already exists`)}_compileSchemaEnv(F){if(F.meta?this._compileMetaSchema(F):s.compileSchema.call(this,F),!F.validate)throw new Error("ajv implementation error");return F.validate}_compileMetaSchema(F){const te=this.opts;this.opts=this._metaOpts;try{s.compileSchema.call(this,F)}finally{this.opts=te}}}N.ValidationError=r.default,N.MissingRefError=i.default,e.default=N;function T(G,F,te,X="error"){for(const A in G){const H=A;H in F&&this.logger[X](`${te}: option ${A}. ${G[H]}`)}}function U(G){return G=(0,c.normalizeId)(G),this.schemas[G]||this.refs[G]}function W(){const G=this.opts.schemas;if(G)if(Array.isArray(G))this.addSchema(G);else for(const F in G)this.addSchema(G[F],F)}function re(){for(const G in this.opts.formats){const F=this.opts.formats[G];F&&this.addFormat(G,F)}}function pe(G){if(Array.isArray(G)){this.addVocabulary(G);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const F in G){const te=G[F];te.keyword||(te.keyword=F),this.addKeyword(te)}}function he(){const G={...this.opts};for(const F of w)delete G[F];return G}const ce={log(){},warn(){},error(){}};function fe(G){if(G===!1)return ce;if(G===void 0)return console;if(G.log&&G.warn&&G.error)return G;throw new Error("logger must implement log, warn and error methods")}const xe=/^[a-z_$][a-z0-9_$:-]*$/i;function Ce(G,F){const{RULES:te}=this;if((0,h.eachItem)(G,X=>{if(te.keywords[X])throw new Error(`Keyword ${X} is already defined`);if(!xe.test(X))throw new Error(`Keyword ${X} has invalid name`)}),!!F&&F.$data&&!("code"in F||"validate"in F))throw new Error('$data keyword must have "code" or "validate" function')}function Le(G,F,te){var X;const A=F==null?void 0:F.post;if(te&&A)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:H}=this;let ae=A?H.post:H.rules.find(({type:Oe})=>Oe===te);if(ae||(ae={type:te,rules:[]},H.rules.push(ae)),H.keywords[G]=!0,!F)return;const ge={keyword:G,definition:{...F,type:(0,d.getJSONTypes)(F.type),schemaType:(0,d.getJSONTypes)(F.schemaType)}};F.before?qe.call(this,ae,ge,F.before):ae.rules.push(ge),H.all[G]=ge,(X=F.implements)===null||X===void 0||X.forEach(Oe=>this.addKeyword(Oe))}function qe(G,F,te){const X=G.rules.findIndex(A=>A.keyword===te);X>=0?G.rules.splice(X,0,F):(G.rules.push(F),this.logger.warn(`rule ${te} is not defined`))}function We(G){let{metaSchema:F}=G;F!==void 0&&(G.$data&&this.opts.$data&&(F=_e(F)),G.validateSchema=this.compile(F,!0))}const oe={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function _e(G){return{anyOf:[G,oe]}}})(mN);var I1={},A1={},j1={};Object.defineProperty(j1,"__esModule",{value:!0});const gq={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};j1.default=gq;var wl={};Object.defineProperty(wl,"__esModule",{value:!0});wl.callRef=wl.getValidate=void 0;const yq=mf,Pk=ft,Gr=ut,ec=oo,kk=Zr,Sm=je,wq={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:a,validateName:s,opts:u,self:c}=r,{root:d}=a;if((n==="#"||n==="#/")&&i===d.baseId)return v();const h=kk.resolveRef.call(c,d,i,n);if(h===void 0)throw new yq.default(r.opts.uriResolver,i,n);if(h instanceof kk.SchemaEnv)return y(h);return g(h);function v(){if(a===d)return iv(e,s,a,a.$async);const w=t.scopeValue("root",{ref:d});return iv(e,(0,Gr._)`${w}.validate`,d,d.$async)}function y(w){const x=rT(e,w);iv(e,x,w,w.$async)}function g(w){const x=t.scopeValue("schema",u.code.source===!0?{ref:w,code:(0,Gr.stringify)(w)}:{ref:w}),C=t.name("valid"),S=e.subschema({schema:w,dataTypes:[],schemaPath:Gr.nil,topSchemaRef:x,errSchemaPath:n},C);e.mergeEvaluated(S),e.ok(C)}}};function rT(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Gr._)`${n.scopeValue("wrapper",{ref:t})}.validate`}wl.getValidate=rT;function iv(e,t,n,r){const{gen:i,it:a}=e,{allErrors:s,schemaEnv:u,opts:c}=a,d=c.passContext?ec.default.this:Gr.nil;r?h():v();function h(){if(!u.$async)throw new Error("async schema referenced by sync schema");const w=i.let("valid");i.try(()=>{i.code((0,Gr._)`await ${(0,Pk.callValidateCode)(e,t,d)}`),g(t),s||i.assign(w,!0)},x=>{i.if((0,Gr._)`!(${x} instanceof ${a.ValidationError})`,()=>i.throw(x)),y(x),s||i.assign(w,!1)}),e.ok(w)}function v(){e.result((0,Pk.callValidateCode)(e,t,d),()=>g(t),()=>y(t))}function y(w){const x=(0,Gr._)`${w}.errors`;i.assign(ec.default.vErrors,(0,Gr._)`${ec.default.vErrors} === null ? ${x} : ${ec.default.vErrors}.concat(${x})`),i.assign(ec.default.errors,(0,Gr._)`${ec.default.vErrors}.length`)}function g(w){var x;if(!a.opts.unevaluated)return;const C=(x=n==null?void 0:n.validate)===null||x===void 0?void 0:x.evaluated;if(a.props!==!0)if(C&&!C.dynamicProps)C.props!==void 0&&(a.props=Sm.mergeEvaluated.props(i,C.props,a.props));else{const S=i.var("props",(0,Gr._)`${w}.evaluated.props`);a.props=Sm.mergeEvaluated.props(i,S,a.props,Gr.Name)}if(a.items!==!0)if(C&&!C.dynamicItems)C.items!==void 0&&(a.items=Sm.mergeEvaluated.items(i,C.items,a.items));else{const S=i.var("items",(0,Gr._)`${w}.evaluated.items`);a.items=Sm.mergeEvaluated.items(i,S,a.items,Gr.Name)}}}wl.callRef=iv;wl.default=wq;Object.defineProperty(A1,"__esModule",{value:!0});const _q=j1,bq=wl,Sq=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",_q.default,bq.default];A1.default=Sq;var L1={},z1={};Object.defineProperty(z1,"__esModule",{value:!0});const Vv=ut,gs=Vv.operators,Xv={maximum:{okStr:"<=",ok:gs.LTE,fail:gs.GT},minimum:{okStr:">=",ok:gs.GTE,fail:gs.LT},exclusiveMaximum:{okStr:"<",ok:gs.LT,fail:gs.GTE},exclusiveMinimum:{okStr:">",ok:gs.GT,fail:gs.LTE}},xq={message:({keyword:e,schemaCode:t})=>(0,Vv.str)`must be ${Xv[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Vv._)`{comparison: ${Xv[e].okStr}, limit: ${t}}`},Eq={keyword:Object.keys(Xv),type:"number",schemaType:"number",$data:!0,error:xq,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,Vv._)`${n} ${Xv[t].fail} ${r} || isNaN(${n})`)}};z1.default=Eq;var F1={};Object.defineProperty(F1,"__esModule",{value:!0});const Ad=ut,Pq={message:({schemaCode:e})=>(0,Ad.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Ad._)`{multipleOf: ${e}}`},kq={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Pq,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,a=i.opts.multipleOfPrecision,s=t.let("res"),u=a?(0,Ad._)`Math.abs(Math.round(${s}) - ${s}) > 1e-${a}`:(0,Ad._)`${s} !== parseInt(${s})`;e.fail$data((0,Ad._)`(${r} === 0 || (${s} = ${n}/${r}, ${u}))`)}};F1.default=kq;var B1={},W1={};Object.defineProperty(W1,"__esModule",{value:!0});function iT(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}W1.default=iT;iT.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(B1,"__esModule",{value:!0});const Vu=ut,Cq=je,Dq=W1,Oq={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Vu.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Vu._)`{limit: ${e}}`},$q={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Oq,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,a=t==="maxLength"?Vu.operators.GT:Vu.operators.LT,s=i.opts.unicode===!1?(0,Vu._)`${n}.length`:(0,Vu._)`${(0,Cq.useFunc)(e.gen,Dq.default)}(${n})`;e.fail$data((0,Vu._)`${s} ${a} ${r}`)}};B1.default=$q;var U1={};Object.defineProperty(U1,"__esModule",{value:!0});const Rq=ft,Qv=ut,Nq={message:({schemaCode:e})=>(0,Qv.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,Qv._)`{pattern: ${e}}`},Tq={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Nq,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:a}=e,s=a.opts.unicodeRegExp?"u":"",u=n?(0,Qv._)`(new RegExp(${i}, ${s}))`:(0,Rq.usePattern)(e,r);e.fail$data((0,Qv._)`!${u}.test(${t})`)}};U1.default=Tq;var H1={};Object.defineProperty(H1,"__esModule",{value:!0});const jd=ut,Mq={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,jd.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,jd._)`{limit: ${e}}`},Iq={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Mq,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?jd.operators.GT:jd.operators.LT;e.fail$data((0,jd._)`Object.keys(${n}).length ${i} ${r}`)}};H1.default=Iq;var K1={};Object.defineProperty(K1,"__esModule",{value:!0});const fd=ft,Ld=ut,Aq=je,jq={message:({params:{missingProperty:e}})=>(0,Ld.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Ld._)`{missingProperty: ${e}}`},Lq={keyword:"required",type:"object",schemaType:"array",$data:!0,error:jq,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:a,it:s}=e,{opts:u}=s;if(!a&&n.length===0)return;const c=n.length>=u.loopRequired;if(s.allErrors?d():h(),u.strictRequired){const g=e.parentSchema.properties,{definedProperties:w}=e.it;for(const x of n)if((g==null?void 0:g[x])===void 0&&!w.has(x)){const C=s.schemaEnv.baseId+s.errSchemaPath,S=`required property "${x}" is not defined at "${C}" (strictRequired)`;(0,Aq.checkStrictMode)(s,S,s.opts.strictRequired)}}function d(){if(c||a)e.block$data(Ld.nil,v);else for(const g of n)(0,fd.checkReportMissingProp)(e,g)}function h(){const g=t.let("missing");if(c||a){const w=t.let("valid",!0);e.block$data(w,()=>y(g,w)),e.ok(w)}else t.if((0,fd.checkMissingProp)(e,n,g)),(0,fd.reportMissingProp)(e,g),t.else()}function v(){t.forOf("prop",r,g=>{e.setParams({missingProperty:g}),t.if((0,fd.noPropertyInData)(t,i,g,u.ownProperties),()=>e.error())})}function y(g,w){e.setParams({missingProperty:g}),t.forOf(g,r,()=>{t.assign(w,(0,fd.propertyInData)(t,i,g,u.ownProperties)),t.if((0,Ld.not)(w),()=>{e.error(),t.break()})},Ld.nil)}}};K1.default=Lq;var q1={};Object.defineProperty(q1,"__esModule",{value:!0});const zd=ut,zq={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,zd.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,zd._)`{limit: ${e}}`},Fq={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:zq,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?zd.operators.GT:zd.operators.LT;e.fail$data((0,zd._)`${n}.length ${i} ${r}`)}};q1.default=Fq;var Y1={},Jh={};Object.defineProperty(Jh,"__esModule",{value:!0});const aT=RN;aT.code='require("ajv/dist/runtime/equal").default';Jh.default=aT;Object.defineProperty(Y1,"__esModule",{value:!0});const Y0=In,nr=ut,Bq=je,Wq=Jh,Uq={message:({params:{i:e,j:t}})=>(0,nr.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,nr._)`{i: ${e}, j: ${t}}`},Hq={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Uq,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:a,schemaCode:s,it:u}=e;if(!r&&!i)return;const c=t.let("valid"),d=a.items?(0,Y0.getSchemaTypes)(a.items):[];e.block$data(c,h,(0,nr._)`${s} === false`),e.ok(c);function h(){const w=t.let("i",(0,nr._)`${n}.length`),x=t.let("j");e.setParams({i:w,j:x}),t.assign(c,!0),t.if((0,nr._)`${w} > 1`,()=>(v()?y:g)(w,x))}function v(){return d.length>0&&!d.some(w=>w==="object"||w==="array")}function y(w,x){const C=t.name("item"),S=(0,Y0.checkDataTypes)(d,C,u.opts.strictNumbers,Y0.DataType.Wrong),E=t.const("indices",(0,nr._)`{}`);t.for((0,nr._)`;${w}--;`,()=>{t.let(C,(0,nr._)`${n}[${w}]`),t.if(S,(0,nr._)`continue`),d.length>1&&t.if((0,nr._)`typeof ${C} == "string"`,(0,nr._)`${C} += "_"`),t.if((0,nr._)`typeof ${E}[${C}] == "number"`,()=>{t.assign(x,(0,nr._)`${E}[${C}]`),e.error(),t.assign(c,!1).break()}).code((0,nr._)`${E}[${C}] = ${w}`)})}function g(w,x){const C=(0,Bq.useFunc)(t,Wq.default),S=t.name("outer");t.label(S).for((0,nr._)`;${w}--;`,()=>t.for((0,nr._)`${x} = ${w}; ${x}--;`,()=>t.if((0,nr._)`${C}(${n}[${w}], ${n}[${x}])`,()=>{e.error(),t.assign(c,!1).break(S)})))}}};Y1.default=Hq;var V1={};Object.defineProperty(V1,"__esModule",{value:!0});const M_=ut,Kq=je,qq=Jh,Yq={message:"must be equal to constant",params:({schemaCode:e})=>(0,M_._)`{allowedValue: ${e}}`},Vq={keyword:"const",$data:!0,error:Yq,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:a}=e;r||a&&typeof a=="object"?e.fail$data((0,M_._)`!${(0,Kq.useFunc)(t,qq.default)}(${n}, ${i})`):e.fail((0,M_._)`${a} !== ${n}`)}};V1.default=Vq;var X1={};Object.defineProperty(X1,"__esModule",{value:!0});const xd=ut,Xq=je,Qq=Jh,Gq={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,xd._)`{allowedValues: ${e}}`},Jq={keyword:"enum",schemaType:"array",$data:!0,error:Gq,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:a,it:s}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const u=i.length>=s.opts.loopEnum;let c;const d=()=>c??(c=(0,Xq.useFunc)(t,Qq.default));let h;if(u||r)h=t.let("valid"),e.block$data(h,v);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const g=t.const("vSchema",a);h=(0,xd.or)(...i.map((w,x)=>y(g,x)))}e.pass(h);function v(){t.assign(h,!1),t.forOf("v",a,g=>t.if((0,xd._)`${d()}(${n}, ${g})`,()=>t.assign(h,!0).break()))}function y(g,w){const x=i[w];return typeof x=="object"&&x!==null?(0,xd._)`${d()}(${n}, ${g}[${w}])`:(0,xd._)`${n} === ${x}`}}};X1.default=Jq;Object.defineProperty(L1,"__esModule",{value:!0});const Zq=z1,e8=F1,t8=B1,n8=U1,r8=H1,i8=K1,a8=q1,o8=Y1,s8=V1,u8=X1,l8=[Zq.default,e8.default,t8.default,n8.default,r8.default,i8.default,a8.default,o8.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},s8.default,u8.default];L1.default=l8;var Q1={},vf={};Object.defineProperty(vf,"__esModule",{value:!0});vf.validateAdditionalItems=void 0;const Xu=ut,I_=je,c8={message:({params:{len:e}})=>(0,Xu.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Xu._)`{limit: ${e}}`},f8={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:c8,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,I_.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}oT(e,r)}};function oT(e,t){const{gen:n,schema:r,data:i,keyword:a,it:s}=e;s.items=!0;const u=n.const("len",(0,Xu._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Xu._)`${u} <= ${t.length}`);else if(typeof r=="object"&&!(0,I_.alwaysValidSchema)(s,r)){const d=n.var("valid",(0,Xu._)`${u} <= ${t.length}`);n.if((0,Xu.not)(d),()=>c(d)),e.ok(d)}function c(d){n.forRange("i",t.length,u,h=>{e.subschema({keyword:a,dataProp:h,dataPropType:I_.Type.Num},d),s.allErrors||n.if((0,Xu.not)(d),()=>n.break())})}}vf.validateAdditionalItems=oT;vf.default=f8;var G1={},gf={};Object.defineProperty(gf,"__esModule",{value:!0});gf.validateTuple=void 0;const Ck=ut,av=je,d8=ft,h8={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return sT(e,"additionalItems",t);n.items=!0,!(0,av.alwaysValidSchema)(n,t)&&e.ok((0,d8.validateArray)(e))}};function sT(e,t,n=e.schema){const{gen:r,parentSchema:i,data:a,keyword:s,it:u}=e;h(i),u.opts.unevaluated&&n.length&&u.items!==!0&&(u.items=av.mergeEvaluated.items(r,n.length,u.items));const c=r.name("valid"),d=r.const("len",(0,Ck._)`${a}.length`);n.forEach((v,y)=>{(0,av.alwaysValidSchema)(u,v)||(r.if((0,Ck._)`${d} > ${y}`,()=>e.subschema({keyword:s,schemaProp:y,dataProp:y},c)),e.ok(c))});function h(v){const{opts:y,errSchemaPath:g}=u,w=n.length,x=w===v.minItems&&(w===v.maxItems||v[t]===!1);if(y.strictTuples&&!x){const C=`"${s}" is ${w}-tuple, but minItems or maxItems/${t} are not specified or different at path "${g}"`;(0,av.checkStrictMode)(u,C,y.strictTuples)}}}gf.validateTuple=sT;gf.default=h8;Object.defineProperty(G1,"__esModule",{value:!0});const p8=gf,m8={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,p8.validateTuple)(e,"items")};G1.default=m8;var J1={};Object.defineProperty(J1,"__esModule",{value:!0});const Dk=ut,v8=je,g8=ft,y8=vf,w8={message:({params:{len:e}})=>(0,Dk.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Dk._)`{limit: ${e}}`},_8={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:w8,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,v8.alwaysValidSchema)(r,t)&&(i?(0,y8.validateAdditionalItems)(e,i):e.ok((0,g8.validateArray)(e)))}};J1.default=_8;var Z1={};Object.defineProperty(Z1,"__esModule",{value:!0});const Ui=ut,xm=je,b8={message:({params:{min:e,max:t}})=>t===void 0?(0,Ui.str)`must contain at least ${e} valid item(s)`:(0,Ui.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Ui._)`{minContains: ${e}}`:(0,Ui._)`{minContains: ${e}, maxContains: ${t}}`},S8={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:b8,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:a}=e;let s,u;const{minContains:c,maxContains:d}=r;a.opts.next?(s=c===void 0?1:c,u=d):s=1;const h=t.const("len",(0,Ui._)`${i}.length`);if(e.setParams({min:s,max:u}),u===void 0&&s===0){(0,xm.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(u!==void 0&&s>u){(0,xm.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,xm.alwaysValidSchema)(a,n)){let x=(0,Ui._)`${h} >= ${s}`;u!==void 0&&(x=(0,Ui._)`${x} && ${h} <= ${u}`),e.pass(x);return}a.items=!0;const v=t.name("valid");u===void 0&&s===1?g(v,()=>t.if(v,()=>t.break())):s===0?(t.let(v,!0),u!==void 0&&t.if((0,Ui._)`${i}.length > 0`,y)):(t.let(v,!1),y()),e.result(v,()=>e.reset());function y(){const x=t.name("_valid"),C=t.let("count",0);g(x,()=>t.if(x,()=>w(C)))}function g(x,C){t.forRange("i",0,h,S=>{e.subschema({keyword:"contains",dataProp:S,dataPropType:xm.Type.Num,compositeRule:!0},x),C()})}function w(x){t.code((0,Ui._)`${x}++`),u===void 0?t.if((0,Ui._)`${x} >= ${s}`,()=>t.assign(v,!0).break()):(t.if((0,Ui._)`${x} > ${u}`,()=>t.assign(v,!1).break()),s===1?t.assign(v,!0):t.if((0,Ui._)`${x} >= ${s}`,()=>t.assign(v,!0)))}}};Z1.default=S8;var uT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=ut,n=je,r=ft;e.error={message:({params:{property:c,depsCount:d,deps:h}})=>{const v=d===1?"property":"properties";return(0,t.str)`must have ${v} ${h} when property ${c} is present`},params:({params:{property:c,depsCount:d,deps:h,missingProperty:v}})=>(0,t._)`{property: ${c},
    missingProperty: ${v},
    depsCount: ${d},
    deps: ${h}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[d,h]=a(c);s(c,d),u(c,h)}};function a({schema:c}){const d={},h={};for(const v in c){if(v==="__proto__")continue;const y=Array.isArray(c[v])?d:h;y[v]=c[v]}return[d,h]}function s(c,d=c.schema){const{gen:h,data:v,it:y}=c;if(Object.keys(d).length===0)return;const g=h.let("missing");for(const w in d){const x=d[w];if(x.length===0)continue;const C=(0,r.propertyInData)(h,v,w,y.opts.ownProperties);c.setParams({property:w,depsCount:x.length,deps:x.join(", ")}),y.allErrors?h.if(C,()=>{for(const S of x)(0,r.checkReportMissingProp)(c,S)}):(h.if((0,t._)`${C} && (${(0,r.checkMissingProp)(c,x,g)})`),(0,r.reportMissingProp)(c,g),h.else())}}e.validatePropertyDeps=s;function u(c,d=c.schema){const{gen:h,data:v,keyword:y,it:g}=c,w=h.name("valid");for(const x in d)(0,n.alwaysValidSchema)(g,d[x])||(h.if((0,r.propertyInData)(h,v,x,g.opts.ownProperties),()=>{const C=c.subschema({keyword:y,schemaProp:x},w);c.mergeValidEvaluated(C,w)},()=>h.var(w,!0)),c.ok(w))}e.validateSchemaDeps=u,e.default=i})(uT);var eS={};Object.defineProperty(eS,"__esModule",{value:!0});const lT=ut,x8=je,E8={message:"property name must be valid",params:({params:e})=>(0,lT._)`{propertyName: ${e.propertyName}}`},P8={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:E8,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,x8.alwaysValidSchema)(i,n))return;const a=t.name("valid");t.forIn("key",r,s=>{e.setParams({propertyName:s}),e.subschema({keyword:"propertyNames",data:s,dataTypes:["string"],propertyName:s,compositeRule:!0},a),t.if((0,lT.not)(a),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(a)}};eS.default=P8;var zg={};Object.defineProperty(zg,"__esModule",{value:!0});const Em=ft,ya=ut,k8=oo,Pm=je,C8={message:"must NOT have additional properties",params:({params:e})=>(0,ya._)`{additionalProperty: ${e.additionalProperty}}`},D8={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:C8,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:a,it:s}=e;if(!a)throw new Error("ajv implementation error");const{allErrors:u,opts:c}=s;if(s.props=!0,c.removeAdditional!=="all"&&(0,Pm.alwaysValidSchema)(s,n))return;const d=(0,Em.allSchemaProperties)(r.properties),h=(0,Em.allSchemaProperties)(r.patternProperties);v(),e.ok((0,ya._)`${a} === ${k8.default.errors}`);function v(){t.forIn("key",i,C=>{!d.length&&!h.length?w(C):t.if(y(C),()=>w(C))})}function y(C){let S;if(d.length>8){const E=(0,Pm.schemaRefOrVal)(s,r.properties,"properties");S=(0,Em.isOwnProperty)(t,E,C)}else d.length?S=(0,ya.or)(...d.map(E=>(0,ya._)`${C} === ${E}`)):S=ya.nil;return h.length&&(S=(0,ya.or)(S,...h.map(E=>(0,ya._)`${(0,Em.usePattern)(e,E)}.test(${C})`))),(0,ya.not)(S)}function g(C){t.code((0,ya._)`delete ${i}[${C}]`)}function w(C){if(c.removeAdditional==="all"||c.removeAdditional&&n===!1){g(C);return}if(n===!1){e.setParams({additionalProperty:C}),e.error(),u||t.break();return}if(typeof n=="object"&&!(0,Pm.alwaysValidSchema)(s,n)){const S=t.name("valid");c.removeAdditional==="failing"?(x(C,S,!1),t.if((0,ya.not)(S),()=>{e.reset(),g(C)})):(x(C,S),u||t.if((0,ya.not)(S),()=>t.break()))}}function x(C,S,E){const P={keyword:"additionalProperties",dataProp:C,dataPropType:Pm.Type.Str};E===!1&&Object.assign(P,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(P,S)}}};zg.default=D8;var tS={};Object.defineProperty(tS,"__esModule",{value:!0});const O8=Da,Ok=ft,V0=je,$k=zg,$8={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:a}=e;a.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&$k.default.code(new O8.KeywordCxt(a,$k.default,"additionalProperties"));const s=(0,Ok.allSchemaProperties)(n);for(const v of s)a.definedProperties.add(v);a.opts.unevaluated&&s.length&&a.props!==!0&&(a.props=V0.mergeEvaluated.props(t,(0,V0.toHash)(s),a.props));const u=s.filter(v=>!(0,V0.alwaysValidSchema)(a,n[v]));if(u.length===0)return;const c=t.name("valid");for(const v of u)d(v)?h(v):(t.if((0,Ok.propertyInData)(t,i,v,a.opts.ownProperties)),h(v),a.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(v),e.ok(c);function d(v){return a.opts.useDefaults&&!a.compositeRule&&n[v].default!==void 0}function h(v){e.subschema({keyword:"properties",schemaProp:v,dataProp:v},c)}}};tS.default=$8;var nS={};Object.defineProperty(nS,"__esModule",{value:!0});const Rk=ft,km=ut,Nk=je,Tk=je,R8={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:a}=e,{opts:s}=a,u=(0,Rk.allSchemaProperties)(n),c=u.filter(x=>(0,Nk.alwaysValidSchema)(a,n[x]));if(u.length===0||c.length===u.length&&(!a.opts.unevaluated||a.props===!0))return;const d=s.strictSchema&&!s.allowMatchingProperties&&i.properties,h=t.name("valid");a.props!==!0&&!(a.props instanceof km.Name)&&(a.props=(0,Tk.evaluatedPropsToName)(t,a.props));const{props:v}=a;y();function y(){for(const x of u)d&&g(x),a.allErrors?w(x):(t.var(h,!0),w(x),t.if(h))}function g(x){for(const C in d)new RegExp(x).test(C)&&(0,Nk.checkStrictMode)(a,`property ${C} matches pattern ${x} (use allowMatchingProperties)`)}function w(x){t.forIn("key",r,C=>{t.if((0,km._)`${(0,Rk.usePattern)(e,x)}.test(${C})`,()=>{const S=c.includes(x);S||e.subschema({keyword:"patternProperties",schemaProp:x,dataProp:C,dataPropType:Tk.Type.Str},h),a.opts.unevaluated&&v!==!0?t.assign((0,km._)`${v}[${C}]`,!0):!S&&!a.allErrors&&t.if((0,km.not)(h),()=>t.break())})})}}};nS.default=R8;var rS={};Object.defineProperty(rS,"__esModule",{value:!0});const N8=je,T8={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,N8.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};rS.default=T8;var iS={};Object.defineProperty(iS,"__esModule",{value:!0});const M8=ft,I8={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:M8.validateUnion,error:{message:"must match a schema in anyOf"}};iS.default=I8;var aS={};Object.defineProperty(aS,"__esModule",{value:!0});const ov=ut,A8=je,j8={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,ov._)`{passingSchemas: ${e.passing}}`},L8={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:j8,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const a=n,s=t.let("valid",!1),u=t.let("passing",null),c=t.name("_valid");e.setParams({passing:u}),t.block(d),e.result(s,()=>e.reset(),()=>e.error(!0));function d(){a.forEach((h,v)=>{let y;(0,A8.alwaysValidSchema)(i,h)?t.var(c,!0):y=e.subschema({keyword:"oneOf",schemaProp:v,compositeRule:!0},c),v>0&&t.if((0,ov._)`${c} && ${s}`).assign(s,!1).assign(u,(0,ov._)`[${u}, ${v}]`).else(),t.if(c,()=>{t.assign(s,!0),t.assign(u,v),y&&e.mergeEvaluated(y,ov.Name)})})}}};aS.default=L8;var oS={};Object.defineProperty(oS,"__esModule",{value:!0});const z8=je,F8={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((a,s)=>{if((0,z8.alwaysValidSchema)(r,a))return;const u=e.subschema({keyword:"allOf",schemaProp:s},i);e.ok(i),e.mergeEvaluated(u)})}};oS.default=F8;var sS={};Object.defineProperty(sS,"__esModule",{value:!0});const Gv=ut,cT=je,B8={message:({params:e})=>(0,Gv.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,Gv._)`{failingKeyword: ${e.ifClause}}`},W8={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:B8,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,cT.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=Mk(r,"then"),a=Mk(r,"else");if(!i&&!a)return;const s=t.let("valid",!0),u=t.name("_valid");if(c(),e.reset(),i&&a){const h=t.let("ifClause");e.setParams({ifClause:h}),t.if(u,d("then",h),d("else",h))}else i?t.if(u,d("then")):t.if((0,Gv.not)(u),d("else"));e.pass(s,()=>e.error(!0));function c(){const h=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u);e.mergeEvaluated(h)}function d(h,v){return()=>{const y=e.subschema({keyword:h},u);t.assign(s,u),e.mergeValidEvaluated(y,s),v?t.assign(v,(0,Gv._)`${h}`):e.setParams({ifClause:h})}}}};function Mk(e,t){const n=e.schema[t];return n!==void 0&&!(0,cT.alwaysValidSchema)(e,n)}sS.default=W8;var uS={};Object.defineProperty(uS,"__esModule",{value:!0});const U8=je,H8={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,U8.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};uS.default=H8;Object.defineProperty(Q1,"__esModule",{value:!0});const K8=vf,q8=G1,Y8=gf,V8=J1,X8=Z1,Q8=uT,G8=eS,J8=zg,Z8=tS,eY=nS,tY=rS,nY=iS,rY=aS,iY=oS,aY=sS,oY=uS;function sY(e=!1){const t=[tY.default,nY.default,rY.default,iY.default,aY.default,oY.default,G8.default,J8.default,Q8.default,Z8.default,eY.default];return e?t.push(q8.default,V8.default):t.push(K8.default,Y8.default),t.push(X8.default),t}Q1.default=sY;var lS={},cS={};Object.defineProperty(cS,"__esModule",{value:!0});const yn=ut,uY={message:({schemaCode:e})=>(0,yn.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,yn._)`{format: ${e}}`},lY={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:uY,code(e,t){const{gen:n,data:r,$data:i,schema:a,schemaCode:s,it:u}=e,{opts:c,errSchemaPath:d,schemaEnv:h,self:v}=u;if(!c.validateFormats)return;i?y():g();function y(){const w=n.scopeValue("formats",{ref:v.formats,code:c.code.formats}),x=n.const("fDef",(0,yn._)`${w}[${s}]`),C=n.let("fType"),S=n.let("format");n.if((0,yn._)`typeof ${x} == "object" && !(${x} instanceof RegExp)`,()=>n.assign(C,(0,yn._)`${x}.type || "string"`).assign(S,(0,yn._)`${x}.validate`),()=>n.assign(C,(0,yn._)`"string"`).assign(S,x)),e.fail$data((0,yn.or)(E(),P()));function E(){return c.strictSchema===!1?yn.nil:(0,yn._)`${s} && !${S}`}function P(){const N=h.$async?(0,yn._)`(${x}.async ? await ${S}(${r}) : ${S}(${r}))`:(0,yn._)`${S}(${r})`,T=(0,yn._)`(typeof ${S} == "function" ? ${N} : ${S}.test(${r}))`;return(0,yn._)`${S} && ${S} !== true && ${C} === ${t} && !${T}`}}function g(){const w=v.formats[a];if(!w){E();return}if(w===!0)return;const[x,C,S]=P(w);x===t&&e.pass(N());function E(){if(c.strictSchema===!1){v.logger.warn(T());return}throw new Error(T());function T(){return`unknown format "${a}" ignored in schema at path "${d}"`}}function P(T){const U=T instanceof RegExp?(0,yn.regexpCode)(T):c.code.formats?(0,yn._)`${c.code.formats}${(0,yn.getProperty)(a)}`:void 0,W=n.scopeValue("formats",{key:a,ref:T,code:U});return typeof T=="object"&&!(T instanceof RegExp)?[T.type||"string",T.validate,(0,yn._)`${W}.validate`]:["string",T,W]}function N(){if(typeof w=="object"&&!(w instanceof RegExp)&&w.async){if(!h.$async)throw new Error("async format in sync schema");return(0,yn._)`await ${S}(${r})`}return typeof C=="function"?(0,yn._)`${S}(${r})`:(0,yn._)`${S}.test(${r})`}}}};cS.default=lY;Object.defineProperty(lS,"__esModule",{value:!0});const cY=cS,fY=[cY.default];lS.default=fY;var af={};Object.defineProperty(af,"__esModule",{value:!0});af.contentVocabulary=af.metadataVocabulary=void 0;af.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];af.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(I1,"__esModule",{value:!0});const dY=A1,hY=L1,pY=Q1,mY=lS,Ik=af,vY=[dY.default,hY.default,(0,pY.default)(),mY.default,Ik.metadataVocabulary,Ik.contentVocabulary];I1.default=vY;var fS={},Fg={};Object.defineProperty(Fg,"__esModule",{value:!0});Fg.DiscrError=void 0;var Ak;(function(e){e.Tag="tag",e.Mapping="mapping"})(Ak||(Fg.DiscrError=Ak={}));Object.defineProperty(fS,"__esModule",{value:!0});const sc=ut,A_=Fg,jk=Zr,gY=mf,yY=je,wY={message:({params:{discrError:e,tagName:t}})=>e===A_.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,sc._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},_Y={keyword:"discriminator",type:"object",schemaType:"object",error:wY,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:a}=e,{oneOf:s}=i;if(!a.opts.discriminator)throw new Error("discriminator: requires discriminator option");const u=r.propertyName;if(typeof u!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!s)throw new Error("discriminator: requires oneOf keyword");const c=t.let("valid",!1),d=t.const("tag",(0,sc._)`${n}${(0,sc.getProperty)(u)}`);t.if((0,sc._)`typeof ${d} == "string"`,()=>h(),()=>e.error(!1,{discrError:A_.DiscrError.Tag,tag:d,tagName:u})),e.ok(c);function h(){const g=y();t.if(!1);for(const w in g)t.elseIf((0,sc._)`${d} === ${w}`),t.assign(c,v(g[w]));t.else(),e.error(!1,{discrError:A_.DiscrError.Mapping,tag:d,tagName:u}),t.endIf()}function v(g){const w=t.name("valid"),x=e.subschema({keyword:"oneOf",schemaProp:g},w);return e.mergeEvaluated(x,sc.Name),w}function y(){var g;const w={},x=S(i);let C=!0;for(let N=0;N<s.length;N++){let T=s[N];if(T!=null&&T.$ref&&!(0,yY.schemaHasRulesButRef)(T,a.self.RULES)){const W=T.$ref;if(T=jk.resolveRef.call(a.self,a.schemaEnv.root,a.baseId,W),T instanceof jk.SchemaEnv&&(T=T.schema),T===void 0)throw new gY.default(a.opts.uriResolver,a.baseId,W)}const U=(g=T==null?void 0:T.properties)===null||g===void 0?void 0:g[u];if(typeof U!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${u}"`);C=C&&(x||S(T)),E(U,N)}if(!C)throw new Error(`discriminator: "${u}" must be required`);return w;function S({required:N}){return Array.isArray(N)&&N.includes(u)}function E(N,T){if(N.const)P(N.const,T);else if(N.enum)for(const U of N.enum)P(U,T);else throw new Error(`discriminator: "properties/${u}" must have "const" or "enum"`)}function P(N,T){if(typeof N!="string"||N in w)throw new Error(`discriminator: "${u}" values must be unique strings`);w[N]=T}}}};fS.default=_Y;const bY="http://json-schema.org/draft-07/schema#",SY="http://json-schema.org/draft-07/schema#",xY="Core schema meta-schema",EY={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},PY=["object","boolean"],kY={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},CY={$schema:bY,$id:SY,title:xY,definitions:EY,type:PY,properties:kY,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=mN,r=I1,i=fS,a=CY,s=["/properties"],u="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(w=>this.addVocabulary(w)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const w=this.opts.$data?this.$dataMetaSchema(a,s):a;this.addMetaSchema(w,u,!1),this.refs["http://json-schema.org/schema"]=u}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(u)?u:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var d=Da;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var h=ut;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return h._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return h.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return h.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return h.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return h.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return h.CodeGen}});var v=Gh;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return v.default}});var y=mf;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return y.default}})})(O_,O_.exports);var fT=O_.exports;const DY=Nh(fT);var j_={exports:{}},dT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(ce,fe){return{validate:ce,compare:fe}}e.fullFormats={date:t(a,s),time:t(c(!0),d),"date-time":t(y(!0),g),"iso-time":t(c(),h),"iso-date-time":t(y(),w),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:S,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:he,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:P,int32:{type:"number",validate:U},int64:{type:"number",validate:W},float:{type:"number",validate:re},double:{type:"number",validate:re},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,s),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,g),"iso-time":t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,h),"iso-date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,w),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function n(ce){return ce%4===0&&(ce%100!==0||ce%400===0)}const r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];function a(ce){const fe=r.exec(ce);if(!fe)return!1;const xe=+fe[1],Ce=+fe[2],Le=+fe[3];return Ce>=1&&Ce<=12&&Le>=1&&Le<=(Ce===2&&n(xe)?29:i[Ce])}function s(ce,fe){if(ce&&fe)return ce>fe?1:ce<fe?-1:0}const u=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function c(ce){return function(xe){const Ce=u.exec(xe);if(!Ce)return!1;const Le=+Ce[1],qe=+Ce[2],We=+Ce[3],oe=Ce[4],_e=Ce[5]==="-"?-1:1,G=+(Ce[6]||0),F=+(Ce[7]||0);if(G>23||F>59||ce&&!oe)return!1;if(Le<=23&&qe<=59&&We<60)return!0;const te=qe-F*_e,X=Le-G*_e-(te<0?1:0);return(X===23||X===-1)&&(te===59||te===-1)&&We<61}}function d(ce,fe){if(!(ce&&fe))return;const xe=new Date("2020-01-01T"+ce).valueOf(),Ce=new Date("2020-01-01T"+fe).valueOf();if(xe&&Ce)return xe-Ce}function h(ce,fe){if(!(ce&&fe))return;const xe=u.exec(ce),Ce=u.exec(fe);if(xe&&Ce)return ce=xe[1]+xe[2]+xe[3],fe=Ce[1]+Ce[2]+Ce[3],ce>fe?1:ce<fe?-1:0}const v=/t|\s/i;function y(ce){const fe=c(ce);return function(Ce){const Le=Ce.split(v);return Le.length===2&&a(Le[0])&&fe(Le[1])}}function g(ce,fe){if(!(ce&&fe))return;const xe=new Date(ce).valueOf(),Ce=new Date(fe).valueOf();if(xe&&Ce)return xe-Ce}function w(ce,fe){if(!(ce&&fe))return;const[xe,Ce]=ce.split(v),[Le,qe]=fe.split(v),We=s(xe,Le);if(We!==void 0)return We||d(Ce,qe)}const x=/\/|:/,C=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function S(ce){return x.test(ce)&&C.test(ce)}const E=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function P(ce){return E.lastIndex=0,E.test(ce)}const N=-(2**31),T=2**31-1;function U(ce){return Number.isInteger(ce)&&ce<=T&&ce>=N}function W(ce){return Number.isInteger(ce)}function re(){return!0}const pe=/[^\\]\\Z/;function he(ce){if(pe.test(ce))return!1;try{return new RegExp(ce),!0}catch{return!1}}})(dT);var hT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=fT,n=ut,r=n.operators,i={formatMaximum:{okStr:"<=",ok:r.LTE,fail:r.GT},formatMinimum:{okStr:">=",ok:r.GTE,fail:r.LT},formatExclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},formatExclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},a={message:({keyword:u,schemaCode:c})=>(0,n.str)`should be ${i[u].okStr} ${c}`,params:({keyword:u,schemaCode:c})=>(0,n._)`{comparison: ${i[u].okStr}, limit: ${c}}`};e.formatLimitDefinition={keyword:Object.keys(i),type:"string",schemaType:"string",$data:!0,error:a,code(u){const{gen:c,data:d,schemaCode:h,keyword:v,it:y}=u,{opts:g,self:w}=y;if(!g.validateFormats)return;const x=new t.KeywordCxt(y,w.RULES.all.format.definition,"format");x.$data?C():S();function C(){const P=c.scopeValue("formats",{ref:w.formats,code:g.code.formats}),N=c.const("fmt",(0,n._)`${P}[${x.schemaCode}]`);u.fail$data((0,n.or)((0,n._)`typeof ${N} != "object"`,(0,n._)`${N} instanceof RegExp`,(0,n._)`typeof ${N}.compare != "function"`,E(N)))}function S(){const P=x.schema,N=w.formats[P];if(!N||N===!0)return;if(typeof N!="object"||N instanceof RegExp||typeof N.compare!="function")throw new Error(`"${v}": format "${P}" does not define "compare" function`);const T=c.scopeValue("formats",{key:P,ref:N,code:g.code.formats?(0,n._)`${g.code.formats}${(0,n.getProperty)(P)}`:void 0});u.fail$data(E(T))}function E(P){return(0,n._)`${P}.compare(${d}, ${h}) ${i[v].fail} 0`}},dependencies:["format"]};const s=u=>(u.addKeyword(e.formatLimitDefinition),u);e.default=s})(hT);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=dT,r=hT,i=ut,a=new i.Name("fullFormats"),s=new i.Name("fastFormats"),u=(d,h={keywords:!0})=>{if(Array.isArray(h))return c(d,h,n.fullFormats,a),d;const[v,y]=h.mode==="fast"?[n.fastFormats,s]:[n.fullFormats,a],g=h.formats||n.formatNames;return c(d,g,v,y),h.keywords&&(0,r.default)(d),d};u.get=(d,h="full")=>{const y=(h==="fast"?n.fastFormats:n.fullFormats)[d];if(!y)throw new Error(`Unknown format "${d}"`);return y};function c(d,h,v,y){var g,w;(g=(w=d.opts.code).formats)!==null&&g!==void 0||(w.formats=(0,i._)`require("ajv-formats/dist/formats").${y}`);for(const x of h)d.addFormat(x,v[x])}e.exports=t=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u})(j_,j_.exports);var OY=j_.exports;const $Y=Nh(OY);var Or;function RY(){return Or||(Or=new DY({strict:!0}),Or.addKeyword("version"),Or.addKeyword("keyCompression"),Or.addKeyword("primaryKey"),Or.addKeyword("indexes"),Or.addKeyword("encrypted"),Or.addKeyword("final"),Or.addKeyword("sharding"),Or.addKeyword("internalIndexes"),Or.addKeyword("attachments"),Or.addKeyword("ref"),Or.addKeyword("crdt"),$Y(Or)),Or}function NY(e){var t=RY().compile(e);return n=>{var r=t(n);return r?[]:t.errors}}var wZ=tK(NY,"ajv");async function pT(e){var t=K3(e.collection.schema.jsonSchema).map(a=>e.collection.name+"-"+a),n=await e.database.internalStore.findDocumentsById(t.map(a=>gl(a,Ks)),!1),r={};n.forEach(a=>r[a.key]=a);var i=t.find(a=>r[a]);return i?r[i]:void 0}function TY(e,t,n){var r=It(n._attachments),i=Ir(n),a=i._meta;delete i._meta,i._attachments=r;for(var s=t+1,u=Promise.resolve(i),c=function(){var d=s;u=u.then(h=>MY(e,d,h)),s++};s<=e.schema.version;)c();return u.then(d=>d===null?Xb:(a&&(d._meta=a),d))}function MY(e,t,n){if(n===null)return Xb;var r=e.migrationStrategies[t](n,e),i=ZO(r);return i}async function mT(e){if(e.collection.schema.version===0)return no;var t=await pT(e);return!!t}var IY=200,vT=new WeakMap;function AY(e){var t=gT(e.database),n=t.getValue().slice(0);n.push(e),t.next(n)}function gT(e){return Ar(vT,e,()=>new qa([]))}function jY(e){var t=vT.get(e);t&&t.complete()}var LY=function(){function e(n,r,i=[n.name,"v",n.schema.version].join("-")){this.started=!1,this.canceled=!1,this.updateStatusHandlers=[],this.updateStatusQueue=Vb,this.collection=n,this.migrationStrategies=r,this.statusDocKey=i,this.database=n.database,this.oldCollectionMeta=pT(this),this.mustMigrate=mT(this),this.statusDocId=gl(this.statusDocKey,Jm),AY(this),this.$=XW(this.database.internalStore,this.statusDocId).pipe(Nt(a=>!!a),_n(a=>Ye(a).data),Uh(zh))}var t=e.prototype;return t.getStatus=function(){return ol(this.$)},t.startMigration=async function(r=IY){var i=await this.mustMigrate;if(i){if(this.started)throw ze("DM1");if(this.started=!0,this.database.multiInstance){this.broadcastChannel=new Tg(["rx-migration-state",this.database.name,this.collection.name,this.collection.schema.version].join("|"));var a=rN(this.broadcastChannel);await a.awaitLeadership()}var s=await this.oldCollectionMeta,u=await this.database.storage.createStorageInstance({databaseName:this.database.name,collectionName:this.collection.name,databaseInstanceToken:this.database.token,multiInstance:this.database.multiInstance,options:{},schema:Ye(s).data.schema,password:this.database.password,devMode:Tt.isDevMode()}),c=await this.getConnectedStorageInstances(),d=await this.countAllDocuments([u].concat(c.map(v=>v.oldStorage)));await this.updateStatus(v=>(v.count.total=d,v));try{await Promise.all(c.map(async v=>{await RR(this.collection,v.newStorage.collectionName,v.newStorage.schema),await this.migrateStorage(v.oldStorage,v.newStorage,r),await v.newStorage.close()})),await this.migrateStorage(u,this.collection.storageInstance.originalStorageInstance,r)}catch(v){await u.close(),await this.updateStatus(y=>(y.status="ERROR",y.error=o_(v),y));return}try{await nf(this.database.internalStore,{previous:s,document:Object.assign({},s,{_deleted:!0})},"rx-migration-remove-collection-meta")}catch(v){var h=Vc(v);if(!(h&&h.documentInDb._deleted))throw v}await this.updateStatus(v=>(v.status="DONE",v)),this.broadcastChannel&&await this.broadcastChannel.close()}},t.updateStatus=function(r){return this.updateStatusHandlers.push(r),this.updateStatusQueue=this.updateStatusQueue.then(async()=>{if(this.updateStatusHandlers.length!==0){var i=this.updateStatusHandlers;for(this.updateStatusHandlers=[];;){var a=await hf(this.database.internalStore,this.statusDocId),s=Ir(a);a||(s={id:this.statusDocId,key:this.statusDocKey,context:Jm,data:{collectionName:this.collection.name,status:"RUNNING",count:{total:0,handled:0,percent:0}},_deleted:!1,_meta:cf(),_rev:$a(),_attachments:{}});var u=Ye(s).data;for(var c of i)u=c(u);if(u.count.percent=Math.round(u.count.handled/u.count.total*100),s&&a&&dh(s.data,a.data))break;try{await nf(this.database.internalStore,{previous:a,document:Ye(s)},Jm);break}catch(d){if(!Vc(d))throw d}}}}),this.updateStatusQueue},t.migrateStorage=async function(r,i,a){this.collection.onClose.push(()=>this.cancel()),this.database.onClose.push(()=>this.cancel());var s=await this.database.storage.createStorageInstance({databaseName:this.database.name,collectionName:"rx-migration-state-meta-"+r.collectionName+"-"+r.schema.version,databaseInstanceToken:this.database.token,multiInstance:this.database.multiInstance,options:{},schema:__(r.schema,Lv(r.schema)),password:this.database.password,devMode:Tt.isDevMode()}),u=UU(i,Fv,this.database.token,!0),c=WR({keepMeta:!0,identifier:["rx-migration-state",r.collectionName,r.schema.version,this.collection.schema.version].join("-"),replicationHandler:{masterChangesSince(){return Promise.resolve({checkpoint:null,documents:[]})},masterWrite:async h=>{var v=await Promise.all(h.map(async g=>{var w=g.newDocumentState;if(i.schema.title===Zm&&(w=g.newDocumentState.docData,g.newDocumentState.isCheckpoint==="1"))return{assumedMasterState:void 0,newDocumentState:g.newDocumentState};var x=await TY(this.collection,r.schema.version,w);if(x===null)return null;var C={assumedMasterState:void 0,newDocumentState:i.schema.title===Zm?Object.assign({},g.newDocumentState,{docData:x}):x};return C}));v=v.filter(g=>!!g&&!!g.newDocumentState);var y=await u.masterWrite(v);return y},masterChangeStream$:new br().asObservable()},forkInstance:r,metaInstance:s,pushBatchSize:a,pullBatchSize:0,conflictHandler:Fv,hashFunction:this.database.hashFunction}),d=!1;if(c.events.error.subscribe(h=>d=h),c.events.processed.up.subscribe(()=>{this.updateStatus(h=>(h.count.handled=h.count.handled+1,h))}),await ev(c),await S_(c),await this.updateStatusQueue,d)throw await s.close(),d;await Promise.all([r.remove(),s.remove()]),await this.cancel()},t.cancel=async function(){this.canceled=!0,this.replicationState&&await UR(this.replicationState),this.broadcastChannel&&await this.broadcastChannel.close()},t.countAllDocuments=async function(r){var i=0;return await Promise.all(r.map(async a=>{var s=Og(a.schema,Nc(a.schema,{selector:{}})),u=await a.count(s);i+=u.count})),i},t.getConnectedStorageInstances=async function(){var r=Ye(await this.oldCollectionMeta),i=[];return await Promise.all(await Promise.all(r.data.connectedStorages.map(async a=>{if(a.schema.title!==Zm)throw new Error("unknown migration handling for schema");var s=__(Ir(this.collection.schema.jsonSchema),Lv(a.schema));s.version=this.collection.schema.version;var[u,c]=await Promise.all([this.database.storage.createStorageInstance({databaseInstanceToken:this.database.token,databaseName:this.database.name,devMode:Tt.isDevMode(),multiInstance:this.database.multiInstance,options:{},schema:a.schema,password:this.database.password,collectionName:a.collectionName}),this.database.storage.createStorageInstance({databaseInstanceToken:this.database.token,databaseName:this.database.name,devMode:Tt.isDevMode(),multiInstance:this.database.multiInstance,options:{},schema:s,password:this.database.password,collectionName:a.collectionName})]);i.push({oldStorage:u,newStorage:c})}))),i},t.migratePromise=async function(r){this.startMigration(r);var i=await this.mustMigrate;if(!i)return{status:"DONE",collectionName:this.collection.name,count:{handled:0,percent:0,total:0}};var a=await Promise.race([ol(this.$.pipe(Nt(s=>s.status==="DONE"))),ol(this.$.pipe(Nt(s=>s.status==="ERROR")))]);if(a.status==="ERROR")throw ze("DM4",{collection:this.collection.name,error:a.error});return a},e}(),Jv=new WeakMap,L_=new WeakMap;function Fd(e){var t=Jv.get(e);if(!t){var n=e.database?e.database:e,r=e.database?e.name:"";throw ze("LD8",{database:n.name,collection:r})}return t}function yT(e,t,n,r,i,a){return t.createStorageInstance({databaseInstanceToken:e,databaseName:n,collectionName:zY(r),schema:wT,options:i,multiInstance:a,devMode:Tt.isDevMode()})}function Lk(e){var t=Jv.get(e);if(t)return Jv.delete(e),t.then(n=>n.storageInstance.close())}async function zk(e,t,n){var r=Lh(10),i=await yT(r,e,t,n,{},!1);await i.remove()}function zY(e){return"plugin-local-documents-"+e}var wT=Pg({title:"RxLocalDocument",version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:128},data:{type:"object",additionalProperties:!0}},required:["id","data"]});async function Fk(e,t){var n=await Fd(this),r={id:e,data:t,_deleted:!1,_meta:cf(),_rev:$a(),_attachments:{}};return nf(n.storageInstance,{document:r},"local-document-insert").then(i=>n.docCache.getCachedRxDocument(i))}function Bk(e,t){return this.getLocal(e).then(n=>{if(n)return n.incrementalModify(()=>t);var r=this.insertLocal(e,t);return r})}async function Wk(e){var t=await Fd(this),n=t.docCache,r=n.getLatestDocumentDataIfExists(e);return r?Promise.resolve(n.getCachedRxDocument(r)):hf(t.storageInstance,e).then(i=>i?t.docCache.getCachedRxDocument(i):null)}function Uk(e){return this.$.pipe(Hh(null),ro(async t=>{if(t)return{changeEvent:t};var n=await this.getLocal(e);return{doc:n}}),ro(async t=>{if(t.changeEvent){var n=t.changeEvent;if(!n.isLocal||n.documentId!==e)return{use:!1};var r=await this.getLocal(e);return{use:!0,doc:r}}else return{use:!0,doc:t.doc}}),Nt(t=>t.use),_n(t=>t.doc))}var FY=wR(),BY=function(e){function t(n,r,i){var a;return a=e.call(this,null,r)||this,a.id=n,a.parent=i,a}return qb(t,e),t}(FY),Bd={get isLocal(){return!0},get allAttachments$(){throw ze("LD1",{document:this})},get primaryPath(){return"id"},get primary(){return this.id},get $(){var e=this,t=Xc(L_,this.parent),n=this.primary;return e.parent.eventBulks$.pipe(Nt(r=>!!r.isLocal),_n(r=>r.events.find(i=>i.documentId===n)),Nt(r=>!!r),_n(r=>O$(Ye(r))),Hh(t.docCache.getLatestDocumentData(this.primary)),ph((r,i)=>r._rev===i._rev),_n(r=>t.docCache.getCachedRxDocument(r)),Uh(zh))},get $$(){var e=this,t=X0(e),n=t.getReactivityFactory();return n.fromObservable(e.$,e.getLatest()._data,t)},get deleted$$(){var e=this,t=X0(e),n=t.getReactivityFactory();return n.fromObservable(e.deleted$,e.getLatest().deleted,t)},getLatest(){var e=Xc(L_,this.parent),t=e.docCache.getLatestDocumentData(this.primary);return e.docCache.getCachedRxDocument(t)},get(e){if(e="data."+e,!!this._data){if(typeof e!="string")throw Iv("LD2",{objPath:e});var t=Gs(this._data,e);return t=Tt.deepFreezeWhenDevMode(t),t}},get$(e){if(e="data."+e,Tt.isDevMode()){if(e.includes(".item."))throw ze("LD3",{objPath:e});if(e===this.primaryPath)throw ze("LD4")}return this.$.pipe(_n(t=>t._data),_n(t=>Gs(t,e)),ph())},get$$(e){var t=X0(this),n=t.getReactivityFactory();return n.fromObservable(this.get$(e),this.getLatest().get(e),t)},async incrementalModify(e){var t=await Fd(this.parent);return t.incrementalWriteQueue.addWrite(this._data,async n=>(n.data=await e(n.data,this),n)).then(n=>t.docCache.getCachedRxDocument(n))},incrementalPatch(e){return this.incrementalModify(t=>(Object.entries(e).forEach(([n,r])=>{t[n]=r}),t))},async _saveData(e){var t=await Fd(this.parent),n=this._data;e.id=this.id;var r=[{previous:n,document:e}];return t.storageInstance.bulkWrite(r,"local-document-save-data").then(i=>{if(i.error[0])throw i.error[0];var a=na(this.collection.schema.primaryPath,r,i)[0];e=It(e),e._rev=a._rev})},async remove(){var e=await Fd(this.parent),t=It(this._data);return t._deleted=!0,nf(e.storageInstance,{previous:this._data,document:t},"local-document-remove").then(n=>e.docCache.getCachedRxDocument(n))}},Hk=!1,WY=()=>{if(!Hk){Hk=!0;var e=$g,t=Object.getOwnPropertyNames(e);t.forEach(r=>{var i=Object.getOwnPropertyDescriptor(Bd,r);if(!i){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(Bd,r,a)}});var n=r=>()=>{throw ze("LD6",{functionName:r})};["populate","update","putAttachment","putAttachmentBase64","getAttachment","allAttachments"].forEach(r=>Bd[r]=n(r))}};function UY(e,t){WY();var n=new BY(e.id,e,t);return Object.setPrototypeOf(n,Bd),n.prototype=Bd,n}function X0(e){var t=e.parent;return AU(t)?t:t.database}function Kk(e){var t=e.database?e.database:e,n=e.database?e.name:"",r=(async()=>{var i=await yT(t.token,t.storage,t.name,n,t.instanceCreationOptions,t.multiInstance);i=o1(t,i,wT);var a=new kR("id",t.eventBulks$.pipe(Nt(h=>{var v=!1;return(n===""&&!h.collectionName||n!==""&&h.collectionName===n)&&(v=!0),v&&h.isLocal}),_n(h=>h.events)),h=>UY(h,e)),s=new yR(i,"id",()=>{},()=>{}),u=await t.storageToken,c=i.changeStream().subscribe(h=>{for(var v=new Array(h.events.length),y=h.events,g=e.database?e.name:void 0,w=0;w<y.length;w++){var x=y[w];v[w]={documentId:x.documentId,collectionName:g,isLocal:!0,operation:x.operation,documentData:Tt.deepFreezeWhenDevMode(x.documentData),previousDocumentData:Tt.deepFreezeWhenDevMode(x.previousDocumentData)}}var C={id:h.id,isLocal:!0,internal:!1,collectionName:e.database?e.name:void 0,storageToken:u,events:v,databaseToken:t.token,checkpoint:h.checkpoint,context:h.context};t.$emit(C)});e._subs.push(c);var d={database:t,parent:e,storageInstance:i,docCache:a,incrementalWriteQueue:s};return L_.set(e,d),d})();Jv.set(e,r)}var HY={name:"local-documents",rxdb:!0,prototypes:{RxCollection:e=>{e.insertLocal=Fk,e.upsertLocal=Bk,e.getLocal=Wk,e.getLocal$=Uk},RxDatabase:e=>{e.insertLocal=Fk,e.upsertLocal=Bk,e.getLocal=Wk,e.getLocal$=Uk}},hooks:{createRxDatabase:{before:e=>{e.creator.localDocuments&&Kk(e.database)}},createRxCollection:{before:e=>{e.creator.localDocuments&&Kk(e.collection)}},preCloseRxDatabase:{after:e=>Lk(e)},postCloseRxCollection:{after:e=>Lk(e)},postRemoveRxDatabase:{after:e=>zk(e.storage,e.databaseName,"")},postRemoveRxCollection:{after:e=>zk(e.storage,e.databaseName,e.collectionName)}},overwritable:{}},KY=new WeakMap,qY={name:"migration-schema",rxdb:!0,init(){Rg(HY)},hooks:{preCloseRxDatabase:{after:jY}},prototypes:{RxDatabase:e=>{e.migrationStates=function(){return gT(this).pipe(Uh(zh))}},RxCollection:e=>{e.getMigrationState=function(){return Ar(KY,this,()=>new LY(this.asRxCollection,this.migrationStrategies))},e.migrationNeeded=function(){return this.schema.version===0?no:mT(this.getMigrationState())}}}},YY=qY,_T=new WeakMap,VY=new WeakMap;function qk(e){return Ar(VY,e,()=>rN(e))}function XY(){var e=iN(this.storage.name,this.token,this.name,this),t=this.close.bind(this);this.close=function(){return x_(this.token,this),t()};var n=qk(e);return n||(n=qk(e),_T.set(this,n)),this.leaderElector=()=>n,n}function QY(){return this.multiInstance?this.leaderElector().isLeader:!0}function GY(){return this.multiInstance?this.leaderElector().awaitLeadership().then(()=>!0):Vb}function JY(e){var t=_T.get(e);t&&t.die()}var ZY=!0,eV={RxDatabase:e=>{e.leaderElector=XY,e.isLeader=QY,e.waitForLeadership=GY}},tV={name:"leader-election",rxdb:ZY,prototypes:eV,hooks:{preCloseRxDatabase:{after:JY}}},Yk=e=>Promise.resolve(e);function Vk(e,t){if(e==="_deleted")return t;t=It(t);var n=!!t._deleted;return t[e]=n,delete t._deleted,t}function Q0(e,t,n){return n.map(r=>{var i=It(r);if(t!=="_deleted"){var a=!!i[t];i._deleted=a,delete i[t]}else i._deleted=!!i._deleted;var s=e.schema.primaryPath;return i[s]=ou(e.schema.jsonSchema,i),i})}function Xk(e,t){if(typeof window>"u"||typeof window!="object"||typeof window.addEventListener>"u"||navigator.onLine)return e.promiseWait(t);var n,r=new Promise(i=>{n=()=>{window.removeEventListener("online",n),i()},window.addEventListener("online",n)});return Promise.race([r,e.promiseWait(t)]).then(()=>{window.removeEventListener("online",n)})}function nV(e){function t(){if(!(typeof document>"u"||typeof document.dispatchEvent!="function")){var r=new Event("mousemove");document.dispatchEvent(r)}}var n=setInterval(t,20*1e3);e.onCancel.push(()=>clearInterval(n))}var rV=new WeakMap,iV=function(){function e(n,r,i,a,s,u,c,d,h){this.subs=[],this.subjects={received:new br,sent:new br,error:new br,canceled:new qa(!1),active:new qa(!1)},this.received$=this.subjects.received.asObservable(),this.sent$=this.subjects.sent.asObservable(),this.error$=this.subjects.error.asObservable(),this.canceled$=this.subjects.canceled.asObservable(),this.active$=this.subjects.active.asObservable(),this.wasStarted=!1,this.startQueue=Qi,this.onCancel=[],this.callOnStart=void 0,this.remoteEvents$=new br,this.replicationIdentifier=n,this.collection=r,this.deletedField=i,this.pull=a,this.push=s,this.live=u,this.retryTime=c,this.autoStart=d,this.toggleOnDocumentVisible=h,this.metaInfoPromise=(async()=>{var g="rx-replication-meta-"+await r.database.hashFunction([this.collection.name,this.replicationIdentifier].join("-")),w=__(this.collection.schema.jsonSchema,Lv(this.collection.schema.jsonSchema));return{collectionName:g,schema:w}})();var v=Ar(rV,r,()=>[]);v.push(this),this.collection.onClose.push(()=>this.cancel()),Object.keys(this.subjects).forEach(g=>{Object.defineProperty(this,g+"$",{get:function(){return this.subjects[g].asObservable()}})});var y=new Promise(g=>{this.callOnStart=g});this.startPromise=y}var t=e.prototype;return t.start=function(){return this.startQueue=this.startQueue.then(()=>this._start()),this.startQueue},t._start=async function(){if(!this.isStopped()){if(this.internalReplicationState&&this.internalReplicationState.events.paused.next(!1),this.wasStarted){this.reSync();return}this.wasStarted=!0,this.toggleOnDocumentVisible||nV(this);var r=this.pull&&this.pull.modifier?this.pull.modifier:Yk,i=this.push&&this.push.modifier?this.push.modifier:Yk,a=this.collection.database,s=await this.metaInfoPromise,[u]=await Promise.all([this.collection.database.storage.createStorageInstance({databaseName:a.name,collectionName:s.collectionName,databaseInstanceToken:a.token,multiInstance:a.multiInstance,options:{},schema:s.schema,password:a.password,devMode:Tt.isDevMode()}),RR(this.collection,s.collectionName,s.schema)]);this.metaInstance=u,this.internalReplicationState=WR({pushBatchSize:this.push&&this.push.batchSize?this.push.batchSize:100,pullBatchSize:this.pull&&this.pull.batchSize?this.pull.batchSize:100,initialCheckpoint:{upstream:this.push?this.push.initialCheckpoint:void 0,downstream:this.pull?this.pull.initialCheckpoint:void 0},forkInstance:this.collection.storageInstance,metaInstance:this.metaInstance,hashFunction:a.hashFunction,identifier:"rxdbreplication"+this.replicationIdentifier,conflictHandler:this.collection.conflictHandler,replicationHandler:{masterChangeStream$:this.remoteEvents$.asObservable().pipe(Nt(c=>!!this.pull),ro(async c=>{if(c==="RESYNC")return c;var d=It(c);return d.documents=Q0(this.collection,this.deletedField,d.documents),d.documents=await Promise.all(d.documents.map(h=>r(h))),d})),masterChangesSince:async(c,d)=>{if(!this.pull)return{checkpoint:null,documents:[]};for(var h=!1,v={};!h&&!this.isStoppedOrPaused();)try{v=await this.pull.handler(c,d),h=!0}catch(w){var y=ze("RC_PULL",{checkpoint:c,errors:ch(w).map(x=>o_(x)),direction:"pull"});this.subjects.error.next(y),await Xk(this.collection,Ye(this.retryTime))}if(this.isStoppedOrPaused())return{checkpoint:null,documents:[]};var g=It(v);return g.documents=Q0(this.collection,this.deletedField,g.documents),g.documents=await Promise.all(g.documents.map(w=>r(w))),g},masterWrite:async c=>{if(!this.push)return[];var d=!1;await vl("preReplicationMasterWrite",{rows:c,collection:this.collection});var h=await Promise.all(c.map(async x=>(x.newDocumentState=await i(x.newDocumentState),x.newDocumentState===null?null:(x.assumedMasterState&&(x.assumedMasterState=await i(x.assumedMasterState)),this.deletedField!=="_deleted"&&(x.newDocumentState=Vk(this.deletedField,x.newDocumentState),x.assumedMasterState&&(x.assumedMasterState=Vk(this.deletedField,x.assumedMasterState))),x)))),v=h.filter(p3),y=null;for(v.length===0&&(d=!0,y=[]);!d&&!this.isStoppedOrPaused();)try{if(y=await this.push.handler(v),!Array.isArray(y))throw ze("RC_PUSH_NO_AR",{pushRows:c,direction:"push",args:{result:y}});d=!0}catch(x){var g=x.rxdb?x:ze("RC_PUSH",{pushRows:c,errors:ch(x).map(C=>o_(C)),direction:"push"});this.subjects.error.next(g),await Xk(this.collection,Ye(this.retryTime))}if(this.isStoppedOrPaused())return[];await vl("preReplicationMasterWriteDocumentsHandle",{result:y,collection:this.collection});var w=Q0(this.collection,this.deletedField,Ye(y));return w}}}),this.subs.push(this.internalReplicationState.events.error.subscribe(c=>{this.subjects.error.next(c)}),this.internalReplicationState.events.processed.down.subscribe(c=>this.subjects.received.next(c.document)),this.internalReplicationState.events.processed.up.subscribe(c=>{this.subjects.sent.next(c.newDocumentState)}),D$([this.internalReplicationState.events.active.down,this.internalReplicationState.events.active.up]).subscribe(([c,d])=>{var h=c||d;this.subjects.active.next(h)})),this.pull&&this.pull.stream$&&this.live&&this.subs.push(this.pull.stream$.subscribe({next:c=>{this.isStoppedOrPaused()||this.remoteEvents$.next(c)},error:c=>{this.subjects.error.next(c)}})),this.live||(await ev(this.internalReplicationState),await S_(this.internalReplicationState),await this._cancel()),this.callOnStart()}},t.pause=function(){return this.startQueue=this.startQueue.then(()=>{this.internalReplicationState&&this.internalReplicationState.events.paused.next(!0)}),this.startQueue},t.isPaused=function(){return!!(this.internalReplicationState&&this.internalReplicationState.events.paused.getValue())},t.isStopped=function(){return!!this.subjects.canceled.getValue()},t.isStoppedOrPaused=function(){return this.isPaused()||this.isStopped()},t.awaitInitialReplication=async function(){return await this.startPromise,ev(Ye(this.internalReplicationState))},t.awaitInSync=async function(){await this.startPromise,await ev(Ye(this.internalReplicationState));for(var r=2;r>0;)r--,await this.collection.database.requestIdlePromise(),await S_(Ye(this.internalReplicationState));return!0},t.reSync=function(){this.remoteEvents$.next("RESYNC")},t.emitEvent=function(r){this.remoteEvents$.next(r)},t.cancel=async function(){this.startQueue=this.startQueue.catch(()=>{}).then(async()=>{await this._cancel()}),await this.startQueue},t._cancel=async function(r=!1){if(this.isStopped())return no;var i=this.onCancel.map(a=>ZO(a()));return this.internalReplicationState&&await UR(this.internalReplicationState),this.metaInstance&&!r&&i.push(Ye(this.internalReplicationState).checkpointQueue.then(()=>Ye(this.metaInstance).close())),this.subs.forEach(a=>a.unsubscribe()),this.subjects.canceled.next(!0),this.subjects.active.complete(),this.subjects.canceled.complete(),this.subjects.error.complete(),this.subjects.received.complete(),this.subjects.sent.complete(),Promise.all(i)},t.remove=async function(){return this.startQueue=this.startQueue.then(async()=>{var r=await this.metaInfoPromise;await this._cancel(!0),await Ye(this.internalReplicationState).checkpointQueue.then(()=>Ye(this.metaInstance).remove()),await yU(this.collection,r.collectionName,r.schema)}),this.startQueue},e}();function G0({replicationIdentifier:e,collection:t,deletedField:n="_deleted",pull:r,push:i,live:a=!0,retryTime:s=1e3*5,waitForLeadership:u=!0,autoStart:c=!0,toggleOnDocumentVisible:d=!1}){if(Rg(tV),!r&&!i)throw ze("UT3",{collection:t.name,args:{replicationIdentifier:e}});var h=new iV(e,t,n,r,i,a,s,c,d);if(d&&typeof document<"u"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"){var v=()=>{if(!h.isStopped()){var y=document.visibilityState==="visible";y?h.start():t.database.isLeader()||h.pause()}};document.addEventListener("visibilitychange",v),h.onCancel.push(()=>document.removeEventListener("visibilitychange",v))}return aV(u,h),h}function aV(e,t){var n=e&&t.collection.database.multiInstance,r=n?t.collection.database.waitForLeadership():Vb;return r.then(()=>{t.isStopped()||t.autoStart&&t.start()})}const oV={title:"data_items schema",version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},user_id:{type:"string"},entity_type:{type:"string",enum:["task","event","project"],maxLength:10},system_status:{type:"string",enum:["active","completed","dropped","archived","waiting"],default:"active",maxLength:10},title:{type:"string"},parent_id:{type:["string","null"]},sort_order:{type:"number"},do_date:{type:["string","null"],format:"date"},due_date:{type:["string","null"],format:"date-time"},start_time:{type:["string","null"],format:"date-time"},end_time:{type:["string","null"],format:"date-time"},is_all_day:{type:"boolean"},recurrence_rule:{type:["string","null"]},original_event_id:{type:["string","null"]},properties:{type:"object",properties:{priority:{type:"string",enum:["high","normal","low"]},energy_level:{type:"string",enum:["high","medium","low"]},tags:{type:"array",items:{type:"string"}},content:{type:"string"}}},updated_at:{type:"string",format:"date-time",maxLength:35},is_deleted:{type:"boolean",default:!1},created_at:{type:"number"},completed_at:{type:["number","null"]}},required:["id","entity_type","title","updated_at","system_status"],indexes:["updated_at","entity_type","system_status"]},sV={title:"canvas_widgets schema",version:3,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},user_id:{type:"string"},canvas_id:{type:"string",maxLength:100},group_id:{type:"string"},widget_type:{type:"string",enum:["calendar_master","smart_list","matrix","detail","project_header","archive_bin","timeline"]},geometry:{type:"object",properties:{x:{type:"number"},y:{type:"number"},w:{type:"number"},h:{type:"number"},z:{type:"number"}},required:["x","y","w","h"]},data_source_config:{type:"object"},view_state:{type:"object",properties:{is_pinned:{type:"boolean"},is_collapsed:{type:"boolean"},view_mode:{type:"string"}}},updated_at:{type:"string",format:"date-time",maxLength:35},is_deleted:{type:"boolean",default:!1}},required:["id","widget_type","geometry","canvas_id","updated_at"],indexes:["canvas_id"]},uV={title:"canvas links schema",version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},source_widget_id:{type:"string"},target_widget_id:{type:"string"},link_type:{type:"string",default:"context_flow"},updated_at:{type:"string",format:"date-time"},is_deleted:{type:"boolean",default:!1},created_at:{type:"number"}},required:["id","source_widget_id","target_widget_id","created_at"]},lV={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:36},user_id:{type:"string"},is_default:{type:"boolean"},viewport_config:{type:"object"},updated_at:{type:"string"},is_deleted:{type:"boolean"}},required:["id","user_id","updated_at","is_deleted"]},tc="http://localhost:3000";Rg(LK);Rg(YY);const Qu=class Qu{constructor(){zu(this,"db",null);zu(this,"initializationPromise",null)}static getInstance(){return Qu.instance||(Qu.instance=new Qu),Qu.instance}async initialize(t){if(this.db&&this.db.name===`project_canvas_gtd_${t}`)return this.db;if(this.db&&await this.destroy(),this.initializationPromise&&(await this.initializationPromise,this.db&&this.db.name===`project_canvas_gtd_${t}`))return this.db;this.initializationPromise=this.initializeDatabase(t);try{return this.db=await this.initializationPromise,this.db}catch(n){throw console.error("Failed to initialize database:",n),this.initializationPromise=null,n}}async initializeDatabase(t){try{const n=pK(),r=`project_canvas_gtd_${t}`;console.log(`Initializing database: ${r}`);const i=await MU({name:r,storage:n,ignoreDuplicate:!0});await i.addCollections({items:{schema:oV},widgets:{schema:sV,migrationStrategies:{1:h=>h,2:h=>h,3:h=>({...h,user_id:t})}},links:{schema:uV},pages:{schema:lV}}),i.collections.items.preSave(h=>(h.updated_at=new Date().toISOString(),h),!1),i.collections.widgets.preSave(h=>(h.updated_at=new Date().toISOString(),h),!1),i.collections.links.preSave(h=>(h.updated_at=new Date().toISOString(),h),!1),i.collections.pages.preSave(h=>(h.updated_at=new Date().toISOString(),h),!1),i.items.postSave(async(h,v)=>{var y;if(h.entity_type==="task"&&((y=h.properties)!=null&&y.project_id)){const g=h.properties.project_id,w=await i.items.findOne(g).exec();if(!w)return;const x=await i.items.find({selector:{entity_type:"task","properties.project_id":g,is_deleted:!1}}).exec();if(x.length===0)return;const C=x.some(E=>E.system_status==="active"),S=x.every(E=>E.system_status==="completed");C&&w.system_status==="completed"?(console.log(`Auto-activating project ${w.title} (${g})`),await w.incrementalPatch({system_status:"active"})):S&&w.system_status!=="completed"&&(console.log(`Auto-completing project ${w.title} (${g})`),await w.incrementalPatch({system_status:"completed"}))}},!1);const a=localStorage.getItem("auth_token");console.log("[RxDB] Retrieved token from localStorage:",a?a.substring(0,20)+"...":"null");const s=a?{Authorization:`Bearer ${a}`}:{};console.log("[RxDB] Sync headers:",s),console.log("Starting replication...");const u=await G0({collection:i.pages,replicationIdentifier:"sync-pages-v1",pull:{handler:async(h,v)=>{const y=new URL(`${tc}/sync/canvas_pages/pull`);y.searchParams.set("limit",v.toString()),h&&h.updated_at?(y.searchParams.set("checkpoint_time",h.updated_at),y.searchParams.set("checkpoint_id",h.id)):(y.searchParams.set("checkpoint_time",new Date(0).toISOString()),y.searchParams.set("checkpoint_id","00000000-0000-0000-0000-000000000000"));try{const g=await fetch(y.toString(),{headers:s});if(!g.ok)throw new Error(`Page Pull failed: ${g.status}`);const w=await g.json();return{documents:w.documents.map(C=>{const{deleted:S,...E}=C;return{...E,is_deleted:S}}),checkpoint:w.checkpoint}}catch(g){throw console.error("[RxDB] Page Pull error:",g),g}}},push:{handler:async h=>{const v=`${tc}/sync/canvas_pages/push`,y=h.map(g=>{const w=g.newDocumentState,{is_deleted:x,...C}=w;return{...C,deleted:x}});try{const g=await fetch(v,{method:"POST",headers:{...s,"Content-Type":"application/json"},body:JSON.stringify(y)});if(!g.ok)throw new Error(`Page Push failed: ${g.status}`);return[]}catch(g){throw console.error("[RxDB] Page Push error:",g),g}}},live:!0,autoStart:!0,retryTime:5e3,waitForLeadership:!1});await u.awaitInitialReplication(),console.log("Initial page sync completed");const c=await G0({collection:i.items,replicationIdentifier:"sync-items-v1",pull:{handler:async(h,v)=>{const y=new URL(`${tc}/sync/data_items/pull`);y.searchParams.set("limit",v.toString()),h&&h.updated_at?(y.searchParams.set("checkpoint_time",h.updated_at),y.searchParams.set("checkpoint_id",h.id)):(y.searchParams.set("checkpoint_time",new Date(0).toISOString()),y.searchParams.set("checkpoint_id","00000000-0000-0000-0000-000000000000"));try{const g=await fetch(y.toString(),{headers:s});if(!g.ok)throw g.status===401&&window.dispatchEvent(new CustomEvent("auth:unauthorized")),new Error(`Item Pull failed: ${g.status}`);const w=await g.json();return{documents:w.documents.map(C=>{const{deleted:S,...E}=C;return{...E,is_deleted:S}}),checkpoint:w.checkpoint}}catch(g){throw console.error("[RxDB] Item Pull error:",g),g}}},push:{handler:async h=>{const v=`${tc}/sync/data_items/push`,y=h.map(g=>{const w=g.newDocumentState,{is_deleted:x,...C}=w;return{...C,deleted:x}});try{const g=await fetch(v,{method:"POST",headers:{...s,"Content-Type":"application/json"},body:JSON.stringify(y)});if(!g.ok)throw new Error(`Item Push failed: ${g.status}`);return[]}catch(g){throw console.error("[RxDB] Item Push error:",g),g}}},live:!0,autoStart:!0,retryTime:5e3}),d=await G0({collection:i.widgets,replicationIdentifier:"sync-widgets-v1",pull:{handler:async(h,v)=>{const y=new URL(`${tc}/sync/canvas_widgets/pull`);y.searchParams.set("limit",v.toString()),h&&h.updated_at?(y.searchParams.set("checkpoint_time",h.updated_at),y.searchParams.set("checkpoint_id",h.id)):(y.searchParams.set("checkpoint_time",new Date(0).toISOString()),y.searchParams.set("checkpoint_id","00000000-0000-0000-0000-000000000000"));try{const g=await fetch(y.toString(),{headers:s});if(!g.ok)throw g.status===401&&window.dispatchEvent(new CustomEvent("auth:unauthorized")),new Error(`Widget Pull failed: ${g.status}`);const w=await g.json();return console.log("[RxDB] Widget Pull success:",w.documents.length,"docs"),{documents:w.documents.map(C=>{const{deleted:S,...E}=C;return{...E,is_deleted:S}}),checkpoint:w.checkpoint}}catch(g){throw console.error("[RxDB] Widget Pull error:",g),g}}},push:{handler:async h=>{const v=`${tc}/sync/canvas_widgets/push`,y=h.map(g=>{const w=g.newDocumentState,{is_deleted:x,...C}=w;return{...C,deleted:x}});try{const g=await fetch(v,{method:"POST",headers:{...s,"Content-Type":"application/json"},body:JSON.stringify(y)});if(!g.ok)throw new Error(`Widget Push failed: ${g.status}`);return[]}catch(g){throw console.error("[RxDB] Widget Push error:",g),g}}},live:!0,autoStart:!0,retryTime:5e3});return window.syncStateItems=c,window.syncStateWidgets=d,window.syncStatePages=u,console.log("Database initialized successfully"),i}catch(n){throw console.error("Database initialization error:",n),new Error(`Failed to initialize database: ${n}`)}}async seedDefaultData(t){try{console.log("Checking default data...");const n=new Date().toISOString(),r=t.name.replace("project_canvas_gtd_","");let i;const a=await t.pages.findOne({selector:{is_default:!0}}).exec();if(a?(i=a.id,console.log("Found existing default page:",i)):(i=self.crypto.randomUUID(),console.log("Creating new default page:",i),await t.pages.insert({id:i,user_id:r,is_default:!0,viewport_config:{},updated_at:n,is_deleted:!1})),await t.widgets.count().exec()>0){console.log("Widgets already exist, skipping widget seeding.");return}console.log("Seeding default widgets...");const u=self.crypto.randomUUID(),c=24415,d=24700;await t.widgets.bulkInsert([{id:self.crypto.randomUUID(),canvas_id:i,group_id:u,widget_type:"calendar_master",geometry:{x:c,y:d,w:800,h:600},data_source_config:{},updated_at:n,is_deleted:!1,user_id:r},{id:self.crypto.randomUUID(),canvas_id:i,widget_type:"smart_list",geometry:{x:c+820,y:d,w:350,h:400},data_source_config:{title:"Inbox",criteria:{do_date:null,system_status:"active"}},updated_at:n,is_deleted:!1,user_id:r},{id:self.crypto.randomUUID(),canvas_id:i,group_id:u,widget_type:"archive_bin",geometry:{x:c+820,y:d+420,w:350,h:180},data_source_config:{},view_state:{is_collapsed:!0},updated_at:n,is_deleted:!1,user_id:r}]),console.log("Default widgets seeded successfully")}catch(n){console.error("Failed to seed default data:",n)}}getDatabase(){if(!this.db)throw new Error("Database not initialized. Call initialize() first.");return this.db}async destroy(){if(this.db){try{typeof this.db.destroy=="function"?await this.db.destroy():typeof this.db.close=="function"?await this.db.close():console.warn("Database instance does not have destroy or close method")}catch(t){console.error("Error closing database:",t)}this.db=null,this.initializationPromise=null}}};zu(Qu,"instance");let z_=Qu;const Tr=z_.getInstance(),bT=J.createContext(null),cV=({children:e})=>{const[t,n]=J.useState(null),[r,i]=J.useState(null),[a,s]=J.useState(!1);J.useEffect(()=>{const d=localStorage.getItem("auth_token"),h=localStorage.getItem("auth_user");if(d&&h){const y=JSON.parse(h);i(d),n(y),Tr.initialize(y.id).then(async g=>{await Tr.seedDefaultData(g),s(!0)}).catch(console.error)}const v=()=>{console.log("Received auth:unauthorized event, logging out..."),c()};return window.addEventListener("auth:unauthorized",v),()=>{window.removeEventListener("auth:unauthorized",v)}},[]);const u=async(d,h,v,y)=>{const g={id:v,email:d,...y};i(h),n(g),localStorage.setItem("auth_token",h),localStorage.setItem("auth_user",JSON.stringify(g));const w=await Tr.initialize(v);await Tr.seedDefaultData(w),s(!0)},c=async()=>{i(null),n(null),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),s(!1),await Tr.destroy(),window.location.reload()};return $.jsx(bT.Provider,{value:{user:t,token:r,login:u,logout:c,isAuthenticated:!!t,isDbReady:a},children:e})},dS=()=>{const e=J.useContext(bT);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};var Zv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Zv.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",u="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",v=1,y=2,g=4,w=1,x=2,C=1,S=2,E=4,P=8,N=16,T=32,U=64,W=128,re=256,pe=512,he=30,ce="...",fe=800,xe=16,Ce=1,Le=2,qe=3,We=1/0,oe=9007199254740991,_e=17976931348623157e292,G=0/0,F=4294967295,te=F-1,X=F>>>1,A=[["ary",W],["bind",C],["bindKey",S],["curry",P],["curryRight",N],["flip",pe],["partial",T],["partialRight",U],["rearg",re]],H="[object Arguments]",ae="[object Array]",ge="[object AsyncFunction]",Oe="[object Boolean]",ve="[object Date]",Ne="[object DOMException]",Ge="[object Error]",He="[object Function]",an="[object GeneratorFunction]",Et="[object Map]",At="[object Number]",dn="[object Null]",on="[object Object]",sr="[object Promise]",Yn="[object Proxy]",sn="[object RegExp]",_t="[object Set]",Vn="[object String]",Xn="[object Symbol]",ra="[object Undefined]",Qn="[object WeakMap]",Gn="[object WeakSet]",Sn="[object ArrayBuffer]",un="[object DataView]",ur="[object Float32Array]",si="[object Float64Array]",xn="[object Int8Array]",ia="[object Int16Array]",lo="[object Int32Array]",Wr="[object Uint8Array]",Fe="[object Uint8ClampedArray]",Oi="[object Uint16Array]",ui="[object Uint32Array]",co=/\b__p \+= '';/g,Te=/\b(__p \+=) '' \+/g,cu=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fu=/&(?:amp|lt|gt|quot|#39);/g,Xt=/[&<>"']/g,Ln=RegExp(fu.source),On=RegExp(Xt.source),$i=/<%-([\s\S]+?)%>/g,lr=/<%([\s\S]+?)%>/g,Qt=/<%=([\s\S]+?)%>/g,$n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ri=/^\w*$/,qt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dt=/[\\^$.*+?()[\]{}|]/g,bt=RegExp(dt.source),xr=/^\s+/,Ni=/\s/,Ti=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Er=/\{\n\/\* \[wrapped with (.+)\] \*/,fo=/,? & /,Ur=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zo=/[()=,{}\[\]\/\s]/,Ma=/\\(\\)?/g,El=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,up=/\w*$/,Ia=/^[-+]0x[0-9a-f]+$/i,lp=/^0b[01]+$/i,ho=/^\[object .+?Constructor\]$/,cp=/^0o[0-7]+$/i,_f=/^(?:0|[1-9]\d*)$/,Gt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mi=/($^)/,aa=/['\n\r\u2028\u2029\\]/g,du="\\ud800-\\udfff",es="\\u0300-\\u036f",Pl="\\ufe20-\\ufe2f",bf="\\u20d0-\\u20ff",kl=es+Pl+bf,Aa="\\u2700-\\u27bf",Sf="a-z\\xdf-\\xf6\\xf8-\\xff",Cl="\\xac\\xb1\\xd7\\xf7",fp="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ht="\\u2000-\\u206f",dp=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xf="A-Z\\xc0-\\xd6\\xd8-\\xde",Ef="\\ufe0e\\ufe0f",$t=Cl+fp+ht+dp,po="[']",hu="["+du+"]",mo="["+$t+"]",ts="["+kl+"]",Dl="\\d+",Ol="["+Aa+"]",Pf="["+Sf+"]",pu="[^"+du+$t+Dl+Aa+Sf+xf+"]",$l="\\ud83c[\\udffb-\\udfff]",oa="(?:"+ts+"|"+$l+")",ns="[^"+du+"]",Rl="(?:\\ud83c[\\udde6-\\uddff]){2}",kf="[\\ud800-\\udbff][\\udc00-\\udfff]",lt="["+xf+"]",Nl="\\u200d",hp="(?:"+Pf+"|"+pu+")",Zg="(?:"+lt+"|"+pu+")",cr="(?:"+po+"(?:d|ll|m|re|s|t|ve))?",vo="(?:"+po+"(?:D|LL|M|RE|S|T|VE))?",mu=oa+"?",sa="["+Ef+"]?",pp="(?:"+Nl+"(?:"+[ns,Rl,kf].join("|")+")"+sa+mu+")*",mp="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",En="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",li=sa+mu+pp,vu="(?:"+[Ol,Rl,kf].join("|")+")"+li,gu="(?:"+[ns+ts+"?",ts,Rl,kf,hu].join("|")+")",Cf=RegExp(po,"g"),ja=RegExp(ts,"g"),Df=RegExp($l+"(?="+$l+")|"+gu+li,"g"),Ii=RegExp([lt+"?"+Pf+"+"+cr+"(?="+[mo,lt,"$"].join("|")+")",Zg+"+"+vo+"(?="+[mo,lt+hp,"$"].join("|")+")",lt+"?"+hp+"+"+cr,lt+"+"+vo,En,mp,Dl,vu].join("|"),"g"),Of=RegExp("["+Nl+du+kl+Ef+"]"),vp=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$f=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yu=-1,Pt={};Pt[ur]=Pt[si]=Pt[xn]=Pt[ia]=Pt[lo]=Pt[Wr]=Pt[Fe]=Pt[Oi]=Pt[ui]=!0,Pt[H]=Pt[ae]=Pt[Sn]=Pt[Oe]=Pt[un]=Pt[ve]=Pt[Ge]=Pt[He]=Pt[Et]=Pt[At]=Pt[on]=Pt[sn]=Pt[_t]=Pt[Vn]=Pt[Qn]=!1;var kt={};kt[H]=kt[ae]=kt[Sn]=kt[un]=kt[Oe]=kt[ve]=kt[ur]=kt[si]=kt[xn]=kt[ia]=kt[lo]=kt[Et]=kt[At]=kt[on]=kt[sn]=kt[_t]=kt[Vn]=kt[Xn]=kt[Wr]=kt[Fe]=kt[Oi]=kt[ui]=!0,kt[Ge]=kt[He]=kt[Qn]=!1;var ey={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},wu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ty={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ny={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Tl=parseFloat,Ml=parseInt,Il=typeof qu=="object"&&qu&&qu.Object===Object&&qu,ry=typeof self=="object"&&self&&self.Object===Object&&self,Rn=Il||ry||Function("return this")(),Rf=t&&!t.nodeType&&t,ua=Rf&&!0&&e&&!e.nodeType&&e,Al=ua&&ua.exports===Rf,jl=Al&&Il.process,Jn=function(){try{var R=ua&&ua.require&&ua.require("util").types;return R||jl&&jl.binding&&jl.binding("util")}catch{}}(),_u=Jn&&Jn.isArrayBuffer,bu=Jn&&Jn.isDate,Nf=Jn&&Jn.isMap,gp=Jn&&Jn.isRegExp,Su=Jn&&Jn.isSet,Ll=Jn&&Jn.isTypedArray;function Zn(R,z,M){switch(M.length){case 0:return R.call(z);case 1:return R.call(z,M[0]);case 2:return R.call(z,M[0],M[1]);case 3:return R.call(z,M[0],M[1],M[2])}return R.apply(z,M)}function Tf(R,z,M,V){for(var K=-1,Z=R==null?0:R.length;++K<Z;){var ie=R[K];z(V,ie,M(ie),R)}return V}function fr(R,z){for(var M=-1,V=R==null?0:R.length;++M<V&&z(R[M],M,R)!==!1;);return R}function zn(R,z){for(var M=R==null?0:R.length;M--&&z(R[M],M,R)!==!1;);return R}function rs(R,z){for(var M=-1,V=R==null?0:R.length;++M<V;)if(!z(R[M],M,R))return!1;return!0}function Hr(R,z){for(var M=-1,V=R==null?0:R.length,K=0,Z=[];++M<V;){var ie=R[M];z(ie,M,R)&&(Z[K++]=ie)}return Z}function xu(R,z){var M=R==null?0:R.length;return!!M&&os(R,z,0)>-1}function is(R,z,M){for(var V=-1,K=R==null?0:R.length;++V<K;)if(M(z,R[V]))return!0;return!1}function jt(R,z){for(var M=-1,V=R==null?0:R.length,K=Array(V);++M<V;)K[M]=z(R[M],M,R);return K}function la(R,z){for(var M=-1,V=z.length,K=R.length;++M<V;)R[K+M]=z[M];return R}function as(R,z,M,V){var K=-1,Z=R==null?0:R.length;for(V&&Z&&(M=R[++K]);++K<Z;)M=z(M,R[K],K,R);return M}function Mf(R,z,M,V){var K=R==null?0:R.length;for(V&&K&&(M=R[--K]);K--;)M=z(M,R[K],K,R);return M}function ca(R,z){for(var M=-1,V=R==null?0:R.length;++M<V;)if(z(R[M],M,R))return!0;return!1}var If=ku("length");function Af(R){return R.split("")}function zl(R){return R.match(Ur)||[]}function Fl(R,z,M){var V;return M(R,function(K,Z,ie){if(z(K,Z,ie))return V=Z,!1}),V}function Eu(R,z,M,V){for(var K=R.length,Z=M+(V?1:-1);V?Z--:++Z<K;)if(z(R[Z],Z,R))return Z;return-1}function os(R,z,M){return z===z?La(R,z,M):Eu(R,Pu,M)}function jf(R,z,M,V){for(var K=M-1,Z=R.length;++K<Z;)if(V(R[K],z))return K;return-1}function Pu(R){return R!==R}function yp(R,z){var M=R==null?0:R.length;return M?Lf(R,z)/M:G}function ku(R){return function(z){return z==null?n:z[R]}}function Cu(R){return function(z){return R==null?n:R[z]}}function wp(R,z,M,V,K){return K(R,function(Z,ie,Q){M=V?(V=!1,Z):z(M,Z,ie,Q)}),M}function _p(R,z){var M=R.length;for(R.sort(z);M--;)R[M]=R[M].value;return R}function Lf(R,z){for(var M,V=-1,K=R.length;++V<K;){var Z=z(R[V]);Z!==n&&(M=M===n?Z:M+Z)}return M}function Bl(R,z){for(var M=-1,V=Array(R);++M<R;)V[M]=z(M);return V}function bp(R,z){return jt(z,function(M){return[M,R[M]]})}function Sp(R){return R&&R.slice(0,_(R)+1).replace(xr,"")}function dr(R){return function(z){return R(z)}}function Du(R,z){return jt(z,function(M){return R[M]})}function ss(R,z){return R.has(z)}function zf(R,z){for(var M=-1,V=R.length;++M<V&&os(z,R[M],0)>-1;);return M}function xp(R,z){for(var M=R.length;M--&&os(z,R[M],0)>-1;);return M}function iy(R,z){for(var M=R.length,V=0;M--;)R[M]===z&&++V;return V}var ay=Cu(ey),Wl=Cu(wu);function fa(R){return"\\"+ny[R]}function Jt(R,z){return R==null?n:R[z]}function da(R){return Of.test(R)}function Kr(R){return vp.test(R)}function oy(R){for(var z,M=[];!(z=R.next()).done;)M.push(z.value);return M}function Ou(R){var z=-1,M=Array(R.size);return R.forEach(function(V,K){M[++z]=[K,V]}),M}function Ff(R,z){return function(M){return R(z(M))}}function hr(R,z){for(var M=-1,V=R.length,K=0,Z=[];++M<V;){var ie=R[M];(ie===z||ie===h)&&(R[M]=h,Z[K++]=M)}return Z}function us(R){var z=-1,M=Array(R.size);return R.forEach(function(V){M[++z]=V}),M}function ls(R){var z=-1,M=Array(R.size);return R.forEach(function(V){M[++z]=[V,V]}),M}function La(R,z,M){for(var V=M-1,K=R.length;++V<K;)if(R[V]===z)return V;return-1}function Ep(R,z,M){for(var V=M+1;V--;)if(R[V]===z)return V;return V}function f(R){return da(R)?D(R):If(R)}function m(R){return da(R)?I(R):Af(R)}function _(R){for(var z=R.length;z--&&Ni.test(R.charAt(z)););return z}var k=Cu(ty);function D(R){for(var z=Df.lastIndex=0;Df.test(R);)++z;return z}function I(R){return R.match(Df)||[]}function B(R){return R.match(Ii)||[]}var Y=function R(z){z=z==null?Rn:ne.defaults(Rn.Object(),z,ne.pick(Rn,$f));var M=z.Array,V=z.Date,K=z.Error,Z=z.Function,ie=z.Math,Q=z.Object,ue=z.RegExp,de=z.String,le=z.TypeError,me=M.prototype,Pe=Z.prototype,$e=Q.prototype,Ee=z["__core-js_shared__"],De=Pe.toString,be=$e.hasOwnProperty,Re=0,Ae=function(){var o=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Ze=$e.toString,at=De.call(Q),ot=Rn._,Pr=ue("^"+De.call(be).replace(dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Je=Al?z.Buffer:n,Wt=z.Symbol,hn=z.Uint8Array,$u=Je?Je.allocUnsafe:n,Pn=Ff(Q.getPrototypeOf,Q),za=Q.create,Ul=$e.propertyIsEnumerable,Pp=me.splice,DS=Wt?Wt.isConcatSpreadable:n,Bf=Wt?Wt.iterator:n,Ru=Wt?Wt.toStringTag:n,kp=function(){try{var o=Au(Q,"defineProperty");return o({},"",{}),o}catch{}}(),IM=z.clearTimeout!==Rn.clearTimeout&&z.clearTimeout,AM=V&&V.now!==Rn.Date.now&&V.now,jM=z.setTimeout!==Rn.setTimeout&&z.setTimeout,Cp=ie.ceil,Dp=ie.floor,sy=Q.getOwnPropertySymbols,LM=Je?Je.isBuffer:n,OS=z.isFinite,zM=me.join,FM=Ff(Q.keys,Q),Nn=ie.max,pr=ie.min,BM=V.now,WM=z.parseInt,$S=ie.random,UM=me.reverse,uy=Au(z,"DataView"),Wf=Au(z,"Map"),ly=Au(z,"Promise"),Hl=Au(z,"Set"),Uf=Au(z,"WeakMap"),Hf=Au(Q,"create"),Op=Uf&&new Uf,Kl={},HM=ju(uy),KM=ju(Wf),qM=ju(ly),YM=ju(Hl),VM=ju(Uf),$p=Wt?Wt.prototype:n,Kf=$p?$p.valueOf:n,RS=$p?$p.toString:n;function j(o){if(ln(o)&&!tt(o)&&!(o instanceof gt)){if(o instanceof Ai)return o;if(be.call(o,"__wrapped__"))return Nx(o)}return new Ai(o)}var ql=function(){function o(){}return function(l){if(!Zt(l))return{};if(za)return za(l);o.prototype=l;var p=new o;return o.prototype=n,p}}();function Rp(){}function Ai(o,l){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=n}j.templateSettings={escape:$i,evaluate:lr,interpolate:Qt,variable:"",imports:{_:j}},j.prototype=Rp.prototype,j.prototype.constructor=j,Ai.prototype=ql(Rp.prototype),Ai.prototype.constructor=Ai;function gt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=F,this.__views__=[]}function XM(){var o=new gt(this.__wrapped__);return o.__actions__=qr(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=qr(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=qr(this.__views__),o}function QM(){if(this.__filtered__){var o=new gt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function GM(){var o=this.__wrapped__.value(),l=this.__dir__,p=tt(o),b=l<0,O=p?o.length:0,L=l2(0,O,this.__views__),q=L.start,ee=L.end,se=ee-q,ye=b?ee:q-1,we=this.__iteratees__,Se=we.length,Ie=0,Ue=pr(se,this.__takeCount__);if(!p||!b&&O==se&&Ue==se)return tx(o,this.__actions__);var Xe=[];e:for(;se--&&Ie<Ue;){ye+=l;for(var st=-1,Qe=o[ye];++st<Se;){var pt=we[st],yt=pt.iteratee,di=pt.type,Dr=yt(Qe);if(di==Le)Qe=Dr;else if(!Dr){if(di==Ce)continue e;break e}}Xe[Ie++]=Qe}return Xe}gt.prototype=ql(Rp.prototype),gt.prototype.constructor=gt;function Nu(o){var l=-1,p=o==null?0:o.length;for(this.clear();++l<p;){var b=o[l];this.set(b[0],b[1])}}function JM(){this.__data__=Hf?Hf(null):{},this.size=0}function ZM(o){var l=this.has(o)&&delete this.__data__[o];return this.size-=l?1:0,l}function eI(o){var l=this.__data__;if(Hf){var p=l[o];return p===c?n:p}return be.call(l,o)?l[o]:n}function tI(o){var l=this.__data__;return Hf?l[o]!==n:be.call(l,o)}function nI(o,l){var p=this.__data__;return this.size+=this.has(o)?0:1,p[o]=Hf&&l===n?c:l,this}Nu.prototype.clear=JM,Nu.prototype.delete=ZM,Nu.prototype.get=eI,Nu.prototype.has=tI,Nu.prototype.set=nI;function go(o){var l=-1,p=o==null?0:o.length;for(this.clear();++l<p;){var b=o[l];this.set(b[0],b[1])}}function rI(){this.__data__=[],this.size=0}function iI(o){var l=this.__data__,p=Np(l,o);if(p<0)return!1;var b=l.length-1;return p==b?l.pop():Pp.call(l,p,1),--this.size,!0}function aI(o){var l=this.__data__,p=Np(l,o);return p<0?n:l[p][1]}function oI(o){return Np(this.__data__,o)>-1}function sI(o,l){var p=this.__data__,b=Np(p,o);return b<0?(++this.size,p.push([o,l])):p[b][1]=l,this}go.prototype.clear=rI,go.prototype.delete=iI,go.prototype.get=aI,go.prototype.has=oI,go.prototype.set=sI;function yo(o){var l=-1,p=o==null?0:o.length;for(this.clear();++l<p;){var b=o[l];this.set(b[0],b[1])}}function uI(){this.size=0,this.__data__={hash:new Nu,map:new(Wf||go),string:new Nu}}function lI(o){var l=Hp(this,o).delete(o);return this.size-=l?1:0,l}function cI(o){return Hp(this,o).get(o)}function fI(o){return Hp(this,o).has(o)}function dI(o,l){var p=Hp(this,o),b=p.size;return p.set(o,l),this.size+=p.size==b?0:1,this}yo.prototype.clear=uI,yo.prototype.delete=lI,yo.prototype.get=cI,yo.prototype.has=fI,yo.prototype.set=dI;function Tu(o){var l=-1,p=o==null?0:o.length;for(this.__data__=new yo;++l<p;)this.add(o[l])}function hI(o){return this.__data__.set(o,c),this}function pI(o){return this.__data__.has(o)}Tu.prototype.add=Tu.prototype.push=hI,Tu.prototype.has=pI;function ha(o){var l=this.__data__=new go(o);this.size=l.size}function mI(){this.__data__=new go,this.size=0}function vI(o){var l=this.__data__,p=l.delete(o);return this.size=l.size,p}function gI(o){return this.__data__.get(o)}function yI(o){return this.__data__.has(o)}function wI(o,l){var p=this.__data__;if(p instanceof go){var b=p.__data__;if(!Wf||b.length<i-1)return b.push([o,l]),this.size=++p.size,this;p=this.__data__=new yo(b)}return p.set(o,l),this.size=p.size,this}ha.prototype.clear=mI,ha.prototype.delete=vI,ha.prototype.get=gI,ha.prototype.has=yI,ha.prototype.set=wI;function NS(o,l){var p=tt(o),b=!p&&Lu(o),O=!p&&!b&&ps(o),L=!p&&!b&&!O&&Ql(o),q=p||b||O||L,ee=q?Bl(o.length,de):[],se=ee.length;for(var ye in o)(l||be.call(o,ye))&&!(q&&(ye=="length"||O&&(ye=="offset"||ye=="parent")||L&&(ye=="buffer"||ye=="byteLength"||ye=="byteOffset")||So(ye,se)))&&ee.push(ye);return ee}function TS(o){var l=o.length;return l?o[_y(0,l-1)]:n}function _I(o,l){return Kp(qr(o),Mu(l,0,o.length))}function bI(o){return Kp(qr(o))}function cy(o,l,p){(p!==n&&!pa(o[l],p)||p===n&&!(l in o))&&wo(o,l,p)}function qf(o,l,p){var b=o[l];(!(be.call(o,l)&&pa(b,p))||p===n&&!(l in o))&&wo(o,l,p)}function Np(o,l){for(var p=o.length;p--;)if(pa(o[p][0],l))return p;return-1}function SI(o,l,p,b){return cs(o,function(O,L,q){l(b,O,p(O),q)}),b}function MS(o,l){return o&&Ba(l,Fn(l),o)}function xI(o,l){return o&&Ba(l,Vr(l),o)}function wo(o,l,p){l=="__proto__"&&kp?kp(o,l,{configurable:!0,enumerable:!0,value:p,writable:!0}):o[l]=p}function fy(o,l){for(var p=-1,b=l.length,O=M(b),L=o==null;++p<b;)O[p]=L?n:Ky(o,l[p]);return O}function Mu(o,l,p){return o===o&&(p!==n&&(o=o<=p?o:p),l!==n&&(o=o>=l?o:l)),o}function ji(o,l,p,b,O,L){var q,ee=l&v,se=l&y,ye=l&g;if(p&&(q=O?p(o,b,O,L):p(o)),q!==n)return q;if(!Zt(o))return o;var we=tt(o);if(we){if(q=f2(o),!ee)return qr(o,q)}else{var Se=mr(o),Ie=Se==He||Se==an;if(ps(o))return ix(o,ee);if(Se==on||Se==H||Ie&&!O){if(q=se||Ie?{}:xx(o),!ee)return se?e2(o,xI(q,o)):ZI(o,MS(q,o))}else{if(!kt[Se])return O?o:{};q=d2(o,Se,ee)}}L||(L=new ha);var Ue=L.get(o);if(Ue)return Ue;L.set(o,q),Jx(o)?o.forEach(function(Qe){q.add(ji(Qe,l,p,Qe,o,L))}):Qx(o)&&o.forEach(function(Qe,pt){q.set(pt,ji(Qe,l,p,pt,o,L))});var Xe=ye?se?Ry:$y:se?Vr:Fn,st=we?n:Xe(o);return fr(st||o,function(Qe,pt){st&&(pt=Qe,Qe=o[pt]),qf(q,pt,ji(Qe,l,p,pt,o,L))}),q}function EI(o){var l=Fn(o);return function(p){return IS(p,o,l)}}function IS(o,l,p){var b=p.length;if(o==null)return!b;for(o=Q(o);b--;){var O=p[b],L=l[O],q=o[O];if(q===n&&!(O in o)||!L(q))return!1}return!0}function AS(o,l,p){if(typeof o!="function")throw new le(s);return Zf(function(){o.apply(n,p)},l)}function Yf(o,l,p,b){var O=-1,L=xu,q=!0,ee=o.length,se=[],ye=l.length;if(!ee)return se;p&&(l=jt(l,dr(p))),b?(L=is,q=!1):l.length>=i&&(L=ss,q=!1,l=new Tu(l));e:for(;++O<ee;){var we=o[O],Se=p==null?we:p(we);if(we=b||we!==0?we:0,q&&Se===Se){for(var Ie=ye;Ie--;)if(l[Ie]===Se)continue e;se.push(we)}else L(l,Se,b)||se.push(we)}return se}var cs=lx(Fa),jS=lx(hy,!0);function PI(o,l){var p=!0;return cs(o,function(b,O,L){return p=!!l(b,O,L),p}),p}function Tp(o,l,p){for(var b=-1,O=o.length;++b<O;){var L=o[b],q=l(L);if(q!=null&&(ee===n?q===q&&!fi(q):p(q,ee)))var ee=q,se=L}return se}function kI(o,l,p,b){var O=o.length;for(p=nt(p),p<0&&(p=-p>O?0:O+p),b=b===n||b>O?O:nt(b),b<0&&(b+=O),b=p>b?0:eE(b);p<b;)o[p++]=l;return o}function LS(o,l){var p=[];return cs(o,function(b,O,L){l(b,O,L)&&p.push(b)}),p}function er(o,l,p,b,O){var L=-1,q=o.length;for(p||(p=p2),O||(O=[]);++L<q;){var ee=o[L];l>0&&p(ee)?l>1?er(ee,l-1,p,b,O):la(O,ee):b||(O[O.length]=ee)}return O}var dy=cx(),zS=cx(!0);function Fa(o,l){return o&&dy(o,l,Fn)}function hy(o,l){return o&&zS(o,l,Fn)}function Mp(o,l){return Hr(l,function(p){return xo(o[p])})}function Iu(o,l){l=ds(l,o);for(var p=0,b=l.length;o!=null&&p<b;)o=o[Wa(l[p++])];return p&&p==b?o:n}function FS(o,l,p){var b=l(o);return tt(o)?b:la(b,p(o))}function kr(o){return o==null?o===n?ra:dn:Ru&&Ru in Q(o)?u2(o):b2(o)}function py(o,l){return o>l}function CI(o,l){return o!=null&&be.call(o,l)}function DI(o,l){return o!=null&&l in Q(o)}function OI(o,l,p){return o>=pr(l,p)&&o<Nn(l,p)}function my(o,l,p){for(var b=p?is:xu,O=o[0].length,L=o.length,q=L,ee=M(L),se=1/0,ye=[];q--;){var we=o[q];q&&l&&(we=jt(we,dr(l))),se=pr(we.length,se),ee[q]=!p&&(l||O>=120&&we.length>=120)?new Tu(q&&we):n}we=o[0];var Se=-1,Ie=ee[0];e:for(;++Se<O&&ye.length<se;){var Ue=we[Se],Xe=l?l(Ue):Ue;if(Ue=p||Ue!==0?Ue:0,!(Ie?ss(Ie,Xe):b(ye,Xe,p))){for(q=L;--q;){var st=ee[q];if(!(st?ss(st,Xe):b(o[q],Xe,p)))continue e}Ie&&Ie.push(Xe),ye.push(Ue)}}return ye}function $I(o,l,p,b){return Fa(o,function(O,L,q){l(b,p(O),L,q)}),b}function Vf(o,l,p){l=ds(l,o),o=Cx(o,l);var b=o==null?o:o[Wa(zi(l))];return b==null?n:Zn(b,o,p)}function BS(o){return ln(o)&&kr(o)==H}function RI(o){return ln(o)&&kr(o)==Sn}function NI(o){return ln(o)&&kr(o)==ve}function Xf(o,l,p,b,O){return o===l?!0:o==null||l==null||!ln(o)&&!ln(l)?o!==o&&l!==l:TI(o,l,p,b,Xf,O)}function TI(o,l,p,b,O,L){var q=tt(o),ee=tt(l),se=q?ae:mr(o),ye=ee?ae:mr(l);se=se==H?on:se,ye=ye==H?on:ye;var we=se==on,Se=ye==on,Ie=se==ye;if(Ie&&ps(o)){if(!ps(l))return!1;q=!0,we=!1}if(Ie&&!we)return L||(L=new ha),q||Ql(o)?_x(o,l,p,b,O,L):o2(o,l,se,p,b,O,L);if(!(p&w)){var Ue=we&&be.call(o,"__wrapped__"),Xe=Se&&be.call(l,"__wrapped__");if(Ue||Xe){var st=Ue?o.value():o,Qe=Xe?l.value():l;return L||(L=new ha),O(st,Qe,p,b,L)}}return Ie?(L||(L=new ha),s2(o,l,p,b,O,L)):!1}function MI(o){return ln(o)&&mr(o)==Et}function vy(o,l,p,b){var O=p.length,L=O,q=!b;if(o==null)return!L;for(o=Q(o);O--;){var ee=p[O];if(q&&ee[2]?ee[1]!==o[ee[0]]:!(ee[0]in o))return!1}for(;++O<L;){ee=p[O];var se=ee[0],ye=o[se],we=ee[1];if(q&&ee[2]){if(ye===n&&!(se in o))return!1}else{var Se=new ha;if(b)var Ie=b(ye,we,se,o,l,Se);if(!(Ie===n?Xf(we,ye,w|x,b,Se):Ie))return!1}}return!0}function WS(o){if(!Zt(o)||v2(o))return!1;var l=xo(o)?Pr:ho;return l.test(ju(o))}function II(o){return ln(o)&&kr(o)==sn}function AI(o){return ln(o)&&mr(o)==_t}function jI(o){return ln(o)&&Gp(o.length)&&!!Pt[kr(o)]}function US(o){return typeof o=="function"?o:o==null?Xr:typeof o=="object"?tt(o)?qS(o[0],o[1]):KS(o):fE(o)}function gy(o){if(!Jf(o))return FM(o);var l=[];for(var p in Q(o))be.call(o,p)&&p!="constructor"&&l.push(p);return l}function LI(o){if(!Zt(o))return _2(o);var l=Jf(o),p=[];for(var b in o)b=="constructor"&&(l||!be.call(o,b))||p.push(b);return p}function yy(o,l){return o<l}function HS(o,l){var p=-1,b=Yr(o)?M(o.length):[];return cs(o,function(O,L,q){b[++p]=l(O,L,q)}),b}function KS(o){var l=Ty(o);return l.length==1&&l[0][2]?Px(l[0][0],l[0][1]):function(p){return p===o||vy(p,o,l)}}function qS(o,l){return Iy(o)&&Ex(l)?Px(Wa(o),l):function(p){var b=Ky(p,o);return b===n&&b===l?qy(p,o):Xf(l,b,w|x)}}function Ip(o,l,p,b,O){o!==l&&dy(l,function(L,q){if(O||(O=new ha),Zt(L))zI(o,l,q,p,Ip,b,O);else{var ee=b?b(jy(o,q),L,q+"",o,l,O):n;ee===n&&(ee=L),cy(o,q,ee)}},Vr)}function zI(o,l,p,b,O,L,q){var ee=jy(o,p),se=jy(l,p),ye=q.get(se);if(ye){cy(o,p,ye);return}var we=L?L(ee,se,p+"",o,l,q):n,Se=we===n;if(Se){var Ie=tt(se),Ue=!Ie&&ps(se),Xe=!Ie&&!Ue&&Ql(se);we=se,Ie||Ue||Xe?tt(ee)?we=ee:pn(ee)?we=qr(ee):Ue?(Se=!1,we=ix(se,!0)):Xe?(Se=!1,we=ax(se,!0)):we=[]:ed(se)||Lu(se)?(we=ee,Lu(ee)?we=tE(ee):(!Zt(ee)||xo(ee))&&(we=xx(se))):Se=!1}Se&&(q.set(se,we),O(we,se,b,L,q),q.delete(se)),cy(o,p,we)}function YS(o,l){var p=o.length;if(p)return l+=l<0?p:0,So(l,p)?o[l]:n}function VS(o,l,p){l.length?l=jt(l,function(L){return tt(L)?function(q){return Iu(q,L.length===1?L[0]:L)}:L}):l=[Xr];var b=-1;l=jt(l,dr(Ve()));var O=HS(o,function(L,q,ee){var se=jt(l,function(ye){return ye(L)});return{criteria:se,index:++b,value:L}});return _p(O,function(L,q){return JI(L,q,p)})}function FI(o,l){return XS(o,l,function(p,b){return qy(o,b)})}function XS(o,l,p){for(var b=-1,O=l.length,L={};++b<O;){var q=l[b],ee=Iu(o,q);p(ee,q)&&Qf(L,ds(q,o),ee)}return L}function BI(o){return function(l){return Iu(l,o)}}function wy(o,l,p,b){var O=b?jf:os,L=-1,q=l.length,ee=o;for(o===l&&(l=qr(l)),p&&(ee=jt(o,dr(p)));++L<q;)for(var se=0,ye=l[L],we=p?p(ye):ye;(se=O(ee,we,se,b))>-1;)ee!==o&&Pp.call(ee,se,1),Pp.call(o,se,1);return o}function QS(o,l){for(var p=o?l.length:0,b=p-1;p--;){var O=l[p];if(p==b||O!==L){var L=O;So(O)?Pp.call(o,O,1):xy(o,O)}}return o}function _y(o,l){return o+Dp($S()*(l-o+1))}function WI(o,l,p,b){for(var O=-1,L=Nn(Cp((l-o)/(p||1)),0),q=M(L);L--;)q[b?L:++O]=o,o+=p;return q}function by(o,l){var p="";if(!o||l<1||l>oe)return p;do l%2&&(p+=o),l=Dp(l/2),l&&(o+=o);while(l);return p}function ct(o,l){return Ly(kx(o,l,Xr),o+"")}function UI(o){return TS(Gl(o))}function HI(o,l){var p=Gl(o);return Kp(p,Mu(l,0,p.length))}function Qf(o,l,p,b){if(!Zt(o))return o;l=ds(l,o);for(var O=-1,L=l.length,q=L-1,ee=o;ee!=null&&++O<L;){var se=Wa(l[O]),ye=p;if(se==="__proto__"||se==="constructor"||se==="prototype")return o;if(O!=q){var we=ee[se];ye=b?b(we,se,ee):n,ye===n&&(ye=Zt(we)?we:So(l[O+1])?[]:{})}qf(ee,se,ye),ee=ee[se]}return o}var GS=Op?function(o,l){return Op.set(o,l),o}:Xr,KI=kp?function(o,l){return kp(o,"toString",{configurable:!0,enumerable:!1,value:Vy(l),writable:!0})}:Xr;function qI(o){return Kp(Gl(o))}function Li(o,l,p){var b=-1,O=o.length;l<0&&(l=-l>O?0:O+l),p=p>O?O:p,p<0&&(p+=O),O=l>p?0:p-l>>>0,l>>>=0;for(var L=M(O);++b<O;)L[b]=o[b+l];return L}function YI(o,l){var p;return cs(o,function(b,O,L){return p=l(b,O,L),!p}),!!p}function Ap(o,l,p){var b=0,O=o==null?b:o.length;if(typeof l=="number"&&l===l&&O<=X){for(;b<O;){var L=b+O>>>1,q=o[L];q!==null&&!fi(q)&&(p?q<=l:q<l)?b=L+1:O=L}return O}return Sy(o,l,Xr,p)}function Sy(o,l,p,b){var O=0,L=o==null?0:o.length;if(L===0)return 0;l=p(l);for(var q=l!==l,ee=l===null,se=fi(l),ye=l===n;O<L;){var we=Dp((O+L)/2),Se=p(o[we]),Ie=Se!==n,Ue=Se===null,Xe=Se===Se,st=fi(Se);if(q)var Qe=b||Xe;else ye?Qe=Xe&&(b||Ie):ee?Qe=Xe&&Ie&&(b||!Ue):se?Qe=Xe&&Ie&&!Ue&&(b||!st):Ue||st?Qe=!1:Qe=b?Se<=l:Se<l;Qe?O=we+1:L=we}return pr(L,te)}function JS(o,l){for(var p=-1,b=o.length,O=0,L=[];++p<b;){var q=o[p],ee=l?l(q):q;if(!p||!pa(ee,se)){var se=ee;L[O++]=q===0?0:q}}return L}function ZS(o){return typeof o=="number"?o:fi(o)?G:+o}function ci(o){if(typeof o=="string")return o;if(tt(o))return jt(o,ci)+"";if(fi(o))return RS?RS.call(o):"";var l=o+"";return l=="0"&&1/o==-We?"-0":l}function fs(o,l,p){var b=-1,O=xu,L=o.length,q=!0,ee=[],se=ee;if(p)q=!1,O=is;else if(L>=i){var ye=l?null:i2(o);if(ye)return us(ye);q=!1,O=ss,se=new Tu}else se=l?[]:ee;e:for(;++b<L;){var we=o[b],Se=l?l(we):we;if(we=p||we!==0?we:0,q&&Se===Se){for(var Ie=se.length;Ie--;)if(se[Ie]===Se)continue e;l&&se.push(Se),ee.push(we)}else O(se,Se,p)||(se!==ee&&se.push(Se),ee.push(we))}return ee}function xy(o,l){return l=ds(l,o),o=Cx(o,l),o==null||delete o[Wa(zi(l))]}function ex(o,l,p,b){return Qf(o,l,p(Iu(o,l)),b)}function jp(o,l,p,b){for(var O=o.length,L=b?O:-1;(b?L--:++L<O)&&l(o[L],L,o););return p?Li(o,b?0:L,b?L+1:O):Li(o,b?L+1:0,b?O:L)}function tx(o,l){var p=o;return p instanceof gt&&(p=p.value()),as(l,function(b,O){return O.func.apply(O.thisArg,la([b],O.args))},p)}function Ey(o,l,p){var b=o.length;if(b<2)return b?fs(o[0]):[];for(var O=-1,L=M(b);++O<b;)for(var q=o[O],ee=-1;++ee<b;)ee!=O&&(L[O]=Yf(L[O]||q,o[ee],l,p));return fs(er(L,1),l,p)}function nx(o,l,p){for(var b=-1,O=o.length,L=l.length,q={};++b<O;){var ee=b<L?l[b]:n;p(q,o[b],ee)}return q}function Py(o){return pn(o)?o:[]}function ky(o){return typeof o=="function"?o:Xr}function ds(o,l){return tt(o)?o:Iy(o,l)?[o]:Rx(St(o))}var VI=ct;function hs(o,l,p){var b=o.length;return p=p===n?b:p,!l&&p>=b?o:Li(o,l,p)}var rx=IM||function(o){return Rn.clearTimeout(o)};function ix(o,l){if(l)return o.slice();var p=o.length,b=$u?$u(p):new o.constructor(p);return o.copy(b),b}function Cy(o){var l=new o.constructor(o.byteLength);return new hn(l).set(new hn(o)),l}function XI(o,l){var p=l?Cy(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.byteLength)}function QI(o){var l=new o.constructor(o.source,up.exec(o));return l.lastIndex=o.lastIndex,l}function GI(o){return Kf?Q(Kf.call(o)):{}}function ax(o,l){var p=l?Cy(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.length)}function ox(o,l){if(o!==l){var p=o!==n,b=o===null,O=o===o,L=fi(o),q=l!==n,ee=l===null,se=l===l,ye=fi(l);if(!ee&&!ye&&!L&&o>l||L&&q&&se&&!ee&&!ye||b&&q&&se||!p&&se||!O)return 1;if(!b&&!L&&!ye&&o<l||ye&&p&&O&&!b&&!L||ee&&p&&O||!q&&O||!se)return-1}return 0}function JI(o,l,p){for(var b=-1,O=o.criteria,L=l.criteria,q=O.length,ee=p.length;++b<q;){var se=ox(O[b],L[b]);if(se){if(b>=ee)return se;var ye=p[b];return se*(ye=="desc"?-1:1)}}return o.index-l.index}function sx(o,l,p,b){for(var O=-1,L=o.length,q=p.length,ee=-1,se=l.length,ye=Nn(L-q,0),we=M(se+ye),Se=!b;++ee<se;)we[ee]=l[ee];for(;++O<q;)(Se||O<L)&&(we[p[O]]=o[O]);for(;ye--;)we[ee++]=o[O++];return we}function ux(o,l,p,b){for(var O=-1,L=o.length,q=-1,ee=p.length,se=-1,ye=l.length,we=Nn(L-ee,0),Se=M(we+ye),Ie=!b;++O<we;)Se[O]=o[O];for(var Ue=O;++se<ye;)Se[Ue+se]=l[se];for(;++q<ee;)(Ie||O<L)&&(Se[Ue+p[q]]=o[O++]);return Se}function qr(o,l){var p=-1,b=o.length;for(l||(l=M(b));++p<b;)l[p]=o[p];return l}function Ba(o,l,p,b){var O=!p;p||(p={});for(var L=-1,q=l.length;++L<q;){var ee=l[L],se=b?b(p[ee],o[ee],ee,p,o):n;se===n&&(se=o[ee]),O?wo(p,ee,se):qf(p,ee,se)}return p}function ZI(o,l){return Ba(o,My(o),l)}function e2(o,l){return Ba(o,bx(o),l)}function Lp(o,l){return function(p,b){var O=tt(p)?Tf:SI,L=l?l():{};return O(p,o,Ve(b,2),L)}}function Yl(o){return ct(function(l,p){var b=-1,O=p.length,L=O>1?p[O-1]:n,q=O>2?p[2]:n;for(L=o.length>3&&typeof L=="function"?(O--,L):n,q&&Cr(p[0],p[1],q)&&(L=O<3?n:L,O=1),l=Q(l);++b<O;){var ee=p[b];ee&&o(l,ee,b,L)}return l})}function lx(o,l){return function(p,b){if(p==null)return p;if(!Yr(p))return o(p,b);for(var O=p.length,L=l?O:-1,q=Q(p);(l?L--:++L<O)&&b(q[L],L,q)!==!1;);return p}}function cx(o){return function(l,p,b){for(var O=-1,L=Q(l),q=b(l),ee=q.length;ee--;){var se=q[o?ee:++O];if(p(L[se],se,L)===!1)break}return l}}function t2(o,l,p){var b=l&C,O=Gf(o);function L(){var q=this&&this!==Rn&&this instanceof L?O:o;return q.apply(b?p:this,arguments)}return L}function fx(o){return function(l){l=St(l);var p=da(l)?m(l):n,b=p?p[0]:l.charAt(0),O=p?hs(p,1).join(""):l.slice(1);return b[o]()+O}}function Vl(o){return function(l){return as(lE(uE(l).replace(Cf,"")),o,"")}}function Gf(o){return function(){var l=arguments;switch(l.length){case 0:return new o;case 1:return new o(l[0]);case 2:return new o(l[0],l[1]);case 3:return new o(l[0],l[1],l[2]);case 4:return new o(l[0],l[1],l[2],l[3]);case 5:return new o(l[0],l[1],l[2],l[3],l[4]);case 6:return new o(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new o(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var p=ql(o.prototype),b=o.apply(p,l);return Zt(b)?b:p}}function n2(o,l,p){var b=Gf(o);function O(){for(var L=arguments.length,q=M(L),ee=L,se=Xl(O);ee--;)q[ee]=arguments[ee];var ye=L<3&&q[0]!==se&&q[L-1]!==se?[]:hr(q,se);if(L-=ye.length,L<p)return vx(o,l,zp,O.placeholder,n,q,ye,n,n,p-L);var we=this&&this!==Rn&&this instanceof O?b:o;return Zn(we,this,q)}return O}function dx(o){return function(l,p,b){var O=Q(l);if(!Yr(l)){var L=Ve(p,3);l=Fn(l),p=function(ee){return L(O[ee],ee,O)}}var q=o(l,p,b);return q>-1?O[L?l[q]:q]:n}}function hx(o){return bo(function(l){var p=l.length,b=p,O=Ai.prototype.thru;for(o&&l.reverse();b--;){var L=l[b];if(typeof L!="function")throw new le(s);if(O&&!q&&Up(L)=="wrapper")var q=new Ai([],!0)}for(b=q?b:p;++b<p;){L=l[b];var ee=Up(L),se=ee=="wrapper"?Ny(L):n;se&&Ay(se[0])&&se[1]==(W|P|T|re)&&!se[4].length&&se[9]==1?q=q[Up(se[0])].apply(q,se[3]):q=L.length==1&&Ay(L)?q[ee]():q.thru(L)}return function(){var ye=arguments,we=ye[0];if(q&&ye.length==1&&tt(we))return q.plant(we).value();for(var Se=0,Ie=p?l[Se].apply(this,ye):we;++Se<p;)Ie=l[Se].call(this,Ie);return Ie}})}function zp(o,l,p,b,O,L,q,ee,se,ye){var we=l&W,Se=l&C,Ie=l&S,Ue=l&(P|N),Xe=l&pe,st=Ie?n:Gf(o);function Qe(){for(var pt=arguments.length,yt=M(pt),di=pt;di--;)yt[di]=arguments[di];if(Ue)var Dr=Xl(Qe),hi=iy(yt,Dr);if(b&&(yt=sx(yt,b,O,Ue)),L&&(yt=ux(yt,L,q,Ue)),pt-=hi,Ue&&pt<ye){var mn=hr(yt,Dr);return vx(o,l,zp,Qe.placeholder,p,yt,mn,ee,se,ye-pt)}var ma=Se?p:this,Po=Ie?ma[o]:o;return pt=yt.length,ee?yt=S2(yt,ee):Xe&&pt>1&&yt.reverse(),we&&se<pt&&(yt.length=se),this&&this!==Rn&&this instanceof Qe&&(Po=st||Gf(Po)),Po.apply(ma,yt)}return Qe}function px(o,l){return function(p,b){return $I(p,o,l(b),{})}}function Fp(o,l){return function(p,b){var O;if(p===n&&b===n)return l;if(p!==n&&(O=p),b!==n){if(O===n)return b;typeof p=="string"||typeof b=="string"?(p=ci(p),b=ci(b)):(p=ZS(p),b=ZS(b)),O=o(p,b)}return O}}function Dy(o){return bo(function(l){return l=jt(l,dr(Ve())),ct(function(p){var b=this;return o(l,function(O){return Zn(O,b,p)})})})}function Bp(o,l){l=l===n?" ":ci(l);var p=l.length;if(p<2)return p?by(l,o):l;var b=by(l,Cp(o/f(l)));return da(l)?hs(m(b),0,o).join(""):b.slice(0,o)}function r2(o,l,p,b){var O=l&C,L=Gf(o);function q(){for(var ee=-1,se=arguments.length,ye=-1,we=b.length,Se=M(we+se),Ie=this&&this!==Rn&&this instanceof q?L:o;++ye<we;)Se[ye]=b[ye];for(;se--;)Se[ye++]=arguments[++ee];return Zn(Ie,O?p:this,Se)}return q}function mx(o){return function(l,p,b){return b&&typeof b!="number"&&Cr(l,p,b)&&(p=b=n),l=Eo(l),p===n?(p=l,l=0):p=Eo(p),b=b===n?l<p?1:-1:Eo(b),WI(l,p,b,o)}}function Wp(o){return function(l,p){return typeof l=="string"&&typeof p=="string"||(l=Fi(l),p=Fi(p)),o(l,p)}}function vx(o,l,p,b,O,L,q,ee,se,ye){var we=l&P,Se=we?q:n,Ie=we?n:q,Ue=we?L:n,Xe=we?n:L;l|=we?T:U,l&=~(we?U:T),l&E||(l&=~(C|S));var st=[o,l,O,Ue,Se,Xe,Ie,ee,se,ye],Qe=p.apply(n,st);return Ay(o)&&Dx(Qe,st),Qe.placeholder=b,Ox(Qe,o,l)}function Oy(o){var l=ie[o];return function(p,b){if(p=Fi(p),b=b==null?0:pr(nt(b),292),b&&OS(p)){var O=(St(p)+"e").split("e"),L=l(O[0]+"e"+(+O[1]+b));return O=(St(L)+"e").split("e"),+(O[0]+"e"+(+O[1]-b))}return l(p)}}var i2=Hl&&1/us(new Hl([,-0]))[1]==We?function(o){return new Hl(o)}:Gy;function gx(o){return function(l){var p=mr(l);return p==Et?Ou(l):p==_t?ls(l):bp(l,o(l))}}function _o(o,l,p,b,O,L,q,ee){var se=l&S;if(!se&&typeof o!="function")throw new le(s);var ye=b?b.length:0;if(ye||(l&=~(T|U),b=O=n),q=q===n?q:Nn(nt(q),0),ee=ee===n?ee:nt(ee),ye-=O?O.length:0,l&U){var we=b,Se=O;b=O=n}var Ie=se?n:Ny(o),Ue=[o,l,p,b,O,we,Se,L,q,ee];if(Ie&&w2(Ue,Ie),o=Ue[0],l=Ue[1],p=Ue[2],b=Ue[3],O=Ue[4],ee=Ue[9]=Ue[9]===n?se?0:o.length:Nn(Ue[9]-ye,0),!ee&&l&(P|N)&&(l&=~(P|N)),!l||l==C)var Xe=t2(o,l,p);else l==P||l==N?Xe=n2(o,l,ee):(l==T||l==(C|T))&&!O.length?Xe=r2(o,l,p,b):Xe=zp.apply(n,Ue);var st=Ie?GS:Dx;return Ox(st(Xe,Ue),o,l)}function yx(o,l,p,b){return o===n||pa(o,$e[p])&&!be.call(b,p)?l:o}function wx(o,l,p,b,O,L){return Zt(o)&&Zt(l)&&(L.set(l,o),Ip(o,l,n,wx,L),L.delete(l)),o}function a2(o){return ed(o)?n:o}function _x(o,l,p,b,O,L){var q=p&w,ee=o.length,se=l.length;if(ee!=se&&!(q&&se>ee))return!1;var ye=L.get(o),we=L.get(l);if(ye&&we)return ye==l&&we==o;var Se=-1,Ie=!0,Ue=p&x?new Tu:n;for(L.set(o,l),L.set(l,o);++Se<ee;){var Xe=o[Se],st=l[Se];if(b)var Qe=q?b(st,Xe,Se,l,o,L):b(Xe,st,Se,o,l,L);if(Qe!==n){if(Qe)continue;Ie=!1;break}if(Ue){if(!ca(l,function(pt,yt){if(!ss(Ue,yt)&&(Xe===pt||O(Xe,pt,p,b,L)))return Ue.push(yt)})){Ie=!1;break}}else if(!(Xe===st||O(Xe,st,p,b,L))){Ie=!1;break}}return L.delete(o),L.delete(l),Ie}function o2(o,l,p,b,O,L,q){switch(p){case un:if(o.byteLength!=l.byteLength||o.byteOffset!=l.byteOffset)return!1;o=o.buffer,l=l.buffer;case Sn:return!(o.byteLength!=l.byteLength||!L(new hn(o),new hn(l)));case Oe:case ve:case At:return pa(+o,+l);case Ge:return o.name==l.name&&o.message==l.message;case sn:case Vn:return o==l+"";case Et:var ee=Ou;case _t:var se=b&w;if(ee||(ee=us),o.size!=l.size&&!se)return!1;var ye=q.get(o);if(ye)return ye==l;b|=x,q.set(o,l);var we=_x(ee(o),ee(l),b,O,L,q);return q.delete(o),we;case Xn:if(Kf)return Kf.call(o)==Kf.call(l)}return!1}function s2(o,l,p,b,O,L){var q=p&w,ee=$y(o),se=ee.length,ye=$y(l),we=ye.length;if(se!=we&&!q)return!1;for(var Se=se;Se--;){var Ie=ee[Se];if(!(q?Ie in l:be.call(l,Ie)))return!1}var Ue=L.get(o),Xe=L.get(l);if(Ue&&Xe)return Ue==l&&Xe==o;var st=!0;L.set(o,l),L.set(l,o);for(var Qe=q;++Se<se;){Ie=ee[Se];var pt=o[Ie],yt=l[Ie];if(b)var di=q?b(yt,pt,Ie,l,o,L):b(pt,yt,Ie,o,l,L);if(!(di===n?pt===yt||O(pt,yt,p,b,L):di)){st=!1;break}Qe||(Qe=Ie=="constructor")}if(st&&!Qe){var Dr=o.constructor,hi=l.constructor;Dr!=hi&&"constructor"in o&&"constructor"in l&&!(typeof Dr=="function"&&Dr instanceof Dr&&typeof hi=="function"&&hi instanceof hi)&&(st=!1)}return L.delete(o),L.delete(l),st}function bo(o){return Ly(kx(o,n,Ix),o+"")}function $y(o){return FS(o,Fn,My)}function Ry(o){return FS(o,Vr,bx)}var Ny=Op?function(o){return Op.get(o)}:Gy;function Up(o){for(var l=o.name+"",p=Kl[l],b=be.call(Kl,l)?p.length:0;b--;){var O=p[b],L=O.func;if(L==null||L==o)return O.name}return l}function Xl(o){var l=be.call(j,"placeholder")?j:o;return l.placeholder}function Ve(){var o=j.iteratee||Xy;return o=o===Xy?US:o,arguments.length?o(arguments[0],arguments[1]):o}function Hp(o,l){var p=o.__data__;return m2(l)?p[typeof l=="string"?"string":"hash"]:p.map}function Ty(o){for(var l=Fn(o),p=l.length;p--;){var b=l[p],O=o[b];l[p]=[b,O,Ex(O)]}return l}function Au(o,l){var p=Jt(o,l);return WS(p)?p:n}function u2(o){var l=be.call(o,Ru),p=o[Ru];try{o[Ru]=n;var b=!0}catch{}var O=Ze.call(o);return b&&(l?o[Ru]=p:delete o[Ru]),O}var My=sy?function(o){return o==null?[]:(o=Q(o),Hr(sy(o),function(l){return Ul.call(o,l)}))}:Jy,bx=sy?function(o){for(var l=[];o;)la(l,My(o)),o=Pn(o);return l}:Jy,mr=kr;(uy&&mr(new uy(new ArrayBuffer(1)))!=un||Wf&&mr(new Wf)!=Et||ly&&mr(ly.resolve())!=sr||Hl&&mr(new Hl)!=_t||Uf&&mr(new Uf)!=Qn)&&(mr=function(o){var l=kr(o),p=l==on?o.constructor:n,b=p?ju(p):"";if(b)switch(b){case HM:return un;case KM:return Et;case qM:return sr;case YM:return _t;case VM:return Qn}return l});function l2(o,l,p){for(var b=-1,O=p.length;++b<O;){var L=p[b],q=L.size;switch(L.type){case"drop":o+=q;break;case"dropRight":l-=q;break;case"take":l=pr(l,o+q);break;case"takeRight":o=Nn(o,l-q);break}}return{start:o,end:l}}function c2(o){var l=o.match(Er);return l?l[1].split(fo):[]}function Sx(o,l,p){l=ds(l,o);for(var b=-1,O=l.length,L=!1;++b<O;){var q=Wa(l[b]);if(!(L=o!=null&&p(o,q)))break;o=o[q]}return L||++b!=O?L:(O=o==null?0:o.length,!!O&&Gp(O)&&So(q,O)&&(tt(o)||Lu(o)))}function f2(o){var l=o.length,p=new o.constructor(l);return l&&typeof o[0]=="string"&&be.call(o,"index")&&(p.index=o.index,p.input=o.input),p}function xx(o){return typeof o.constructor=="function"&&!Jf(o)?ql(Pn(o)):{}}function d2(o,l,p){var b=o.constructor;switch(l){case Sn:return Cy(o);case Oe:case ve:return new b(+o);case un:return XI(o,p);case ur:case si:case xn:case ia:case lo:case Wr:case Fe:case Oi:case ui:return ax(o,p);case Et:return new b;case At:case Vn:return new b(o);case sn:return QI(o);case _t:return new b;case Xn:return GI(o)}}function h2(o,l){var p=l.length;if(!p)return o;var b=p-1;return l[b]=(p>1?"& ":"")+l[b],l=l.join(p>2?", ":" "),o.replace(Ti,`{
/* [wrapped with `+l+`] */
`)}function p2(o){return tt(o)||Lu(o)||!!(DS&&o&&o[DS])}function So(o,l){var p=typeof o;return l=l??oe,!!l&&(p=="number"||p!="symbol"&&_f.test(o))&&o>-1&&o%1==0&&o<l}function Cr(o,l,p){if(!Zt(p))return!1;var b=typeof l;return(b=="number"?Yr(p)&&So(l,p.length):b=="string"&&l in p)?pa(p[l],o):!1}function Iy(o,l){if(tt(o))return!1;var p=typeof o;return p=="number"||p=="symbol"||p=="boolean"||o==null||fi(o)?!0:Ri.test(o)||!$n.test(o)||l!=null&&o in Q(l)}function m2(o){var l=typeof o;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?o!=="__proto__":o===null}function Ay(o){var l=Up(o),p=j[l];if(typeof p!="function"||!(l in gt.prototype))return!1;if(o===p)return!0;var b=Ny(p);return!!b&&o===b[0]}function v2(o){return!!Ae&&Ae in o}var g2=Ee?xo:Zy;function Jf(o){var l=o&&o.constructor,p=typeof l=="function"&&l.prototype||$e;return o===p}function Ex(o){return o===o&&!Zt(o)}function Px(o,l){return function(p){return p==null?!1:p[o]===l&&(l!==n||o in Q(p))}}function y2(o){var l=Xp(o,function(b){return p.size===d&&p.clear(),b}),p=l.cache;return l}function w2(o,l){var p=o[1],b=l[1],O=p|b,L=O<(C|S|W),q=b==W&&p==P||b==W&&p==re&&o[7].length<=l[8]||b==(W|re)&&l[7].length<=l[8]&&p==P;if(!(L||q))return o;b&C&&(o[2]=l[2],O|=p&C?0:E);var ee=l[3];if(ee){var se=o[3];o[3]=se?sx(se,ee,l[4]):ee,o[4]=se?hr(o[3],h):l[4]}return ee=l[5],ee&&(se=o[5],o[5]=se?ux(se,ee,l[6]):ee,o[6]=se?hr(o[5],h):l[6]),ee=l[7],ee&&(o[7]=ee),b&W&&(o[8]=o[8]==null?l[8]:pr(o[8],l[8])),o[9]==null&&(o[9]=l[9]),o[0]=l[0],o[1]=O,o}function _2(o){var l=[];if(o!=null)for(var p in Q(o))l.push(p);return l}function b2(o){return Ze.call(o)}function kx(o,l,p){return l=Nn(l===n?o.length-1:l,0),function(){for(var b=arguments,O=-1,L=Nn(b.length-l,0),q=M(L);++O<L;)q[O]=b[l+O];O=-1;for(var ee=M(l+1);++O<l;)ee[O]=b[O];return ee[l]=p(q),Zn(o,this,ee)}}function Cx(o,l){return l.length<2?o:Iu(o,Li(l,0,-1))}function S2(o,l){for(var p=o.length,b=pr(l.length,p),O=qr(o);b--;){var L=l[b];o[b]=So(L,p)?O[L]:n}return o}function jy(o,l){if(!(l==="constructor"&&typeof o[l]=="function")&&l!="__proto__")return o[l]}var Dx=$x(GS),Zf=jM||function(o,l){return Rn.setTimeout(o,l)},Ly=$x(KI);function Ox(o,l,p){var b=l+"";return Ly(o,h2(b,x2(c2(b),p)))}function $x(o){var l=0,p=0;return function(){var b=BM(),O=xe-(b-p);if(p=b,O>0){if(++l>=fe)return arguments[0]}else l=0;return o.apply(n,arguments)}}function Kp(o,l){var p=-1,b=o.length,O=b-1;for(l=l===n?b:l;++p<l;){var L=_y(p,O),q=o[L];o[L]=o[p],o[p]=q}return o.length=l,o}var Rx=y2(function(o){var l=[];return o.charCodeAt(0)===46&&l.push(""),o.replace(qt,function(p,b,O,L){l.push(O?L.replace(Ma,"$1"):b||p)}),l});function Wa(o){if(typeof o=="string"||fi(o))return o;var l=o+"";return l=="0"&&1/o==-We?"-0":l}function ju(o){if(o!=null){try{return De.call(o)}catch{}try{return o+""}catch{}}return""}function x2(o,l){return fr(A,function(p){var b="_."+p[0];l&p[1]&&!xu(o,b)&&o.push(b)}),o.sort()}function Nx(o){if(o instanceof gt)return o.clone();var l=new Ai(o.__wrapped__,o.__chain__);return l.__actions__=qr(o.__actions__),l.__index__=o.__index__,l.__values__=o.__values__,l}function E2(o,l,p){(p?Cr(o,l,p):l===n)?l=1:l=Nn(nt(l),0);var b=o==null?0:o.length;if(!b||l<1)return[];for(var O=0,L=0,q=M(Cp(b/l));O<b;)q[L++]=Li(o,O,O+=l);return q}function P2(o){for(var l=-1,p=o==null?0:o.length,b=0,O=[];++l<p;){var L=o[l];L&&(O[b++]=L)}return O}function k2(){var o=arguments.length;if(!o)return[];for(var l=M(o-1),p=arguments[0],b=o;b--;)l[b-1]=arguments[b];return la(tt(p)?qr(p):[p],er(l,1))}var C2=ct(function(o,l){return pn(o)?Yf(o,er(l,1,pn,!0)):[]}),D2=ct(function(o,l){var p=zi(l);return pn(p)&&(p=n),pn(o)?Yf(o,er(l,1,pn,!0),Ve(p,2)):[]}),O2=ct(function(o,l){var p=zi(l);return pn(p)&&(p=n),pn(o)?Yf(o,er(l,1,pn,!0),n,p):[]});function $2(o,l,p){var b=o==null?0:o.length;return b?(l=p||l===n?1:nt(l),Li(o,l<0?0:l,b)):[]}function R2(o,l,p){var b=o==null?0:o.length;return b?(l=p||l===n?1:nt(l),l=b-l,Li(o,0,l<0?0:l)):[]}function N2(o,l){return o&&o.length?jp(o,Ve(l,3),!0,!0):[]}function T2(o,l){return o&&o.length?jp(o,Ve(l,3),!0):[]}function M2(o,l,p,b){var O=o==null?0:o.length;return O?(p&&typeof p!="number"&&Cr(o,l,p)&&(p=0,b=O),kI(o,l,p,b)):[]}function Tx(o,l,p){var b=o==null?0:o.length;if(!b)return-1;var O=p==null?0:nt(p);return O<0&&(O=Nn(b+O,0)),Eu(o,Ve(l,3),O)}function Mx(o,l,p){var b=o==null?0:o.length;if(!b)return-1;var O=b-1;return p!==n&&(O=nt(p),O=p<0?Nn(b+O,0):pr(O,b-1)),Eu(o,Ve(l,3),O,!0)}function Ix(o){var l=o==null?0:o.length;return l?er(o,1):[]}function I2(o){var l=o==null?0:o.length;return l?er(o,We):[]}function A2(o,l){var p=o==null?0:o.length;return p?(l=l===n?1:nt(l),er(o,l)):[]}function j2(o){for(var l=-1,p=o==null?0:o.length,b={};++l<p;){var O=o[l];b[O[0]]=O[1]}return b}function Ax(o){return o&&o.length?o[0]:n}function L2(o,l,p){var b=o==null?0:o.length;if(!b)return-1;var O=p==null?0:nt(p);return O<0&&(O=Nn(b+O,0)),os(o,l,O)}function z2(o){var l=o==null?0:o.length;return l?Li(o,0,-1):[]}var F2=ct(function(o){var l=jt(o,Py);return l.length&&l[0]===o[0]?my(l):[]}),B2=ct(function(o){var l=zi(o),p=jt(o,Py);return l===zi(p)?l=n:p.pop(),p.length&&p[0]===o[0]?my(p,Ve(l,2)):[]}),W2=ct(function(o){var l=zi(o),p=jt(o,Py);return l=typeof l=="function"?l:n,l&&p.pop(),p.length&&p[0]===o[0]?my(p,n,l):[]});function U2(o,l){return o==null?"":zM.call(o,l)}function zi(o){var l=o==null?0:o.length;return l?o[l-1]:n}function H2(o,l,p){var b=o==null?0:o.length;if(!b)return-1;var O=b;return p!==n&&(O=nt(p),O=O<0?Nn(b+O,0):pr(O,b-1)),l===l?Ep(o,l,O):Eu(o,Pu,O,!0)}function K2(o,l){return o&&o.length?YS(o,nt(l)):n}var q2=ct(jx);function jx(o,l){return o&&o.length&&l&&l.length?wy(o,l):o}function Y2(o,l,p){return o&&o.length&&l&&l.length?wy(o,l,Ve(p,2)):o}function V2(o,l,p){return o&&o.length&&l&&l.length?wy(o,l,n,p):o}var X2=bo(function(o,l){var p=o==null?0:o.length,b=fy(o,l);return QS(o,jt(l,function(O){return So(O,p)?+O:O}).sort(ox)),b});function Q2(o,l){var p=[];if(!(o&&o.length))return p;var b=-1,O=[],L=o.length;for(l=Ve(l,3);++b<L;){var q=o[b];l(q,b,o)&&(p.push(q),O.push(b))}return QS(o,O),p}function zy(o){return o==null?o:UM.call(o)}function G2(o,l,p){var b=o==null?0:o.length;return b?(p&&typeof p!="number"&&Cr(o,l,p)?(l=0,p=b):(l=l==null?0:nt(l),p=p===n?b:nt(p)),Li(o,l,p)):[]}function J2(o,l){return Ap(o,l)}function Z2(o,l,p){return Sy(o,l,Ve(p,2))}function eA(o,l){var p=o==null?0:o.length;if(p){var b=Ap(o,l);if(b<p&&pa(o[b],l))return b}return-1}function tA(o,l){return Ap(o,l,!0)}function nA(o,l,p){return Sy(o,l,Ve(p,2),!0)}function rA(o,l){var p=o==null?0:o.length;if(p){var b=Ap(o,l,!0)-1;if(pa(o[b],l))return b}return-1}function iA(o){return o&&o.length?JS(o):[]}function aA(o,l){return o&&o.length?JS(o,Ve(l,2)):[]}function oA(o){var l=o==null?0:o.length;return l?Li(o,1,l):[]}function sA(o,l,p){return o&&o.length?(l=p||l===n?1:nt(l),Li(o,0,l<0?0:l)):[]}function uA(o,l,p){var b=o==null?0:o.length;return b?(l=p||l===n?1:nt(l),l=b-l,Li(o,l<0?0:l,b)):[]}function lA(o,l){return o&&o.length?jp(o,Ve(l,3),!1,!0):[]}function cA(o,l){return o&&o.length?jp(o,Ve(l,3)):[]}var fA=ct(function(o){return fs(er(o,1,pn,!0))}),dA=ct(function(o){var l=zi(o);return pn(l)&&(l=n),fs(er(o,1,pn,!0),Ve(l,2))}),hA=ct(function(o){var l=zi(o);return l=typeof l=="function"?l:n,fs(er(o,1,pn,!0),n,l)});function pA(o){return o&&o.length?fs(o):[]}function mA(o,l){return o&&o.length?fs(o,Ve(l,2)):[]}function vA(o,l){return l=typeof l=="function"?l:n,o&&o.length?fs(o,n,l):[]}function Fy(o){if(!(o&&o.length))return[];var l=0;return o=Hr(o,function(p){if(pn(p))return l=Nn(p.length,l),!0}),Bl(l,function(p){return jt(o,ku(p))})}function Lx(o,l){if(!(o&&o.length))return[];var p=Fy(o);return l==null?p:jt(p,function(b){return Zn(l,n,b)})}var gA=ct(function(o,l){return pn(o)?Yf(o,l):[]}),yA=ct(function(o){return Ey(Hr(o,pn))}),wA=ct(function(o){var l=zi(o);return pn(l)&&(l=n),Ey(Hr(o,pn),Ve(l,2))}),_A=ct(function(o){var l=zi(o);return l=typeof l=="function"?l:n,Ey(Hr(o,pn),n,l)}),bA=ct(Fy);function SA(o,l){return nx(o||[],l||[],qf)}function xA(o,l){return nx(o||[],l||[],Qf)}var EA=ct(function(o){var l=o.length,p=l>1?o[l-1]:n;return p=typeof p=="function"?(o.pop(),p):n,Lx(o,p)});function zx(o){var l=j(o);return l.__chain__=!0,l}function PA(o,l){return l(o),o}function qp(o,l){return l(o)}var kA=bo(function(o){var l=o.length,p=l?o[0]:0,b=this.__wrapped__,O=function(L){return fy(L,o)};return l>1||this.__actions__.length||!(b instanceof gt)||!So(p)?this.thru(O):(b=b.slice(p,+p+(l?1:0)),b.__actions__.push({func:qp,args:[O],thisArg:n}),new Ai(b,this.__chain__).thru(function(L){return l&&!L.length&&L.push(n),L}))});function CA(){return zx(this)}function DA(){return new Ai(this.value(),this.__chain__)}function OA(){this.__values__===n&&(this.__values__=Zx(this.value()));var o=this.__index__>=this.__values__.length,l=o?n:this.__values__[this.__index__++];return{done:o,value:l}}function $A(){return this}function RA(o){for(var l,p=this;p instanceof Rp;){var b=Nx(p);b.__index__=0,b.__values__=n,l?O.__wrapped__=b:l=b;var O=b;p=p.__wrapped__}return O.__wrapped__=o,l}function NA(){var o=this.__wrapped__;if(o instanceof gt){var l=o;return this.__actions__.length&&(l=new gt(this)),l=l.reverse(),l.__actions__.push({func:qp,args:[zy],thisArg:n}),new Ai(l,this.__chain__)}return this.thru(zy)}function TA(){return tx(this.__wrapped__,this.__actions__)}var MA=Lp(function(o,l,p){be.call(o,p)?++o[p]:wo(o,p,1)});function IA(o,l,p){var b=tt(o)?rs:PI;return p&&Cr(o,l,p)&&(l=n),b(o,Ve(l,3))}function AA(o,l){var p=tt(o)?Hr:LS;return p(o,Ve(l,3))}var jA=dx(Tx),LA=dx(Mx);function zA(o,l){return er(Yp(o,l),1)}function FA(o,l){return er(Yp(o,l),We)}function BA(o,l,p){return p=p===n?1:nt(p),er(Yp(o,l),p)}function Fx(o,l){var p=tt(o)?fr:cs;return p(o,Ve(l,3))}function Bx(o,l){var p=tt(o)?zn:jS;return p(o,Ve(l,3))}var WA=Lp(function(o,l,p){be.call(o,p)?o[p].push(l):wo(o,p,[l])});function UA(o,l,p,b){o=Yr(o)?o:Gl(o),p=p&&!b?nt(p):0;var O=o.length;return p<0&&(p=Nn(O+p,0)),Jp(o)?p<=O&&o.indexOf(l,p)>-1:!!O&&os(o,l,p)>-1}var HA=ct(function(o,l,p){var b=-1,O=typeof l=="function",L=Yr(o)?M(o.length):[];return cs(o,function(q){L[++b]=O?Zn(l,q,p):Vf(q,l,p)}),L}),KA=Lp(function(o,l,p){wo(o,p,l)});function Yp(o,l){var p=tt(o)?jt:HS;return p(o,Ve(l,3))}function qA(o,l,p,b){return o==null?[]:(tt(l)||(l=l==null?[]:[l]),p=b?n:p,tt(p)||(p=p==null?[]:[p]),VS(o,l,p))}var YA=Lp(function(o,l,p){o[p?0:1].push(l)},function(){return[[],[]]});function VA(o,l,p){var b=tt(o)?as:wp,O=arguments.length<3;return b(o,Ve(l,4),p,O,cs)}function XA(o,l,p){var b=tt(o)?Mf:wp,O=arguments.length<3;return b(o,Ve(l,4),p,O,jS)}function QA(o,l){var p=tt(o)?Hr:LS;return p(o,Qp(Ve(l,3)))}function GA(o){var l=tt(o)?TS:UI;return l(o)}function JA(o,l,p){(p?Cr(o,l,p):l===n)?l=1:l=nt(l);var b=tt(o)?_I:HI;return b(o,l)}function ZA(o){var l=tt(o)?bI:qI;return l(o)}function ej(o){if(o==null)return 0;if(Yr(o))return Jp(o)?f(o):o.length;var l=mr(o);return l==Et||l==_t?o.size:gy(o).length}function tj(o,l,p){var b=tt(o)?ca:YI;return p&&Cr(o,l,p)&&(l=n),b(o,Ve(l,3))}var nj=ct(function(o,l){if(o==null)return[];var p=l.length;return p>1&&Cr(o,l[0],l[1])?l=[]:p>2&&Cr(l[0],l[1],l[2])&&(l=[l[0]]),VS(o,er(l,1),[])}),Vp=AM||function(){return Rn.Date.now()};function rj(o,l){if(typeof l!="function")throw new le(s);return o=nt(o),function(){if(--o<1)return l.apply(this,arguments)}}function Wx(o,l,p){return l=p?n:l,l=o&&l==null?o.length:l,_o(o,W,n,n,n,n,l)}function Ux(o,l){var p;if(typeof l!="function")throw new le(s);return o=nt(o),function(){return--o>0&&(p=l.apply(this,arguments)),o<=1&&(l=n),p}}var By=ct(function(o,l,p){var b=C;if(p.length){var O=hr(p,Xl(By));b|=T}return _o(o,b,l,p,O)}),Hx=ct(function(o,l,p){var b=C|S;if(p.length){var O=hr(p,Xl(Hx));b|=T}return _o(l,b,o,p,O)});function Kx(o,l,p){l=p?n:l;var b=_o(o,P,n,n,n,n,n,l);return b.placeholder=Kx.placeholder,b}function qx(o,l,p){l=p?n:l;var b=_o(o,N,n,n,n,n,n,l);return b.placeholder=qx.placeholder,b}function Yx(o,l,p){var b,O,L,q,ee,se,ye=0,we=!1,Se=!1,Ie=!0;if(typeof o!="function")throw new le(s);l=Fi(l)||0,Zt(p)&&(we=!!p.leading,Se="maxWait"in p,L=Se?Nn(Fi(p.maxWait)||0,l):L,Ie="trailing"in p?!!p.trailing:Ie);function Ue(mn){var ma=b,Po=O;return b=O=n,ye=mn,q=o.apply(Po,ma),q}function Xe(mn){return ye=mn,ee=Zf(pt,l),we?Ue(mn):q}function st(mn){var ma=mn-se,Po=mn-ye,dE=l-ma;return Se?pr(dE,L-Po):dE}function Qe(mn){var ma=mn-se,Po=mn-ye;return se===n||ma>=l||ma<0||Se&&Po>=L}function pt(){var mn=Vp();if(Qe(mn))return yt(mn);ee=Zf(pt,st(mn))}function yt(mn){return ee=n,Ie&&b?Ue(mn):(b=O=n,q)}function di(){ee!==n&&rx(ee),ye=0,b=se=O=ee=n}function Dr(){return ee===n?q:yt(Vp())}function hi(){var mn=Vp(),ma=Qe(mn);if(b=arguments,O=this,se=mn,ma){if(ee===n)return Xe(se);if(Se)return rx(ee),ee=Zf(pt,l),Ue(se)}return ee===n&&(ee=Zf(pt,l)),q}return hi.cancel=di,hi.flush=Dr,hi}var ij=ct(function(o,l){return AS(o,1,l)}),aj=ct(function(o,l,p){return AS(o,Fi(l)||0,p)});function oj(o){return _o(o,pe)}function Xp(o,l){if(typeof o!="function"||l!=null&&typeof l!="function")throw new le(s);var p=function(){var b=arguments,O=l?l.apply(this,b):b[0],L=p.cache;if(L.has(O))return L.get(O);var q=o.apply(this,b);return p.cache=L.set(O,q)||L,q};return p.cache=new(Xp.Cache||yo),p}Xp.Cache=yo;function Qp(o){if(typeof o!="function")throw new le(s);return function(){var l=arguments;switch(l.length){case 0:return!o.call(this);case 1:return!o.call(this,l[0]);case 2:return!o.call(this,l[0],l[1]);case 3:return!o.call(this,l[0],l[1],l[2])}return!o.apply(this,l)}}function sj(o){return Ux(2,o)}var uj=VI(function(o,l){l=l.length==1&&tt(l[0])?jt(l[0],dr(Ve())):jt(er(l,1),dr(Ve()));var p=l.length;return ct(function(b){for(var O=-1,L=pr(b.length,p);++O<L;)b[O]=l[O].call(this,b[O]);return Zn(o,this,b)})}),Wy=ct(function(o,l){var p=hr(l,Xl(Wy));return _o(o,T,n,l,p)}),Vx=ct(function(o,l){var p=hr(l,Xl(Vx));return _o(o,U,n,l,p)}),lj=bo(function(o,l){return _o(o,re,n,n,n,l)});function cj(o,l){if(typeof o!="function")throw new le(s);return l=l===n?l:nt(l),ct(o,l)}function fj(o,l){if(typeof o!="function")throw new le(s);return l=l==null?0:Nn(nt(l),0),ct(function(p){var b=p[l],O=hs(p,0,l);return b&&la(O,b),Zn(o,this,O)})}function dj(o,l,p){var b=!0,O=!0;if(typeof o!="function")throw new le(s);return Zt(p)&&(b="leading"in p?!!p.leading:b,O="trailing"in p?!!p.trailing:O),Yx(o,l,{leading:b,maxWait:l,trailing:O})}function hj(o){return Wx(o,1)}function pj(o,l){return Wy(ky(l),o)}function mj(){if(!arguments.length)return[];var o=arguments[0];return tt(o)?o:[o]}function vj(o){return ji(o,g)}function gj(o,l){return l=typeof l=="function"?l:n,ji(o,g,l)}function yj(o){return ji(o,v|g)}function wj(o,l){return l=typeof l=="function"?l:n,ji(o,v|g,l)}function _j(o,l){return l==null||IS(o,l,Fn(l))}function pa(o,l){return o===l||o!==o&&l!==l}var bj=Wp(py),Sj=Wp(function(o,l){return o>=l}),Lu=BS(function(){return arguments}())?BS:function(o){return ln(o)&&be.call(o,"callee")&&!Ul.call(o,"callee")},tt=M.isArray,xj=_u?dr(_u):RI;function Yr(o){return o!=null&&Gp(o.length)&&!xo(o)}function pn(o){return ln(o)&&Yr(o)}function Ej(o){return o===!0||o===!1||ln(o)&&kr(o)==Oe}var ps=LM||Zy,Pj=bu?dr(bu):NI;function kj(o){return ln(o)&&o.nodeType===1&&!ed(o)}function Cj(o){if(o==null)return!0;if(Yr(o)&&(tt(o)||typeof o=="string"||typeof o.splice=="function"||ps(o)||Ql(o)||Lu(o)))return!o.length;var l=mr(o);if(l==Et||l==_t)return!o.size;if(Jf(o))return!gy(o).length;for(var p in o)if(be.call(o,p))return!1;return!0}function Dj(o,l){return Xf(o,l)}function Oj(o,l,p){p=typeof p=="function"?p:n;var b=p?p(o,l):n;return b===n?Xf(o,l,n,p):!!b}function Uy(o){if(!ln(o))return!1;var l=kr(o);return l==Ge||l==Ne||typeof o.message=="string"&&typeof o.name=="string"&&!ed(o)}function $j(o){return typeof o=="number"&&OS(o)}function xo(o){if(!Zt(o))return!1;var l=kr(o);return l==He||l==an||l==ge||l==Yn}function Xx(o){return typeof o=="number"&&o==nt(o)}function Gp(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=oe}function Zt(o){var l=typeof o;return o!=null&&(l=="object"||l=="function")}function ln(o){return o!=null&&typeof o=="object"}var Qx=Nf?dr(Nf):MI;function Rj(o,l){return o===l||vy(o,l,Ty(l))}function Nj(o,l,p){return p=typeof p=="function"?p:n,vy(o,l,Ty(l),p)}function Tj(o){return Gx(o)&&o!=+o}function Mj(o){if(g2(o))throw new K(a);return WS(o)}function Ij(o){return o===null}function Aj(o){return o==null}function Gx(o){return typeof o=="number"||ln(o)&&kr(o)==At}function ed(o){if(!ln(o)||kr(o)!=on)return!1;var l=Pn(o);if(l===null)return!0;var p=be.call(l,"constructor")&&l.constructor;return typeof p=="function"&&p instanceof p&&De.call(p)==at}var Hy=gp?dr(gp):II;function jj(o){return Xx(o)&&o>=-oe&&o<=oe}var Jx=Su?dr(Su):AI;function Jp(o){return typeof o=="string"||!tt(o)&&ln(o)&&kr(o)==Vn}function fi(o){return typeof o=="symbol"||ln(o)&&kr(o)==Xn}var Ql=Ll?dr(Ll):jI;function Lj(o){return o===n}function zj(o){return ln(o)&&mr(o)==Qn}function Fj(o){return ln(o)&&kr(o)==Gn}var Bj=Wp(yy),Wj=Wp(function(o,l){return o<=l});function Zx(o){if(!o)return[];if(Yr(o))return Jp(o)?m(o):qr(o);if(Bf&&o[Bf])return oy(o[Bf]());var l=mr(o),p=l==Et?Ou:l==_t?us:Gl;return p(o)}function Eo(o){if(!o)return o===0?o:0;if(o=Fi(o),o===We||o===-We){var l=o<0?-1:1;return l*_e}return o===o?o:0}function nt(o){var l=Eo(o),p=l%1;return l===l?p?l-p:l:0}function eE(o){return o?Mu(nt(o),0,F):0}function Fi(o){if(typeof o=="number")return o;if(fi(o))return G;if(Zt(o)){var l=typeof o.valueOf=="function"?o.valueOf():o;o=Zt(l)?l+"":l}if(typeof o!="string")return o===0?o:+o;o=Sp(o);var p=lp.test(o);return p||cp.test(o)?Ml(o.slice(2),p?2:8):Ia.test(o)?G:+o}function tE(o){return Ba(o,Vr(o))}function Uj(o){return o?Mu(nt(o),-oe,oe):o===0?o:0}function St(o){return o==null?"":ci(o)}var Hj=Yl(function(o,l){if(Jf(l)||Yr(l)){Ba(l,Fn(l),o);return}for(var p in l)be.call(l,p)&&qf(o,p,l[p])}),nE=Yl(function(o,l){Ba(l,Vr(l),o)}),Zp=Yl(function(o,l,p,b){Ba(l,Vr(l),o,b)}),Kj=Yl(function(o,l,p,b){Ba(l,Fn(l),o,b)}),qj=bo(fy);function Yj(o,l){var p=ql(o);return l==null?p:MS(p,l)}var Vj=ct(function(o,l){o=Q(o);var p=-1,b=l.length,O=b>2?l[2]:n;for(O&&Cr(l[0],l[1],O)&&(b=1);++p<b;)for(var L=l[p],q=Vr(L),ee=-1,se=q.length;++ee<se;){var ye=q[ee],we=o[ye];(we===n||pa(we,$e[ye])&&!be.call(o,ye))&&(o[ye]=L[ye])}return o}),Xj=ct(function(o){return o.push(n,wx),Zn(rE,n,o)});function Qj(o,l){return Fl(o,Ve(l,3),Fa)}function Gj(o,l){return Fl(o,Ve(l,3),hy)}function Jj(o,l){return o==null?o:dy(o,Ve(l,3),Vr)}function Zj(o,l){return o==null?o:zS(o,Ve(l,3),Vr)}function eL(o,l){return o&&Fa(o,Ve(l,3))}function tL(o,l){return o&&hy(o,Ve(l,3))}function nL(o){return o==null?[]:Mp(o,Fn(o))}function rL(o){return o==null?[]:Mp(o,Vr(o))}function Ky(o,l,p){var b=o==null?n:Iu(o,l);return b===n?p:b}function iL(o,l){return o!=null&&Sx(o,l,CI)}function qy(o,l){return o!=null&&Sx(o,l,DI)}var aL=px(function(o,l,p){l!=null&&typeof l.toString!="function"&&(l=Ze.call(l)),o[l]=p},Vy(Xr)),oL=px(function(o,l,p){l!=null&&typeof l.toString!="function"&&(l=Ze.call(l)),be.call(o,l)?o[l].push(p):o[l]=[p]},Ve),sL=ct(Vf);function Fn(o){return Yr(o)?NS(o):gy(o)}function Vr(o){return Yr(o)?NS(o,!0):LI(o)}function uL(o,l){var p={};return l=Ve(l,3),Fa(o,function(b,O,L){wo(p,l(b,O,L),b)}),p}function lL(o,l){var p={};return l=Ve(l,3),Fa(o,function(b,O,L){wo(p,O,l(b,O,L))}),p}var cL=Yl(function(o,l,p){Ip(o,l,p)}),rE=Yl(function(o,l,p,b){Ip(o,l,p,b)}),fL=bo(function(o,l){var p={};if(o==null)return p;var b=!1;l=jt(l,function(L){return L=ds(L,o),b||(b=L.length>1),L}),Ba(o,Ry(o),p),b&&(p=ji(p,v|y|g,a2));for(var O=l.length;O--;)xy(p,l[O]);return p});function dL(o,l){return iE(o,Qp(Ve(l)))}var hL=bo(function(o,l){return o==null?{}:FI(o,l)});function iE(o,l){if(o==null)return{};var p=jt(Ry(o),function(b){return[b]});return l=Ve(l),XS(o,p,function(b,O){return l(b,O[0])})}function pL(o,l,p){l=ds(l,o);var b=-1,O=l.length;for(O||(O=1,o=n);++b<O;){var L=o==null?n:o[Wa(l[b])];L===n&&(b=O,L=p),o=xo(L)?L.call(o):L}return o}function mL(o,l,p){return o==null?o:Qf(o,l,p)}function vL(o,l,p,b){return b=typeof b=="function"?b:n,o==null?o:Qf(o,l,p,b)}var aE=gx(Fn),oE=gx(Vr);function gL(o,l,p){var b=tt(o),O=b||ps(o)||Ql(o);if(l=Ve(l,4),p==null){var L=o&&o.constructor;O?p=b?new L:[]:Zt(o)?p=xo(L)?ql(Pn(o)):{}:p={}}return(O?fr:Fa)(o,function(q,ee,se){return l(p,q,ee,se)}),p}function yL(o,l){return o==null?!0:xy(o,l)}function wL(o,l,p){return o==null?o:ex(o,l,ky(p))}function _L(o,l,p,b){return b=typeof b=="function"?b:n,o==null?o:ex(o,l,ky(p),b)}function Gl(o){return o==null?[]:Du(o,Fn(o))}function bL(o){return o==null?[]:Du(o,Vr(o))}function SL(o,l,p){return p===n&&(p=l,l=n),p!==n&&(p=Fi(p),p=p===p?p:0),l!==n&&(l=Fi(l),l=l===l?l:0),Mu(Fi(o),l,p)}function xL(o,l,p){return l=Eo(l),p===n?(p=l,l=0):p=Eo(p),o=Fi(o),OI(o,l,p)}function EL(o,l,p){if(p&&typeof p!="boolean"&&Cr(o,l,p)&&(l=p=n),p===n&&(typeof l=="boolean"?(p=l,l=n):typeof o=="boolean"&&(p=o,o=n)),o===n&&l===n?(o=0,l=1):(o=Eo(o),l===n?(l=o,o=0):l=Eo(l)),o>l){var b=o;o=l,l=b}if(p||o%1||l%1){var O=$S();return pr(o+O*(l-o+Tl("1e-"+((O+"").length-1))),l)}return _y(o,l)}var PL=Vl(function(o,l,p){return l=l.toLowerCase(),o+(p?sE(l):l)});function sE(o){return Yy(St(o).toLowerCase())}function uE(o){return o=St(o),o&&o.replace(Gt,ay).replace(ja,"")}function kL(o,l,p){o=St(o),l=ci(l);var b=o.length;p=p===n?b:Mu(nt(p),0,b);var O=p;return p-=l.length,p>=0&&o.slice(p,O)==l}function CL(o){return o=St(o),o&&On.test(o)?o.replace(Xt,Wl):o}function DL(o){return o=St(o),o&&bt.test(o)?o.replace(dt,"\\$&"):o}var OL=Vl(function(o,l,p){return o+(p?"-":"")+l.toLowerCase()}),$L=Vl(function(o,l,p){return o+(p?" ":"")+l.toLowerCase()}),RL=fx("toLowerCase");function NL(o,l,p){o=St(o),l=nt(l);var b=l?f(o):0;if(!l||b>=l)return o;var O=(l-b)/2;return Bp(Dp(O),p)+o+Bp(Cp(O),p)}function TL(o,l,p){o=St(o),l=nt(l);var b=l?f(o):0;return l&&b<l?o+Bp(l-b,p):o}function ML(o,l,p){o=St(o),l=nt(l);var b=l?f(o):0;return l&&b<l?Bp(l-b,p)+o:o}function IL(o,l,p){return p||l==null?l=0:l&&(l=+l),WM(St(o).replace(xr,""),l||0)}function AL(o,l,p){return(p?Cr(o,l,p):l===n)?l=1:l=nt(l),by(St(o),l)}function jL(){var o=arguments,l=St(o[0]);return o.length<3?l:l.replace(o[1],o[2])}var LL=Vl(function(o,l,p){return o+(p?"_":"")+l.toLowerCase()});function zL(o,l,p){return p&&typeof p!="number"&&Cr(o,l,p)&&(l=p=n),p=p===n?F:p>>>0,p?(o=St(o),o&&(typeof l=="string"||l!=null&&!Hy(l))&&(l=ci(l),!l&&da(o))?hs(m(o),0,p):o.split(l,p)):[]}var FL=Vl(function(o,l,p){return o+(p?" ":"")+Yy(l)});function BL(o,l,p){return o=St(o),p=p==null?0:Mu(nt(p),0,o.length),l=ci(l),o.slice(p,p+l.length)==l}function WL(o,l,p){var b=j.templateSettings;p&&Cr(o,l,p)&&(l=n),o=St(o),l=Zp({},l,b,yx);var O=Zp({},l.imports,b.imports,yx),L=Fn(O),q=Du(O,L),ee,se,ye=0,we=l.interpolate||Mi,Se="__p += '",Ie=ue((l.escape||Mi).source+"|"+we.source+"|"+(we===Qt?El:Mi).source+"|"+(l.evaluate||Mi).source+"|$","g"),Ue="//# sourceURL="+(be.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yu+"]")+`
`;o.replace(Ie,function(Qe,pt,yt,di,Dr,hi){return yt||(yt=di),Se+=o.slice(ye,hi).replace(aa,fa),pt&&(ee=!0,Se+=`' +
__e(`+pt+`) +
'`),Dr&&(se=!0,Se+=`';
`+Dr+`;
__p += '`),yt&&(Se+=`' +
((__t = (`+yt+`)) == null ? '' : __t) +
'`),ye=hi+Qe.length,Qe}),Se+=`';
`;var Xe=be.call(l,"variable")&&l.variable;if(!Xe)Se=`with (obj) {
`+Se+`
}
`;else if(Zo.test(Xe))throw new K(u);Se=(se?Se.replace(co,""):Se).replace(Te,"$1").replace(cu,"$1;"),Se="function("+(Xe||"obj")+`) {
`+(Xe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ee?", __e = _.escape":"")+(se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Se+`return __p
}`;var st=cE(function(){return Z(L,Ue+"return "+Se).apply(n,q)});if(st.source=Se,Uy(st))throw st;return st}function UL(o){return St(o).toLowerCase()}function HL(o){return St(o).toUpperCase()}function KL(o,l,p){if(o=St(o),o&&(p||l===n))return Sp(o);if(!o||!(l=ci(l)))return o;var b=m(o),O=m(l),L=zf(b,O),q=xp(b,O)+1;return hs(b,L,q).join("")}function qL(o,l,p){if(o=St(o),o&&(p||l===n))return o.slice(0,_(o)+1);if(!o||!(l=ci(l)))return o;var b=m(o),O=xp(b,m(l))+1;return hs(b,0,O).join("")}function YL(o,l,p){if(o=St(o),o&&(p||l===n))return o.replace(xr,"");if(!o||!(l=ci(l)))return o;var b=m(o),O=zf(b,m(l));return hs(b,O).join("")}function VL(o,l){var p=he,b=ce;if(Zt(l)){var O="separator"in l?l.separator:O;p="length"in l?nt(l.length):p,b="omission"in l?ci(l.omission):b}o=St(o);var L=o.length;if(da(o)){var q=m(o);L=q.length}if(p>=L)return o;var ee=p-f(b);if(ee<1)return b;var se=q?hs(q,0,ee).join(""):o.slice(0,ee);if(O===n)return se+b;if(q&&(ee+=se.length-ee),Hy(O)){if(o.slice(ee).search(O)){var ye,we=se;for(O.global||(O=ue(O.source,St(up.exec(O))+"g")),O.lastIndex=0;ye=O.exec(we);)var Se=ye.index;se=se.slice(0,Se===n?ee:Se)}}else if(o.indexOf(ci(O),ee)!=ee){var Ie=se.lastIndexOf(O);Ie>-1&&(se=se.slice(0,Ie))}return se+b}function XL(o){return o=St(o),o&&Ln.test(o)?o.replace(fu,k):o}var QL=Vl(function(o,l,p){return o+(p?" ":"")+l.toUpperCase()}),Yy=fx("toUpperCase");function lE(o,l,p){return o=St(o),l=p?n:l,l===n?Kr(o)?B(o):zl(o):o.match(l)||[]}var cE=ct(function(o,l){try{return Zn(o,n,l)}catch(p){return Uy(p)?p:new K(p)}}),GL=bo(function(o,l){return fr(l,function(p){p=Wa(p),wo(o,p,By(o[p],o))}),o});function JL(o){var l=o==null?0:o.length,p=Ve();return o=l?jt(o,function(b){if(typeof b[1]!="function")throw new le(s);return[p(b[0]),b[1]]}):[],ct(function(b){for(var O=-1;++O<l;){var L=o[O];if(Zn(L[0],this,b))return Zn(L[1],this,b)}})}function ZL(o){return EI(ji(o,v))}function Vy(o){return function(){return o}}function ez(o,l){return o==null||o!==o?l:o}var tz=hx(),nz=hx(!0);function Xr(o){return o}function Xy(o){return US(typeof o=="function"?o:ji(o,v))}function rz(o){return KS(ji(o,v))}function iz(o,l){return qS(o,ji(l,v))}var az=ct(function(o,l){return function(p){return Vf(p,o,l)}}),oz=ct(function(o,l){return function(p){return Vf(o,p,l)}});function Qy(o,l,p){var b=Fn(l),O=Mp(l,b);p==null&&!(Zt(l)&&(O.length||!b.length))&&(p=l,l=o,o=this,O=Mp(l,Fn(l)));var L=!(Zt(p)&&"chain"in p)||!!p.chain,q=xo(o);return fr(O,function(ee){var se=l[ee];o[ee]=se,q&&(o.prototype[ee]=function(){var ye=this.__chain__;if(L||ye){var we=o(this.__wrapped__),Se=we.__actions__=qr(this.__actions__);return Se.push({func:se,args:arguments,thisArg:o}),we.__chain__=ye,we}return se.apply(o,la([this.value()],arguments))})}),o}function sz(){return Rn._===this&&(Rn._=ot),this}function Gy(){}function uz(o){return o=nt(o),ct(function(l){return YS(l,o)})}var lz=Dy(jt),cz=Dy(rs),fz=Dy(ca);function fE(o){return Iy(o)?ku(Wa(o)):BI(o)}function dz(o){return function(l){return o==null?n:Iu(o,l)}}var hz=mx(),pz=mx(!0);function Jy(){return[]}function Zy(){return!1}function mz(){return{}}function vz(){return""}function gz(){return!0}function yz(o,l){if(o=nt(o),o<1||o>oe)return[];var p=F,b=pr(o,F);l=Ve(l),o-=F;for(var O=Bl(b,l);++p<o;)l(p);return O}function wz(o){return tt(o)?jt(o,Wa):fi(o)?[o]:qr(Rx(St(o)))}function _z(o){var l=++Re;return St(o)+l}var bz=Fp(function(o,l){return o+l},0),Sz=Oy("ceil"),xz=Fp(function(o,l){return o/l},1),Ez=Oy("floor");function Pz(o){return o&&o.length?Tp(o,Xr,py):n}function kz(o,l){return o&&o.length?Tp(o,Ve(l,2),py):n}function Cz(o){return yp(o,Xr)}function Dz(o,l){return yp(o,Ve(l,2))}function Oz(o){return o&&o.length?Tp(o,Xr,yy):n}function $z(o,l){return o&&o.length?Tp(o,Ve(l,2),yy):n}var Rz=Fp(function(o,l){return o*l},1),Nz=Oy("round"),Tz=Fp(function(o,l){return o-l},0);function Mz(o){return o&&o.length?Lf(o,Xr):0}function Iz(o,l){return o&&o.length?Lf(o,Ve(l,2)):0}return j.after=rj,j.ary=Wx,j.assign=Hj,j.assignIn=nE,j.assignInWith=Zp,j.assignWith=Kj,j.at=qj,j.before=Ux,j.bind=By,j.bindAll=GL,j.bindKey=Hx,j.castArray=mj,j.chain=zx,j.chunk=E2,j.compact=P2,j.concat=k2,j.cond=JL,j.conforms=ZL,j.constant=Vy,j.countBy=MA,j.create=Yj,j.curry=Kx,j.curryRight=qx,j.debounce=Yx,j.defaults=Vj,j.defaultsDeep=Xj,j.defer=ij,j.delay=aj,j.difference=C2,j.differenceBy=D2,j.differenceWith=O2,j.drop=$2,j.dropRight=R2,j.dropRightWhile=N2,j.dropWhile=T2,j.fill=M2,j.filter=AA,j.flatMap=zA,j.flatMapDeep=FA,j.flatMapDepth=BA,j.flatten=Ix,j.flattenDeep=I2,j.flattenDepth=A2,j.flip=oj,j.flow=tz,j.flowRight=nz,j.fromPairs=j2,j.functions=nL,j.functionsIn=rL,j.groupBy=WA,j.initial=z2,j.intersection=F2,j.intersectionBy=B2,j.intersectionWith=W2,j.invert=aL,j.invertBy=oL,j.invokeMap=HA,j.iteratee=Xy,j.keyBy=KA,j.keys=Fn,j.keysIn=Vr,j.map=Yp,j.mapKeys=uL,j.mapValues=lL,j.matches=rz,j.matchesProperty=iz,j.memoize=Xp,j.merge=cL,j.mergeWith=rE,j.method=az,j.methodOf=oz,j.mixin=Qy,j.negate=Qp,j.nthArg=uz,j.omit=fL,j.omitBy=dL,j.once=sj,j.orderBy=qA,j.over=lz,j.overArgs=uj,j.overEvery=cz,j.overSome=fz,j.partial=Wy,j.partialRight=Vx,j.partition=YA,j.pick=hL,j.pickBy=iE,j.property=fE,j.propertyOf=dz,j.pull=q2,j.pullAll=jx,j.pullAllBy=Y2,j.pullAllWith=V2,j.pullAt=X2,j.range=hz,j.rangeRight=pz,j.rearg=lj,j.reject=QA,j.remove=Q2,j.rest=cj,j.reverse=zy,j.sampleSize=JA,j.set=mL,j.setWith=vL,j.shuffle=ZA,j.slice=G2,j.sortBy=nj,j.sortedUniq=iA,j.sortedUniqBy=aA,j.split=zL,j.spread=fj,j.tail=oA,j.take=sA,j.takeRight=uA,j.takeRightWhile=lA,j.takeWhile=cA,j.tap=PA,j.throttle=dj,j.thru=qp,j.toArray=Zx,j.toPairs=aE,j.toPairsIn=oE,j.toPath=wz,j.toPlainObject=tE,j.transform=gL,j.unary=hj,j.union=fA,j.unionBy=dA,j.unionWith=hA,j.uniq=pA,j.uniqBy=mA,j.uniqWith=vA,j.unset=yL,j.unzip=Fy,j.unzipWith=Lx,j.update=wL,j.updateWith=_L,j.values=Gl,j.valuesIn=bL,j.without=gA,j.words=lE,j.wrap=pj,j.xor=yA,j.xorBy=wA,j.xorWith=_A,j.zip=bA,j.zipObject=SA,j.zipObjectDeep=xA,j.zipWith=EA,j.entries=aE,j.entriesIn=oE,j.extend=nE,j.extendWith=Zp,Qy(j,j),j.add=bz,j.attempt=cE,j.camelCase=PL,j.capitalize=sE,j.ceil=Sz,j.clamp=SL,j.clone=vj,j.cloneDeep=yj,j.cloneDeepWith=wj,j.cloneWith=gj,j.conformsTo=_j,j.deburr=uE,j.defaultTo=ez,j.divide=xz,j.endsWith=kL,j.eq=pa,j.escape=CL,j.escapeRegExp=DL,j.every=IA,j.find=jA,j.findIndex=Tx,j.findKey=Qj,j.findLast=LA,j.findLastIndex=Mx,j.findLastKey=Gj,j.floor=Ez,j.forEach=Fx,j.forEachRight=Bx,j.forIn=Jj,j.forInRight=Zj,j.forOwn=eL,j.forOwnRight=tL,j.get=Ky,j.gt=bj,j.gte=Sj,j.has=iL,j.hasIn=qy,j.head=Ax,j.identity=Xr,j.includes=UA,j.indexOf=L2,j.inRange=xL,j.invoke=sL,j.isArguments=Lu,j.isArray=tt,j.isArrayBuffer=xj,j.isArrayLike=Yr,j.isArrayLikeObject=pn,j.isBoolean=Ej,j.isBuffer=ps,j.isDate=Pj,j.isElement=kj,j.isEmpty=Cj,j.isEqual=Dj,j.isEqualWith=Oj,j.isError=Uy,j.isFinite=$j,j.isFunction=xo,j.isInteger=Xx,j.isLength=Gp,j.isMap=Qx,j.isMatch=Rj,j.isMatchWith=Nj,j.isNaN=Tj,j.isNative=Mj,j.isNil=Aj,j.isNull=Ij,j.isNumber=Gx,j.isObject=Zt,j.isObjectLike=ln,j.isPlainObject=ed,j.isRegExp=Hy,j.isSafeInteger=jj,j.isSet=Jx,j.isString=Jp,j.isSymbol=fi,j.isTypedArray=Ql,j.isUndefined=Lj,j.isWeakMap=zj,j.isWeakSet=Fj,j.join=U2,j.kebabCase=OL,j.last=zi,j.lastIndexOf=H2,j.lowerCase=$L,j.lowerFirst=RL,j.lt=Bj,j.lte=Wj,j.max=Pz,j.maxBy=kz,j.mean=Cz,j.meanBy=Dz,j.min=Oz,j.minBy=$z,j.stubArray=Jy,j.stubFalse=Zy,j.stubObject=mz,j.stubString=vz,j.stubTrue=gz,j.multiply=Rz,j.nth=K2,j.noConflict=sz,j.noop=Gy,j.now=Vp,j.pad=NL,j.padEnd=TL,j.padStart=ML,j.parseInt=IL,j.random=EL,j.reduce=VA,j.reduceRight=XA,j.repeat=AL,j.replace=jL,j.result=pL,j.round=Nz,j.runInContext=R,j.sample=GA,j.size=ej,j.snakeCase=LL,j.some=tj,j.sortedIndex=J2,j.sortedIndexBy=Z2,j.sortedIndexOf=eA,j.sortedLastIndex=tA,j.sortedLastIndexBy=nA,j.sortedLastIndexOf=rA,j.startCase=FL,j.startsWith=BL,j.subtract=Tz,j.sum=Mz,j.sumBy=Iz,j.template=WL,j.times=yz,j.toFinite=Eo,j.toInteger=nt,j.toLength=eE,j.toLower=UL,j.toNumber=Fi,j.toSafeInteger=Uj,j.toString=St,j.toUpper=HL,j.trim=KL,j.trimEnd=qL,j.trimStart=YL,j.truncate=VL,j.unescape=XL,j.uniqueId=_z,j.upperCase=QL,j.upperFirst=Yy,j.each=Fx,j.eachRight=Bx,j.first=Ax,Qy(j,function(){var o={};return Fa(j,function(l,p){be.call(j.prototype,p)||(o[p]=l)}),o}(),{chain:!1}),j.VERSION=r,fr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){j[o].placeholder=j}),fr(["drop","take"],function(o,l){gt.prototype[o]=function(p){p=p===n?1:Nn(nt(p),0);var b=this.__filtered__&&!l?new gt(this):this.clone();return b.__filtered__?b.__takeCount__=pr(p,b.__takeCount__):b.__views__.push({size:pr(p,F),type:o+(b.__dir__<0?"Right":"")}),b},gt.prototype[o+"Right"]=function(p){return this.reverse()[o](p).reverse()}}),fr(["filter","map","takeWhile"],function(o,l){var p=l+1,b=p==Ce||p==qe;gt.prototype[o]=function(O){var L=this.clone();return L.__iteratees__.push({iteratee:Ve(O,3),type:p}),L.__filtered__=L.__filtered__||b,L}}),fr(["head","last"],function(o,l){var p="take"+(l?"Right":"");gt.prototype[o]=function(){return this[p](1).value()[0]}}),fr(["initial","tail"],function(o,l){var p="drop"+(l?"":"Right");gt.prototype[o]=function(){return this.__filtered__?new gt(this):this[p](1)}}),gt.prototype.compact=function(){return this.filter(Xr)},gt.prototype.find=function(o){return this.filter(o).head()},gt.prototype.findLast=function(o){return this.reverse().find(o)},gt.prototype.invokeMap=ct(function(o,l){return typeof o=="function"?new gt(this):this.map(function(p){return Vf(p,o,l)})}),gt.prototype.reject=function(o){return this.filter(Qp(Ve(o)))},gt.prototype.slice=function(o,l){o=nt(o);var p=this;return p.__filtered__&&(o>0||l<0)?new gt(p):(o<0?p=p.takeRight(-o):o&&(p=p.drop(o)),l!==n&&(l=nt(l),p=l<0?p.dropRight(-l):p.take(l-o)),p)},gt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},gt.prototype.toArray=function(){return this.take(F)},Fa(gt.prototype,function(o,l){var p=/^(?:filter|find|map|reject)|While$/.test(l),b=/^(?:head|last)$/.test(l),O=j[b?"take"+(l=="last"?"Right":""):l],L=b||/^find/.test(l);O&&(j.prototype[l]=function(){var q=this.__wrapped__,ee=b?[1]:arguments,se=q instanceof gt,ye=ee[0],we=se||tt(q),Se=function(pt){var yt=O.apply(j,la([pt],ee));return b&&Ie?yt[0]:yt};we&&p&&typeof ye=="function"&&ye.length!=1&&(se=we=!1);var Ie=this.__chain__,Ue=!!this.__actions__.length,Xe=L&&!Ie,st=se&&!Ue;if(!L&&we){q=st?q:new gt(this);var Qe=o.apply(q,ee);return Qe.__actions__.push({func:qp,args:[Se],thisArg:n}),new Ai(Qe,Ie)}return Xe&&st?o.apply(this,ee):(Qe=this.thru(Se),Xe?b?Qe.value()[0]:Qe.value():Qe)})}),fr(["pop","push","shift","sort","splice","unshift"],function(o){var l=me[o],p=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",b=/^(?:pop|shift)$/.test(o);j.prototype[o]=function(){var O=arguments;if(b&&!this.__chain__){var L=this.value();return l.apply(tt(L)?L:[],O)}return this[p](function(q){return l.apply(tt(q)?q:[],O)})}}),Fa(gt.prototype,function(o,l){var p=j[l];if(p){var b=p.name+"";be.call(Kl,b)||(Kl[b]=[]),Kl[b].push({name:l,func:p})}}),Kl[zp(n,S).name]=[{name:"wrapper",func:n}],gt.prototype.clone=XM,gt.prototype.reverse=QM,gt.prototype.value=GM,j.prototype.at=kA,j.prototype.chain=CA,j.prototype.commit=DA,j.prototype.next=OA,j.prototype.plant=RA,j.prototype.reverse=NA,j.prototype.toJSON=j.prototype.valueOf=j.prototype.value=TA,j.prototype.first=j.prototype.head,Bf&&(j.prototype[Bf]=$A),j},ne=Y();ua?((ua.exports=ne)._=ne,Rf._=ne):Rn._=ne}).call(qu)})(Zv,Zv.exports);var ST=Zv.exports,Gi=function(e,t){return Number(e.toFixed(t))},fV=function(e,t){return typeof e=="number"?e:t},Yt=function(e,t,n){n&&typeof n=="function"&&n(e,t)},dV=function(e){return-Math.cos(e*Math.PI)/2+.5},hV=function(e){return e},pV=function(e){return e*e},mV=function(e){return e*(2-e)},vV=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},gV=function(e){return e*e*e},yV=function(e){return--e*e*e+1},wV=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},_V=function(e){return e*e*e*e},bV=function(e){return 1- --e*e*e*e},SV=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},xV=function(e){return e*e*e*e*e},EV=function(e){return 1+--e*e*e*e*e},PV=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},xT={easeOut:dV,linear:hV,easeInQuad:pV,easeOutQuad:mV,easeInOutQuad:vV,easeInCubic:gV,easeOutCubic:yV,easeInOutCubic:wV,easeInQuart:_V,easeOutQuart:bV,easeInOutQuart:SV,easeInQuint:xV,easeOutQuint:EV,easeInOutQuint:PV},ET=function(e){typeof e=="number"&&cancelAnimationFrame(e)},xa=function(e){e.mounted&&(ET(e.animation),e.animate=!1,e.animation=null,e.velocity=null)};function PT(e,t,n,r){if(e.mounted){var i=new Date().getTime(),a=1;xa(e),e.animation=function(){if(!e.mounted)return ET(e.animation);var s=new Date().getTime()-i,u=s/n,c=xT[t],d=c(u);s>=n?(r(a),e.animation=null):e.animation&&(r(d),requestAnimationFrame(e.animation))},requestAnimationFrame(e.animation)}}function kV(e){var t=e.scale,n=e.positionX,r=e.positionY;return!(Number.isNaN(t)||Number.isNaN(n)||Number.isNaN(r))}function lu(e,t,n,r){var i=kV(t);if(!(!e.mounted||!i)){var a=e.setTransformState,s=e.transformState,u=s.scale,c=s.positionX,d=s.positionY,h=t.scale-u,v=t.positionX-c,y=t.positionY-d;n===0?a(t.scale,t.positionX,t.positionY):PT(e,r,n,function(g){var w=u+h*g,x=c+v*g,C=d+y*g;a(w,x,C)})}}function CV(e,t,n){var r=e.offsetWidth,i=e.offsetHeight,a=t.offsetWidth,s=t.offsetHeight,u=a*n,c=s*n,d=r-u,h=i-c;return{wrapperWidth:r,wrapperHeight:i,newContentWidth:u,newDiffWidth:d,newContentHeight:c,newDiffHeight:h}}var DV=function(e,t,n,r,i,a,s){var u=e>t?n*(s?1:.5):0,c=r>i?a*(s?1:.5):0,d=e-t-u,h=u,v=r-i-c,y=c;return{minPositionX:d,maxPositionX:h,minPositionY:v,maxPositionY:y}},hS=function(e,t){var n=e.wrapperComponent,r=e.contentComponent,i=e.setup.centerZoomedOut;if(!n||!r)throw new Error("Components are not mounted");var a=CV(n,r,t),s=a.wrapperWidth,u=a.wrapperHeight,c=a.newContentWidth,d=a.newDiffWidth,h=a.newContentHeight,v=a.newDiffHeight,y=DV(s,c,d,u,h,v,!!i);return y},F_=function(e,t,n,r){return r?e<t?Gi(t,2):e>n?Gi(n,2):Gi(e,2):Gi(e,2)},ul=function(e,t){var n=hS(e,t);return e.bounds=n,n};function Zh(e,t,n,r,i,a,s){var u=n.minPositionX,c=n.minPositionY,d=n.maxPositionX,h=n.maxPositionY,v=0,y=0;s&&(v=i,y=a);var g=F_(e,u-v,d+v,r),w=F_(t,c-y,h+y,r);return{x:g,y:w}}function Bg(e,t,n,r,i,a){var s=e.transformState,u=s.scale,c=s.positionX,d=s.positionY,h=r-u;if(typeof t!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:c,y:d};var v=c-t*h,y=d-n*h,g=Zh(v,y,i,a,0,0,null);return g}function ep(e,t,n,r,i){var a=i?r:0,s=t-a;return!Number.isNaN(n)&&e>=n?n:!Number.isNaN(t)&&e<=s?s:e}var Qk=function(e,t){var n=e.setup.panning.excluded,r=e.isInitialized,i=e.wrapperComponent,a=t.target,s="shadowRoot"in a&&"composedPath"in t,u=s?t.composedPath().some(function(h){return h instanceof Element?i==null?void 0:i.contains(h):!1}):i==null?void 0:i.contains(a),c=r&&a&&u;if(!c)return!1;var d=Wg(a,n);return!d},Gk=function(e){var t=e.isInitialized,n=e.isPanning,r=e.setup,i=r.panning.disabled,a=t&&n&&!i;return!!a},OV=function(e,t){var n=e.transformState,r=n.positionX,i=n.positionY;e.isPanning=!0;var a=t.clientX,s=t.clientY;e.startCoords={x:a-r,y:s-i}},$V=function(e,t){var n=t.touches,r=e.transformState,i=r.positionX,a=r.positionY;e.isPanning=!0;var s=n.length===1;if(s){var u=n[0].clientX,c=n[0].clientY;e.startCoords={x:u-i,y:c-a}}};function RV(e){var t=e.transformState,n=t.positionX,r=t.positionY,i=t.scale,a=e.setup,s=a.disabled,u=a.limitToBounds,c=a.centerZoomedOut,d=e.wrapperComponent;if(!(s||!d||!e.bounds)){var h=e.bounds,v=h.maxPositionX,y=h.minPositionX,g=h.maxPositionY,w=h.minPositionY,x=n>v||n<y,C=r>g||r<w,S=n>v?d.offsetWidth:e.setup.minPositionX||0,E=r>g?d.offsetHeight:e.setup.minPositionY||0,P=Bg(e,S,E,i,e.bounds,u||c),N=P.x,T=P.y;return{scale:i,positionX:x?N:n,positionY:C?T:r}}}function kT(e,t,n,r,i){var a=e.setup.limitToBounds,s=e.wrapperComponent,u=e.bounds,c=e.transformState,d=c.scale,h=c.positionX,v=c.positionY;if(!(s===null||u===null||t===h&&n===v)){var y=Zh(t,n,u,a,r,i,s),g=y.x,w=y.y;e.setTransformState(d,g,w)}}var NV=function(e,t,n){var r=e.startCoords,i=e.transformState,a=e.setup.panning,s=a.lockAxisX,u=a.lockAxisY,c=i.positionX,d=i.positionY;if(!r)return{x:c,y:d};var h=t-r.x,v=n-r.y,y=s?c:h,g=u?d:v;return{x:y,y:g}},eu=function(e,t){var n=e.setup,r=e.transformState,i=r.scale,a=n.minScale,s=n.disablePadding;return t>0&&i>=a&&!s?t:0},TV=function(e){var t=e.mounted,n=e.setup,r=n.disabled,i=n.velocityAnimation,a=e.transformState.scale,s=i.disabled,u=!s||a>1||!r||t;return!!u},MV=function(e){var t=e.mounted,n=e.velocity,r=e.bounds,i=e.setup,a=i.disabled,s=i.velocityAnimation,u=e.transformState.scale,c=s.disabled,d=!c||u>1||!a||t;return!(!d||!n||!r)};function IV(e,t){var n=e.setup.velocityAnimation,r=n.equalToMove,i=n.animationTime,a=n.sensitivity;return r?i*t*a:i}function Jk(e,t,n,r,i,a,s,u,c,d){if(i){if(t>s&&n>s){var h=s+(e-s)*d;return h>c?c:h<s?s:h}if(t<a&&n<a){var h=a+(e-a)*d;return h<u?u:h>a?a:h}}return r?t:F_(e,a,s,i)}function AV(e,t){var n=1;return t?Math.min(n,e.offsetWidth/window.innerWidth):n}function jV(e,t){var n=TV(e);if(n){var r=e.lastMousePosition,i=e.velocityTime,a=e.setup,s=e.wrapperComponent,u=a.velocityAnimation.equalToMove,c=Date.now();if(r&&i&&s){var d=AV(s,u),h=t.x-r.x,v=t.y-r.y,y=h/d,g=v/d,w=c-i,x=h*h+v*v,C=Math.sqrt(x)/w;e.velocity={velocityX:y,velocityY:g,total:C}}e.lastMousePosition=t,e.velocityTime=c}}function LV(e){var t=e.velocity,n=e.bounds,r=e.setup,i=e.wrapperComponent,a=MV(e);if(!(!a||!t||!n||!i)){var s=t.velocityX,u=t.velocityY,c=t.total,d=n.maxPositionX,h=n.minPositionX,v=n.maxPositionY,y=n.minPositionY,g=r.limitToBounds,w=r.alignmentAnimation,x=r.zoomAnimation,C=r.panning,S=C.lockAxisY,E=C.lockAxisX,P=x.animationType,N=w.sizeX,T=w.sizeY,U=w.velocityAlignmentTime,W=U,re=IV(e,c),pe=Math.max(re,W),he=eu(e,N),ce=eu(e,T),fe=he*i.offsetWidth/100,xe=ce*i.offsetHeight/100,Ce=d+fe,Le=h-fe,qe=v+xe,We=y-xe,oe=e.transformState,_e=new Date().getTime();PT(e,P,pe,function(G){var F=e.transformState,te=F.scale,X=F.positionX,A=F.positionY,H=new Date().getTime()-_e,ae=H/W,ge=xT[w.animationType],Oe=1-ge(Math.min(1,ae)),ve=1-G,Ne=X+s*ve,Ge=A+u*ve,He=Jk(Ne,oe.positionX,X,E,g,h,d,Le,Ce,Oe),an=Jk(Ge,oe.positionY,A,S,g,y,v,We,qe,Oe);(X!==Ne||A!==Ge)&&e.setTransformState(te,He,an)})}}function Zk(e,t){var n=e.transformState.scale;xa(e),ul(e,n),window.TouchEvent!==void 0&&t instanceof TouchEvent?$V(e,t):OV(e,t)}function pS(e,t){var n=e.transformState.scale,r=e.setup,i=r.minScale,a=r.alignmentAnimation,s=a.disabled,u=a.sizeX,c=a.sizeY,d=a.animationTime,h=a.animationType,v=s||n<i||!u&&!c;if(!v){var y=RV(e);y&&lu(e,y,t??d,h)}}function eC(e,t,n){var r=e.startCoords,i=e.setup,a=i.alignmentAnimation,s=a.sizeX,u=a.sizeY;if(r){var c=NV(e,t,n),d=c.x,h=c.y,v=eu(e,s),y=eu(e,u);jV(e,{x:d,y:h}),kT(e,d,h,v,y)}}function zV(e){if(e.isPanning){var t=e.setup.panning.velocityDisabled,n=e.velocity,r=e.wrapperComponent,i=e.contentComponent;e.isPanning=!1,e.animate=!1,e.animation=null;var a=r==null?void 0:r.getBoundingClientRect(),s=i==null?void 0:i.getBoundingClientRect(),u=(a==null?void 0:a.width)||0,c=(a==null?void 0:a.height)||0,d=(s==null?void 0:s.width)||0,h=(s==null?void 0:s.height)||0,v=u<d||c<h,y=!t&&n&&(n==null?void 0:n.total)>.1&&v;y?LV(e):pS(e)}}function mS(e,t,n,r){var i=e.setup,a=i.minScale,s=i.maxScale,u=i.limitToBounds,c=ep(Gi(t,2),a,s,0,!1),d=ul(e,c),h=Bg(e,n,r,c,d,u),v=h.x,y=h.y;return{scale:c,positionX:v,positionY:y}}function CT(e,t,n){var r=e.transformState.scale,i=e.wrapperComponent,a=e.setup,s=a.minScale,u=a.limitToBounds,c=a.zoomAnimation,d=c.disabled,h=c.animationTime,v=c.animationType,y=d||r>=s;if((r>=1||u)&&pS(e),!(y||!i||!e.mounted)){var g=t||i.offsetWidth/2,w=n||i.offsetHeight/2,x=mS(e,s,g,w);x&&lu(e,x,h,v)}}var Ys=function(){return Ys=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Ys.apply(this,arguments)};function tC(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var Cm={previousScale:1,scale:1,positionX:0,positionY:0},dd={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},B_={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},DT=function(e){var t,n,r,i;return{previousScale:(t=e.initialScale)!==null&&t!==void 0?t:Cm.scale,scale:(n=e.initialScale)!==null&&n!==void 0?n:Cm.scale,positionX:(r=e.initialPositionX)!==null&&r!==void 0?r:Cm.positionX,positionY:(i=e.initialPositionY)!==null&&i!==void 0?i:Cm.positionY}},nC=function(e){var t=Ys({},dd);return Object.keys(e).forEach(function(n){var r=typeof e[n]<"u",i=typeof dd[n]<"u";if(i&&r){var a=Object.prototype.toString.call(dd[n]),s=a==="[object Object]",u=a==="[object Array]";s?t[n]=Ys(Ys({},dd[n]),e[n]):u?t[n]=tC(tC([],dd[n],!0),e[n],!0):t[n]=e[n]}}),t},OT=function(e,t,n){var r=e.transformState.scale,i=e.wrapperComponent,a=e.setup,s=a.maxScale,u=a.minScale,c=a.zoomAnimation,d=a.smooth,h=c.size;if(!i)throw new Error("Wrapper is not mounted");var v=d?r*Math.exp(t*n):r+t*n,y=ep(Gi(v,3),u,s,h,!1);return y};function $T(e,t,n,r,i){var a=e.wrapperComponent,s=e.transformState,u=s.scale,c=s.positionX,d=s.positionY;if(!a)return console.error("No WrapperComponent found");var h=a.offsetWidth,v=a.offsetHeight,y=(h/2-c)/u,g=(v/2-d)/u,w=OT(e,t,n),x=mS(e,w,y,g);if(!x)return console.error("Error during zoom event. New transformation state was not calculated.");lu(e,x,r,i)}function RT(e,t,n,r){var i=e.setup,a=e.wrapperComponent,s=i.limitToBounds,u=DT(e.props),c=e.transformState,d=c.scale,h=c.positionX,v=c.positionY;if(a){var y=hS(e,u.scale),g=Zh(u.positionX,u.positionY,y,s,0,0,a),w={scale:u.scale,positionX:g.x,positionY:g.y};d===u.scale&&h===u.positionX&&v===u.positionY||(r==null||r(),lu(e,w,t,n))}}function FV(e,t,n,r){var i=e.getBoundingClientRect(),a=t.getBoundingClientRect(),s=n.getBoundingClientRect(),u=a.x*r.scale,c=a.y*r.scale;return{x:(i.x-s.x+u)/r.scale,y:(i.y-s.y+c)/r.scale}}function BV(e,t,n){var r=e.wrapperComponent,i=e.contentComponent,a=e.transformState,s=e.setup,u=s.limitToBounds,c=s.minScale,d=s.maxScale;if(!r||!i)return a;var h=r.getBoundingClientRect(),v=t.getBoundingClientRect(),y=FV(t,r,i,a),g=y.x,w=y.y,x=v.width/a.scale,C=v.height/a.scale,S=r.offsetWidth/x,E=r.offsetHeight/C,P=ep(n||Math.min(S,E),c,d,0,!1),N=(h.width-x*P)/2,T=(h.height-C*P)/2,U=(h.left-g)*P+N,W=(h.top-w)*P+T,re=hS(e,P),pe=Zh(U,W,re,u,0,0,r),he=pe.x,ce=pe.y;return{positionX:he,positionY:ce,scale:P}}var WV=function(e){return function(t,n,r){t===void 0&&(t=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),$T(e,1,t,n,r)}},UV=function(e){return function(t,n,r){t===void 0&&(t=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),$T(e,-1,t,n,r)}},HV=function(e){return function(t,n,r,i,a){i===void 0&&(i=300),a===void 0&&(a="easeOut");var s=e.transformState,u=s.positionX,c=s.positionY,d=s.scale,h=e.wrapperComponent,v=e.contentComponent,y=e.setup.disabled;if(!(y||!h||!v)){var g={positionX:Number.isNaN(t)?u:t,positionY:Number.isNaN(n)?c:n,scale:Number.isNaN(r)?d:r};lu(e,g,i,a)}}},KV=function(e){return function(t,n){t===void 0&&(t=200),n===void 0&&(n="easeOut"),RT(e,t,n)}},qV=function(e){return function(t,n,r){n===void 0&&(n=200),r===void 0&&(r="easeOut");var i=e.transformState,a=e.wrapperComponent,s=e.contentComponent;if(a&&s){var u=NT(t||i.scale,a,s);lu(e,u,n,r)}}},YV=function(e){return function(t,n,r,i){r===void 0&&(r=600),i===void 0&&(i="easeOut"),xa(e);var a=e.wrapperComponent,s=typeof t=="string"?document.getElementById(t):t;if(a&&s&&a.contains(s)){var u=BV(e,s,n);lu(e,u,r,i)}}},W_=function(e){return{instance:e,zoomIn:WV(e),zoomOut:UV(e),setTransform:HV(e),resetTransform:KV(e),centerView:qV(e),zoomToElement:YV(e)}},VV=function(e){return{instance:e,state:e.transformState}},Ft=function(e){var t={};return Object.assign(t,VV(e)),Object.assign(t,W_(e)),t},J0=!1;function Z0(){try{var e={get passive(){return J0=!0,!1}};return e}catch{return J0=!1,J0}}var Dm=".".concat(B_.wrapperClass),Wg=function(e,t){return t.some(function(n){return e.matches("".concat(Dm," ").concat(n,", ").concat(Dm," .").concat(n,", ").concat(Dm," ").concat(n," *, ").concat(Dm," .").concat(n," *"))})},U_=function(e){e&&clearTimeout(e)},XV=function(e,t,n){return"translate(".concat(e,"px, ").concat(t,"px) scale(").concat(n,")")},NT=function(e,t,n){var r=n.offsetWidth*e,i=n.offsetHeight*e,a=(t.offsetWidth-r)/2,s=(t.offsetHeight-i)/2;return{scale:e,positionX:a,positionY:s}};function QV(e){return function(t){e.forEach(function(n){typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var GV=function(e,t){var n=e.setup.wheel,r=n.disabled,i=n.wheelDisabled,a=n.touchPadDisabled,s=n.excluded,u=e.isInitialized,c=e.isPanning,d=t.target,h=u&&!c&&!r&&d;if(!h||i&&!t.ctrlKey||a&&t.ctrlKey)return!1;var v=Wg(d,s);return!v},JV=function(e){return e?e.deltaY<0?1:-1:0};function ZV(e,t){var n=JV(e),r=fV(t,n);return r}function TT(e,t,n){var r=t.getBoundingClientRect(),i=0,a=0;if("clientX"in e)i=(e.clientX-r.left)/n,a=(e.clientY-r.top)/n;else{var s=e.touches[0];i=(s.clientX-r.left)/n,a=(s.clientY-r.top)/n}return(Number.isNaN(i)||Number.isNaN(a))&&console.error("No mouse or touch offset found"),{x:i,y:a}}var e7=function(e,t,n,r,i){var a=e.transformState.scale,s=e.wrapperComponent,u=e.setup,c=u.maxScale,d=u.minScale,h=u.zoomAnimation,v=u.disablePadding,y=h.size,g=h.disabled;if(!s)throw new Error("Wrapper is not mounted");var w=a+t*n;if(i)return w;var x=r?!1:!g,C=ep(Gi(w,3),d,c,y,x&&!v);return C},t7=function(e,t){var n=e.previousWheelEvent,r=e.transformState.scale,i=e.setup,a=i.maxScale,s=i.minScale;return n?r<a||r>s||Math.sign(n.deltaY)!==Math.sign(t.deltaY)||n.deltaY>0&&n.deltaY<t.deltaY||n.deltaY<0&&n.deltaY>t.deltaY||Math.sign(n.deltaY)!==Math.sign(t.deltaY):!1},n7=function(e,t){var n=e.setup.pinch,r=n.disabled,i=n.excluded,a=e.isInitialized,s=t.target,u=a&&!r&&s;if(!u)return!1;var c=Wg(s,i);return!c},r7=function(e){var t=e.setup.pinch.disabled,n=e.isInitialized,r=e.pinchStartDistance,i=n&&!t&&r;return!!i},i7=function(e,t,n){var r=n.getBoundingClientRect(),i=e.touches,a=Gi(i[0].clientX-r.left,5),s=Gi(i[0].clientY-r.top,5),u=Gi(i[1].clientX-r.left,5),c=Gi(i[1].clientY-r.top,5);return{x:(a+u)/2/t,y:(s+c)/2/t}},MT=function(e){return Math.sqrt(Math.pow(e.touches[0].pageX-e.touches[1].pageX,2)+Math.pow(e.touches[0].pageY-e.touches[1].pageY,2))},a7=function(e,t){var n=e.pinchStartScale,r=e.pinchStartDistance,i=e.setup,a=i.maxScale,s=i.minScale,u=i.zoomAnimation,c=i.disablePadding,d=u.size,h=u.disabled;if(!n||r===null||!t)throw new Error("Pinch touches distance was not provided");if(t<0)return e.transformState.scale;var v=t/r,y=v*n;return ep(Gi(y,2),s,a,d,!h&&!c)},o7=160,s7=100,u7=function(e,t){var n=e.props,r=n.onWheelStart,i=n.onZoomStart;e.wheelStopEventTimer||(xa(e),Yt(Ft(e),t,r),Yt(Ft(e),t,i))},l7=function(e,t){var n=e.props,r=n.onWheel,i=n.onZoom,a=e.contentComponent,s=e.setup,u=e.transformState,c=u.scale,d=s.limitToBounds,h=s.centerZoomedOut,v=s.zoomAnimation,y=s.wheel,g=s.disablePadding,w=s.smooth,x=v.size,C=v.disabled,S=y.step,E=y.smoothStep;if(!a)throw new Error("Component not mounted");t.preventDefault(),t.stopPropagation();var P=ZV(t,null),N=w?E*Math.abs(t.deltaY):S,T=e7(e,P,N,!t.ctrlKey);if(c!==T){var U=ul(e,T),W=TT(t,a,c),re=C||x===0||h||g,pe=d&&re,he=Bg(e,W.x,W.y,T,U,pe),ce=he.x,fe=he.y;e.previousWheelEvent=t,e.setTransformState(T,ce,fe),Yt(Ft(e),t,r),Yt(Ft(e),t,i)}},c7=function(e,t){var n=e.props,r=n.onWheelStop,i=n.onZoomStop;U_(e.wheelAnimationTimer),e.wheelAnimationTimer=setTimeout(function(){e.mounted&&(CT(e,t.x,t.y),e.wheelAnimationTimer=null)},s7);var a=t7(e,t);a&&(U_(e.wheelStopEventTimer),e.wheelStopEventTimer=setTimeout(function(){e.mounted&&(e.wheelStopEventTimer=null,Yt(Ft(e),t,r),Yt(Ft(e),t,i))},o7))},IT=function(e){for(var t=0,n=0,r=0;r<2;r+=1)t+=e.touches[r].clientX,n+=e.touches[r].clientY;var i=t/2,a=n/2;return{x:i,y:a}},f7=function(e,t){var n=MT(t);e.pinchStartDistance=n,e.lastDistance=n,e.pinchStartScale=e.transformState.scale,e.isPanning=!1;var r=IT(t);e.pinchLastCenterX=r.x,e.pinchLastCenterY=r.y,xa(e)},d7=function(e,t){var n=e.contentComponent,r=e.pinchStartDistance,i=e.wrapperComponent,a=e.transformState.scale,s=e.setup,u=s.limitToBounds,c=s.centerZoomedOut,d=s.zoomAnimation,h=s.alignmentAnimation,v=d.disabled,y=d.size;if(!(r===null||!n)){var g=i7(t,a,n);if(!(!Number.isFinite(g.x)||!Number.isFinite(g.y))){var w=MT(t),x=a7(e,w),C=IT(t),S=C.x-(e.pinchLastCenterX||0),E=C.y-(e.pinchLastCenterY||0);if(!(x===a&&S===0&&E===0)){e.pinchLastCenterX=C.x,e.pinchLastCenterY=C.y;var P=ul(e,x),N=v||y===0||c,T=u&&N,U=Bg(e,g.x,g.y,x,P,T),W=U.x,re=U.y;e.pinchMidpoint=g,e.lastDistance=w;var pe=h.sizeX,he=h.sizeY,ce=eu(e,pe),fe=eu(e,he),xe=W+S,Ce=re+E,Le=Zh(xe,Ce,P,u,ce,fe,i),qe=Le.x,We=Le.y;e.setTransformState(x,qe,We)}}}},h7=function(e){var t=e.pinchMidpoint;e.velocity=null,e.lastDistance=null,e.pinchMidpoint=null,e.pinchStartScale=null,e.pinchStartDistance=null,CT(e,t==null?void 0:t.x,t==null?void 0:t.y)},AT=function(e,t){var n=e.props.onZoomStop,r=e.setup.doubleClick.animationTime;U_(e.doubleClickStopEventTimer),e.doubleClickStopEventTimer=setTimeout(function(){e.doubleClickStopEventTimer=null,Yt(Ft(e),t,n)},r)},p7=function(e,t){var n=e.props,r=n.onZoomStart,i=n.onZoom,a=e.setup.doubleClick,s=a.animationTime,u=a.animationType;Yt(Ft(e),t,r),RT(e,s,u,function(){return Yt(Ft(e),t,i)}),AT(e,t)};function m7(e,t){return e==="toggle"?t===1?1:-1:e==="zoomOut"?-1:1}function v7(e,t){var n=e.setup,r=e.doubleClickStopEventTimer,i=e.transformState,a=e.contentComponent,s=i.scale,u=e.props,c=u.onZoomStart,d=u.onZoom,h=n.doubleClick,v=h.disabled,y=h.mode,g=h.step,w=h.animationTime,x=h.animationType;if(!v&&!r){if(y==="reset")return p7(e,t);if(!a)return console.error("No ContentComponent found");var C=m7(y,e.transformState.scale),S=OT(e,C,g);if(s!==S){Yt(Ft(e),t,c);var E=TT(t,a,s),P=mS(e,S,E.x,E.y);if(!P)return console.error("Error during zoom event. New transformation state was not calculated.");Yt(Ft(e),t,d),lu(e,P,w,x),AT(e,t)}}}var g7=function(e,t){var n=e.isInitialized,r=e.setup,i=e.wrapperComponent,a=r.doubleClick,s=a.disabled,u=a.excluded,c=t.target,d=i==null?void 0:i.contains(c),h=n&&c&&d&&!s;if(!h)return!1;var v=Wg(c,u);return!v},y7=function(){function e(t){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(r){n.props=r,ul(n,n.transformState.scale),n.setup=nC(r)},this.initializeWindowEvents=function(){var r,i,a=Z0(),s=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,u=s==null?void 0:s.defaultView;(i=n.wrapperComponent)===null||i===void 0||i.addEventListener("wheel",n.onWheelPanning,a),u==null||u.addEventListener("mousedown",n.onPanningStart,a),u==null||u.addEventListener("mousemove",n.onPanning,a),u==null||u.addEventListener("mouseup",n.onPanningStop,a),s==null||s.addEventListener("mouseleave",n.clearPanning,a),u==null||u.addEventListener("keyup",n.setKeyUnPressed,a),u==null||u.addEventListener("keydown",n.setKeyPressed,a)},this.cleanupWindowEvents=function(){var r,i,a=Z0(),s=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,u=s==null?void 0:s.defaultView;u==null||u.removeEventListener("mousedown",n.onPanningStart,a),u==null||u.removeEventListener("mousemove",n.onPanning,a),u==null||u.removeEventListener("mouseup",n.onPanningStop,a),s==null||s.removeEventListener("mouseleave",n.clearPanning,a),u==null||u.removeEventListener("keyup",n.setKeyUnPressed,a),u==null||u.removeEventListener("keydown",n.setKeyPressed,a),document.removeEventListener("mouseleave",n.clearPanning,a),xa(n),(i=n.observer)===null||i===void 0||i.disconnect()},this.handleInitializeWrapperEvents=function(r){var i=Z0();r.addEventListener("wheel",n.onWheelZoom,i),r.addEventListener("dblclick",n.onDoubleClick,i),r.addEventListener("touchstart",n.onTouchPanningStart,i),r.addEventListener("touchmove",n.onTouchPanning,i),r.addEventListener("touchend",n.onTouchPanningStop,i)},this.handleInitialize=function(r,i){var a=!1,s=n.setup.centerOnInit,u=function(c,d){for(var h=0,v=c;h<v.length;h++){var y=v[h];if(y.target===d)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(c){c(Ft(n))}),n.observer=new ResizeObserver(function(c){if(u(c,r)||u(c,i))if(s&&!a){var d=i.offsetWidth,h=i.offsetHeight;(d>0||h>0)&&(a=!0,n.setCenter())}else xa(n),ul(n,n.transformState.scale),pS(n,0)}),n.observer.observe(r),n.observer.observe(i)},this.onWheelZoom=function(r){var i=n.setup.disabled;if(!i){var a=GV(n,r);if(a){var s=n.isPressingKeys(n.setup.wheel.activationKeys);s&&(u7(n,r),l7(n,r),c7(n,r))}}},this.onWheelPanning=function(r){var i=n.setup,a=i.disabled,s=i.wheel,u=i.panning;if(!(!n.wrapperComponent||!n.contentComponent||a||!s.wheelDisabled||u.disabled||!u.wheelPanning||r.ctrlKey)){r.preventDefault(),r.stopPropagation();var c=n.transformState,d=c.positionX,h=c.positionY,v=d-r.deltaX,y=h-r.deltaY,g=u.lockAxisX?d:v,w=u.lockAxisY?h:y,x=n.setup.alignmentAnimation,C=x.sizeX,S=x.sizeY,E=eu(n,C),P=eu(n,S);g===d&&w===h||kT(n,g,w,E,P)}},this.onPanningStart=function(r){var i=n.setup.disabled,a=n.props.onPanningStart;if(!i){var s=Qk(n,r);if(s){var u=n.isPressingKeys(n.setup.panning.activationKeys);u&&(r.button===0&&!n.setup.panning.allowLeftClickPan||r.button===1&&!n.setup.panning.allowMiddleClickPan||r.button===2&&!n.setup.panning.allowRightClickPan||(r.preventDefault(),r.stopPropagation(),xa(n),Zk(n,r),Yt(Ft(n),r,a)))}}},this.onPanning=function(r){var i=n.setup.disabled,a=n.props.onPanning;if(!i){var s=Gk(n);if(s){var u=n.isPressingKeys(n.setup.panning.activationKeys);u&&(r.preventDefault(),r.stopPropagation(),eC(n,r.clientX,r.clientY),Yt(Ft(n),r,a))}}},this.onPanningStop=function(r){var i=n.props.onPanningStop;n.isPanning&&(zV(n),Yt(Ft(n),r,i))},this.onPinchStart=function(r){var i=n.setup.disabled,a=n.props,s=a.onPinchingStart,u=a.onZoomStart;if(!i){var c=n7(n,r);c&&(f7(n,r),xa(n),Yt(Ft(n),r,s),Yt(Ft(n),r,u))}},this.onPinch=function(r){var i=n.setup.disabled,a=n.props,s=a.onPinching,u=a.onZoom;if(!i){var c=r7(n);c&&(r.preventDefault(),r.stopPropagation(),d7(n,r),Yt(Ft(n),r,s),Yt(Ft(n),r,u))}},this.onPinchStop=function(r){var i=n.props,a=i.onPinchingStop,s=i.onZoomStop;n.pinchStartScale&&(h7(n),Yt(Ft(n),r,a),Yt(Ft(n),r,s))},this.onTouchPanningStart=function(r){var i=n.setup.disabled,a=n.props.onPanningStart;if(!i){var s=Qk(n,r);if(s){var u=n.lastTouch&&+new Date-n.lastTouch<200&&r.touches.length===1;if(!u){n.lastTouch=+new Date,xa(n);var c=r.touches,d=c.length===1,h=c.length===2;d&&(xa(n),Zk(n,r),Yt(Ft(n),r,a)),h&&n.onPinchStart(r)}}}},this.onTouchPanning=function(r){var i=n.setup.disabled,a=n.props.onPanning;if(n.isPanning&&r.touches.length===1){if(i)return;var s=Gk(n);if(!s)return;r.preventDefault(),r.stopPropagation();var u=r.touches[0];eC(n,u.clientX,u.clientY),Yt(Ft(n),r,a)}else r.touches.length>1&&n.onPinch(r)},this.onTouchPanningStop=function(r){n.onPanningStop(r),n.onPinchStop(r)},this.onDoubleClick=function(r){var i=n.setup.disabled;if(!i){var a=g7(n,r);a&&v7(n,r)}},this.clearPanning=function(r){n.isPanning&&n.onPanningStop(r)},this.setKeyPressed=function(r){n.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){n.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(i){return n.pressedKeys[i]}):!0},this.setTransformState=function(r,i,a){var s=n.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(a)){r!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=r),n.transformState.positionX=i,n.transformState.positionY=a,n.applyTransformation();var u=Ft(n);n.onChangeCallbacks.forEach(function(c){return c(u)}),Yt(u,{scale:r,positionX:i,positionY:a},s)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var r=NT(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,i,a){return n.props.customTransform?n.props.customTransform(r,i,a):XV(r,i,a)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var r=n.transformState,i=r.scale,a=r.positionX,s=r.positionY,u=n.handleTransformStyles(a,s,i);n.contentComponent.style.transform=u}},this.getContext=function(){return Ft(n)},this.onChange=function(r){return n.onChangeCallbacks.has(r)||n.onChangeCallbacks.add(r),function(){n.onChangeCallbacks.delete(r)}},this.onInit=function(r){return n.onInitCallbacks.has(r)||n.onInitCallbacks.add(r),function(){n.onInitCallbacks.delete(r)}},this.init=function(r,i){n.cleanupWindowEvents(),n.wrapperComponent=r,n.contentComponent=i,ul(n,n.transformState.scale),n.handleInitializeWrapperEvents(r),n.handleInitialize(r,i),n.initializeWindowEvents(),n.isInitialized=!0;var a=Ft(n);Yt(a,void 0,n.props.onInit)},this.props=t,this.setup=nC(this.props),this.transformState=DT(this.props)}return e}(),vS=Dt.createContext(null),w7=function(e,t){return typeof e=="function"?e(t):e},_7=Dt.forwardRef(function(e,t){var n=J.useRef(new y7(e)).current,r=w7(e.children,W_(n));return J.useImperativeHandle(t,function(){return W_(n)},[n]),J.useEffect(function(){n.update(e)},[n,e]),Dt.createElement(vS.Provider,{value:n},r)});Dt.forwardRef(function(e,t){var n=J.useRef(null),r=J.useContext(vS);return J.useEffect(function(){return r.onChange(function(i){if(n.current){var a=0,s=0;n.current.style.transform=r.handleTransformStyles(a,s,1/i.instance.transformState.scale)}})},[r]),Dt.createElement("div",Ys({},e,{ref:QV([n,t])}))});function b7(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var S7=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,rC={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};b7(S7);var x7=function(e){var t=e.children,n=e.wrapperClass,r=n===void 0?"":n,i=e.contentClass,a=i===void 0?"":i,s=e.wrapperStyle,u=e.contentStyle,c=e.wrapperProps,d=c===void 0?{}:c,h=e.contentProps,v=h===void 0?{}:h,y=J.useContext(vS),g=y.init,w=y.cleanupWindowEvents,x=J.useRef(null),C=J.useRef(null);return J.useEffect(function(){var S=x.current,E=C.current;return S!==null&&E!==null&&g&&(g==null||g(S,E)),function(){w==null||w()}},[]),Dt.createElement("div",Ys({},d,{ref:x,className:"".concat(B_.wrapperClass," ").concat(rC.wrapper," ").concat(r),style:s}),Dt.createElement("div",Ys({},v,{ref:C,className:"".concat(B_.contentClass," ").concat(rC.content," ").concat(a),style:u}),t))};const Ug=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function yf(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function gS(e){return"nodeType"in e}function Br(e){var t,n;return e?yf(e)?e:gS(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function yS(e){const{Document:t}=Br(e);return e instanceof t}function tp(e){return yf(e)?!1:e instanceof Br(e).HTMLElement}function jT(e){return e instanceof Br(e).SVGElement}function wf(e){return e?yf(e)?e.document:gS(e)?yS(e)?e:tp(e)||jT(e)?e.ownerDocument:document:document:document}const Xo=Ug?J.useLayoutEffect:J.useEffect;function Hg(e){const t=J.useRef(e);return Xo(()=>{t.current=e}),J.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function E7(){const e=J.useRef(null),t=J.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=J.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Ph(e,t){t===void 0&&(t=[e]);const n=J.useRef(e);return Xo(()=>{n.current!==e&&(n.current=e)},t),n}function np(e,t){const n=J.useRef();return J.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function eg(e){const t=Hg(e),n=J.useRef(null),r=J.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function tg(e){const t=J.useRef();return J.useEffect(()=>{t.current=e},[e]),t.current}let ew={};function Kg(e,t){return J.useMemo(()=>{if(t)return t;const n=ew[e]==null?0:ew[e]+1;return ew[e]=n,e+"-"+n},[e,t])}function LT(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((a,s)=>{const u=Object.entries(s);for(const[c,d]of u){const h=a[c];h!=null&&(a[c]=h+e*d)}return a},{...t})}}const Ic=LT(1),ng=LT(-1);function P7(e){return"clientX"in e&&"clientY"in e}function wS(e){if(!e)return!1;const{KeyboardEvent:t}=Br(e.target);return t&&e instanceof t}function k7(e){if(!e)return!1;const{TouchEvent:t}=Br(e.target);return t&&e instanceof t}function rg(e){if(k7(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return P7(e)?{x:e.clientX,y:e.clientY}:null}const kh=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[kh.Translate.toString(e),kh.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),iC="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function C7(e){return e.matches(iC)?e:e.querySelector(iC)}const D7={display:"none"};function O7(e){let{id:t,value:n}=e;return Dt.createElement("div",{id:t,style:D7},n)}function $7(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Dt.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function R7(){const[e,t]=J.useState("");return{announce:J.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const zT=J.createContext(null);function FT(e){const t=J.useContext(zT);J.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function N7(){const[e]=J.useState(()=>new Set),t=J.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[J.useCallback(r=>{let{type:i,event:a}=r;e.forEach(s=>{var u;return(u=s[i])==null?void 0:u.call(s,a)})},[e]),t]}const T7={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},M7={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function I7(e){let{announcements:t=M7,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=T7}=e;const{announce:a,announcement:s}=R7(),u=Kg("DndLiveRegion"),[c,d]=J.useState(!1);if(J.useEffect(()=>{d(!0)},[]),FT(J.useMemo(()=>({onDragStart(v){let{active:y}=v;a(t.onDragStart({active:y}))},onDragMove(v){let{active:y,over:g}=v;t.onDragMove&&a(t.onDragMove({active:y,over:g}))},onDragOver(v){let{active:y,over:g}=v;a(t.onDragOver({active:y,over:g}))},onDragEnd(v){let{active:y,over:g}=v;a(t.onDragEnd({active:y,over:g}))},onDragCancel(v){let{active:y,over:g}=v;a(t.onDragCancel({active:y,over:g}))}}),[a,t])),!c)return null;const h=Dt.createElement(Dt.Fragment,null,Dt.createElement(O7,{id:r,value:i.draggable}),Dt.createElement($7,{id:u,announcement:s}));return n?Qa.createPortal(h,n):h}var An;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(An||(An={}));function ig(){}function aC(e,t){return J.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function A7(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return J.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Ta=Object.freeze({x:0,y:0});function j7(e,t){const n=rg(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function L7(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function z7(e,t){if(!e||e.length===0)return null;const[n]=e;return t?n[t]:n}function F7(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),s=i-r,u=a-n;if(r<i&&n<a){const c=t.width*t.height,d=e.width*e.height,h=s*u,v=h/(c+d-h);return Number(v.toFixed(4))}return 0}const B7=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const a of r){const{id:s}=a,u=n.get(s);if(u){const c=F7(u,t);c>0&&i.push({id:s,data:{droppableContainer:a,value:c}})}}return i.sort(L7)};function W7(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function BT(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Ta}function U7(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return i.reduce((s,u)=>({...s,top:s.top+e*u.y,bottom:s.bottom+e*u.y,left:s.left+e*u.x,right:s.right+e*u.x}),{...n})}}const H7=U7(1);function WT(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function K7(e,t,n){const r=WT(t);if(!r)return e;const{scaleX:i,scaleY:a,x:s,y:u}=r,c=e.left-s-(1-i)*parseFloat(n),d=e.top-u-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?e.width/i:e.width,v=a?e.height/a:e.height;return{width:h,height:v,top:d,right:c+h,bottom:d+v,left:c}}const q7={ignoreTransform:!1};function rp(e,t){t===void 0&&(t=q7);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:h}=Br(e).getComputedStyle(e);d&&(n=K7(n,d,h))}const{top:r,left:i,width:a,height:s,bottom:u,right:c}=n;return{top:r,left:i,width:a,height:s,bottom:u,right:c}}function oC(e){return rp(e,{ignoreTransform:!0})}function Y7(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function V7(e,t){return t===void 0&&(t=Br(e).getComputedStyle(e)),t.position==="fixed"}function X7(e,t){t===void 0&&(t=Br(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=t[i];return typeof a=="string"?n.test(a):!1})}function _S(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(yS(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!tp(i)||jT(i)||n.includes(i))return n;const a=Br(e).getComputedStyle(i);return i!==e&&X7(i,a)&&n.push(i),V7(i,a)?n:r(i.parentNode)}return e?r(e):n}function UT(e){const[t]=_S(e,1);return t??null}function tw(e){return!Ug||!e?null:yf(e)?e:gS(e)?yS(e)||e===wf(e).scrollingElement?window:tp(e)?e:null:null}function HT(e){return yf(e)?e.scrollX:e.scrollLeft}function KT(e){return yf(e)?e.scrollY:e.scrollTop}function H_(e){return{x:HT(e),y:KT(e)}}var Hn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Hn||(Hn={}));function qT(e){return!Ug||!e?!1:e===document.scrollingElement}function YT(e){const t={x:0,y:0},n=qT(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,s=e.scrollTop>=r.y,u=e.scrollLeft>=r.x;return{isTop:i,isLeft:a,isBottom:s,isRight:u,maxScroll:r,minScroll:t}}const Q7={x:.2,y:.2};function G7(e,t,n,r,i){let{top:a,left:s,right:u,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=Q7);const{isTop:d,isBottom:h,isLeft:v,isRight:y}=YT(e),g={x:0,y:0},w={x:0,y:0},x={height:t.height*i.y,width:t.width*i.x};return!d&&a<=t.top+x.height?(g.y=Hn.Backward,w.y=r*Math.abs((t.top+x.height-a)/x.height)):!h&&c>=t.bottom-x.height&&(g.y=Hn.Forward,w.y=r*Math.abs((t.bottom-x.height-c)/x.height)),!y&&u>=t.right-x.width?(g.x=Hn.Forward,w.x=r*Math.abs((t.right-x.width-u)/x.width)):!v&&s<=t.left+x.width&&(g.x=Hn.Backward,w.x=r*Math.abs((t.left+x.width-s)/x.width)),{direction:g,speed:w}}function J7(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:s}=window;return{top:0,left:0,right:a,bottom:s,width:a,height:s}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function VT(e){return e.reduce((t,n)=>Ic(t,H_(n)),Ta)}function Z7(e){return e.reduce((t,n)=>t+HT(n),0)}function eX(e){return e.reduce((t,n)=>t+KT(n),0)}function XT(e,t){if(t===void 0&&(t=rp),!e)return;const{top:n,left:r,bottom:i,right:a}=t(e);UT(e)&&(i<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const tX=[["x",["left","right"],Z7],["y",["top","bottom"],eX]];class bS{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=_S(n),i=VT(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,s,u]of tX)for(const c of s)Object.defineProperty(this,c,{get:()=>{const d=u(r),h=i[a]-d;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Wd{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function nX(e){const{EventTarget:t}=Br(e);return e instanceof t?e:wf(e)}function nw(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Hi;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Hi||(Hi={}));function sC(e){e.preventDefault()}function rX(e){e.stopPropagation()}var Lt;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Lt||(Lt={}));const QT={start:[Lt.Space,Lt.Enter],cancel:[Lt.Esc],end:[Lt.Space,Lt.Enter,Lt.Tab]},iX=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Lt.Right:return{...n,x:n.x+25};case Lt.Left:return{...n,x:n.x-25};case Lt.Down:return{...n,y:n.y+25};case Lt.Up:return{...n,y:n.y-25}}};class GT{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Wd(wf(n)),this.windowListeners=new Wd(Br(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Hi.Resize,this.handleCancel),this.windowListeners.add(Hi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Hi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&XT(r),n(Ta)}handleKeyDown(t){if(wS(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:a=QT,coordinateGetter:s=iX,scrollBehavior:u="smooth"}=i,{code:c}=t;if(a.end.includes(c)){this.handleEnd(t);return}if(a.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=r.current,h=d?{x:d.left,y:d.top}:Ta;this.referenceCoordinates||(this.referenceCoordinates=h);const v=s(t,{active:n,context:r.current,currentCoordinates:h});if(v){const y=ng(v,h),g={x:0,y:0},{scrollableAncestors:w}=r.current;for(const x of w){const C=t.code,{isTop:S,isRight:E,isLeft:P,isBottom:N,maxScroll:T,minScroll:U}=YT(x),W=J7(x),re={x:Math.min(C===Lt.Right?W.right-W.width/2:W.right,Math.max(C===Lt.Right?W.left:W.left+W.width/2,v.x)),y:Math.min(C===Lt.Down?W.bottom-W.height/2:W.bottom,Math.max(C===Lt.Down?W.top:W.top+W.height/2,v.y))},pe=C===Lt.Right&&!E||C===Lt.Left&&!P,he=C===Lt.Down&&!N||C===Lt.Up&&!S;if(pe&&re.x!==v.x){const ce=x.scrollLeft+y.x,fe=C===Lt.Right&&ce<=T.x||C===Lt.Left&&ce>=U.x;if(fe&&!y.y){x.scrollTo({left:ce,behavior:u});return}fe?g.x=x.scrollLeft-ce:g.x=C===Lt.Right?x.scrollLeft-T.x:x.scrollLeft-U.x,g.x&&x.scrollBy({left:-g.x,behavior:u});break}else if(he&&re.y!==v.y){const ce=x.scrollTop+y.y,fe=C===Lt.Down&&ce<=T.y||C===Lt.Up&&ce>=U.y;if(fe&&!y.x){x.scrollTo({top:ce,behavior:u});return}fe?g.y=x.scrollTop-ce:g.y=C===Lt.Down?x.scrollTop-T.y:x.scrollTop-U.y,g.y&&x.scrollBy({top:-g.y,behavior:u});break}}this.handleMove(t,Ic(ng(v,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}GT.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=QT,onActivation:i}=t,{active:a}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const u=a.activatorNode.current;return u&&e.target!==u?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function uC(e){return!!(e&&"distance"in e)}function lC(e){return!!(e&&"delay"in e)}class SS{constructor(t,n,r){var i;r===void 0&&(r=nX(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:s}=a;this.props=t,this.events=n,this.document=wf(s),this.documentListeners=new Wd(this.document),this.listeners=new Wd(r),this.windowListeners=new Wd(Br(s)),this.initialCoordinates=(i=rg(a))!=null?i:Ta,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Hi.Resize,this.handleCancel),this.windowListeners.add(Hi.DragStart,sC),this.windowListeners.add(Hi.VisibilityChange,this.handleCancel),this.windowListeners.add(Hi.ContextMenu,sC),this.documentListeners.add(Hi.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(lC(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(uC(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Hi.Click,rX,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Hi.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:a}=this,{onMove:s,options:{activationConstraint:u}}=a;if(!i)return;const c=(n=rg(t))!=null?n:Ta,d=ng(i,c);if(!r&&u){if(uC(u)){if(u.tolerance!=null&&nw(d,u.tolerance))return this.handleCancel();if(nw(d,u.distance))return this.handleStart()}if(lC(u)&&nw(d,u.tolerance))return this.handleCancel();this.handlePending(u,d);return}t.cancelable&&t.preventDefault(),s(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Lt.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const aX={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class JT extends SS{constructor(t){const{event:n}=t,r=wf(n.target);super(t,aX,r)}}JT.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const oX={move:{name:"mousemove"},end:{name:"mouseup"}};var K_;(function(e){e[e.RightClick=2]="RightClick"})(K_||(K_={}));class ZT extends SS{constructor(t){super(t,oX,wf(t.event.target))}}ZT.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===K_.RightClick?!1:(r==null||r({event:n}),!0)}}];const rw={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class eM extends SS{constructor(t){super(t,rw)}static setup(){return window.addEventListener(rw.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(rw.move.name,t)};function t(){}}}eM.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Ud;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ud||(Ud={}));var ag;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(ag||(ag={}));function sX(e){let{acceleration:t,activator:n=Ud.Pointer,canScroll:r,draggingRect:i,enabled:a,interval:s=5,order:u=ag.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:h,delta:v,threshold:y}=e;const g=lX({delta:v,disabled:!a}),[w,x]=E7(),C=J.useRef({x:0,y:0}),S=J.useRef({x:0,y:0}),E=J.useMemo(()=>{switch(n){case Ud.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Ud.DraggableRect:return i}},[n,i,c]),P=J.useRef(null),N=J.useCallback(()=>{const U=P.current;if(!U)return;const W=C.current.x*S.current.x,re=C.current.y*S.current.y;U.scrollBy(W,re)},[]),T=J.useMemo(()=>u===ag.TreeOrder?[...d].reverse():d,[u,d]);J.useEffect(()=>{if(!a||!d.length||!E){x();return}for(const U of T){if((r==null?void 0:r(U))===!1)continue;const W=d.indexOf(U),re=h[W];if(!re)continue;const{direction:pe,speed:he}=G7(U,re,E,t,y);for(const ce of["x","y"])g[ce][pe[ce]]||(he[ce]=0,pe[ce]=0);if(he.x>0||he.y>0){x(),P.current=U,w(N,s),C.current=he,S.current=pe;return}}C.current={x:0,y:0},S.current={x:0,y:0},x()},[t,N,r,x,a,s,JSON.stringify(E),JSON.stringify(g),w,d,T,h,JSON.stringify(y)])}const uX={x:{[Hn.Backward]:!1,[Hn.Forward]:!1},y:{[Hn.Backward]:!1,[Hn.Forward]:!1}};function lX(e){let{delta:t,disabled:n}=e;const r=tg(t);return np(i=>{if(n||!r||!i)return uX;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Hn.Backward]:i.x[Hn.Backward]||a.x===-1,[Hn.Forward]:i.x[Hn.Forward]||a.x===1},y:{[Hn.Backward]:i.y[Hn.Backward]||a.y===-1,[Hn.Forward]:i.y[Hn.Forward]||a.y===1}}},[n,t,r])}function cX(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return np(i=>{var a;return t==null?null:(a=r??i)!=null?a:null},[r,t])}function fX(e,t){return J.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,a=i.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,r)}));return[...n,...a]},[]),[e,t])}var Ch;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ch||(Ch={}));var q_;(function(e){e.Optimized="optimized"})(q_||(q_={}));const cC=new Map;function dX(e,t){let{dragging:n,dependencies:r,config:i}=t;const[a,s]=J.useState(null),{frequency:u,measure:c,strategy:d}=i,h=J.useRef(e),v=C(),y=Ph(v),g=J.useCallback(function(S){S===void 0&&(S=[]),!y.current&&s(E=>E===null?S:E.concat(S.filter(P=>!E.includes(P))))},[y]),w=J.useRef(null),x=np(S=>{if(v&&!n)return cC;if(!S||S===cC||h.current!==e||a!=null){const E=new Map;for(let P of e){if(!P)continue;if(a&&a.length>0&&!a.includes(P.id)&&P.rect.current){E.set(P.id,P.rect.current);continue}const N=P.node.current,T=N?new bS(c(N),N):null;P.rect.current=T,T&&E.set(P.id,T)}return E}return S},[e,a,n,v,c]);return J.useEffect(()=>{h.current=e},[e]),J.useEffect(()=>{v||g()},[n,v]),J.useEffect(()=>{a&&a.length>0&&s(null)},[JSON.stringify(a)]),J.useEffect(()=>{v||typeof u!="number"||w.current!==null||(w.current=setTimeout(()=>{g(),w.current=null},u))},[u,v,g,...r]),{droppableRects:x,measureDroppableContainers:g,measuringScheduled:a!=null};function C(){switch(d){case Ch.Always:return!1;case Ch.BeforeDragging:return n;default:return!n}}}function xS(e,t){return np(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function hX(e,t){return xS(e,t)}function pX(e){let{callback:t,disabled:n}=e;const r=Hg(t),i=J.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return J.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function qg(e){let{callback:t,disabled:n}=e;const r=Hg(t),i=J.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return J.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function mX(e){return new bS(rp(e),e)}function fC(e,t,n){t===void 0&&(t=mX);const[r,i]=J.useState(null);function a(){i(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??n)!=null?d:null}const h=t(e);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const s=pX({callback(c){if(e)for(const d of c){const{type:h,target:v}=d;if(h==="childList"&&v instanceof HTMLElement&&v.contains(e)){a();break}}}}),u=qg({callback:a});return Xo(()=>{a(),e?(u==null||u.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),s==null||s.disconnect())},[e]),r}function vX(e){const t=xS(e);return BT(e,t)}const dC=[];function gX(e){const t=J.useRef(e),n=np(r=>e?r&&r!==dC&&e&&t.current&&e.parentNode===t.current.parentNode?r:_S(e):dC,[e]);return J.useEffect(()=>{t.current=e},[e]),n}function yX(e){const[t,n]=J.useState(null),r=J.useRef(e),i=J.useCallback(a=>{const s=tw(a.target);s&&n(u=>u?(u.set(s,H_(s)),new Map(u)):null)},[]);return J.useEffect(()=>{const a=r.current;if(e!==a){s(a);const u=e.map(c=>{const d=tw(c);return d?(d.addEventListener("scroll",i,{passive:!0}),[d,H_(d)]):null}).filter(c=>c!=null);n(u.length?new Map(u):null),r.current=e}return()=>{s(e),s(a)};function s(u){u.forEach(c=>{const d=tw(c);d==null||d.removeEventListener("scroll",i)})}},[i,e]),J.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,s)=>Ic(a,s),Ta):VT(e):Ta,[e,t])}function hC(e,t){t===void 0&&(t=[]);const n=J.useRef(null);return J.useEffect(()=>{n.current=null},t),J.useEffect(()=>{const r=e!==Ta;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?ng(e,n.current):Ta}function wX(e){J.useEffect(()=>{if(!Ug)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function _X(e,t){return J.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:a}=r;return n[i]=s=>{a(s,t)},n},{}),[e,t])}function tM(e){return J.useMemo(()=>e?Y7(e):null,[e])}const pC=[];function bX(e,t){t===void 0&&(t=rp);const[n]=e,r=tM(n?Br(n):null),[i,a]=J.useState(pC);function s(){a(()=>e.length?e.map(c=>qT(c)?r:new bS(t(c),c)):pC)}const u=qg({callback:s});return Xo(()=>{u==null||u.disconnect(),s(),e.forEach(c=>u==null?void 0:u.observe(c))},[e]),i}function nM(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return tp(t)?t:e}function SX(e){let{measure:t}=e;const[n,r]=J.useState(null),i=J.useCallback(d=>{for(const{target:h}of d)if(tp(h)){r(v=>{const y=t(h);return v?{...v,width:y.width,height:y.height}:y});break}},[t]),a=qg({callback:i}),s=J.useCallback(d=>{const h=nM(d);a==null||a.disconnect(),h&&(a==null||a.observe(h)),r(h?t(h):null)},[t,a]),[u,c]=eg(s);return J.useMemo(()=>({nodeRef:u,rect:n,setRef:c}),[n,u,c])}const xX=[{sensor:JT,options:{}},{sensor:GT,options:{}}],EX={current:{}},sv={draggable:{measure:oC},droppable:{measure:oC,strategy:Ch.WhileDragging,frequency:q_.Optimized},dragOverlay:{measure:rp}};class Hd extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const PX={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Hd,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ig},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:sv,measureDroppableContainers:ig,windowRect:null,measuringScheduled:!1},rM={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ig,draggableNodes:new Map,over:null,measureDroppableContainers:ig},ip=J.createContext(rM),iM=J.createContext(PX);function kX(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Hd}}}function CX(e,t){switch(t.type){case An.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case An.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case An.DragEnd:case An.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case An.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Hd(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case An.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const s=new Hd(e.droppable.containers);return s.set(n,{...a,disabled:i}),{...e,droppable:{...e.droppable,containers:s}}}case An.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const a=new Hd(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function DX(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=J.useContext(ip),a=tg(r),s=tg(n==null?void 0:n.id);return J.useEffect(()=>{if(!t&&!r&&a&&s!=null){if(!wS(a)||document.activeElement===a.target)return;const u=i.get(s);if(!u)return;const{activatorNode:c,node:d}=u;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const h of[c.current,d.current]){if(!h)continue;const v=C7(h);if(v){v.focus();break}}})}},[r,t,i,s,a]),null}function aM(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,a)=>a({transform:i,...r}),n):n}function OX(e){return J.useMemo(()=>({draggable:{...sv.draggable,...e==null?void 0:e.draggable},droppable:{...sv.droppable,...e==null?void 0:e.droppable},dragOverlay:{...sv.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function $X(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const a=J.useRef(!1),{x:s,y:u}=typeof i=="boolean"?{x:i,y:i}:i;Xo(()=>{if(!s&&!u||!t){a.current=!1;return}if(a.current||!r)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const h=n(d),v=BT(h,r);if(s||(v.x=0),u||(v.y=0),a.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const y=UT(d);y&&y.scrollBy({top:v.y,left:v.x})}},[t,s,u,r,n])}const Yg=J.createContext({...Ta,scaleX:1,scaleY:1});var Es;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Es||(Es={}));const RX=J.memo(function(t){var n,r,i,a;let{id:s,accessibility:u,autoScroll:c=!0,children:d,sensors:h=xX,collisionDetection:v=B7,measuring:y,modifiers:g,...w}=t;const x=J.useReducer(CX,void 0,kX),[C,S]=x,[E,P]=N7(),[N,T]=J.useState(Es.Uninitialized),U=N===Es.Initialized,{draggable:{active:W,nodes:re,translate:pe},droppable:{containers:he}}=C,ce=W!=null?re.get(W):null,fe=J.useRef({initial:null,translated:null}),xe=J.useMemo(()=>{var Xt;return W!=null?{id:W,data:(Xt=ce==null?void 0:ce.data)!=null?Xt:EX,rect:fe}:null},[W,ce]),Ce=J.useRef(null),[Le,qe]=J.useState(null),[We,oe]=J.useState(null),_e=Ph(w,Object.values(w)),G=Kg("DndDescribedBy",s),F=J.useMemo(()=>he.getEnabled(),[he]),te=OX(y),{droppableRects:X,measureDroppableContainers:A,measuringScheduled:H}=dX(F,{dragging:U,dependencies:[pe.x,pe.y],config:te.droppable}),ae=cX(re,W),ge=J.useMemo(()=>We?rg(We):null,[We]),Oe=fu(),ve=hX(ae,te.draggable.measure);$X({activeNode:W!=null?re.get(W):null,config:Oe.layoutShiftCompensation,initialRect:ve,measure:te.draggable.measure});const Ne=fC(ae,te.draggable.measure,ve),Ge=fC(ae?ae.parentElement:null),He=J.useRef({activatorEvent:null,active:null,activeNode:ae,collisionRect:null,collisions:null,droppableRects:X,draggableNodes:re,draggingNode:null,draggingNodeRect:null,droppableContainers:he,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),an=he.getNodeFor((n=He.current.over)==null?void 0:n.id),Et=SX({measure:te.dragOverlay.measure}),At=(r=Et.nodeRef.current)!=null?r:ae,dn=U?(i=Et.rect)!=null?i:Ne:null,on=!!(Et.nodeRef.current&&Et.rect),sr=vX(on?null:Ne),Yn=tM(At?Br(At):null),sn=gX(U?an??ae:null),_t=bX(sn),Vn=aM(g,{transform:{x:pe.x-sr.x,y:pe.y-sr.y,scaleX:1,scaleY:1},activatorEvent:We,active:xe,activeNodeRect:Ne,containerNodeRect:Ge,draggingNodeRect:dn,over:He.current.over,overlayNodeRect:Et.rect,scrollableAncestors:sn,scrollableAncestorRects:_t,windowRect:Yn}),Xn=ge?Ic(ge,pe):null,ra=yX(sn),Qn=hC(ra),Gn=hC(ra,[Ne]),Sn=Ic(Vn,Qn),un=dn?H7(dn,Vn):null,ur=xe&&un?v({active:xe,collisionRect:un,droppableRects:X,droppableContainers:F,pointerCoordinates:Xn}):null,si=z7(ur,"id"),[xn,ia]=J.useState(null),lo=on?Vn:Ic(Vn,Gn),Wr=W7(lo,(a=xn==null?void 0:xn.rect)!=null?a:null,Ne),Fe=J.useRef(null),Oi=J.useCallback((Xt,Ln)=>{let{sensor:On,options:$i}=Ln;if(Ce.current==null)return;const lr=re.get(Ce.current);if(!lr)return;const Qt=Xt.nativeEvent,$n=new On({active:Ce.current,activeNode:lr,event:Qt,options:$i,context:He,onAbort(qt){if(!re.get(qt))return;const{onDragAbort:bt}=_e.current,xr={id:qt};bt==null||bt(xr),E({type:"onDragAbort",event:xr})},onPending(qt,dt,bt,xr){if(!re.get(qt))return;const{onDragPending:Ti}=_e.current,Er={id:qt,constraint:dt,initialCoordinates:bt,offset:xr};Ti==null||Ti(Er),E({type:"onDragPending",event:Er})},onStart(qt){const dt=Ce.current;if(dt==null)return;const bt=re.get(dt);if(!bt)return;const{onDragStart:xr}=_e.current,Ni={activatorEvent:Qt,active:{id:dt,data:bt.data,rect:fe}};Qa.unstable_batchedUpdates(()=>{xr==null||xr(Ni),T(Es.Initializing),S({type:An.DragStart,initialCoordinates:qt,active:dt}),E({type:"onDragStart",event:Ni}),qe(Fe.current),oe(Qt)})},onMove(qt){S({type:An.DragMove,coordinates:qt})},onEnd:Ri(An.DragEnd),onCancel:Ri(An.DragCancel)});Fe.current=$n;function Ri(qt){return async function(){const{active:bt,collisions:xr,over:Ni,scrollAdjustedTranslate:Ti}=He.current;let Er=null;if(bt&&Ti){const{cancelDrop:fo}=_e.current;Er={activatorEvent:Qt,active:bt,collisions:xr,delta:Ti,over:Ni},qt===An.DragEnd&&typeof fo=="function"&&await Promise.resolve(fo(Er))&&(qt=An.DragCancel)}Ce.current=null,Qa.unstable_batchedUpdates(()=>{S({type:qt}),T(Es.Uninitialized),ia(null),qe(null),oe(null),Fe.current=null;const fo=qt===An.DragEnd?"onDragEnd":"onDragCancel";if(Er){const Ur=_e.current[fo];Ur==null||Ur(Er),E({type:fo,event:Er})}})}}},[re]),ui=J.useCallback((Xt,Ln)=>(On,$i)=>{const lr=On.nativeEvent,Qt=re.get($i);if(Ce.current!==null||!Qt||lr.dndKit||lr.defaultPrevented)return;const $n={active:Qt};Xt(On,Ln.options,$n)===!0&&(lr.dndKit={capturedBy:Ln.sensor},Ce.current=$i,Oi(On,Ln))},[re,Oi]),co=fX(h,ui);wX(h),Xo(()=>{Ne&&N===Es.Initializing&&T(Es.Initialized)},[Ne,N]),J.useEffect(()=>{const{onDragMove:Xt}=_e.current,{active:Ln,activatorEvent:On,collisions:$i,over:lr}=He.current;if(!Ln||!On)return;const Qt={active:Ln,activatorEvent:On,collisions:$i,delta:{x:Sn.x,y:Sn.y},over:lr};Qa.unstable_batchedUpdates(()=>{Xt==null||Xt(Qt),E({type:"onDragMove",event:Qt})})},[Sn.x,Sn.y]),J.useEffect(()=>{const{active:Xt,activatorEvent:Ln,collisions:On,droppableContainers:$i,scrollAdjustedTranslate:lr}=He.current;if(!Xt||Ce.current==null||!Ln||!lr)return;const{onDragOver:Qt}=_e.current,$n=$i.get(si),Ri=$n&&$n.rect.current?{id:$n.id,rect:$n.rect.current,data:$n.data,disabled:$n.disabled}:null,qt={active:Xt,activatorEvent:Ln,collisions:On,delta:{x:lr.x,y:lr.y},over:Ri};Qa.unstable_batchedUpdates(()=>{ia(Ri),Qt==null||Qt(qt),E({type:"onDragOver",event:qt})})},[si]),Xo(()=>{He.current={activatorEvent:We,active:xe,activeNode:ae,collisionRect:un,collisions:ur,droppableRects:X,draggableNodes:re,draggingNode:At,draggingNodeRect:dn,droppableContainers:he,over:xn,scrollableAncestors:sn,scrollAdjustedTranslate:Sn},fe.current={initial:dn,translated:un}},[xe,ae,ur,un,re,At,dn,X,he,xn,sn,Sn]),sX({...Oe,delta:pe,draggingRect:un,pointerCoordinates:Xn,scrollableAncestors:sn,scrollableAncestorRects:_t});const Te=J.useMemo(()=>({active:xe,activeNode:ae,activeNodeRect:Ne,activatorEvent:We,collisions:ur,containerNodeRect:Ge,dragOverlay:Et,draggableNodes:re,droppableContainers:he,droppableRects:X,over:xn,measureDroppableContainers:A,scrollableAncestors:sn,scrollableAncestorRects:_t,measuringConfiguration:te,measuringScheduled:H,windowRect:Yn}),[xe,ae,Ne,We,ur,Ge,Et,re,he,X,xn,A,sn,_t,te,H,Yn]),cu=J.useMemo(()=>({activatorEvent:We,activators:co,active:xe,activeNodeRect:Ne,ariaDescribedById:{draggable:G},dispatch:S,draggableNodes:re,over:xn,measureDroppableContainers:A}),[We,co,xe,Ne,S,G,re,xn,A]);return Dt.createElement(zT.Provider,{value:P},Dt.createElement(ip.Provider,{value:cu},Dt.createElement(iM.Provider,{value:Te},Dt.createElement(Yg.Provider,{value:Wr},d)),Dt.createElement(DX,{disabled:(u==null?void 0:u.restoreFocus)===!1})),Dt.createElement(I7,{...u,hiddenTextDescribedById:G}));function fu(){const Xt=(Le==null?void 0:Le.autoScrollEnabled)===!1,Ln=typeof c=="object"?c.enabled===!1:c===!1,On=U&&!Xt&&!Ln;return typeof c=="object"?{...c,enabled:On}:{enabled:On}}}),NX=J.createContext(null),mC="button",TX="Draggable";function oM(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const a=Kg(TX),{activators:s,activatorEvent:u,active:c,activeNodeRect:d,ariaDescribedById:h,draggableNodes:v,over:y}=J.useContext(ip),{role:g=mC,roleDescription:w="draggable",tabIndex:x=0}=i??{},C=(c==null?void 0:c.id)===t,S=J.useContext(C?Yg:NX),[E,P]=eg(),[N,T]=eg(),U=_X(s,t),W=Ph(n);Xo(()=>(v.set(t,{id:t,key:a,node:E,activatorNode:N,data:W}),()=>{const pe=v.get(t);pe&&pe.key===a&&v.delete(t)}),[v,t]);const re=J.useMemo(()=>({role:g,tabIndex:x,"aria-disabled":r,"aria-pressed":C&&g===mC?!0:void 0,"aria-roledescription":w,"aria-describedby":h.draggable}),[r,g,x,C,w,h.draggable]);return{active:c,activatorEvent:u,activeNodeRect:d,attributes:re,isDragging:C,listeners:r?void 0:U,node:E,over:y,setNodeRef:P,setActivatorNodeRef:T,transform:S}}function MX(){return J.useContext(iM)}const IX="Droppable",AX={timeout:25};function ap(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const a=Kg(IX),{active:s,dispatch:u,over:c,measureDroppableContainers:d}=J.useContext(ip),h=J.useRef({disabled:n}),v=J.useRef(!1),y=J.useRef(null),g=J.useRef(null),{disabled:w,updateMeasurementsFor:x,timeout:C}={...AX,...i},S=Ph(x??r),E=J.useCallback(()=>{if(!v.current){v.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{d(Array.isArray(S.current)?S.current:[S.current]),g.current=null},C)},[C]),P=qg({callback:E,disabled:w||!s}),N=J.useCallback((re,pe)=>{P&&(pe&&(P.unobserve(pe),v.current=!1),re&&P.observe(re))},[P]),[T,U]=eg(N),W=Ph(t);return J.useEffect(()=>{!P||!T.current||(P.disconnect(),v.current=!1,P.observe(T.current))},[T,P]),J.useEffect(()=>(u({type:An.RegisterDroppable,element:{id:r,key:a,disabled:n,node:T,rect:y,data:W}}),()=>u({type:An.UnregisterDroppable,key:a,id:r})),[r]),J.useEffect(()=>{n!==h.current.disabled&&(u({type:An.SetDroppableDisabled,id:r,key:a,disabled:n}),h.current.disabled=n)},[r,a,n,u]),{active:s,rect:y,isOver:(c==null?void 0:c.id)===r,node:T,over:c,setNodeRef:U}}function jX(e){let{animation:t,children:n}=e;const[r,i]=J.useState(null),[a,s]=J.useState(null),u=tg(n);return!n&&!r&&u&&i(u),Xo(()=>{if(!a)return;const c=r==null?void 0:r.key,d=r==null?void 0:r.props.id;if(c==null||d==null){i(null);return}Promise.resolve(t(d,a)).then(()=>{i(null)})},[t,r,a]),Dt.createElement(Dt.Fragment,null,n,r?J.cloneElement(r,{ref:s}):null)}const LX={x:0,y:0,scaleX:1,scaleY:1};function zX(e){let{children:t}=e;return Dt.createElement(ip.Provider,{value:rM},Dt.createElement(Yg.Provider,{value:LX},t))}const FX={position:"fixed",touchAction:"none"},BX=e=>wS(e)?"transform 250ms ease":void 0,WX=J.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:i,children:a,className:s,rect:u,style:c,transform:d,transition:h=BX}=e;if(!u)return null;const v=i?d:{...d,scaleX:1,scaleY:1},y={...FX,width:u.width,height:u.height,top:u.top,left:u.left,transform:kh.Transform.toString(v),transformOrigin:i&&r?j7(r,u):void 0,transition:typeof h=="function"?h(r):h,...c};return Dt.createElement(n,{className:s,style:y,ref:t},a)}),UX=e=>t=>{let{active:n,dragOverlay:r}=t;const i={},{styles:a,className:s}=e;if(a!=null&&a.active)for(const[u,c]of Object.entries(a.active))c!==void 0&&(i[u]=n.node.style.getPropertyValue(u),n.node.style.setProperty(u,c));if(a!=null&&a.dragOverlay)for(const[u,c]of Object.entries(a.dragOverlay))c!==void 0&&r.node.style.setProperty(u,c);return s!=null&&s.active&&n.node.classList.add(s.active),s!=null&&s.dragOverlay&&r.node.classList.add(s.dragOverlay),function(){for(const[c,d]of Object.entries(i))n.node.style.setProperty(c,d);s!=null&&s.active&&n.node.classList.remove(s.active)}},HX=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:kh.Transform.toString(t)},{transform:kh.Transform.toString(n)}]},KX={duration:250,easing:"ease",keyframes:HX,sideEffects:UX({styles:{active:{opacity:"0"}}})};function qX(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=e;return Hg((a,s)=>{if(t===null)return;const u=n.get(a);if(!u)return;const c=u.node.current;if(!c)return;const d=nM(s);if(!d)return;const{transform:h}=Br(s).getComputedStyle(s),v=WT(h);if(!v)return;const y=typeof t=="function"?t:YX(t);return XT(c,i.draggable.measure),y({active:{id:a,data:u.data,node:c,rect:i.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:s,rect:i.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:i,transform:v})})}function YX(e){const{duration:t,easing:n,sideEffects:r,keyframes:i}={...KX,...e};return a=>{let{active:s,dragOverlay:u,transform:c,...d}=a;if(!t)return;const h={x:u.rect.left-s.rect.left,y:u.rect.top-s.rect.top},v={scaleX:c.scaleX!==1?s.rect.width*c.scaleX/u.rect.width:1,scaleY:c.scaleY!==1?s.rect.height*c.scaleY/u.rect.height:1},y={x:c.x-h.x,y:c.y-h.y,...v},g=i({...d,active:s,dragOverlay:u,transform:{initial:c,final:y}}),[w]=g,x=g[g.length-1];if(JSON.stringify(w)===JSON.stringify(x))return;const C=r==null?void 0:r({active:s,dragOverlay:u,...d}),S=u.node.animate(g,{duration:t,easing:n,fill:"forwards"});return new Promise(E=>{S.onfinish=()=>{C==null||C(),E()}})}}let vC=0;function VX(e){return J.useMemo(()=>{if(e!=null)return vC++,vC},[e])}const XX=Dt.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:i,transition:a,modifiers:s,wrapperElement:u="div",className:c,zIndex:d=999}=e;const{activatorEvent:h,active:v,activeNodeRect:y,containerNodeRect:g,draggableNodes:w,droppableContainers:x,dragOverlay:C,over:S,measuringConfiguration:E,scrollableAncestors:P,scrollableAncestorRects:N,windowRect:T}=MX(),U=J.useContext(Yg),W=VX(v==null?void 0:v.id),re=aM(s,{activatorEvent:h,active:v,activeNodeRect:y,containerNodeRect:g,draggingNodeRect:C.rect,over:S,overlayNodeRect:C.rect,scrollableAncestors:P,scrollableAncestorRects:N,transform:U,windowRect:T}),pe=xS(y),he=qX({config:r,draggableNodes:w,droppableContainers:x,measuringConfiguration:E}),ce=pe?C.setRef:void 0;return Dt.createElement(zX,null,Dt.createElement(jX,{animation:he},v&&W?Dt.createElement(WX,{key:W,id:v.id,ref:ce,as:u,activatorEvent:h,adjustScale:t,className:c,transition:a,rect:pe,style:{zIndex:d,...i},transform:re},n):null))}),sM=6048e5,QX=864e5,Vg=6e4,uM=36e5,gC=Symbol.for("constructDateFrom");function xi(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&gC in e?e[gC](t):e instanceof Date?new e.constructor(t):new Date(t)}function rn(e,t){return xi(t||e,e)}function og(e,t,n){const r=rn(e,n==null?void 0:n.in);return isNaN(t)?xi((n==null?void 0:n.in)||e,NaN):(t&&r.setDate(r.getDate()+t),r)}function lM(e,t,n){const r=rn(e,n==null?void 0:n.in);if(isNaN(t))return xi((n==null?void 0:n.in)||e,NaN);if(!t)return r;const i=r.getDate(),a=xi((n==null?void 0:n.in)||e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const s=a.getDate();return i>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}let GX={};function op(){return GX}function tu(e,t){var u,c,d,h;const n=op(),r=(t==null?void 0:t.weekStartsOn)??((c=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,i=rn(e,t==null?void 0:t.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function sg(e,t){return tu(e,{...t,weekStartsOn:1})}function cM(e,t){const n=rn(e,t==null?void 0:t.in),r=n.getFullYear(),i=xi(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=sg(i),s=xi(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const u=sg(s);return n.getTime()>=a.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function yC(e){const t=rn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function sp(e,...t){const n=xi.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function Ms(e,t){const n=rn(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function fM(e,t,n){const[r,i]=sp(n==null?void 0:n.in,e,t),a=Ms(r),s=Ms(i),u=+a-yC(a),c=+s-yC(s);return Math.round((u-c)/QX)}function JX(e,t){const n=cM(e,t),r=xi((t==null?void 0:t.in)||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),sg(r)}function Ac(e,t,n){const r=rn(e,n==null?void 0:n.in);return r.setTime(r.getTime()+t*Vg),r}function dM(e,t,n){return og(e,t*7,n)}function nc(e,t,n){const[r,i]=sp(n==null?void 0:n.in,e,t);return+Ms(r)==+Ms(i)}function ZX(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function eQ(e){return!(!ZX(e)&&typeof e!="number"||isNaN(+rn(e)))}function tQ(e,t,n){const[r,i]=sp(n==null?void 0:n.in,e,t),a=wC(r,i),s=Math.abs(fM(r,i));r.setDate(r.getDate()-a*s);const u=+(wC(r,i)===-a),c=a*(s-u);return c===0?0:c}function wC(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function nQ(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function rQ(e,t){return+rn(e)-+rn(t)}function Is(e,t,n){const r=rQ(e,t)/Vg;return nQ(n==null?void 0:n.roundingMethod)(r)}function Y_(e,t){const n=rn(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function iQ(e,t){const[n,r]=sp(e,t.start,t.end);return{start:n,end:r}}function _C(e,t){const{start:n,end:r}=iQ(t==null?void 0:t.in,e);let i=+n>+r;const a=i?+n:+r,s=i?r:n;s.setHours(0,0,0,0);let u=(t==null?void 0:t.step)??1;if(!u)return[];u<0&&(u=-u,i=!i);const c=[];for(;+s<=a;)c.push(xi(n,s)),s.setDate(s.getDate()+u),s.setHours(0,0,0,0);return i?c.reverse():c}function V_(e,t){const n=rn(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function aQ(e,t){const n=rn(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function X_(e,t){var u,c,d,h;const n=op(),r=(t==null?void 0:t.weekStartsOn)??((c=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,i=rn(e,t==null?void 0:t.in),a=i.getDay(),s=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}const oQ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},sQ=(e,t,n)=>{let r;const i=oQ[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function iw(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const uQ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},lQ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},cQ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fQ={date:iw({formats:uQ,defaultWidth:"full"}),time:iw({formats:lQ,defaultWidth:"full"}),dateTime:iw({formats:cQ,defaultWidth:"full"})},dQ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},hQ=(e,t,n,r)=>dQ[e];function hd(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,u=n!=null&&n.width?String(n.width):s;i=e.formattingValues[u]||e.formattingValues[s]}else{const s=e.defaultWidth,u=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[u]||e.values[s]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const pQ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},mQ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},vQ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},gQ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},yQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},wQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},_Q=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},bQ={ordinalNumber:_Q,era:hd({values:pQ,defaultWidth:"wide"}),quarter:hd({values:mQ,defaultWidth:"wide",argumentCallback:e=>e-1}),month:hd({values:vQ,defaultWidth:"wide"}),day:hd({values:gQ,defaultWidth:"wide"}),dayPeriod:hd({values:yQ,defaultWidth:"wide",formattingValues:wQ,defaultFormattingWidth:"wide"})};function pd(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const s=a[0],u=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(u)?xQ(u,v=>v.test(s)):SQ(u,v=>v.test(s));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const h=t.slice(s.length);return{value:d,rest:h}}}function SQ(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function xQ(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function EQ(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],a=t.match(e.parsePattern);if(!a)return null;let s=e.valueCallback?e.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const u=t.slice(i.length);return{value:s,rest:u}}}const PQ=/^(\d+)(th|st|nd|rd)?/i,kQ=/\d+/i,CQ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},DQ={any:[/^b/i,/^(a|c)/i]},OQ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},$Q={any:[/1/i,/2/i,/3/i,/4/i]},RQ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},NQ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},TQ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},MQ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},IQ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},AQ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},jQ={ordinalNumber:EQ({matchPattern:PQ,parsePattern:kQ,valueCallback:e=>parseInt(e,10)}),era:pd({matchPatterns:CQ,defaultMatchWidth:"wide",parsePatterns:DQ,defaultParseWidth:"any"}),quarter:pd({matchPatterns:OQ,defaultMatchWidth:"wide",parsePatterns:$Q,defaultParseWidth:"any",valueCallback:e=>e+1}),month:pd({matchPatterns:RQ,defaultMatchWidth:"wide",parsePatterns:NQ,defaultParseWidth:"any"}),day:pd({matchPatterns:TQ,defaultMatchWidth:"wide",parsePatterns:MQ,defaultParseWidth:"any"}),dayPeriod:pd({matchPatterns:IQ,defaultMatchWidth:"any",parsePatterns:AQ,defaultParseWidth:"any"})},LQ={code:"en-US",formatDistance:sQ,formatLong:fQ,formatRelative:hQ,localize:bQ,match:jQ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function zQ(e,t){const n=rn(e,t==null?void 0:t.in);return fM(n,aQ(n))+1}function FQ(e,t){const n=rn(e,t==null?void 0:t.in),r=+sg(n)-+JX(n);return Math.round(r/sM)+1}function hM(e,t){var h,v,y,g;const n=rn(e,t==null?void 0:t.in),r=n.getFullYear(),i=op(),a=(t==null?void 0:t.firstWeekContainsDate)??((v=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:v.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(y=i.locale)==null?void 0:y.options)==null?void 0:g.firstWeekContainsDate)??1,s=xi((t==null?void 0:t.in)||e,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const u=tu(s,t),c=xi((t==null?void 0:t.in)||e,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const d=tu(c,t);return+n>=+u?r+1:+n>=+d?r:r-1}function BQ(e,t){var u,c,d,h;const n=op(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,i=hM(e,t),a=xi((t==null?void 0:t.in)||e,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),tu(a,t)}function WQ(e,t){const n=rn(e,t==null?void 0:t.in),r=+tu(n,t)-+BQ(n,t);return Math.round(r/sM)+1}function Ct(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const ys={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Ct(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Ct(n+1,2)},d(e,t){return Ct(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Ct(e.getHours()%12||12,t.length)},H(e,t){return Ct(e.getHours(),t.length)},m(e,t){return Ct(e.getMinutes(),t.length)},s(e,t){return Ct(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Ct(i,t.length)}},rc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},bC={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ys.y(e,t)},Y:function(e,t,n,r){const i=hM(e,r),a=i>0?i:1-i;if(t==="YY"){const s=a%100;return Ct(s,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):Ct(a,t.length)},R:function(e,t){const n=cM(e);return Ct(n,t.length)},u:function(e,t){const n=e.getFullYear();return Ct(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ct(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ct(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return ys.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ct(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=WQ(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):Ct(i,t.length)},I:function(e,t,n){const r=FQ(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Ct(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):ys.d(e,t)},D:function(e,t,n){const r=zQ(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ct(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Ct(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Ct(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return Ct(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=rc.noon:r===0?i=rc.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=rc.evening:r>=12?i=rc.afternoon:r>=4?i=rc.morning:i=rc.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ys.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):ys.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ct(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ct(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):ys.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):ys.s(e,t)},S:function(e,t){return ys.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return xC(r);case"XXXX":case"XX":return Ku(r);case"XXXXX":case"XXX":default:return Ku(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return xC(r);case"xxxx":case"xx":return Ku(r);case"xxxxx":case"xxx":default:return Ku(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+SC(r,":");case"OOOO":default:return"GMT"+Ku(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+SC(r,":");case"zzzz":default:return"GMT"+Ku(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return Ct(r,t.length)},T:function(e,t,n){return Ct(+e,t.length)}};function SC(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+t+Ct(a,2)}function xC(e,t){return e%60===0?(e>0?"-":"+")+Ct(Math.abs(e)/60,2):Ku(e,t)}function Ku(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Ct(Math.trunc(r/60),2),a=Ct(r%60,2);return n+i+t+a}const EC=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},pM=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},UQ=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return EC(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",EC(r,t)).replace("{{time}}",pM(i,t))},HQ={p:pM,P:UQ},KQ=/^D+$/,qQ=/^Y+$/,YQ=["D","DD","YY","YYYY"];function VQ(e){return KQ.test(e)}function XQ(e){return qQ.test(e)}function QQ(e,t,n){const r=GQ(e,t,n);if(console.warn(r),YQ.includes(e))throw new RangeError(r)}function GQ(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const JQ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ZQ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,eG=/^'([^]*?)'?$/,tG=/''/g,nG=/[a-zA-Z]/;function it(e,t,n){var h,v,y,g,w,x,C,S;const r=op(),i=(n==null?void 0:n.locale)??r.locale??LQ,a=(n==null?void 0:n.firstWeekContainsDate)??((v=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:v.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(y=r.locale)==null?void 0:y.options)==null?void 0:g.firstWeekContainsDate)??1,s=(n==null?void 0:n.weekStartsOn)??((x=(w=n==null?void 0:n.locale)==null?void 0:w.options)==null?void 0:x.weekStartsOn)??r.weekStartsOn??((S=(C=r.locale)==null?void 0:C.options)==null?void 0:S.weekStartsOn)??0,u=rn(e,n==null?void 0:n.in);if(!eQ(u))throw new RangeError("Invalid time value");let c=t.match(ZQ).map(E=>{const P=E[0];if(P==="p"||P==="P"){const N=HQ[P];return N(E,i.formatLong)}return E}).join("").match(JQ).map(E=>{if(E==="''")return{isToken:!1,value:"'"};const P=E[0];if(P==="'")return{isToken:!1,value:rG(E)};if(bC[P])return{isToken:!0,value:E};if(P.match(nG))throw new RangeError("Format string contains an unescaped latin alphabet character `"+P+"`");return{isToken:!1,value:E}});i.localize.preprocessor&&(c=i.localize.preprocessor(u,c));const d={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return c.map(E=>{if(!E.isToken)return E.value;const P=E.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&XQ(P)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&VQ(P))&&QQ(P,t,String(e));const N=bC[P[0]];return N(u,P,i.localize,d)}).join("")}function rG(e){const t=e.match(eG);return t?t[1].replace(tG,"'"):e}function iG(e,t,n){const[r,i]=sp(n==null?void 0:n.in,e,t);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function aG(e,t){const n=()=>xi(t==null?void 0:t.in,NaN),r=(t==null?void 0:t.additionalDigits)??2,i=lG(e);let a;if(i.date){const d=cG(i.date,r);a=fG(d.restDateString,d.year)}if(!a||isNaN(+a))return n();const s=+a;let u=0,c;if(i.time&&(u=dG(i.time),isNaN(u)))return n();if(i.timezone){if(c=hG(i.timezone),isNaN(c))return n()}else{const d=new Date(s+u),h=rn(0,t==null?void 0:t.in);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return rn(s+u+c,t==null?void 0:t.in)}const Om={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},oG=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,sG=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,uG=/^([+-])(\d{2})(?::?(\d{2}))?$/;function lG(e){const t={},n=e.split(Om.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],Om.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Om.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const i=Om.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function cG(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?i:a*100,restDateString:e.slice((r[1]||r[2]).length)}}function fG(e,t){if(t===null)return new Date(NaN);const n=e.match(oG);if(!n)return new Date(NaN);const r=!!n[4],i=md(n[1]),a=md(n[2])-1,s=md(n[3]),u=md(n[4]),c=md(n[5])-1;if(r)return yG(t,u,c)?pG(t,u,c):new Date(NaN);{const d=new Date(0);return!vG(t,a,s)||!gG(t,i)?new Date(NaN):(d.setUTCFullYear(t,a,Math.max(i,s)),d)}}function md(e){return e?parseInt(e):1}function dG(e){const t=e.match(sG);if(!t)return NaN;const n=aw(t[1]),r=aw(t[2]),i=aw(t[3]);return wG(n,r,i)?n*uM+r*Vg+i*1e3:NaN}function aw(e){return e&&parseFloat(e.replace(",","."))||0}function hG(e){if(e==="Z")return 0;const t=e.match(uG);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return _G(r,i)?n*(r*uM+i*Vg):NaN}function pG(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,a=(t-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+a),r}const mG=[31,null,31,30,31,30,31,31,30,31,30,31];function mM(e){return e%400===0||e%4===0&&e%100!==0}function vG(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(mG[t]||(mM(e)?29:28))}function gG(e,t){return t>=1&&t<=(mM(e)?366:365)}function yG(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function wG(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function _G(e,t){return t>=0&&t<=59}function Ki(e,t,n){const r=rn(e,n==null?void 0:n.in);return r.setHours(t),r}function As(e,t,n){const r=rn(e,n==null?void 0:n.in);return r.setMinutes(t),r}function bG(e,t,n){return lM(e,-t,n)}function SG(e,t,n){return dM(e,-t,n)}const xG=async(e,t)=>{var s;const{active:n,over:r}=e;if(!r)return;const i=n.data.current,a=r.data.current;if(!(!i||!a)&&i.entity_type==="task")try{const u=await t.items.findOne(i.id).exec();if(!u)return;if(a.type==="calendar_cell")await u.incrementalPatch({do_date:a.date,start_time:null});else if(a.type==="matrix_quad"){const c=a.quad,h={...u.properties||{}},v={};c==="Q1"?(h.priority="high",v.do_date=new Date().toISOString().split("T")[0]):c==="Q2"?h.priority="high":c==="Q3"?(h.priority="low",v.do_date=new Date().toISOString().split("T")[0]):c==="Q4"&&(h.priority="low",v.system_status="dropped"),v.properties=h,await u.incrementalPatch(v)}else if(a.type==="smart_list"){const c=((s=a.config)==null?void 0:s.criteria)||{},d={},h={...u.properties};if(c.do_date===null)d.do_date=null;else if(c.do_date==="today")d.do_date=new Date().toISOString().split("T")[0];else if(c.do_date==="tomorrow"){const v=new Date;v.setDate(v.getDate()+1),d.do_date=v.toISOString().split("T")[0]}else typeof c.do_date=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(c.do_date)&&(d.do_date=c.do_date);Object.keys(c).forEach(v=>{if(v.startsWith("properties.")){const y=v.replace("properties.","");h[y]=c[v]}}),c.system_status&&typeof c.system_status=="string"&&(d.system_status=c.system_status),d.properties=h,await u.incrementalPatch(d)}else if(a.type==="archive_bin")await u.incrementalPatch({system_status:"archived",completed_at:Date.now()});else if(a.type==="timeline_day"){const{day:c,startHour:d,totalMinutes:h}=a;let v=n.rect.current.translated;!v&&n.rect.current.initial&&e.delta&&(v={top:n.rect.current.initial.top+e.delta.y,left:n.rect.current.initial.left+e.delta.x,height:n.rect.current.initial.height,width:n.rect.current.initial.width,bottom:n.rect.current.initial.bottom+e.delta.y,right:n.rect.current.initial.right+e.delta.x});const y=r.rect;if(v&&y){const g=v.top-y.top,x=Math.max(0,Math.min(1,g/y.height))*h,C=Math.round(x/15)*15,S=Ac(Ki(As(new Date(c),0),d),C);let E=45;if(u.start_time&&u.end_time){const N=(new Date(u.end_time).getTime()-new Date(u.start_time).getTime())/6e4;N>0&&(E=N)}const P=Ac(S,E);await u.incrementalPatch({do_date:it(new Date(c),"yyyy-MM-dd"),start_time:S.toISOString(),end_time:P.toISOString()})}}else if(a.type==="project_detail"){const c=a.project_id;if(c){const d=u.properties||{};await u.incrementalPatch({properties:{...d,project_id:c}})}}}catch(u){console.error("Drag logic failed:",u)}},EG=({widgets:e})=>{const t=e.reduce((a,s)=>{const u=s.group_id;return u&&(a[u]||(a[u]=[]),a[u].push(s)),a},{}),n=()=>{const a=[];return Object.entries(t).forEach(([s,u])=>{const c=u.filter(g=>g.widget_type==="calendar_master"),d=u.filter(g=>g.widget_type==="smart_list"),h=u.filter(g=>g.widget_type==="detail"),v=u.filter(g=>g.widget_type==="project_header");c.forEach(g=>{d.forEach(w=>{a.push(r(g,w,`${s}-cal-list`))})}),c.forEach(g=>{v.forEach(w=>{a.push(r(g,w,`${s}-cal-header`))})});const y=u.filter(g=>g.widget_type==="timeline");c.forEach(g=>{y.forEach(w=>{a.push(r(g,w,`${s}-cal-timeline`))})}),v.forEach(g=>{d.forEach(w=>{a.push(r(g,w,`${s}-header-list`))})}),d.forEach(g=>{h.forEach(w=>{a.push(r(g,w,`${s}-list-detail`))})})}),a},r=(a,s,u)=>{var v;const c=a.geometry,d=s.geometry,h=((v=s.view_state)==null?void 0:v.is_pinned)||!1;return $.jsx("path",{d:i(c,d),stroke:h?"#cbd5e1":"#94a3b8",strokeWidth:"2",fill:"none",strokeDasharray:h?"5,5":"none",markerEnd:h?"url(#arrowhead-dashed)":"url(#arrowhead)"},`${u}-${a.id}-${s.id}`)},i=(a,s)=>{if(!a||!s)return"";const u=a.x+a.w/2,c=a.y+a.h/2,d=s.x+s.w/2,h=s.y+s.h/2,v=Math.abs(d-u),y=u+v*.5,g=c,w=d-v*.5;return`M ${u} ${c} C ${y} ${g}, ${w} ${h}, ${d} ${h}`};return $.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none overflow-visible",style:{zIndex:0},children:[$.jsxs("defs",{children:[$.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:$.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#94a3b8"})}),$.jsx("marker",{id:"arrowhead-dashed",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:$.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#cbd5e1"})})]}),n()]})};var Xg={exports:{}},vM={},gM={exports:{}},PG="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kG=PG,CG=kG;function yM(){}function wM(){}wM.resetWarningCache=yM;var DG=function(){function e(r,i,a,s,u,c){if(c!==CG){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:wM,resetWarningCache:yM};return n.PropTypes=n,n};gM.exports=DG();var _M=gM.exports;function bM(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=bM(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function PC(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=bM(e))&&(r&&(r+=" "),r+=t);return r}const OG=Object.freeze(Object.defineProperty({__proto__:null,clsx:PC,default:PC},Symbol.toStringTag,{value:"Module"})),$G=Lz(OG);var fn={},so={};Object.defineProperty(so,"__esModule",{value:!0});so.dontSetMe=IG;so.findInArray=RG;so.int=MG;so.isFunction=NG;so.isNum=TG;function RG(e,t){for(let n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function NG(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function TG(e){return typeof e=="number"&&!isNaN(e)}function MG(e){return parseInt(e,10)}function IG(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))}var xl={};Object.defineProperty(xl,"__esModule",{value:!0});xl.browserPrefixToKey=xM;xl.browserPrefixToStyle=AG;xl.default=void 0;xl.getPrefix=SM;const ow=["Moz","Webkit","O","ms"];function SM(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(e=window.document)===null||e===void 0||(e=e.documentElement)===null||e===void 0?void 0:e.style;if(!n||t in n)return"";for(let r=0;r<ow.length;r++)if(xM(t,ow[r])in n)return ow[r];return""}function xM(e,t){return t?"".concat(t).concat(jG(e)):e}function AG(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e}function jG(e){let t="",n=!0;for(let r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):e[r]==="-"?n=!0:t+=e[r];return t}xl.default=SM();Object.defineProperty(fn,"__esModule",{value:!0});fn.addClassName=kM;fn.addEvent=FG;fn.addUserSelectStyles=GG;fn.createCSSTransform=YG;fn.createSVGTransform=VG;fn.getTouch=XG;fn.getTouchIdentifier=QG;fn.getTranslation=ES;fn.innerHeight=HG;fn.innerWidth=KG;fn.matchesSelector=PM;fn.matchesSelectorAndParentsTo=zG;fn.offsetXYFromParent=qG;fn.outerHeight=WG;fn.outerWidth=UG;fn.removeClassName=CM;fn.removeEvent=BG;fn.removeUserSelectStyles=JG;var wi=so,kC=LG(xl);function EM(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(EM=function(r){return r?n:t})(e)}function LG(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=EM(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}let $m="";function PM(e,t){return $m||($m=(0,wi.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,wi.isFunction)(e[n])})),(0,wi.isFunction)(e[$m])?e[$m](t):!1}function zG(e,t,n){let r=e;do{if(PM(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function FG(e,t,n,r){if(!e)return;const i={capture:!0,...r};e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function BG(e,t,n,r){if(!e)return;const i={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}function WG(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,wi.int)(n.borderTopWidth),t+=(0,wi.int)(n.borderBottomWidth),t}function UG(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,wi.int)(n.borderLeftWidth),t+=(0,wi.int)(n.borderRightWidth),t}function HG(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,wi.int)(n.paddingTop),t-=(0,wi.int)(n.paddingBottom),t}function KG(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,wi.int)(n.paddingLeft),t-=(0,wi.int)(n.paddingRight),t}function qG(e,t,n){const i=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-i.left)/n,s=(e.clientY+t.scrollTop-i.top)/n;return{x:a,y:s}}function YG(e,t){const n=ES(e,t,"px");return{[(0,kC.browserPrefixToKey)("transform",kC.default)]:n}}function VG(e,t){return ES(e,t,"")}function ES(e,t,n){let{x:r,y:i}=e,a="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(t){const s="".concat(typeof t.x=="string"?t.x:t.x+n),u="".concat(typeof t.y=="string"?t.y:t.y+n);a="translate(".concat(s,", ").concat(u,")")+a}return a}function XG(e,t){return e.targetTouches&&(0,wi.findInArray)(e.targetTouches,n=>t===n.identifier)||e.changedTouches&&(0,wi.findInArray)(e.changedTouches,n=>t===n.identifier)}function QG(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function GG(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&kM(e.body,"react-draggable-transparent-selection")}function JG(e){if(e)try{if(e.body&&CM(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function kM(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function CM(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var uo={};Object.defineProperty(uo,"__esModule",{value:!0});uo.canDragX=tJ;uo.canDragY=nJ;uo.createCoreData=iJ;uo.createDraggableData=aJ;uo.getBoundPosition=ZG;uo.getControlPosition=rJ;uo.snapToGrid=eJ;var pi=so,_c=fn;function ZG(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:r}=e.props;r=typeof r=="string"?r:oJ(r);const i=PS(e);if(typeof r=="string"){const{ownerDocument:a}=i,s=a.defaultView;let u;if(r==="parent"?u=i.parentNode:u=a.querySelector(r),!(u instanceof s.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=u,d=s.getComputedStyle(i),h=s.getComputedStyle(c);r={left:-i.offsetLeft+(0,pi.int)(h.paddingLeft)+(0,pi.int)(d.marginLeft),top:-i.offsetTop+(0,pi.int)(h.paddingTop)+(0,pi.int)(d.marginTop),right:(0,_c.innerWidth)(c)-(0,_c.outerWidth)(i)-i.offsetLeft+(0,pi.int)(h.paddingRight)-(0,pi.int)(d.marginRight),bottom:(0,_c.innerHeight)(c)-(0,_c.outerHeight)(i)-i.offsetTop+(0,pi.int)(h.paddingBottom)-(0,pi.int)(d.marginBottom)}}return(0,pi.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,pi.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,pi.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,pi.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]}function eJ(e,t,n){const r=Math.round(t/e[0])*e[0],i=Math.round(n/e[1])*e[1];return[r,i]}function tJ(e){return e.props.axis==="both"||e.props.axis==="x"}function nJ(e){return e.props.axis==="both"||e.props.axis==="y"}function rJ(e,t,n){const r=typeof t=="number"?(0,_c.getTouch)(e,t):null;if(typeof t=="number"&&!r)return null;const i=PS(n),a=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,_c.offsetXYFromParent)(r||e,a,n.props.scale)}function iJ(e,t,n){const r=!(0,pi.isNum)(e.lastX),i=PS(e);return r?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:i,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}}function aJ(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function oJ(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function PS(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Qg={},Gg={};Object.defineProperty(Gg,"__esModule",{value:!0});Gg.default=sJ;function sJ(){}Object.defineProperty(Qg,"__esModule",{value:!0});Qg.default=void 0;var sw=lJ(J),Qr=kS(_M),uJ=kS(Qa),wr=fn,ws=uo,uw=so,vd=kS(Gg);function kS(e){return e&&e.__esModule?e:{default:e}}function DM(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(DM=function(r){return r?n:t})(e)}function lJ(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=DM(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function $r(e,t,n){return t=cJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cJ(e){var t=fJ(e,"string");return typeof t=="symbol"?t:String(t)}function fJ(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const wa={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let _s=wa.mouse,Jg=class extends sw.Component{constructor(){super(...arguments),$r(this,"dragging",!1),$r(this,"lastX",NaN),$r(this,"lastY",NaN),$r(this,"touchIdentifier",null),$r(this,"mounted",!1),$r(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(t.target instanceof r.defaultView.Node)||this.props.handle&&!(0,wr.matchesSelectorAndParentsTo)(t.target,this.props.handle,n)||this.props.cancel&&(0,wr.matchesSelectorAndParentsTo)(t.target,this.props.cancel,n))return;t.type==="touchstart"&&t.preventDefault();const i=(0,wr.getTouchIdentifier)(t);this.touchIdentifier=i;const a=(0,ws.getControlPosition)(t,i,this);if(a==null)return;const{x:s,y:u}=a,c=(0,ws.createCoreData)(this,s,u);(0,vd.default)("DraggableCore: handleDragStart: %j",c),(0,vd.default)("calling",this.props.onStart),!(this.props.onStart(t,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,wr.addUserSelectStyles)(r),this.dragging=!0,this.lastX=s,this.lastY=u,(0,wr.addEvent)(r,_s.move,this.handleDrag),(0,wr.addEvent)(r,_s.stop,this.handleDragStop))}),$r(this,"handleDrag",t=>{const n=(0,ws.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let u=r-this.lastX,c=i-this.lastY;if([u,c]=(0,ws.snapToGrid)(this.props.grid,u,c),!u&&!c)return;r=this.lastX+u,i=this.lastY+c}const a=(0,ws.createCoreData)(this,r,i);if((0,vd.default)("DraggableCore: handleDrag: %j",a),this.props.onDrag(t,a)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=i}),$r(this,"handleDragStop",t=>{if(!this.dragging)return;const n=(0,ws.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,d=i-this.lastY||0;[c,d]=(0,ws.snapToGrid)(this.props.grid,c,d),r=this.lastX+c,i=this.lastY+d}const a=(0,ws.createCoreData)(this,r,i);if(this.props.onStop(t,a)===!1||this.mounted===!1)return!1;const u=this.findDOMNode();u&&this.props.enableUserSelectHack&&(0,wr.removeUserSelectStyles)(u.ownerDocument),(0,vd.default)("DraggableCore: handleDragStop: %j",a),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,u&&((0,vd.default)("DraggableCore: Removing handlers"),(0,wr.removeEvent)(u.ownerDocument,_s.move,this.handleDrag),(0,wr.removeEvent)(u.ownerDocument,_s.stop,this.handleDragStop))}),$r(this,"onMouseDown",t=>(_s=wa.mouse,this.handleDragStart(t))),$r(this,"onMouseUp",t=>(_s=wa.mouse,this.handleDragStop(t))),$r(this,"onTouchStart",t=>(_s=wa.touch,this.handleDragStart(t))),$r(this,"onTouchEnd",t=>(_s=wa.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,wr.addEvent)(t,wa.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:n}=t;(0,wr.removeEvent)(n,wa.mouse.move,this.handleDrag),(0,wr.removeEvent)(n,wa.touch.move,this.handleDrag),(0,wr.removeEvent)(n,wa.mouse.stop,this.handleDragStop),(0,wr.removeEvent)(n,wa.touch.stop,this.handleDragStop),(0,wr.removeEvent)(t,wa.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,wr.removeUserSelectStyles)(n)}}findDOMNode(){var t,n;return(t=this.props)!==null&&t!==void 0&&t.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:uJ.default.findDOMNode(this)}render(){return sw.cloneElement(sw.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Qg.default=Jg;$r(Jg,"displayName","DraggableCore");$r(Jg,"propTypes",{allowAnyClick:Qr.default.bool,children:Qr.default.node.isRequired,disabled:Qr.default.bool,enableUserSelectHack:Qr.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Qr.default.arrayOf(Qr.default.number),handle:Qr.default.string,cancel:Qr.default.string,nodeRef:Qr.default.object,onStart:Qr.default.func,onDrag:Qr.default.func,onStop:Qr.default.func,onMouseDown:Qr.default.func,scale:Qr.default.number,className:uw.dontSetMe,style:uw.dontSetMe,transform:uw.dontSetMe});$r(Jg,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),e.default=void 0;var t=y(J),n=h(_M),r=h(Qa),i=h($G),a=fn,s=uo,u=so,c=h(Qg),d=h(Gg);function h(E){return E&&E.__esModule?E:{default:E}}function v(E){if(typeof WeakMap!="function")return null;var P=new WeakMap,N=new WeakMap;return(v=function(T){return T?N:P})(E)}function y(E,P){if(!P&&E&&E.__esModule)return E;if(E===null||typeof E!="object"&&typeof E!="function")return{default:E};var N=v(P);if(N&&N.has(E))return N.get(E);var T={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in E)if(W!=="default"&&Object.prototype.hasOwnProperty.call(E,W)){var re=U?Object.getOwnPropertyDescriptor(E,W):null;re&&(re.get||re.set)?Object.defineProperty(T,W,re):T[W]=E[W]}return T.default=E,N&&N.set(E,T),T}function g(){return g=Object.assign?Object.assign.bind():function(E){for(var P=1;P<arguments.length;P++){var N=arguments[P];for(var T in N)Object.prototype.hasOwnProperty.call(N,T)&&(E[T]=N[T])}return E},g.apply(this,arguments)}function w(E,P,N){return P=x(P),P in E?Object.defineProperty(E,P,{value:N,enumerable:!0,configurable:!0,writable:!0}):E[P]=N,E}function x(E){var P=C(E,"string");return typeof P=="symbol"?P:String(P)}function C(E,P){if(typeof E!="object"||E===null)return E;var N=E[Symbol.toPrimitive];if(N!==void 0){var T=N.call(E,P||"default");if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(E)}class S extends t.Component{static getDerivedStateFromProps(P,N){let{position:T}=P,{prevPropsPosition:U}=N;return T&&(!U||T.x!==U.x||T.y!==U.y)?((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:T,prevPropsPosition:U}),{x:T.x,y:T.y,prevPropsPosition:{...T}}):null}constructor(P){super(P),w(this,"onDragStart",(N,T)=>{if((0,d.default)("Draggable: onDragStart: %j",T),this.props.onStart(N,(0,s.createDraggableData)(this,T))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),w(this,"onDrag",(N,T)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",T);const U=(0,s.createDraggableData)(this,T),W={x:U.x,y:U.y,slackX:0,slackY:0};if(this.props.bounds){const{x:pe,y:he}=W;W.x+=this.state.slackX,W.y+=this.state.slackY;const[ce,fe]=(0,s.getBoundPosition)(this,W.x,W.y);W.x=ce,W.y=fe,W.slackX=this.state.slackX+(pe-W.x),W.slackY=this.state.slackY+(he-W.y),U.x=W.x,U.y=W.y,U.deltaX=W.x-this.state.x,U.deltaY=W.y-this.state.y}if(this.props.onDrag(N,U)===!1)return!1;this.setState(W)}),w(this,"onDragStop",(N,T)=>{if(!this.state.dragging||this.props.onStop(N,(0,s.createDraggableData)(this,T))===!1)return!1;(0,d.default)("Draggable: onDragStop: %j",T);const W={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:pe,y:he}=this.props.position;W.x=pe,W.y=he}this.setState(W)}),this.state={dragging:!1,dragged:!1,x:P.position?P.position.x:P.defaultPosition.x,y:P.position?P.position.y:P.defaultPosition.y,prevPropsPosition:{...P.position},slackX:0,slackY:0,isElementSVG:!1},P.position&&!(P.onDrag||P.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var P,N;return(P=(N=this.props)===null||N===void 0||(N=N.nodeRef)===null||N===void 0?void 0:N.current)!==null&&P!==void 0?P:r.default.findDOMNode(this)}render(){const{axis:P,bounds:N,children:T,defaultPosition:U,defaultClassName:W,defaultClassNameDragging:re,defaultClassNameDragged:pe,position:he,positionOffset:ce,scale:fe,...xe}=this.props;let Ce={},Le=null;const We=!!!he||this.state.dragging,oe=he||U,_e={x:(0,s.canDragX)(this)&&We?this.state.x:oe.x,y:(0,s.canDragY)(this)&&We?this.state.y:oe.y};this.state.isElementSVG?Le=(0,a.createSVGTransform)(_e,ce):Ce=(0,a.createCSSTransform)(_e,ce);const G=(0,i.default)(T.props.className||"",W,{[re]:this.state.dragging,[pe]:this.state.dragged});return t.createElement(c.default,g({},xe,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(T),{className:G,style:{...T.props.style,...Ce},transform:Le}))}}e.default=S,w(S,"displayName","Draggable"),w(S,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe}),w(S,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(vM);const{default:OM,DraggableCore:dJ}=vM;Xg.exports=OM;Xg.exports.default=OM;Xg.exports.DraggableCore=dJ;var hJ=Xg.exports;const pJ=Nh(hJ);var kn=globalThis&&globalThis.__assign||function(){return kn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},kn.apply(this,arguments)},CC={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},DC={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},Rm={width:"20px",height:"20px",position:"absolute",zIndex:1},mJ={top:kn(kn({},CC),{top:"-5px"}),right:kn(kn({},DC),{left:void 0,right:"-5px"}),bottom:kn(kn({},CC),{top:void 0,bottom:"-5px"}),left:kn(kn({},DC),{left:"-5px"}),topRight:kn(kn({},Rm),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:kn(kn({},Rm),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:kn(kn({},Rm),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:kn(kn({},Rm),{left:"-10px",top:"-10px",cursor:"nw-resize"})},vJ=J.memo(function(e){var t=e.onResizeStart,n=e.direction,r=e.children,i=e.replaceStyles,a=e.className,s=J.useCallback(function(d){t(d,n)},[t,n]),u=J.useCallback(function(d){t(d,n)},[t,n]),c=J.useMemo(function(){return kn(kn({position:"absolute",userSelect:"none"},mJ[n]),i??{})},[i,n]);return $.jsx("div",{className:a||void 0,style:c,onMouseDown:s,onTouchStart:u,children:r})}),gJ=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ka=globalThis&&globalThis.__assign||function(){return Ka=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ka.apply(this,arguments)},yJ={width:"auto",height:"auto"},Nm=function(e,t,n){return Math.max(Math.min(e,n),t)},OC=function(e,t,n){var r=Math.round(e/t);return r*t+n*(r-1)},ic=function(e,t){return new RegExp(e,"i").test(t)},Tm=function(e){return!!(e.touches&&e.touches.length)},wJ=function(e){return!!((e.clientX||e.clientX===0)&&(e.clientY||e.clientY===0))},$C=function(e,t,n){n===void 0&&(n=0);var r=t.reduce(function(a,s,u){return Math.abs(s-e)<Math.abs(t[a]-e)?u:a},0),i=Math.abs(t[r]-e);return n===0||i<n?t[r]:e},lw=function(e){return e=e.toString(),e==="auto"||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:"".concat(e,"px")},Mm=function(e,t,n,r){if(e&&typeof e=="string"){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%")){var i=Number(e.replace("%",""))/100;return t*i}if(e.endsWith("vw")){var i=Number(e.replace("vw",""))/100;return n*i}if(e.endsWith("vh")){var i=Number(e.replace("vh",""))/100;return r*i}}return e},_J=function(e,t,n,r,i,a,s){return r=Mm(r,e.width,t,n),i=Mm(i,e.height,t,n),a=Mm(a,e.width,t,n),s=Mm(s,e.height,t,n),{maxWidth:typeof r>"u"?void 0:Number(r),maxHeight:typeof i>"u"?void 0:Number(i),minWidth:typeof a>"u"?void 0:Number(a),minHeight:typeof s>"u"?void 0:Number(s)}},bJ=function(e){return Array.isArray(e)?e:[e,e]},SJ=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],RC="__resizable_base__",xJ=function(e){gJ(t,e);function t(n){var r,i,a,s,u=e.call(this,n)||this;return u.ratio=1,u.resizable=null,u.parentLeft=0,u.parentTop=0,u.resizableLeft=0,u.resizableRight=0,u.resizableTop=0,u.resizableBottom=0,u.targetLeft=0,u.targetTop=0,u.delta={width:0,height:0},u.appendBase=function(){if(!u.resizable||!u.window)return null;var c=u.parentNode;if(!c)return null;var d=u.window.document.createElement("div");return d.style.width="100%",d.style.height="100%",d.style.position="absolute",d.style.transform="scale(0, 0)",d.style.left="0",d.style.flex="0 0 100%",d.classList?d.classList.add(RC):d.className+=RC,c.appendChild(d),d},u.removeBase=function(c){var d=u.parentNode;d&&d.removeChild(c)},u.state={isResizing:!1,width:(i=(r=u.propsSize)===null||r===void 0?void 0:r.width)!==null&&i!==void 0?i:"auto",height:(s=(a=u.propsSize)===null||a===void 0?void 0:a.height)!==null&&s!==void 0?s:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},u.onResizeStart=u.onResizeStart.bind(u),u.onMouseMove=u.onMouseMove.bind(u),u.onMouseUp=u.onMouseUp.bind(u),u}return Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||yJ},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var n=0,r=0;if(this.resizable&&this.window){var i=this.resizable.offsetWidth,a=this.resizable.offsetHeight,s=this.resizable.style.position;s!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:i,r=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:a,this.resizable.style.position=s}return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var n=this,r=this.props.size,i=function(u){var c;if(typeof n.state[u]>"u"||n.state[u]==="auto")return"auto";if(n.propsSize&&n.propsSize[u]&&(!((c=n.propsSize[u])===null||c===void 0)&&c.toString().endsWith("%"))){if(n.state[u].toString().endsWith("%"))return n.state[u].toString();var d=n.getParentSize(),h=Number(n.state[u].toString().replace("px","")),v=h/d[u]*100;return"".concat(v,"%")}return lw(n.state[u])},a=r&&typeof r.width<"u"&&!this.state.isResizing?lw(r.width):i("width"),s=r&&typeof r.height<"u"&&!this.state.isResizing?lw(r.height):i("height");return{width:a,height:s}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var r=!1,i=this.parentNode.style.flexWrap;i!=="wrap"&&(r=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var a={width:n.offsetWidth,height:n.offsetHeight};return r&&(this.parentNode.style.flexWrap=i),this.removeBase(n),a},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(n,r){var i=this.propsSize&&this.propsSize[r];return this.state[r]==="auto"&&this.state.original[r]===n&&(typeof i>"u"||i==="auto")?"auto":n},t.prototype.calculateNewMaxFromBoundary=function(n,r){var i=this.props.boundsByDirection,a=this.state.direction,s=i&&ic("left",a),u=i&&ic("top",a),c,d;if(this.props.bounds==="parent"){var h=this.parentNode;h&&(c=s?this.resizableRight-this.parentLeft:h.offsetWidth+(this.parentLeft-this.resizableLeft),d=u?this.resizableBottom-this.parentTop:h.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(c=s?this.resizableRight:this.window.innerWidth-this.resizableLeft,d=u?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(c=s?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),d=u?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return c&&Number.isFinite(c)&&(n=n&&n<c?n:c),d&&Number.isFinite(d)&&(r=r&&r<d?r:d),{maxWidth:n,maxHeight:r}},t.prototype.calculateNewSizeFromDirection=function(n,r){var i=this.props.scale||1,a=bJ(this.props.resizeRatio||1),s=a[0],u=a[1],c=this.state,d=c.direction,h=c.original,v=this.props,y=v.lockAspectRatio,g=v.lockAspectRatioExtraHeight,w=v.lockAspectRatioExtraWidth,x=h.width,C=h.height,S=g||0,E=w||0;return ic("right",d)&&(x=h.width+(n-h.x)*s/i,y&&(C=(x-E)/this.ratio+S)),ic("left",d)&&(x=h.width-(n-h.x)*s/i,y&&(C=(x-E)/this.ratio+S)),ic("bottom",d)&&(C=h.height+(r-h.y)*u/i,y&&(x=(C-S)*this.ratio+E)),ic("top",d)&&(C=h.height-(r-h.y)*u/i,y&&(x=(C-S)*this.ratio+E)),{newWidth:x,newHeight:C}},t.prototype.calculateNewSizeFromAspectRatio=function(n,r,i,a){var s=this.props,u=s.lockAspectRatio,c=s.lockAspectRatioExtraHeight,d=s.lockAspectRatioExtraWidth,h=typeof a.width>"u"?10:a.width,v=typeof i.width>"u"||i.width<0?n:i.width,y=typeof a.height>"u"?10:a.height,g=typeof i.height>"u"||i.height<0?r:i.height,w=c||0,x=d||0;if(u){var C=(y-w)*this.ratio+x,S=(g-w)*this.ratio+x,E=(h-x)/this.ratio+w,P=(v-x)/this.ratio+w,N=Math.max(h,C),T=Math.min(v,S),U=Math.max(y,E),W=Math.min(g,P);n=Nm(n,N,T),r=Nm(r,U,W)}else n=Nm(n,h,v),r=Nm(r,y,g);return{newWidth:n,newHeight:r}},t.prototype.setBoundingClientRect=function(){var n=1/(this.props.scale||1);if(this.props.bounds==="parent"){var r=this.parentNode;if(r){var i=r.getBoundingClientRect();this.parentLeft=i.left*n,this.parentTop=i.top*n}}if(this.props.bounds&&typeof this.props.bounds!="string"){var a=this.props.bounds.getBoundingClientRect();this.targetLeft=a.left*n,this.targetTop=a.top*n}if(this.resizable){var s=this.resizable.getBoundingClientRect(),u=s.left,c=s.top,d=s.right,h=s.bottom;this.resizableLeft=u*n,this.resizableRight=d*n,this.resizableTop=c*n,this.resizableBottom=h*n}},t.prototype.onResizeStart=function(n,r){if(!(!this.resizable||!this.window)){var i=0,a=0;if(n.nativeEvent&&wJ(n.nativeEvent)?(i=n.nativeEvent.clientX,a=n.nativeEvent.clientY):n.nativeEvent&&Tm(n.nativeEvent)&&(i=n.nativeEvent.touches[0].clientX,a=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var s=this.props.onResizeStart(n,r,this.resizable);if(s===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var u,c=this.window.getComputedStyle(this.resizable);if(c.flexBasis!=="auto"){var d=this.parentNode;if(d){var h=this.window.getComputedStyle(d).flexDirection;this.flexDir=h.startsWith("row")?"row":"column",u=c.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var v={original:{x:i,y:a,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Ka(Ka({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:r,flexBasis:u};this.setState(v)}},t.prototype.onMouseMove=function(n){var r=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&Tm(n))try{n.preventDefault(),n.stopPropagation()}catch{}var i=this.props,a=i.maxWidth,s=i.maxHeight,u=i.minWidth,c=i.minHeight,d=Tm(n)?n.touches[0].clientX:n.clientX,h=Tm(n)?n.touches[0].clientY:n.clientY,v=this.state,y=v.direction,g=v.original,w=v.width,x=v.height,C=this.getParentSize(),S=_J(C,this.window.innerWidth,this.window.innerHeight,a,s,u,c);a=S.maxWidth,s=S.maxHeight,u=S.minWidth,c=S.minHeight;var E=this.calculateNewSizeFromDirection(d,h),P=E.newHeight,N=E.newWidth,T=this.calculateNewMaxFromBoundary(a,s);this.props.snap&&this.props.snap.x&&(N=$C(N,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(P=$C(P,this.props.snap.y,this.props.snapGap));var U=this.calculateNewSizeFromAspectRatio(N,P,{width:T.maxWidth,height:T.maxHeight},{width:u,height:c});if(N=U.newWidth,P=U.newHeight,this.props.grid){var W=OC(N,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),re=OC(P,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),pe=this.props.snapGap||0,he=pe===0||Math.abs(W-N)<=pe?W:N,ce=pe===0||Math.abs(re-P)<=pe?re:P;N=he,P=ce}var fe={width:N-g.width,height:P-g.height};if(this.delta=fe,w&&typeof w=="string"){if(w.endsWith("%")){var xe=N/C.width*100;N="".concat(xe,"%")}else if(w.endsWith("vw")){var Ce=N/this.window.innerWidth*100;N="".concat(Ce,"vw")}else if(w.endsWith("vh")){var Le=N/this.window.innerHeight*100;N="".concat(Le,"vh")}}if(x&&typeof x=="string"){if(x.endsWith("%")){var xe=P/C.height*100;P="".concat(xe,"%")}else if(x.endsWith("vw")){var Ce=P/this.window.innerWidth*100;P="".concat(Ce,"vw")}else if(x.endsWith("vh")){var Le=P/this.window.innerHeight*100;P="".concat(Le,"vh")}}var qe={width:this.createSizeForCssProperty(N,"width"),height:this.createSizeForCssProperty(P,"height")};this.flexDir==="row"?qe.flexBasis=qe.width:this.flexDir==="column"&&(qe.flexBasis=qe.height);var We=this.state.width!==qe.width,oe=this.state.height!==qe.height,_e=this.state.flexBasis!==qe.flexBasis,G=We||oe||_e;G&&Qa.flushSync(function(){r.setState(qe)}),this.props.onResize&&G&&this.props.onResize(n,y,this.resizable,fe)}},t.prototype.onMouseUp=function(n){var r,i,a=this.state,s=a.isResizing,u=a.direction;a.original,!(!s||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(n,u,this.resizable,this.delta),this.props.size&&this.setState({width:(r=this.props.size.width)!==null&&r!==void 0?r:"auto",height:(i=this.props.size.height)!==null&&i!==void 0?i:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Ka(Ka({},this.state.backgroundStyle),{cursor:"auto"})}))},t.prototype.updateSize=function(n){var r,i;this.setState({width:(r=n.width)!==null&&r!==void 0?r:"auto",height:(i=n.height)!==null&&i!==void 0?i:"auto"})},t.prototype.renderResizer=function(){var n=this,r=this.props,i=r.enable,a=r.handleStyles,s=r.handleClasses,u=r.handleWrapperStyle,c=r.handleWrapperClass,d=r.handleComponent;if(!i)return null;var h=Object.keys(i).map(function(v){return i[v]!==!1?$.jsx(vJ,{direction:v,onResizeStart:n.onResizeStart,replaceStyles:a&&a[v],className:s&&s[v],children:d&&d[v]?d[v]:null},v):null});return $.jsx("div",{className:c,style:u,children:h})},t.prototype.render=function(){var n=this,r=Object.keys(this.props).reduce(function(s,u){return SJ.indexOf(u)!==-1||(s[u]=n.props[u]),s},{}),i=Ka(Ka(Ka({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(i.flexBasis=this.state.flexBasis);var a=this.props.as||"div";return $.jsxs(a,Ka({style:i,className:this.props.className},r,{ref:function(s){s&&(n.resizable=s)},children:[this.state.isResizing&&$.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(J.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Q_=function(e,t){return Q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Q_(e,t)};function EJ(e,t){Q_(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Tn=function(){return Tn=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Tn.apply(this,arguments)};function PJ(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var kJ={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},CJ=function(e){return{bottom:e,bottomLeft:e,bottomRight:e,left:e,right:e,top:e,topLeft:e,topRight:e}},DJ=function(e){EJ(t,e);function t(n){var r=e.call(this,n)||this;return r.resizingPosition={x:0,y:0},r.offsetFromParent={left:0,top:0},r.resizableElement={current:null},r.originalPosition={x:0,y:0},r.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:n.maxWidth,maxHeight:n.maxHeight},r.onResizeStart=r.onResizeStart.bind(r),r.onResize=r.onResize.bind(r),r.onResizeStop=r.onResizeStop.bind(r),r.onDragStart=r.onDragStart.bind(r),r.onDrag=r.onDrag.bind(r),r.onDragStop=r.onDragStop.bind(r),r.getMaxSizesFromProps=r.getMaxSizesFromProps.bind(r),r}return t.prototype.componentDidMount=function(){this.updateOffsetFromParent();var n=this.offsetFromParent,r=n.left,i=n.top,a=this.getDraggablePosition(),s=a.x,u=a.y;this.draggable.setState({x:s-r,y:u-i}),this.forceUpdate()},t.prototype.getDraggablePosition=function(){var n=this.draggable.state,r=n.x,i=n.y;return{x:r,y:i}},t.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},t.prototype.getParentSize=function(){return this.resizable.getParentSize()},t.prototype.getMaxSizesFromProps=function(){var n=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,r=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:n,maxHeight:r}},t.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},t.prototype.getOffsetHeight=function(n){var r=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/r;case"body":return document.body.offsetHeight/r;default:return n.offsetHeight}},t.prototype.getOffsetWidth=function(n){var r=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/r;case"body":return document.body.offsetWidth/r;default:return n.offsetWidth}},t.prototype.onDragStart=function(n,r){this.props.onDragStart&&this.props.onDragStart(n,r);var i=this.getDraggablePosition();if(this.originalPosition=i,!!this.props.bounds){var a=this.getParent(),s=this.props.scale,u;if(this.props.bounds==="parent")u=a;else if(this.props.bounds==="body"){var c=a.getBoundingClientRect(),d=c.left,h=c.top,v=document.body.getBoundingClientRect(),y=-(d-a.offsetLeft*s-v.left)/s,g=-(h-a.offsetTop*s-v.top)/s,w=(document.body.offsetWidth-this.resizable.size.width*s)/s+y,x=(document.body.offsetHeight-this.resizable.size.height*s)/s+g;return this.setState({bounds:{top:g,right:w,bottom:x,left:y}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var C=a.getBoundingClientRect(),S=C.left,E=C.top,P=-(S-a.offsetLeft*s)/s,N=-(E-a.offsetTop*s)/s,w=(window.innerWidth-this.resizable.size.width*s)/s+P,x=(window.innerHeight-this.resizable.size.height*s)/s+N;return this.setState({bounds:{top:N,right:w,bottom:x,left:P}})}else typeof this.props.bounds=="string"?u=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(u=this.props.bounds);if(!(!(u instanceof HTMLElement)||!(a instanceof HTMLElement))){var T=u.getBoundingClientRect(),U=T.left,W=T.top,re=a.getBoundingClientRect(),pe=re.left,he=re.top,ce=(U-pe)/s,fe=W-he;if(this.resizable){this.updateOffsetFromParent();var xe=this.offsetFromParent;this.setState({bounds:{top:fe-xe.top,right:ce+(u.offsetWidth-this.resizable.size.width)-xe.left/s,bottom:fe+(u.offsetHeight-this.resizable.size.height)-xe.top,left:ce-xe.left/s}})}}}},t.prototype.onDrag=function(n,r){if(this.props.onDrag){var i=this.offsetFromParent,a=i.left,s=i.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(n,Tn(Tn({},r),{x:r.x+a,y:r.y+s}));if(this.props.dragAxis==="x")return this.props.onDrag(n,Tn(Tn({},r),{x:r.x+a,y:this.originalPosition.y+s,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(n,Tn(Tn({},r),{x:this.originalPosition.x+a,y:r.y+s,deltaX:0}))}},t.prototype.onDragStop=function(n,r){if(this.props.onDragStop){var i=this.offsetFromParent,a=i.left,s=i.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(n,Tn(Tn({},r),{x:r.x+a,y:r.y+s}));if(this.props.dragAxis==="x")return this.props.onDragStop(n,Tn(Tn({},r),{x:r.x+a,y:this.originalPosition.y+s,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(n,Tn(Tn({},r),{x:this.originalPosition.x+a,y:r.y+s,deltaX:0}))}},t.prototype.onResizeStart=function(n,r,i){n.stopPropagation(),this.setState({resizing:!0});var a=this.props.scale,s=this.offsetFromParent,u=this.getDraggablePosition();if(this.resizingPosition={x:u.x+s.left,y:u.y+s.top},this.originalPosition=u,this.props.bounds){var c=this.getParent(),d=void 0;this.props.bounds==="parent"?d=c:this.props.bounds==="body"?d=document.body:this.props.bounds==="window"?d=window:typeof this.props.bounds=="string"?d=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(d=this.props.bounds);var h=this.getSelfElement();if(h instanceof Element&&(d instanceof HTMLElement||d===window)&&c instanceof HTMLElement){var v=this.getMaxSizesFromProps(),y=v.maxWidth,g=v.maxHeight,w=this.getParentSize();if(y&&typeof y=="string")if(y.endsWith("%")){var x=Number(y.replace("%",""))/100;y=w.width*x}else y.endsWith("px")&&(y=Number(y.replace("px","")));if(g&&typeof g=="string")if(g.endsWith("%")){var x=Number(g.replace("%",""))/100;g=w.height*x}else g.endsWith("px")&&(g=Number(g.replace("px","")));var C=h.getBoundingClientRect(),S=C.left,E=C.top,P=this.props.bounds==="window"?{left:0,top:0}:d.getBoundingClientRect(),N=P.left,T=P.top,U=this.getOffsetWidth(d),W=this.getOffsetHeight(d),re=r.toLowerCase().endsWith("left"),pe=r.toLowerCase().endsWith("right"),he=r.startsWith("top"),ce=r.startsWith("bottom");if((re||he)&&this.resizable){var fe=(S-N)/a+this.resizable.size.width;this.setState({maxWidth:fe>Number(y)?y:fe})}if(pe||this.props.lockAspectRatio&&!re&&!he){var fe=U+(N-S)/a;this.setState({maxWidth:fe>Number(y)?y:fe})}if((he||re)&&this.resizable){var fe=(E-T)/a+this.resizable.size.height;this.setState({maxHeight:fe>Number(g)?g:fe})}if(ce||this.props.lockAspectRatio&&!he&&!re){var fe=W+(T-E)/a;this.setState({maxHeight:fe>Number(g)?g:fe})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(n,r,i)},t.prototype.onResize=function(n,r,i,a){var s=this,u={x:this.originalPosition.x,y:this.originalPosition.y},c=-a.width,d=-a.height,h=["top","left","topLeft","bottomLeft","topRight"];h.includes(r)&&(r==="bottomLeft"?u.x+=c:(r==="topRight"||(u.x+=c),u.y+=d));var v=this.draggable.state;(u.x!==v.x||u.y!==v.y)&&Qa.flushSync(function(){s.draggable.setState(u)}),this.updateOffsetFromParent();var y=this.offsetFromParent,g=this.getDraggablePosition().x+y.left,w=this.getDraggablePosition().y+y.top;this.resizingPosition={x:g,y:w},this.props.onResize&&this.props.onResize(n,r,i,a,{x:g,y:w})},t.prototype.onResizeStop=function(n,r,i,a){this.setState({resizing:!1});var s=this.getMaxSizesFromProps(),u=s.maxWidth,c=s.maxHeight;this.setState({maxWidth:u,maxHeight:c}),this.props.onResizeStop&&this.props.onResizeStop(n,r,i,a,this.resizingPosition)},t.prototype.updateSize=function(n){this.resizable&&this.resizable.updateSize({width:n.width,height:n.height})},t.prototype.updatePosition=function(n){this.draggable.setState(n)},t.prototype.updateOffsetFromParent=function(){var n=this.props.scale,r=this.getParent(),i=this.getSelfElement();if(!r||i===null)return{top:0,left:0};var a=r.getBoundingClientRect(),s=a.left,u=a.top,c=i.getBoundingClientRect(),d=this.getDraggablePosition(),h=r.scrollLeft,v=r.scrollTop;this.offsetFromParent={left:c.left-s+h-d.x*n,top:c.top-u+v-d.y*n}},t.prototype.render=function(){var n=this,r=this.props,i=r.disableDragging,a=r.style,s=r.dragHandleClassName,u=r.position,c=r.onMouseDown,d=r.onMouseUp,h=r.dragAxis,v=r.dragGrid,y=r.bounds,g=r.enableUserSelectHack,w=r.cancel,x=r.children;r.onResizeStart,r.onResize,r.onResizeStop,r.onDragStart,r.onDrag,r.onDragStop;var C=r.resizeHandleStyles,S=r.resizeHandleClasses,E=r.resizeHandleComponent,P=r.enableResizing,N=r.resizeGrid,T=r.resizeHandleWrapperClass,U=r.resizeHandleWrapperStyle,W=r.scale,re=r.allowAnyClick,pe=r.dragPositionOffset,he=PJ(r,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),ce=this.props.default?Tn({},this.props.default):void 0;delete he.default;var fe=i||s?{cursor:"auto"}:{cursor:"move"},xe=Tn(Tn(Tn({},kJ),fe),a),Ce=this.offsetFromParent,Le=Ce.left,qe=Ce.top,We;u&&(We={x:u.x-Le,y:u.y-qe});var oe=this.state.resizing?void 0:We,_e=this.state.resizing?"both":h;return J.createElement(pJ,{ref:function(G){G&&(n.draggable=G)},handle:s?".".concat(s):void 0,defaultPosition:ce,onMouseDown:c,onMouseUp:d,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:_e,disabled:i,grid:v,bounds:y?this.state.bounds:void 0,position:oe,enableUserSelectHack:g,cancel:w,scale:W,allowAnyClick:re,nodeRef:this.resizableElement,positionOffset:pe},J.createElement(xJ,Tn({},he,{ref:function(G){G&&(n.resizable=G,n.resizableElement.current=G.resizable)},defaultSize:ce,size:this.props.size,enable:typeof P=="boolean"?CJ(P):P,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:xe,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:N,handleWrapperClass:T,handleWrapperStyle:U,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:C,handleClasses:S,handleComponent:E,scale:this.props.scale}),x))},t.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},t}(J.PureComponent);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),qn=(e,t)=>{const n=J.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:u="",children:c,...d},h)=>J.createElement("svg",{ref:h,...OJ,width:i,height:i,stroke:r,strokeWidth:s?Number(a)*24/Number(i):a,className:["lucide",`lucide-${$J(e)}`,u].join(" "),...d},[...t.map(([v,y])=>J.createElement(v,y)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=qn("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=qn("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=qn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=qn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=qn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=qn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=qn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=qn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=qn("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=qn("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=qn("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=qn("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=qn("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=qn("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=qn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=qn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=qn("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=qn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function MM(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=MM(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function xt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=MM(e))&&(r&&(r+=" "),r+=t);return r}let Im;const HJ=new Uint8Array(16);function KJ(){if(!Im&&(Im=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Im))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Im(HJ)}const tr=[];for(let e=0;e<256;++e)tr.push((e+256).toString(16).slice(1));function qJ(e,t=0){return tr[e[t+0]]+tr[e[t+1]]+tr[e[t+2]]+tr[e[t+3]]+"-"+tr[e[t+4]]+tr[e[t+5]]+"-"+tr[e[t+6]]+tr[e[t+7]]+"-"+tr[e[t+8]]+tr[e[t+9]]+"-"+tr[e[t+10]]+tr[e[t+11]]+tr[e[t+12]]+tr[e[t+13]]+tr[e[t+14]]+tr[e[t+15]]}const YJ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),TC={randomUUID:YJ};function Xa(e,t,n){if(TC.randomUUID&&!t&&!e)return TC.randomUUID();e=e||{};const r=e.random||(e.rng||KJ)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return qJ(r)}function Qo(e,t){const[n,r]=J.useState([]);return J.useEffect(()=>{try{const a=Tr.getDatabase()[e];if(!a)return;const u=a.find(t).$.subscribe({next:c=>r(c)});return()=>u.unsubscribe()}catch(i){return console.error("useRxQuery error:",i),()=>{}}},[e,JSON.stringify(t)]),n}const ll=async(e,t)=>{try{const n=Tr.getDatabase(),r=await n.widgets.findOne(e).exec();if(!r)return;const i=r.group_id;if(!i)return;const a=await n.widgets.find({selector:{canvas_id:r.canvas_id,is_deleted:!1,id:{$ne:e},group_id:i}}).exec();if(a.length===0)return;await Promise.all(a.map(async s=>{var d,h,v,y,g;if((d=s.view_state)!=null&&d.is_pinned)return;let u={...s.data_source_config},c=!1;if(t.type==="date"&&s.widget_type==="smart_list"){const{"properties.project_id":w,...x}=u.criteria||{};if(t.granularity==="month"){const C=new Date(t.val),S=t.val.substring(0,7);u.criteria={...x,do_date:S,entity_type:x.entity_type||"task"},u.title=C.toLocaleString("default",{month:"long",year:"numeric"})}else{u.criteria={...x,do_date:t.val,entity_type:x.entity_type||"task"};const C=new Date(t.val);u.title=C.toLocaleString("default",{month:"long",day:"numeric"})}c=!0}else if(t.type==="date"&&s.widget_type==="project_header")u.selected_date=t.val,u.date_granularity=t.granularity,u.project_id=void 0,c=!0;else if(t.type==="date"&&s.widget_type==="timeline")u.selected_date=t.val,c=!0;else if(t.type==="item"&&s.widget_type==="detail")u.item_id=t.id,c=!0;else if(t.type==="item"&&s.widget_type==="project_header"){const w=await n.items.findOne(t.id).exec();w&&w.entity_type==="project"&&(u.project_id=t.id,u.selected_date=void 0,u.date_granularity=void 0,c=!0)}else if(t.type==="item"&&s.widget_type==="smart_list"){const w=await n.items.findOne(t.id).exec();if(w&&w.entity_type==="project"){const x=((h=s.data_source_config)==null?void 0:h.criteria)||{};if(!x.entity_type||x.entity_type==="task"){if(x["properties.project_id"]===w.id){const{"properties.project_id":C,...S}=x;u.criteria=S,u.title=((v=s.data_source_config)==null?void 0:v.title)||"Tasks"}else{const{do_date:C,...S}=x;u.title=w.title,u.criteria={...S,entity_type:"task","properties.project_id":w.id}}c=!0}}}else if(t.type==="clear_project"&&s.widget_type==="smart_list"){const w=((y=s.data_source_config)==null?void 0:y.criteria)||{};if(w["properties.project_id"]){const{"properties.project_id":x,...C}=w;u.criteria=C,u.title=((g=s.data_source_config)==null?void 0:g.title)||"Tasks",c=!0}}c&&await s.patch({data_source_config:u})}))}catch(n){console.error("Signal propagation failed:",n)}},VJ=({dateStr:e,isCurrentMonth:t,isToday:n,isSelected:r,onClick:i,children:a})=>{const{isOver:s,setNodeRef:u}=ap({id:`cell_${e}`,data:{type:"calendar_cell",date:e}});return $.jsx("div",{ref:u,onClick:i,className:xt("p-1 flex flex-col gap-0.5 overflow-hidden transition-colors cursor-pointer",t?"bg-white":"bg-gray-100 text-gray-400",n&&!r&&"bg-blue-50",r&&"bg-blue-100 ring-2 ring-inset ring-blue-500",s&&"bg-green-100 ring-2 ring-inset ring-green-500 z-10"),children:a})},XJ=({day:e,startHour:t,totalMinutes:n,children:r,isToday:i,onClick:a})=>{const s=it(e,"yyyy-MM-dd"),{setNodeRef:u}=ap({id:`timeline_${s}`,data:{type:"timeline_day",date:s,day:e,startHour:t,totalMinutes:n}});return $.jsx("div",{ref:u,onClick:a,className:xt("border-r last:border-r-0 relative h-full",i&&"bg-blue-50/30"),children:r})},QJ=({widget:e})=>{const[t,n]=J.useState(new Date),[r,i]=J.useState(null),[a,s]=J.useState("month"),[u,c]=J.useState(0),d=J.useRef(null),[h,v]=J.useState(null),[y,g]=J.useState(null);FT({onDragMove(F){var ve;const{active:te,over:X}=F;if(((ve=te.data.current)==null?void 0:ve.entity_type)==="event"){g(null);return}if(!X||!X.data.current||X.data.current.type!=="timeline_day"){g(null);return}const{day:A,startHour:H,totalMinutes:ae}=X.data.current;let ge=te.rect.current.translated;!ge&&te.rect.current.initial&&F.delta&&(ge={top:te.rect.current.initial.top+F.delta.y,left:te.rect.current.initial.left+F.delta.x,height:te.rect.current.initial.height,width:te.rect.current.initial.width,bottom:te.rect.current.initial.bottom+F.delta.y,right:te.rect.current.initial.right+F.delta.x});const Oe=X.rect;if(ge&&Oe){const Ne=ge.top-Oe.top,He=Math.max(0,Math.min(1,Ne/Oe.height))*ae,an=Math.round(He/15)*15,Et=Ac(Ki(As(new Date(A),0),H),an);let At=45;const dn=te.data.current;if(dn&&dn.start_time&&dn.end_time){const sr=Is(new Date(dn.end_time),new Date(dn.start_time));sr>0&&(At=sr)}const on=Ac(Et,At);g({day:new Date(A),start:Et,end:on})}},onDragEnd(){g(null)}});const w=V_(t),x=Y_(t),C=tu(w),S=X_(x),E=_C({start:C,end:S}),P=tu(t),N=X_(t),T=_C({start:P,end:N}),U=J.useMemo(()=>{const F=a==="month"?C:P,te=a==="month"?S:N;return{selector:{entity_type:{$in:["task","event"]},is_deleted:!1,system_status:{$ne:"archived"},do_date:{$gte:it(F,"yyyy-MM-dd"),$lte:it(te,"yyyy-MM-dd")}}}},[a,C,S,P,N]),W=Qo("items",U),re=F=>{const te=it(F,"yyyy-MM-dd");return W.filter(X=>X.do_date===te)},pe=(F,te)=>{te.stopPropagation(),i(F),ll(e.id,{type:"date",val:it(F,"yyyy-MM-dd"),granularity:"day"})},he=F=>{n(F),ll(e.id,{type:"date",val:it(F,"yyyy-MM-dd"),granularity:"month"})},ce=F=>{n(F)},fe=()=>{i(null)},xe=(F,te)=>{te.stopPropagation(),ll(e.id,{type:"item",id:F.id})},Ce=J.useCallback(F=>Math.round(F/15)*15,[]),Le=J.useCallback((F,te,X,A)=>{if(!d.current)return null;const H=d.current.getBoundingClientRect(),ae=F-H.top,Oe=Math.max(0,Math.min(1,ae/H.height))*A,ve=Ce(Oe);return Ac(Ki(As(te,0),X),ve)},[Ce]),qe=J.useCallback((F,te,X)=>{X.stopPropagation(),X.preventDefault(),!(!F.start_time||!F.end_time)&&v({itemId:F.id,edge:te,initialY:X.clientY,originalStart:new Date(F.start_time),originalEnd:new Date(F.end_time)})},[]),We=J.useCallback(F=>{if(!h)return;const te=W.find(Ge=>Ge.id===h.itemId);if(!te||!te.do_date)return;const X=new Date(te.do_date),A=8,H=21,ae=(H-A)*60,ge=Le(F.clientY,X,A,ae);if(!ge)return;const Oe=Ki(As(X,0),A),ve=Ki(As(X,0),H),Ne=ge<Oe?Oe:ge>ve?ve:ge;if(h.edge==="top"){const Ge=new Date(te.end_time);Is(Ge,Ne)>=15&&te.patch({start_time:Ne.toISOString()})}else{const Ge=new Date(te.start_time);Is(Ne,Ge)>=15&&te.patch({end_time:Ne.toISOString()})}},[h,W,Le]),oe=J.useCallback(()=>{v(null)},[]);J.useEffect(()=>{if(h)return window.addEventListener("mousemove",We),window.addEventListener("mouseup",oe),()=>{window.removeEventListener("mousemove",We),window.removeEventListener("mouseup",oe)}},[h,We,oe]),J.useEffect(()=>{if(a!=="week")return;const F=d.current;if(F){const te=new ResizeObserver(X=>{for(let A of X)c(A.contentRect.height)});return te.observe(F),()=>te.disconnect()}},[a]);const _e=()=>$.jsxs($.Fragment,{children:[$.jsx("div",{className:"grid grid-cols-7 bg-gray-200 border-b",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(F=>$.jsx("div",{className:"bg-gray-50 py-1 text-center text-[10px] font-medium text-gray-500 uppercase tracking-wider",children:F},F))}),$.jsx("div",{className:"grid grid-cols-7 flex-1 auto-rows-fr gap-px bg-gray-200 overflow-hidden",children:E.map(F=>{const te=re(F),X=iG(F,t),A=nc(F,new Date),H=r&&nc(F,r),ae=it(F,"yyyy-MM-dd");return $.jsxs(VJ,{dateStr:ae,isCurrentMonth:X,isToday:A,isSelected:H,onClick:ge=>pe(F,ge),children:[$.jsx("span",{className:xt("text-[10px] w-5 h-5 flex items-center justify-center rounded-full leading-none pt-[1px]",A?"bg-blue-500 text-white font-bold":"text-gray-500",H&&!A&&"bg-blue-200 text-blue-800 font-bold"),children:it(F,"d")}),$.jsxs("div",{className:"flex-1 flex flex-col gap-0.5 overflow-hidden",children:[te.slice(0,3).map(ge=>$.jsxs("div",{className:xt("text-[9px] truncate px-1 rounded border",ge.entity_type==="event"?"bg-purple-50 text-purple-700 border-purple-100":"bg-blue-50 text-blue-700 border-blue-100",ge.system_status==="completed"&&"opacity-50 line-through grayscale"),title:ge.title,children:[ge.title,ge.do_date&&ge.due_date&&ge.do_date>ge.due_date&&$.jsx("span",{className:"ml-1 text-red-500 font-bold",title:"Do Date > Due Date",children:""}),ge.recurrence_rule&&$.jsx("span",{className:"ml-1 text-gray-500",title:"Recurring",children:""})]},ge.id)),te.length>3&&$.jsxs("div",{className:"text-[8px] text-gray-400 pl-1",children:["+",te.length-3]})]})]},F.toISOString())})})]}),G=()=>{const H=u<300?4:u<600?2:1;return $.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-white relative",children:[$.jsxs("div",{className:"grid grid-cols-8 border-b bg-gray-50 flex-shrink-0 shadow-sm z-20",children:[$.jsx("div",{className:"p-2 border-r text-xs text-gray-400 font-medium flex items-end justify-center bg-gray-50",children:"Time"}),T.map(ae=>{const ge=nc(ae,new Date),Oe=r&&nc(ae,r);return $.jsxs("div",{className:xt("py-2 text-center border-r last:border-r-0 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",ge&&"bg-gray-100",Oe&&!ge&&"bg-blue-50"),onClick:ve=>pe(ae,ve),children:[$.jsx("div",{className:"text-xs text-gray-500 uppercase",children:it(ae,"EEE")}),$.jsx("div",{className:xt("text-sm font-bold w-6 h-6 mx-auto flex items-center justify-center rounded-full mt-1 leading-none pt-[1px]",ge?"bg-blue-500 text-white":"text-gray-700",Oe&&!ge&&"bg-blue-200 text-blue-800"),children:it(ae,"d")})]},ae.toISOString())})]}),$.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative",children:[$.jsx("div",{className:"flex-1 relative w-full overflow-hidden",ref:d,children:$.jsxs("div",{className:"absolute inset-0 flex",children:[$.jsx("div",{className:"w-[12.5%] border-r bg-gray-50 flex-shrink-0 relative z-10 h-full",children:Array.from({length:13+1}).map((ae,ge)=>ge%H!==0||ge===13?null:$.jsx("div",{className:"absolute w-full text-right pr-2 text-xs text-gray-400 -mt-2",style:{top:`${ge/13*100}%`},children:`${(8+ge).toString().padStart(2,"0")}:00`},ge))}),$.jsxs("div",{className:"flex-1 grid grid-cols-7 relative h-full",children:[$.jsx("div",{className:"absolute inset-0 pointer-events-none",children:Array.from({length:13*4}).map((ae,ge)=>$.jsx("div",{className:xt("absolute w-full border-b",ge%4===0?"border-gray-200":"border-gray-100"),style:{top:`${ge/(13*4)*100}%`}},ge))}),T.map(ae=>{const Oe=re(ae).filter(Ne=>Ne.start_time&&Ne.end_time),ve=nc(ae,new Date);return $.jsxs(XJ,{day:ae,startHour:8,totalMinutes:780,isToday:ve,children:[Oe.map(Ne=>{const Ge=new Date(Ne.start_time),He=new Date(Ne.end_time),an=Ge.getHours()*60+Ge.getMinutes(),At=He.getHours()*60+He.getMinutes()-an,on=(an-8*60)/780*100,sr=At/780*100;return $.jsxs("div",{className:xt("absolute left-0.5 right-0.5 rounded px-1 py-0.5 text-[10px] overflow-hidden border shadow-sm cursor-pointer hover:z-10 hover:ring-1 hover:ring-blue-400",Ne.entity_type==="event"?"bg-purple-100 border-purple-200 text-purple-800":"bg-blue-100 border-blue-200 text-blue-800"),style:{top:`${on}%`,height:`${sr}%`},title:`${it(Ge,"HH:mm")} - ${it(He,"HH:mm")} ${Ne.title}`,onClick:Yn=>xe(Ne,Yn),children:[$.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 cursor-ns-resize hover:bg-blue-400 opacity-0 hover:opacity-100 transition-opacity z-20",onMouseDown:Yn=>qe(Ne,"top",Yn)}),$.jsxs("div",{className:"truncate leading-tight font-medium",children:[Ne.title,Ne.recurrence_rule&&$.jsx("span",{className:"ml-1 text-[8px]",title:"Recurring",children:""})]}),$.jsxs("div",{className:"text-[9px] leading-tight opacity-75",children:[it(Ge,"HH:mm")," - ",it(He,"HH:mm")]}),$.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 cursor-ns-resize hover:bg-blue-400 opacity-0 hover:opacity-100 transition-opacity z-20",onMouseDown:Yn=>qe(Ne,"bottom",Yn)})]},Ne.id)}),y&&nc(ae,y.day)&&$.jsx("div",{className:"absolute left-0.5 right-0.5 rounded px-1 py-0.5 text-[10px] overflow-hidden border border-dashed border-blue-400 bg-blue-50/50 z-20 pointer-events-none",style:{top:`${(y.start.getHours()*60+y.start.getMinutes()-8*60)/780*100}%`,height:`${Is(y.end,y.start)/780*100}%`},children:$.jsxs("div",{className:"text-blue-600 font-medium",children:[it(y.start,"HH:mm")," - ",it(y.end,"HH:mm")]})})]},ae.toISOString())})]})]})}),$.jsxs("div",{className:"flex-shrink-0 border-t-4 border-gray-200 bg-gray-50 p-2 z-20 max-h-[40%] overflow-y-auto",children:[$.jsx("div",{className:"text-xs font-bold text-gray-500 mb-2 uppercase tracking-wider",children:"Unscheduled Tasks"}),$.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[$.jsx("div",{className:"text-xs text-gray-400 text-right pt-1",children:"All Day"}),$.jsx("div",{className:"col-span-7 grid grid-cols-7 gap-2",children:T.map(ae=>{const Oe=re(ae).filter(ve=>!ve.start_time||!ve.end_time);return $.jsx("div",{className:"flex flex-col gap-1 min-h-[50px] bg-white rounded border border-dashed border-gray-300 p-1",children:Oe.map(ve=>$.jsx("div",{className:xt("text-[10px] px-1 py-0.5 rounded border truncate cursor-pointer hover:ring-1 hover:ring-blue-400",ve.entity_type==="event"?"bg-purple-50 text-purple-700 border-purple-100":"bg-blue-50 text-blue-700 border-blue-100",ve.system_status==="completed"&&"opacity-50 line-through"),title:ve.title,onClick:Ne=>xe(ve,Ne),children:ve.title},ve.id))},ae.toISOString())})})]})]})]})]})};return $.jsxs("div",{className:"flex flex-col h-full bg-white",onClick:fe,children:[$.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-gray-50",children:[$.jsxs("div",{className:"flex items-center gap-2",children:[$.jsx("button",{onClick:F=>{F.stopPropagation(),a==="month"?he(bG(t,1)):ce(SG(t,1))},className:"p-1 hover:bg-gray-200 rounded text-gray-600",onMouseDown:F=>F.stopPropagation(),children:$.jsx($M,{size:16})}),$.jsx("span",{onClick:F=>{F.stopPropagation(),a==="month"&&he(t)},className:xt("font-semibold text-gray-700 text-sm w-32 text-center transition-colors select-none",a==="month"&&"cursor-pointer hover:text-blue-600"),title:a==="month"?"Click to broadcast month signal":"",children:it(t,a==="month"?"MMMM yyyy":"'Week of' MMM d")}),$.jsx("button",{onClick:F=>{F.stopPropagation(),a==="month"?he(lM(t,1)):ce(dM(t,1))},className:"p-1 hover:bg-gray-200 rounded text-gray-600",onMouseDown:F=>F.stopPropagation(),children:$.jsx(RM,{size:16})})]}),$.jsxs("div",{className:"flex bg-gray-200 rounded p-0.5",children:[$.jsx("button",{onClick:F=>{F.stopPropagation(),s("month")},className:xt("px-3 py-1 text-xs rounded font-medium transition-colors",a==="month"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"Month"}),$.jsx("button",{onClick:F=>{F.stopPropagation(),s("week")},className:xt("px-3 py-1 text-xs rounded font-medium transition-colors",a==="week"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"Week"})]})]}),a==="month"?_e():G()]})},GJ=e=>J.useMemo(()=>{if(!e)return{selector:{}};const t={is_deleted:!1};if(e.criteria){if(e.criteria.entity_type&&(t.entity_type=e.criteria.entity_type),e.criteria.status?Array.isArray(e.criteria.status)?t.system_status={$in:e.criteria.status}:e.criteria.status==="all"?t.system_status={$ne:"archived"}:t.system_status=e.criteria.status:t.system_status={$ne:"archived"},e.criteria.do_date!==void 0){const r=new Date,i=e.criteria.do_date;if(i===null)t.do_date=null;else if(i==="today"||/^\d{4}-\d{2}-\d{2}$/.test(i)){const a=i==="today"?it(r,"yyyy-MM-dd"):i;t.$or=[{do_date:a},{do_date:{$lt:a},system_status:"active"},{due_date:{$lt:a},system_status:"active"}]}else if(i==="tomorrow")t.do_date=it(og(r,1),"yyyy-MM-dd");else if(i==="this_week"){const a=it(tu(r,{weekStartsOn:1}),"yyyy-MM-dd"),s=it(X_(r,{weekStartsOn:1}),"yyyy-MM-dd");t.do_date={$gte:a,$lte:s}}else if(i==="this_month"){const a=it(V_(r),"yyyy-MM-dd"),s=it(Y_(r),"yyyy-MM-dd");t.do_date={$gte:a,$lte:s}}else if(/^\d{4}-\d{2}$/.test(i)){const a=new Date(i+"-01"),s=it(V_(a),"yyyy-MM-dd"),u=it(Y_(a),"yyyy-MM-dd");t.do_date={$gte:s,$lte:u}}else t.do_date=i}Object.keys(e.criteria).forEach(r=>{["entity_type","status","do_date"].includes(r)||(t[r]=e.criteria[r])})}const n=e.sort||[{updated_at:"desc"}];return{selector:t,sort:n}},[e]),JJ=({item:e,widgetId:t,onToggle:n,onSelect:r})=>{var w,x;const{attributes:i,listeners:a,setNodeRef:s,isDragging:u}=oM({id:`${t}::${e.id}`,data:{id:e.id,entity_type:e.entity_type,title:e.title,start_time:e.start_time,end_time:e.end_time}}),c={opacity:u?.3:1},d=new Date;d.setHours(0,0,0,0);const h=e.entity_type==="task"&&e.due_date&&new Date(e.due_date)<d&&e.system_status==="active",v=e.entity_type==="task"&&e.do_date&&new Date(e.do_date)<d&&e.system_status==="active",y=h?Math.floor((Date.now()-new Date(e.due_date).getTime())/(1e3*60*60*24)):0,g=v?Math.floor((Date.now()-new Date(e.do_date).getTime())/(1e3*60*60*24)):0;return $.jsxs("div",{ref:s,style:c,...a,...i,className:xt("group flex items-center gap-2 p-2 rounded hover:bg-gray-50 transition-colors touch-none relative overflow-hidden",e.system_status==="completed"&&"opacity-50",h?"bg-red-50 border border-red-100":v?"bg-yellow-50 border border-yellow-100":""),children:[h&&$.jsxs("div",{className:"absolute right-1 top-0.5 text-[10px] text-red-500 font-medium px-1 bg-red-100 rounded",children:["Due ",y," days ago"]}),!h&&v&&$.jsxs("div",{className:"absolute right-1 top-0.5 text-[10px] text-yellow-600 font-medium px-1 bg-yellow-100 rounded",children:[g," days ago"]}),$.jsx("button",{onPointerDown:C=>C.stopPropagation(),onClick:C=>{C.stopPropagation(),n(e)},className:xt("flex-shrink-0 w-5 h-5 rounded border flex items-center justify-center transition-colors cursor-pointer",e.system_status==="completed"?"bg-blue-500 border-blue-500 text-white":"border-gray-300 text-transparent hover:border-blue-400"),children:$.jsx(TJ,{size:12,strokeWidth:3})}),$.jsx("div",{className:"flex-1 cursor-pointer hover:text-blue-600",onPointerDown:C=>C.stopPropagation(),onClick:()=>r(e.id),children:$.jsxs("span",{className:xt("text-sm text-gray-700 truncate block",e.system_status==="completed"&&"line-through text-gray-400",h&&"text-red-700"),children:[((w=e.properties)==null?void 0:w.energy_level)==="high"&&$.jsx("span",{title:"High Energy",children:""}),((x=e.properties)==null?void 0:x.energy_level)==="low"&&$.jsx("span",{title:"Low Energy",children:""}),e.title]})})]})},ZJ=({widget:e})=>{var w,x,C,S,E;const[t,n]=J.useState(""),r=e.data_source_config||{},i=GJ(r),s=[...Qo("items",i)].sort((P,N)=>{const T=new Date;T.setHours(0,0,0,0);const U=P.entity_type==="task"&&P.due_date&&new Date(P.due_date)<T&&P.system_status==="active",W=N.entity_type==="task"&&N.due_date&&new Date(N.due_date)<T&&N.system_status==="active";if(U&&!W)return-1;if(!U&&W)return 1;const re=P.entity_type==="task"&&P.do_date&&new Date(P.do_date)<T&&P.system_status==="active",pe=N.entity_type==="task"&&N.do_date&&new Date(N.do_date)<T&&N.system_status==="active";if(re&&!pe)return-1;if(!re&&pe)return 1;const he=P.sort_order??0,ce=N.sort_order??0;return he!==ce?he-ce:0}),u=async P=>{const N=P.system_status==="completed"?"active":"completed";await P.incrementalPatch({system_status:N,completed_at:N==="completed"?Date.now():null})},c=async P=>{if(P.preventDefault(),!!t.trim()){console.log("[SmartList] Attempting to add item:",t);try{const N=Tr.getDatabase();let T=null;const U=(r==null?void 0:r.criteria)||{},W=U.do_date;if(console.log("[SmartList] Criteria:",U),W==="today")T=it(new Date,"yyyy-MM-dd");else if(W&&/^\d{4}-\d{2}-\d{2}$/.test(W))T=W;else if(W&&/^\d{4}-\d{2}$/.test(W)){const fe=new Date;it(fe,"yyyy-MM")===W?T=it(fe,"yyyy-MM-dd"):T=`${W}-01`}console.log("[SmartList] Calculated do_date:",T);const re={};Object.keys(U).forEach(fe=>{if(fe.startsWith("properties.")){const xe=fe.replace("properties.","");re[xe]=U[fe]}});let pe="task";const he=U.entity_type;he&&["task","event","project"].includes(he)&&(pe=he);const ce={id:Xa(),title:t,entity_type:pe,system_status:"active",created_at:Date.now(),updated_at:new Date().toISOString(),is_deleted:!1,user_id:N.name.replace("project_canvas_gtd_",""),do_date:T,properties:re};await N.items.insert(ce),n("")}catch(N){console.error("[SmartList] Failed to add item:",N)}}},{setNodeRef:d,isOver:h}=ap({id:`smart_list_${e.id}`,data:{type:"smart_list",config:e.data_source_config}}),v=((w=r==null?void 0:r.criteria)==null?void 0:w.entity_type)||"task",y={task:"Add a task...",event:"Add an event...",project:"Add a project...",all:"Add a task..."}[v]||"Add a task...";return((x=e.view_state)==null?void 0:x.is_flipped)?$.jsxs("div",{className:"flex flex-col h-full bg-white p-4 overflow-y-auto",onMouseDown:P=>P.stopPropagation(),children:[$.jsx("h3",{className:"font-bold text-gray-700 mb-4 border-b pb-2",children:"List Settings"}),$.jsxs("div",{className:"space-y-4",children:[$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"List Title"}),$.jsx("input",{type:"text",defaultValue:r.title||"",onBlur:P=>e.patch({data_source_config:{...r,title:P.target.value}}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 outline-none",placeholder:"My List"})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Item Type"}),$.jsxs("select",{defaultValue:((C=r.criteria)==null?void 0:C.entity_type)||"task",onChange:P=>e.patch({data_source_config:{...r,criteria:{...r.criteria,entity_type:P.target.value}}}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 outline-none bg-white",children:[$.jsx("option",{value:"task",children:"Tasks"}),$.jsx("option",{value:"event",children:"Events"}),$.jsx("option",{value:"project",children:"Projects"}),$.jsx("option",{value:"all",children:"All Types"})]})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Date Filter"}),$.jsxs("select",{defaultValue:((S=r.criteria)==null?void 0:S.do_date)||"",onChange:P=>e.patch({data_source_config:{...r,criteria:{...r.criteria,do_date:P.target.value||null}}}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 outline-none bg-white",children:[$.jsx("option",{value:"",children:"Any Date"}),$.jsx("option",{value:"today",children:"Today"}),$.jsxs("option",{value:it(new Date,"yyyy-MM-dd"),children:["Today (Fixed: ",it(new Date,"yyyy-MM-dd"),")"]})]}),$.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"* Drag a date from calendar to set specific date"})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Status"}),$.jsxs("select",{defaultValue:((E=r.criteria)==null?void 0:E.system_status)||"active",onChange:P=>e.patch({data_source_config:{...r,criteria:{...r.criteria,system_status:P.target.value}}}),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 outline-none bg-white",children:[$.jsx("option",{value:"active",children:"Active Only"}),$.jsx("option",{value:"active",children:"Active Only"}),$.jsx("option",{value:"completed",children:"Completed Only"}),$.jsx("option",{value:"archived",children:"Archived Only"}),$.jsx("option",{value:"all",children:"All Statuses (Non-Archived)"})]})]}),$.jsx("button",{onClick:()=>e.patch({view_state:{...e.view_state,is_flipped:!1}}),className:"w-full bg-blue-500 text-white rounded py-1.5 text-sm font-medium hover:bg-blue-600 transition-colors mt-4",children:"Done"})]})]}):$.jsxs("div",{ref:d,className:xt("flex flex-col h-full bg-white transition-colors",h&&"bg-blue-50 ring-2 ring-blue-200 ring-inset"),children:[$.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-2 space-y-1",children:[s.length===0&&$.jsx("div",{className:"text-center text-gray-400 py-4 text-sm",children:"No items found"}),s.map(P=>$.jsx(JJ,{item:P,widgetId:e.id,onToggle:u,onSelect:N=>ll(e.id,{type:"item",id:N})},P.id))]}),$.jsx("form",{onSubmit:c,className:"p-2 border-t border-gray-100 bg-gray-50",children:$.jsxs("div",{className:"flex items-center gap-2 bg-white border border-gray-200 rounded px-2 py-1.5 focus-within:border-blue-400 focus-within:ring-1 focus-within:ring-blue-100 transition-all",children:[$.jsx(NM,{size:16,className:"text-gray-400"}),$.jsx("input",{type:"text",value:t,onChange:P=>n(P.target.value),placeholder:y,className:"flex-1 bg-transparent border-none outline-none text-sm text-gray-700 placeholder-gray-400"})]})})]})},eZ=({widget:e})=>{var h,v,y,g;const n=Qo("widgets",{selector:{id:e.id}})[0]||e,r=(h=n.data_source_config)==null?void 0:h.item_id,s=Qo("items",{selector:{id:r||"non-existent-id"}})[0],u=J.useCallback(ST.debounce(async(w,x)=>{await w.incrementalPatch({...x,updated_at:new Date().toISOString()})},1e3),[]);if(!r)return $.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-50 text-gray-400 text-sm p-4 text-center",children:"Select an item to view details"});if(!s)return $.jsxs("div",{className:"w-full h-full flex items-center justify-center bg-gray-50 text-gray-400 text-sm p-4 text-center",children:["Item not found (",r,")"]});const c=(v=n.view_state)==null?void 0:v.is_flipped,d=s.entity_type==="event";return c?$.jsxs("div",{className:"flex flex-col h-full bg-white overflow-y-auto p-4 space-y-4",onMouseDown:w=>w.stopPropagation(),children:[$.jsxs("div",{className:"flex justify-between items-center mb-2",children:[$.jsxs("h3",{className:"font-bold text-gray-700",children:["Edit ",d?"Event":"Task"]}),$.jsx("button",{onClick:async()=>{await e.patch({view_state:{...e.view_state,is_flipped:!1}})},className:"bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600",children:"Done"})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Title"}),$.jsx("input",{defaultValue:s.title,onChange:w=>u(s,{title:w.target.value}),className:"w-full text-lg font-bold border-b border-gray-200 focus:border-blue-500 outline-none pb-1"})]}),d?$.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Start Time"}),$.jsx("input",{type:"datetime-local",defaultValue:s.start_time?new Date(s.start_time).toISOString().slice(0,16):"",onChange:w=>u(s,{start_time:w.target.value?new Date(w.target.value).toISOString():null}),className:"w-full bg-gray-50 border border-gray-200 rounded px-2 py-1 text-sm outline-none focus:border-blue-500"})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"End Time"}),$.jsx("input",{type:"datetime-local",defaultValue:s.end_time?new Date(s.end_time).toISOString().slice(0,16):"",onChange:w=>u(s,{end_time:w.target.value?new Date(w.target.value).toISOString():null}),className:"w-full bg-gray-50 border border-gray-200 rounded px-2 py-1 text-sm outline-none focus:border-blue-500"})]})]}):$.jsxs($.Fragment,{children:[$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Status"}),$.jsxs("select",{defaultValue:s.system_status,onChange:w=>u(s,{system_status:w.target.value}),className:"w-full bg-gray-50 border border-gray-200 rounded px-2 py-1 text-sm outline-none focus:border-blue-500",children:[$.jsx("option",{value:"active",children:"Active"}),$.jsx("option",{value:"completed",children:"Completed"}),$.jsx("option",{value:"archived",children:"Archived"}),$.jsx("option",{value:"dropped",children:"Dropped"})]})]}),$.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Do Date"}),$.jsx("input",{type:"date",defaultValue:s.do_date||"",onChange:w=>u(s,{do_date:w.target.value||null}),className:"w-full bg-gray-50 border border-gray-200 rounded px-2 py-1 text-sm outline-none focus:border-blue-500"})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Due Date"}),$.jsx("input",{type:"datetime-local",defaultValue:s.due_date?s.due_date.slice(0,16):"",onChange:w=>u(s,{due_date:w.target.value?new Date(w.target.value).toISOString():null}),className:"w-full bg-gray-50 border border-gray-200 rounded px-2 py-1 text-sm outline-none focus:border-blue-500"})]})]}),$.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Start Time"}),$.jsx("input",{type:"datetime-local",defaultValue:s.start_time?new Date(s.start_time).toISOString().slice(0,16):"",onChange:w=>u(s,{start_time:w.target.value?new Date(w.target.value).toISOString():null}),className:"w-full bg-gray-50 border border-gray-200 rounded px-2 py-1 text-sm outline-none focus:border-blue-500"})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"End Time"}),$.jsx("input",{type:"datetime-local",defaultValue:s.end_time?new Date(s.end_time).toISOString().slice(0,16):"",onChange:w=>u(s,{end_time:w.target.value?new Date(w.target.value).toISOString():null}),className:"w-full bg-gray-50 border border-gray-200 rounded px-2 py-1 text-sm outline-none focus:border-blue-500"})]})]})]}),$.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Sort Order"}),$.jsx("input",{type:"number",defaultValue:s.sort_order||0,onChange:w=>u(s,{sort_order:parseFloat(w.target.value)}),className:"w-full bg-gray-50 border border-gray-200 rounded px-2 py-1 text-sm outline-none focus:border-blue-500"})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Recurrence"}),$.jsx("input",{type:"text",defaultValue:s.recurrence_rule||"",onChange:w=>u(s,{recurrence_rule:w.target.value||null}),placeholder:"e.g. DAILY",className:"w-full bg-gray-50 border border-gray-200 rounded px-2 py-1 text-sm outline-none focus:border-blue-500"})]})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Parent ID"}),$.jsx("input",{type:"text",defaultValue:s.parent_id||"",onChange:w=>u(s,{parent_id:w.target.value||null}),className:"w-full bg-gray-50 border border-gray-200 rounded px-2 py-1 text-sm outline-none focus:border-blue-500 font-mono text-xs",placeholder:"UUID"})]}),$.jsxs("div",{className:"flex-1 flex flex-col min-h-[100px]",children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Notes"}),$.jsx("textarea",{defaultValue:((y=s.properties)==null?void 0:y.content)||"",onChange:w=>u(s,{properties:{...s.properties,content:w.target.value}}),className:"flex-1 w-full bg-gray-50 border border-gray-200 rounded p-2 text-sm resize-none focus:ring-1 focus:ring-blue-500 outline-none",placeholder:"Add notes..."})]})]},s.id):$.jsxs("div",{className:"flex flex-col h-full bg-white overflow-y-auto p-4 space-y-4",onMouseDown:w=>w.stopPropagation(),children:[$.jsxs("div",{className:"border-b border-gray-100 pb-2",children:[$.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[$.jsx("span",{className:xt("text-[10px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded",d?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:d?"Event":"Task"}),s.system_status==="completed"&&$.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded bg-green-100 text-green-700",children:"Completed"})]}),$.jsx("h2",{className:"text-xl font-bold text-gray-800 leading-tight",children:s.title}),$.jsx("div",{className:"flex flex-col gap-1 mt-3 text-xs text-gray-500",children:d?$.jsxs($.Fragment,{children:[s.start_time&&$.jsxs("div",{children:[$.jsx("span",{className:"font-medium text-gray-700",children:"Start:"})," ",new Date(s.start_time).toLocaleString()]}),s.end_time&&$.jsxs("div",{children:[$.jsx("span",{className:"font-medium text-gray-700",children:"End:"})," ",new Date(s.end_time).toLocaleString()]})]}):$.jsxs($.Fragment,{children:[s.do_date&&$.jsxs("div",{children:[$.jsx("span",{className:"font-medium text-gray-700",children:"Do Date:"})," ",s.do_date]}),s.due_date&&$.jsxs("div",{children:[$.jsx("span",{className:"font-medium text-gray-700",children:"Due Date:"})," ",new Date(s.due_date).toLocaleString()]}),s.completed_at&&$.jsxs("div",{children:[$.jsx("span",{className:"font-medium text-gray-700",children:"Achieved:"})," ",new Date(s.completed_at).toLocaleString()]})]})})]}),$.jsx("div",{className:"flex-1 text-sm text-gray-600 whitespace-pre-wrap",children:((g=s.properties)==null?void 0:g.content)||$.jsx("span",{className:"italic text-gray-400",children:"No notes provided."})}),s.updated_at&&$.jsxs("div",{className:"text-[10px] text-gray-400 pt-2 border-t border-gray-50",children:["Last updated: ",new Date(s.updated_at).toLocaleString()]})]})},tZ=({widget:e})=>{const[t,n]=J.useState(!1),{isOver:r,setNodeRef:i}=ap({id:`archive_bin_${e.id}`,data:{type:"archive_bin"}}),a=Qo("items",{selector:{system_status:"archived",is_deleted:!1},sort:[{completed_at:"desc"}],limit:50}),s=t?a:[];return $.jsxs("div",{ref:i,className:xt("w-full h-full flex flex-col rounded-lg border-2 transition-all duration-200 bg-white overflow-hidden",r?"bg-red-50 border-red-500 text-red-600 shadow-lg":"border-gray-200 text-gray-600"),children:[$.jsxs("div",{className:xt("flex flex-col items-center justify-center p-4 cursor-pointer transition-colors",t?"h-auto border-b border-gray-100":"h-full",r&&"bg-red-50"),onClick:()=>n(!t),children:[$.jsx("div",{className:xt("transition-transform duration-200",r&&"animate-bounce"),children:r?$.jsx(TM,{size:32}):$.jsx(RJ,{size:32})}),$.jsx("span",{className:"mt-2 text-sm font-medium",children:r?"Drop to Archive":"Archive Bin"}),$.jsxs("div",{className:"mt-1 text-xs text-gray-400",children:[a.length," items"]}),t?$.jsx(IJ,{size:16,className:"mt-2 text-gray-400"}):$.jsx(MJ,{size:16,className:"mt-auto text-gray-400"})]}),t&&$.jsxs("div",{className:"flex-1 overflow-y-auto p-2 bg-gray-50",children:[s.length===0&&$.jsx("div",{className:"text-center text-gray-400 text-xs py-4",children:"Empty"}),s.map(u=>$.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-gray-100 mb-1 text-xs",children:[$.jsx("span",{className:"truncate flex-1 line-through text-gray-400",children:u.title}),$.jsx("span",{className:"text-gray-300 ml-2 whitespace-nowrap",children:u.completed_at?it(new Date(u.completed_at),"MMM d"):"-"})]},u.id))]})]})},Am=({id:e,label:t,className:n,children:r})=>{const{isOver:i,setNodeRef:a}=ap({id:`matrix_${e}`,data:{type:"matrix_quad",quad:e}});return $.jsxs("div",{ref:a,className:xt("relative flex flex-col p-2 border transition-colors",n,i&&"bg-blue-50 ring-2 ring-inset ring-blue-400 z-10"),children:[$.jsx("div",{className:"absolute top-2 left-2 text-xs font-bold text-gray-400 uppercase tracking-wider pointer-events-none",children:t}),r]})},nZ=({item:e,widgetId:t,top:n,left:r})=>{var c,d;const{attributes:i,listeners:a,setNodeRef:s,isDragging:u}=oM({id:`${t}::${e.id}`,data:{id:e.id,entity_type:"task",title:e.title}});return $.jsx("div",{ref:s,...a,...i,className:xt("absolute w-3 h-3 rounded-full shadow-sm transform -translate-x-1/2 -translate-y-1/2 border border-white cursor-grab active:cursor-grabbing hover:scale-125 transition-transform z-20",((c=e.properties)==null?void 0:c.priority)==="high"?"bg-red-500":((d=e.properties)==null?void 0:d.priority)==="low"?"bg-gray-400":"bg-blue-500",u&&"opacity-30"),style:{top:n,left:r},title:`${e.title} (Due: ${e.due_date})`})},rZ=({widget:e})=>{const t=J.useMemo(()=>({selector:{entity_type:"task",system_status:"active",is_deleted:!1}}),[]),n=Qo("items",t);console.log("Matrix Items:",n.length,n[0]);const r=i=>{var u,c;let a=50;((u=i.properties)==null?void 0:u.priority)==="high"?a=15:((c=i.properties)==null?void 0:c.priority)==="low"&&(a=85);let s=5;if(i.due_date){const d=new Date;d.setHours(0,0,0,0);const h=aG(i.due_date),v=tQ(h,d);v<=0?s=95:s=5+1/v*90}return{top:`${a}%`,left:`${s}%`}};return $.jsxs("div",{className:"w-full h-full flex flex-col bg-white",children:[$.jsxs("div",{className:"absolute inset-0 pointer-events-none flex flex-col items-center justify-center",children:[$.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 -rotate-90 text-xs font-bold text-gray-400 tracking-widest uppercase origin-left translate-x-2",children:"Importance"}),$.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 text-xs font-bold text-gray-400 tracking-widest uppercase mb-1",children:"Urgency"})]}),$.jsxs("div",{className:"flex-1 grid grid-cols-2 grid-rows-2 relative z-0",children:[$.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[$.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-0.5 bg-gray-300 -translate-x-1/2"}),$.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-0.5 bg-gray-300 -translate-y-1/2"})]}),$.jsx(Am,{id:"Q2",label:"Q2: Plan",className:"border-r border-b border-gray-100 bg-blue-50/30"}),$.jsx(Am,{id:"Q1",label:"Q1: Do",className:"border-b border-gray-100 bg-red-50/30"}),$.jsx(Am,{id:"Q4",label:"Q4: Drop",className:"border-r border-gray-100 bg-gray-50/30"}),$.jsx(Am,{id:"Q3",label:"Q3: Delegate",className:"bg-yellow-50/30"})]}),$.jsx("div",{className:"absolute inset-0 pointer-events-none",children:n.map(i=>{const a=r(i);return $.jsx("div",{className:"pointer-events-auto",children:$.jsx(nZ,{item:i,widgetId:e.id,top:a.top,left:a.left})},i.id)})})]})},iZ=({widget:e})=>{var g,w,x,C,S,E;const t=(g=e.data_source_config)==null?void 0:g.project_id,n=(w=e.data_source_config)==null?void 0:w.selected_date,r=(x=e.data_source_config)==null?void 0:x.date_granularity,a=Qo("items",{selector:{id:t||"non-existent"}})[0],s={entity_type:"task",is_deleted:!1};n?r==="month"?s.do_date={$regex:`^${n}`}:s.do_date=n:t&&(s["properties.project_id"]=t);const u=Qo("items",{selector:s}),c=u.length,d=u.filter(P=>P.system_status==="completed").length,h=c>0?Math.round(d/c*100):0,v=(C=e.view_state)==null?void 0:C.is_flipped,y=async P=>{P.preventDefault();const N=new FormData(P.target),T={title:N.get("title"),system_status:N.get("status"),properties:{...a==null?void 0:a.properties,content:N.get("content")}},U=N.get("start_time"),W=N.get("due_date");U&&(T.start_time=new Date(U).toISOString()),W&&(T.due_date=W),await a.incrementalPatch(T),await e.patch({view_state:{...e.view_state,is_flipped:!1}})};return!a&&!n?$.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-50 text-gray-400 text-sm",children:"Project not found"}):v&&a?$.jsx("div",{className:"w-full h-full bg-white p-4 overflow-y-auto",children:$.jsxs("form",{onSubmit:y,className:"flex flex-col gap-3 h-full",children:[$.jsxs("div",{className:"flex justify-between items-center",children:[$.jsx("h3",{className:"font-bold text-gray-700",children:"Edit Project"}),$.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600",children:"Save"})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Title"}),$.jsx("input",{name:"title",defaultValue:a.title,className:"w-full border rounded p-1 text-sm font-bold"})]}),$.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Status"}),$.jsxs("select",{name:"status",defaultValue:a.system_status,className:"w-full border rounded p-1 text-xs",children:[$.jsx("option",{value:"active",children:"Active"}),$.jsx("option",{value:"completed",children:"Completed"}),$.jsx("option",{value:"dropped",children:"Dropped"})]})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Due Date"}),$.jsx("input",{type:"date",name:"due_date",defaultValue:a.due_date?it(new Date(a.due_date),"yyyy-MM-dd"):"",className:"w-full border rounded p-1 text-xs"})]})]}),$.jsxs("div",{className:"flex-1 flex flex-col",children:[$.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Notes"}),$.jsx("textarea",{name:"content",defaultValue:(S=a.properties)==null?void 0:S.content,className:"flex-1 w-full border rounded p-2 text-sm resize-none",placeholder:"Project description..."})]})]})}):$.jsxs("div",{className:"w-full h-full bg-white p-4 flex flex-col justify-center",children:[$.jsxs("div",{className:"flex items-center justify-between mb-2",children:[$.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{if(!n)return null;let P=new Date(n);return isNaN(P.getTime())&&/^\d{4}-\d{2}$/.test(n)&&(P=new Date(n+"-01")),isNaN(P.getTime())?null:$.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:r==="month"?it(P,"MMMM yyyy"):it(P,"MMMM d, yyyy")})})(),!n&&$.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:(a==null?void 0:a.title)||"Project"})]}),$.jsxs("span",{className:"text-sm font-medium text-blue-600 bg-blue-50 px-2 py-1 rounded",children:[d,"/",c]})]}),!n&&a&&$.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mb-3",children:[$.jsxs("div",{className:"flex items-center gap-1",children:[$.jsx("span",{className:"font-medium",children:"Status:"}),$.jsx("span",{className:xt("px-1.5 py-0.5 rounded capitalize",a.system_status==="active"?"bg-green-100 text-green-700":a.system_status==="completed"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:a.system_status})]}),a.start_time&&$.jsxs("div",{children:[$.jsx("span",{className:"font-medium",children:"Start:"})," ",it(new Date(a.start_time),"MMM d, yyyy")]}),a.due_date&&$.jsxs("div",{children:[$.jsx("span",{className:"font-medium",children:"Due:"})," ",it(new Date(a.due_date),"MMM d, yyyy")]})]}),$.jsx("div",{className:"w-full h-2 bg-gray-100 rounded-full overflow-hidden mb-3",children:$.jsx("div",{className:"h-full bg-blue-500 transition-all duration-500",style:{width:`${h}%`}})}),a&&$.jsxs("div",{className:"flex-1 overflow-y-auto bg-gray-50 rounded p-2 text-sm text-gray-600 whitespace-pre-wrap",children:[$.jsx("div",{className:"font-medium text-xs text-gray-400 mb-1 uppercase tracking-wider",children:"Notes"}),((E=a.properties)==null?void 0:E.content)||$.jsx("span",{className:"italic text-gray-400",children:"No notes provided."})]}),n&&!a&&$.jsx("div",{className:"flex-1 overflow-y-auto",children:$.jsxs("div",{className:"text-sm text-gray-600",children:[$.jsxs("div",{className:"font-medium text-xs text-gray-400 mb-2 uppercase tracking-wider",children:["Tasks for this ",r==="month"?"month":"day"]}),u.length>0?$.jsxs("div",{className:"space-y-1",children:[u.slice(0,10).map(P=>$.jsx("div",{className:"flex items-center gap-2 text-xs",children:$.jsx("span",{className:P.system_status==="completed"?"line-through text-gray-400":"",children:P.title})},P.id)),u.length>10&&$.jsxs("div",{className:"text-xs text-gray-400 italic",children:["... and ",u.length-10," more tasks"]})]}):$.jsxs("span",{className:"italic text-gray-400 text-sm",children:["No tasks for this ",r==="month"?"month":"day"]})]})})]})},aZ=({widget:e})=>{var N;const[t,n]=J.useState(()=>{var T;return(T=e.data_source_config)!=null&&T.selected_date?new Date(e.data_source_config.selected_date):new Date}),r=J.useRef(null);J.useEffect(()=>{var T;(T=e.data_source_config)!=null&&T.selected_date&&n(new Date(e.data_source_config.selected_date))},[(N=e.data_source_config)==null?void 0:N.selected_date]);const[i,a]=J.useState(0),[s,u]=J.useState(null),c=8,d=21,h=(d-c)*60;J.useEffect(()=>{const T=r.current;if(T){const U=new ResizeObserver(W=>{for(let re of W)a(re.contentRect.height)});return U.observe(T),()=>U.disconnect()}},[]);const v=J.useMemo(()=>{const T=Ki(Ms(t),c),U=Ki(Ms(t),d);return{selector:{entity_type:{$in:["task","event"]},is_deleted:!1,system_status:{$ne:"archived"},start_time:{$gte:T.toISOString(),$lt:U.toISOString()},end_time:{$gt:T.toISOString(),$lte:U.toISOString()}}}},[t]),y=Qo("items",v),g=T=>{if(!T.start_time||!T.end_time)return null;let U=new Date(T.start_time),W=new Date(T.end_time);s&&s.itemId===T.id&&(U=s.proposedStart,W=s.proposedEnd);const re=Ki(Ms(t),c),pe=Ki(Ms(t),d);U<re&&(U=re),W>pe&&(W=pe);const he=Is(U,re),ce=Is(W,U),fe=he/h*100,xe=ce/h*100;return{top:`${Math.max(0,fe)}%`,height:`${Math.min(100,xe)}%`}},w=J.useCallback(T=>{if(!r.current)return null;const U=r.current.getBoundingClientRect(),W=T-U.top,pe=Math.max(0,Math.min(1,W/U.height))*h,he=Math.round(pe/15)*15;return Ac(Ki(As(t,0),c),he)},[t,h]),x=J.useCallback((T,U,W)=>{if(W.stopPropagation(),W.preventDefault(),!T.start_time||!T.end_time)return;const re=new Date(T.start_time),pe=new Date(T.end_time);u({itemId:T.id,edge:U,initialY:W.clientY,originalStart:re,originalEnd:pe,proposedStart:re,proposedEnd:pe})},[]),C=J.useCallback(T=>{if(!s)return;const U=w(T.clientY);if(!U)return;const W=Ki(As(t,0),c),re=Ki(As(t,0),d),pe=U<W?W:U>re?re:U;u(he=>{if(!he)return null;let ce=he.proposedStart,fe=he.proposedEnd;return he.edge==="top"?Is(he.originalEnd,pe)>=15&&(ce=pe,fe=he.originalEnd):Is(pe,he.originalStart)>=15&&(fe=pe,ce=he.originalStart),{...he,proposedStart:ce,proposedEnd:fe}})},[s,w,t]),S=J.useCallback(()=>{if(s){const T=y.find(U=>U.id===s.itemId);T&&(s.proposedStart.getTime()!==s.originalStart.getTime()||s.proposedEnd.getTime()!==s.originalEnd.getTime())&&T.patch({start_time:s.proposedStart.toISOString(),end_time:s.proposedEnd.toISOString()}).catch(U=>console.error("Resize patch failed:",U)),u(null)}},[s,y]);J.useEffect(()=>{if(s)return window.addEventListener("mousemove",C),window.addEventListener("mouseup",S),()=>{window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",S)}},[s,C,S]);const E=Array.from({length:d-c+1},(T,U)=>c+U),P=i<300?4:i<600?2:1;return $.jsxs("div",{className:"flex flex-col h-full bg-white overflow-hidden",children:[$.jsx("div",{className:"flex items-center justify-between p-2 border-b bg-gray-50 flex-shrink-0",children:$.jsxs("div",{className:"flex items-center gap-2",children:[$.jsx("button",{onClick:()=>n(og(t,-1)),className:"p-1 hover:bg-gray-200 rounded text-gray-600",children:$.jsx($M,{size:16})}),$.jsx("span",{className:"font-semibold text-gray-700 text-sm",children:it(t,"MMMM d, yyyy")}),$.jsx("button",{onClick:()=>n(og(t,1)),className:"p-1 hover:bg-gray-200 rounded text-gray-600",children:$.jsx(RM,{size:16})})]})}),$.jsxs("div",{className:"flex-1 relative overflow-hidden",ref:r,children:[Array.from({length:h/15}).map((T,U)=>$.jsx("div",{className:xt("absolute left-12 right-0 border-t",U%4===0?"border-gray-200":"border-gray-50 border-dashed"),style:{top:`${U*15/h*100}%`}},`grid-${U}`)),E.map((T,U)=>U%P!==0||T===d?null:$.jsxs("div",{className:"absolute left-0 w-12 text-right pr-2 text-[10px] text-gray-400 -mt-2 bg-white z-10",style:{top:`${(T-c)/(d-c)*100}%`},children:[T,":00"]},T)),$.jsx("div",{className:"absolute top-0 bottom-0 left-12 right-0",children:y.map(T=>{const U=g(T);return U?$.jsxs("div",{className:xt("absolute left-1 right-1 rounded px-2 py-1 text-xs overflow-hidden border shadow-sm cursor-pointer hover:z-20 hover:ring-1 hover:ring-blue-400 transition-all group",T.entity_type==="event"?"bg-purple-100 text-purple-700 border-purple-200":"bg-blue-100 text-blue-700 border-blue-200",T.system_status==="completed"&&"opacity-50 grayscale",(s==null?void 0:s.itemId)===T.id&&"z-30 ring-2 ring-blue-500 shadow-md"),style:{top:U.top,height:U.height},title:`${T.title} (${T.start_time?it(new Date(T.start_time),"HH:mm"):"All Day"})`,onClick:W=>{W.stopPropagation(),ll(e.id,{type:"item",id:T.id})},children:[$.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 -mt-1 cursor-ns-resize hover:bg-blue-400 opacity-0 group-hover:opacity-100 transition-opacity z-20",onMouseDown:W=>x(T,"top",W)}),$.jsx("div",{className:"font-medium leading-tight truncate",children:T.title}),$.jsxs("div",{className:"text-[10px] opacity-75 truncate",children:[T.start_time&&it(new Date(T.start_time),"HH:mm")," - ",T.end_time&&it(new Date(T.end_time),"HH:mm")]}),$.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2 -mb-1 cursor-ns-resize hover:bg-blue-400 opacity-0 group-hover:opacity-100 transition-opacity z-20",onMouseDown:W=>x(T,"bottom",W)})]},T.id):null})})]})]})},oZ={calendar_master:QJ,smart_list:ZJ,detail:eZ,archive_bin:tZ,matrix:rZ,project_header:iZ,timeline:aZ},sZ=({widget:e})=>{const t=oZ[e.widget_type];return t?$.jsx(t,{widget:e}):$.jsxs("div",{className:"w-full h-full flex items-center justify-center bg-red-50 text-red-500",children:["Unknown Widget: ",e.widget_type]})},MC=50,Wi=e=>Math.round(e/MC)*MC,uZ=({widget:e,isActive:t,onSetActive:n,onBringToFront:r,scale:i})=>{var Le,qe,We;const[a,s]=J.useState(!1),[u,c]=J.useState(null),[d,h]=J.useState(!1),v=J.useRef(null),y=J.useRef(null),g=J.useRef(null),[w,x]=J.useState(!1),C=e.geometry,S=e.view_state||{},E=S.is_pinned||!1,[P,N]=J.useState({x:C.x,y:C.y,w:C.w,h:C.h});J.useEffect(()=>{a||N({x:C.x,y:C.y,w:C.w,h:C.h})},[C.x,C.y,C.w,C.h]),J.useEffect(()=>{const oe=_e=>{y.current&&!y.current.contains(_e.target)&&h(!1),g.current&&!g.current.contains(_e.target)&&x(!1)};if(d||w)return document.addEventListener("mousedown",oe),()=>{document.removeEventListener("mousedown",oe)}},[d,w]);const T=J.useCallback(()=>{s(!0)},[]),U=J.useCallback((oe,_e)=>{N(G=>({...G,x:_e.x,y:_e.y})),c({x:Wi(_e.x),y:Wi(_e.y)})},[]),W=J.useCallback((oe,_e)=>{s(!1),c(null);const G=Wi(_e.x),F=Wi(_e.y);N(te=>({...te,x:G,y:F})),e.patch({geometry:{...C,x:G,y:F}})},[e,C]),re=J.useCallback(()=>{s(!0)},[]),pe=J.useCallback((oe,_e,G,F,te)=>{N({x:te.x,y:te.y,w:G.offsetWidth,h:G.offsetHeight}),c({x:Wi(te.x),y:Wi(te.y),w:Wi(G.offsetWidth),h:Wi(G.offsetHeight)})},[]),he=J.useCallback((oe,_e,G,F,te)=>{s(!1),c(null);const X=Wi(te.x),A=Wi(te.y),H=Wi(G.offsetWidth),ae=Wi(G.offsetHeight);N({x:X,y:A,w:H,h:ae}),e.patch({geometry:{...C,x:X,y:A,w:H,h:ae}})},[e,C]),ce=J.useCallback(oe=>{var _e,G,F;if(oe.stopPropagation(),n(),r(),e.widget_type==="project_header"){const te=(_e=e.data_source_config)==null?void 0:_e.selected_date,X=(G=e.data_source_config)==null?void 0:G.date_granularity,A=(F=e.data_source_config)==null?void 0:F.project_id;te?ll(e.id,{type:"date",val:te,granularity:X}):A&&ll(e.id,{type:"item",id:A})}},[n,r,e]),fe=J.useCallback(async oe=>{oe.stopPropagation(),oe.preventDefault(),await e.patch({view_state:{...S,is_pinned:!E}})},[e,S,E]),xe=J.useCallback(async(oe,_e)=>{oe.stopPropagation(),oe.preventDefault();try{const G=Tr.getDatabase();let F=e.group_id;F||(F=Xa(),await e.patch({group_id:F}));const te=350,X=50,A=C.x+te,H=C.y+X,ge={smart_list:{w:300,h:400},matrix:{w:500,h:500},project_header:{w:400,h:300},detail:{w:400,h:500},timeline:{w:800,h:400}}[_e]||{w:300,h:400},Oe=G.name.replace("project_canvas_gtd_","");if(_e==="project_header"){const Ne=Xa();await G.items.insert({id:Ne,user_id:Oe,entity_type:"project",system_status:"active",title:"New Project",properties:{content:""},updated_at:new Date().toISOString(),is_deleted:!1,created_at:Date.now()}),await G.widgets.insert({id:Xa(),canvas_id:e.canvas_id,widget_type:"project_header",geometry:{x:A,y:H,w:400,h:300,z:(C.z||0)+1},data_source_config:{project_id:Ne},group_id:F,view_state:{},updated_at:new Date().toISOString(),is_deleted:!1,user_id:Oe}),console.log(`Created Project Hub (${Ne}) with header in group ${F}`);return}let ve={};if(_e==="smart_list"){const Ne=new Date,Ge=`${Ne.getFullYear()}-${String(Ne.getMonth()+1).padStart(2,"0")}`;ve={title:Ne.toLocaleString("default",{month:"long"}),criteria:{do_date:Ge,entity_type:"task"}}}await G.widgets.insert({id:Xa(),canvas_id:e.canvas_id,widget_type:_e,geometry:{x:A,y:H,w:ge.w,h:ge.h,z:(C.z||0)+1},data_source_config:ve,group_id:F,view_state:{},updated_at:new Date().toISOString(),is_deleted:!1,user_id:Oe}),console.log(`Created ${_e} in group ${F}`)}catch(G){console.error("Failed to create widget:",G)}},[e,C,S]),Ce=J.useCallback(async oe=>{oe.stopPropagation(),oe.preventDefault(),await e.patch({is_deleted:!0})},[e]);return $.jsxs($.Fragment,{children:[u&&$.jsx("div",{style:{position:"absolute",left:u.x,top:u.y,width:u.w||C.w,height:u.h||C.h,border:"2px dashed #10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderRadius:"0.5rem",pointerEvents:"none",zIndex:(C.z||0)-1}}),$.jsx(DJ,{ref:v,position:{x:P.x,y:P.y},size:{width:P.w,height:P.h},onDragStart:T,onDrag:U,onDragStop:W,onResizeStart:re,onResize:pe,onResizeStop:he,onMouseDown:ce,dragHandleClassName:"widget-header",dragGrid:[1,1],resizeGrid:[1,1],scale:i,enableUserSelectHack:!1,style:{zIndex:C.z||0},className:xt("rounded-lg border-2",!a&&"shadow-lg backdrop-blur-sm transition-shadow",a&&"shadow-md",t?"border-blue-500":"border-gray-300"),children:$.jsxs("div",{className:xt("w-full h-full flex flex-col rounded-lg overflow-hidden",a?"bg-white":"bg-white bg-opacity-95"),style:{willChange:a?"transform":"auto"},children:[$.jsxs("div",{className:"widget-header flex items-center justify-between bg-gray-100 px-3 py-2 cursor-move border-b border-gray-200 rounded-t-lg",children:[$.jsx("span",{className:"font-bold text-xs text-gray-600 uppercase tracking-wider",children:((Le=e.data_source_config)==null?void 0:Le.title)||e.widget_type.replace("_"," ")}),e.widget_type==="smart_list"&&$.jsxs("div",{className:"relative ml-2",ref:g,children:[$.jsxs("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:oe=>{oe.stopPropagation(),x(!w)},className:"flex items-center gap-1 text-xs font-medium text-gray-500 hover:text-blue-600 transition-colors px-1 py-0.5 rounded hover:bg-gray-200",children:[$.jsx("span",{className:"capitalize",children:((We=(qe=e.data_source_config)==null?void 0:qe.criteria)==null?void 0:We.entity_type)||"All"}),$.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:$.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),w&&$.jsx("div",{className:"absolute left-0 top-full mt-1 bg-white border border-gray-200 rounded shadow-lg z-50 min-w-[100px]",children:["task","event","project","all"].map(oe=>{var _e,G;return $.jsx("button",{onMouseDown:F=>F.stopPropagation(),onClick:async F=>{var X;F.stopPropagation();const te=oe==="all"?void 0:oe;await e.patch({data_source_config:{...e.data_source_config,criteria:{...(X=e.data_source_config)==null?void 0:X.criteria,entity_type:te}}}),x(!1)},className:xt("w-full text-left px-3 py-2 text-xs hover:bg-gray-100 transition-colors capitalize",(((G=(_e=e.data_source_config)==null?void 0:_e.criteria)==null?void 0:G.entity_type)||"all")===oe&&"text-blue-600 font-medium bg-blue-50"),children:oe},oe)})})]}),$.jsxs("div",{className:"flex space-x-1",onMouseDown:oe=>oe.stopPropagation(),children:[(e.widget_type==="calendar_master"||e.widget_type==="smart_list")&&$.jsxs("div",{className:"relative",ref:y,children:[$.jsx("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:oe=>{oe.stopPropagation(),h(!d)},className:"p-1 rounded hover:bg-gray-200 transition-colors text-gray-400 hover:text-blue-600",title:"Add Widget to Group",children:$.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[$.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),$.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),d&&$.jsxs("div",{className:"absolute left-0 top-full mt-1 bg-white border border-gray-200 rounded shadow-lg z-50 min-w-[120px]",children:[e.widget_type==="calendar_master"&&$.jsxs($.Fragment,{children:[$.jsx("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:oe=>{xe(oe,"smart_list"),h(!1)},className:"w-full text-left px-3 py-2 text-xs hover:bg-gray-100 transition-colors",children:"Smart List"}),$.jsx("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:oe=>{xe(oe,"project_header"),h(!1)},className:"w-full text-left px-3 py-2 text-xs hover:bg-gray-100 transition-colors",children:"Project Header"}),$.jsx("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:oe=>{xe(oe,"timeline"),h(!1)},className:"w-full text-left px-3 py-2 text-xs hover:bg-gray-100 transition-colors",children:"Timeline"})]}),e.widget_type==="smart_list"&&$.jsx("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:oe=>{xe(oe,"detail"),h(!1)},className:"w-full text-left px-3 py-2 text-xs hover:bg-gray-100 transition-colors",children:"Detail"})]})]}),$.jsx("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:fe,className:xt("p-1 rounded hover:bg-gray-200 transition-colors",E?"text-blue-600":"text-gray-400"),title:E?"Unpin Data":"Pin Data",children:$.jsx(BJ,{size:14,fill:E?"currentColor":"none"})}),$.jsx("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:Ce,className:"p-1 rounded hover:bg-gray-200 transition-colors text-gray-400 hover:text-red-600",title:"Close",children:$.jsx(UJ,{size:14})}),e.widget_type!=="smart_list"&&e.widget_type!=="calendar_master"&&$.jsx("button",{onMouseDown:oe=>oe.stopPropagation(),onClick:async oe=>{oe.stopPropagation(),await e.patch({view_state:{...S,is_flipped:!S.is_flipped}})},className:xt("p-1 rounded hover:bg-gray-200 transition-colors",S.is_flipped?"text-blue-600":"text-gray-400 hover:text-blue-600"),title:["detail","project_detail","project_header","smart_list"].includes(e.widget_type)?S.is_flipped?"View Mode":"Edit Mode":"Switch View",children:["detail","project_detail","project_header","smart_list"].includes(e.widget_type)?S.is_flipped?$.jsx(jJ,{size:14}):$.jsx(FJ,{size:14}):$.jsx(zJ,{size:14})})]})]}),$.jsx("div",{className:"flex-1 overflow-hidden relative",onMouseDown:oe=>oe.stopPropagation(),children:$.jsx(sZ,{widget:e})})]})})]})},lZ=({onClose:e})=>{const{login:t}=dS(),[n,r]=J.useState(""),[i,a]=J.useState(""),[s,u]=J.useState(!1),[c,d]=J.useState(""),h=async v=>{v.preventDefault(),d("");const g=`http://localhost:3000${s?"/auth/register":"/auth/login"}`;try{const w=await fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:i})});if(!w.ok){const C=await w.json();throw new Error(C.message||"Authentication failed")}const x=await w.json();if(await t(x.user.email,x.access_token,x.user.id,x.user),s)try{const C=Tr.getDatabase();await Tr.seedDefaultData(C)}catch(C){console.error("Failed to seed default data:",C)}e&&e()}catch(w){d(w.message)}};return $.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",onClick:e,children:$.jsxs("div",{className:"bg-[#1e1e1e] p-8 rounded-xl border border-[#333] w-96 shadow-2xl relative",onClick:v=>v.stopPropagation(),children:[e&&$.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:$.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:$.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),$.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:s?"Create Account":"Welcome Back"}),c&&$.jsx("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 p-3 rounded mb-4 text-sm",children:c}),$.jsxs("form",{onSubmit:h,className:"space-y-4",children:[$.jsxs("div",{children:[$.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email"}),$.jsx("input",{type:"email",value:n,onChange:v=>r(v.target.value),className:"w-full bg-[#252525] border border-[#333] rounded p-2 text-white focus:border-blue-500 outline-none transition-colors",required:!0})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Password"}),$.jsx("input",{type:"password",value:i,onChange:v=>a(v.target.value),className:"w-full bg-[#252525] border border-[#333] rounded p-2 text-white focus:border-blue-500 outline-none transition-colors",required:!0})]}),$.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-500 text-white font-medium py-2 rounded transition-colors",children:s?"Sign Up":"Log In"})]}),$.jsx("div",{className:"mt-4 text-center",children:$.jsx("button",{onClick:()=>u(!s),className:"text-sm text-gray-400 hover:text-white transition-colors",children:s?"Already have an account? Log In":"Don't have an account? Sign Up"})})]})})},cZ=[{type:"project_hub",label:"Project Header",icon:WJ,w:0,h:0},{type:"inbox",label:"Inbox (Smart List)",icon:NC,w:300,h:400},{type:"calendar_master",label:"Master Calendar",icon:NJ,w:600,h:500},{type:"smart_list",label:"Smart List",icon:NC,w:300,h:400},{type:"detail",label:"Detail Inspector",icon:LJ,w:300,h:400},{type:"archive_bin",label:"Archive Bin",icon:TM,w:200,h:200},{type:"timeline",label:"Timeline",icon:AJ,w:800,h:400}],fZ=({canvasId:e})=>{const[t,n]=J.useState(!1),r=async(i,a,s,u={})=>{if(!e){console.warn("Cannot add widget: No canvas ID provided");return}try{const c=Tr.getDatabase();let d=100,h=100;try{const y=localStorage.getItem("canvas_transform_state_v2");if(y){const{scale:g,positionX:w,positionY:x}=JSON.parse(y),C=window.innerWidth/2,S=window.innerHeight/2;d=(C-w)/g-a/2,h=(S-x)/g-s/2}}catch(y){console.error("Failed to calculate widget position",y)}const v=c.name.replace("project_canvas_gtd_","");if(i==="project_hub"){const y=Xa();await c.items.insert({id:y,title:"New Project",entity_type:"project",system_status:"active",created_at:Date.now(),updated_at:new Date().toISOString(),is_deleted:!1,user_id:v,properties:{content:"Project description goes here."}}),await c.widgets.insert({id:Xa(),canvas_id:e,widget_type:"project_header",geometry:{x:d,y:h,w:600,h:150,z:100},data_source_config:{project_id:y,title:"Project Header"},updated_at:new Date().toISOString(),is_deleted:!1,user_id:v}),await c.widgets.insert({id:Xa(),canvas_id:e,widget_type:"calendar_master",geometry:{x:d,y:h+160,w:600,h:400,z:100},data_source_config:{project_id:y,title:"Project Calendar"},updated_at:new Date().toISOString(),is_deleted:!1,user_id:v}),await c.widgets.insert({id:Xa(),canvas_id:e,widget_type:"smart_list",geometry:{x:d+610,y:h+160,w:300,h:400,z:100},data_source_config:{criteria:{"properties.project_id":y},title:"Project Actions"},updated_at:new Date().toISOString(),is_deleted:!1,user_id:v})}else await c.widgets.insert({id:Xa(),canvas_id:e,widget_type:i,geometry:{x:d,y:h,w:a,h:s,z:100},data_source_config:u,updated_at:new Date().toISOString(),is_deleted:!1,user_id:v});n(!1)}catch(c){console.error("Failed to add widget:",c),alert("Failed to add widget")}};return $.jsxs("div",{className:"relative font-sans z-50",children:[$.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 px-3 py-1.5 bg-[#333] hover:bg-[#444] text-white rounded-md border border-[#444] transition-colors text-sm",children:[$.jsx(NM,{size:16}),$.jsx("span",{children:"Add Widget"})]}),t&&$.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[$.jsx("div",{className:"p-2 bg-gray-50 border-b border-gray-100 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Component Library"}),$.jsx("div",{className:"p-1 max-h-[80vh] overflow-y-auto",children:cZ.map(i=>$.jsxs("button",{onClick:()=>{i.type==="inbox"?r("smart_list",i.w,i.h,{criteria:{do_date:null,system_status:"active"},title:"Inbox"}):r(i.type,i.w,i.h)},className:"w-full flex items-center gap-3 p-2 hover:bg-blue-50 rounded text-left transition-colors group",children:[$.jsx("div",{className:"p-2 bg-gray-100 rounded group-hover:bg-blue-100 text-gray-600 group-hover:text-blue-600 transition-colors",children:$.jsx(i.icon,{size:18})}),$.jsxs("div",{children:[$.jsx("div",{className:"text-sm font-medium text-gray-700 group-hover:text-blue-700",children:i.label}),$.jsxs("div",{className:"text-xs text-gray-400",children:[i.w,"x",i.h,"px"]})]})]},i.type))})]})]})},dZ=({title:e,canvasId:t})=>{const{user:n,logout:r}=dS(),[i,a]=J.useState(!1);return $.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#1e1e1e] border-b border-[#333] h-16 select-none",children:[$.jsx("div",{className:"flex items-center gap-4",children:$.jsx("h1",{className:"text-xl font-bold text-white",children:e})}),$.jsxs("div",{className:"flex items-center gap-4",children:[$.jsx(fZ,{canvasId:t}),n?$.jsxs("div",{className:"flex items-center gap-3",children:[$.jsxs("div",{className:"text-right",children:[$.jsx("div",{className:"text-sm font-medium text-white",children:n.email}),$.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",n.id]})]}),$.jsx("button",{onClick:r,className:"px-3 py-1.5 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded text-sm transition-colors",children:"Logout"})]}):$.jsx("button",{onClick:()=>a(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded text-sm font-medium transition-colors",children:"Login / Register"})]}),i&&$.jsx(lZ,{onClose:()=>a(!1)})]})},bc=5e4,hZ=({widgets:e,activeWidgetId:t,setActiveWidgetId:n,onBringToFront:r,scale:i})=>$.jsxs("div",{className:"relative",style:{width:bc,height:bc,backgroundImage:"radial-gradient(circle, #cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"},onMouseDown:()=>n(null),children:[$.jsx(EG,{widgets:e}),e.map(a=>$.jsx(uZ,{widget:a,isActive:t===a.id,onSetActive:()=>n(a.id),onBringToFront:()=>r(a.id),scale:i},a.id))]}),pZ=({canvasId:e="default_canvas"})=>{const{isDbReady:t,isAuthenticated:n}=dS(),[r,i]=J.useState([]),[a,s]=J.useState(null),[u,c]=J.useState(e==="default_canvas"?null:e),[d]=J.useState(()=>{try{const re=localStorage.getItem("canvas_transform_state_v2");if(re)return JSON.parse(re)}catch(re){console.error("Failed to load canvas state",re)}const N=typeof window<"u"?window.innerWidth:1920,T=typeof window<"u"?window.innerHeight:1080,U=bc/2,W=bc/2;return{scale:1,positionX:N/2-U,positionY:T/2-W}}),[h,v]=J.useState(d.scale),y=ST.debounce(N=>{if(!N.state)return;const{scale:T,positionX:U,positionY:W}=N.state;v(T),localStorage.setItem("canvas_transform_state_v2",JSON.stringify({scale:T,positionX:U,positionY:W}))},500),g=N=>{N.state&&v(N.state.scale)};J.useEffect(()=>{if(!t)return;if(e!=="default_canvas"){c(e);return}(async()=>{try{const U=await Tr.getDatabase().pages.findOne({selector:{is_default:!0}}).exec();U?(console.log("CanvasBoard: Using default page",U.id),c(U.id)):console.warn("CanvasBoard: No default page found yet")}catch(T){console.error("CanvasBoard: Failed to fetch default page",T)}})()},[t,e]),J.useEffect(()=>{if(!(!t||!u))try{const U=Tr.getDatabase().widgets.find({selector:{canvas_id:u,is_deleted:!1}}).$.subscribe({next:W=>i(W)});return()=>U.unsubscribe()}catch(N){console.error("Failed to subscribe to widgets:",N)}},[t,u]);const w=N=>{var he;const T=r.find(ce=>ce.id===N);if(!T)return;const U=((he=T.geometry)==null?void 0:he.z)||0,W=Math.max(...r.map(ce=>{var fe;return((fe=ce.geometry)==null?void 0:fe.z)||0})),re=U===W,pe=r.filter(ce=>{var fe;return(((fe=ce.geometry)==null?void 0:fe.z)||0)===W}).length===1;(!re||!pe)&&T.patch({geometry:{...T.geometry,z:W+1}})},x=A7(aC(ZT,{activationConstraint:{distance:10}}),aC(eM,{activationConstraint:{delay:250,tolerance:5}})),[C,S]=J.useState(null),E=N=>{N.active.data.current&&S(N.active.data.current)},P=async N=>{S(null);const T=Tr.getDatabase();await xG(N,T)};return $.jsxs("div",{className:"w-screen h-screen overflow-hidden bg-gray-50 flex flex-col",children:[$.jsx(dZ,{title:"Project Canvas GTD",canvasId:u||void 0}),$.jsx("div",{className:"flex-1 relative overflow-hidden",children:n?t?$.jsxs($.Fragment,{children:[$.jsxs(RX,{sensors:x,onDragStart:E,onDragEnd:P,children:[$.jsx(_7,{initialScale:d.scale,initialPositionX:d.positionX,initialPositionY:d.positionY,minScale:.1,maxScale:4,limitToBounds:!1,centerOnInit:!1,wheel:{step:.1},panning:{velocityDisabled:!0,excluded:["react-draggable","widget-header","dnd-draggable"]},onTransformed:y,onInit:g,children:$.jsx(x7,{wrapperClass:"w-full h-full",contentClass:"",contentStyle:{width:bc,height:bc},children:$.jsx(hZ,{widgets:r,activeWidgetId:a,setActiveWidgetId:s,onBringToFront:w,scale:h})})}),$.jsx(XX,{children:C?$.jsx("div",{className:"bg-white p-2 rounded shadow-lg border border-blue-200 w-48 opacity-90 cursor-grabbing origin-top-left",style:{transform:`scale(${h})`},children:$.jsx("div",{className:"text-sm font-medium text-gray-700 truncate",children:C.title||"Task"})}):null})]}),$.jsxs("div",{className:"fixed bottom-4 right-4 bg-white/95 backdrop-blur-sm border-2 border-gray-300 shadow-lg px-3 py-2 rounded-lg font-mono text-xs font-bold text-gray-600 uppercase tracking-wider pointer-events-none z-50",children:["Scale: ",h.toFixed(3)]})]}):$.jsx("div",{className:"w-full h-full flex items-center justify-center",children:$.jsx("div",{className:"text-gray-600 text-lg",children:"Initializing database..."})}):$.jsx("div",{className:"w-full h-full flex items-center justify-center",children:$.jsxs("div",{className:"text-center",children:[$.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-2",children:"Welcome"}),$.jsx("p",{className:"text-gray-500",children:"Please login or register to access your canvas."})]})})})]})},mZ=()=>$.jsx("div",{className:"relative w-screen h-screen",children:$.jsx(pZ,{})});function vZ(){return $.jsx("div",{className:"app",children:$.jsx(mZ,{})})}cw.createRoot(document.getElementById("root")).render($.jsx(Dt.StrictMode,{children:$.jsx(cV,{children:$.jsx(vZ,{})})}));
